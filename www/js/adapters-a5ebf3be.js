import{C as u}from"./controllers-596cf83c.js";import{a as p}from"./helpers-7b53fe93.js";function m(t,a){const i=u.getConnection,o=t(".controlPlay"),c=a(".controlPause");o&&i.setState(o,!0).catch(l=>console.warn("MediaControl.Alexa2",l.message||l)),c&&i.setState(c,!0).catch(l=>console.warn("MediaControl.Alexa2",l.message||l))}function d(t){const a=t+".Echo-Devices";return new Promise(i=>{const o=u.getConnection;o.getObjectView("system","device",{startkey:a+".",endkey:a+".\u9999"}).then(c=>{const l=[];for(const e of c)l.push(new Promise((s,r)=>{o.getStates(e.id+".*").then(n=>{n[e.id+".Player.currentState"]&&n[e.id+".online"]&&n[e.id+".online"].val===!0?s({id:e.id.replace(a+".",""),name:e.value.common.name+" ("+n[e.id+".Info.deviceTypeString"].val+")"}):r()})}));p(l).then(e=>{const s=[];e.forEach(r=>r.status==="fulfilled"&&s.push(r.value)),i(s)})})})}var f={_namespace:".Echo-Devices.{PLAYER}.Player",type:{state:".contentType",convert:t=>t==="LIVE_STATION"||t==="PODCASTS"?"RADIO":t},artist:".currentArtist",album:".currentAlbum",track:".currentTitle",year:null,cover:".mainArtUrl",play:{state:".currentState",action:".controlPlay"},pause:{action:".controlPause"},resume:{action:".controlPlay"},stop:{action:null},previous:{action:".controlPrevious"},next:{action:".controlNext"},progress:{state:".mediaProgress"},duration:{state:".mediaLength"},repeat:{state:".controlRepeat",action:".controlRepeat",display:{false:"off",true:"context"}},shuffle:{state:".controlShuffle",action:".controlShuffle",display:{false:"off",true:"on"}},volume:{state:".volume",action:".volume"}},T=Object.freeze(Object.defineProperty({__proto__:null,setPlayer:m,getPlayers:d,default:f},Symbol.toStringTag,{value:"Module"}));function P(t){}function v(t){const a=t;return new Promise(i=>{u.getConnection.getObjectView("system","device",{startkey:a,endkey:a+".\u9999"}).then(c=>{const l=[];for(const e of c)l.push({id:e.id.replace(a+".",""),name:e.value.common.name});i(l)})})}var g={_namespace:".{PLAYER}",artist:".netusb.artist",album:".netusb.album",track:".netusb.track",year:null,cover:".netusb.albumart_url",play:{state:".netusb.playback",convert:t=>t==="play",action:".netusb.playPause"},pause:{action:".netusb.playPause"},resume:{action:".netsub.playPause"},stop:{action:".netsub.stop"},previous:{action:".netsub.prev"},next:{action:".netsub.next"},progress:{state:null,convert:null,action:null,setter:null},duration:{state:".netusb.total_time"},repeat:{state:".netsub.repeat_stat",action:".netsub.repeat"},shuffle:{state:".netsub.shuffle_stat",action:".netsub.shuffle"},volume:{state:".main.volume",action:".main.volume",display:{off:0}}},w=Object.freeze(Object.defineProperty({__proto__:null,setPlayer:P,getPlayers:v,default:g},Symbol.toStringTag,{value:"Module"}));function b(t){}function _(t){const a=t+"._playing";return new Promise(i=>{const o=u.getConnection;o.getObjectView("system","channel",{startkey:a,endkey:a+".\u9999"}).then(c=>{const l=[];for(const e of c)l.push(new Promise((s,r)=>{o.getStates(e.id+".*").then(n=>{n[e.id+"._Controls.playback.play"]&&n[e.id+".player"]&&n[e.id+".player"].val?s({id:e.id.replace(a+".",""),name:n[e.id+".player"].val}):r()})}));p(l).then(e=>{const s=[];e.forEach(r=>r.status==="fulfilled"&&s.push(r.value)),i(s)})})})}function h(t){return parseInt(t)*60}var k={_namespace:"",align:{state:"._playing.{PLAYER}.Metadata.type",convert:t=>t==="movie"?"bottom":"top"},artist:"._playing.{PLAYER}.Metadata.grandparentTitle",album:"._playing.{PLAYER}.Metadata.parentTitle",track:"._playing.{PLAYER}.Metadata.title",year:"._playing.{PLAYER}.Metadata.year",cover:".events.thumb",play:{state:"._playing.{PLAYER}.playing",action:"._playing.{PLAYER}._Controls.playback.play"},pause:{action:"._playing.{PLAYER}._Controls.playback.pause"},resume:{action:"._playing.{PLAYER}._Controls.playback.play"},stop:{action:"._playing.{PLAYER}._Controls.playback.stop"},previous:{action:"._playing.{PLAYER}._Controls.playback.skipPrevious"},next:{action:"._playing.{PLAYER}._Controls.playback.skipNext"},progress:{state:null},duration:{state:"._playing.{PLAYER}.Metadata.duration",convert:h},repeat:{state:"._playing.{PLAYER}._Controls.playback.setRepeat",action:"._playing.{PLAYER}._Controls.playback.setRepeat",display:{off:"off",item:"item",all:"all"}},shuffle:{state:"._playing.{PLAYER}._Controls.playback.setShuffle",action:"._playing.{PLAYER}._Controls.playback.setShuffle",display:{off:"0",on:"1"}},volume:{state:"._playing.{PLAYER}._Controls.playback.setVolume",action:"._playing.{PLAYER}._Controls.playback.setVolume"}},M=Object.freeze(Object.defineProperty({__proto__:null,setPlayer:b,getPlayers:_,default:k},Symbol.toStringTag,{value:"Module"}));function A(t){const a=t(".devices.{PLAYER}.useForPlayback");a&&u.getConnection.setState(a,!0).catch(o=>console.warn("MediaControl.Spotify",o.message||o))}function R(t){const a=u.getConnection,i=t+".devices";return a.setState(t+".getDevices",!0).catch(o=>console.warn("MediaControl.Spotify",o.message||o)),new Promise(o=>{a.getObjectView("system","device",{startkey:i,endkey:i+".\u9999"}).then(c=>{const l=[];for(const e of c)l.push(new Promise((s,r)=>{a.getStates(e.id+".*").then(n=>{n&&n[e.id+".id"]!==null&&n[e.id+".id"]!==void 0&&n[e.id+".isAvailable"]!==null&&n[e.id+".isAvailable"]!==void 0&&n[e.id+".isAvailable"].val===!0&&n[e.id+".id"].val!==n[e.id+".name"].val?s({id:e.id.replace(i+".",""),name:n[e.id+".name"].val}):r()})}));p(l).then(e=>{const s=[];e.forEach(r=>r.status==="fulfilled"&&s.push(r.value)),o(s)})})})}function y(t){const[a,i]=t.split(":");return parseInt(a)*60+parseInt(i)}var E={_namespace:"",player:".player.device.id",artist:".player.artistName",album:".player.album",track:".player.trackName",year:null,cover:".player.albumImageUrl",play:{state:".player.isPlaying",action:".player.play",setter:(t,a)=>t},pause:{action:".player.pause"},resume:{action:".player.play"},stop:{action:null},previous:{action:".player.skipMinus"},next:{action:".player.skipPlus"},progress:{state:".player.progress",convert:y,action:".player.progressMs",setter:t=>t*1e3},duration:{state:".player.duration",convert:y},repeat:{state:".player.repeat",action:".player.repeat",display:{off:"off",track:"once",context:"all"},setter:t=>t==="once"?"track":t==="all"?"context":t},shuffle:{state:".player.shuffle",action:".player.shuffle",display:{off:"off",on:"on"}},volume:{state:".player.device.volume",action:".player.device.volume",display:{off:0}}},x=Object.freeze(Object.defineProperty({__proto__:null,setPlayer:A,getPlayers:R,default:E},Symbol.toStringTag,{value:"Module"}));function C(t){}function S(t){const a=t+".Realtime";return new Promise(i=>{const o=u.getConnection;o.getObjectView("system","channel",{startkey:a,endkey:a+".\u9999"}).then(c=>{const l=[];for(const e of c)l.push(new Promise((s,r)=>{o.getStates(e.id+".*").then(n=>{n[e.id+".NETRADIO.PLAYBACKINFO"]!==null?s({id:e.id.replace(a+".",""),name:e.value.common.name}):r()})}));p(l).then(e=>{const s=[];e.forEach(r=>r.status==="fulfilled"&&s.push(r.value)),i(s)})})})}var L={_namespace:"",artist:".Realtime.{PLAYER}.ARTIST",album:".Realtime.{PLAYER}.ALBUM",track:".Realtime.{PLAYER}.SONG",year:null,cover:null,play:{state:".Realtime.{PLAYER}.PLAYBACKINFO",action:".Commands.pause"},pause:{action:".Commands.pause"},resume:{action:".Commands.pause"},stop:{action:".Commands.stop"},previous:{action:".Commands.rewind"},next:{action:".Commands.skip"},progress:{state:".Realtime.{PLAYER}.ELAPSEDTIME"},duration:{state:".Realtime.{PLAYER}.TOTALTIME"},repeat:{state:null},shuffle:{state:null},volume:{state:".Commands.adjustVolume",action:".Commands.adjustVolume",display:{off:0}}},j=Object.freeze(Object.defineProperty({__proto__:null,setPlayer:C,getPlayers:S,default:L},Symbol.toStringTag,{value:"Module"}));export{T as a,w as m,M as p,x as s,j as y};
