import{_ as h,q as l,W as c,d5 as u,dV as v,dp as t,j as p,o as i,d as s,J as r,a1 as a,k as n,w as f,e as m,n as g,c$ as _,i as S,t as y}from"./index-9ff9d6ec.js";const M=l({name:"ModuleStateHTML",props:["widget","_containerSize"],setup(){return{i18n:c()}},data(){return{size:this._containerSize,state:{},loaded:!1,error:!1}},watch:{_containerSize(e){this.size=e}},methods:{gotState(e,o){this.loaded=!0,!e&&(this.state=o)}},computed:{config(){return u.joinConfig(this.widget.config,v)},html(){return this.state&&this.state.val||""},hasScript(){return this.html&&typeof this.html=="string"&&this.html.indexOf("<script")>-1}},created(){this.deviceConfig=this.widget.items&&this.widget.items[0]||{},this.device=t.get(this.deviceConfig.deviceId),this.device?t.listen(this.device.id,this.deviceConfig.primaryStateKey,this.gotState):(this.error="StateHTML: "+this.i18n.t("Device {deviceId} not found").replace("{deviceId}",this.deviceConfig.deviceId),console.warn(this.error),this.loaded=!0)},beforeUnmount(){this.device&&t.unlisten(this.device.id,this.deviceConfig.primaryStateKey,this.gotState)}}),w={class:"jarvis-StateHTML StateHTML"},C=["innerHTML"],L=["srcdoc"];function T(e,o,H,z,I,k){const d=p("alert");return i(),s("div",w,[r(n(_,{indeterminate:""},null,512),[[a,!e.loaded&&!e.error]]),r(n(d,null,{default:f(()=>[S(y(e.error),1)]),_:1},512),[[a,e.loaded&&e.error]]),r(m("div",null,[e.hasScript?(i(),s("iframe",{key:1,class:"StateHTML-iFrame",style:g({border:0,height:e.size.height+"px"}),srcdoc:e.html},null,12,L)):(i(),s("div",{key:0,innerHTML:e.html},null,8,C))],512),[[a,e.loaded&&!e.error]])])}var D=h(M,[["render",T],["__scopeId","data-v-53241143"]]);export{D as default};
