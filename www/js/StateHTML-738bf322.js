import{_ as L,q as T,W as w,c as n,a2 as d,dq as c,b6 as H,j as C,o as u,d as v,J as p,a1 as f,k as S,w as I,e as k,n as $,c$ as B,i as D,t as b,d7 as j,dW as z}from"./index-80522cd8.js";const N=T({name:"ModuleStateHTML",props:["widget","_containerSize"],setup(e){const m=w(),_=n(()=>e.widget.config);n(()=>({...j.joinConfig(_.value,z)}));const a=d(!1),t=d(null),s=d(),i=(l,M)=>{if(a.value=!0,l)return t.value=l.message||l,t.value;s.value=M},o=n(()=>s.value&&s.value.val||""),y=n(()=>o.value&&typeof o.value=="string"&&o.value.indexOf("<script")>-1),r=e.widget.items&&e.widget.items[0]||{},g=c.get(r.deviceId);let h=[];return g?h=c.listen(g.id,r.primaryStateKey,i):(t.value=m.t("Device {deviceId} not found").replace("{deviceId}",r.deviceId),console.warn("StateHTML",t.value),a.value=!0),H(()=>c.unlisten(h)),{loaded:a,error:t,html:o,hasScript:y}}}),V={class:"jarvis-StateHTML StateHTML"},q=["innerHTML"],F=["srcdoc"];function K(e,m,_,a,t,s){const i=C("alert");return u(),v("div",V,[p(S(B,{indeterminate:""},null,512),[[f,!e.loaded&&!e.error]]),p(S(i,null,{default:I(()=>[D(b(e.error),1)]),_:1},512),[[f,e.loaded&&e.error]]),p(k("div",null,[e.hasScript?(u(),v("iframe",{key:1,class:"StateHTML-iFrame",style:$({border:0,height:e._containerSize.height+"px"}),srcdoc:e.html},null,12,F)):(u(),v("div",{key:0,innerHTML:e.html},null,8,q))],512),[[f,e.loaded&&!e.error]])])}var E=L(N,[["render",K],["__scopeId","data-v-529dd270"]]);export{E as default};
