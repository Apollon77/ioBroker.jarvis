import{_ as C,q as K,a2 as N,c as I,dq as p,b6 as k,a3 as L,o as d,a as m,w as l,k as _,Z as G,i as O,t as V,M as v,d as $,ad as B,p as D,g as h,L as w}from"./index-5ed861c6.js";const E=K({name:"ModuleStateListGroup",props:["devices","deviceConfig"],setup(t){const u=N({}),g=I(()=>{const e=Object.values(u.value),n=e.filter(o=>o===!0),i=e.filter(o=>o===!1);return e.length===n.length?!0:e.length===i.length?!1:null}),y=(e,n,i)=>{if(e)return;const{item:o}=t.devices[i.id+"#"+n.key]||{},r=n&&n.val!==void 0?n.val:null;if(o&&o.useInGroup!==!1){let{on:s,off:a}=n&&n.properties||{};s=s!==void 0?s:!0,u.value[i.id+"-"+n.stateKey]=r!==null?r.toString()===s.toString()||typeof r=="number"&&r>0:a}},S=(e=!0)=>{for(const n in t.devices){const{device:i,item:o}=t.devices[n],r=o.primaryStateKey.toLowerCase(),s=i.states[r]&&i.states[r].properties||{},a=u.value[i.id+"-"+o.primaryStateKey],b=typeof a=="boolean"?!1:typeof a=="number"?!0:!Number.isNaN(parseFloat(a))&&a.toString().length===parseFloat(a).toString().length;e===!0&&s.setOn!==void 0?e=s.setOn:e===!1&&s.setOff!==void 0?e=s.setOff:e===!0&&s.on!==void 0||e===!1&&s.off!==void 0?e=e===!0?s.on:s.off:b&&typeof e=="boolean"&&(e=e===!0?parseInt(s.level)||100:0),e=typeof e=="string"&&(e==="true"||e==="false")?e==="true":e;const c=parseInt(e)||null;e=typeof e=="string"&&c!==null&&!Number.isNaN(c)&&c.toString().length===e.length?c:e,o.useInGroup!==!1&&p.set(i.id,o.primaryStateKey,e)}};let f=[];if(t.deviceConfig.actions)for(const e in t.devices)t.devices[e].item.primaryStateKey&&(f=f.concat(p.listen(t.devices[e].device.id,t.devices[e].item.primaryStateKey,y)));return k(()=>p.unlisten(f)),{components:L.Components._defaults.action,groupDevicesStates:u,groupState:g,set:S}}}),F={key:0};function Q(t,u,g,y,S,f){return d(),m(w,{dense:"",class:"jarvis-StateListGroup"},{default:l(()=>[_(v,null,{default:l(()=>[_(G,{overline:""},{default:l(()=>[O(V(t.deviceConfig.name),1)]),_:1})]),_:1}),t.deviceConfig.actions===!0?(d(),m(v,{key:0,side:""},{default:l(()=>[t.deviceConfig.groupElement?(d(),$("div",F,[(d(),m(B(t.components[t.deviceConfig.groupElement]),D(t.$props,{onSet:t.set,stateKey:"group",state:{properties:{},stateStyle:{},val:t.groupState}}),null,16,["onSet","state"]))])):h("",!0)]),_:1})):h("",!0)]),_:1})}var q=C(E,[["render",Q]]);export{q as default};
