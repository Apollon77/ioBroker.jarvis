import{_ as h,q as l,d7 as c,e6 as v,dq as t,j as f,o as i,d as s,J as r,a2 as a,k as n,d1 as p,w as m,e as u,n as g,i as _,t as S}from"./index-10b6d084.js";const y=l({name:"StateHTML",props:["widget","_containerSize"],data(){return{size:this._containerSize,state:{},loaded:!1,error:!1}},watch:{_containerSize(e){this.size=e}},methods:{gotState(e,o){this.loaded=!0,!e&&(this.state=o)}},computed:{config(){return c.joinConfig(this.widget.config,v)},html(){return this.state&&this.state.val||""},hasScript(){return this.html&&typeof this.html=="string"&&this.html.indexOf("<script")>-1}},created(){this.deviceConfig=this.widget.items&&this.widget.items[0]||{},this.device=t.get(this.deviceConfig.deviceId),this.device?t.listen(this.device.id,this.deviceConfig.primaryStateKey,this.gotState):(this.error="StateHTML: "+this.$i18n.t("Device {deviceId} not found").replace("{deviceId}",this.deviceConfig.deviceId),console.warn(this.error),this.loaded=!0)},beforeUnmount(){this.device&&t.unlisten(this.device.id,this.deviceConfig.primaryStateKey,this.gotState)}}),w={class:"jarvis-StateHTML StateHTML"},C=["innerHTML"],L=["srcdoc"];function M(e,o,T,H,z,k){const d=f("alert");return i(),s("div",w,[r(n(p,{indeterminate:""},null,512),[[a,!e.loaded&&!e.error]]),r(n(d,null,{default:m(()=>[_(S(e.error),1)]),_:1},512),[[a,e.loaded&&e.error]]),r(u("div",null,[e.hasScript?(i(),s("iframe",{key:1,class:"StateHTML-iFrame",style:g({border:0,height:e.size.height+"px"}),srcdoc:e.html},null,12,L)):(i(),s("div",{key:0,innerHTML:e.html},null,8,C))],512),[[a,e.loaded&&!e.error]])])}var $=h(y,[["render",M],["__scopeId","data-v-96eec038"]]);export{$ as default};
