import{j as W,k as $,l as ze,m as Y,n as ee,o as T,p as M,s as te,t as ae,c as Ve,u as be,v as Le,w as G,x as Pe,y as re,C as ie,z as Ce,a as ke,d as x,e as J,A as ce,E as Se,F as Ae,f as De,G as Te,H as we,I as Me,J as qe}from"./vendor.quasar-78ba37d9.js";import{a as F,i as Je}from"./controllers-596cf83c.js";import{f as me,_ as k,i as ve,z as ye}from"./helpers-7b53fe93.js";import{d as S,r as j,o,a as v,h as n,i,e as m,t as b,n as _,f as p,j as z,g as f,l as I,p as V,w as $e,q as Oe,s as Ne,u as q,b as E,v as D,F as N,x as U,y as de,z as Ue,A as je,k as H,B as ne,C as ue,D as Be,E as Qe,G as Fe}from"./vendor.vue-1bbf3cb4.js";import{m as He}from"./vendor.marked-ad25c3e5.js";import{c as Ye}from"./vendor.floating-ui-24ae3fc3.js";import"./vendor.events-e8bb2ecf.js";import{_ as Ke}from"./vendor.rfdc-06a2e69e.js";import"./vendor.socket.io-client-fd03852a.js";import{T as Re}from"./config-f4693115.js";import"./boot-d33196cc.js";import{d as _e,u as oe,b as Ge}from"./stores-22cbae97.js";import"./vendor.sha.js-0bffd5bc.js";/* empty css                    */import{u as pe}from"./vendor.vue-i18n-e0977824.js";import{F as le}from"./functions-9f904a0e.js";import{J as We}from"./vendor.jsoneditor-99ae7f56.js";/* empty css                              */const Ze=S({name:"StateExplorer",props:["id","selected"],data(){return{filter:"",lastUpdate:me(F.get("objectsUpdated"),"dd. MMMM yyyy, HH:mm:ss"),loading:!1,objectTree:{},instanceList:[],selectedItem:this.selected,expandedItems:[]}},methods:{expandNode(e){if(e in this.objects){const t=e.split(".");t.splice(0,2,t[0]+"."+t[1]);let s="";t.forEach(a=>{s+=s?"."+a:a,this.$refs.StateExplorer.setExpanded(s,!0)})}},onLazyLoad({key:e,done:t}){t(this.objectTree[e]&&this.objectTree[e].children||[])},onSelect(e){e=e||this.selectedItem,this.$refs.StateExplorer.isExpanded(e)?this.$refs.StateExplorer.setExpanded(e||this.selectedItem,!1):this.objectTree[e]&&this.objectTree[e].children&&this.$refs.StateExplorer.setExpanded(e,!0),this.selectedItem=e,this.$emit("onChange",{id:this.id||"StateExplorer",value:e||""})},filterMethod(e,t){console.warn(e._id,t);const s=this.objectTree[e._id]||null,a=e._id.indexOf(t)>-1;return s&&s.children&&s.children.forEach(r=>{console.log("->"+r._id)}),a},updateObjects(){this.loading=!0,Je.getObjects().then(()=>{this.lastUpdate=me(F.get("objectsUpdated"),"dd. MMMM yyyy, HH:mm:ss"),this.objects=F.get("objects"),this.objectList=F.get("objectList"),this.getInstanceList(),this.loading=!1})},getInstanceList(){const e={},t=[];this.objectList.forEach(s=>{const a=this.objects[s];if(a){const r=a._id.substr(0,a._id.lastIndexOf(".")),u=a._id.substr(0,a._id.indexOf(".",a._id.indexOf(".")+1));u&&!t.find(d=>d._id===u)&&t.push({_id:u,label:u,lazy:!0}),e[r]=e[r]||{children:[]},e[r].children.findIndex(d=>d._id===a._id)===-1&&e[r].children.push({...a,label:a._id.substr(a._id.lastIndexOf(".")+1),lazy:a.type!=="state",isState:a.type==="state"});const h=a._id.split(".");h.length>2&&h.forEach((d,l)=>{const y=h.slice(0,l).join("."),C=y.substr(0,y.lastIndexOf("."));y&&C&&(e[C]=e[C]||{children:[]},e[C].children.findIndex(L=>L._id===y)===-1&&e[C].children.push({_id:y,label:y.substr(y.lastIndexOf(".")+1),lazy:!0,isState:!1}))})}});for(const s in e)e[s].children.sort((a,r)=>a.isState===!1&&r.isState===!0?-1:a.isState===!0&&r.isState===!1?1:a.label.toLowerCase()===r.label.toLowerCase()?0:a.label.toLowerCase()>r.label.toLowerCase()?1:-1);this.objectTree=e,this.instanceList=t.sort((s,a)=>s.label.toLowerCase()===a.label.toLowerCase()?0:s.label.toLowerCase()>a.label.toLowerCase()?1:-1)}},mounted(){this.selected&&(this.expandNode(this.selected),setTimeout(()=>{const e=document.querySelector(".q-tree__node--selected");e&&e.scrollIntoView(!1)},2e3))},created(){this.filterTimeout=null,this.objects=F.get("objects"),this.objectList=F.get("objectList"),this.getInstanceList()}}),Xe={style:{"padding-bottom":"16px"}},xe={class:"items-center justify-end row"},et={style:{"padding-right":"8px"}},tt={class:"overflow-dots",style:{width:"5%"}},nt={class:"overflow-dots q-pr-xs",style:{width:"25%"}},ot={class:"overflow-dots q-pr-xs",style:{width:"45%"}},st={class:"overflow-dots",style:{width:"10%"}},lt={class:"overflow-dots",style:{width:"15%"}};function it(e,t,s,a,r,u){const h=j("paper"),d=j("icon");return o(),v("div",Xe,[n(h,{class:"StateExplorerBar",style:{"min-height":"54px"}},{default:i(()=>[n(W),m("div",xe,[m("span",et,b(e.$t("Last Update"))+": "+b(e.lastUpdate),1),n($,{color:"primary",label:e.$t("Refresh"),icon:"refresh",onClick:e.updateObjects,loading:e.loading,disable:e.loading},null,8,["label","onClick","loading","disable"])])]),_:1}),n(h,{class:"q-pa-sm"},{default:i(()=>[n(ze,{ref:"StateExplorer",nodes:e.instanceList,"node-key":"_id","label-key":"label",onLazyLoad:e.onLazyLoad,"selected-color":"primary","onUpdate:selected":e.onSelect,selected:e.selectedItem},{"default-header":i(l=>[m("div",{class:_(["row full-width",{item:!l.node.children||l.node.children.length===0}])},[m("div",tt,[n(d,{color:e.selectedItem&&e.selectedItem===l.node._id?"accent":"primary",name:l.node.type==="state"?e.selectedItem&&e.selectedItem===l.node._id?"mdi-bookmark":"mdi-bookmark-outline":"folder"},null,8,["color","name"])]),m("div",nt,b(l.node.label),1),m("div",ot,[l.node.common&&l.node.common.name&&l.node.common.name.length>50?(o(),p(Y,{key:0},{default:i(()=>[z(b(l.node.common.name),1)]),_:2},1024)):f("",!0),z(" "+b(l.node.common&&l.node.common.name?l.node.common.name.length>50?l.node.common.name.substr(0,47)+"...":l.node.common.name:""),1)]),m("div",st,b(l.node.type),1),m("div",lt,b(l.node.common&&l.node.common.role?l.node.common.role:""),1)],2)]),_:1},8,["nodes","onLazyLoad","onUpdate:selected","selected"])]),_:1})])}var at=k(Ze,[["render",it]]);const rt=S({name:"StateExplorerPopup",props:["open"],components:{StateExplorer:at},data(){return{state:""}},methods:{onClose(){this.$emit("onClose",{id:this.id||"StateExplorer",value:this.state})},onSave(){this.$emit("onSave",{id:this.id||"StateExplorer",value:this.state})},onChange({value:e}){this.state=e}}}),dt={class:"text-h6"};function ut(e,t,s,a,r,u){const h=j("state-explorer");return o(),p(ae,{"model-value":e.open,persistent:""},{default:i(()=>[n(ee,{class:"column full-height",style:{width:"1000px","max-width":"80vw"}},{default:i(()=>[n(T,{class:"row items-center"},{default:i(()=>[m("div",dt,b(e.$t("State Explorer")),1),n(W),n($,{flat:"",round:"",color:"grey",icon:"close",onClick:e.onClose},null,8,["onClick"])]),_:1}),n(M),n(T,{class:"col q-pa-sm scroll body"},{default:i(()=>[n(h,I({onOnChange:e.onChange},e.$attrs),null,16,["onOnChange"])]),_:1}),n(M),n(te,{align:"right"},{default:i(()=>[n($,{flat:"",label:e.$t("Cancel"),color:"negative",onClick:e.onClose},null,8,["label","onClick"]),n($,{flat:"",label:e.$t("Apply"),color:"primary",onClick:e.onSave,disable:e.state===""},null,8,["label","onClick","disable"])]),_:1})]),_:1})]),_:1},8,["model-value"])}var _n=k(rt,[["render",ut]]);const pt=S({name:"JsonEditor",emits:["onChange"],props:{id:{type:String},json:{type:[String,Object,Array]}},setup(e,{emit:t}){const s=_e(),a=V();let r=null;const u=l=>{if(l&&typeof l=="string")try{return JSON.parse(l)}catch{return l||{}}return l||{}},h=()=>{let l=null;if(!r){const y={mode:"code",modes:["code","tree","view","form","text"],onChangeText:C=>{clearTimeout(l),l=setTimeout(()=>{try{const L=JSON.parse(C);t("onChange",{id:e.id,value:C,valueJson:L})}catch(L){t("onChange",{id:e.id,value:null,_error:L})}},500)}};r=new We(a.value,y),r.focus()}r.set(u(e.json))},d=()=>{r&&(r.destroy(),r=null)};return $e(()=>e.json,l=>r.set(u(l)),{deep:!0}),$e(()=>s.settings.configExpertMode,()=>{r.setMode("text"),r.setMode("code")}),Oe(()=>h()),Ne(()=>d()),{elJsonEditor:a}}}),ht={class:"jsoneditor-container"},ft={ref:"elJsonEditor",class:"jsoneditor-box"};function ct(e,t,s,a,r,u){return o(),v("div",ht,[m("div",ft,null,512)])}var mt=k(pt,[["render",ct],["__scopeId","data-v-690b2cb5"]]);const vt=S({name:"Tours",props:{tour:{type:String},start:{type:Boolean,default:!1}},setup(e){const t=V(!1),s=V(null),a=Re[e.tour],r=V(null),u=V(null);let h,d,l={};const y=(c,O)=>{d=O?c.style.position:d,c.style.position=O?c.style.position||"relative":d,c.style.zIndex=O?5001:null,c.style.border=O?"5px solid #fff":null,c.style.opacity=O?.7:"unset",h=O?c.parentElement.style.zIndex:h,c.parentElement.style.zIndex=O?5001:h},C=(c,O=!0)=>{const X=c.spotlight||c.target;if(t.value=!0,X){const P=document.querySelector(X);if(P){if(y(P,O),c.onSpotlightClick!==void 0&&(P.style.pointerEvents="all",P.onclick=()=>c.onSpotlightClick({props:e,step:c,nextStep:Q,previousStep:B,skipStep:R,finishTour:g})),c.targetStyle&&O===!0){l={};for(const A in c.targetStyle)l[A]=P.style[A],P.style[A]=c.targetStyle[A]}else if(c.targetStyle&&O===!1)for(const A in c.targetStyle)P.style[A]=l[A]}}},L=c=>{const O=document.querySelector(c.value.target||"body"),X={...c.value.params||{},middleware:[]};return Ye(O,s.value,X).then(P=>{const{x:A,y:he}=P;s.value.firstChild&&(s.value.firstChild.style.display="block");const Ie=s.value.offsetWidth,se=s.value.offsetHeight,fe=document.querySelector("body");fe.style.pointerEvents="none";const Ee=fe.offsetHeight-se;return s.value.style.left=(c.value.target?A+15:"calc(50% - "+Ie/2)+"px",s.value.style.top=(c.value.target?Math.max(10,Math.min(Ee-10,he-se/2+10)):he/2-se/2)+"px",s.value.style.pointerEvents="all",!0})},K=c=>{u.value;const O=u.value===null||u.value===c-2;u.value=c-1,r.value=a[u.value],L(r).then(()=>{a[u.value-1]&&C(a[u.value-1],!1),a[u.value+1]&&C(a[u.value+1],!1),C(r.value)}),O&&r.value&&r.value.onEnter&&r.value.onEnter({props:e,step:r,previousStep:B,nextStep:Q,finishTour:g,skipStep:R})},B=()=>K(u.value),Q=()=>K(u.value+2),R=()=>{C(r.value,!1),r.value=null,t.value=!1;const c=document.querySelector("body");c.style.pointerEvents="all"},g=()=>{R()},w=q(()=>u.value<=0),Z=q(()=>u.value===a.length-1);return oe(),Oe(()=>{e.start&&K(1)}),{marked:He,tooltip:s,overlay:t,step:r,isFirst:w,isLast:Z,previousStep:B,nextStep:Q,skipStep:R,finishTour:g}}}),yt={class:"tooltip",ref:"tooltip"},$t={class:"text-h6"},gt=["innerHTML"];function bt(e,t,s,a,r,u){const h=j("q-overlay");return o(),v(N,null,[n(h,{modelValue:e.overlay,"onUpdate:modelValue":t[0]||(t[0]=d=>e.overlay=d),"no-scroll":!0,"z-index":5e3,opacity:.7},null,8,["modelValue","opacity"]),m("div",yt,[e.step?(o(),p(ee,{key:e.step.title,class:"step"},{default:i(()=>[n(T,null,{default:i(()=>[m("div",$t,b(e.$t(e.step.title||"")),1)]),_:1}),n(M),e.step.loading===!0?(o(),p(Ve,{key:0,indeterminate:""})):f("",!0),n(T,{style:{"max-height":"50vh"},class:"body scroll"},{default:i(()=>[m("div",{innerHTML:e.marked.parse(e.$t(e.step.message||""))},null,8,gt)]),_:1}),n(M),e.step.buttons!==!1?(o(),p(te,{key:1,class:"nowrap"},{default:i(()=>[n($,{onClick:e.skipStep,flat:"",label:e.$t("Skip"),color:"accent"},null,8,["onClick","label"]),n(W),e.step.secondaryAction===void 0?E((o(),p($,{key:0,onClick:e.previousStep,flat:"",label:e.$t("Previous"),color:"secondary"},null,8,["onClick","label"])),[[D,!e.isFirst]]):E((o(),p($,{key:1,onClick:t[1]||(t[1]=d=>e.step.secondaryAction({step:e.step,previousStep:e.previousStep,nextStep:e.nextStep,finishTour:e.finishTour,skipStep:e.skipStep})),flat:"",label:e.$t(e.step.secondaryButton),color:"secondary"},null,8,["label"])),[[D,!e.isFirst]]),e.step.primaryButton===void 0?E((o(),p($,{key:2,onClick:e.nextStep,flat:"",label:e.$t("Next"),color:"primary"},null,8,["onClick","label"])),[[D,!e.isLast]]):f("",!0),e.step.primaryButton===void 0?E((o(),p($,{key:3,onClick:e.finishTour,label:e.$t("Finish"),color:"primary"},null,8,["onClick","label"])),[[D,e.isLast]]):E((o(),p($,{key:4,onClick:t[2]||(t[2]=d=>e.step.primaryAction({step:e.step,previousStep:e.previousStep,nextStep:e.nextStep,finishTour:e.finishTour,skipStep:e.skipStep})),flat:"",label:e.$t(e.step.primaryButton),color:"primary"},null,8,["label"])),[[D,!e.isFirst]])]),_:1})):f("",!0)]),_:1})):f("",!0)],512)],64)}var Gn=k(vt,[["render",bt]]);const Ct=S({name:"Divider",props:["label"]}),kt={class:"row full-width"},St={class:"col",style:{margin:"auto 0"}},wt={style:{"text-align":"center"}},Ot={class:"col",style:{margin:"auto 0"}};function jt(e,t,s,a,r,u){return o(),v("div",kt,[m("div",St,[n(M)]),m("div",wt,[z(" \xA0\xA0"),m("em",null,b(e.label),1),z("\xA0\xA0 ")]),m("div",Ot,[n(M)])])}var Wn=k(Ct,[["render",jt]]);const It=S({name:"Alert",props:["icon","title","color"],computed:{getIcon(){const e=this.icon||"mdi-alert";return this.color,e}},created(){const e=be(this.color||"warning");this.colors={backgroundColor:Le.changeAlpha(e,.2),color:e,borderColor:e}}}),Et={key:0,class:"AlertIcon"},zt={class:"AlertBox"},Vt=["innerHTML"],Lt={class:"AlertMessage"};function Pt(e,t,s,a,r,u){return o(),v("div",{class:"Alert q-ma-sm",style:de(e.colors)},[e.getIcon?(o(),v("div",Et,[n(G,{name:e.getIcon,size:"lg"},null,8,["name"])])):f("",!0),m("div",zt,[e.title?(o(),v("strong",{key:0,class:"AlertTitle",innerHTML:e.$t(e.title)},null,8,Vt)):f("",!0),m("p",Lt,[U(e.$slots,"default",{},void 0,!0)])])],4)}var Zn=k(It,[["render",Pt],["__scopeId","data-v-f665c3b2"]]);const At=S({name:"Icon",props:["name","tooltip","loading","color","styles","size","vAlign","IconButton"],data(){return{icon:ve(this.name,!0),dataColor:this.getColor(this.color),dataStyles:this.styles}},watch:{colors(){this.dataColor=this.getColor(this.color)},color(e){this.dataColor=this.getColor(e)},name(e){this.icon={...ve(e,!0)}},styles(e){this.dataStyles=e}},computed:{colors(){const e=oe();return e.settings.brandAccent+"|"+e.settings.brandPrimary+"|"+e.settings.brandSecondary},style(){const e=typeof this.dataStyles!="object"?{}:this.dataStyles;return{"vertical-align":this.vAlign||"text-bottom",color:this.dataColor,...e||{}}}},methods:{getColor(e){return["primary","secondary","accent","positive","warning","negative","info"].includes(e)?be(e):e}}}),Dt={key:1},Tt={key:3},Mt=["data-icon"];function qt(e,t,s,a,r,u){return o(),v("span",{class:_(["jarvis-icon icon",{IconButton:e.IconButton!==void 0}]),key:JSON.stringify({...e.icon,...e.style})},[e.tooltip?(o(),p(Y,{key:0},{default:i(()=>[z(b(e.tooltip),1)]),_:1})):f("",!0),e.loading?(o(),v("span",Dt,[n(G,I({name:"mdi-spin mdi-loading",size:e.size||"sm",style:e.style},e.$attrs),null,16,["size","style"])])):!e.loading&&e.icon.name&&e.icon.name.indexOf("img:")>-1?(o(),v("span",{key:2,class:_([...e.icon.classes,{["icon-"+(e.size||"sm")]:e.style.fontSize===void 0,"flip-horizontal":e.icon.attributes.flip==="h","flip-vertical":e.icon.attributes.flip==="v",["rotate-"+e.icon.attributes.rotate]:e.icon.attributes.rotate!==void 0,blink:e.icon.attributes.blink,spin:e.icon.attributes.spin}])},[n(G,I({name:e.icon.name,size:e.size||"sm",style:e.style},e.$attrs),null,16,["name","size","style"])],2)):!e.loading&&e.icon.name&&e.icon.name.indexOf("img:")===-1?(o(),v("span",Tt,[m("span",{"data-icon":e.icon.name,style:de(e.style),class:_(["iconify",[...e.icon.classes,{["icon-"+(e.size||"sm")]:e.style.fontSize===void 0,"flip-horizontal":e.icon.attributes.flip==="h","flip-vertical":e.icon.attributes.flip==="v",["rotate-"+e.icon.attributes.rotate]:e.icon.attributes.rotate!==void 0,blink:e.icon.attributes.blink,spin:e.icon.attributes.spin}]])},null,14,Mt)])):f("",!0)],2)}var Xn=k(At,[["render",qt]]);const Jt=S({name:"InputButton",emits:["onClick","onSelect","onSetValue"],props:{id:{type:String},icon:{type:String},items:{type:Array,default:null},selected:{type:String},label:{type:String},round:{type:Boolean,default:!1},size:{type:String,default:"sm"},color:{type:String},flat:{type:Boolean,default:!0},tooltip:{type:String,default:null},denseMenu:{type:Boolean,default:!1},popupEdit:{type:[String,Number]}},setup(e,{emit:t}){const s=V(),a=V(e.popupEdit),r=u=>{t("onSetValue",u),s.value.hide()};return Ue(()=>{a.value=e.popupEdit}),{onClick:()=>t("onClick"),onSelect:u=>t("onSelect",{id:e.id,val:u}),iconSize:q(()=>({xs:"xs",sm:"xs",md:"sm",lg:"md",xl:"lg"})[e.size]),onSetValue:r,elPopupEdit:s,popup:a}}}),Nt={key:0,style:{"margin-left":"4px"}},Ut={class:"q-mb-xs"},Bt={class:"row"};function Qt(e,t,s,a,r,u){const h=j("icon");return o(),p($,I(e.$props,{icon:void 0,label:void 0,onClick:ne(e.onClick,["stop"])}),{default:i(()=>[n(h,I({...e.$props,...e.$attrs,tooltip:void 0,color:void 0},{name:e.icon,size:e.iconSize}),null,16,["name","size"]),e.label?(o(),v("span",Nt,b(e.label),1)):f("",!0),e.popupEdit!==void 0?(o(),p(Pe,{key:1,ref:"elPopupEdit",modelValue:e.popup,"onUpdate:modelValue":t[0]||(t[0]=d=>e.popup=d),style:{width:"350px"}},{default:i(d=>[m("div",Ut,[n(re,{modelValue:d.value,"onUpdate:modelValue":l=>d.value=l,dense:"",autofocus:"",onKeyup:je(l=>e.onSetValue(d.value),["enter"])},null,8,["modelValue","onUpdate:modelValue","onKeyup"])]),m("div",Bt,[n(W),E(n($,{flat:"",color:"negative",label:e.$t("Cancel")},null,8,["label"]),[[ie]]),n($,{flat:"",color:"primary",label:e.$t("Ok"),onClick:l=>e.onSetValue(d.value)},null,8,["label","onClick"])])]),_:1},8,["modelValue"])):f("",!0),e.tooltip?(o(),p(Y,{key:2,offset:[10,10]},{default:i(()=>[z(b(e.$t(e.tooltip)),1)]),_:1})):f("",!0),e.items?(o(),p(Ce,{key:3},{default:i(()=>[n(ke,{dense:e.denseMenu,style:{"min-width":"100px"}},{default:i(()=>[(o(!0),v(N,null,H(e.items,d=>E((o(),p(x,{clickable:"",key:d.id,onClick:l=>e.onSelect(d.id),active:d.id===e.selected},{default:i(()=>[d.icon?(o(),p(J,{key:0,avatar:"",center:""},{default:i(()=>[n(h,{size:e.denseMenu?"xs":"sm",name:d.icon},null,8,["size","name"])]),_:2},1024)):f("",!0),n(J,null,{default:i(()=>[z(b(d.label||d.name),1)]),_:2},1024)]),_:2},1032,["onClick","active"])),[[ie]])),128))]),_:1},8,["dense"])]),_:1})):f("",!0)]),_:1},16,["onClick"])}var Ft=k(Jt,[["render",Qt]]);const Ht=S({name:"InputDate",emits:["onChange"],props:{label:{type:String,default:""},value:{type:[Object,String]},dense:{type:[Boolean,String],default:!1}},data(){return{date:{from:this.value&&this.value.from?this.flattenDate(this.value.from):"",to:this.value&&this.value.to?this.flattenDate(this.value.to):""}}},computed:{formattedDate(){return this.date&&this.date.from&&this.date.to?ce.formatDate(this.date.from,"DD.MM.YYYY")+" - "+ce.formatDate(this.date.to,"DD.MM.YYYY"):""}},methods:{openDatePicker(){this.$refs.qDateProxy.show()},onChange(e){this.$emit("onChange",{...this.$attrs,...this.$props,value:e})},flattenDate(e){return e.year&&e.month&&e.day?e.year+"/"+ye(e.month)+"/"+ye(e.day):e}}}),Yt={class:"row items-center justify-end"};function Kt(e,t,s,a,r,u){return o(),p(re,{label:e.$t(e.label),value:e.formattedDate,"stack-label":"",readonly:"",onClick:e.openDatePicker,dense:e.dense&&e.dense!=="bottom","hide-bottom-space":e.dense||e.dense==="bottom"},{append:i(()=>[n(G,{name:"event",class:"cursor-pointer"},{default:i(()=>[n(Se,{ref:"qDateProxy","transition-show":"scale","transition-hide":"scale"},{default:i(()=>[n(Ae,{modelValue:e.date,"onUpdate:modelValue":t[0]||(t[0]=h=>e.date=h),onRangeEnd:e.onChange,range:"","first-day-of-week":"1","today-btn":""},{default:i(()=>[m("div",Yt,[E(n($,{label:"Close",color:"primary",flat:""},null,512),[[ie]])])]),_:1},8,["modelValue","onRangeEnd"])]),_:1},512)]),_:1})]),_:1},8,["label","value","onClick","dense","hide-bottom-space"])}var Rt=k(Ht,[["render",Kt]]);const _t=S({name:"InputSelect",emits:["onChange","onSelect"],props:["required","id","placeholder","clearable","label","icon","value","dense","options","useInput","useChips","allowUserInput","multiple","displayValue","info","link","maxDropdownOptions","reset","isPro"],setup(){const e=pe(),t=oe(),s=Ge();return{i18n:e,jarvis:t,iobroker:s}},methods:{selectAll(){const e=this.getOptions().map(t=>t.value);this.onSelect(e)},unselectAll(){this.onSelect([])},getOptions(){return((typeof this.options=="function"?this.options({...this.$props,...this.$attrs},{jarvis:this.jarvis,iobroker:this.iobroker}):this.options)||[]).map(t=>({...t,label:t.translate&&this.i18n.t(t.translate)||t.label}))},onChange(e){this.required!==void 0&&!e&&(this.error=this.i18n.t("No input given"),this.$emit("onChange",{...this.$attrs,...this.$props,_error:this.error}),this.$emit("onSelect",{...this.$attrs,...this.$props,_error:this.error})),this.allowUserInput!==void 0&&this.val.value!==e&&this.val!==e&&(this.val=e,this.$emit("onChange",{...this.$attrs,...this.$props,value:e||""}))},onFilter(e,t){t(()=>{const s=this.useInput===void 0||e===""?null:e.toLowerCase(),a=s===null?this.getOptions():this.getOptions().filter(r=>r&&r.value!==void 0&&r.value!==null&&(r.value.toString().toLowerCase().indexOf(s)>-1||r.label.toLowerCase().indexOf(s)>-1));this.filteredOptions=this.maxDropdownOptions!==void 0?a.slice(0,this.maxDropdownOptions):a})},onSelect(e){e=Array.isArray(e)?e.map(t=>typeof t=="object"?t.value:t):e,this.val=this.multiple&&e===null?[]:e,Array.isArray(e)?this.$emit("onSelect",{...this.$attrs,...this.$props,value:e}):this.$emit("onSelect",{...this.$attrs,...this.$props,value:e&&e.value!==void 0?e.value:e})}},computed:{inputLabel(){return this.label?this.$t(this.label)+(this.required!==void 0?" *":"")+(this.isPro!==void 0?" ("+this.$t("Pro")+(typeof this.isPro=="string"?": "+this.$t(this.isPro):"")+")":""):null}},data(){const e=this.getOptions();return{filteredOptions:e,val:e?e.find(t=>this.value&&this.value.val!==void 0?t.value===this.value.val:t.value===this.value)||this.value&&this.value.val||this.value||"":{}}},created(){},watch:{value(e){this.getOptions()&&e&&e!==this.val&&(this.val=this.getOptions().find(t=>e.val!==void 0?t.value===e.val:t.value===e)||this.value.val||this.value)},reset(){this.val=null}}}),Gt={key:0},Wt={key:1,class:"placeholder"},Zt=["innerHTML"],Xt=["src"],xt={key:0};function en(e,t,s,a,r,u){const h=j("icon");return o(),p(Te,I(e.$attrs,{ref:"select","stack-label":"","display-value":e.multiple&&e.displayValue===":counter"&&e.val.length>1?e.val.length+" "+e.$t("selected"):e.allowUserInput===void 0&&e.val?Array.isArray(e.val)?e.val.join(", "):e.val.label:null,"model-value":e.val||"",options:e.filteredOptions,label:e.inputLabel,"virtual-scroll-slice-size":99,onFilter:e.onFilter,"onUpdate:modelValue":e.onSelect,onInputValue:e.onChange,"fill-input":e.allowUserInput!==void 0,"use-input":e.useInput,"use-chips":e.useChips,dense:e.dense!==void 0&&e.dense!=="bottom","hide-bottom-space":e.dense!==void 0||e.dense==="bottom","bottom-slots":e.dense!=="bottom",style:{"min-width":"100px"},multiple:e.multiple===!0}),ue({"selected-item":i(()=>[e.val&&e.val.label?(o(),v("span",Gt,b(e.$t(e.val.label)),1)):e.placeholder?(o(),v("em",Wt,b(e.$t(e.placeholder)),1)):f("",!0)]),"before-options":i(()=>[e.multiple===!0?(o(),p($,{key:0,flat:"",label:e.$t("select all"),color:"primary",onClick:e.selectAll,size:"sm"},null,8,["label","onClick"])):f("",!0),e.multiple===!0?(o(),p($,{key:1,flat:"",label:e.$t("deselect all"),color:"primary",onClick:e.unselectAll,size:"sm"},null,8,["label","onClick"])):f("",!0)]),option:i(d=>[n(x,Be(Qe(d.itemProps)),{default:i(()=>[d.opt.icon?(o(),p(J,{key:0,avatar:""},{default:i(()=>[n(h,{name:d.opt.icon,color:"primary"},null,8,["name"])]),_:2},1024)):f("",!0),n(J,null,{default:i(()=>[n(De,null,{default:i(()=>[m("span",{innerHTML:e.$t(d.opt.label)},null,8,Zt)]),_:2},1024)]),_:2},1024),d.opt.img?(o(),p(J,{key:1,avatar:""},{default:i(()=>[m("img",{src:d.opt.img},null,8,Xt)]),_:2},1024)):f("",!0)]),_:2},1040)]),append:i(()=>[e.info&&e.$t(e.info)?(o(),v("span",xt,[e.link?f("",!0):(o(),p(h,{key:0,size:"xs",name:"mdi-information",color:"primary",vAlign:"middle"})),e.link?(o(),p($,{key:1,size:"sm",type:"a",href:e.link,target:"_blank",round:"",dense:"",flat:"",icon:"mdi-information",color:"primary"},null,8,["href"])):f("",!0),n(Y,{"content-class":"bg-grey-8",offset:[4,4]},{default:i(()=>[z(b(e.$t(e.info)),1)]),_:1})])):f("",!0),U(e.$slots,"end",{},void 0,!0),E(n(h,{name:"mdi-close-circle",onClick:t[0]||(t[0]=ne(d=>e.onSelect(null),["stop"])),class:"cursor-pointer",size:"xs",vAlign:"middle"},null,512),[[D,e.clearable!==!1&&(!e.multiple&&e.val||e.multiple&&e.val.length!==0)]])]),_:2},[e.icon?{name:"prepend",fn:i(()=>[n(h,{name:e.icon},null,8,["name"])]),key:"0"}:void 0]),1040,["display-value","model-value","options","label","onFilter","onUpdate:modelValue","onInputValue","fill-input","use-input","use-chips","dense","hide-bottom-space","bottom-slots","multiple"])}var tn=k(_t,[["render",en],["__scopeId","data-v-6e882894"]]);const nn=S({name:"InputSelectComponents",emits:["onOptions","onSelect"],props:["state","components","componentValues","value"],setup(e,{emit:t,attrs:s}){const a=pe(),r=oe(),u=q(()=>e.componentValues||{}),h=q(()=>e.state&&e.state[e.value+"Config"]||{}),d=(g,w)=>u.value[g]!==void 0?u.value[g]:h.value[g]||(typeof w.value=="function"?w.value({jarvis:r}):w.value),l=q(()=>{const g=Ke(typeof le.ComponentsOptions[e.value]=="function"&&le.ComponentsOptions[e.value](e,s)||le.ComponentsOptions[e.value]||{});for(const w in g)typeof g[w]=="function"&&(g[w]=g[w](e,s)),g[w]||delete g[w],g[w]&&g[w].options&&Array.isArray(g[w].options)&&(g[w].options=g[w].options.map(Z=>({...Z,label:a.t(Z.label)})));return g}),y=q(()=>e.value===void 0?!1:Object.keys(l.value).length!==0),C=V({}),L=g=>{C.value[g.id]=g.value},K=g=>{t("onSelect",{...s,...g})},B=V(!1),Q=()=>{B.value=null,C.value={}};return{values:u,inheritedValues:h,fieldValue:d,defaultComponentOptions:l,showComponentOptionsDialog:B,hasOptions:y,userOptions:C,onOptionChange:L,onSelect:K,onSave:()=>{t("onOptions",{...s,id:"componentOptions",component:e.value,value:C.value}),Q()},onCancel:Q}}}),on={class:"text-h6"};function sn(e,t,s,a,r,u){const h=j("inputs"),d=j("input-select");return o(),v("div",null,[n(ae,{"model-value":e.showComponentOptionsDialog,persistent:""},{default:i(()=>[n(ee,{style:{width:"500px","max-width":"80vw"}},{default:i(()=>[n(T,{class:"row items-center"},{default:i(()=>[m("div",on,b(e.$t("Component Options")),1)]),_:1}),n(M),e.showComponentOptionsDialog?(o(),p(T,{key:0,class:"col q-pt-none scroll"},{default:i(()=>[(o(!0),v(N,null,H(e.defaultComponentOptions,(l,y)=>(o(),p(h,I({...e.$attrs,...l,value:e.fieldValue(y,l)},{onOnChange:e.onOptionChange,onOnSelect:e.onOptionChange,key:y,type:l.type||"Text",id:y,dense:"bottom",label:e.$t(l.label)+((e.values[y]===void 0||e.values[y]===null)&&e.inheritedValues[y]?" [ "+e.$t("inherited from the device configuration")+" ]":""),style:{width:"100%",margin:"0"}}),null,16,["onOnChange","onOnSelect","type","id","label"]))),128))]),_:1})):f("",!0),n(M),n(te,{align:"right"},{default:i(()=>[n($,{flat:"",label:e.$t("Cancel"),color:"negative",onClick:e.onCancel},null,8,["label","onClick"]),n($,{flat:"",label:e.$t("Apply"),color:"primary",onClick:e.onSave},null,8,["label","onClick"])]),_:1})]),_:1})]),_:1},8,["model-value"]),n(d,I(e.$attrs,{onOnSelect:e.onSelect,value:e.value,options:e.components,"options-dense":"","use-input":""}),{end:i(()=>[E(n($,{round:"",flat:"",dense:"",icon:"mdi-playlist-edit",color:"secondary",onClick:t[0]||(t[0]=ne(l=>e.showComponentOptionsDialog=!e.showComponentOptionsDialog,["stop"])),size:"sm"},null,512),[[D,e.hasOptions]])]),_:1},16,["onOnSelect","value","options"])])}var ln=k(nn,[["render",sn]]);const an=S({name:"InputSwitch",emits:["onChange"],props:{id:{type:String},label:{type:String,default:""},value:{type:[Boolean,Object]}},data(){return{val:this.value.val!==void 0?this.value.val:this.value}},methods:{onChange(e){this.$emit("onChange",{...this.$attrs,...this.$props,value:e})}},watch:{value(e){this.val=this.value&&this.value.val!==void 0?this.value.val:this.value}}}),rn={class:"q-field__label",style:{"font-size":"12px"}};function dn(e,t,s,a,r,u){return o(),p(we,{modelValue:e.val,"onUpdate:modelValue":[t[0]||(t[0]=h=>e.val=h),e.onChange],dense:""},{default:i(()=>[m("div",{class:_({"q-field--dark":e.$q.dark.isActive})},[m("span",rn,b(e.$t(e.label)),1)],2)]),_:1},8,["modelValue","onUpdate:modelValue"])}var un=k(an,[["render",dn]]);const pn=S({name:"InputSwitch",emits:["onChange"],props:["inline","id","label","icon","value","dense","info","link"],components:{SwitchInline:un},data(){return{val:this.value&&this.value.val!==void 0?this.value.val:this.value}},methods:{onChange(e){this.$emit("onChange",typeof e=="object"&&e.inline!==void 0?e:{...this.$attrs,...this.$props,value:e})}},watch:{value(e){this.val=this.value&&this.value.val!==void 0?this.value.val:this.value}}}),hn={key:0};function fn(e,t,s,a,r,u){const h=j("switch-inline"),d=j("icon");return e.inline!==void 0?(o(),p(h,I({key:0},{...e.$props,...e.$attrs},{onOnChange:e.onChange}),null,16,["onOnChange"])):(o(),p(Me,{key:1,"stack-label":"",label:e.$t(e.label),dense:e.dense!==void 0&&e.dense!=="bottom","hide-bottom-space":e.dense!==void 0||e.dense==="bottom","bottom-slots":e.dense!=="bottom"},ue({control:i(()=>[n(we,{modelValue:e.val,"onUpdate:modelValue":[t[0]||(t[0]=l=>e.val=l),e.onChange],dense:"",class:"q-ml-xs"},null,8,["modelValue","onUpdate:modelValue"])]),append:i(()=>[e.info&&e.$t(e.info)?(o(),v("span",hn,[e.link?f("",!0):(o(),p(d,{key:0,size:"xs",name:"mdi-information",color:"primary",class:"q-my-xs"})),e.link?(o(),p($,{key:1,size:"sm",type:"a",href:e.link,target:"_blank",round:"",dense:"",flat:"",icon:"mdi-information",color:"primary"},null,8,["href"])):f("",!0),n(Y,{"content-class":"bg-grey-8",offset:[4,4]},{default:i(()=>[z(b(e.$t(e.info)),1)]),_:1})])):f("",!0)]),default:i(()=>[(o(!0),v(N,null,H(e.$slots,(l,y)=>U(e.$slots,y,{vSlot:y})),256))]),_:2},[e.icon?{name:"prepend",fn:i(()=>[n(d,{name:e.icon},null,8,["name"])]),key:"0"}:void 0]),1032,["label","dense","hide-bottom-space","bottom-slots"]))}var cn=k(pn,[["render",fn]]);const mn=S({name:"InputText",emits:["onChange"],props:["full-height","required","errorMessage","id","type","label","icon","placeholder","value","info","isPro","link","json","dense","autofocus","options","maxDropdownOptions","clearable"],components:{JsonEditor:mt},setup(){return{i18n:pe(),showPassword:V(!1)}},methods:{openLink(){const e=document.createElement("a");document.body.appendChild(e),e.style="display: none",e.target="_blank",e.href=this.link,e.click(),document.body.removeChild(e)},set(e){this.error=null,this.jsonVal=e,this.val!==e&&(this.val=e,this.$emit("onChange",{...this.$attrs,...this.$props,value:e}))},onSelect(e){this.onChange(e.value)},onChange(e){if(this.type==="textarea"&&e instanceof Event)return;e instanceof Event&&(e.stopPropagation(),e=e.target.value);const t=this.$refs.dropdown;if(t&&t.show(),this.required!==void 0&&!e)return this.error=this.i18n.t("No input given"),this.$emit("onChange",{...this.$attrs,...this.$props,_error:this.error}),!1;if(this.type&&this.type.toLowerCase()==="number"){const s=e!==""?parseFloat(e):this.placeholder==="auto"?0:parseFloat(this.placeholder);if(Number.isNaN(s))return this.$emit("onChange",{...this.$attrs,...this.$props,value:0,_error:"Not a valid Number"}),this.val="",!1;if(!Number.isNaN(s)&&this.$attrs.min!==void 0&&this.$attrs.min>s||this.$attrs.max!==void 0&&this.$attrs.max<s)return this.$emit("onChange",{...this.$attrs,...this.$props,value:s,_error:"Number outside allowed range"}),this.val=s,!1}else if(this.json!==void 0&&e&&!(this.json==="allowTextInput"&&e.indexOf("{")===-1&&e.indexOf("}")===-1&&e.indexOf('"')===-1))try{if(e.indexOf("{")===-1&&e.indexOf("}")===-1)e=e.replace(/"/g,"");else{const s=JSON.parse(e)}}catch{return this.val=e,this.error=this.i18n.t("Wrong JSON format"),this.$emit("onChange",{...this.$attrs,...this.$props,_error:this.error}),!1}this.set(e)},onJsonChange({_error:e,value:t}){this.jsonError=e!==void 0,e===void 0&&t&&(this.jsonValModified=t)},onJsonEditor(e,t=!1){t?this.val=this.backupVal:t===!1&&e===!1&&this.onChange(this.jsonValModified),this.jsonValModified=this.jsonVal,this.backupVal=this.val,this.jsonEditor=e},parseJson(e){if(this.json!==void 0&&e)try{return typeof e=="string"?e:JSON.stringify(e)}catch(t){console.warn(e,t)}return e}},computed:{inputLabel(){return this.$t(this.label||"")+(this.required!==void 0?" *":"")+(this.json!==void 0?" ("+this.$t("JSON Format")+")":"")+(this.isPro!==void 0?" ("+this.$t("Pro")+(typeof this.isPro=="string"?": "+this.$t(this.isPro):"")+")":"")},filteredOptions(){return this.options?this.options.filter(e=>e.value.indexOf(this.val)!==-1||e.label.indexOf(this.val)!==-1).sort((e,t)=>e.value===t.value?0:e.value>t.value?1:-1):[]},filteredOptionsLimited(){return this.filteredOptions.slice(0,this.maxDropdownOptions||10)}},data(){return this.initialValue=this.json!==void 0?this.parseJson(this.value):this.value,this.jsonVal={},this.jsonValModified={},{val:this.parseJson(this.value&&this.value.val!==void 0?this.value.val:this.value!==void 0?this.value:""),error:null,jsonEditor:!1,jsonError:!1,backupVal:""}},created(){this.onChange(this.val)},mounted(){this.autofocus!==void 0&&this.$refs.input.$el.focus()},watch:{value(e){const t=e&&this.parseJson(e.val!==void 0?e.val:e);t!==void 0&&t!==this.val&&(this.val=t)},errorMessage(e){this.error=e}}}),vn={class:"text-h6"},yn={key:0},$n={key:1},gn={key:2},bn={style:{"font-size":"80%"}};function Cn(e,t,s,a,r,u){const h=j("json-editor"),d=j("icon");return o(),v("div",null,[n(ae,{modelValue:e.jsonEditor,"onUpdate:modelValue":t[3]||(t[3]=l=>e.jsonEditor=l),persistent:""},{default:i(()=>[n(ee,{style:{width:"700px","max-width":"80vw"}},{default:i(()=>[n(T,{class:"row items-center"},{default:i(()=>[m("div",vn,b(e.$t("JSON Editor")),1),n(W),n($,{flat:"",round:"",color:"grey",icon:"close",onClick:t[0]||(t[0]=l=>e.onJsonEditor(!1,!0))})]),_:1}),n(T,{class:"body q-pa-none",style:{height:"400px"}},{default:i(()=>[n(h,{json:e.jsonVal,onOnChange:e.onJsonChange},null,8,["json","onOnChange"])]),_:1}),n(te,{align:"right"},{default:i(()=>[n($,{flat:"",label:e.$t("Cancel"),color:"negative",onClick:t[1]||(t[1]=l=>e.onJsonEditor(!1,!0))},null,8,["label"]),n($,{flat:"",label:e.$t("Apply"),color:"primary",onClick:t[2]||(t[2]=l=>e.onJsonEditor(!1)),disable:e.jsonError},null,8,["label","disable"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),n(re,I({ref:"input"},e.$attrs,{type:(e.showPassword||e.type==="color"?"text":e.type)||"text","stack-label":"","model-value":e.val,"onUpdate:modelValue":e.onChange,onKeydown:je(e.onChange,["enter"]),label:e.inputLabel,placeholder:e.$t(e.placeholder||""),class:{"full-height":e.fullHeight!==void 0},error:!!e.error,"error-message":e.error,dense:e.dense!==void 0&&e.dense!=="bottom","hide-bottom-space":e.dense!==void 0||e.dense==="bottom",debounce:"250",autofocus:e.autofocus!==void 0}),ue({append:i(()=>[e.type==="color"?(o(),p(G,{key:0,name:"colorize",class:"cursor-pointer"},{default:i(()=>[n(Se,{"transition-show":"scale","transition-hide":"scale"},{default:i(()=>[n(qe,{onChange:e.onChange,value:e.val},null,8,["onChange","value"])]),_:1})]),_:1})):f("",!0),e.type==="password"?(o(),v("span",$n,[n($,{size:"sm",onClick:t[4]||(t[4]=l=>e.showPassword=!e.showPassword),round:"",dense:"",flat:"",icon:e.showPassword?"mdi-eye-off":"mdi-eye",color:"primary"},null,8,["icon"])])):f("",!0),e.info&&e.$t(e.info)?(o(),v("span",gn,[e.link?f("",!0):(o(),p(d,{key:0,size:"xs",name:"mdi-information",color:"primary",vAlign:"middle"})),e.link?(o(),p($,{key:1,size:"sm",type:"a",style:{cursor:"alias"},onClick:e.openLink,round:"",dense:"",flat:"",icon:"mdi-information",color:"primary"},null,8,["onClick"])):f("",!0),n(Y,{"content-class":"bg-grey-8",offset:[4,4]},{default:i(()=>[z(b(e.$t(e.info)),1)]),_:1})])):f("",!0),e.json!==void 0?(o(),p($,{key:3,round:"",dense:"",flat:"",icon:"mdi-code-json",color:"secondary",onClick:t[5]||(t[5]=l=>e.onJsonEditor(!0))})):f("",!0),U(e.$slots,"end"),E(n(d,{name:"mdi-close-circle",onClick:t[6]||(t[6]=ne(l=>e.onChange(""),["stop"])),class:"cursor-pointer",size:"xs",vAlign:"middle"},null,512),[[D,e.clearable!==!1&&e.val]])]),default:i(()=>[(o(!0),v(N,null,H(e.$slots,(l,y)=>U(e.$slots,y)),256)),n(Ce,{"auto-close":"","no-focus":"",fit:"",ref:"dropdown"},{default:i(()=>[n(ke,{dense:"",class:"body",style:{"min-width":"100px"}},{default:i(()=>[(o(!0),v(N,null,H(e.filteredOptionsLimited,l=>(o(),p(x,{key:l.id||l.value,clickable:"",onClick:y=>e.onSelect(l)},{default:i(()=>[n(J,null,{default:i(()=>[z(b(l.label),1)]),_:2},1024)]),_:2},1032,["onClick"]))),128)),e.filteredOptions.length>(this.maxDropdownOptions||10)?(o(),p(x,{key:0},{default:i(()=>[n(J,null,{default:i(()=>[m("em",bn,b(e.$t("additional")+" "+(e.filteredOptions.length-(this.maxDropdownOptions||10))+" "+e.$t("entries")+" "+e.$t("not shown")),1)]),_:1})]),_:1})):f("",!0)]),_:1})]),_:1},512)]),_:2},[(e.type==="color"||e.type==="icon"||e.icon)&&e.val.toString().indexOf("{")===-1?{name:"prepend",fn:i(()=>[e.type==="color"?(o(),v("div",yn,[n(d,{size:"xs",name:"mdi-circle-slice-8",style:de({color:e.val})},null,8,["style"])])):f("",!0),e.type==="icon"||e.icon?(o(),p(d,{key:1,size:"xs",name:e.type==="icon"?e.val:e.icon},null,8,["name"])):f("",!0)]),key:"0"}:void 0]),1040,["type","model-value","onUpdate:modelValue","onKeydown","label","placeholder","class","error","error-message","dense","hide-bottom-space","autofocus"])])}var kn=k(mn,[["render",Cn]]);const Sn=S({name:"Placeholder"});function wn(e,t,s,a,r,u){return o(),v("div")}var On=k(Sn,[["render",wn]]);const ge={button:Ft,date:Rt,placeholder:On,select:tn,"select.components":ln,switch:cn,text:kn},jn=S({name:"Inputs",props:{type:{type:String,default:""}},computed:{styleClass(){return this.$attrs.class||(this.type&&this.type==="button"?"q-ma-none":"q-mx-xs")}},created(){this.element=ge[this.type?this.type.toLowerCase():"text"]||ge.text}});function In(e,t,s,a,r,u){return o(),p(Fe(e.element),I({...e.$props,...e.$attrs},{class:e.styleClass}),{default:i(()=>[(o(!0),v(N,null,H(e.$slots,(h,d)=>U(e.$slots,d)),256))]),_:3},16,["class"])}var xn=k(jn,[["render",In]]);const En=S({name:"Paper"});function zn(e,t,s,a,r,u){return o(),v("div",I({class:"paper"},{...e.$props,...e.$attrs}),[U(e.$slots,"default")],16)}var eo=k(En,[["render",zn]]);export{Zn as A,Wn as D,Xn as I,mt as J,eo as P,_n as S,xn as a,tn as b,Gn as t};
