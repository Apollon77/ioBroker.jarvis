import{Q as V}from"./QToolbarTitle-31630b1c.js";import{Q as E}from"./QToolbar-5bbd648e.js";import{Q as j}from"./QExpansionItem-879e7bd2.js";import{q as C,cq as $,_ as S,j as m,o as a,d as i,F as w,l as y,f as k,k as o,p as J,H as O,c as h,a4 as Q,de as b,e as P,w as u,i as x,t as H,J as _,a2 as v,n as M}from"./index-8c8fca3a.js";import{J as N}from"./json-editor-9657b6ce.js";import"./QSlideTransition-0f1c690c.js";import"./_commonjsHelpers-45ea234c.js";const T=C({name:"SettingPage",props:["settings"],setup(){const e=$();return{onChange:({id:n,value:r})=>e.set({["settings."+n]:r}),getValue:n=>e.settings[n.id]!==void 0?n.validate?n.validate(e.settings[n.id]):e.settings[n.id]:n.value}}}),B={class:"row",style:{padding:"8px 16px"}};function q(e,p,c,n,r,f){const l=m("inputs");return a(),i("div",B,[(a(!0),i(w,null,y(e.settings,s=>(a(),i("div",{class:k("col-"+(s.columns||2)),key:s.id},[o(l,J(s,{onOnChange:e.onChange,onOnSelect:e.onChange,value:e.getValue(s)}),null,16,["onOnChange","onOnSelect","value"])],2))),128))])}var z=S(T,[["render",q]]);const D=C({name:"SettingsPage",components:{JsonEditor:N,SettingPage:z},setup(){const e=$(),p=O(),c=h(()=>p.pageHeight),n=h(()=>e.settings),r=h(()=>{var s;return(s=e.settings)==null?void 0:s.configExpertMode}),f=({id:s,error:d,value:t})=>{if(d)e.addError({key:"settings-"+s,val:d.message||d});else if(t){e.removeError("settings-"+s);for(const g in t)e.set({["settings."+g]:t[g]})}},l=s=>!s._error&&e.set({[s.id]:JSON.parse(s.value)});return{expanded:Q({}),groups:b,pageHeight:c,expertMode:r,json:n,onChange:f,onJsonEditor:l}}}),F={class:"full-height"},U={class:"row no-wrap"};function I(e,p,c,n,r,f){const l=m("setting-page"),s=m("json-editor"),d=m("paper");return a(),i("div",F,[P("div",U,[o(E,{class:"paper",style:{"min-height":"56px"}},{default:u(()=>[o(V,{shrink:""},{default:u(()=>[x(H(e.$t("Settings")),1)]),_:1})]),_:1})]),(a(!0),i(w,null,y(e.groups,t=>_((a(),i("div",{class:"row no-wrap paper",key:t.id},[o(j,{modelValue:e.expanded[t.id],"onUpdate:modelValue":g=>e.expanded[t.id]=g,icon:t.icon,label:e.$t(t.label),class:"full-width"},{default:u(()=>[o(l,{settings:t.settings},null,8,["settings"])]),_:2},1032,["modelValue","onUpdate:modelValue","icon","label"])])),[[v,!e.expertMode]])),128)),_(o(d,{style:M({height:e.pageHeight-66-16+"px"})},{default:u(()=>[o(s,{id:"settings",json:e.json,onOnChange:e.onJsonEditor},null,8,["json","onOnChange"])]),_:1},8,["style"]),[[v,e.expertMode]])])}var Y=S(D,[["render",I]]);export{Y as default};
