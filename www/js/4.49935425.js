(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[4],{"0215":function(e,t,i){"use strict";i.r(t);var s=i("0692");t["default"]={translations:Object(s["a"])((e=>i("41f9")("./"+e))),register:s["c"]}},"105a":function(e,t,i){var s={"./":"6bed","./de":"d57e","./de.js":"d57e","./en":"5c81","./en.js":"5c81","./index":"6bed","./index.js":"6bed"};function a(e){var t=n(e);return i(t)}function n(e){if(!i.o(s,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return s[e]}a.keys=function(){return Object.keys(s)},a.resolve=n,e.exports=a,a.id="105a"},"36b3":function(e,t,i){"use strict";i.r(t),t["default"]={"config#Devices#state#label":"Datenpunkt (Anzeige)","config#Devices#state#info":"Datenpunkt dessen State als Wert angezeigt wird","config#Devices#action#label":"Datenpunkt (Trigger)","config#Devices#action#info":"Datenpunkt der zum Schalten getriggert wird","config#Devices#label#label":"Label","config#Devices#unit#label":"Einheit","config#Devices#unit#info":"Einheit des Datenpunkts, z. B. % oder °","config#Devices#bodyStyle#label":"Body Stil","config#Devices#bodyStyle#info":"Stil des Bodys / Containers (im JSON Format)","config#Devices#stateStyle#label":"Datenpunkt Stil","config#Devices#stateStyle#info":"Stil des angezeigten Wertes (im JSON Format)","config#Devices#display#label":"Anzeigevariante","config#Devices#display#info":"Texte die den angezeigten Wert ersetzen (im JSON Format)","config#Devices#properties#label":"Datenpunkt Eigenschaften","config#Devices#properties#info":"Eigenschaften des Datenpunkts: on, off, min, max sowie level (im JSON Format)","config#Devices#icon#label":"Icon","config#Devices#icon#info":"Material Icon (klick zur Ansicht aller Icons)","config#Devices#iconStyle#label":"Icon Stil","config#Devices#iconStyle#info":"Stil des Icons (im JSON Format)","config#Devices#bodyElement#label":"Body Element","config#Devices#actionElement#label":"Action Element","config#Devices#showState#label":"Datenpunkt-Wert anzeigen","config#Devices#hide#label":"im Popup verstecken","config#Devices#hide#info":"Datenpunkt nicht in den Geräte-Details (Popup) zeigen","import#warning":'Damit ein Gerät vom Importer erkannt wird, müssen die Datenpunkte des Geräts unter einem gemeinsamen Datenpunkt des Typs "{deviceObjectType}" strukturiert sein.',"State Explorer":"Datenpunkt Explorer",State:"Datenpunkt (Anzeige)",Action:"Datenpunkt (Trigger)","(Un)Select all adapters":"alle Adapter (de)selektieren","(Un)Select all devices":"alle Geräte (de)selektieren","Suppress Popup":"Popup unterdrücken","Do not open the device details in the popup when the device is clicked":"Keine Geräte-Details (Popup) öffnen, wenn das Gerät im Widget angeklickt wird","add default states":"Standard Datenpunkte","No whitespaces allowed in the state":"Keine Leerzeichen im Datenpunkt erlaubt","JSON format":"JSON Format","Devices List":"Geräteliste","Group by":"Gruppieren nach",Filter:"Filtern","add device":"Gerät hinzufügen","import devices":"Geräte importieren","Device ID":"Geräte ID",Name:"Name",Function:"Gewerk",States:"States",Options:"Optionen",adapter:"Adapter","add state":"Datenpunkt hinzufügen","new state key":"neuer Datenpunkt Bezeichner","State Key":"Datenpunkt Bezeichner","No input given":"Bitte etwas eingeben","Wrong JSON format":"Falsches JSON Format","Type in a state key / identifier":"Datenpunkt Bezeichner eingeben","State key already used":"Datenpunkt Bezeichner bereits in Benutzung","Device Configuration":"Gerätekonfiguration","Delete Device":"Gerät löschen",General:"Allgemein",Device:"Gerät","Displayed Name":"Anzeigename","New Devices":"neue Geräte","Devices that have been added already":"bereits hinzugefügte Geräte","Devices with incorrect configuration (states not found)":"Geräte mit inkorrekter Konfiguration (Datenpunkte nicht gefunden)","Devices marked as ignored":"ignorierte Geräte","Devices Import":"Geräte importieren","Read adapters":"Adapter lesen","Import selected devices":"ausgewählte Geräte importieren",Adapters:"Adapter","Search the adapter structure for all devices or only devices added to enums":"Adapter-Struktur entweder nach allen oder nur nach in Enums vorhandenen Geräten durchsuchen","Search adapter structure for all devices":"nach allen Geräten durchsuchen","Search only for devices added to enums":"nur nach in Enums hinzugefügten Geräten durchsuchen",ignore:"ignorieren","move to new devices":"zu den neuen Geräten verschieben"}},"40df":function(e,t,i){"use strict";i("e8c8")},"41f9":function(e,t,i){var s={"./":"0215","./de":"46e6","./de.js":"46e6","./en":"7767","./en.js":"7767","./index":"0215","./index.js":"0215"};function a(e){var t=n(e);return i(t)}function n(e){if(!i.o(s,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return s[e]}a.keys=function(){return Object.keys(s)},a.resolve=n,e.exports=a,a.id="41f9"},"46e6":function(e,t,i){"use strict";i.r(t),t["default"]={}},"5c81":function(e,t,i){"use strict";i.r(t),t["default"]={"import#warning":'For a device to be detected the states have to be grouped using a state of the type "{deviceObjectType}".'}},"6bed":function(e,t,i){"use strict";i.r(t);var s=i("0692");t["default"]={translations:Object(s["a"])((e=>i("105a")("./"+e))),register:s["c"]}},7692:function(e,t,i){"use strict";i.r(t),t["default"]={"config#Devices#state#label":"State (to display)","config#Devices#state#info":"State which value is shown","config#Devices#action#label":"State (to trigger)","config#Devices#action#info":"State used to trigger an action","config#Devices#label#label":"Label","config#Devices#unit#label":"Unit","config#Devices#unit#info":"Unit of the state, e.g % or °","config#Devices#bodyStyle#label":"Body Style","config#Devices#bodyStyle#info":"Body Style of the container (in JSON Format)","config#Devices#stateStyle#label":"State Style","config#Devices#stateStyle#info":"State Style of the displayed values (in JSON Format)","config#Devices#display#label":"Display variant","config#Devices#display#info":"Texts replacing the displayed value (in JSON Format)","config#Devices#properties#label":"State Properties","config#Devices#properties#info":"State Properties such as min, max, dimmerOn Werte (in JSON Format)","config#Devices#icon#label":"Icon","config#Devices#icon#info":"Material Icon (click to view icons)","config#Devices#iconStyle#label":"Icon Style","config#Devices#iconStyle#info":"Icon Style of the icon (in JSON Format)","config#Devices#bodyElement#label":"Body Element","config#Devices#actionElement#label":"Action Element","config#Devices#showState#label":"Show State","config#Devices#hide#label":"Hide state in popup","config#Devices#hide#info":"Don't show state in the device details (popup)","import#warning":'For a device to be detected the states have to be grouped using a state of the type "{deviceObjectType}".'}},7767:function(e,t,i){"use strict";i.r(t),t["default"]={}},a7a4:function(e,t,i){var s={"./":"def5","./de":"36b3","./de.js":"36b3","./en":"7692","./en.js":"7692","./index":"def5","./index.js":"def5"};function a(e){var t=n(e);return i(t)}function n(e){if(!i.o(s,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return s[e]}a.keys=function(){return Object.keys(s)},a.resolve=n,e.exports=a,a.id="a7a4"},b2d7:function(e,t,i){},bb72:function(e,t,i){"use strict";i.r(t),i.d(t,"default",(function(){return ze}));var s=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"full-height DevicesPage"},[i("div",{staticClass:"row no-wrap"},[i("q-toolbar",{staticClass:"paper",staticStyle:{"min-height":"56px"}},[i("q-toolbar-title",{attrs:{shrink:""}},[e._v(e._s(e.$t("Device List"))+" ("+e._s(e.devicesCount)+")")]),i("q-select",{staticStyle:{width:"150px","margin-right":"8px"},attrs:{dense:"",label:e.$t("Group by"),"stack-label":"",options:e.groupByOptions},model:{value:e.devicesGroupBy,callback:function(t){e.devicesGroupBy=t},expression:"devicesGroupBy"}}),i("q-input",{staticStyle:{width:"250px"},attrs:{dense:"",label:e.$t("Filter"),"stack-label":"",clearable:""},model:{value:e.devicesFilter,callback:function(t){e.devicesFilter=t},expression:"devicesFilter"}}),i("q-space"),i("q-btn",{staticStyle:{"margin-right":"8px"},attrs:{color:"primary",icon:"mdi-plus-circle",label:e.$t("add device")},on:{click:e.addDevice}}),i("q-btn",{attrs:{color:"primary",icon:"mdi-cloud-download",label:e.$t("import device")},on:{click:function(t){e.showImportDevices=!0}}})],1)],1),i("device-page"),i("import-devices",{attrs:{open:e.showImportDevices},on:{onClose:function(t){e.showImportDevices=!1}}}),e._l(e.groups,(function(t){return i("div",{directives:[{name:"show",rawName:"v-show",value:!e.expertMode&&t.devices.length>0,expression:"!expertMode && group.devices.length > 0"}],key:t.id,staticClass:"row no-wrap paper"},[i("q-expansion-item",{staticClass:"full-width",attrs:{icon:t.icon,label:t.label+" ("+t.devices.length+")"},model:{value:e.expanded[t.id],callback:function(i){e.$set(e.expanded,t.id,i)},expression:"expanded[group.id]"}},[i("devices-table",{attrs:{devices:t.devices}})],1)],1)})),i("paper",{directives:[{name:"show",rawName:"v-show",value:e.expertMode,expression:"expertMode"}],style:{height:e.pageHeight-66-16+"px"}},[i("json-editor",{attrs:{id:"devices",json:e.json},on:{onChange:e.onJsonEditor}})],1)],2)},a=[],n=i("a6f4"),o=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("q-dialog",{attrs:{value:null!==e.device,"full-height":"",persistent:""}},[null!==e.device?i("q-card",{staticClass:"column full-height",staticStyle:{width:"1000px","max-width":"80vw"}},[i("q-card-section",{staticClass:"row items-center"},[i("div",{staticClass:"text-h6"},[e._v(e._s(e.$t("Device")+" "+e.device.name)+" ("+e._s(e.$t("Device ID")+": "+e.device.id)+")")]),i("q-space"),i("q-btn",{attrs:{flat:"",round:"",color:"grey",icon:"close"},on:{click:e.cancel}})],1),i("q-separator"),i("q-card-section",{staticClass:"col defaultPadding-2 q-pt-none scroll body"},[i("div",{staticClass:"text-h6 text-header primary"},[e._v(e._s(e.$t("General")))]),i("q-separator",{staticStyle:{margin:"0 -16px"}}),i("div",{staticClass:"row"},[i("div",{staticClass:"col-3"},[i("inputs",{attrs:{id:"device.name",label:e.$t("Device"),value:e.device.name||"",required:"",autofocus:""},on:{onChange:e.onChange}})],1),i("div",{staticClass:"col-3"},[i("inputs",{attrs:{id:"device.label",label:e.$t("Label"),value:e.device.label||""},on:{onChange:e.onChange}})],1),i("div",{staticClass:"col-3"},[i("inputs",{attrs:{id:"device.function",label:e.$t("Function"),value:"other"===e.device.function?"_defaults":e.device.function,type:"select",options:e.functions,"options-dense":"","use-input":""},on:{onSelect:e.onChange}})],1),i("div",{staticClass:"col-3"},[i("inputs",{attrs:{id:"device.icon",label:e.$t("Icon"),value:e.device.icon||"",icon:e.icon(e.device.icon)},on:{onChange:e.onChange}})],1)]),i("div",{staticClass:"text-h6 text-header primary"},[e._v(e._s(e.$t("Options")))]),i("q-separator",{staticStyle:{margin:"0 -16px"}}),i("div",{staticClass:"row"},[i("div",{staticClass:"col-3"},[i("inputs",{attrs:{type:"switch",id:"options.suppressPopup",label:"Hide Popup","indeterminate-value":"false",value:e.device.options.suppressPopup||!1},on:{onChange:e.onChange}})],1)]),i("div",{staticClass:"text-h6 text-header primary"},[e._v(e._s(e.$t("States")))]),i("q-separator",{staticStyle:{margin:"0 -16px"}}),i("div",{staticClass:"row",staticStyle:{"margin-bottom":"16px"}},[i("div",{staticClass:"col"},[i("inputs",{attrs:{id:"newStateKey",value:e.newStateKey,label:"new state key",icon:"mdi-plus",error:null!==e.errorNewStateKey},on:{onChange:e.onChange},nativeOn:{keydown:function(t){return!t.type.indexOf("key")&&e._k(t.keyCode,"enter",13,t.key,"Enter")?null:e.addStateKey.apply(null,arguments)}},scopedSlots:e._u([{key:"error",fn:function(){return[e._v("\n\t\t\t\t\t\t\t"+e._s(e.errorNewStateKey)+"\n\t\t\t\t\t\t")]},proxy:!0}],null,!1,1459228676)})],1),i("div",{staticClass:"col self-center"},[i("q-btn",{attrs:{color:"primary",label:e.$t("add state"),icon:"mdi-plus-circle"},on:{click:e.addStateKey}})],1),i("div",{staticClass:"col self-center",staticStyle:{"text-align":"right"}},["_defaults"!==this.device.function?i("q-btn",{attrs:{color:"secondary",label:e.$t("add default states"),icon:e.compareStatesToDefaults?"check":"mdi-playlist-plus",disable:e.compareStatesToDefaults},on:{click:e.addDefaultStates}}):e._e()],1)]),i("draggable",{attrs:{handle:".dragndrop"},model:{value:e.deviceStates,callback:function(t){e.deviceStates=t},expression:"deviceStates"}},[i("transition-group",{attrs:{type:"transition",name:"flip-list",tag:"div"}},e._l(e.deviceStates,(function(t){return i("div",{key:t.stateKey,staticClass:"list-group-item"},[i("device-state",{attrs:{device:e.device,stateKey:t.stateKey,stateList:e.stateList},on:{onChange:e.onChange,setComponentProps:function(t){e.component=arguments[0]}}})],1)})),0)],1)],1),i("q-separator"),i("q-card-actions",{attrs:{align:"right"}},[i("q-btn",{attrs:{flat:"",label:e.$t("Cancel"),color:"negative"},on:{click:e.cancel}}),i("q-btn",{attrs:{flat:"",label:e.$t("Apply"),color:"primary",disable:e.hasErrors},on:{click:e.apply}})],1)],1):e._e()],1)},r=[],c=i("ded3"),l=i.n(c),d=(i("ac1f"),i("5319"),i("4e82"),i("a026")),p=i("7ead"),u=i("c7ac"),v=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",[i("state-explorer-popup",{attrs:{open:null!==e.stateExplorer},on:{onClose:e.onStateExplorerClose,onSave:e.onStateExplorerSave}}),i("paper",{directives:[{name:"show",rawName:"v-show",value:!0===e.editStateKey,expression:"editStateKey === true"}],staticStyle:{margin:"-2px 0 0 0",padding:"0 0 10px 72px"}},[i("inputs",{attrs:{id:"stateKeyModified",label:"",value:e.stateKey,"hide-bottom-space":"",dense:""},on:{onChange:e.onChange,click:e.stopPropagation}}),i("div",{staticStyle:{margin:"auto 86px -1px auto"}},[i("q-btn",{attrs:{size:"sm",flat:"",round:"",icon:"mdi-check"},on:{click:e.onStateSave}}),i("q-btn",{attrs:{size:"sm",flat:"",round:"",icon:"mdi-cancel"},on:{click:e.onStateEdit}})],1)],1),i("q-expansion-item",{directives:[{name:"show",rawName:"v-show",value:!1===e.editStateKey,expression:"editStateKey === false"}],staticClass:"paper full-width",class:{rowDeleted:e.deleted},attrs:{icon:"mdi-drag-horizontal",label:e.stateKey,disable:e.deleted},scopedSlots:e._u([{key:"header",fn:function(){return[i("q-item-section",{staticClass:"dragndrop",attrs:{avatar:""}},[i("icon",{staticClass:"dragndrop",attrs:{name:"mdi-drag-horizontal"}})],1),i("q-item-section",{class:{itemDeleted:e.deleted}},[e._v("\n\t\t\t\t"+e._s(e.stateKey)+"\n\t\t\t")]),i("q-item-section",{attrs:{side:""}},[i("div",{staticClass:"row items-center"},[i("div",{directives:[{name:"show",rawName:"v-show",value:!0!==e.deleted,expression:"deleted !== true"}]},[i("q-btn",{directives:[{name:"show",rawName:"v-show",value:!1===e.editStateKey,expression:"editStateKey === false"}],attrs:{size:"sm",flat:"",round:"",icon:"mdi-pencil"},on:{click:e.onStateEdit}}),i("q-btn",{attrs:{size:"sm",flat:"",round:"",icon:"mdi-content-copy"},on:{click:e.onStateCopy}}),i("q-btn",{attrs:{size:"sm",flat:"",round:"",icon:"mdi-delete",color:"negative"},on:{click:e.onStateRemove}})],1),i("div",{directives:[{name:"show",rawName:"v-show",value:!0===e.deleted,expression:"deleted === true"}]},[i("q-btn",{attrs:{size:"sm",flat:"",round:"",icon:"mdi-restore",color:"positive"},on:{click:e.onStateRestore}})],1)])])]},proxy:!0}]),model:{value:e.expanded,callback:function(t){e.expanded=t},expression:"expanded"}},[i("div",{staticClass:"row",staticStyle:{padding:"0 8px"}},[i("div",{staticClass:"col"},[i("inputs",{attrs:{id:"state",label:"config#Devices#state#label",info:"config#Devices#state#info",value:e.sState,options:e.stateList,clearable:"","max-dropdown-options":"7"},on:{onChange:e.onChange},scopedSlots:e._u([{key:"end",fn:function(){return[i("q-btn",{attrs:{round:"",dense:"",flat:"",icon:"mdi-database-search",color:"secondary"},on:{click:function(t){return e.onStateExplorerOpen("state",t)}}})]},proxy:!0}])})],1),i("div",{staticClass:"col"},[i("inputs",{attrs:{id:"action",label:"config#Devices#action#label",info:"config#Devices#action#info",placeholder:e.sState,value:e.sAction,options:e.stateList,clearable:"","max-dropdown-options":"7"},on:{onChange:e.onChange},scopedSlots:e._u([{key:"end",fn:function(){return[i("q-btn",{attrs:{round:"",dense:"",flat:"",icon:"mdi-database-search",color:"secondary"},on:{click:function(t){return e.onStateExplorerOpen("action",t)}}})]},proxy:!0}])})],1)]),i("div",{staticClass:"row",staticStyle:{padding:"0 8px"}},[i("div",{staticClass:"col"},[i("inputs",{attrs:{id:"label",label:"config#Devices#label#label",value:e.sLabel,json:"",placeholder:e.placeholders.label},on:{onChange:e.onChange}})],1),i("div",{staticClass:"col"},[i("inputs",{attrs:{id:"unit",label:"config#Devices#unit#label",info:"config#Devices#unit#info",value:e.sUnit,json:"allowTextInput",placeholder:e.placeholders.unit},on:{onChange:e.onChange}})],1)]),i("div",{staticClass:"row",staticStyle:{padding:"0 8px"}},[i("div",{staticClass:"col"},[i("inputs",{attrs:{id:"bodyStyle",label:"config#Devices#bodyStyle#label",info:"config#Devices#bodyStyle#info",value:e.sBodyStyle,json:"",placeholder:e.placeholders.bodyStyle},on:{onChange:e.onChange}})],1)]),i("div",{staticClass:"row",staticStyle:{padding:"0 8px"}},[i("div",{staticClass:"col"},[i("inputs",{attrs:{id:"stateStyle",label:"config#Devices#stateStyle#label",info:"config#Devices#stateStyle#label",value:e.sStateStyle,json:"",placeholder:e.placeholders.stateStyle},on:{onChange:e.onChange}})],1)]),i("div",{staticClass:"row",staticStyle:{padding:"0 8px"}},[i("div",{staticClass:"col"},[i("inputs",{attrs:{id:"display",label:"config#Devices#display#label",info:"config#Devices#display#info",value:e.sDisplay,json:"",placeholder:e.placeholders.display},on:{onChange:e.onChange}})],1)]),i("div",{staticClass:"row",staticStyle:{padding:"0 8px"}},[i("div",{staticClass:"col"},[i("inputs",{attrs:{id:"properties",label:"config#Devices#properties#label",info:"config#Devices#properties#info",value:e.sProperties,json:"",placeholder:e.placeholders.properties},on:{onChange:e.onChange}})],1)]),i("div",{staticClass:"row",staticStyle:{padding:"0 8px"}},[i("div",{staticClass:"col"},[i("inputs",{attrs:{id:"icon",label:"config#Devices#icon#label",info:"config#Devices#icon#info",value:e.sIcon,json:"allowTextInput",placeholder:e.placeholders.icon},on:{onChange:e.onChange}})],1),i("div",{staticClass:"col"},[i("inputs",{attrs:{id:"iconStyle",label:"config#Devices#iconStyle#label",info:"config#Devices#iconStyle#info",value:e.sIconStyle,json:"",placeholder:e.placeholders.iconStyle},on:{onChange:e.onChange}})],1)]),i("div",{staticClass:"row",staticStyle:{padding:"0 8px"}},[i("div",{staticClass:"col"},[i("inputs",{attrs:{id:"bodyElement",label:"config#Devices#bodyElement#label",value:e.sBodyElement||null!==e.sBodyElement&&e.placeholders.bodyElement||null,type:"select.components",componentValues:e.sBodyElementComponentValues,components:e.FUNCTION_COMPONENTS["bodyElements"][e.device.function],device:e.device},on:{onSelect:function(t){return e.onChange(Object.assign({},t,{value:t.value||null}))},onOptions:e.onChange}})],1),i("div",{staticClass:"col-2"},[i("inputs",{attrs:{type:"Switch",id:"showState",label:"config#Devices#showState#label",value:e.sShowState},on:{onChange:e.onChange}})],1),i("div",{staticClass:"col"},[i("inputs",{attrs:{id:"actionElement",label:"config#Devices#actionElement#label",value:e.sActionElement||null!==e.sActionElement&&e.placeholders.actionElement||null,type:"select.components",componentValues:e.sActionElementComponentValues,components:e.FUNCTION_COMPONENTS["actionElements"][e.device.function],device:e.device},on:{onSelect:function(t){return e.onChange(Object.assign({},t,{value:t.value||null}))},onOptions:e.onChange}})],1)]),i("q-separator",{staticStyle:{"margin-top":"16px"}})],1)],1)},h=[],m=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("q-dialog",{attrs:{value:e.open,persistent:""}},[i("q-card",{staticClass:"column full-height",staticStyle:{width:"1000px","max-width":"80vw"}},[i("q-card-section",{staticClass:"row items-center"},[i("div",{staticClass:"text-h6"},[e._v(e._s(e.$t("State Explorer")))]),i("q-space"),i("q-btn",{attrs:{flat:"",round:"",color:"grey",icon:"close"},on:{click:e.onClose}})],1),i("q-separator"),i("q-card-section",{staticClass:"col q-pa-sm scroll body"},[i("state-explorer",{on:{onChange:e.onChange}})],1),i("q-separator"),i("q-card-actions",{attrs:{align:"right"}},[i("q-btn",{attrs:{flat:"",label:e.$t("Cancel"),color:"negative"},on:{click:e.onClose}}),i("q-btn",{attrs:{flat:"",label:e.$t("Apply"),color:"primary",disable:""===e.state},on:{click:e.onSave}})],1)],1)],1)},f=[],g=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticStyle:{"padding-bottom":"16px"}},[i("paper",{staticClass:"StateExplorerBar",staticStyle:{"min-height":"54px"}},[i("q-space"),i("div",{staticClass:"items-center justify-end row"},[i("span",{staticStyle:{"padding-right":"8px"}},[e._v(e._s(e.$t("Last Update"))+": "+e._s(e.lastUpdate))]),i("q-btn",{attrs:{color:"primary",label:e.$t("Refresh"),icon:"refresh",loading:e.loading,disable:e.loading},on:{click:e.updateObjects}})],1)],1),i("paper",{staticClass:"q-pa-sm"},[i("q-tree",{ref:"StateExplorer",attrs:{nodes:e.instanceList,"node-key":"_id","label-key":"label",filter:e.filter,"filter-method":e.filterMethod,"selected-color":"primary",selected:e.selected},on:{"lazy-load":e.onLazyLoad,"update:selected":e.onSelect},scopedSlots:e._u([{key:"default-header",fn:function(t){return[i("div",{staticClass:"row full-width",class:{item:!t.node.children||0===t.node.children.length}},[i("div",{staticClass:"overflow-dots",staticStyle:{width:"5%"}},[i("icon",{attrs:{color:e.selected&&e.selected.endsWith(t.node.label)?"accent":"primary",name:"state"===t.node.type?e.selected&&e.selected.endsWith(t.node.label)?"mdi-bookmark":"mdi-bookmark-outline":"folder"}})],1),i("div",{staticClass:"overflow-dots q-pr-xs",staticStyle:{width:"25%"}},[e._v(e._s(t.node.label))]),i("div",{staticClass:"overflow-dots q-pr-xs",staticStyle:{width:"45%"}},[t.node.common&&t.node.common.name&&t.node.common.name.length>50?i("q-tooltip",[e._v("\n\t\t\t\t\t\t\t"+e._s(t.node.common.name)+"\n\t\t\t\t\t\t")]):e._e(),e._v("\n\t\t\t\t\t\t"+e._s(t.node.common&&t.node.common.name?t.node.common.name.length>50?t.node.common.name.substr(0,47)+"...":t.node.common.name:"")+"\n\t\t\t\t\t")],1),i("div",{staticClass:"overflow-dots",staticStyle:{width:"10%"}},[e._v(e._s(t.node.type))]),i("div",{staticClass:"overflow-dots",staticStyle:{width:"15%"}},[e._v(e._s(t.node.common&&t.node.common.role?t.node.common.role:""))])])]}}])})],1)],1)},y=[],b=i("00da"),S=i("e580"),D=Object(n["c"])({name:"StateExplorer",props:["id"],created(){this.getInstanceList()},data(){return this.filterTimeout=null,{filter:"",lastUpdate:Object(S["a"])(p["a"].get("objectsUpdated"),"dd. MMMM yyyy, HH:mm:ss"),loading:!1,objects:p["a"].get("objects"),objectList:p["a"].get("objectList"),objectTree:{},instanceList:[],selected:""}},methods:{onLazyLoad({key:e,done:t}){t(this.objectTree[e]&&this.objectTree[e].children||[])},onSelect(e){console.warn(e),!e||this.$refs.StateExplorer.isExpanded(e)?this.$refs.StateExplorer.setExpanded(e||this.selected,!1):this.objectTree[e]&&this.objectTree[e].children&&this.$refs.StateExplorer.setExpanded(e,!0),this.selected=e,this.$emit("onChange",{id:this.id||"StateExplorer",value:e||""})},findInChildren(e,t){},filterMethod(e,t){this.$refs.StateExplorer.collapseAll();const i=this.objectTree[e._id]||null;let s=e._id.indexOf(t)>-1;return!s&&i&&i.children&&(s=this.findInChildren(i.children,t)),s},updateObjects(){this.loading=!0,b["a"].getObjects().then((()=>{this.lastUpdate=Object(S["a"])(p["a"].get("objectsUpdated"),"dd. MMMM yyyy, HH:mm:ss"),this.objects=p["a"].get("objects"),this.objectList=p["a"].get("objectList"),this.loading=!1}))},getInstanceList(){const e={},t=[];this.objectList.forEach((i=>{const s=this.objects[i],a=s._id.substr(0,s._id.lastIndexOf(".")),n=s._id.substr(0,s._id.indexOf(".",s._id.indexOf(".")+1));n&&!t.find((e=>e._id===n))&&t.push({_id:n,label:n,lazy:!0}),e[a]=e[a]||{children:[]},e[a].children.push({...s,label:s._id.substr(s._id.lastIndexOf(".")+1),lazy:"state"!==s.type,isState:"state"===s.type});const o=s._id.split(".");o.length>2&&o.forEach(((t,i)=>{if(i>1){const i=o.slice(0,o.indexOf(t)).join("."),s=i.substr(0,i.lastIndexOf("."));e[s]=e[s]||{children:[]},-1===e[s].children.findIndex((e=>e._id===i))&&e[s].children.push({_id:i,label:i.substr(i.lastIndexOf(".")+1),lazy:!0,isState:!1})}}))}));for(const i in e)e[i].children.sort(((e,t)=>!1===e.isState&&!0===t.isState?-1:!0===e.isState&&!1===t.isState?1:e.label.toLowerCase()===t.label.toLowerCase()?0:e.label.toLowerCase()>t.label.toLowerCase()?1:-1));this.objectTree=e,this.instanceList=t.sort(((e,t)=>e.label.toLowerCase()===t.label.toLowerCase()?0:e.label.toLowerCase()>t.label.toLowerCase()?1:-1))}}}),w=D,x=(i("40df"),i("2877")),C=i("2c91"),k=i("9c40"),_=i("7f41"),O=i("05c0"),$=i("eebe"),q=i.n($),E=Object(x["a"])(w,g,y,!1,null,null,null),j=E.exports;q()(E,"components",{QSpace:C["a"],QBtn:k["a"],QTree:_["a"],QTooltip:O["a"]});var K=Object(n["c"])({name:"StateExplorerPopup",props:["open"],components:{StateExplorer:j},data(){return{state:""}},methods:{onClose(){this.$emit("onClose",{id:this.id||"StateExplorer",value:this.state})},onSave(){this.$emit("onSave",{id:this.id||"StateExplorer",value:this.state})},onChange({value:e}){this.state=e}}}),N=K,I=i("24e8"),L=i("f09f"),G=i("a370"),A=i("eb85"),z=i("4b7e"),T=Object(x["a"])(N,m,f,!1,null,null,null),Q=T.exports;q()(T,"components",{QDialog:I["a"],QCard:L["a"],QCardSection:G["a"],QSpace:C["a"],QBtn:k["a"],QSeparator:A["a"],QCardActions:z["a"]});var B=Object(n["c"])({name:"DeviceState",props:["device","stateKey","stateList"],components:{StateExplorerPopup:Q},data(){return this.FUNCTION_COMPONENTS=u["listOfComponents"],{deleted:!1,editStateKey:!1,expanded:!1,stateExplorer:null,stateKeyModified:""}},methods:{stopPropagation(e){e.stopPropagation()},onChange(e){if(e._error)this.$emit("onChange",l()(l()({},e),{},{error:e._error,stateKey:this.stateKey,id:"state."+e.id}));else if("stateKeyModified"===e.id)this.stateKeyModified=e.value;else{let i=e.value;try{i=i&&void 0!==e.json&&e.value.indexOf("{")>-1&&e.value.indexOf("}")>-1?JSON.parse(e.value):e.value}catch(t){console.warn(e.value,t)}this.$emit("onChange",l()(l()({},e),{},{value:i,stateKey:this.stateKey,id:"state."+e.id}))}},onStateCopy(e){e.stopPropagation(),this.$store.commit("editor/copyState",{stateKey:this.stateKey})},onStateSave(e){e.stopPropagation(),this.$emit("onChange",{stateKey:this.stateKey,id:"state.newStateKey",value:this.stateKeyModified}),this.editStateKey=!this.editStateKey},onStateEdit(e){e.stopPropagation(),this.stateKeyModified=this.stateKey,this.editStateKey=!this.editStateKey},onStateRemove(e){e.stopPropagation(),this.expanded=!1,this.deleted=!0,this.$store.commit("editor/removeState",{stateKey:this.stateKey})},onStateRestore(e){e.stopPropagation(),this.deleted=!1,this.$store.commit("editor/restoreState",{stateKey:this.stateKey})},onStateExplorerOpen(e,t){t.stopPropagation(),this.stateExplorer=e},onStateExplorerClose(){this.stateExplorer=null},onStateExplorerSave({value:e}){this.onChange({id:this.stateExplorer,stateKey:this.stateKey,value:e}),this.stateExplorer=null}},computed:{placeholders(){const e=u["default"][this.deviceFunction][this.stateKey.toLowerCase()]||{};return{display:JSON.stringify(e.display),stateStyle:JSON.stringify(e.stateStyle),properties:JSON.stringify(e.properties),label:e.label||"",unit:JSON.stringify(e.unit),icon:JSON.stringify(e.icon),iconStyle:JSON.stringify(e.iconStyle),bodyElement:e.bodyElement||"",actionElement:e.actionElement||""}},deviceFunction(){return"other"===this.device.function?"_defaults":this.device.function},sState(){const e=this.$store.state.editor.device.states[this.stateKey];return e.state&&void 0!==e.state.node?e.state.node:e.state||null},sAction(){const e=this.$store.state.editor.device.states[this.stateKey];return e.action&&void 0!==e.action.node?e.action.node:e.action||null},sProperties(){const e=this.$store.state.editor.device.states[this.stateKey];return e.properties||""},sBodyStyle(){const e=this.$store.state.editor.device.states[this.stateKey];return e.bodyStyle||""},sStateStyle(){const e=this.$store.state.editor.device.states[this.stateKey];return e.stateStyle||""},sDisplay(){const e=this.$store.state.editor.device.states[this.stateKey];return e.display||""},sLabel(){const e=this.$store.state.editor.device.states[this.stateKey];return e.label||""},sUnit(){const e=this.$store.state.editor.device.states[this.stateKey];return e.unit||""},sIcon(){const e=this.$store.state.editor.device.states[this.stateKey];return e.icon||""},sIconStyle(){const e=this.$store.state.editor.device.states[this.stateKey];return e.iconStyle||""},sBodyElement(){const e=this.$store.state.editor.device.states[this.stateKey];return e.bodyElement},sBodyElementComponentValues(){const e=this.$store.state.editor.device.states[this.stateKey];return e[this.sBodyElement+"Config"]||{}},sActionElement(){const e=this.$store.state.editor.device.states[this.stateKey];return e.actionElement},sShowState(){const e=this.$store.state.editor.device.states[this.stateKey];return void 0===e.showState||e.showState},sActionElementComponentValues(){const e=this.$store.state.editor.device.states[this.stateKey];return e[this.sActionElement+"Config"]||{}}}}),F=B,P=i("3b73"),M=i("4074"),J=Object(x["a"])(F,v,h,!1,null,null,null),U=J.exports;q()(J,"components",{QBtn:k["a"],QExpansionItem:P["a"],QItemSection:M["a"],QSeparator:A["a"]});var R=i("b76a"),W=i.n(R),H=i("a2b6"),V=i("def5"),X=Object(n["c"])({name:"DevicePage",components:{DeviceState:U,Draggable:W.a},data(){return this.icon=H["c"],{component:null,errors:{},errorNewStateKey:null,newStateKey:""}},methods:{apply(){this.$store.commit("editor/saveDevice")},cancel(){this.$store.commit("editor/discardDevice",{device:null})},onChange(e){if(e.error)this.errors=l()(l()({},this.errors),{},{[e.id]:this.$i18n.t(e.error)});else if(e.id.indexOf("device.")>-1)d["default"].delete(this.errors,e.id),this.$store.commit("editor/set",{[e.id]:e.value});else if(e.id.indexOf("options.")>-1)d["default"].delete(this.errors,e.id),this.$store.commit("editor/set",{"device.options":l()(l()({},this.device.options||{}),{},{[e.id.replace("options.","")]:e.value})});else if(e.id.indexOf("state.")>-1)if(d["default"].delete(this.errors,e.id),"state.newStateKey"===e.id)this.$store.commit("editor/changeStateKey",{stateKey:e.stateKey,stateKeyModified:e.value});else if("state.componentOptions"===e.id){d["default"].delete(this.errors,e.id);const t=this.$store.state.editor.device.states[e.stateKey][e.component+"Config"]||{};this.$store.commit("editor/editState",{deviceId:this.device.id,stateKey:e.stateKey,key:e.component+"Config",val:l()(l()({},t),e.value)})}else this.$store.commit("editor/editState",{deviceId:this.device.id,stateKey:e.stateKey,key:e.id.replace("state.",""),val:e.value});else"newStateKey"===e.id&&(this.newStateKey=e.value)},addDefaultStates(){this.getDefaultStates.forEach((e=>"_any"!==e&&this.addStateKey(e)))},addStateKey(e){e="string"===typeof e?e:this.newStateKey,e?this.deviceStateKeys.indexOf(e)>-1?this.errorNewStateKey=this.$i18n.t("State key already used"):(this.$store.commit("editor/newState",{stateKey:e}),this.newStateKey="",this.errorNewStateKey=null):this.errorNewStateKey=this.$i18n.t("Type in a state key / identifier")}},computed:{getDefaultStates(){return"_defaults"===this.device.function?[]:Object.keys(u["default"][this.device.function]||{})},compareStatesToDefaults(){const e=Object.keys(this.device.states||{});return this.getDefaultStates.every((t=>"_any"===t||e.indexOf(t)>-1))},stateList(){const e=p["a"].get("stateList")||[];return e.map((e=>({label:e,value:e})))},functions(){return Object.keys(u["icons"]).map((e=>({label:this.$i18n.t(e),icon:u["icons"][e]?"mdi-"+u["icons"][e].replace("mdi-",""):"",value:e}))).sort(((e,t)=>e.label.toLowerCase()===t.label.toLowerCase()?0:e.label.toLowerCase()>t.label.toLowerCase()?1:-1))},device(){return this.$store.state.editor.device||null},deviceStateKeys(){return Object.keys(this.device.states||{})},deviceStates:{get(){const e=Object.values(this.device.states||{});return e},set(e){const t={};e.forEach((e=>{t[e.stateKey]=e})),this.$store.commit("editor/set",{"device.states":t})}},hasErrors(){return Object.keys(this.errors).length>0}},created(){V["default"].register(this.$i18n,V["default"].translations)}}),Y=X,Z=Object(x["a"])(Y,o,r,!1,null,null,null),ee=Z.exports;q()(Z,"components",{QDialog:I["a"],QCard:L["a"],QCardSection:G["a"],QSpace:C["a"],QBtn:k["a"],QSeparator:A["a"],QCardActions:z["a"]});var te=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("q-dialog",{attrs:{value:e.showImportDevices,persistent:""}},[i("q-card",{staticClass:"column full-height",staticStyle:{width:"1000px","max-width":"80vw"}},[i("q-card-section",{staticClass:"row items-center"},[i("div",{staticClass:"text-h6"},[e._v(e._s(e.$t("Import Devices")))]),i("q-space"),i("q-btn",{attrs:{flat:"",round:"",color:"grey",icon:"close"},on:{click:e.onClose}})],1),i("q-separator"),i("q-card-section",{staticClass:"col q-pa-sm scroll body"},[i("div",{staticClass:"text-h6 text-header primary"},[e._v(e._s(e.$t("Adapter")))]),i("q-separator",{staticStyle:{margin:"0 -16px"}}),i("q-field",{staticClass:"q-pa-sm",attrs:{label:e.$t("Search the adapter structure for all devices or only devices added to enums"),"stack-label":"",borderless:""},scopedSlots:e._u([{key:"control",fn:function(){return[i("q-option-group",{attrs:{options:e.adapterStructureOptions,color:"primary",inline:""},model:{value:e.adapterStructure,callback:function(t){e.adapterStructure=t},expression:"adapterStructure"}})]},proxy:!0}])}),i("q-expansion-item",{staticClass:"paper shadow-1 rounded-borders full-width",scopedSlots:e._u([{key:"header",fn:function(){return[i("q-item-section",[e._v("\n\t\t\t\t\t\t"+e._s(e.$t("Adapter List"))+"\n\t\t\t\t\t")]),"loaded"===e.state?i("q-item-section",{attrs:{side:""}},[i("q-chip",{attrs:{color:"secondary","text-color":"white"}},[e._v("\n\t\t\t\t\t\t\t"+e._s(e.$t("Devices"))+": "+e._s(e.importedDevicesLength.all)+"\n\t\t\t\t\t\t")])],1):e._e()]},proxy:!0}]),model:{value:e.expanded["_adapterList"],callback:function(t){e.$set(e.expanded,"_adapterList",t)},expression:"expanded['_adapterList']"}},[i("q-list",{staticStyle:{"margin-bottom":"16px"},attrs:{dense:""}},[i("q-item",{directives:[{name:"ripple",rawName:"v-ripple"}],attrs:{tag:"label"},on:{click:e.toggleAllAdapterListItems}},[i("q-item-section",{attrs:{side:""}},[i("q-checkbox",{attrs:{value:0!==e.selectedAdapters.length}})],1),i("q-item-section",[i("q-item-label",[i("em",[e._v(e._s(e.$t("(Un)Select all adapters"))+" ("+e._s(e.selectedAdapters.length)+")")])])],1)],1),e._l(e.adapterList,(function(t){return i("q-item",{directives:[{name:"ripple",rawName:"v-ripple"}],key:t.namespace,attrs:{tag:"label"}},[i("q-item-section",{attrs:{side:""}},[i("q-checkbox",{attrs:{val:t.namespace},model:{value:e.selectedAdapters,callback:function(t){e.selectedAdapters=t},expression:"selectedAdapters"}})],1),i("q-item-section",[i("q-item-label",[e._v("\n\t\t\t\t\t\t\t\t"+e._s(t.name)+"\n\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t"),i("icon",{staticClass:"q-ma-xs",staticStyle:{"font-size":"1.4rem"},attrs:{name:"info",color:"primary"}}),i("q-tooltip",{attrs:{"content-class":"bg-grey-8",offset:[4,4]}},[e._v(e._s(e.$t("import#warning").replace("{deviceObjectType}",t.deviceObjectType||"device").replace("{devicePattern}",t.devicePattern)))])],1)],1),i("q-item-section",{attrs:{side:""}},[i("q-item-label",["loaded"===e.state&&e.selectedAdapters.indexOf(t.namespace)>-1?i("q-chip",{attrs:{color:"primary","text-color":"white"}},[e._v("\n\t\t\t\t\t\t\t\t\t"+e._s(e.$t("Devices"))+": "+e._s(t.devices)+"\n\t\t\t\t\t\t\t\t")]):e._e()],1)],1)],1)}))],2)],1),null!==e.state?i("div",{staticStyle:{"margin-bottom":"16px"}},[i("div",{staticClass:"text-h6 text-header primary"},[e._v(e._s(e.$t("Devices")))]),i("q-separator",{staticStyle:{margin:"0 -16px 16px -16px"}}),i("div",{staticClass:"q-pa-sm"},["loading"===e.state?i("q-spinner",{attrs:{color:"primary",size:"md"}}):e._e()],1),"loaded"===e.state?i("div",e._l(e.categories,(function(t,s){return i("q-expansion-item",{key:s,staticClass:"paper shadow-1 rounded-borders full-width",staticStyle:{"margin-bottom":"8px"},attrs:{disable:0===e.importedDevicesLength[s]},scopedSlots:e._u([{key:"header",fn:function(){return[i("q-item-section",[e._v("\n\t\t\t\t\t\t\t\t"+e._s(e.$t(t))+"\n\t\t\t\t\t\t\t")]),i("q-item-section",{attrs:{side:""}},[i("q-chip",{attrs:{color:"secondary","text-color":"white"}},[e._v("\n\t\t\t\t\t\t\t\t\t"+e._s(e.importedDevicesLength[s])+"\n\t\t\t\t\t\t\t\t")])],1)]},proxy:!0}],null,!0),model:{value:e.expanded[s],callback:function(t){e.$set(e.expanded,s,t)},expression:"expanded[key]"}},[e.importedDevicesLength[s]>0?i("q-list",{attrs:{dense:""}},["new"===s||"existing"===s?i("q-item",{directives:[{name:"ripple",rawName:"v-ripple"}],attrs:{tag:"label"},on:{click:function(t){return e.toggleAllDevicesListItems(s)}}},[i("q-item-section",{attrs:{side:""}},[i("q-checkbox",{attrs:{value:0!==e.selectedDevices[s].length}})],1),i("q-item-section",[i("q-item-label",[i("em",[e._v(e._s(e.$t("(Un)Select all devices"))+" ("+e._s(e.selectedDevices[s].length)+")")])])],1)],1):e._e(),e._l(e.importedDevices[s],(function(t){return i("q-expansion-item",{key:t.id,staticClass:"full-width",attrs:{"expand-icon-toggle":"","expand-separator":"",dense:""},scopedSlots:e._u([{key:"header",fn:function(){return[i("q-item",{directives:[{name:"ripple",rawName:"v-ripple"}],staticClass:"full-width",attrs:{tag:"label",disable:"new"!==s&&"existing"!==s}},[i("q-item-section",{attrs:{side:""}},["new"===s||"existing"===s?i("q-checkbox",{attrs:{val:t.id},model:{value:e.selectedDevices[s],callback:function(t){e.$set(e.selectedDevices,s,t)},expression:"selectedDevices[key]"}}):i("div",{staticStyle:{width:"40px"}})],1),i("q-item-section",[i("q-item-label",[e._v("\n\t\t\t\t\t\t\t\t\t\t\t\t"+e._s(t.name)+"\n\t\t\t\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t\t\t\t"),t.attributes&&t.attributes.manufacturer?i("q-chip",{attrs:{color:"accent","text-color":"white"}},[e._v("\n\t\t\t\t\t\t\t\t\t\t\t\t\t"+e._s(t.attributes.manufacturer.name)+"\n\t\t\t\t\t\t\t\t\t\t\t\t")]):e._e()],1)],1),i("q-item-section",{attrs:{side:""}},[i("q-item-label",["new"===s?i("q-btn",{attrs:{flat:"",label:e.$t("ignore"),color:"negative"},on:{click:function(i){return e.ignoreDevice(t)}}}):e._e(),"ignored"===s?i("q-btn",{attrs:{flat:"",label:e.$t("restore"),color:"positive"},on:{click:function(i){return e.restoreDevice(t)}}}):e._e()],1)],1)],1)]},proxy:!0}],null,!0)},[i("div",{staticStyle:{"padding-left":"72px"}},[e._v("\n\t\t\t\t\t\t\t\t\t"+e._s(e.$t("Function"))+": "+e._s(e.$t(t.function))+"\n\t\t\t\t\t\t\t\t\t\n\t\t\t\t\t\t\t\t\t"),i("ul",{staticClass:"stateList"},e._l(t.states,(function(t,s){return i("li",{key:s},[i("strong",[e._v(e._s(s))]),e._l(t,(function(t,s){return i("ul",{key:s,staticClass:"stateKeyList"},[i("li",[e._v(e._s(e.$t(e.ucFirst(s)))+": "),i("code",[e._v(e._s(t))])])])}))],2)})),0)])])}))],2):e._e()],1)})),1):e._e()],1):e._e()],1),i("q-separator"),i("q-card-actions",{attrs:{align:"right"}},[i("q-btn",{attrs:{flat:"",label:e.$t("Cancel"),color:"negative"},on:{click:e.onClose}}),i("q-btn",{attrs:{flat:"",label:e.$t("Read adapters"),color:"secondary",loading:"loading"===e.state,disable:0===e.selectedAdapters.length},on:{click:e.readAdapters}}),"loaded"===e.state?i("q-btn",{attrs:{flat:"",label:e.$t("Import selected devices")+" ("+e.importDevicesLength+")",color:"primary",disable:0===e.importDevicesLength},on:{click:e.importDevices}}):e._e()],1)],1)],1)},ie=[],se=(i("ddb0"),i("2122")),ae=i("705e"),ne=i("0215"),oe=Object(n["c"])({name:"ImportDevices",props:["open"],data(){return this.ucFirst=H["g"],{selectedAdapters:[],adapterStructure:"all",adapterStructureOptions:[{label:this.$i18n.t("Search adapter structure for all devices"),value:"all"},{label:this.$i18n.t("Search only for devices added to enums"),value:"enums"}],categories:{new:"New Devices",existing:"Devices that have been added already",incorrect:"Devices with incorrect configuration (states not found)",ignored:"Devices marked as ignored"},expanded:{_adapterList:!0,new:!0},importedDevices:{all:{},new:{},existing:{},incorrect:{},ignored:{},manufacturer:{}},selectedDevices:{new:[],existing:[],ignored:[]},showImportDevices:!1,state:null}},methods:{importDevices(){this.state=null,this.onClose();const e={},t=[...this.selectedDevices.new,...this.selectedDevices.existing];for(const s of t)e[s]=this.importedDevices.all[s];const i=Object.keys(this.importedDevices.ignored);for(const s of i)e[s]=this.importedDevices.ignored[s],e[s].attributes=e[s].attributes||{},e[s].attributes.ignore=!0;this.$store.commit("editor/addDevices",{devices:e})},onClose(){this.expanded._adapterList=!0,this.showImportDevices=!1,this.$emit("onClose",this.showImportDevices)},readAdapters(){this.state="loading","all"===this.adapterStructure?b["a"].importDevices(this.selectedAdapters).then(this.setImportedDevices).catch((e=>{ae["a"]._("ImportDevicesPage","IMPORT_DEVICES: "+e.message,"error")})):b["a"].importEnums("functions",this.selectedAdapters).then(this.setImportedDevices).catch((e=>{ae["a"]._("ImportDevicesPage","IMPORT_ENUMS: "+e.message,"error")}))},setImportedDevices(e){this.expanded._adapterList=!1,this.importedDevices={all:{},new:{},existing:{},incorrect:{},ignored:{},manufacturer:{}};const t=this.$store.state.editor.devices||{};e.forEach(((e,i)=>{const s=e.value||e.reason;s.attributes=s.attributes||{};let a="new";"fulfilled"===e.status&&e.value&&e.value.states&&Object.keys(e.value.states).length>0?void 0!==t[s.id]&&(a="existing",t[s.id].attributes&&!0===t[s.id].attributes.ignore&&(a="ignored")):(a="incorrect",s.states=null,s.attributes.note=s.attributes.note||e.reason&&e.reason.error&&e.reason.error.message||this.$i18n.t("No correct defined states found. The device may be unknown. Please help the developer to add support for this device and report to Github.")),this.importedDevices[a][s.id]=s,this.importedDevices.all[s.id]=s,s.attributes.manufacturer&&s.attributes.manufacturer.namespace&&(this.importedDevices.manufacturer[s.attributes.manufacturer.namespace]=this.importedDevices.manufacturer[s.attributes.manufacturer.namespace]||[],this.importedDevices.manufacturer[s.attributes.manufacturer.namespace].push(s.id))})),this.selectedDevices.new=Object.keys(this.importedDevices.new),this.state="loaded"},toggleAllAdapterListItems(){this.selectedAdapters.length>0?this.selectedAdapters=[]:this.selectedAdapters=Object.keys(se["a"])},toggleAllDevicesListItems(e){this.selectedDevices[e].length>0?this.selectedDevices[e]=[]:this.selectedDevices[e]=Object.keys(this.importedDevices[e])},ignoreDevice(e){this.importedDevices.ignored[e.id]=e,this.$delete(this.importedDevices.new,e.id),this.$delete(this.selectedDevices.new,this.selectedDevices.new.indexOf(e.id))},restoreDevice(e){this.importedDevices.new[e.id]=e,this.selectedDevices.new.push(e.id),this.$delete(this.importedDevices.ignored,e.id)}},computed:{importDevicesLength(){return this.selectedDevices.new.length+this.selectedDevices.existing.length},importedDevicesLength(){return{all:Object.keys(this.importedDevices.all).length,new:Object.keys(this.importedDevices.new).length,existing:Object.keys(this.importedDevices.existing).length,incorrect:Object.keys(this.importedDevices.incorrect).length,ignored:Object.keys(this.importedDevices.ignored).length}},adapterList(){const e=Object.values(se["a"]).map((e=>(e.devices=this.importedDevices.manufacturer[e.namespace]?this.importedDevices.manufacturer[e.namespace].length:0,e.name=e.default,e)));return e}},watch:{open(e){this.showImportDevices=e}},created(){this.toggleAllAdapterListItems(),ne["default"].register(this.$i18n,ne["default"].translations)}}),re=oe,ce=(i("e0df"),i("8572")),le=i("9f0a"),de=i("b047"),pe=i("1c1c"),ue=i("66e5"),ve=i("8f8e"),he=i("0170"),me=i("0d59"),fe=i("714f"),ge=Object(x["a"])(re,te,ie,!1,null,null,null),ye=ge.exports;q()(ge,"components",{QDialog:I["a"],QCard:L["a"],QCardSection:G["a"],QSpace:C["a"],QBtn:k["a"],QSeparator:A["a"],QField:ce["a"],QOptionGroup:le["a"],QExpansionItem:P["a"],QItemSection:M["a"],QChip:de["a"],QList:pe["a"],QItem:ue["a"],QCheckbox:ve["a"],QItemLabel:he["a"],QTooltip:O["a"],QSpinner:me["a"],QCardActions:z["a"]}),q()(ge,"directives",{Ripple:fe["a"]});var be=function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"q-pa-md"},[i("q-table",{attrs:{data:e.devices,columns:e.columns,pagination:e.pagination,"rows-per-page-label":e.$t("Devices per page")},scopedSlots:e._u([{key:"header",fn:function(t){return[i("q-tr",{attrs:{props:t}},[i("q-th",{attrs:{"auto-width":""}}),e._l(t.cols,(function(s){return i("q-th",{key:s.name,attrs:{props:t}},[e._v("\n\t\t\t\t\t\n\t\t\t\t\t"+e._s(s.label)+"\n\t\t\t\t")])})),i("q-th",{attrs:{"auto-width":""}})],2)]}},{key:"body",fn:function(t){return[i("q-tr",{class:{rowDeleted:e.isDeleted(t.row)},attrs:{props:t}},[i("q-td",{attrs:{"auto-width":""}},[!0!==e.isDeleted(t.row)?i("div",[i("q-btn",{attrs:{size:"sm",flat:"",round:"",icon:"mdi-pencil"},on:{click:function(i){return e.onDeviceEdit(t.row)}}}),i("q-btn",{attrs:{size:"sm",flat:"",round:"",icon:"mdi-content-copy"},on:{click:function(i){return e.onDeviceCopy(t.row)}}})],1):e._e()]),e._l(t.cols,(function(s){return i("q-td",{key:s.name,attrs:{props:t}},[i("div",{class:{itemDeleted:e.isDeleted(t.row)}},[e._v("\n\t\t\t\t\t\t"+e._s(s.value)+"\n\t\t\t\t\t")])])})),i("q-td",{attrs:{"auto-width":""}},[!0!==e.isDeleted(t.row)?i("q-btn",{attrs:{size:"sm",flat:"",round:"",icon:"mdi-delete",color:"negative"},on:{click:function(i){return e.onDeviceRemove(t.row)}}}):e._e(),e.isDeleted(t.row)?i("q-btn",{attrs:{size:"sm",flat:"",round:"",icon:"mdi-restore",color:"positive"},on:{click:function(i){return e.onDeviceRestore(t.row)}}}):e._e()],1)],2)]}}])})],1)},Se=[],De=Object(n["c"])({name:"DevicesTable",props:["devices"],data(){return{pagination:{sortBy:"name",rowsPerPage:15},columns:[{name:"id",label:this.$i18n.t("ID"),field:"id",align:"left",sortable:!0,style:{width:"20%"}},{name:"name",label:this.$i18n.t("Name"),field:"name",align:"left",sortable:!0,style:{width:"25%"}},{name:"manufacturer",label:this.$i18n.t("Manufacturer"),field:"manufacturer",align:"left",sortable:!0,format:(e,t)=>t.attributes&&t.attributes.manufacturer?t.attributes.manufacturer.name:"",style:{width:"15%"}},{name:"states",label:this.$i18n.t("States"),field:"states",align:"left",sortable:!0,format:e=>(e=Object.keys(e||"{}").join(", "),e.length>90?e.substr(0,88)+" ...":e),style:{width:"40%"}}]}},methods:{isDeleted(e){return e.attributes&&!0===e.attributes.deleted},onDeviceEdit(e){this.$store.commit("editor/editDevice",{device:e})},onDeviceCopy(e){this.$store.commit("editor/copyDevice",{device:e})},onDeviceRemove(e){this.$store.commit("editor/removeDevice",{device:e})},onDeviceRestore(e){this.$store.commit("editor/restoreDevice",{device:e})}}}),we=De,xe=i("eaac"),Ce=i("bd08"),ke=i("357e"),_e=i("db86"),Oe=Object(x["a"])(we,be,Se,!1,null,null,null),$e=Oe.exports;q()(Oe,"components",{QTable:xe["a"],QTr:Ce["a"],QTh:ke["a"],QTd:_e["a"],QBtn:k["a"]});var qe=i("a54a"),Ee=i("6bed"),je=Object(n["c"])({name:"DevicesPage",components:{DevicePage:ee,DevicesTable:$e,ImportDevices:ye,JsonEditor:qe["a"]},data(){const e=[{label:this.$i18n.t("Function"),value:"function"},{label:this.$i18n.t("Manufacturer"),value:"manufacturer"}];return{expanded:{},groupByOptions:e,showImportDevices:!1}},methods:{addDevice(){this.$store.commit("editor/addDevice")},onJsonEditor(e){e._error||this.$store.commit("editor/set",{[e.id]:JSON.parse(e.value)})},onChange({id:e,error:t,value:i}){if(t)this.$store.commit("editor/addError",{key:"settings-"+e,val:t.message||t});else if(i){this.$store.commit("editor/removeError",{key:"settings-"+e});for(const e in i)this.$store.commit("editor/set",{["settings."+e]:i[e]})}}},computed:{pageHeight(){return this.$store.state.jarvis.pageHeight},devicesGroupBy:{get(){var e;return(null===(e=this.$store.state.editor.settings)||void 0===e?void 0:e.configDevicesGroupBy)&&this.groupByOptions.find((e=>e.value===this.$store.state.editor.settings.configDevicesGroupBy))||this.groupByOptions[0]},set({value:e}){this.$store.commit("editor/set",{"settings.configDevicesGroupBy":e})}},devicesFilter:{get(){var e;return(null===(e=this.$store.state.editor.settings)||void 0===e?void 0:e.configDevicesFilter)||""},set(e){this.$store.commit("editor/set",{"settings.configDevicesFilter":e})}},groups(){return this.$store.getters["editor/getGroups"](this.devicesGroupBy.value,this.devicesFilter)},devicesCount(){return this.$store.getters["editor/getDevicesWthoutDeletionsCount"]},json(){return this.$store.state.editor.devices},expertMode(){var e;return null===(e=this.$store.state.editor.settings)||void 0===e?void 0:e.configExpertMode}},created(){Ee["default"].register(this.$i18n,Ee["default"].translations)}}),Ke=je,Ne=i("65c6"),Ie=i("6ac5"),Le=i("ddd8"),Ge=i("27f9"),Ae=Object(x["a"])(Ke,s,a,!1,null,null,null),ze=Ae.exports;q()(Ae,"components",{QToolbar:Ne["a"],QToolbarTitle:Ie["a"],QSelect:Le["a"],QInput:Ge["a"],QSpace:C["a"],QBtn:k["a"],QExpansionItem:P["a"]})},d57e:function(e,t,i){"use strict";i.r(t),t["default"]={"import#warning":'Damit ein Gerät vom Importer erkannt wird, müssen die Datenpunkte des Geräts unter einem gemeinsamen Datenpunkt des Typs "{deviceObjectType}" strukturiert sein.',"State Explorer":"Datenpunkt Explorer",State:"Datenpunkt (Anzeige)",Action:"Datenpunkt (Trigger)","(Un)Select all adapters":"alle Adapter (de)selektieren","(Un)Select all devices":"alle Geräte (de)selektieren","Suppress Popup":"Popup unterdrücken","Do not open the device details in the popup when the device is clicked":"Keine Geräte-Details (Popup) öffnen, wenn das Gerät im Widget angeklickt wird","add default states":"Standard Datenpunkte","No whitespaces allowed in the state":"Keine Leerzeichen im Datenpunkt erlaubt","JSON format":"JSON Format","Devices List":"Geräteliste","Group by":"Gruppieren nach",Filter:"Filtern","add device":"Gerät hinzufügen","import devices":"Geräte importieren","Device ID":"Geräte ID",Name:"Name",Function:"Gewerk",States:"States",Options:"Optionen",adapter:"Adapter","add state":"Datenpunkt hinzufügen","new state key":"neuer Datenpunkt Bezeichner","State Key":"Datenpunkt Bezeichner","No input given":"Bitte etwas eingeben","Wrong JSON format":"Falsches JSON Format","Type in a state key / identifier":"State Bezeichnung eingeben","State key already used":"State bereits in Benutzung","Device Configuration":"Gerätekonfiguration","Delete Device":"Gerät löschen",General:"Allgemein",Device:"Gerät","Displayed Name":"Anzeigename","New Devices":"neue Geräte","Devices that have been added already":"bereits hinzugefügte Geräte","Devices with incorrect configuration (states not found)":"Geräte mit inkorrekter Konfiguration (Datenpunkte nicht gefunden)","Devices marked as ignored":"ignorierte Geräte","Devices Import":"Geräte importieren","Read adapters":"Adapter lesen","Import selected devices":"ausgewählte Geräte importieren",Adapters:"Adapter","Search the adapter structure for all devices or only devices added to enums":"Adapter-Struktur entweder nach allen oder nur nach in Enums vorhandenen Geräten durchsuchen","Search adapter structure for all devices":"nach allen Geräten durchsuchen","Search only for devices added to enums":"nur nach in Enums hinzugefügten Geräten durchsuchen",ignore:"ignorieren","move to new devices":"zu den neuen Geräten verschieben"}},def5:function(e,t,i){"use strict";i.r(t);var s=i("0692");t["default"]={translations:Object(s["a"])((e=>i("a7a4")("./"+e))),register:s["c"]}},e0df:function(e,t,i){"use strict";i("b2d7")},e8c8:function(e,t,i){}}]);