var xe=Object.defineProperty,qe=Object.defineProperties;var Be=Object.getOwnPropertyDescriptors;var p=Object.getOwnPropertySymbols;var Ce=Object.prototype.hasOwnProperty,Te=Object.prototype.propertyIsEnumerable;var ee=(t,r,i)=>r in t?xe(t,r,{enumerable:!0,configurable:!0,writable:!0,value:i}):t[r]=i,O=(t,r)=>{for(var i in r||(r={}))Ce.call(r,i)&&ee(t,i,r[i]);if(p)for(var i of p(r))Te.call(r,i)&&ee(t,i,r[i]);return t},N=(t,r)=>qe(t,Be(r));import{bX as Se,bZ as $e,cS as Oe,c1 as De,cT as Me,c3 as We,u as Pe,cl as Le,a3 as k,c as o,c7 as ze,ds as Ae,dt as j,x as s,B as te,du as D,z as _e,b7 as Ie,J as Fe,h as M,dv as ae,cg as Qe,aZ as Ve,dw as He}from"./index-29fd0eef.js";const le=150;var Ue=Se({name:"QDrawer",inheritAttrs:!1,props:N(O(O({},$e),Oe),{side:{type:String,default:"left",validator:t=>["left","right"].includes(t)},width:{type:Number,default:300},mini:Boolean,miniToOverlay:Boolean,miniWidth:{type:Number,default:57},breakpoint:{type:Number,default:1023},showIfAbove:Boolean,behavior:{type:String,validator:t=>["default","desktop","mobile"].includes(t),default:"default"},bordered:Boolean,elevated:Boolean,overlay:Boolean,persistent:Boolean,noSwipeOpen:Boolean,noSwipeClose:Boolean,noSwipeBackdrop:Boolean}),emits:[...De,"on-layout","mini-state"],setup(t,{slots:r,emit:i,attrs:R}){const m=Ve(),{proxy:{$q:f}}=m,ue=Me(t,f),{preventBodyScroll:W}=He(),{registerTimeout:U}=We(),a=Pe(Le,()=>{console.error("QDrawer needs to be child of QLayout")});let P,L,x;const n=k(t.behavior==="mobile"||t.behavior!=="desktop"&&a.totalWidth.value<=t.breakpoint),q=o(()=>t.mini===!0&&n.value!==!0),v=o(()=>q.value===!0?t.miniWidth:t.width),u=k(t.showIfAbove===!0&&n.value===!1?!0:t.modelValue===!0),X=o(()=>t.persistent!==!0&&(n.value===!0||re.value===!0));function Z(e,l){if(oe(),e!==!1&&a.animate(),c(0),n.value===!0){const d=a.instances[S.value];d!==void 0&&d.belowBreakpoint===!0&&d.hide(!1),b(1),a.isContainer.value!==!0&&W(!0)}else b(0),e!==!1&&Q(!1);U(()=>{e!==!1&&Q(!0),l!==!0&&i("show",e)},le)}function E(e,l){ie(),e!==!1&&a.animate(),b(0),c(w.value*v.value),V(),l!==!0&&U(()=>{i("hide",e)},le)}const{show:z,hide:B}=ze({showing:u,hideOnRouteChange:X,handleShow:Z,handleHide:E}),{addToHistory:oe,removeFromHistory:ie}=Ae(u,B,X),T={belowBreakpoint:n,hide:B},h=o(()=>t.side==="right"),w=o(()=>(f.lang.rtl===!0?-1:1)*(h.value===!0?1:-1)),J=k(0),g=k(!1),A=k(!1),K=k(v.value*w.value),S=o(()=>h.value===!0?"left":"right"),_=o(()=>u.value===!0&&n.value===!1&&t.overlay===!1?t.miniToOverlay===!0?t.miniWidth:v.value:0),I=o(()=>t.overlay===!0||t.miniToOverlay===!0||a.view.value.indexOf(h.value?"R":"L")>-1||f.platform.is.ios===!0&&a.isContainer.value===!0),C=o(()=>t.overlay===!1&&u.value===!0&&n.value===!1),re=o(()=>t.overlay===!0&&u.value===!0&&n.value===!1),ne=o(()=>"fullscreen q-drawer__backdrop"+(u.value===!1&&g.value===!1?" hidden":"")),se=o(()=>({backgroundColor:`rgba(0,0,0,${J.value*.4})`})),G=o(()=>h.value===!0?a.rows.value.top[2]==="r":a.rows.value.top[0]==="l"),de=o(()=>h.value===!0?a.rows.value.bottom[2]==="r":a.rows.value.bottom[0]==="l"),ve=o(()=>{const e={};return a.header.space===!0&&G.value===!1&&(I.value===!0?e.top=`${a.header.offset}px`:a.header.space===!0&&(e.top=`${a.header.size}px`)),a.footer.space===!0&&de.value===!1&&(I.value===!0?e.bottom=`${a.footer.offset}px`:a.footer.space===!0&&(e.bottom=`${a.footer.size}px`)),e}),ce=o(()=>{const e={width:`${v.value}px`,transform:`translateX(${K.value}px)`};return n.value===!0?e:Object.assign(e,ve.value)}),fe=o(()=>"q-drawer__content fit "+(a.isContainer.value!==!0?"scroll":"overflow-auto")),he=o(()=>`q-drawer q-drawer--${t.side}`+(A.value===!0?" q-drawer--mini-animate":"")+(t.bordered===!0?" q-drawer--bordered":"")+(ue.value===!0?" q-drawer--dark q-dark":"")+(g.value===!0?" no-transition":u.value===!0?"":" q-layout--prevent-focus")+(n.value===!0?" fixed q-drawer--on-top q-drawer--mobile q-drawer--top-padding":` q-drawer--${q.value===!0?"mini":"standard"}`+(I.value===!0||C.value!==!0?" fixed":"")+(t.overlay===!0||t.miniToOverlay===!0?" q-drawer--on-top":"")+(G.value===!0?" q-drawer--top-padding":""))),me=o(()=>{const e=f.lang.rtl===!0?t.side:S.value;return[[j,ge,void 0,{[e]:!0,mouse:!0}]]}),be=o(()=>{const e=f.lang.rtl===!0?S.value:t.side;return[[j,Y,void 0,{[e]:!0,mouse:!0}]]}),ye=o(()=>{const e=f.lang.rtl===!0?S.value:t.side;return[[j,Y,void 0,{[e]:!0,mouse:!0,mouseAllDir:!0}]]});function F(){ke(n,t.behavior==="mobile"||t.behavior!=="desktop"&&a.totalWidth.value<=t.breakpoint)}s(n,e=>{e===!0?(P=u.value,u.value===!0&&B(!1)):t.overlay===!1&&t.behavior!=="mobile"&&P!==!1&&(u.value===!0?(c(0),b(0),V()):z(!1))}),s(()=>t.side,(e,l)=>{a.instances[l]===T&&(a.instances[l]=void 0,a[l].space=!1,a[l].offset=0),a.instances[e]=T,a[e].size=v.value,a[e].space=C.value,a[e].offset=_.value}),s(a.totalWidth,()=>{(a.isContainer.value===!0||document.qScrollPrevented!==!0)&&F()}),s(()=>t.behavior+t.breakpoint,F),s(a.isContainer,e=>{u.value===!0&&W(e!==!0),e===!0&&F()}),s(a.scrollbarWidth,()=>{c(u.value===!0?0:void 0)}),s(_,e=>{y("offset",e)}),s(C,e=>{i("on-layout",e),y("space",e)}),s(h,()=>{c()}),s(v,e=>{c(),H(t.miniToOverlay,e)}),s(()=>t.miniToOverlay,e=>{H(e,v.value)}),s(()=>f.lang.rtl,()=>{c()}),s(()=>t.mini,()=>{t.modelValue===!0&&(we(),a.animate())}),s(q,e=>{i("mini-state",e)});function c(e){e===void 0?te(()=>{e=u.value===!0?0:v.value,c(w.value*e)}):(a.isContainer.value===!0&&h.value===!0&&(n.value===!0||Math.abs(e)===v.value)&&(e+=w.value*a.scrollbarWidth.value),K.value=e)}function b(e){J.value=e}function Q(e){const l=e===!0?"remove":a.isContainer.value!==!0?"add":"";l!==""&&document.body.classList[l]("q-body--drawer-toggle")}function we(){clearTimeout(L),m.proxy&&m.proxy.$el&&m.proxy.$el.classList.add("q-drawer--mini-animate"),A.value=!0,L=setTimeout(()=>{A.value=!1,m&&m.proxy&&m.proxy.$el&&m.proxy.$el.classList.remove("q-drawer--mini-animate")},150)}function ge(e){if(u.value!==!1)return;const l=v.value,d=D(e.distance.x,0,l);if(e.isFinal===!0){d>=Math.min(75,l)===!0?z():(a.animate(),b(0),c(w.value*l)),g.value=!1;return}c((f.lang.rtl===!0?h.value!==!0:h.value)?Math.max(l-d,0):Math.min(0,d-l)),b(D(d/l,0,1)),e.isFirst===!0&&(g.value=!0)}function Y(e){if(u.value!==!0)return;const l=v.value,d=e.direction===t.side,$=(f.lang.rtl===!0?d!==!0:d)?D(e.distance.x,0,l):0;if(e.isFinal===!0){Math.abs($)<Math.min(75,l)===!0?(a.animate(),b(1),c(0)):B(),g.value=!1;return}c(w.value*$),b(D(1-$/l,0,1)),e.isFirst===!0&&(g.value=!0)}function V(){W(!1),Q(!0)}function y(e,l){a.update(t.side,e,l)}function ke(e,l){e.value!==l&&(e.value=l)}function H(e,l){y("size",e===!0?t.miniWidth:l)}return a.instances[t.side]=T,H(t.miniToOverlay,v.value),y("space",C.value),y("offset",_.value),t.showIfAbove===!0&&t.modelValue!==!0&&u.value===!0&&t["onUpdate:modelValue"]!==void 0&&i("update:modelValue",!0),_e(()=>{i("on-layout",C.value),i("mini-state",q.value),P=t.showIfAbove===!0;const e=()=>{(u.value===!0?Z:E)(!1,!0)};if(a.totalWidth.value!==0){te(e);return}x=s(a.totalWidth,()=>{x(),x=void 0,u.value===!1&&t.showIfAbove===!0&&n.value===!1?z(!1):e()})}),Ie(()=>{x!==void 0&&x(),clearTimeout(L),u.value===!0&&V(),a.instances[t.side]===T&&(a.instances[t.side]=void 0,y("size",0),y("offset",0),y("space",!1))}),()=>{const e=[];n.value===!0&&(t.noSwipeOpen===!1&&e.push(Fe(M("div",{key:"open",class:`q-drawer__opener fixed-${t.side}`,"aria-hidden":"true"}),me.value)),e.push(ae("div",{ref:"backdrop",class:ne.value,style:se.value,"aria-hidden":"true",onClick:B},void 0,"backdrop",t.noSwipeBackdrop!==!0&&u.value===!0,()=>ye.value)));const l=q.value===!0&&r.mini!==void 0,d=[M("div",N(O({},R),{key:""+l,class:[fe.value,R.class]}),l===!0?r.mini():Qe(r.default))];return t.elevated===!0&&u.value===!0&&d.push(M("div",{class:"q-layout__shadow absolute-full overflow-hidden no-pointer-events"})),e.push(ae("aside",{ref:"content",class:he.value,style:ce.value},d,"contentclose",t.noSwipeClose!==!0&&n.value===!0,()=>be.value)),M("div",{class:"q-drawer-container"},e)}}});export{Ue as Q};
