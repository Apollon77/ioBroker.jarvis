import{_ as L,q as T,W as w,c as o,a2 as d,dn as c,b6 as H,j as C,o as u,d as v,J as p,a1 as f,k as S,w as I,e as k,n as $,c$ as B,i as D,t as V,d5 as b,dV as j}from"./index-bdb9984b.js";const z=T({name:"ModuleStateHTML",props:["widget","_containerSize"],setup(e){const m=w(),_=o(()=>e.widget.config);o(()=>({...b.joinConfig(_.value,j)}));const a=d(!1),t=d(null),s=d(),i=(l,M)=>{if(a.value=!0,l)return t.value=l.message||l,t.value;s.value=M},n=o(()=>s.value&&s.value.val||""),y=o(()=>n.value&&typeof n.value=="string"&&n.value.indexOf("<script")>-1),r=e.widget.items&&e.widget.items[0]||{},g=c.get(r.deviceId);let h=[];return g?h=c.listen(g.id,r.primaryStateKey,i):(t.value=m.t("Device {deviceId} not found").replace("{deviceId}",r.deviceId),console.warn("StateHTML",t.value),a.value=!0),H(()=>c.unlisten(h)),{loaded:a,error:t,html:n,hasScript:y}}}),N={class:"jarvis-StateHTML StateHTML"},F=["innerHTML"],K=["srcdoc"];function q(e,m,_,a,t,s){const i=C("alert");return u(),v("div",N,[p(S(B,{indeterminate:""},null,512),[[f,!e.loaded&&!e.error]]),p(S(i,null,{default:I(()=>[D(V(e.error),1)]),_:1},512),[[f,e.loaded&&e.error]]),p(k("div",null,[e.hasScript?(u(),v("iframe",{key:1,class:"StateHTML-iFrame",style:$({border:0,height:e._containerSize.height+"px"}),srcdoc:e.html},null,12,K)):(u(),v("div",{key:0,innerHTML:e.html},null,8,F))],512),[[f,e.loaded&&!e.error]])])}var J=L(z,[["render",q],["__scopeId","data-v-529dd270"]]);export{J as default};
