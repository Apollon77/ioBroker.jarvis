import{dd as re,a4 as J,bw as M,Q as m,di as Ke,dj as q,bt as K,aG as R,ay as b,U as k,b1 as h,a2 as u,bO as ie,X as G,D as _,bU as je,bC as L,bP as se,bQ as Be,bN as we,A as j,bR as Ye,cm as P,b3 as N,bn as z,aF as Se,ck as ae,dk as Xe,k as B,aY as Ie,cG as me,cS as _e,V as H,W as $,aE as oe,C as O,I as U,bB as Ze,bz as Ae,bA as de,a1 as ve,cs as xe,dl as et,cp as He,u as Re,r as tt,d9 as nt,dm as it,bJ as st,cD as ot,aI as at,dc as Me,db as Le,cq as Ne,bL as rt,dn as lt,d4 as dt,dp as be,as as ct,c$ as ut,aZ as pe}from"./index-f8128eaf.js";import ft from"./StateList-0267b2e4.js";import{b as gt,c as pt,Q as mt,a as vt}from"./QFooter-87ad3777.js";import{Q as bt}from"./QHeader-41da50f2.js";import{Q as ht}from"./QBtnDropdown-a551817a.js";import{Q as wt}from"./QBadge-67ceeda0.js";import{m as yt}from"./marked.esm-5c8832de.js";import"./StateListGroup-c00ccc21.js";import"./StateListItem-63da9dce.js";var St=`body {
	scrollbar-width: none;
	-ms-overflow-style: none;
	overflow-y: scroll;
}

body::-webkit-scrollbar {
	width: 0px;
	background: transparent;
}`;function le(e,t,n={}){if(n.id=n.id||"custom",n.onlyPro=n.onlyPro!==void 0?n.onlyPro:!0,n.onlyPro&&!re.isPro()&&t)re.warn("Custom Styles / Scripts are only available to Pro!");else if(e&&(!n.onlyPro||n.onlyPro&&re.isPro())){let i=document.getElementById(n.id);i?i.remove():(i=document.createElement(e),i.id=n.id),n.class&&i.classList.add(n.class);for(const a in n)i[a]=n[a];return i.innerHTML=t,document.getElementsByTagName("head")[0].appendChild(i),i}return null}function ke(e,t,n={}){document.querySelectorAll(".import_custom_"+e).forEach(o=>o.remove());const s=/@?import (?:url\()?['"](?<url>.*)['"]\)?;?/ig,r=[...t.matchAll(s)].map((o,l)=>new Promise(d=>{t=t.replace(o[0],""),le(n.tag||"link","",{[n.src||"src"]:o.groups.url+"?ts="+Date.now(),id:"import_custom_"+e+"-"+l,class:"import_custom_"+e,...n,onload:()=>d(!0),onerror:()=>d(!1)})}));return Promise.allSettled(r).then(()=>t)}const kt=J({name:"DeviceDetailsPopup",components:{StateList:ft},setup(){const e=M(),t=m(()=>e.selectedDevice),n=m(()=>{const s=[];for(const a in t.value.states){const r=t.value.states[a];if(r.hide===!0||r.state===void 0&&r.action===void 0)continue;const{label:o,...l}=r;s.push({id:Ke(t.value.id+":"+a,q.get("UUID")),type:"device",deviceId:t.value.id,bodyStateKey:a,primaryStateKey:a,...l,deviceStateDetails:!0})}return{items:s}});return{onClose:()=>e.set("selectedDeviceId",null),device:t,widget:n}}}),Tt={class:"text-h6"};function Ct(e,t,n,i,s,a){const r=R("state-list");return b(),k(Ye,{"model-value":!!e.device.id,onHide:e.onClose,class:j({"jarvis-popup-container":!0,["jarvis-device-"+e.device.id]:!0})},{default:h(()=>[u(we,{class:"column jarvis-popup",style:{width:"800px","max-width":"95vw","flex-wrap":"nowrap"}},{default:h(()=>[u(ie,{class:"row items-center"},{default:h(()=>[G("div",Tt,_(e.device.label||e.device.name),1),u(je),u(L,{flat:"",round:"",color:"grey",icon:"close",onClick:e.onClose},null,8,["onClick"])]),_:1}),u(se),u(ie,{class:"col q-pa-none scroll body",style:{"overflow-x":"hidden"}},{default:h(()=>[u(r,{openDeviceDetails:!1,widget:e.widget,isPopup:""},null,8,["widget"])]),_:1}),u(se),u(Be,{align:"right"},{default:h(()=>[u(L,{flat:"",label:e.$t("Close"),onClick:e.onClose,color:"primary"},null,8,["label","onClick"])]),_:1})]),_:1})]),_:1},8,["model-value","onHide","class"])}var Et=K(kt,[["render",Ct]]);const Dt=J({name:"Container",props:["tabsCount"],setup(e){P.dev("DEBUG","Container","setup()");const t=M(),n=m(()=>t.drawerMiniMode);return{settings:m(()=>t.settings),drawerMiniMode:n,onHeaderReveals:a=>{P.dev("DEBUG","Container","onHeaderReveals()"),t.set("headerVisible",a)}}}});function $t(e,t,n,i,s,a){return e.settings.tabsBottom!==!0?N((b(),k(bt,{key:0,class:"jarvis-header text-white",bordered:"",onReveal:e.onHeaderReveals,reveal:e.settings.tabsShow==="hide"},{default:h(()=>[Se(e.$slots,"default")]),_:3},8,["onReveal","reveal"])),[[z,e.drawerMiniMode!==!0||e.drawerMiniMode===!0&&e.tabsCount>1]]):N((b(),k(gt,{key:1,class:"jarvis-footer text-white",bordered:"",onReveal:e.onHeaderReveals,reveal:e.settings.tabsShow==="hide"},{default:h(()=>[Se(e.$slots,"default")]),_:3},8,["onReveal","reveal"])),[[z,e.drawerMiniMode!==!0||e.drawerMiniMode===!0&&e.tabsCount>1]])}var Pt=K(Dt,[["render",$t]]);const jt=J({name:"Tabs",props:["page","tabs"],setup(e){P.dev("DEBUG","Tabs","setup()");const t=ae(),n=M(),i=Xe(),s=re.isPro(),a=B(e.tabs),r=g=>{P.dev("DEBUG","Tabs","resolveBindings");const T=a.value.findIndex(D=>D.id===g.id);a.value[T]={...g,revision:_e().substr(0,5)}};Ie(()=>e.tabs,()=>{P.dev("DEBUG","Tabs","tabsWithResolvedBindings()"),a.value=e.tabs;for(const g of e.tabs)g.config={icon:g.icon,title:g.title},me.getBindings(g,r)});const o=m({get(){return n.getSelectedTabId},set(g){g&&n.set({selectedTabId:g})}}),l=B(!1),d=()=>{P.dev("DEBUG","Tabs","tabsHiddenShow()"),l.value=!t.platform.is.mobile},y=m(()=>n.drawerMiniMode),v=m(()=>n.settings),p=g=>n.set("drawerSidebar",g),w=m(()=>i.getUnread.length);return{tabsWithResolvedBindings:a,tabId:o,tabsHiddenDropdown:l,tabsHiddenShow:d,toggleNotifications:g=>n.set("drawerNotifications",g),toggleSidebar:p,notificationsUnread:w,drawerMiniMode:y,settings:v,isPro:s}}}),Bt={class:"row nowrap",style:{margin:"2px 0"}},It={key:0,class:"q-tab__label"},At={class:"q-tab__label"};function Ht(e,t,n,i,s,a){const r=R("icon");return b(),k(xe,{modelValue:e.tabId,"onUpdate:modelValue":t[3]||(t[3]=o=>e.tabId=o),"inline-label":"",dense:"",align:"left",style:O({"padding-left":(e.drawerMiniMode!==!0?0:5)+"px","padding-right":"48px"}),id:"tabBar",class:j({"jarvis-tabs-container":!0,"jarvis-tabs-bottom":e.settings.tabsBottom===!0}),"content-class":"jarvis-tabs","indicator-color":"white"},{default:h(()=>[e.settings.drawerShowMenuButton!==!1?(b(),k(L,{key:0,flat:"",dense:"",round:"",icon:"menu","aria-label":"Menu",onClick:t[0]||(t[0]=o=>e.toggleSidebar(!0)),class:j(["q-ml-sm",{"lt-md":e.drawerMiniMode===!0}])},null,8,["class"])):H("",!0),G("div",Bt,[(b(!0),$(U,null,oe(e.tabsWithResolvedBindings,o=>(b(),k(pt,{key:o.revision,name:o.id,to:{params:{tabId:o.id}},style:O(e.isPro&&o.id===e.tabId&&o.bodySelectedStyle||e.isPro&&o.bodyStyle||{}),class:j(["jarvis-tab","jarvis-tab-"+o.id]),"content-class":e.settings.tabsDense?"dense":"normal"},{default:h(()=>[N(u(r,{name:o.icon,size:"xs",class:"tabIcon",style:O({margin:e.settings.tabsDense?"4px 4px 0 0":"0",...e.isPro&&o.id===e.tabId&&o.iconSelectedStyle||e.isPro&&o.iconStyle||{}})},null,8,["name","style"]),[[z,o.icon]]),e.page.hideLabels!==!0?(b(),$("div",It,_(o.title),1)):H("",!0)]),_:2},1032,["name","to","style","class","content-class"]))),128)),N(u(ht,{modelValue:e.tabsHiddenDropdown,"onUpdate:modelValue":t[1]||(t[1]=o=>e.tabsHiddenDropdown=o),onMouseover:e.tabsHiddenShow,"auto-close":"",stretch:"",flat:""},{label:h(()=>[G("div",{class:j(e.settings.tabsDense?"dense":"normal")},[u(r,{name:"mdi-tab-unselected",size:"xs",class:"tabIcon",style:O({margin:e.settings.tabsDense?"1px 5px 0 0":"-1px 0 1px 0"})},null,8,["style"]),G("div",At,_(e.$t("More")+"..."),1)],2)]),default:h(()=>[u(Ze,null,{default:h(()=>[(b(!0),$(U,null,oe(e.hiddenTabs,o=>(b(),k(Ae,{key:o.id,clickable:"",onClick:l=>e.tabId=o.id,class:j({"q-tab--active":o.id===e.tabId})},{default:h(()=>[u(de,{avatar:""},{default:h(()=>[u(r,{name:o.icon},null,8,["name"])]),_:2},1024),u(de,null,{default:h(()=>[ve(_(o.title),1)]),_:2},1024)]),_:2},1032,["onClick","class"]))),128))]),_:1})]),_:1},8,["modelValue","onMouseover"]),[[z,e.settings.enableTabsDropdown]])]),N(u(L,{flat:"",dense:"",round:"",icon:"mdi-bell","aria-label":"Notifications",onClick:t[2]||(t[2]=o=>e.toggleNotifications(!0)),class:"q-mr-sm notification-drawer-button"},{default:h(()=>[u(wt,{color:"secondary",align:"middle",floating:""},{default:h(()=>[ve(_(e.notificationsUnread),1)]),_:1})]),_:1},512),[[z,e.isPro]])]),_:1},8,["modelValue","style","class"])}var Rt=K(jt,[["render",Ht]]);function Mt(e,t){const n=m(()=>typeof e.value!="object"?B({fullscreenSize:e.value}):e),i=B(),s=B(!1),a=()=>{s.value=!0;const l=i.value;l.classList.add("isFullscreen"),l.style.overflow="auto";const d=l.querySelector(".jarvis-widget-scaler");d.style.height="auto"},r=()=>{s.value=!1;const l=i.value;l.classList.remove("isFullscreen"),l.style.overflow="initial";const d=l.querySelector(".jarvis-widget-scaler");d.style.height=n.value.fullscreenSize+"px",document.exitFullscreen?document.exitFullscreen().catch(y=>{}):document.mozCancelFullScreen?document.mozCancelFullScreen().catch(y=>{}):document.webkitCancelFullScreen&&document.webkitCancelFullScreen().catch(y=>{})};return Ie(()=>i.value,()=>{i.value.addEventListener("fullscreenchange",()=>{document.fullscreenElement===null&&r()})}),{fullscreenElement:i,fullscreenActive:s,fullscreenToggle:l=>{l=typeof l=="boolean"?l:!s.value,et.toggle(i.value).then(()=>{l===!1?r():a()}).catch(d=>{console.error(d)})}}}const Lt=J({name:"Widget",props:["page","tab","widgets","config","layout","containerSize"],setup(e){const t=ae(),n=He(),i=M(),s=Re(e,"config")||{};B();const a=B(),r=m(()=>{const C=s.value.alignmentHorizontal||"center",ge=s.value.alignmentVertical||"top",te=s.value.scaleToFitContents!==void 0?s.value.scaleToFitContents:!0;return{h:C,v:ge,fit:te}}),o=m(()=>r.value.v!=="middle"?{}:{transform:"translateY(-50%)",position:"relative",top:"50%"}),l=tt({width:0,height:0}),d=m(()=>a.value&&a.value.$el.offsetHeight||0),y=m(()=>e.containerSize.height-d.value),v=m(()=>r.value.fit===!1||nt.includes(T.value.module)?{x:1,y:1}:{x:l?Math.min(1,e.containerSize.width/l.width):1,y:l?Math.min(1,y.value/l.height):1}),p=m(()=>{const C=[0,0];return C[0]=r.value.h==="center"?"50%":r.value.h==="right"?"100%":r.value.h,C[1]=r.value.v==="middle"?"50%":r.value.v==="bottom"?"100%":r.value.v,C}),w=m(()=>({width:r.value.h!=="fill-width"?"100%":Math.floor(1/(v.value.y<v.value.x?v.value.y:v.value.x)*100)+"% !important",height:y.value-1+"px"})),c=m(()=>X.value===!0?1:v.value.y<v.value.x?v.value.y:v.value.x),g=m(()=>{const C={"-webkit-transform":"scale("+c.value+")","-webkit-transform-origin":p.value.join(" "),transform:"scale("+c.value+")","transform-origin":p.value.join(" ")};return r.value.v==="middle"&&(C.margin="auto"),t.screen.lt.lg||e.layout==="desktop"&&t.platform.is.mobile?{}:C}),T=m(()=>{const C=e.widgets[0];return C&&i.widgets[C]||{}}),D=()=>{P.dev("DEBUG","Widget","jump"),T.value.link&&(T.value.link.indexOf("http")>-1||T.value.link.indexOf("www")>-1)?window.open((T.value.link.indexOf("http")===-1?"http://":"")+T.value.link,"_blank"):T.value.link&&n.push({params:{tabId:T.value.link}}).catch(C=>console.warn(C))};let E=null;const f=C=>{E&&clearTimeout(E),E=setTimeout(()=>{P.dev("DEBUG","Widget","onResize()"),Object.assign(l,C)},500)},{fullscreenElement:S,fullscreenActive:X,fullscreenToggle:I}=Mt(y),A=B(s.value.allowFullscreen||!1);return{alignment:r,verticalAlignment:o,scaleSizes:w,scaleStyle:g,size:l,widget:T,widgetTitle:a,widgetTitleSize:d,jump:D,onResize:f,fullscreenEnabled:A,fullscreenElement:S,fullscreenActive:X,fullscreenToggle:I}}});function Nt(e,t,n,i,s,a){const r=R("icon");return b(),$("div",{ref:"fullscreenElement",onDblclick:t[1]||(t[1]=o=>e.fullscreenEnabled&&e.fullscreenToggle()),class:j(["jarvis-widget-container bgcolor",{tile:e.tab.widgetEdges,paper:!e.tab.widgetEdges,fullscreenEnabled:e.fullscreenEnabled}])},[e.fullscreenEnabled?(b(),$("div",{key:0,class:j(["fullscreener",{close:e.fullscreenActive}]),onClick:t[0]||(t[0]=(...o)=>e.fullscreenToggle&&e.fullscreenToggle(...o))},null,2)):H("",!0),u(we,{flat:"",class:j(["jarvis-widget full-width full-height",{["jarvis-widget-module-"+e.widget.module]:!0,["jarvis-widget-"+e.widget.id]:!0}])},{default:h(()=>[e.widget.hideTitle!==!0&&(e.widget.icon||e.widget.title)?(b(),k(Ae,{key:0,class:"jarvis-widget-header",ref:"widgetTitle"},{default:h(()=>[e.widget.icon?(b(),k(de,{key:0,side:"",class:j({"cursor-pointer":e.widget.link}),onClick:e.jump},{default:h(()=>[u(it,{square:e.tab.widgetEdges,rounded:!e.tab.widgetEdges,class:"jarvis-widget-icon","font-size":"24px"},{default:h(()=>[u(r,{name:e.widget.icon},null,8,["name"])]),_:1},8,["square","rounded"])]),_:1},8,["class","onClick"])):H("",!0),u(de,null,{default:h(()=>[u(st,{class:j(["text-h6",{"cursor-pointer":e.widget.link}]),onClick:e.jump},{default:h(()=>[ve(_(e.widget.label||e.widget.title),1)]),_:1},8,["class","onClick"])]),_:1})]),_:1},512)):H("",!0),e.widget.hideSeparator!==!0&&e.widget.hideTitle!==!0&&(e.widget.icon||e.widget.title)?(b(),k(se,{key:1})):H("",!0),u(ie,{horizontal:"",class:"jarvis-widget-content",style:O(e.alignment.fit===!1?{"overflow-y":"auto",...e.scaleSizes,...e.verticalAlignment}:e.verticalAlignment)},{default:h(()=>[u(ot,{onResize:e.onResize},null,8,["onResize"]),G("div",{class:"jarvis-widget-scaler full-width",style:O(e.scaleStyle)},[(b(),k(at(e.widget.module),{key:e.widget.revision,class:"full-width",widget:e.widget,_alignment:e.alignment,_fullscreen:e.fullscreenActive,_containerSize:{width:e.containerSize.width,height:e.containerSize.height-e.widgetTitleSize},_widgetSize:{width:e.size.width,height:e.size.height}},null,8,["widget","_alignment","_fullscreen","_containerSize","_widgetSize"]))],4)]),_:1},8,["style"])]),_:1},8,["class"])],34)}var zt=K(Lt,[["render",Nt]]);const Ot=J({name:"TabPanel",props:["page","tab"],components:{Widget:zt},setup(e){P.dev("DEBUG","TabPanel","setup()");const t=M(),n=ae(),i=n.platform.is.mobile,s=!1,a=Re(e.tab,"widgetConfig"),r=m(()=>Math.max(i&&a.value.smartphoneGapSize||s||a.value.desktopGapSize||5,0)),o=m(()=>{let c=[];return i&&a.value.smartphoneSameAs==="specific-layout"||s?c=e.tab.widgetsSmartphone||[]:i&&a.value.smartphoneSameAs==="tablet"?c=e.tab.widgetsTablet||[]:c=e.tab.widgetsDesktop||[],c}),l=m(()=>Math.max.apply(Math,o.value.map(c=>c.y+c.h))),d=m(()=>{var c;return((c=o.value)==null?void 0:c[0])||{}}),y=n.screen.width,v=m(()=>t.pageHeight),p=m(()=>{const c=(i?a.value.smartphoneFitPageHeight:a.value.desktopFitPageHeight)||!1,g=i&&a.value.smartphoneWidgetHeight||s||a.value.desktopWidgetHeight||50;return c===!0?(v.value-2*r.value)/l.value-r.value:g}),w=m(()=>i&&a.value.smartphoneSameAs==="specific-layout"||s?"smartphone":i&&a.value.smartphoneSameAs==="tablet"?"tablet":"desktop");return{containerRows:l,fullscreenContainer:d,pageWidth:y,pageHeight:v,widgetGap:r,widgetHeight:p,widgetLayout:w,widgetContainers:o}}});function Vt(e,t,n,i,s,a){const r=R("widget");return b(),$("div",{class:j({["jarvis-page-"+e.page.id]:!0,["jarvis-tab-"+e.tab.id]:!0})},[e.tab.fullscreen!==!0?(b(),$("div",{key:0,class:j(["container",e.widgetLayout]),style:O({gridTemplateRows:"repeat("+e.containerRows+", "+e.widgetHeight+"px)",columnGap:e.widgetGap+"px",rowGap:e.widgetGap+"px",padding:e.widgetGap+"px"})},[(b(!0),$(U,null,oe(e.widgetContainers,o=>(b(),$(U,null,[o&&o.items&&o.items.length>0?(b(),$("div",{key:o.i,style:O({gridArea:o.y+1+" / "+(o.x+1)+" / span "+o.h+" / span "+o.w}),class:"box"},[u(r,{page:e.page,tab:e.tab,widgets:o.items||[],config:o,layout:e.widgetLayout,containerSize:{width:e.pageWidth/12*o.w,height:o.h*e.widgetHeight+(o.h-1)*e.widgetGap}},null,8,["page","tab","widgets","config","layout","containerSize"])],4)):H("",!0)],64))),256))],6)):(b(),$("div",{key:1,style:O({height:e.pageHeight+"px"})},[u(r,{fullscreen:"",page:e.page,tab:e.tab,widgets:e.fullscreenContainer.items||[],config:e.fullscreenContainer,layout:e.widgetLayout,containerSize:{width:e.pageWidth,height:e.pageHeight}},null,8,["page","tab","widgets","config","layout","containerSize"])],4))],2)}var Wt=K(Ot,[["render",Vt]]);const Ft=J({name:"Page",props:["page"],components:{Container:Pt,Tabs:Rt,TabPanel:Wt},setup(e){P.dev("DEBUG","Page","setup()");const t=ae(),n=He(),i=M(),s=m(()=>t.platform.is.mobile),a=m(()=>i.drawerMiniMode),r=m(()=>i.settings),o=m(()=>Object.keys(e.page.tabs).length),l=m({get(){return"tab-"+i.getSelectedTabId},set(p){p&&n.push({params:{tabId:p.replace("tab-","")}})}});return{setPageContainer:(p,w)=>{const c=document.querySelector(".jarvis-header");p=c&&c.offsetHeight?c.offsetHeight:p;const g=w-p;return g!==i.pageHeight&&(P.dev("DEBUG","Page","setPageContainer",p,w,g,i.pageHeight),i.set("pageHeight",w-p)),{}},onSelectedTabMoving:()=>i.set("selectedTabReady",!1),onSelectedTabReady:()=>i.set("selectedTabReady",!0),drawerMiniMode:a,isMobile:s,tabsCount:o,tabId:l,tabAnimated:m(()=>r.value.tabsSwipeAnimation==="always"||(!r.value.tabsSwipeAnimation||r.value.tabsSwipeAnimation==="mobile")&&s.value),tabSwipeable:m(()=>r.value.tabsSwipe==="always"||(!r.value.tabsSwipe||r.value.tabsSwipe==="mobile")&&s.value),settings:r}}});function Qt(e,t,n,i,s,a){const r=R("Tabs"),o=R("Container"),l=R("TabPanel");return b(),k(vt,{style:{"padding-top":"0"}},{default:h(()=>[u(o,{tabsCount:e.tabsCount},{default:h(()=>[u(r,{page:e.page,tabs:e.page.tabs},null,8,["page","tabs"])]),_:1},8,["tabsCount"]),u(mt,{"style-fn":e.setPageContainer,class:"jarvis-page jarvis-body"},{default:h(()=>[u(Me,{modelValue:e.tabId,"onUpdate:modelValue":t[0]||(t[0]=d=>e.tabId=d),"keep-alive":!0,animated:e.tabAnimated,swipeable:e.tabSwipeable,style:{"background-color":"transparent"},onBeforeTransition:e.onSelectedTabMoving,onTransition:e.onSelectedTabReady},{default:h(()=>[(b(!0),$(U,null,oe(e.page.tabs,d=>(b(),k(Le,{key:d.id,name:"tab-"+d.id,style:O({padding:0,"margin-top":e.settings.tabsBottom||e.page.tabs.length<=1?0:e.settings.tabsDense?"40px":"60px"})},{default:h(()=>[u(l,{page:e.page,tab:{widgetConfig:{},...d}},null,8,["page","tab"])]),_:2},1032,["name","style"]))),128))]),_:1},8,["modelValue","animated","swipeable","onBeforeTransition","onTransition"])]),_:1},8,["style-fn"])]),_:1})}var qt=K(Ft,[["render",Qt],["__scopeId","data-v-f0dbb8b0"]]);function ze(e){return e.split("-")[0]}function Gt(e){return e.split("-")[1]}function Ut(e){return["top","bottom"].includes(ze(e))?"x":"y"}function Jt(e){return e==="y"?"height":"width"}function Te(e,t,n){let{reference:i,floating:s}=e;const a=i.x+i.width/2-s.width/2,r=i.y+i.height/2-s.height/2,o=Ut(t),l=Jt(o),d=i[l]/2-s[l]/2,y=ze(t),v=o==="x";let p;switch(y){case"top":p={x:a,y:i.y-s.height};break;case"bottom":p={x:a,y:i.y+i.height};break;case"right":p={x:i.x+i.width,y:r};break;case"left":p={x:i.x-s.width,y:r};break;default:p={x:i.x,y:i.y}}switch(Gt(t)){case"start":p[o]-=d*(n&&v?-1:1);break;case"end":p[o]+=d*(n&&v?-1:1);break}return p}const Kt=async(e,t,n)=>{const{placement:i="bottom",strategy:s="absolute",middleware:a=[],platform:r}=n,o=await(r.isRTL==null?void 0:r.isRTL(t));let l=await r.getElementRects({reference:e,floating:t,strategy:s}),{x:d,y}=Te(l,i,o),v=i,p={},w=0;for(let c=0;c<a.length;c++){const{name:g,fn:T}=a[c],{x:D,y:E,data:f,reset:S}=await T({x:d,y,initialPlacement:i,placement:v,strategy:s,middlewareData:p,rects:l,platform:r,elements:{reference:e,floating:t}});if(d=D!=null?D:d,y=E!=null?E:y,p={...p,[g]:{...p[g],...f}},S&&w<=50){w++,typeof S=="object"&&(S.placement&&(v=S.placement),S.rects&&(l=S.rects===!0?await r.getElementRects({reference:e,floating:t,strategy:s}):S.rects),{x:d,y}=Te(l,v,o)),c=-1;continue}}return{x:d,y,placement:v,strategy:s,middlewareData:p}};function Ce(e){return{...e,top:e.y,left:e.x,right:e.x+e.width,bottom:e.y+e.height}}function Oe(e){return e&&e.document&&e.location&&e.alert&&e.setInterval}function Q(e){if(e==null)return window;if(!Oe(e)){const t=e.ownerDocument;return t&&t.defaultView||window}return e}function V(e){return Q(e).getComputedStyle(e)}function F(e){return Oe(e)?"":e?(e.nodeName||"").toLowerCase():""}function Ve(){const e=navigator.userAgentData;return e!=null&&e.brands?e.brands.map(t=>t.brand+"/"+t.version).join(" "):navigator.userAgent}function W(e){return e instanceof Q(e).HTMLElement}function x(e){return e instanceof Q(e).Element}function Yt(e){return e instanceof Q(e).Node}function ee(e){if(typeof ShadowRoot=="undefined")return!1;const t=Q(e).ShadowRoot;return e instanceof t||e instanceof ShadowRoot}function ue(e){const{overflow:t,overflowX:n,overflowY:i}=V(e);return/auto|scroll|overlay|hidden/.test(t+i+n)}function Xt(e){return["table","td","th"].includes(F(e))}function We(e){const t=/firefox/i.test(Ve()),n=V(e);return n.transform!=="none"||n.perspective!=="none"||n.contain==="paint"||["transform","perspective"].includes(n.willChange)||t&&n.willChange==="filter"||t&&(n.filter?n.filter!=="none":!1)}function Fe(){return!/^((?!chrome|android).)*safari/i.test(Ve())}const Ee=Math.min,ne=Math.max,ce=Math.round;function Z(e,t,n){var i,s,a,r;t===void 0&&(t=!1),n===void 0&&(n=!1);const o=e.getBoundingClientRect();let l=1,d=1;t&&W(e)&&(l=e.offsetWidth>0&&ce(o.width)/e.offsetWidth||1,d=e.offsetHeight>0&&ce(o.height)/e.offsetHeight||1);const y=x(e)?Q(e):window,v=!Fe()&&n,p=(o.left+(v&&(i=(s=y.visualViewport)==null?void 0:s.offsetLeft)!=null?i:0))/l,w=(o.top+(v&&(a=(r=y.visualViewport)==null?void 0:r.offsetTop)!=null?a:0))/d,c=o.width/l,g=o.height/d;return{width:c,height:g,top:w,right:p+c,bottom:w+g,left:p,x:p,y:w}}function Y(e){return((Yt(e)?e.ownerDocument:e.document)||window.document).documentElement}function fe(e){return x(e)?{scrollLeft:e.scrollLeft,scrollTop:e.scrollTop}:{scrollLeft:e.pageXOffset,scrollTop:e.pageYOffset}}function Qe(e){return Z(Y(e)).left+fe(e).scrollLeft}function _t(e){const t=Z(e);return ce(t.width)!==e.offsetWidth||ce(t.height)!==e.offsetHeight}function Zt(e,t,n){const i=W(t),s=Y(t),a=Z(e,i&&_t(t),n==="fixed");let r={scrollLeft:0,scrollTop:0};const o={x:0,y:0};if(i||!i&&n!=="fixed")if((F(t)!=="body"||ue(s))&&(r=fe(t)),W(t)){const l=Z(t,!0);o.x=l.x+t.clientLeft,o.y=l.y+t.clientTop}else s&&(o.x=Qe(s));return{x:a.left+r.scrollLeft-o.x,y:a.top+r.scrollTop-o.y,width:a.width,height:a.height}}function qe(e){return F(e)==="html"?e:e.assignedSlot||e.parentNode||(ee(e)?e.host:null)||Y(e)}function De(e){return!W(e)||V(e).position==="fixed"?null:xt(e)}function xt(e){let{offsetParent:t}=e,n=e,i=!1;for(;n&&n!==t;){const{assignedSlot:s}=n;if(s){let a=s.offsetParent;if(V(s).display==="contents"){const r=s.hasAttribute("style"),o=s.style.display;s.style.display=V(n).display,a=s.offsetParent,s.style.display=o,r||s.removeAttribute("style")}n=s,t!==a&&(t=a,i=!0)}else if(ee(n)&&n.host&&i)break;n=ee(n)&&n.host||n.parentNode}return t}function en(e){let t=qe(e);for(ee(t)&&(t=t.host);W(t)&&!["html","body"].includes(F(t));){if(We(t))return t;{const n=t.parentNode;t=ee(n)?n.host:n}}return null}function he(e){const t=Q(e);let n=De(e);for(;n&&Xt(n)&&V(n).position==="static";)n=De(n);return n&&(F(n)==="html"||F(n)==="body"&&V(n).position==="static"&&!We(n))?t:n||en(e)||t}function $e(e){if(W(e))return{width:e.offsetWidth,height:e.offsetHeight};const t=Z(e);return{width:t.width,height:t.height}}function tn(e){let{rect:t,offsetParent:n,strategy:i}=e;const s=W(n),a=Y(n);if(n===a)return t;let r={scrollLeft:0,scrollTop:0};const o={x:0,y:0};if((s||!s&&i!=="fixed")&&((F(n)!=="body"||ue(a))&&(r=fe(n)),W(n))){const l=Z(n,!0);o.x=l.x+n.clientLeft,o.y=l.y+n.clientTop}return{...t,x:t.x-r.scrollLeft+o.x,y:t.y-r.scrollTop+o.y}}function nn(e,t){const n=Q(e),i=Y(e),s=n.visualViewport;let a=i.clientWidth,r=i.clientHeight,o=0,l=0;if(s){a=s.width,r=s.height;const d=Fe();(d||!d&&t==="fixed")&&(o=s.offsetLeft,l=s.offsetTop)}return{width:a,height:r,x:o,y:l}}function sn(e){var t;const n=Y(e),i=fe(e),s=(t=e.ownerDocument)==null?void 0:t.body,a=ne(n.scrollWidth,n.clientWidth,s?s.scrollWidth:0,s?s.clientWidth:0),r=ne(n.scrollHeight,n.clientHeight,s?s.scrollHeight:0,s?s.clientHeight:0);let o=-i.scrollLeft+Qe(e);const l=-i.scrollTop;return V(s||n).direction==="rtl"&&(o+=ne(n.clientWidth,s?s.clientWidth:0)-a),{width:a,height:r,x:o,y:l}}function Ge(e){const t=qe(e);return["html","body","#document"].includes(F(t))?e.ownerDocument.body:W(t)&&ue(t)?t:Ge(t)}function Ue(e,t){var n;t===void 0&&(t=[]);const i=Ge(e),s=i===((n=e.ownerDocument)==null?void 0:n.body),a=Q(i),r=s?[a].concat(a.visualViewport||[],ue(i)?i:[]):i,o=t.concat(r);return s?o:o.concat(Ue(r))}function on(e,t){const n=t.getRootNode==null?void 0:t.getRootNode();if(e.contains(t))return!0;if(n&&ee(n)){let i=t;do{if(i&&e===i)return!0;i=i.parentNode||i.host}while(i)}return!1}function an(e,t){const n=Z(e,!1,t==="fixed"),i=n.top+e.clientTop,s=n.left+e.clientLeft;return{top:i,left:s,x:s,y:i,right:s+e.clientWidth,bottom:i+e.clientHeight,width:e.clientWidth,height:e.clientHeight}}function Pe(e,t,n){return t==="viewport"?Ce(nn(e,n)):x(t)?an(t,n):Ce(sn(Y(e)))}function rn(e){const t=Ue(e),i=["absolute","fixed"].includes(V(e).position)&&W(e)?he(e):e;return x(i)?t.filter(s=>x(s)&&on(s,i)&&F(s)!=="body"):[]}function ln(e){let{element:t,boundary:n,rootBoundary:i,strategy:s}=e;const r=[...n==="clippingAncestors"?rn(t):[].concat(n),i],o=r[0],l=r.reduce((d,y)=>{const v=Pe(t,y,s);return d.top=ne(v.top,d.top),d.right=Ee(v.right,d.right),d.bottom=Ee(v.bottom,d.bottom),d.left=ne(v.left,d.left),d},Pe(t,o,s));return{width:l.right-l.left,height:l.bottom-l.top,x:l.left,y:l.top}}const dn={getClippingRect:ln,convertOffsetParentRelativeRectToViewportRelativeRect:tn,isElement:x,getDimensions:$e,getOffsetParent:he,getDocumentElement:Y,getElementRects:e=>{let{reference:t,floating:n,strategy:i}=e;return{reference:Zt(t,he(n),i),floating:{...$e(n),x:0,y:0}}},getClientRects:e=>Array.from(e.getClientRects()),isRTL:e=>V(e).direction==="rtl"},cn=(e,t,n)=>Kt(e,t,{platform:dn,...n});var un=`[\r
   {\r
      "id":"cfbea70b-925b-40d1-9e8e-d0768336e3da",\r
      "title":"Main Site",\r
      "type":"page",\r
      "icon":"mdi-file",\r
      "tabs":[\r
         {\r
            "id":"0559b5e5-1c56-4ea4-8211-d51226417202",\r
            "title":"Dashboard",\r
            "icon":"mdi-monitor-dashboard",\r
            "widgetsDesktop":[\r
               {\r
                  "x":0,\r
                  "y":0,\r
                  "w":4,\r
                  "h":8,\r
                  "i":"77ac22da-738d-4646-b0f5-940298bd6571",\r
                  "moved":false,\r
                  "items":[\r
                     "3958dfb0-83da-48ae-96f3-e66969a92cac"\r
                  ]\r
               },\r
               {\r
                  "x":4,\r
                  "y":0,\r
                  "w":4,\r
                  "h":4,\r
                  "i":"28e602ec-4064-48d0-94d8-80e64fe37f87",\r
                  "moved":false,\r
                  "items":[\r
                     "be31acad-6bb4-40ed-a9cf-24cd981d8545"\r
                  ]\r
               },\r
               {\r
                  "x":4,\r
                  "y":4,\r
                  "w":4,\r
                  "h":4,\r
                  "i":"0f1c06bc-f5c3-4e32-84e6-41fc0b4d05b5",\r
                  "moved":false,\r
                  "items":[\r
                     "b073226b-14d9-40e9-bbd7-4a54080cfa87"\r
                  ]\r
               },\r
               {\r
                  "x":8,\r
                  "y":0,\r
                  "w":4,\r
                  "h":4,\r
                  "i":"a3c543c8-8135-47ef-905e-681982708764",\r
                  "moved":false,\r
                  "items":[\r
                     "99142690-4245-445b-bbc4-be8d09b93b83"\r
                  ]\r
               }\r
            ],\r
            "widgetsSmartphone":[\r
               \r
            ]\r
         },\r
         {\r
            "id":"e2055e5e-c0a8-46dc-8019-30c97e157d62",\r
            "title":"Map",\r
            "icon":"map",\r
            "fullscreen":true,\r
            "widgetsDesktop":[\r
               {\r
                  "x":0,\r
                  "y":0,\r
                  "w":4,\r
                  "h":4,\r
                  "i":"3587d28c-ffbe-4121-9e93-35cc52a5e947",\r
                  "moved":false,\r
                  "items":[\r
                     "232c9a69-1077-4b03-9c68-2d27eb148e6f"\r
                  ]\r
               }\r
            ],\r
            "widgetsSmartphone":[\r
               \r
            ]\r
         },\r
         {\r
            "id":"c9ae69c1-5c33-49bb-86e9-6ca2106cb9b7",\r
            "title":"Settings",\r
            "icon":"cog",\r
            "widgetsDesktop":[\r
               {\r
                  "x":0,\r
                  "y":0,\r
                  "w":4,\r
                  "h":30,\r
                  "i":"252b1b88-f112-4095-aa75-a8f97fc6856b",\r
                  "moved":false,\r
                  "items":[\r
                     "dc0d5c0e-d82d-41a9-8f55-6d6ce9b94937"\r
                  ],\r
                  "scaleToFitContents":false\r
               },\r
               {\r
                  "x":4,\r
                  "y":0,\r
                  "w":8,\r
                  "h":5,\r
                  "i":"6367c1cf-9e5d-4ec7-a383-f578e6dd0ea2",\r
                  "moved":false,\r
                  "items":[\r
                     "6fc7cca0-306e-40f6-a7c6-556ebd1fbd73"\r
                  ]\r
               },\r
               {\r
                  "x":8,\r
                  "y":5,\r
                  "w":4,\r
                  "h":25,\r
                  "i":"9f4dbd4d-cbe7-4dcd-94f3-c35850e28778",\r
                  "moved":false,\r
                  "items":[\r
                     "e90fd75a-f510-4481-845d-b2cdac5c4e2f"\r
                  ],\r
                  "scaleToFitContents":false\r
               }\r
            ],\r
            "widgetsSmartphone":[\r
               \r
            ]\r
         }\r
      ]\r
   }\r
]`,fn=`{\r
   "232c9a69-1077-4b03-9c68-2d27eb148e6f":{\r
      "id":"232c9a69-1077-4b03-9c68-2d27eb148e6f",\r
      "config":{\r
      },\r
      "module":"Map"\r
   }\r
}`,gn=[{title:"#introduction.title",message:"#introduction.content",onEnter:({props:e})=>{const t=be.getConnection,n=M();t.setState(q.get("NODE_SETTINGS"),JSON.stringify({...n.settings,["tour"+Ne(e.tour)]:!0})).catch(i=>console.warn("Tours.Introduction",i.message||i))}},{target:"#SettingsButton",spotlight:".jarvis-sidebar-container",title:"#settings.title",message:"#settings.content",params:{placement:"right"},secondaryButton:"#settings.buttons.manually",secondaryAction:({finishTour:e,step:t})=>{document.querySelector("#SettingsButton").click(),e()},primaryButton:"#settings.buttons.automatically",primaryAction:({finishTour:e,nextStep:t,step:n})=>{t();const i={},s={};me.importDevices(q.get("DEFAULT_ADAPTERIMPORT").concat(["daswetter"])).then(a=>{a.forEach(w=>{if(w.status==="fulfilled"){const c=w.value;i[c.function]=i[c.function]||[],i[c.function].push(c),s[c.id]=c}});const r=JSON.parse(un),o=JSON.parse(fn),l={config:{},items:[],module:"StateList",title:""},d=[{widgetId:"3958dfb0-83da-48ae-96f3-e66969a92cac",function:"light",icon:"mdi-lightbulb-on"},{widgetId:"be31acad-6bb4-40ed-a9cf-24cd981d8545",function:"blind",icon:"mdi-window-shutter-open"},{widgetId:"b073226b-14d9-40e9-bbd7-4a54080cfa87",function:"heating",icon:"mdi-radiator"},{widgetId:"99142690-4245-445b-bbc4-be8d09b93b83",function:"window",icon:"mdi-window-closed-variant"}];o["dc0d5c0e-d82d-41a9-8f55-6d6ce9b94937"]={id:"dc0d5c0e-d82d-41a9-8f55-6d6ce9b94937",config:{},items:[],module:"AdapterStatus",title:""},o["6fc7cca0-306e-40f6-a7c6-556ebd1fbd73"]={id:"6fc7cca0-306e-40f6-a7c6-556ebd1fbd73",config:{},items:[],module:"AdapterLogs",title:""},o["e90fd75a-f510-4481-845d-b2cdac5c4e2f"]={id:"e90fd75a-f510-4481-845d-b2cdac5c4e2f",config:{},items:[],module:"ScriptStatus",title:""},d.forEach((w,c)=>{const g=rt(l);g.id=w.widgetId,g.title=lt.global.t(w.function),g.icon=w.icon,i[w.function]=i[w.function]||[];for(const D of i[w.function]){if(!D.states)continue;const E=Object.keys(D.states);let f={id:dt(),type:"device",deviceId:D.id,showState:!0,primaryStateKey:E[0]||"",secondaryStatesKeys:[]};D.function==="light"&&(E.includes("power")||E.includes("level"))?f={...f,showState:!1,actionElement:"SwitchAction",primaryStateKey:E.includes("power")?"power":"level"}:D.function==="blind"&&E.includes("level")?f={...f,showState:!1,actionElement:"BlindLevelAction",primaryStateKey:"level"}:D.function==="heating"&&E.includes("temperature")?f={...f,showState:!0,primaryStateKey:"temperature",secondaryStatesKeys:E.filter(S=>["setTemperature","humidity"].includes(S))}:D.function==="window"&&E.includes("open")&&(f={...f,primaryStateKey:"open"}),g.items.push(f)}o[g.id]=g;const{height:T}=me.getDefaultModuleHeight(g,g.items);r[0].tabs[0].widgetsDesktop[c].h=T,r[0].tabs[0].widgetsDesktop[c+1]&&r[0].tabs[0].widgetsDesktop[c].x===r[0].tabs[0].widgetsDesktop[c+1].x&&(r[0].tabs[0].widgetsDesktop[c+1].y=T)});const y=M(),v=be.getConnection,p=[v.setState(q.get("NODE_LAYOUT"),JSON.stringify({version:3,layout:r})),v.setState(q.get("NODE_DEVICES"),JSON.stringify({version:3,devices:s})),v.setState(q.get("NODE_WIDGETS"),JSON.stringify(o)),v.setState(q.get("NODE_SETTINGS"),JSON.stringify({...y.settings,tourInterface:!1}))];Promise.allSettled(p).then(()=>{e(),window.location.reload()}).catch(w=>console.warn("Tours.Introduction",w.message||w))}).catch(a=>{console.warn("Tours.Introduction",a.message||a)})}},{style:{"max-width":"450px"},title:"#jarvis.title",loading:!0,buttons:!1}],pn=[{target:".jarvis-sidebar-container",title:"#drawer.title",message:"#drawer.content",params:{placement:"right"},onEnter:({props:e})=>{const t=be.getConnection,n=M();t.setState(q.get("NODE_SETTINGS"),JSON.stringify({...n.settings,["tour"+Ne(e.tour)]:!0})).catch(i=>console.warn("Tours.Interface",i.message||i))}},{target:".jarvis-tabs-container",title:"#tabs.title",message:"#tabs.content"},{spotlight:".q-page-container .jarvis-page",title:"#widgets.title",message:"#widgets.content"},{target:".jarvis-widget-container .jarvis-widget-module-StateList",title:"#modules.title",message:"#modules.content",params:{placement:"right-start"}},{target:".jarvis-widget-container .jarvis-widget-module-StateList .jarvis-widget-header",title:"#WidgetHeader.title",message:"#WidgetHeader.content",targetStyle:{}},{buttons:!1,onSpotlightClick:({nextStep:e})=>{e()},target:".jarvis-widget-container .jarvis-widget-module-StateList .jarvis-widget-content",title:"#WidgetContent.title",message:"#WidgetContent.content",targetStyle:{},params:{placement:"right-start"}},{target:".jarvis-popup",title:"#DeviceStateDetails.title",message:"#DeviceStateDetails.content",params:{placement:"top"}}],mn={introduction:gn,interface:pn};const vn=J({name:"Tours",props:{tour:{type:String},start:{type:Boolean,default:!1}},setup(e){const t=B(!1),n=B(null),i=mn[e.tour],s=B(null),a=B(null);let r,o,l={};const d=(f,S)=>{o=S?f.style.position:o,f.style.position=S?f.style.position||"relative":o,f.style.zIndex=S?5001:null,f.style.border=S?"5px solid #fff":null,f.style.opacity=S?.7:"unset",r=S?f.parentElement.style.zIndex:r,f.parentElement.style.zIndex=S?5001:r},y=(f,S=!0)=>{const X=f.spotlight||f.target;if(t.value=!0,X){const I=document.querySelector(X);if(I){if(d(I,S),f.onSpotlightClick!==void 0&&(I.style.pointerEvents="all",I.onclick=()=>f.onSpotlightClick({props:e,step:f,nextStep:c,previousStep:w,skipStep:g,finishTour:T})),f.targetStyle&&S===!0){l={};for(const A in f.targetStyle)l[A]=I.style[A],I.style[A]=f.targetStyle[A]}else if(f.targetStyle&&S===!1)for(const A in f.targetStyle)I.style[A]=l[A]}}},v=f=>{const S=document.querySelector(f.value.target||"body"),X={...f.value.params||{},middleware:[]};return cn(S,n.value,X).then(I=>{const{x:A,y:C}=I;n.value.firstChild&&(n.value.firstChild.style.display="block");const ge=n.value.offsetWidth,te=n.value.offsetHeight,ye=document.querySelector("body");ye.style.pointerEvents="none";const Je=ye.offsetHeight-te;return n.value.style.left=(f.value.target?A+15:"calc(50% - "+ge/2)+"px",n.value.style.top=(f.value.target?Math.max(10,Math.min(Je-10,C-te/2+10)):C/2-te/2)+"px",n.value.style.pointerEvents="all",!0})},p=f=>{a.value;const S=a.value===null||a.value===f-2;a.value=f-1,s.value=i[a.value],v(s).then(()=>{i[a.value-1]&&y(i[a.value-1],!1),i[a.value+1]&&y(i[a.value+1],!1),y(s.value)}),S&&s.value&&s.value.onEnter&&s.value.onEnter({props:e,step:s,previousStep:w,nextStep:c,finishTour:T,skipStep:g})},w=()=>p(a.value),c=()=>p(a.value+2),g=()=>{y(s.value,!1),s.value=null,t.value=!1;const f=document.querySelector("body");f.style.pointerEvents="all"},T=()=>{g()},D=m(()=>a.value<=0),E=m(()=>a.value===i.length-1);return M(),ct(()=>{e.start&&p(1)}),{marked:yt,tooltip:n,overlay:t,step:s,isFirst:D,isLast:E,previousStep:w,nextStep:c,skipStep:g,finishTour:T}}}),bn={class:"tooltip",ref:"tooltip"},hn={class:"text-h6"},wn=["innerHTML"];function yn(e,t,n,i,s,a){const r=R("q-overlay");return b(),$(U,null,[u(r,{modelValue:e.overlay,"onUpdate:modelValue":t[0]||(t[0]=o=>e.overlay=o),"no-scroll":!0,"z-index":5e3,opacity:.7},null,8,["modelValue","opacity"]),G("div",bn,[e.step?(b(),k(we,{key:e.step.title,class:"step"},{default:h(()=>[u(ie,null,{default:h(()=>[G("div",hn,_(e.$t(e.step.title||"")),1)]),_:1}),u(se),e.step.loading===!0?(b(),k(ut,{key:0,indeterminate:""})):H("",!0),u(ie,{style:{"max-height":"50vh"},class:"body scroll"},{default:h(()=>[G("div",{innerHTML:e.marked.parse(e.$t(e.step.message||""))},null,8,wn)]),_:1}),u(se),e.step.buttons!==!1?(b(),k(Be,{key:1,class:"nowrap"},{default:h(()=>[u(L,{onClick:e.skipStep,flat:"",label:e.$t("Skip"),color:"accent"},null,8,["onClick","label"]),u(je),e.step.secondaryAction===void 0?N((b(),k(L,{key:0,onClick:e.previousStep,flat:"",label:e.$t("Previous"),color:"secondary"},null,8,["onClick","label"])),[[z,!e.isFirst]]):N((b(),k(L,{key:1,onClick:t[1]||(t[1]=o=>e.step.secondaryAction({step:e.step,previousStep:e.previousStep,nextStep:e.nextStep,finishTour:e.finishTour,skipStep:e.skipStep})),flat:"",label:e.$t(e.step.secondaryButton),color:"secondary"},null,8,["label"])),[[z,!e.isFirst]]),e.step.primaryButton===void 0?N((b(),k(L,{key:2,onClick:e.nextStep,flat:"",label:e.$t("Next"),color:"primary"},null,8,["onClick","label"])),[[z,!e.isLast]]):H("",!0),e.step.primaryButton===void 0?N((b(),k(L,{key:3,onClick:e.finishTour,label:e.$t("Finish"),color:"primary"},null,8,["onClick","label"])),[[z,e.isLast]]):N((b(),k(L,{key:4,onClick:t[2]||(t[2]=o=>e.step.primaryAction({step:e.step,previousStep:e.previousStep,nextStep:e.nextStep,finishTour:e.finishTour,skipStep:e.skipStep})),flat:"",label:e.$t(e.step.primaryButton),color:"primary"},null,8,["label"])),[[z,!e.isFirst]])]),_:1})):H("",!0)]),_:1})):H("",!0)],512)],64)}var Sn=K(vn,[["render",yn]]);const kn=J({name:"Jarvis",components:{DeviceDetailsPopup:Et,Page:qt,tours:Sn},setup(){P.dev("DEBUG","Jarvis","setup()");const e=ae(),t=M(),n=m(()=>t.settings);pe(()=>{P.dev("DEBUG","Jarvis","watchEffect","scrollbar"),le("style",n.value.scrollbars==="desktop"&&(e.platform.is.desktop||e.platform.is.mobile)||n.value.scrollbars==="mobile"&&e.platform.is.mobile?St:" ",{id:"scrollbar",type:"text/css",onlyPro:!1})});try{pe(()=>{P.dev("DEBUG","Jarvis","watchEffect","styles"),ke("styles",t.styles,{tag:"link",src:"href",rel:"stylesheet"}).then(a=>le("style",a,{id:"css",type:"text/css"}))})}catch(a){console.warn("Jarvis-B7cq4T4m","Error injecting custom styles: "+a.message),console.debug("Jarvis-B7cq4T4m",t.styles)}try{pe(()=>{P.dev("DEBUG","Jarvis","watchEffect","scripts"),ke("script",t.scripts,{tag:"script"}).then(a=>le("script",a,{id:"scripts"}))})}catch(a){console.warn("Jarvis-B7cq4T4m","Error injecting custom scripts: "+a.message),console.debug("Jarvis-B7cq4T4m",t.scripts)}const i=m(()=>t.layout||[]),s=m(()=>"page-"+t.getSelectedPageId);return{settings:n,pages:i,pageId:s}}});function Tn(e,t,n,i,s,a){const r=R("tours"),o=R("DeviceDetailsPopup"),l=R("Page");return b(),$(U,null,[u(r,{tour:"introduction",start:e.settings.tourIntroduction!==!0},null,8,["start"]),u(r,{tour:"interface",start:e.settings.tourIntroduction===!0&&e.settings.tourInterface!==!0},null,8,["start"]),u(o),u(Me,{"model-value":e.pageId,"keep-alive":!0,style:{"background-color":"transparent"},vertical:""},{default:h(()=>[(b(!0),$(U,null,oe(e.pages,d=>(b(),k(Le,{key:d.id,name:"page-"+d.id,style:{padding:"0","margin-top":"0px"}},{default:h(()=>[u(l,{page:d},null,8,["page"])]),_:2},1032,["name"]))),128))]),_:1},8,["model-value"])],64)}var Hn=K(kn,[["render",Tn]]);export{Hn as default};
