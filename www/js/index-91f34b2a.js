import{Q as V}from"./QToolbarTitle-7f7ce0a8.js";import{Q as E}from"./QToolbar-f270865e.js";import{Q as j}from"./QExpansionItem-81e4c5c6.js";import{x as C,cB as $,_ as S,m as u,o as a,f as i,F as w,s as y,j as k,q as o,v as O,L as J,a as f,a0 as Q,dl as b,g as x,w as m,l as N,t as P,N as _,ah as v,n as B}from"./index-3eac0637.js";import{J as M}from"./json-editor-1c3d4ef9.js";import"./QSlideTransition-556294a8.js";import"./_commonjsHelpers-45ea234c.js";const T=C({name:"SettingPage",props:["settings"],setup(){const e=$();return{onChange:({id:n,value:r})=>e.set({["settings."+n]:r}),getValue:n=>e.settings[n.id]!==void 0?n.validate?n.validate(e.settings[n.id]):e.settings[n.id]:n.value}}}),H={class:"row",style:{padding:"8px 16px"}};function z(e,p,c,n,r,h){const l=u("inputs");return a(),i("div",H,[(a(!0),i(w,null,y(e.settings,s=>(a(),i("div",{class:k("col-"+(s.columns||2)),key:s.id},[o(l,O(s,{onOnChange:e.onChange,onOnSelect:e.onChange,value:e.getValue(s)}),null,16,["onOnChange","onOnSelect","value"])],2))),128))])}var D=S(T,[["render",z]]);const F=C({name:"SettingsPage",components:{JsonEditor:M,SettingPage:D},setup(){const e=$(),p=J(),c=f(()=>p.pageHeight),n=f(()=>e.settings),r=f(()=>{var s;return(s=e.settings)==null?void 0:s.configExpertMode}),h=({id:s,error:d,value:t})=>{if(d)e.addError({key:"settings-"+s,val:d.message||d});else if(t){e.removeError("settings-"+s);for(const g in t)e.set({["settings."+g]:t[g]})}},l=s=>!s._error&&e.set({[s.id]:JSON.parse(s.value)});return{expanded:Q({}),groups:b,pageHeight:c,expertMode:r,json:n,onChange:h,onJsonEditor:l}}}),L={class:"full-height"},U={class:"row no-wrap"};function q(e,p,c,n,r,h){const l=u("setting-page"),s=u("json-editor"),d=u("paper");return a(),i("div",L,[x("div",U,[o(E,{class:"paper",style:{"min-height":"56px"}},{default:m(()=>[o(V,{shrink:""},{default:m(()=>[N(P(e.$t("Settings")),1)]),_:1})]),_:1})]),(a(!0),i(w,null,y(e.groups,t=>_((a(),i("div",{class:"row no-wrap paper",key:t.id},[o(j,{modelValue:e.expanded[t.id],"onUpdate:modelValue":g=>e.expanded[t.id]=g,icon:t.icon,label:e.$t(t.label),class:"full-width"},{default:m(()=>[o(l,{settings:t.settings},null,8,["settings"])]),_:2},1032,["modelValue","onUpdate:modelValue","icon","label"])])),[[v,!e.expertMode]])),128)),_(o(d,{style:B({height:e.pageHeight-66-16+"px"})},{default:m(()=>[o(s,{id:"settings",json:e.json,onOnChange:e.onJsonEditor},null,8,["json","onOnChange"])]),_:1},8,["style"]),[[v,e.expertMode]])])}var Y=S(F,[["render",q]]);export{Y as default};
