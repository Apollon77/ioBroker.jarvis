import{d as w,m as y,e as r,f as C,ai as D,a3 as I,z as B,a as M,w as G,C as N}from"./vendor.quasar-78ba37d9.js";import{d as P,u as A,p as $,r as R,K as V,h as a,i as l,b as m,o as p,f,j as d,t as s,g,v as S,a as j,F as E,k as F,e as h,n as K}from"./vendor.vue-1bbf3cb4.js";import{u as q,b as H}from"./stores-22cbae97.js";import{u as Z}from"./vendor.vue-i18n-e0977824.js";import{M as J}from"./modules-9c8c454f.js";import{C as W}from"./controllers-596cf83c.js";import"./vendor.events-e8bb2ecf.js";import"./vendor.rfdc-06a2e69e.js";import{_ as X}from"./helpers-7b53fe93.js";var Y={"AdapterStatus#description":"Zeigt alle installierten Adapter mit ihren Instanzen und dem jeweiligen Status (active & alive, active & not connected, inactive) an.","config#AdapterStatus#switch#label":"Schalten erlauben","config#AdapterStatus#switch#description":"Das An- bzw. Abschalten von Adaptern erlauben","config#AdapterStatus#updates#label":"Adapter Updates","config#AdapterStatus#updates#description":"Aktivieren, um Adapter Updates anzuzeigen","config#AdapterStatus#list#label":"Liste angezeigter Adapter","config#AdapterStatus#list#description":"Liste der Adapter, die angezeigt werden (leere Liste zeigt alle Adapter)","config#AdapterStatus#list#values":"Namen der Adapter mit Komma separiert","config#AdapterStatus#blacklist#label":"Liste nicht angezeigter Adapter","config#AdapterStatus#blacklist#description":"Zeigt alle Adapter, au\xDFer die hier angegebenen","config#AdapterStatus#blacklist#values":"Namen der Adapter mit Komma separiert",disabled:"deaktiviert","Update available":"Aktualisierung verf\xFCgbar",Group:"Gruppe","last update":"letzte Aktualisierung","Updates available":"Aktualisierungen verf\xFCgbar","Adapter Status":"Adapter Status",Adapter:"Adapter",alive:"l\xE4uft","not alive":"l\xE4uft nicht","Compact Mode":"Compact Mode"},Se=Object.freeze(Object.defineProperty({__proto__:null,default:Y},Symbol.toStringTag,{value:"Module"})),x={"AdapterStatus#description":"Displays a list of all installed adapters with its instances and the respective status (active & alive, not connected, inactive)","config#AdapterStatus#switch#label":"Enable Switch","config#AdapterStatus#switch#description":"Allow to switch adapters on / off","config#AdapterStatus#updates#label":"Adapter Updates","config#AdapterStatus#updates#description":"Enable to show adapters updates","config#AdapterStatus#list#label":'List of Adapter"s',"config#AdapterStatus#list#description":"List of adapters to show (empty shows all adapters)","config#AdapterStatus#list#values":"Adapter names separated by comma","config#AdapterStatus#blacklist#label":'List of Adapter"s to hide',"config#AdapterStatus#blacklist#description":"Shows all adapters except the ones listed here","config#AdapterStatus#blacklist#values":"Adapter names separated by comma"},he=Object.freeze(Object.defineProperty({__proto__:null,default:x},Symbol.toStringTag,{value:"Module"})),ee={"AdapterStatus#description":"\u041E\u0442\u043E\u0431\u0440\u0430\u0436\u0435\u043D\u0438\u0435 \u0441\u043F\u0438\u0441\u043A\u0430 \u0432\u0441\u0435\u0445 \u0443\u0441\u0442\u0430\u043D\u043E\u0432\u043B\u0435\u043D\u043D\u044B\u0445 \u0430\u0434\u0430\u043F\u0442\u0435\u0440\u043E\u0432 \u0441 \u0438\u0445 \u044D\u043A\u0437\u0435\u043C\u043F\u043B\u044F\u0440\u0430\u043C\u0438 \u0438 \u0441\u0442\u0430\u0442\u0443\u0441\u0430\u043C\u0438 (\u0430\u043A\u0442\u0438\u0432\u0435\u043D \u0438 \u043F\u043E\u0434\u043A\u043B\u044E\u0447\u0435\u043D, \u043D\u0435 \u043F\u043E\u0434\u043A\u043B\u044E\u0447\u0435\u043D, \u043D\u0435 \u0430\u043A\u0442\u0438\u0432\u0435\u043D)","config#AdapterStatus#switch#label":"\u0412\u043A\u043B\u044E\u0447\u0438\u0442\u044C \u043F\u0435\u0440\u0435\u043A\u043B\u044E\u0447\u0430\u0442\u0435\u043B\u044C","config#AdapterStatus#switch#description":"\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044C \u0432\u043A\u043B\u044E\u0447\u0435\u043D\u0438\u0435/\u0432\u044B\u043A\u043B\u044E\u0447\u0435\u043D\u0438\u0435 \u0430\u0434\u0430\u043F\u0442\u0435\u0440\u043E\u0432","config#AdapterStatus#updates#label":"\u041E\u0431\u043D\u043E\u0432\u043B\u0435\u043D\u0438\u044F \u0430\u0434\u0430\u043F\u0442\u0435\u0440\u0430","config#AdapterStatus#updates#description":"\u0420\u0430\u0437\u0440\u0435\u0448\u0438\u0442\u044C \u043E\u0442\u043E\u0431\u0440\u0430\u0436\u0435\u043D\u0438\u0435 \u043E\u0431\u043D\u043E\u0432\u043B\u0435\u043D\u0438\u0439 \u0430\u0434\u0430\u043F\u0442\u0435\u0440\u043E\u0432","config#AdapterStatus#list#label":"\u0421\u043F\u0438\u0441\u043E\u043A \u0430\u0434\u0430\u043F\u0442\u0435\u0440\u043E\u0432","config#AdapterStatus#list#description":"\u0421\u043F\u0438\u0441\u043E\u043A \u0430\u0434\u0430\u043F\u0442\u0435\u0440\u043E\u0432 \u0434\u043B\u044F \u043E\u0442\u043E\u0431\u0440\u0430\u0436\u0435\u043D\u0438\u044F (\u0435\u0441\u043B\u0438 \u043F\u0443\u0441\u0442\u043E, \u043E\u0442\u043E\u0431\u0440\u0430\u0436\u0430\u044E\u0442\u0441\u044F \u0432\u0441\u0435 \u0430\u0434\u0430\u043F\u0442\u0435\u0440\u044B)","config#AdapterStatus#list#values":"\u041D\u0430\u0437\u0432\u0430\u043D\u0438\u044F \u0430\u0434\u0430\u043F\u0442\u0435\u0440\u043E\u0432 \u0440\u0430\u0437\u0434\u0435\u043B\u044F\u044E\u0442\u0441\u044F \u0437\u0430\u043F\u044F\u0442\u043E\u0439","config#AdapterStatus#blacklist#label":"\u0421\u043F\u0438\u0441\u043E\u043A \u0441\u043A\u0440\u044B\u0432\u0430\u0435\u043C\u044B\u0445 \u0430\u0434\u0430\u043F\u0442\u0435\u0440\u043E\u0432","config#AdapterStatus#blacklist#description":"\u041E\u0442\u043E\u0431\u0440\u0430\u0437\u0438\u0442\u044C \u0432\u0441\u0435 \u0430\u0434\u0430\u043F\u0442\u0435\u0440\u044B, \u0437\u0430 \u0438\u0441\u043A\u043B\u044E\u0447\u0435\u043D\u0438\u0435\u043C \u0443\u043A\u0430\u0437\u0430\u043D\u043D\u044B\u0445","config#AdapterStatus#blacklist#values":"\u041D\u0430\u0437\u0432\u0430\u043D\u0438\u044F \u0430\u0434\u0430\u043F\u0442\u0435\u0440\u043E\u0432 \u0440\u0430\u0437\u0434\u0435\u043B\u044F\u044E\u0442\u0441\u044F \u0437\u0430\u043F\u044F\u0442\u043E\u0439",disabled:"\u043E\u0442\u043A\u043B\u044E\u0447\u0435\u043D\u043E","Update available":"\u0414\u043E\u0441\u0442\u0443\u043F\u043D\u043E \u043E\u0431\u043D\u043E\u0432\u043B\u0435\u043D\u0438\u0435",Group:"\u0413\u0440\u0443\u043F\u043F\u0430","last update":"\u043F\u043E\u0441\u043B\u0435\u0434\u043D\u0435\u0435 \u043E\u0431\u043D\u043E\u0432\u043B\u0435\u043D\u0438\u0435","Updates available":"\u0414\u043E\u0441\u0442\u0443\u043F\u043D\u044B \u043E\u0431\u043D\u043E\u0432\u043B\u0435\u043D\u0438\u044F","Adapter Status":"\u0421\u0442\u0430\u0442\u0443\u0441 \u0430\u0434\u0430\u043F\u0442\u0435\u0440\u0430",Adapter:"\u0410\u0434\u0430\u043F\u0442\u0435\u0440",alive:"\u043F\u043E\u0434\u043A\u043B\u044E\u0447\u0435\u043D","not alive":"\u043D\u0435 \u043F\u043E\u0434\u043A\u043B\u044E\u0447\u0435\u043D","Compact Mode":"\u041A\u043E\u043C\u043F\u0430\u043A\u0442\u043D\u044B\u0439 \u0440\u0435\u0436\u0438\u043C"},ke=Object.freeze(Object.defineProperty({__proto__:null,default:ee},Symbol.toStringTag,{value:"Module"}));const te={addGroup:!1,addDivider:!1,addDevice:!1};var O=[{columns:2,parameter:"switch",label:"config#AdapterStatus#switch#label",info:"config#AdapterStatus#switch#description",type:"Switch",value:!0},{columns:2,parameter:"updates",label:"config#AdapterStatus#updates#label",info:"config#AdapterStatus#updates#description",type:"Switch",value:!0},{parameter:"list",label:"config#AdapterStatus#list#label",info:"config#AdapterStatus#list#description",placeholder:"config#AdapterStatus#list#values"},{parameter:"blacklist",label:"config#AdapterStatus#blacklist#label",info:"config#AdapterStatus#blacklist#description",placeholder:"config#AdapterStatus#blacklist#values"}],_e=Object.freeze(Object.defineProperty({__proto__:null,Settings:te,default:O},Symbol.toStringTag,{value:"Module"}));const ae=P({name:"ModuleAdapterStatus",props:["widget"],setup(t){const k=W.getConnection;q();const v=H(),z=Z(),b=A(()=>t.widget.config),u=A(()=>({...J.joinConfig(b.value,O),list:b.value.list?b.value.list.replace(/, /g,",").toLowerCase().split(","):null,blacklist:b.value.blacklist?b.value.blacklist.replace(/, /g,",").toLowerCase().split(","):null})),n=A(()=>{let o=v.instances;if(o=o&&o.val&&!o.val.error?{...o.val}:{},u.value.list)for(const i in o){const c=i.substr(0,i.indexOf("."));!u.value.list.includes(i)&&!u.value.list.includes(c)&&delete o[i]}else if(u.value.blacklist)for(const i in o){const c=i.substr(0,i.indexOf("."));(u.value.blacklist.includes(i)||u.value.blacklist.includes(c))&&delete o[i]}return o}),e=$([]),L=$([]);k.subscribeState("admin.0.info.updatesList",({err:o,state:i})=>{if(i){const c=i&&i.val?i.val.replace("js-controller,","").replace("js-controller",""):"";e.value=c?c.split(","):[],L.value=e.value.map(_=>n.value[_+".0"]?n.value[_+".0"].title+" ("+n.value[_+".0"].name+")":_).join(", ")}});const U=$({}),T=(o,i)=>{U.value[o]=!0,k.setAdapter(o,i).then(()=>{v.join("instances",{val:{...v.instances.val,[o]:{...v.instances.val[o],enabled:i}},ts:Date.now()})}).catch(c=>{console.error(c)}).finally(()=>{U.value[o]=!1})},Q=A(()=>z.locale.value.substr(0,2));return{activeRepo:A(()=>v.meta.activeRepo),adapterUpdates:e,adapterUpdateList:L,instances:n,language:Q,loading:U,moduleConfig:u,onSet:T}}}),le=h("br",null,null,-1),oe={class:"UpdateAvailable"},ie={key:1},se={key:2};function re(t,k,v,z,b,u){const n=R("icon");return V([t.widget.revision],()=>a(M,null,{default:l(()=>[m(a(w,{class:"UpdateAvailableListItem",style:{"background-color":"var(--q-accent)"}},{default:l(()=>[t.adapterUpdateList.length>60?(p(),f(y,{key:0},{default:l(()=>[d(s(t.adapterUpdateList),1)]),_:1})):g("",!0),a(r,{avatar:""},{default:l(()=>[a(n,{name:"refresh"})]),_:1}),a(r,null,{default:l(()=>[a(C,null,{default:l(()=>[d(s(t.adapterUpdateList.length>60?t.adapterUpdateList.substr(0,58)+"...":t.adapterUpdateList),1)]),_:1}),a(C,{caption:"",style:{color:"#fff"}},{default:l(()=>[d(s(t.adapterUpdates.length)+" "+s(t.$t("Updates available")),1),le,d(" "+s(t.$t("Repository")+": "+t.activeRepo),1)]),_:1})]),_:1}),a(r,{side:""},{default:l(()=>[a(D,{rounded:"",color:"white",style:{color:"var(--q-accent)"},label:t.adapterUpdates.length},null,8,["label"])]),_:1})]),_:1},512),[[S,t.moduleConfig.updates&&t.adapterUpdates.length>0]]),(p(!0),j(E,null,F(t.instances,e=>(p(),f(w,{key:e.id,clickable:t.moduleConfig.switch&&e.mode!=="none"&&e.mode!=="once"&&t.loading[e.id]!==!0,"v-ripple":t.moduleConfig.switch&&e.mode!=="none"&&e.mode!=="once"&&t.loading[e.id]!==!0},{default:l(()=>[a(r,{avatar:""},{default:l(()=>[a(n,{name:"img:"+e.extIcon},null,8,["name"])]),_:2},1024),a(r,null,{default:l(()=>[a(C,null,{default:l(()=>[d(s(e.titleLang&&(e.titleLang[t.language]||e.titleLang.en||e.titleLang.de)||e.titleLang||e.title),1)]),_:2},1024),a(C,{caption:""},{default:l(()=>[h("span",null,s(e.id)+", v"+s(e.version),1),m(h("span",null,[d(", "),h("span",oe,s(t.$t("Update available")+" v"+e.update),1)],512),[[S,e.update]]),m(h("span",null,", "+s(t.$t("Compact Mode"))+" "+s(t.$t("on"))+" ("+s(t.$t("Group")+" "+e.compactGroup)+")",513),[[S,e.runAsCompactMode]])]),_:2},1024)]),_:2},1024),e.mode!=="none"&&e.mode!=="once"?m((p(),f(r,{key:0,side:""},{default:l(()=>[t.loading[e.id]===!0?(p(),f(I,{key:0,color:"primary",size:"21px"})):g("",!0),t.loading[e.id]!==!0&&e.alive!==!1&&e.connectedToHost!==!1&&e.connectedToInstance!==!1?(p(),j("div",ie,[a(n,{color:"positive",name:"mdi-check-circle"}),a(y,null,{default:l(()=>[d(s(t.$t("Adapter")+" "+t.$t("alive")),1)]),_:1})])):g("",!0),t.loading[e.id]!==!0&&e.alive===!1||e.connectedToHost===!1||e.connectedToInstance===!1?(p(),j("div",se,[a(n,{color:"warning",name:"mdi-alert"}),a(y,null,{default:l(()=>[d(s(t.$t("Adapter")+" "+t.$t("not alive")),1)]),_:1})])):g("",!0)]),_:2},1536)),[[S,e.enabled===!0]]):g("",!0),e.mode!=="none"&&e.mode!=="once"?m((p(),f(r,{key:1,side:""},{default:l(()=>[a(n,{name:"mdi-close"}),a(y,null,{default:l(()=>[d(s(t.$t("Adapter")+" "+t.$t("disabled")),1)]),_:1})]),_:2},1536)),[[S,e.enabled===!1]]):g("",!0),t.moduleConfig.switch&&e.mode!=="none"&&e.mode!=="once"&&t.loading[e.id]!==!0?(p(),f(B,{key:2,ref_for:!0,ref:"menu","touch-position":""},{default:l(()=>[a(M,{style:{"min-width":"120px","man-width":"150px"},class:"body"},{default:l(()=>[a(w,{class:K("text-white bg-"+(e.enabled?"positive":"negative"))},{default:l(()=>[a(r,{avatar:""}),a(r,null,{default:l(()=>[d(s(t.$t(e.enabled?"Currently running":"Currently stopped")),1)]),_:2},1024),a(r,{side:""})]),_:2},1032,["class"]),m((p(),f(w,{clickable:"",onClick:L=>t.onSet(e.id,!e.enabled)},{default:l(()=>[a(r,{avatar:""},{default:l(()=>[a(G,{color:e.enabled?"negative":"positive",name:e.enabled?"mdi-pause":"mdi-play"},null,8,["color","name"])]),_:2},1024),a(r,null,{default:l(()=>[d(s(t.$t(e.enabled?"Stop":"Start")+" "+t.$t("Adapter")),1)]),_:2},1024)]),_:2},1032,["onClick"])),[[N]])]),_:2},1024)]),_:2},1536)):g("",!0)]),_:2},1032,["clickable","v-ripple"]))),128))]),_:1}),k,0)}var de=X(ae,[["render",re]]),we=Object.freeze(Object.defineProperty({__proto__:null,default:de},Symbol.toStringTag,{value:"Module"}));export{we as A,Se as _,he as a,ke as b,_e as c};
