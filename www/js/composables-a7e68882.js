import{P as p,i as C}from"./controllers-596cf83c.js";import{u as E}from"./vendor.vue-i18n-e0977824.js";import{p as f,u as b,z as I,w as F}from"./vendor.vue-1bbf3cb4.js";import{S as j}from"./vendor.sortablejs-5c3bed78.js";import{_ as T}from"./vendor.rfdc-06a2e69e.js";import{K as x,L as _,P as L}from"./vendor.quasar-78ba37d9.js";function k(r,o,e={}){if(e.id=e.id||"custom",e.onlyPro=e.onlyPro!==void 0?e.onlyPro:!0,e.onlyPro&&!p.isPro()&&o)p.warn("Custom Styles / Scripts are only available to Pro!");else if(r&&(!e.onlyPro||e.onlyPro&&p.isPro())){let l=document.getElementById(e.id);l?l.remove():(l=document.createElement(r),l.id=e.id),e.class&&l.classList.add(e.class);for(const c in e)l[c]=e[c];return l.innerHTML=o,document.getElementsByTagName("head")[0].appendChild(l),l}return null}function A(r,o,e={}){document.querySelectorAll(".import_custom_"+r).forEach(n=>n.remove());const s=o.replace(/\/\*[\s\S]*?\*\/|([^\\:]|^)\/\/.*$/gm,"$1"),c=/@?import[ ]?\(?['"](?<url>.*)['"]\)?;?/ig,t=[...s.matchAll(c)].map((n,a)=>new Promise(i=>{o=o.replace(n[0],""),k(e.tag||"link","",{[e.src||"src"]:n.groups.url+"?ts="+Date.now(),id:"import_custom_"+r+"-"+a,class:"import_custom_"+r,...e,onload:()=>i(!0),onerror:()=>i(!1)})}));return Promise.allSettled(t).then(()=>o)}function K(r){const o=E(),e=f(r||{}),l=b(()=>Object.keys(e.value).length!==0);return{errors:e,hasErrors:l,addError:(t,n)=>{e.value[t]=o.t(n)},removeError:t=>{delete e.value[t]},resetErrors:()=>{e.value={}}}}function H(r,o,e){const l=f(null),s=c=>{const u=r.value[c.oldIndex];r.value.splice(c.oldIndex,1),r.value.splice(c.newIndex,0,u),o&&o(r.value)};return I(()=>{const c=l.value&&(l.value.$el||l.value);c&&j.create(c,{handle:".dragndrop",...e||{},onEnd:s})}),{elDragDrop:l}}function J(r){const o=x(),e=E();return{copyToClipboard:l=>{_(l).then(()=>o.notify(e.t(r||"ID copied"))).catch(()=>{})}}}function M(){const r=x(),o=f(!1);return{jumperIsOpen:o,jumperOpen:(l,s={})=>{const c=T(l);o.value=!0;const u=c.map(t=>new Promise(n=>{const a=i=>{t.icon=i.icon;const m=Iconify.getIcon(t.icon.indexOf(":")===-1?"mdi:"+t.icon:t.icon);if(m){const h=[],g=[];let d;const y=RegExp('(?<= (.+?)=\\")(.+?)(?=\\")',"g");for(;(d=y.exec(m.body))!==null;)if(d.index===y.lastIndex&&y.lastIndex++,d[1]==="d")h[h.length]=d[2];else{const v=g.length;g[v]=g[v]||[],g[v].push([d[1],d[2]])}t.icon=h.map((v,P)=>{const w=g[P].map(S=>S[0]+":"+S[1]);return v+"@@"+w.join("@@")}).join("&&")+"|"+m.left+" "+m.top+" "+m.width+" "+m.height}n(t)};return t.icon&&typeof t.icon=="object"?C.getBindings({config:{icon:t.icon}},a):t.icon?a({icon:t.icon}):n(t)}));Promise.allSettled(u).then(t=>{const n=[];t.forEach(a=>{a.status==="fulfilled"&&n.push(a.value)}),r.bottomSheet({...s,actions:n}).onOk(a=>s.onSuccess&&s.onSuccess(a)).onCancel(()=>s.onCancel&&s.onCancel()).onDismiss(()=>{o.value=!1})})}}}function N(r,o){const e=b(()=>typeof r.value!="object"?f({fullscreenSize:r.value}):r),l=f(),s=f(!1),c=()=>{s.value=!0;const n=l.value;n.classList.add("isFullscreen"),n.style.overflow="auto";const a=n.querySelector(".jarvis-widget-scaler");a.style.height="auto"},u=()=>{s.value=!1;const n=l.value;n.classList.remove("isFullscreen"),n.style.overflow="initial";const a=n.querySelector(".jarvis-widget-scaler");a.style.height=e.value.fullscreenSize+"px",document.exitFullscreen?document.exitFullscreen().catch(i=>{}):document.mozCancelFullScreen?document.mozCancelFullScreen().catch(i=>{}):document.webkitCancelFullScreen&&document.webkitCancelFullScreen().catch(i=>{})};return F(()=>l.value,()=>{l.value.addEventListener("fullscreenchange",()=>{document.fullscreenElement===null&&u()})}),{fullscreenElement:l,fullscreenActive:s,fullscreenToggle:n=>{n=typeof n=="boolean"?n:!s.value,L.toggle(l.value).then(()=>{n===!1?u():c()}).catch(a=>{console.error(a)})}}}function Q(r=!1){const o=E(),e=o.locale.value||o.locale;return r?e.substr(0,2):e}export{k as a,K as b,H as c,J as d,Q as e,N as f,M as g,A as u};
