import{bt as Y,a4 as J,bM as X,k as _,as as Z,aw as K,cI as x,aG as H,ay as m,W as v,b3 as g,bn as w,X as n,a2 as l,b1 as c,a1 as M,D as p,bT as b,I,aE as k,bU as A,bS as T,cQ as C,bF as ee,dj as O,dm as N,U as $,bG as te,A as ne,bH as D,bO as Q,bu as ae,bp as se}from"./index-1758e27f.js";import{m as le}from"./marked.esm-6a2890cb.js";/*!
 * paypal-js v5.1.1 (2022-08-03T17:21:59.218Z)
 * Copyright 2020-present, PayPal, Inc. All rights reserved.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function re(e,t){var s=document.querySelector('script[src="'.concat(e,'"]'));if(s===null)return null;var i=z(e,t),o=s.cloneNode();if(delete o.dataset.uidAuto,Object.keys(o.dataset).length!==Object.keys(i.dataset).length)return null;var r=!0;return Object.keys(o.dataset).forEach(function(f){o.dataset[f]!==i.dataset[f]&&(r=!1)}),r?s:null}function oe(e){var t=e.url,s=e.attributes,i=e.onSuccess,o=e.onError,r=z(t,s);r.onerror=o,r.onload=i,document.head.insertBefore(r,document.head.firstElementChild)}function ie(e){var t="https://www.paypal.com/sdk/js";e.sdkBaseURL&&(t=e.sdkBaseURL,delete e.sdkBaseURL),de(e);var s=Object.keys(e).filter(function(r){return typeof e[r]!="undefined"&&e[r]!==null&&e[r]!==""}).reduce(function(r,f){var u=e[f].toString();return f.substring(0,5)==="data-"?r.dataAttributes[f]=u:r.queryParams[f]=u,r},{queryParams:{},dataAttributes:{}}),i=s.queryParams,o=s.dataAttributes;return{url:"".concat(t,"?").concat(ue(i)),dataAttributes:o}}function ue(e){var t="";return Object.keys(e).forEach(function(s){t.length!==0&&(t+="&"),t+=s+"="+e[s]}),t}function ce(e){var t=e.split("/* Original Error:")[1];return t?t.replace(/\n/g,"").replace("*/","").trim():e}function z(e,t){t===void 0&&(t={});var s=document.createElement("script");return s.src=e,Object.keys(t).forEach(function(i){s.setAttribute(i,t[i]),i==="data-csp-nonce"&&s.setAttribute("nonce",t["data-csp-nonce"])}),s}function de(e){var t=e["merchant-id"],s=e["data-merchant-id"],i="",o="";return Array.isArray(t)?t.length>1?(i="*",o=t.toString()):i=t.toString():typeof t=="string"&&t.length>0?i=t:typeof s=="string"&&s.length>0&&(i="*",o=s),e["merchant-id"]=i,e["data-merchant-id"]=o,e}function fe(e,t){if(t===void 0&&(t=F()),R(e,t),typeof window=="undefined")return t.resolve(null);var s=ie(e),i=s.url,o=s.dataAttributes,r=o["data-namespace"]||"paypal",f=j(r);return re(i,o)&&f?t.resolve(f):pe({url:i,attributes:o},t).then(function(){var u=j(r);if(u)return u;throw new Error("The window.".concat(r," global variable is not available."))})}function pe(e,t){t===void 0&&(t=F()),R(e,t);var s=e.url,i=e.attributes;if(typeof s!="string"||s.length===0)throw new Error("Invalid url.");if(typeof i!="undefined"&&typeof i!="object")throw new Error("Expected attributes to be an object.");return new t(function(o,r){if(typeof window=="undefined")return o();oe({url:s,attributes:i,onSuccess:function(){return o()},onError:function(){var f=new Error('The script "'.concat(s,'" failed to load.'));return window.fetch?fetch(s).then(function(u){return u.status===200&&r(f),u.text()}).then(function(u){var a=ce(u);r(new Error(a))}).catch(function(u){r(u)}):r(f)}})})}function F(){if(typeof Promise=="undefined")throw new Error("Promise is undefined. To resolve the issue, use a Promise polyfill.");return Promise}function j(e){return window[e]}function R(e,t){if(typeof e!="object"||e===null)throw new Error("Expected an options object.");if(typeof t!="undefined"&&typeof t!="function")throw new Error("Expected PromisePonyfill to be a function.")}const me=J({name:"AccountPage",setup(){var q;console.log("AccountPage","setup()");const e=X(),t="Ad8Db5feNlBy6SdFa7O0fpJ2QYIcyFO9SGSg4tNpxOgOlLyWTkN6JmOFBV58ItTpdUwfBGW2L8WuoIAn",s=_(),i=_(!1),o=O.getLicence(),r=_(null),f=_(null),u=_(((q=o==null?void 0:o.subscriber)==null?void 0:q.email_address)||""),a=_((o==null?void 0:o.subscriptionId)||""),L=_(null),E=_(!1),U=()=>{r.value=null,u.value&&(a.value||L.value)&&(E.value=!0,N.post("user/invoice",{action:a.value?"getInvoicesBySubscriptionId":"getInvoicesByInvoiceId",email:u.value,subscriptionId:a.value,invoiceId:L.value}).then(d=>{r.value=d.map(y=>(y.selected=o&&y.invoiceId===o.invoiceId,y))}).catch(d=>{r.value=[],console.warn("AccountPage",d.message),s.value=d.message}).finally(()=>{E.value=!1}))},W=d=>{O.setToken(d).then(()=>window.location.reload())},G=()=>{r.value=null,u.value&&(E.value=!0,N.post("user/invoice",{action:"getBankTransferCode",email:u.value}).then(d=>{console.warn(d),f.value=d}).catch(d=>{console.warn("AccountPage",d.message),s.value=d.message}).finally(()=>{E.value=!1}))};let S=null;Z(()=>{U(),fe({"client-id":t,components:"buttons",currency:"EUR",vault:!0,intent:"subscription"}).then(d=>{const y={style:{shape:"rect",color:"blue",layout:"horizontal",label:"buynow",tagline:!1},createSubscription:(h,V)=>V.subscription.create({plan_id:"P-8EY03930L1769123MMEFPZPI"}),onApprove:(h,V)=>{i.value=!0,O.setToken(null,h.subscriptionID).catch(P=>{console.warn("AccountPage",P.message),s.value=P.message}).finally(()=>{i.value="done",window.location.reload()})}};S=d.Buttons(y),S.render("#paypal-button-subscribe").catch(h=>{console.error("Failed to render the PayPal Buttons",h),s.value=h.message})}),u.value}),K(()=>{S&&S.close&&S.close(),Object.keys(window).forEach(d=>{/paypal|zoid|post_robot/.test(d)&&delete window[d]})});const B={};return["SupportByBuying","UsageNotice","Termination","Disclaimer","BankTransfer"].forEach(d=>{let y="",h=0;for(B[d]=[];(y=e.t(d+"["+h+"]"))!==d+"["+h+"]";)h++,B[d].push(y)}),{format:x,marked:le,now:Math.ceil(Date.now()/1e3),t:B,invoiceId:L,subscriptionId:a,email:u,status:E,getCode:G,code:f,getInvoices:U,invoices:r,setLicence:W,isPaying:i,error:s}}}),ve={class:"q-ma-sm"},be={class:"row"},he={class:"col"},ge={class:"row no-wrap q-col-gutter-sm"},we={class:"col-8"},ye={class:"text-h6"},_e=n("div",{class:"text-subtitle2"},null,-1),Ie=["innerHTML"],ke=["innerHTML"],Ee=["innerHTML"],Se={class:"col-4"},Te={class:"text-h6"},Le=n("div",{class:"text-subtitle2"},null,-1),Me={class:"row"},Be={class:"col"},Ae={class:"row"},Ce={class:"col"},Oe=n("div",{class:"col-shrink q-px-md q-pb-sm row flex-center"},"or",-1),$e={class:"col"},De={class:"row"},Ue={class:"col text-center"},qe={class:"col text-center"},Ve={class:"text-h6"},Pe=n("div",{class:"text-subtitle2"},null,-1),He=["innerHTML"],Ne={class:"row no-wrap q-col-gutter-sm q-mt-xs"},Qe={class:"col-4"},je=n("div",{class:"text-h6"},"PayPal",-1),ze=n("div",{class:"text-subtitle2"},null,-1),Fe=n("div",{id:"paypal-button-subscribe"},null,-1),Re={class:"col-4"},We={class:"text-h6"},Ge=n("div",{class:"text-subtitle2"},null,-1),Ye={class:"row"},Je={class:"col"},Xe={class:"col-shrink",style:{margin:"auto","padding-bottom":"16px"}},Ze={class:"row"},Ke=["innerHTML"],xe={style:{margin:"0","background-color":"#333","font-size":"2em","text-align":"center",width:"100%"}};function et(e,t,s,i,o,r){const f=H("alert"),u=H("inputs");return m(),v("div",ve,[g(n("div",be,[n("div",he,[l(f,null,{default:c(()=>[M(p(e.error),1)]),_:1})])],512),[[w,e.error]]),n("div",ge,[n("div",we,[l(T,null,{default:c(()=>[l(b,{class:"bg-primary text-white"},{default:c(()=>[n("div",ye,p(e.$t("Buy"))+" & "+p(e.$t("Subscribe")),1),_e]),_:1}),l(b,null,{default:c(()=>[(m(!0),v(I,null,k(e.t.SupportByBuying,a=>(m(),v("p",{key:a},[n("span",{innerHTML:e.marked.parse(a)},null,8,Ie)]))),128))]),_:1}),l(A),l(b,null,{default:c(()=>[n("strong",null,p(e.$t("Usage Notice")),1),(m(!0),v(I,null,k(e.t.UsageNotice,a=>(m(),v("p",{key:a},[n("span",{innerHTML:e.marked.parse(a)},null,8,ke)]))),128))]),_:1}),l(A),l(b,null,{default:c(()=>[n("strong",null,p(e.$t("Legal Remarks")),1),(m(!0),v(I,null,k(e.t.Disclaimer,a=>(m(),v("p",{key:a},[n("span",{innerHTML:e.marked.parse(a)},null,8,Ee)]))),128))]),_:1})]),_:1})]),n("div",Se,[l(T,{class:"q-mb-sm"},{default:c(()=>[l(b,{class:"bg-primary text-white"},{default:c(()=>[n("div",Te,p(e.$t("Get Licences")),1),Le]),_:1}),l(b,null,{default:c(()=>[n("div",Me,[n("div",Be,[l(u,{modelValue:e.email,"onUpdate:modelValue":t[0]||(t[0]=a=>e.email=a),label:"E-Mail",value:e.email,disable:e.status},null,8,["modelValue","value","disable"])])]),n("div",Ae,[n("div",Ce,[l(u,{modelValue:e.subscriptionId,"onUpdate:modelValue":t[1]||(t[1]=a=>e.subscriptionId=a),label:"Abonnement-ID",value:e.subscriptionId,disable:e.status},null,8,["modelValue","value","disable"])]),Oe,n("div",$e,[l(u,{modelValue:e.invoiceId,"onUpdate:modelValue":t[2]||(t[2]=a=>e.invoiceId=a),label:"Invoice-ID",value:e.invoiceId,disable:e.status},null,8,["modelValue","value","disable"])])]),n("div",De,[g(n("div",Ue,[l(u,{onOnClick:e.getInvoices,type:"button",label:e.$t("Get Licences"),flat:!1,color:"primary"},null,8,["onOnClick","label"])],512),[[w,e.status===!1]]),g(n("div",qe,[l(C,{color:"primary",size:"sm"})],512),[[w,e.status!==!1]])]),l(A,{class:"q-mx-sm q-my-md"}),l(ee,null,{default:c(()=>[(m(!0),v(I,null,k(e.invoices,a=>(m(),$(te,{key:a._id,class:ne({"bg-positive":a.expires>e.now})},{default:c(()=>[l(D,null,{default:c(()=>[l(Q,null,{default:c(()=>[M(p(a.date)+", #"+p(a.invoiceId),1)]),_:2},1024),l(Q,{caption:""},{default:c(()=>[M(p(e.$t("valid to"))+" "+p(e.format(a.expires*1e3,"dd. MMM yyyy, HH:mm")),1)]),_:2},1024)]),_:2},1024),a.selected?(m(),$(D,{key:0,side:""},{default:c(()=>[l(ae,{name:"mdi-checkbox-marked-circle-outline",color:"white"})]),_:1})):(m(),$(D,{key:1,side:""},{default:c(()=>[l(u,{type:"button",round:"",tooltip:e.$t("Set Licence"),class:"gt-xs",flat:"",icon:"mdi-checkbox-blank-circle-outline",onClick:se(L=>e.setLicence(a.token),["stop"])},null,8,["tooltip","onClick"])]),_:2},1024))]),_:2},1032,["class"]))),128))]),_:1})]),_:1})]),_:1}),l(T,null,{default:c(()=>[l(b,{class:"bg-primary text-white"},{default:c(()=>[n("div",Ve,p(e.$t("Unsubscribe"))+" / "+p(e.$t("Terminate")),1),Pe]),_:1}),l(b,null,{default:c(()=>[(m(!0),v(I,null,k(e.t.Termination,a=>(m(),v("p",{key:a},[n("span",{innerHTML:e.marked.parse(a)},null,8,He)]))),128))]),_:1})]),_:1})])]),n("div",Ne,[n("div",Qe,[l(T,null,{default:c(()=>[l(b,{class:"bg-primary text-white"},{default:c(()=>[je,ze]),_:1}),l(b,{class:"text-center"},{default:c(()=>[g(n("div",null,[n("em",null,p(e.$t("buy now")),1),Fe],512),[[w,e.isPaying===!1]]),g(n("div",null,[l(C,{color:"primary",size:"3em"})],512),[[w,e.isPaying===!0]])]),_:1})]),_:1})]),n("div",Re,[l(T,null,{default:c(()=>[l(b,{class:"bg-primary text-white"},{default:c(()=>[n("div",We,p(e.$t("Bank Transfer")),1),Ge]),_:1}),l(b,null,{default:c(()=>[g(n("div",Ye,[n("div",Je,[M(p(e.$t("BankTransferPreparation"))+" ",1),l(u,{modelValue:e.email,"onUpdate:modelValue":t[3]||(t[3]=a=>e.email=a),label:"E-Mail",value:e.email,disable:e.status},null,8,["modelValue","value","disable"])]),n("div",Xe,[g(l(u,{onOnClick:e.getCode,type:"button",label:e.$t("Request Bank Transfer"),flat:!1,color:"primary"},null,8,["onOnClick","label"]),[[w,e.status===!1]]),g(l(C,{color:"primary",size:"sm"},null,512),[[w,e.status!==!1]])])],512),[[w,!e.code]]),g(n("div",Ze,[(m(!0),v(I,null,k(e.t.BankTransfer,a=>(m(),v("p",{key:a},[n("span",{innerHTML:e.marked.parse(a)},null,8,Ke)]))),128)),n("pre",xe,p(e.code),1)],512),[[w,e.code]])]),_:1})]),_:1})])])])}var at=Y(me,[["render",et]]);export{at as default};
