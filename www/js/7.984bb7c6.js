(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[7],{"48e3":function(e,t,s){"use strict";s.r(t),t["default"]={"Support by buying":[]}},c6c5:function(e,t,s){"use strict";s.r(t);var i=s("0692");t["default"]={translations:Object(i["a"])((e=>s("f0cb")("./"+e))),register:i["c"]}},d0e0:function(e,t,s){"use strict";s.r(t),t["default"]={"Account & ioBroker Installations":"Account & ioBroker Installationen",Buy:"Kaufen",Subscribe:"Abonnieren",User:"Benutzer","Sign In":"Anmelden","Licence valid for following installation":"Lizenz gültig für folgende Installation",Bills:"Rechnungen","Login first to buy & subscribe":"Bitte zunächst Anmelden, um zu kaufen","Support by buying":["Ich hoffe, euch gefällt jarvis und der Adapter bereichert euer Smarthome.","Sofern euch Funktionen fehlen, ihr euch Features wünscht oder auf Bugs gestoßen seid, dann [scheut bitte nicht einen Issue auf Github zu erstellen](https://github.com/Zefau/ioBroker.jarvis/issues). Nur, wenn ich davon erfahre, kann ich es umsetzen.","Sofern ihr Probleme oder Fragestellungen habt, schaut [gerne ins Wiki](https://github.com/Zefau/ioBroker.jarvis/wiki) oder [meldet euch im Forum](https://forum.iobroker.net/topic/30668/jarvis-just-another-remarkable-vis/1).","Mit der in v3 eingeführten Möglichkeit des Abonnements könnt ihr diverse Pro-Features aktivieren und nutzen. Das Abo ist jederzeit kündbar und läuft bei Kündigung bis zum bezahlten Ende fort. Sofern es Schwierigkeiten gibt, meldet euch gerne bei mir via [ioBroker.jarvis@mailbox.org](ioBroker.jarvis@mailbox.org).","Bitte versteht die eingeführte Möglichkeit des Abonnements nicht nur als reine Bezahlung, sondern auch als Unterstützung zur Weiterentwicklung des Adapters.","**Vielen Dank für euren Support!**"]}},f0cb:function(e,t,s){var i={"./":"c6c5","./de":"d0e0","./de.js":"d0e0","./en":"48e3","./en.js":"48e3","./index":"c6c5","./index.js":"c6c5"};function n(e){var t=a(e);return s(t)}function a(e){if(!s.o(i,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return i[e]}n.keys=function(){return Object.keys(i)},n.resolve=a,e.exports=n,n.id="f0cb"},ff43:function(e,t,s){"use strict";s.r(t),s.d(t,"default",(function(){return j}));var i=function(){var e,t=this,s=t.$createElement,i=t._self._c||s;return i("div",[i("div",{staticClass:"row q-pa-md"},[i("div",{staticClass:"col-5"},[i("q-card",[i("q-card-section",{staticClass:"bg-primary text-white"},[i("div",{staticClass:"text-h6"},[t._v(t._s(!0===t.login?t.$t("Account & ioBroker Installations"):t.$t("Sign In")))]),i("div",{staticClass:"text-subtitle2"})]),i("q-card-section",[i("div",{directives:[{name:"show",rawName:"v-show",value:null===t.login,expression:"login === null"}],staticClass:"text-center"},[i("q-spinner",{attrs:{color:"primary",size:"3em"}})],1),i("div",{directives:[{name:"show",rawName:"v-show",value:!0===t.login,expression:"login === true"}]},[i("div",{staticClass:"row"},[i("div",{staticClass:"col-12"},[i("inputs",{attrs:{standout:"",value:t.userId,label:"User",disable:""}})],1)]),i("div",{staticClass:"row"},[t.installations.length>0?i("div",{class:(e={},e["col-"+(t.installations.length>1?10:12)]=!0,e)},[i("q-select",{staticStyle:{margin:"0 8px"},attrs:{standout:"","stack-label":"",options:t.installations,label:t.$t("Licence valid for following installation")},model:{value:t.selectedInstallation,callback:function(e){t.selectedInstallation=e},expression:"selectedInstallation"}})],1):t._e(),t.installations.length>1?i("div",{staticClass:"col-2",staticStyle:{margin:"8px 0","text-align":"center"}},[i("q-btn",{attrs:{label:t.$t("Apply"),color:"primary"},on:{click:t.selectInstallation}})],1):t._e()])]),i("div",{directives:[{name:"show",rawName:"v-show",value:!1===t.login,expression:"login === false"}],staticClass:"text-center"},[i("div",{attrs:{id:"paypal-button-login"}})])])],1),i("q-card",{directives:[{name:"show",rawName:"v-show",value:t.invoices.length>0,expression:"invoices.length > 0"}],staticClass:"q-mt-md"},[i("q-card-section",{staticClass:"bg-primary text-white"},[i("div",{staticClass:"text-h6"},[t._v(t._s(t.$t("Bills")))]),i("div",{staticClass:"text-subtitle2"})]),i("q-card-section",[i("q-list",[t._l(t.invoices,(function(e){return[i("q-item",{key:"item-"+e.invoiceId,class:{"bg-positive":e.expires>t.now}},[i("q-item-section",[i("q-item-label",[t._v(t._s(e.date)+", #"+t._s(e.invoiceId))]),i("q-item-label",{attrs:{caption:""}},[t._v(t._s(t.$t("valid to"))+" "+t._s(t.format(1e3*e.expires,"dd. MMM yyyy, HH:mm")))])],1)],1),i("q-separator",{key:"separator-"+e.invoiceId})]}))],2)],1)],1)],1),i("div",{staticClass:"col-2 items-center"},[i("q-separator",{staticStyle:{margin:"auto",height:"100%"},attrs:{vertical:""}})],1),i("div",{staticClass:"col-5"},[i("q-card",[i("q-card-section",{staticClass:"bg-primary text-white"},[i("div",{staticClass:"text-h6"},[t._v(t._s(t.$t("Buy"))+" & "+t._s(t.$t("Subscribe")))]),i("div",{staticClass:"text-subtitle2"})]),i("q-card-section",{staticClass:"text-center"},t._l(t.$t("Support by buying"),(function(e){return i("p",{key:e},[i("span",{domProps:{innerHTML:t._s(t.md.render(e))}})])})),0),i("q-separator"),i("q-card-section",{directives:[{name:"show",rawName:"v-show",value:!1===t.login,expression:"login === false"}],staticClass:"text-center"},[t._v("\n\t\t\t\t\t"+t._s(t.$t("Login first to buy & subscribe"))+".\n\t\t\t\t")]),i("q-card-section",{directives:[{name:"show",rawName:"v-show",value:!0===t.login,expression:"login === true"}],staticClass:"text-center"},[i("div",{directives:[{name:"show",rawName:"v-show",value:!1===t.paying,expression:"paying === false"}]},[i("div",{attrs:{id:"paypal-button-subscribe"}}),i("q-separator")],1),i("div",{directives:[{name:"show",rawName:"v-show",value:!0===t.paying,expression:"paying === true"}]},[i("q-spinner",{attrs:{color:"primary",size:"3em"}})],1)])],1)],1)])])},n=[],a=s("ed09"),o=s("ec26"),r=s("7ead"),l=s("9ea4"),c=s("853a"),u=s("a078"),d=s("e580"),p=s("c6c5");const h=s("d4cd")();var m=Object(a["b"])({name:"AccountPage",data(){return{login:null,paying:!1,userId:null,invoices:[],installations:[],selectedInstallation:null}},computed:{now(){return Math.ceil(Date.now()/1e3)}},methods:{selectInstallation(){console.warn(this.selectedInstallation)},mountPaypalAPI(){window.paypal?window.paypal.use(["login"],(e=>{const t=this.$store.state.jarvis.iobroker.uuid,s=this.$store.state.jarvis.iobroker.system,i=c["a"]._systemId;e.render({appid:"Ad8Db5feNlBy6SdFa7O0fpJ2QYIcyFO9SGSg4tNpxOgOlLyWTkN6JmOFBV58ItTpdUwfBGW2L8WuoIAn",scopes:"openid",containerid:"paypal-button-login",responseType:"code",locale:"de-de",buttonType:"LWP",buttonShape:"pill",buttonSize:"lg",fullPage:"true",state:btoa(this.sessionId+"|"+t+"|"+i+"|"+JSON.stringify(s)+"|"+window.location.href),returnurl:"https://www.zefau.net/jarvis/user/paypal_login.php"})})):setTimeout((()=>this.mountPaypalAPI()),100)},mountPaypalSDK(){if(window.paypal_sdk){const e={style:{shape:"rect",color:"blue",layout:"vertical",label:"subscribe"},createSubscription:(e,t)=>t.subscription.create({plan_id:u["a"].get("IS_DEV")?"P-8FA02261WK027140TMEKBCAI":"P-8EY03930L1769123MMEFPZPI"}),onApprove:(e,t)=>{this.paying=!0,l["a"].post("user/invoice",{action:"assignUserToInvoice",userId:this.userId,subscriptionId:e.subscriptionID}).then((t=>c["a"].setToken(t,e.subscriptionID,this.selectedInstallation.value))).catch((e=>console.error(e))).finally((()=>{this.paying="done",window.location.reload()}))}};window.paypal_sdk.Buttons(e).render("#paypal-button-subscribe")}else setTimeout((()=>this.mountPaypalSDK()),100)}},beforeCreate(){p["default"].register(this.$i18n,p["default"].translations),this.format=d["a"],this.md=h;const e=u["a"].get("IS_DEV")?"AX8Jm7Cb5vgcRjIhjmkYUNR_jc9cvaUpyl-a33W7aDlj-6DJJqmDvJgWhAu8z6dUoRzp3gdgfkD5iRuw":"Ad8Db5feNlBy6SdFa7O0fpJ2QYIcyFO9SGSg4tNpxOgOlLyWTkN6JmOFBV58ItTpdUwfBGW2L8WuoIAn",t=document.createElement("script");t.setAttribute("src","https://www.paypal.com/sdk/js?client-id="+e+"&components=buttons&currency=EUR&vault=true&intent=subscription"),t.setAttribute("data-namespace","paypal_sdk"),document.body.appendChild(t),this.sessionId=r["a"].get("sessionId")||Object(o["a"])(),r["a"].set("sessionId",this.sessionId),l["a"].post("user/details",{action:"getLoginBySessionId",sessionId:this.sessionId}).then((e=>{if(r["a"].set("userId",e),!e)throw new Error("User not signed in!");this.login=!0,this.userId=e,console.log("User signed-in: "+e),l["a"].post("user/invoice",{action:"getInvoicesByUserId",userId:e}).then((e=>{this.invoices=e})).catch((e=>{console.error(e.message)})),l["a"].post("user/details",{action:"getInstallations",userId:e}).then((e=>{this.installations=e.map((e=>{const t=JSON.parse(e.system),s={value:e.ioBrokerId,label:"System: "+t.hostname+" ("+t.platform+"), ID: "+e.ioBrokerId.substr(-7)+", Expires: "+e.expires};return"1"===e.selected&&(this.selectedInstallation=s),s}))})).catch((e=>{console.error(e.message)}))})).catch((e=>{console.error(e.message),this.login=!1}))},mounted(){this.mountPaypalSDK(),this.mountPaypalAPI()}}),v=m,g=s("2877"),b=s("f09f"),f=s("a370"),y=s("0d59"),w=s("ddd8"),I=s("9c40"),k=s("eb85"),S=s("1c1c"),x=s("66e5"),_=s("4074"),C=s("0170"),B=s("eebe"),q=s.n(B),A=Object(g["a"])(v,i,n,!1,null,null,null),j=A.exports;q()(A,"components",{QCard:b["a"],QCardSection:f["a"],QSpinner:y["a"],QSelect:w["a"],QBtn:I["a"],QSeparator:k["a"],QList:S["a"],QItem:x["a"],QItemSection:_["a"],QItemLabel:C["a"]})}}]);