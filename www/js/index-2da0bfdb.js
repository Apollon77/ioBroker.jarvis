import{Q as Oe}from"./QToolbarTitle-ec153c69.js";import{Q as We}from"./QToolbar-6c3b0553.js";import{a4 as se,cq as M,bM as fe,cn as de,k as U,aY as ge,bQ as oe,Q as A,df as Ie,dg as _e,bt as ue,d8 as ce,aG as Q,ay as c,W as D,a2 as l,b1 as t,U as S,bS as be,bT as pe,X as s,D as u,bD as Ce,bB as H,bU as N,b3 as P,bP as De,I as G,aE as V,bG as q,bH as v,bO as L,a1 as b,cP as Te,bn as z,bF as K,V as X,bV as $e,bW as we,dh as ye,as as Ee,ct as re,bp as x,A as R,by as ae,C as ee,bw as ke,cv as Pe,cu as ze,di as Le,dj as Be,dk as je,cU as Ae}from"./index-5545aad5.js";import{Q as me}from"./QBtnDropdown-90214daf.js";import{J as qe}from"./json-editor-ff49a8cd.js";import{Q as ve}from"./QTooltip-6852bffb.js";import{Q as Se}from"./QExpansionItem-5672b6f3.js";import{W as Qe}from"./WidgetPage-5e51dffd.js";import{a as he}from"./useDragDrop-8d77e71d.js";import"./_commonjsHelpers-55d1ff45.js";import"./QSlideTransition-ab264347.js";const Me=se({name:"WidgetPopup",props:["widget"],emits:["onClose","onSave"],components:{WidgetPage:Qe},setup(e,{emit:p}){M.dev("DEBUG","WidgetPopup","setup()");const m=fe(),O=de(),F=[{label:m.t("top aligned"),value:"top"},{label:m.t("middle aligned"),value:"middle"},{label:m.t("bottom aligned"),value:"bottom"}],E=[{label:m.t("left aligned"),value:"left"},{label:m.t("center aligned"),value:"center"},{label:m.t("right aligned"),value:"right"},{label:m.t("fill full width"),value:"fill-width"}];let g={};Object.values(O.widgets).forEach(a=>{g[a.module]=g[a.module]||{label:a.module,widgets:[]},a._deleted!==!0&&g[a.module].widgets.push({...a,value:a.id,label:a.label?a.label+" "+(a.title?"("+a.title+")":""):a.title||""})}),g=Object.values(g);const r=U(g),f=U(null);ge(()=>e.widget,a=>{M.dev("DEBUG","WidgetPopup","watch",a),f.value=a?oe({items:[],...a}):null});const n=A(()=>f.value.scaleToFitContents!==void 0?f.value.scaleToFitContents:!0),$=A(()=>f.value.alignmentVertical||"top"),o=A(()=>f.value.alignmentHorizontal||"center"),d=A(()=>f.value.allowFullscreen||!1),W=A(()=>f.value.items?f.value.items.map(a=>O.widgets[a]||{}):[]),C=(a,w)=>{M.dev("DEBUG","WidgetPopup","onFilter",a);let k=g;a&&(a=a.toLowerCase(),k=[],g.forEach(_=>{const j=[];_.widgets.forEach(B=>{(B.module&&B.module.toLowerCase().indexOf(a)!==-1||B.id&&B.id.toLowerCase().indexOf(a)!==-1||B.title&&B.title.toLowerCase().indexOf(a)!==-1||B.label&&B.label.toLowerCase().indexOf(a)!==-1)&&j.push(B)}),j.length>0&&k.push({label:_.label+" ("+j.length+")",widgets:j})})),w(()=>{r.value=k.sort((_,j)=>(_=_.label?_.label.toLowerCase():"",j=j.label?j.label.toLowerCase():"",_===j?0:_>j?1:-1))})},h=U(null);let T=!1;const J=a=>{M.dev("DEBUG","WidgetPopup","onChange",a),f.value[a.id]=a.value},ie=a=>{a&&a.module&&T===!0&&Y({id:h.value}),T=!1,h.value=null},ne=()=>{f.value=null,p("onClose")},le=()=>{p("onSave",f.value),ne()},te=U(),Y=a=>{f.value.items.push(a.id),te.value.hidePopup()};return{ScaleExceptions:Ie,AlignmentExceptions:_e,alignmentHorizontal:E,alignmentVertical:F,inputValueAlignmentHorizontal:o,inputValueAlignmentVertical:$,inputScaleToFitContents:n,inputValueAllowFullscreen:d,onChange:J,onClose:ie,onCancel:ne,onSave:le,onFilter:C,itemList:W,widgetListFiltered:r,selectedWidgetId:h,container:f,addWidgetElement:te,assignWidget:Y,addWidget:()=>{T=!0,h.value=ce()},editWidget:a=>{h.value=a},deleteWidget:a=>{confirm(m.t("Really delete item?"))&&f.value.items.splice(f.value.items.indexOf(a),1)}}}}),He={class:"text-h6"},Fe={class:"text-h7 primary q-ma-sm"},Ue={class:"row"},Ge={class:"col"},Ve={class:"col-1",style:{"text-align":"center","line-height":"56px"}},Re={class:"col-3",style:{"text-align":"center","line-height":"56px"}},Ne={key:0},Je={class:"row items-center"},Ye={class:"text-h7 primary q-ma-sm",style:{"margin-top":"16px"}},Ke={class:"row q-pb-xs"},Xe={class:"col"},Ze={class:"col"},xe={class:"col"},el={class:"col"};function ll(e,p,m,O,F,E){const g=Q("widget-page"),r=Q("icon"),f=Q("inputs");return c(),D("div",null,[l(g,{onOnClose:e.onClose,widgetId:e.selectedWidgetId},null,8,["onOnClose","widgetId"]),l(we,{"model-value":e.container!==null,persistent:""},{default:t(()=>[e.container?(c(),S(be,{key:0,class:"column",style:{width:"1200px","max-width":"90vw"}},{default:t(()=>[l(pe,{class:"row items-center"},{default:t(()=>[s("div",He,u(e.$t("Assign Widget to Box")),1),l(Ce),l(H,{flat:"",round:"",color:"grey",icon:"close",onClick:e.onCancel},null,8,["onClick"])]),_:1}),l(N),l(pe,{class:"col defaultPadding-2 q-pt-none scroll body"},{default:t(()=>[s("div",Fe,u(e.$t("Widget")),1),l(N,{style:{margin:"0 0 8px 0"}}),P(s("div",Ue,[s("div",Ge,[l(De,{onFilter:e.onFilter,ref:"addWidgetElement",label:e.$t("Assign Widget"),options:e.widgetListFiltered,"model-value":"","use-input":"","stack-label":"",style:{margin:"0 8px"}},{option:t(n=>[l(Se,{"expand-separator":"","header-class":"text-weight-bold",label:n.opt.label},{default:t(()=>[(c(!0),D(G,null,V(n.opt.widgets,$=>P((c(),S(q,{key:$.id,clickable:"",onClick:o=>e.assignWidget($)},{default:t(()=>[l(v,null,{default:t(()=>[$.label?(c(),S(L,{key:0,class:"q-ml-md"},{default:t(()=>[b(u($.label),1)]),_:2},1024)):(c(),S(L,{key:1,class:"q-ml-md"},{default:t(()=>[s("em",null,"("+u(e.$t("no title"))+")",1)]),_:1})),l(L,{class:"q-ml-md",caption:""},{default:t(()=>[b(u($.id),1)]),_:2},1024)]),_:2},1024)]),_:2},1032,["onClick"])),[[Te]])),128))]),_:2},1032,["label"])]),_:1},8,["onFilter","label","options"])]),s("div",Ve,u(e.$t("or")),1),s("div",Re,[l(H,{color:"primary",icon:"mdi-plus-circle",label:e.$t("Add Widget"),onClick:e.addWidget},null,8,["label","onClick"])])],512),[[z,e.itemList.length===0]]),l(K,null,{default:t(()=>[(c(!0),D(G,null,V(e.itemList,(n,$)=>(c(),S(q,{key:n.id+"-"+$,class:"list-group-item"},{default:t(()=>[n.icon?(c(),S(v,{key:0,avatar:""},{default:t(()=>[l(r,{color:"primary",name:n.icon},null,8,["name"])]),_:2},1024)):X("",!0),l(v,null,{default:t(()=>[l(L,null,{default:t(()=>[b(u(n.label||n.title||e.$t("no title"))+" ",1),n._deleted?(c(),D("em",Ne,"[ "+u(e.$t("deleted"))+" ]",1)):X("",!0)]),_:2},1024),l(L,{caption:""},{default:t(()=>[b("Widget ID: "+u(n.id)+", Module: "+u(n.module),1)]),_:2},1024)]),_:2},1024),l(v,{side:""},{default:t(()=>[s("div",Je,[n._deleted!==!0?(c(),S(H,{key:0,size:"sm",flat:"",round:"",onClick:o=>e.editWidget(n.id),icon:"mdi-pencil"},null,8,["onClick"])):X("",!0),l(H,{size:"sm",flat:"",round:"",onClick:o=>e.deleteWidget(n.id),icon:"mdi-delete",color:"negative"},null,8,["onClick"])])]),_:2},1024)]),_:2},1024))),128))]),_:1}),s("div",Ye,u(e.$t("Options")),1),l(N,{style:{margin:"0 0 8px 0"}}),s("div",Ke,[s("div",Xe,[l(f,{icon:"mdi-resize",onOnChange:e.onChange,id:"allowFullscreen",label:"Allow fullscreen",type:"switch",value:e.inputValueAllowFullscreen},null,8,["onOnChange","value"])]),s("div",Ze,[P(l(f,{icon:"mdi-fit-to-page",onOnChange:e.onChange,id:"scaleToFitContents",label:"Scale contents to fit widget",type:"switch",value:e.inputScaleToFitContents},null,8,["onOnChange","value"]),[[z,e.itemList[0]&&e.ScaleExceptions.includes(e.itemList[0].module)===!1]])]),s("div",xe,[P(l(f,{icon:"mdi-arrow-split-horizontal",onOnSelect:e.onChange,id:"alignmentVertical",label:"Vertical alignment",type:"select",options:e.alignmentVertical,value:e.inputValueAlignmentVertical},null,8,["onOnSelect","options","value"]),[[z,e.itemList[0]&&e.AlignmentExceptions.includes(e.itemList[0].module)===!1]])]),s("div",el,[P(l(f,{icon:"mdi-arrow-split-vertical",onOnSelect:e.onChange,id:"alignmentHorizontal",label:"Horizontal alignment",type:"select",options:e.alignmentHorizontal,value:e.inputValueAlignmentHorizontal},null,8,["onOnSelect","options","value"]),[[z,e.itemList[0]&&e.AlignmentExceptions.includes(e.itemList[0].module)===!1]])])])]),_:1}),l(N),l($e,{align:"right"},{default:t(()=>[l(H,{flat:"",label:e.$t("Cancel"),color:"negative",onClick:e.onCancel},null,8,["label","onClick"]),l(H,{flat:"",label:e.$t("Apply"),color:"primary",onClick:e.onSave},null,8,["label","onClick"])]),_:1})]),_:1})):X("",!0)]),_:1},8,["model-value"])])}var tl=ue(Me,[["render",ll]]);const nl=se({name:"WidgetSection",props:["pageId","tabId","id","label","icon","fullscreen","widgetEdges","widgetConfig","items"],components:{WidgetPopup:tl},setup(e){M.dev("DEBUG","WidgetSection","setup()");const p=fe(),m=de(),O=[{id:"copy",icon:"mdi-content-copy",label:p.t("copy")},{id:"duplicate",icon:"mdi-content-duplicate",label:p.t("duplicate")}],F=A(()=>e.id!=="desktop"&&e.widgetConfig[e.id+"SameAs"]!=="specific-layout"),E=A(()=>[{label:p.t("wie Desktop"),value:"desktop"},{label:p.t("wie Smartphone"),value:"smartphone"},{label:p.t("eigenes Layout"),value:"specific-layout"}].filter(i=>i.value!==e.id));ge(()=>e.fullscreen,i=>{M.dev("DEBUG","WidgetSection","watch",i),i===!0&&C.value.length===0&&J()});const g=i=>{M.dev("DEBUG","WidgetSection","onChange",i),m.setWidgetConfig({pageId:e.pageId,tabId:e.tabId,key:i.id,val:i.value})},r=U({}),f=(i,a,w,k,_)=>{M.dev("DEBUG","WidgetSection","onResized",i,a,w,k,_),r.value[i]={width:(100/(12/w)).toFixed(2),height:k}},n=U({}),$=(i,a)=>{n.value[".widgetOptions-move-"+i.id]=a},o={},d=i=>m.widgets[i]||{items:[]},W=i=>{i=i||[];const a=i.join("-");return o[a]?o[a]:(M.dev("DEBUG","WidgetSection","getWidgetsData",i),!i||i.length===0?p.t("No widgets assigned"):(o[a]=i.map(w=>{const k=d(w);k.items=k.items||[];const _=k.items.filter(j=>j.type==="divider").length;return k.module+(!k.label&&!k.title?"":" ("+(k.label||k.title)+(k.module!=="StateList"?"":", "+k.items.length+" "+p.t("items")+" "+p.t("apprx.")+" "+((k.hideTitle!==!0?56:0)+_+(k.items.length-_)*46)+"px "+p.t("in height"))+")")}).join(", "),o[a]))},C=U(oe(e.items)||[]);ge(()=>e.items,()=>{ye(e.items)!==ye(C.value)&&(C.value=oe(e.items)||[])});const h=i=>{m.setWidgets({pageId:e.pageId,tabId:e.tabId,key:"widgets"+re(e.id),val:i})},T=U(),J=()=>{let i=0,a=0;for(const w of C.value){const k=w.y+w.h;k>a&&(a=k,i=w.x)}if(C.value.push({x:i,y:a,w:4,h:4,i:ce()}),T.value&&T.value[T.value.length-1]){const w=T.value[T.value.length-1].$el,{top:k,height:_}=w.getBoundingClientRect();w.parentElement.parentElement.scrollTo(0,k+_+1e3)}h(C.value)},ie=(i,a,w)=>{const _=m.layout.find(Z=>Z.id===w).tabs.find(Z=>Z.id===a),j=oe(_["widgets"+re(e.id)]);i=oe(i);let B=0;j.forEach(Z=>{B=Z.x>=i.x&&Z.x+Z.w<=i.x+i.w?Math.max(B,Z.y+Z.h):B}),i.y=B,j.push(i),m.setWidgets({pageId:w,tabId:a,key:"widgets"+re(e.id),val:j}),te(i,{confirmation:!1})},ne=i=>{const a=i.id,w=oe(C.value.find(_=>_.i===a));w.i=ce(),i.val==="copy"&&(w.items=w.items||[],w.items=w.items.map(_=>{const j=d(_),B=ce();return m.copyWidget({id:B,widget:j}),B}));let k=w.y+w.h;C.value.forEach(_=>{k=_.x>=w.x&&_.x+_.w<=w.x+w.w?Math.max(k,_.y+_.h):k}),w.y=k,C.value.push(w),h(C.value)},le=i=>m.hasWidget({widgetId:i.items[0]}),te=(i,a={},w)=>{const k=i.i;if(a.verifyAssignedMultiple&&(!i.items||!i.items[0]||m.hasWidget({widgetId:i.items[0]})>1))w.stopPropagation();else if(a.verifyAssignedMultiple)return;if(a.confirmation=a.confirmation===!1?!0:confirm(p.t(typeof a.confirmation=="string"?a.confirmation:"Really delete item")+"?"),a.confirmation){const _=C.value.findIndex(B=>B.i===k),j=C.value[_].items;C.value.splice(_,1),h(C.value),a.deleteAssignedWidget&&j.forEach(B=>{m.removeWidget({widget:{id:B}})})}},Y=U(null),y=i=>{M.dev("DEBUG","WidgetSection","saveWidgetAssignments",i),C.value.splice(C.value.findIndex(a=>a.i===Y.value.i),1,{...Y.value,...i}),Y.value=null,h(C.value)},I=i=>{for(const a in n.value)n.value[a]&&n.value[a].hide();n.value[i]&&n.value[i].show()};return Ee(()=>{T.value&&T.value.forEach(i=>{f(i.$props.i,i.$props.h,i.$props.w,i.$props.h*i.rowHeight+(i.$props.h-1)*i.margin[0],null)})}),{...he(C,i=>{m.setWidgets({pageId:e.pageId,tabId:e.tabId,key:"widgets"+re(e.id),val:i})}),gridItemElements:T,expanded:e.id==="desktop",copyMenu:O,onChange:g,onResized:f,popupWidgetOrder:U(!1),pages:m.layout.filter(i=>!i.type||i.type==="page"),widgets:C,widgetSizes:r,setWidgets:h,getWidget:d,getWidgetsData:W,setRef:$,widgetOptions:n,showPageMenu:I,selectedWidget:Y,hasWidget:le,addWidget:J,copyWidget:ne,moveWidget:ie,deleteWidget:te,saveWidgetAssignments:y,disabled:F,options:E}}}),ol={style:{padding:"0 16px 8px 16px","min-height":"64px"},class:"row"},il={class:"row justify-between"},al={class:"row items-center",style:{"padding-left":"8px"}},sl={class:"row"},dl={style:{padding:"0 8px 8px 8px","min-height":"64px"},class:"row"},ul={style:{margin:"auto 0"}},rl={class:"text-h6 row items-center"},cl={class:"grid-layout-container",style:{height:"800px","overflow-y":"scroll"}},gl={class:"row justify-between"},pl={class:"row items-center",style:{"padding-left":"8px"}},ml={key:0},vl={class:"row"},fl={class:"row q-pa-sm tooltip-widget",style:{overflow:"hidden"}};function hl(e,p,m,O,F,E){const g=Q("widget-popup"),r=Q("icon"),f=Q("inputs"),n=Q("grid-item"),$=Q("grid-layout");return c(),D("div",null,[l(g,{onOnClose:p[0]||(p[0]=o=>e.selectedWidget=null),onOnSave:e.saveWidgetAssignments,widget:e.selectedWidget},null,8,["onOnSave","widget"]),l(Se,{"model-value":e.disabled!==!0?e.expanded:!1,class:"full-width paper",disable:e.disabled},{header:t(()=>[s("div",{class:"row full-width",onClick:p[3]||(p[3]=o=>e.expanded=!e.expanded)},[l(v,{avatar:""},{default:t(()=>[l(r,{name:e.icon},null,8,["name"])]),_:1}),l(v,{style:{height:"40px"}},{default:t(()=>[b(u(e.label),1)]),_:1}),e.id!=="desktop"?(c(),S(v,{key:0,side:"",class:"notDisabled",onClick:p[2]||(p[2]=x(()=>{},["stop"]))},{default:t(()=>[l(f,{onOnSelect:e.onChange,type:"select",options:e.options,dense:"",label:e.$t("Use same layout as"),id:e.id+"SameAs",onClick:p[1]||(p[1]=x(()=>{},["stop"])),value:e.widgetConfig[e.id+"SameAs"]||"desktop",style:{width:"150px"}},null,8,["onOnSelect","options","label","id","value"])]),_:1})):X("",!0)])]),default:t(()=>[s("div",null,[P(s("div",null,[P(s("div",ol,[l(H,{color:"secondary",icon:"mdi-plus-circle",label:e.$t("Add Widget"),onClick:e.addWidget,style:{margin:"auto 0"}},null,8,["label","onClick"])],512),[[z,e.widgets.length===0]]),l(N),P(s("div",{class:R(["grid-item tooltip-widget",[e.id]])},[s("div",il,[s("div",al,u(e.$t("Fullscreen")),1),s("div",sl,[l(H,{size:"sm",flat:"",round:"",icon:"mdi-pencil",onClick:p[4]||(p[4]=o=>e.selectedWidget=e.widgets[0])})])])],2),[[z,e.widgets[0]!==void 0]])],512),[[z,e.fullscreen===!0]]),P(s("div",null,[s("div",dl,[l(H,{color:"secondary",icon:"mdi-plus-circle",label:e.$t("Add Widget"),onClick:e.addWidget,style:{margin:"auto 0"}},null,8,["label","onClick"]),l(f,{dense:"",type:"switch",inline:"",label:e.$t("Height of all widgets equal to page height (no scrollbars)"),id:e.id+"FitPageHeight",onOnChange:e.onChange,value:e.widgetConfig[e.id+"FitPageHeight"]||!1,style:{margin:"auto 0 auto 8px"}},null,8,["label","id","onOnChange","value"]),P(l(f,{set:e.rowHeight=parseInt(e.widgetConfig[e.id+"FitPageHeight"]!==!0&&e.widgetConfig[e.id+"WidgetHeight"])||50,dense:"",type:"number",min:10,label:e.$t("Widget height")+" ("+e.$t("in pixels")+")",id:e.id+"WidgetHeight",onOnChange:e.onChange,value:e.widgetConfig[e.id+"WidgetHeight"]||50,style:{margin:"auto 0 auto 4px"}},null,8,["set","label","id","onOnChange","value"]),[[z,e.widgetConfig[e.id+"FitPageHeight"]!==!0]]),l(f,{set:e.gapSize=parseInt(e.widgetConfig[e.id+"GapSize"]||5),dense:"",type:"number",min:0,label:e.$t("Widget gaps")+" ("+e.$t("in pixels")+")",id:e.id+"GapSize",onOnChange:e.onChange,value:e.widgetConfig[e.id+"GapSize"]||5,style:{margin:"auto 0 auto 4px"}},null,8,["set","label","id","onOnChange","value"]),P(s("div",ul,[l(f,{type:"button",color:"primary",icon:"mdi-sort-numeric-variant",label:"Change Widget Responsive Order",onOnClick:p[5]||(p[5]=o=>e.popupWidgetOrder=!0),size:"md"})],512),[[z,e.widgets.length>1]])]),l(N),l(we,{modelValue:e.popupWidgetOrder,"onUpdate:modelValue":p[8]||(p[8]=o=>e.popupWidgetOrder=o)},{default:t(()=>[l(be,{class:"column full-height",style:{width:"1400px","max-width":"40vw"}},{default:t(()=>[l(pe,{class:"row items-center"},{default:t(()=>[s("div",rl,u(e.$t("Change Widget Responsive Order")),1),l(Ce),l(H,{flat:"",round:"",color:"grey",icon:"close",onClick:p[6]||(p[6]=o=>e.popupWidgetOrder=!1)})]),_:1}),l(N),l(pe,{class:"col scroll body"},{default:t(()=>[l(K,{ref:"elDragDrop"},{default:t(()=>[(c(!0),D(G,null,V(e.widgets,(o,d)=>(c(),S(q,{key:"grid-item-"+o.i,class:"paper","data-id":o.i,set:o=o.items&&o.items[0]&&e.getWidget(o.items[0])||{}},{default:t(()=>[l(v,{avatar:"",center:""},{default:t(()=>[l(r,{size:"sm",name:"mdi-drag-horizontal",class:"dragndrop"})]),_:1}),l(v,null,{default:t(()=>[o.title?(c(),S(L,{key:0},{default:t(()=>[b(u(o.title),1)]),_:2},1024)):(c(),S(L,{key:1},{default:t(()=>[s("em",null,u(e.$t("No Title")),1)]),_:1})),o.module?(c(),S(L,{key:2,caption:""},{default:t(()=>[b(u(e.$t("Module"))+" "+u(o.module),1)]),_:2},1024)):(c(),S(L,{key:3,caption:""},{default:t(()=>[b(u(e.$t("No Module selected")),1)]),_:1}))]),_:2},1024),l(v,{side:""},{default:t(()=>[b(u(d),1)]),_:2},1024)]),_:2},1032,["data-id","set"]))),128))]),_:1},512)]),_:1}),l(N),l($e,{align:"right"},{default:t(()=>[l(H,{flat:"",label:e.$t("Close"),color:"primary",onClick:p[7]||(p[7]=o=>e.popupWidgetOrder=!1)},null,8,["label"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),s("div",cl,[l($,{onLayoutUpdated:e.setWidgets,layout:e.widgets,"onUpdate:layout":p[9]||(p[9]=o=>e.widgets=o),"row-height":e.rowHeight,margin:[e.gapSize,e.gapSize],"use-css-transforms":!0,responsive:!1,preventCollision:!1,style:{"min-height":"50px"}},{default:t(()=>[(c(!0),D(G,null,V(e.widgets,(o,d)=>(c(),S(n,{key:"grid-item-"+o.i,ref_for:!0,ref:"gridItemElements",x:o.x,y:o.y,w:o.w,h:o.h,i:o.i,class:R(["grid-item tooltip-widget",{"rounded-borders":e.widgetEdges!==!0,[e.id]:!0}]),onResized:e.onResized},{default:t(()=>[l(ve,{target:".tooltip-widget"},{default:t(()=>[b(u(e.getWidgetsData(o.items)),1)]),_:2},1024),s("div",gl,[s("div",pl,[s("span",{class:R("sort-"+d)},"[ "+u(d)+" ]",3),b("\xA0 "),l(ve,{target:".sort-"+d},{default:t(()=>[b(u(e.$t("Responsive Position"))+": "+u(d),1)]),_:2},1032,["target"]),b(" "+u(e.$t("Position")+": "+o.x+"x * "+o.y+"y")+" ",1),e.widgetSizes[o.i]?(c(),D("span",ml,"\xA0- "+u(e.$t("Size")+": "+o.w+"w ("+e.widgetSizes[o.i].width+"%) * "+o.h+"h ("+e.widgetSizes[o.i].height+"px)"),1)):X("",!0)]),s("div",vl,[l(f,{class:"q-ma-none",type:"button",round:"",icon:"mdi-pencil",tooltip:e.$t("edit"),onClick:x(W=>e.selectedWidget=o,["stop"])},null,8,["tooltip","onClick"]),l(f,{class:"q-ma-none",type:"button",round:"",icon:"mdi-content-copy",tooltip:e.$t("copy"),items:e.copyMenu,onOnSelect:e.copyWidget,id:o.i,denseMenu:""},null,8,["tooltip","items","onOnSelect","id"]),l(f,{class:R(["widgetOptions-"+o.i,"q-ma-none"]),type:"button",round:"",icon:"mdi-file-move-outline",tooltip:e.$t("move"),id:o.i},null,8,["class","tooltip","id"]),l(ae,{target:".widgetOptions-"+o.i,anchor:"bottom left",self:"top left","auto-close":""},{default:t(()=>[(c(!0),D(G,null,V(e.pages,W=>(c(),S(q,{key:W.id,class:R("widgetOptions-move-"+W.id),onMouseenter:C=>e.showPageMenu(".widgetOptions-move-"+W.id)},{default:t(()=>[l(v,{avatar:""},{default:t(()=>[l(r,{size:"xs",name:W.icon},null,8,["name"])]),_:2},1024),l(v,null,{default:t(()=>[b(u(W.title),1)]),_:2},1024),l(v,{side:""},{default:t(()=>[l(r,{name:"mdi-chevron-right"})]),_:1}),l(ae,{ref_for:!0,ref:C=>e.setRef(W,C),anchor:"top end",self:"top start","auto-close":""},{default:t(()=>[l(K,null,{default:t(()=>[(c(!0),D(G,null,V(W.tabs,C=>(c(),S(q,{key:C.id,clickable:"",onClick:h=>e.moveWidget(o,C.id,W.id)},{default:t(()=>[l(v,{avatar:""},{default:t(()=>[l(r,{size:"xs",name:C.icon},null,8,["name"])]),_:2},1024),l(v,null,{default:t(()=>[b(u(C.title),1)]),_:2},1024),l(v,{side:""})]),_:2},1032,["onClick"]))),128))]),_:2},1024)]),_:2},1536)]),_:2},1032,["class","onMouseenter"]))),128))]),_:2},1032,["target"]),(c(),S(f,{key:"deleteOptions-"+o.i+"-inputs",class:R(["deleteOptions-"+o.i,"q-ma-none"]),type:"button",round:"",icon:"mdi-delete",tooltip:e.$t("delete"),color:"negative",onClick:W=>e.deleteWidget(o,{verifyAssignedMultiple:!0},W)},null,8,["class","tooltip","onClick"])),(c(),S(ae,{key:"deleteOptions-"+o.i+"-menu",target:".deleteOptions-"+o.i,anchor:"bottom left",self:"top left","auto-close":""},{default:t(()=>[l(q,{clickable:"",onClick:x(W=>e.deleteWidget(o,{confirmation:"Delete Box only"}),["stop"])},{default:t(()=>[l(v,{avatar:""},{default:t(()=>[l(r,{size:"xs",name:"mdi-delete",color:"negative"})]),_:1}),l(v,null,{default:t(()=>[b(u(e.$t("Delete Box only")),1)]),_:1})]),_:2},1032,["onClick"]),l(q,{clickable:"",onClick:x(W=>e.deleteWidget(o,{confirmation:"Delete Box and assigned Widget",deleteAssignedWidget:!0}),["stop"])},{default:t(()=>[l(v,{avatar:""},{default:t(()=>[l(r,{size:"xs",name:"mdi-delete-sweep",color:"negative"})]),_:1}),l(v,null,{default:t(()=>[b(u(e.$t("Delete Box and assigned Widget")),1)]),_:1})]),_:2},1032,["onClick"])]),_:2},1032,["target"]))])]),s("div",fl,[b(u(e.getWidgetsData(o.items))+" ",1),l(ve,null,{default:t(()=>[b(u(e.getWidgetsData(o.items)),1)]),_:2},1024)])]),_:2},1032,["x","y","w","h","i","class","onResized"]))),128)),s("div",{class:"grid-spacer",style:ee({bottom:-3*e.rowHeight+"px",height:3*e.rowHeight+"px"})},null,4)]),_:1},8,["onLayoutUpdated","layout","row-height","margin"])])],512),[[z,e.fullscreen!==!0]])])]),_:1},8,["model-value","disable"])])}var yl=ue(nl,[["render",hl]]);const bl=se({name:"TabSection",props:["pageId","tabId"],components:{WidgetSection:yl},setup(e){M.dev("DEBUG","TabSection","setup()");const p=de(),m=E=>{M.dev("DEBUG","TabSection","onChange",E);let g=E.value;try{g=g&&E.json!==void 0&&g.indexOf("{")>-1&&g.indexOf("}")>-1?JSON.parse(g):g}catch(r){console.warn(E.value,r)}p.editTab({pageId:e.pageId,tabId:e.tabId,key:E.id,val:g})},O=A(()=>(p.layout.find(r=>r.id===e.pageId)||{}).tabs.find(r=>r.id===e.tabId)||{}),F=A(()=>O.value.title?typeof O.value.title=="string"?O.value.title:O.value.title.default||Object.values(O.value.title)[0]:"");return{onChange:m,tab:O,tabTitle:F}}}),Cl={style:{padding:"0 8px"}},$l={class:"text-h6 primary q-ma-sm"},wl={class:"row"},kl={class:"col"},Sl={class:"col"},Ol={class:"row"},Wl={class:"col"},Il={class:"col"},_l={class:"row"},Dl={class:"col"},Tl={class:"col"},El={class:"row"},Pl={class:"col-2"},zl={class:"col"},Ll={class:"text-h6 primary q-ma-sm",style:{"margin-top":"24px"}};function Bl(e,p,m,O,F,E){const g=Q("inputs"),r=Q("widget-section");return c(),D("div",Cl,[s("div",$l,u(e.$t("Tab"))+": "+u(e.tabTitle)+" ("+u(e.$t("ID")+": "+e.tab.id)+")",1),s("div",wl,[s("div",kl,[l(g,{json:"",onOnChange:e.onChange,id:"icon",label:e.$t("Tab")+" "+e.$t("Icon"),value:e.tab.icon||"",icon:e.tab.icon},null,8,["onOnChange","label","value","icon"])]),s("div",Sl,[l(g,{json:"",onOnChange:e.onChange,id:"title",label:e.$t("Tab")+" "+e.$t("Title"),value:e.tab.title||""},null,8,["onOnChange","label","value"])])]),s("div",Ol,[s("div",Wl,[l(g,{json:"",onOnChange:e.onChange,id:"iconStyle",label:"config#Devices#iconStyle#label",info:"config#Devices#iconStyle#info",value:e.tab.iconStyle},null,8,["onOnChange","value"])]),s("div",Il,[l(g,{json:"",onOnChange:e.onChange,id:"bodyStyle",label:"config#Devices#bodyStyle#label",info:"config#Devices#bodyStyle#info",value:e.tab.bodyStyle},null,8,["onOnChange","value"])])]),s("div",_l,[s("div",Dl,[l(g,{json:"",onOnChange:e.onChange,id:"iconSelectedStyle",label:"config#Layout#iconSelectedStyle#label",info:"config#Layout#iconSelectedStyle#info",value:e.tab.iconSelectedStyle},null,8,["onOnChange","value"])]),s("div",Tl,[l(g,{json:"",onOnChange:e.onChange,id:"bodySelectedStyle",label:"config#Layout#bodySelectedStyle#label",info:"config#Layout#bodySelectedStyle#info",value:e.tab.bodySelectedStyle},null,8,["onOnChange","value"])])]),s("div",El,[s("div",Pl,[l(g,{type:"switch",inline:"",label:e.$t("Tab")+" "+e.$t("Fullscreen"),id:"fullscreen",onOnChange:e.onChange,value:e.tab.fullscreen||!1,style:{margin:"auto 0 auto 16px"}},null,8,["label","onOnChange","value"])]),s("div",zl,[l(g,{type:"switch",inline:"",label:e.$t("Widgets edges (round or angled)"),id:"widgetEdges",onOnChange:e.onChange,value:e.tab.widgetEdges||!1,style:{margin:"auto 0 auto 16px"}},null,8,["label","onOnChange","value"])])]),s("div",Ll,u(e.$t("Widgets of tab"))+": "+u(e.tabTitle),1),l(r,{pageId:e.pageId,tabId:e.tabId,id:"desktop",label:"Desktop",icon:"mdi-monitor",fullscreen:e.tab.fullscreen||!1,widgetEdges:e.tab.widgetEdges||!1,widgetConfig:e.tab.widgetConfig||{},items:e.tab.widgetsDesktop},null,8,["pageId","tabId","fullscreen","widgetEdges","widgetConfig","items"]),l(r,{pageId:e.pageId,tabId:e.tabId,id:"smartphone",label:"Smartphone",icon:"mdi-cellphone",fullscreen:e.tab.fullscreen||!1,widgetEdges:e.tab.widgetEdges||!1,widgetConfig:e.tab.widgetConfig||{},items:e.tab.widgetsSmartphone},null,8,["pageId","tabId","fullscreen","widgetEdges","widgetConfig","items"])])}var jl=ue(bl,[["render",Bl]]);const Al=se({name:"DrawerSection",props:["pageId"],components:{TabSection:jl},setup(e,{emit:p}){var Y;M.dev("DEBUG","DrawerSection","setup()");const m=ke(),O=de(),F=A(()=>{const y=[];return O.getPagesWithoutDeletions.forEach(I=>{I.id!==e.pageId&&y.push({id:I.id,label:I.title,...I})}),y}),E=A(()=>O.layout.find(y=>y.id===e.pageId)||{}),g=A(()=>typeof E.value.title=="string"?E.value.title:E.value.title&&E.value.title.default||Object.values(E.value.title)[0]),r=A({get(){return(E.value.tabs||[]).map(I=>(I._hasIconBinding=typeof I.icon=="object",I._hasTitleBinding=typeof I.title=="object",I))},set(y){O.setTabs({pageId:e.pageId,tabs:y})}}),f=m.getSelectedPage.id===E.value.id&&m.getSelectedTab||((Y=E.value.tabs)==null?void 0:Y[0])||{},n=U(f.id||null),$=U({}),o=(y,I)=>{$.value[".tabOptions-move-"+y.id]=I};let d=null;ge(()=>e.pageId,()=>{var y,I;M.dev("DEBUG","DrawerSection","watch",e.pageId),n.value=d||((I=(y=r.value)==null?void 0:y[0])==null?void 0:I.id)||null,d=null});const W=()=>{O.addTab({pageId:e.pageId}),n.value=r.value[r.value.length-1].id},C=(y,I=!1)=>{O.addTab({pageId:e.pageId,tabId:y,copyWidgets:I}),n.value=r.value[r.value.length-1].id},h=(y,I)=>{O.moveTab({pageId:e.pageId,tabId:y,destinationPageId:I}),n.value=y,d=y,p("onSelectPage",O.layout.find(i=>i.id===I)||{})},T=y=>{if(O.deleteTab({pageId:e.pageId,tabId:y}),n.value===y){const I=r.value.find(i=>i._deleted!==!0);n.value=I?I.id:null}},J=y=>{O.restoreTab({pageId:e.pageId,tabId:y}),n.value=y},ie=y=>{M.dev("DEBUG","DrawerSection","onChange",y);let I=y.value;try{I=I&&y.json!==void 0&&y.value.indexOf("{")>-1&&y.value.indexOf("}")>-1?JSON.parse(y.value):y.value}catch(i){console.warn(y.value,i)}O.editDrawerItem({itemId:e.pageId,key:y.id,val:I})},ne=y=>O.changeDrawerItemId(e.pageId,y),le=U(),te=A(()=>le.value&&le.value.$el.offsetWidth?Math.floor(le.value.$el.offsetWidth*.95)+"px":"100%");return{...he(r,y=>r.value=y,{direction:"vertical"}),onChange:ie,setRef:o,breakpoint:te,elTabs:le,onChangeId:ne,pages:F,page:E,pageTitle:g,tabs:r,tabOptions:$,selectedTab:n,addTab:W,copyTab:C,moveTab:h,deleteTab:T,restoreTab:J}}}),ql={class:"text-h6 primary q-ma-sm"},Ql={class:"row"},Ml={class:"col"},Hl={class:"col"},Fl={class:"row"},Ul={class:"col"},Gl={class:"col"},Vl={class:"row"},Rl={class:"col"},Nl={class:"col"},Jl={key:0},Yl={class:"text-h6 primary q-ma-sm"},Kl={class:"q-ma-sm row"},Xl={key:0},Zl={key:1},xl={key:2},et={key:3};function lt(e,p,m,O,F,E){const g=Q("inputs"),r=Q("icon"),f=Q("tab-section");return c(),D("div",{key:e.page.id},[s("div",ql,[b(u(e.$t("Page"))+": "+u(e.pageTitle)+" ",1),s("span",null,"(ID: "+u(e.page.id)+" )",1)]),s("div",Ql,[s("div",Ml,[l(g,{json:"",onOnChange:e.onChange,id:"icon",label:e.$t("Icon"),value:e.page.icon||"",icon:e.page.icon},null,8,["onOnChange","label","value","icon"])]),s("div",Hl,[l(g,{json:"",onOnChange:e.onChange,id:"title",label:e.$t("Title"),value:e.page.title||""},null,8,["onOnChange","label","value"])])]),s("div",Fl,[s("div",Ul,[l(g,{json:"",onOnChange:e.onChange,id:"iconStyle",label:"config#Devices#iconStyle#label",info:"config#Devices#iconStyle#info",value:e.page.iconStyle},null,8,["onOnChange","value"])]),s("div",Gl,[l(g,{json:"",onOnChange:e.onChange,id:"bodyStyle",label:"config#Devices#bodyStyle#label",info:"config#Devices#bodyStyle#info",value:e.page.bodyStyle},null,8,["onOnChange","value"])])]),s("div",Vl,[s("div",Rl,[l(g,{json:"",onOnChange:e.onChange,id:"iconSelectedStyle",label:"config#Layout#iconSelectedStyle#label",info:"config#Layout#iconSelectedStyle#info",value:e.page.iconSelectedStyle},null,8,["onOnChange","value"])]),s("div",Nl,[l(g,{json:"",onOnChange:e.onChange,id:"bodySelectedStyle",label:"config#Layout#bodySelectedStyle#label",info:"config#Layout#bodySelectedStyle#info",value:e.page.bodySelectedStyle},null,8,["onOnChange","value"])])]),!e.page.type||e.page.type==="page"?(c(),D("div",Jl,[s("div",Yl,u(e.$t("Tabs of page"))+": "+u(e.pageTitle),1),s("div",Kl,[l(H,{color:"secondary",icon:"mdi-plus-circle",label:e.$t("Add Tab"),onClick:e.addTab},null,8,["label","onClick"]),l(g,{type:"switch",inline:"",label:e.$t("Do not show Tab Labels (only Icons)"),id:"hideLabels",onOnChange:e.onChange,value:e.page.hideLabels||!1,style:{margin:"auto 0 auto 16px"}},null,8,["label","onOnChange","value"])]),l(ze,{ref:"elTabs",modelValue:e.selectedTab,"onUpdate:modelValue":p[1]||(p[1]=n=>e.selectedTab=n),"inline-label":"","outside-arrows":"","mobile-arrows":"",class:"bg-primary text-white full-width",align:"left"},{default:t(()=>[s("div",{ref:"elDragDrop",class:"row",style:ee({width:e.breakpoint})},[(c(!0),D(G,null,V(e.tabs,n=>(c(),S(Pe,{key:n.id,name:n.id,style:ee({backgroundColor:n.backgroundColor,height:"48px"}),class:R({"q-px-xs":!0,rowDeleted:n._deleted===!0}),disable:n._deleted===!0},{default:t(()=>[l(r,{size:"sm",name:"mdi-drag-vertical",class:"dragndrop",color:n.color},null,8,["color"]),n._hasIconBinding?(c(),D("div",Xl,[l(me,{flat:"",dense:""},{label:t(()=>[l(r,{size:"xs",name:n.icon.default||Object.values(n.icon)[0],class:"tabIcon q-mr-xs",color:n.iconColor||n.color},null,8,["name","color"])]),default:t(()=>[l(K,null,{default:t(()=>[(c(!0),D(G,null,V(n.icon,($,o)=>(c(),S(q,{key:o},{default:t(()=>[l(v,{avatar:""},{default:t(()=>[l(r,{size:"xs",name:$,class:"tabIcon q-mr-xs",color:n.iconColor||n.color},null,8,["name","color"])]),_:2},1024),l(v,null,{default:t(()=>[l(L,null,{default:t(()=>[b(u($),1)]),_:2},1024),l(L,{caption:""},{default:t(()=>[b(u(o),1)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:2},1024)]),_:2},1024)])):(c(),D("div",Zl,[l(r,{size:"xs",name:n.icon,class:"tabIcon q-mr-xs",color:n.iconColor||n.color},null,8,["name","color"])])),n._hasTitleBinding?(c(),D("div",xl,[l(me,{flat:"",dense:"",label:n.title.default||Object.values(n.title)[0]},{default:t(()=>[l(K,null,{default:t(()=>[(c(!0),D(G,null,V(n.title,($,o)=>(c(),S(q,{key:o},{default:t(()=>[l(v,null,{default:t(()=>[l(L,null,{default:t(()=>[b(u($),1)]),_:2},1024),l(L,{caption:""},{default:t(()=>[b(u(o),1)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:2},1024)]),_:2},1032,["label"])])):(c(),D("div",et,[P(s("div",{class:"q-tab__label",style:ee({color:n.color})},u(n.title),5),[[z,e.page.hideLabels!==!0]])])),s("div",{class:"row items-center no-wrap",style:ee([{"margin-left":"16px"},{color:n.color}])},[l(N,{vertical:"",class:"q-ma-xs"}),P(l(g,{round:"",type:"button",icon:"mdi-restore",tooltip:e.$t("restore"),color:"positive",onClick:$=>e.restoreTab(n.id)},null,8,["tooltip","onClick"]),[[z,n._deleted===!0]]),P(l(H,{class:R("tabOptions-"+n.id),dense:"",flat:"",round:"",color:"white",icon:"mdi-dots-vertical",onClick:p[0]||(p[0]=x(()=>{},["stop"]))},null,8,["class"]),[[z,n._deleted!==!0]]),l(ae,{target:".tabOptions-"+n.id,anchor:"bottom left",self:"top left","auto-close":""},{default:t(()=>[P(l(q,{clickable:"",onClick:$=>e.copyTab(n.id,!0)},{default:t(()=>[l(v,{avatar:""},{default:t(()=>[l(r,{size:"xs",name:"mdi-content-copy"})]),_:1}),l(v,null,{default:t(()=>[b(u(e.$t("copy")),1)]),_:1})]),_:2},1032,["onClick"]),[[z,n._deleted!==!0]]),P(l(q,{clickable:"",onClick:$=>e.copyTab(n.id)},{default:t(()=>[l(v,{avatar:""},{default:t(()=>[l(r,{size:"xs",name:"mdi-content-duplicate"})]),_:1}),l(v,null,{default:t(()=>[b(u(e.$t("duplicate")),1)]),_:1})]),_:2},1032,["onClick"]),[[z,n._deleted!==!0]]),P(l(q,{class:R("tabOptions-move-"+n.id),onMouseover:$=>e.tabOptions[".tabOptions-move-"+n.id]&&e.tabOptions[".tabOptions-move-"+n.id].show(),clickable:""},{default:t(()=>[l(v,{avatar:""},{default:t(()=>[l(r,{size:"xs",name:"mdi-folder-move-outline"})]),_:1}),l(v,null,{default:t(()=>[b(u(e.$t("move")),1)]),_:1}),l(v,{side:""},{default:t(()=>[l(r,{name:"mdi-chevron-right"})]),_:1}),l(ae,{ref_for:!0,ref:$=>e.setRef(n,$),anchor:"top end",self:"top start","auto-close":""},{default:t(()=>[l(K,null,{default:t(()=>[(c(!0),D(G,null,V(e.pages,$=>(c(),S(q,{key:$.id,clickable:"",onClick:o=>e.moveTab(n.id,$.id)},{default:t(()=>[l(v,{avatar:""},{default:t(()=>[l(r,{size:"xs",name:$.icon},null,8,["name"])]),_:2},1024),l(v,null,{default:t(()=>[b(u($.title),1)]),_:2},1024),l(v,{side:""})]),_:2},1032,["onClick"]))),128))]),_:2},1024)]),_:2},1536)]),_:2},1032,["class","onMouseover"]),[[z,n._deleted!==!0&&e.pages.length>0]]),l(q,{clickable:"",style:{color:"#fff",background:"var(--q-negative)"},onClick:$=>e.deleteTab(n.id)},{default:t(()=>[l(v,{avatar:""},{default:t(()=>[l(r,{size:"xs",name:"mdi-delete"})]),_:1}),l(v,null,{default:t(()=>[b(u(e.$t("delete")),1)]),_:1})]),_:2},1032,["onClick"])]),_:2},1032,["target"])],4)]),_:2},1032,["name","style","class","disable"]))),128))],4)]),_:1},8,["modelValue"]),l(Be,{modelValue:e.selectedTab,"onUpdate:modelValue":p[2]||(p[2]=n=>e.selectedTab=n),animated:"","keep-alive":"",class:"border"},{default:t(()=>[(c(!0),D(G,null,V(e.tabs,n=>(c(),S(Le,{key:n.id,name:n.id,style:{padding:"16px 0"},class:"body"},{default:t(()=>[l(f,{pageId:e.page.id,tabId:n.id},null,8,["pageId","tabId"])]),_:2},1032,["name"]))),128))]),_:1},8,["modelValue"])])):X("",!0)])}var tt=ue(Al,[["render",lt]]);const nt=se({name:"LayoutsPage",components:{DrawerSection:tt,JsonEditor:qe},setup(){M.dev("DEBUG","LayoutsPage","setup()");const e=fe(),p=ke(),m=de(),O=[{id:"copy",icon:"mdi-content-copy",label:e.t("copy")},{id:"duplicate",icon:"mdi-content-duplicate",label:e.t("duplicate")}],F=h=>m.set({["settings."+h.id]:h.value}),E=h=>{if(h._error){m.addError(h.id,h._error);return}m.removeError(h.id),h.value&&m.set({tmpJsonEditor:{key:h.id,json:JSON.parse(h.value)}})},g=A({get(){return(m.getLayout||[]).map(T=>(T._hasIconBinding=typeof T.icon=="object",T._hasTitleBinding=typeof T.title=="object",T))},set(h){m.setLayout(h)}}),r=U(p.getSelectedPage||(m.selectedPage?m.selectedPage:m.getLayout.find(h=>h.type==="page"&&h._deleted!==!0))),f=h=>{r.value=h},n=()=>m.addDrawerItem({type:"divider"}),$=()=>m.addDrawerItem({type:"header",title:e.t("New Header")}),o=()=>{m.addDrawerItem({type:"page",icon:"mdi-file",title:e.t("New Page"),tabs:[]}),r.value=g.value[g.value.length-1],m.addTab({pageId:r.value.id})},d=h=>{const T=h.id;m.copyDrawerItem({itemId:T,copyWidgets:h.val==="copy"});const J=g.value[g.value.length-1];J.type==="page"&&(r.value=J)},W=h=>{m.deleteDrawerItem({itemId:h}),r.value.id===h&&(r.value=g.value.find(T=>T.type==="page"&&T._deleted!==!0))},C=h=>{m.restoreDrawerItem({itemId:h});const T=g.value.find(J=>J.id===h);T.type==="page"&&(r.value=T)};return{...he(g,h=>g.value=h),copyMenu:O,json:A(()=>m.layout),settings:A(()=>m.settings),proWarning:A(()=>!je.isPro()&&g.value.filter(h=>h.type==="page").length>1),pageHeight:A(()=>p.pageHeight),pagesWithoutDeletionsCount:A(()=>m.getPagesWithoutDeletions.length),onChangeSettings:F,onJsonEditor:E,onSelectPage:f,selectedPage:r,pages:g,addDivider:n,addHeader:$,addPage:o,copyItem:d,deleteItem:W,restoreItem:C}}}),ot={class:"full-height LayoutsPage"},it={class:"row no-wrap"},at={class:"row",style:{"margin-bottom":"54px"}},st={class:"col-3"},dt={class:"text-h6 primary q-ma-sm"},ut={key:0},rt={key:1},ct={key:1},gt={key:2},pt={class:"row items-center"},mt={class:"col-9"};function vt(e,p,m,O,F,E){const g=Q("alert"),r=Q("icon"),f=Q("inputs"),n=Q("paper"),$=Q("drawer-section"),o=Q("json-editor");return c(),D("div",ot,[s("div",it,[l(We,{class:"paper",style:{"min-height":"56px"}},{default:t(()=>[l(Oe,{shrink:""},{default:t(()=>[b(u(e.$t("Layout")),1)]),_:1})]),_:1})]),P(s("div",at,[s("div",st,[l(n,{class:"q-pa-sm"},{default:t(()=>[s("div",dt,u(e.$t("Drawer")+" / "+e.$t("Pages")),1),l(Ae,null,{default:t(()=>[l(H,{color:"primary",icon:"mdi-plus-circle",label:e.$t("Add Page"),onClick:e.addPage},null,8,["label","onClick"]),l(H,{color:"secondary",icon:"mdi-plus-circle",label:e.$t("Add Header"),onClick:e.addHeader},null,8,["label","onClick"]),l(H,{color:"secondary",icon:"mdi-plus-circle",label:e.$t("Add Divider"),onClick:e.addDivider},null,8,["label","onClick"])]),_:1}),P(l(g,{style:{margin:"16px 0 0 0"}},{default:t(()=>[b(u(e.$t("Only a single page is allowed without Pro. A single page may hold infinite tabs though."))+".",1)]),_:1},512),[[z,e.proWarning]]),l(N,{style:{margin:"16px 0"}}),l(K,{ref:"elDragDrop"},{default:t(()=>[(c(!0),D(G,null,V(e.pages,d=>(c(),S(q,{key:d.id,clickable:!d.type||d.type==="page"||d.type==="header",onClick:W=>e.onSelectPage(d),class:R({rowDeleted:d._deleted===!0,selected:e.selectedPage.id===d.id}),disable:d._deleted===!0},{default:t(()=>[l(v,{avatar:"",center:""},{default:t(()=>[l(r,{size:"sm",name:"mdi-drag-horizontal",class:"dragndrop"})]),_:1}),!d.type||d.type==="page"?(c(),S(v,{key:0,avatar:"",center:"",style:ee({backgroundColor:d.backgroundColor})},{default:t(()=>[d._hasIconBinding?(c(),D("div",ut,[l(me,{flat:"",dense:""},{label:t(()=>[l(r,{name:d.icon.default||Object.values(d.icon)[0],color:e.selectedPage.id===d.id?"white":"primary",styles:{color:d.iconColor}},null,8,["name","color","styles"])]),default:t(()=>[l(K,null,{default:t(()=>[(c(!0),D(G,null,V(d.icon,(W,C)=>(c(),S(q,{key:C},{default:t(()=>[l(v,{avatar:""},{default:t(()=>[l(r,{size:"xs",name:W,class:"pageIcon q-mr-xs",color:d.iconColor||d.color},null,8,["name","color"])]),_:2},1024),l(v,null,{default:t(()=>[l(L,null,{default:t(()=>[b(u(W),1)]),_:2},1024),l(L,{caption:""},{default:t(()=>[b(u(C),1)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:2},1024)]),_:2},1024)])):(c(),D("div",rt,[l(r,{name:d.icon,color:e.selectedPage.id===d.id?"white":"primary",styles:{color:d.iconColor}},null,8,["name","color","styles"])]))]),_:2},1032,["style"])):X("",!0),l(v,{class:R({itemDeleted:d._deleted===!0}),style:ee({backgroundColor:d.backgroundColor,color:d.color})},{default:t(()=>[d.type==="divider"?(c(),S(N,{key:0})):X("",!0),d._hasTitleBinding?(c(),D("div",ct,[l(me,{flat:"",dense:"",label:d.title.default||Object.values(d.title)[0]},{default:t(()=>[l(K,null,{default:t(()=>[(c(!0),D(G,null,V(d.title,(W,C)=>(c(),S(q,{key:C},{default:t(()=>[l(v,null,{default:t(()=>[l(L,null,{default:t(()=>[b(u(W),1)]),_:2},1024),l(L,{caption:""},{default:t(()=>[b(u(C),1)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:2},1024)]),_:2},1032,["label"])])):(c(),D("div",gt,[l(L,{class:R({header:d.type==="header"}),style:ee({color:d.color})},{default:t(()=>[b(u(d.title),1)]),_:2},1032,["class","style"])]))]),_:2},1032,["class","style"]),l(v,{side:"",class:R({rowDeleted:d._deleted===!0,selected:e.selectedPage.id===d.id})},{default:t(()=>[s("div",pt,[d.type==="page"?P((c(),S(f,{key:0,type:"button",round:"",icon:"mdi-content-copy",tooltip:e.$t("copy"),items:e.copyMenu,onOnSelect:e.copyItem,id:d.id,denseMenu:""},null,8,["tooltip","items","onOnSelect","id"])),[[z,d.type!=="divider"&&d._deleted!==!0]]):P((c(),S(f,{key:1,type:"button",round:"",icon:"mdi-content-copy",tooltip:e.$t("copy"),onClick:x(W=>e.copyItem({id:d.id}),["stop"])},null,8,["tooltip","onClick"])),[[z,d.type!=="divider"&&d._deleted!==!0]]),P(l(f,{type:"button",round:"",icon:"mdi-delete",tooltip:e.$t("delete"),color:"negative",onClick:x(W=>e.deleteItem(d.id),["stop"])},null,8,["tooltip","onClick"]),[[z,(d.type&&d.type!=="page"||(!d.type||d.type==="page")&&e.pagesWithoutDeletionsCount>1)&&d._deleted!==!0]]),P(l(f,{type:"button",round:"",icon:"mdi-restore",tooltip:e.$t("restore"),color:"positive",onClick:x(W=>e.restoreItem(d.id),["stop"]),class:"restore"},null,8,["tooltip","onClick"]),[[z,d._deleted===!0]])])]),_:2},1032,["class"])]),_:2},1032,["clickable","onClick","class","disable"]))),128))]),_:1},512),l(K,null,{default:t(()=>[l(N,{class:"q-my-sm"}),l(q,null,{default:t(()=>[l(v,{avatar:"",center:""}),l(v,{avatar:"",center:""},{default:t(()=>[l(r,{name:"mdi-cog",color:"primary"})]),_:1}),l(v,null,{default:t(()=>[l(L,null,{default:t(()=>[b(u(e.$t("Configuration"))+" & "+u(e.$t("Help")),1)]),_:1}),l(L,{caption:""},{default:t(()=>[b(u(e.$t("show in sidebar")),1)]),_:1})]),_:1}),l(v,{side:""},{default:t(()=>[l(f,{type:"Switch",inline:"",onOnChange:e.onChangeSettings,id:"drawerShowSettings",value:e.settings.drawerShowSettings},null,8,["onOnChange","value"])]),_:1})]),_:1}),l(q,null,{default:t(()=>[l(v,{avatar:"",center:""}),l(v,{avatar:"",center:""},{default:t(()=>[l(r,{name:"mdi-menu",color:"primary"})]),_:1}),l(v,null,{default:t(()=>[l(L,null,{default:t(()=>[b(u(e.$t("Drawer")),1)]),_:1}),l(L,{caption:""},{default:t(()=>[b(u(e.$t("show button")),1)]),_:1})]),_:1}),l(v,{side:""},{default:t(()=>[l(f,{type:"Switch",inline:"",onOnChange:e.onChangeSettings,id:"drawerShowMenuButton",value:e.settings.drawerShowMenuButton},null,8,["onOnChange","value"])]),_:1})]),_:1})]),_:1})]),_:1})]),s("div",mt,[l(n,{class:"q-pa-sm"},{default:t(()=>[e.selectedPage&&e.selectedPage.id?(c(),S($,{key:0,onOnSelectPage:e.onSelectPage,pageId:e.selectedPage.id},null,8,["onOnSelectPage","pageId"])):X("",!0)]),_:1})])],512),[[z,!e.settings.configExpertMode]]),P(l(n,{style:ee({height:e.pageHeight-66-16+"px"})},{default:t(()=>[l(o,{id:"layout",json:e.json,onOnChange:e.onJsonEditor},null,8,["json","onOnChange"])]),_:1},8,["style"]),[[z,e.settings.configExpertMode]])])}var It=ue(nt,[["render",vt]]);export{It as default};
