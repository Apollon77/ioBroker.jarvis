import{Q as Se}from"./QToolbarTitle-1e00a986.js";import{Q as Oe}from"./QToolbar-efb65a59.js";import{a4 as ae,cq as H,bM as ve,cn as se,k as V,aY as me,bQ as oe,Q as q,dc as _e,dd as We,bt as de,d6 as ue,aG as Q,ay as c,W as I,a2 as l,b1 as t,U as E,bT as re,X as i,D as d,bD as ye,bB as M,bU as N,b3 as P,bn as z,bP as Ie,I as U,aE as G,bF as A,bG as p,bO as B,a1 as b,cN as De,bH as K,V as Y,bV as be,bS as Ce,bW as $e,aZ as Te,as as Ee,ct as ge,bp as x,A as R,by as ie,C as ee,bw as we,cv as Pe,cu as ze,de as Le,df as Be,dg as je,cS as Ae}from"./index-906fe8a9.js";import{Q as ce}from"./QBtnDropdown-6fbf7800.js";import{J as qe}from"./json-editor-a4f02722.js";import{Q as pe}from"./QTooltip-8cb564a1.js";import{Q as ke}from"./QExpansionItem-f6a72392.js";import{W as Qe}from"./WidgetPage-41018feb.js";import{a as fe}from"./useDragDrop-e83aaadd.js";import"./_commonjsHelpers-11654ec2.js";import"./QSlideTransition-733669ae.js";const He=ae({name:"WidgetPopup",props:["widget"],emits:["onClose","onSave"],components:{WidgetPage:Qe},setup(e,{emit:v}){H.dev("DEBUG","WidgetPopup","setup()");const m=ve(),O=se(),F=[{label:m.t("top aligned"),value:"top"},{label:m.t("middle aligned"),value:"middle"},{label:m.t("bottom aligned"),value:"bottom"}],T=[{label:m.t("left aligned"),value:"left"},{label:m.t("center aligned"),value:"center"},{label:m.t("right aligned"),value:"right"},{label:m.t("fill full width"),value:"fill-width"}];let g={};Object.values(O.widgets).forEach(o=>{g[o.module]=g[o.module]||{label:o.module,widgets:[]},o._deleted!==!0&&g[o.module].widgets.push({...o,value:o.id,label:o.label?o.label+" "+(o.title?"("+o.title+")":""):o.title||""})}),g=Object.values(g);const r=V(g),f=V(null);me(()=>e.widget,o=>{H.dev("DEBUG","WidgetPopup","watch",o),f.value=o?oe({items:[],...o}):null});const n=q(()=>f.value.scaleToFitContents!==void 0?f.value.scaleToFitContents:!0),C=q(()=>f.value.alignmentVertical||"top"),s=q(()=>f.value.alignmentHorizontal||"center"),a=q(()=>f.value.allowFullscreen||!1),_=q(()=>f.value.items?f.value.items.map(o=>O.widgets[o]||{}):[]),$=(o,k)=>{H.dev("DEBUG","WidgetPopup","onFilter",o);let S=g;o&&(o=o.toLowerCase(),S=[],g.forEach(W=>{const j=[];W.widgets.forEach(L=>{(L.module&&L.module.toLowerCase().indexOf(o)!==-1||L.id&&L.id.toLowerCase().indexOf(o)!==-1||L.title&&L.title.toLowerCase().indexOf(o)!==-1||L.label&&L.label.toLowerCase().indexOf(o)!==-1)&&j.push(L)}),j.length>0&&S.push({label:W.label+" ("+j.length+")",widgets:j})})),k(()=>{r.value=S.sort((W,j)=>(W=W.label?W.label.toLowerCase():"",j=j.label?j.label.toLowerCase():"",W===j?0:W>j?1:-1))})},h=V(null);let D=!1;const J=o=>{H.dev("DEBUG","WidgetPopup","onChange",o),f.value[o.id]=o.value},ne=o=>{o&&D===!0&&w({id:h.value}),D=!1,h.value=null},le=()=>{f.value=null,v("onClose")},te=()=>{v("onSave",f.value),le()},y=V(),w=o=>{f.value.items.push(o.id),y.value.hidePopup()};return{ScaleExceptions:_e,AlignmentExceptions:We,alignmentHorizontal:T,alignmentVertical:F,inputValueAlignmentHorizontal:s,inputValueAlignmentVertical:C,inputScaleToFitContents:n,inputValueAllowFullscreen:a,onChange:J,onClose:ne,onCancel:le,onSave:te,onFilter:$,itemList:_,widgetListFiltered:r,selectedWidgetId:h,container:f,addWidgetElement:y,assignWidget:w,addWidget:()=>{D=!0,h.value=ue()},editWidget:o=>{h.value=o},deleteWidget:o=>{confirm(m.t("Really delete item?"))&&f.value.items.splice(f.value.items.indexOf(o),1)}}}}),Me={class:"text-h6"},Fe={class:"text-h7 primary q-ma-sm"},Ue={class:"row"},Ge={class:"col"},Ve={class:"col-1",style:{"text-align":"center","line-height":"56px"}},Re={class:"col-3",style:{"text-align":"center","line-height":"56px"}},Ne={key:0},Je={class:"row items-center"},Ye={class:"text-h7 primary q-ma-sm",style:{"margin-top":"16px"}},Ze={class:"row q-pb-xs"},Ke={class:"col"},Xe={class:"col"},xe={class:"col"},el={class:"col"};function ll(e,v,m,O,F,T){const g=Q("widget-page"),r=Q("icon"),f=Q("inputs");return c(),I("div",null,[l(g,{onOnClose:e.onClose,widgetId:e.selectedWidgetId},null,8,["onOnClose","widgetId"]),l($e,{"model-value":e.container!==null,persistent:""},{default:t(()=>[e.container?(c(),E(Ce,{key:0,class:"column",style:{width:"1200px","max-width":"90vw"}},{default:t(()=>[l(re,{class:"row items-center"},{default:t(()=>[i("div",Me,d(e.$t("Assign Widget to Box")),1),l(ye),l(M,{flat:"",round:"",color:"grey",icon:"close",onClick:e.onCancel},null,8,["onClick"])]),_:1}),l(N),l(re,{class:"col defaultPadding-2 q-pt-none scroll body"},{default:t(()=>[i("div",Fe,d(e.$t("Widget")),1),l(N,{style:{margin:"0 0 8px 0"}}),P(i("div",Ue,[i("div",Ge,[l(Ie,{onFilter:e.onFilter,ref:"addWidgetElement",label:e.$t("Assign Widget"),options:e.widgetListFiltered,"model-value":"","use-input":"","stack-label":"",style:{margin:"0 8px"}},{option:t(n=>[l(ke,{"expand-separator":"","header-class":"text-weight-bold",label:n.opt.label},{default:t(()=>[(c(!0),I(U,null,G(n.opt.widgets,C=>P((c(),E(A,{key:C.id,clickable:"",onClick:s=>e.assignWidget(C)},{default:t(()=>[l(p,null,{default:t(()=>[C.label?(c(),E(B,{key:0,class:"q-ml-md"},{default:t(()=>[b(d(C.label),1)]),_:2},1024)):(c(),E(B,{key:1,class:"q-ml-md"},{default:t(()=>[i("em",null,"("+d(e.$t("no title"))+")",1)]),_:1})),l(B,{class:"q-ml-md",caption:""},{default:t(()=>[b(d(C.id),1)]),_:2},1024)]),_:2},1024)]),_:2},1032,["onClick"])),[[De]])),128))]),_:2},1032,["label"])]),_:1},8,["onFilter","label","options"])]),i("div",Ve,d(e.$t("or")),1),i("div",Re,[l(M,{color:"primary",icon:"mdi-plus-circle",label:e.$t("Add Widget"),onClick:e.addWidget},null,8,["label","onClick"])])],512),[[z,e.itemList.length===0]]),l(K,null,{default:t(()=>[(c(!0),I(U,null,G(e.itemList,(n,C)=>(c(),E(A,{key:n.id+"-"+C,class:"list-group-item"},{default:t(()=>[n.icon?(c(),E(p,{key:0,avatar:""},{default:t(()=>[l(r,{color:"primary",name:n.icon},null,8,["name"])]),_:2},1024)):Y("",!0),l(p,null,{default:t(()=>[l(B,null,{default:t(()=>[b(d(n.label||n.title||e.$t("no title"))+" ",1),n._deleted?(c(),I("em",Ne,"[ "+d(e.$t("deleted"))+" ]",1)):Y("",!0)]),_:2},1024),l(B,{caption:""},{default:t(()=>[b("Widget ID: "+d(n.id)+", Module: "+d(n.module),1)]),_:2},1024)]),_:2},1024),l(p,{side:""},{default:t(()=>[i("div",Je,[n._deleted!==!0?(c(),E(M,{key:0,size:"sm",flat:"",round:"",onClick:s=>e.editWidget(n.id),icon:"mdi-pencil"},null,8,["onClick"])):Y("",!0),l(M,{size:"sm",flat:"",round:"",onClick:s=>e.deleteWidget(n.id),icon:"mdi-delete",color:"negative"},null,8,["onClick"])])]),_:2},1024)]),_:2},1024))),128))]),_:1}),i("div",Ye,d(e.$t("Options")),1),l(N,{style:{margin:"0 0 8px 0"}}),i("div",Ze,[i("div",Ke,[l(f,{icon:"mdi-resize",onOnChange:e.onChange,id:"allowFullscreen",label:"Allow fullscreen",type:"switch",value:e.inputValueAllowFullscreen},null,8,["onOnChange","value"])]),i("div",Xe,[P(l(f,{icon:"mdi-fit-to-page",onOnChange:e.onChange,id:"scaleToFitContents",label:"Scale contents to fit widget",type:"switch",value:e.inputScaleToFitContents},null,8,["onOnChange","value"]),[[z,e.itemList[0]&&e.ScaleExceptions.includes(e.itemList[0].module)===!1]])]),i("div",xe,[P(l(f,{icon:"mdi-arrow-split-horizontal",onOnSelect:e.onChange,id:"alignmentVertical",label:"Vertical alignment",type:"select",options:e.alignmentVertical,value:e.inputValueAlignmentVertical},null,8,["onOnSelect","options","value"]),[[z,e.itemList[0]&&e.AlignmentExceptions.includes(e.itemList[0].module)===!1]])]),i("div",el,[P(l(f,{icon:"mdi-arrow-split-vertical",onOnSelect:e.onChange,id:"alignmentHorizontal",label:"Horizontal alignment",type:"select",options:e.alignmentHorizontal,value:e.inputValueAlignmentHorizontal},null,8,["onOnSelect","options","value"]),[[z,e.itemList[0]&&e.AlignmentExceptions.includes(e.itemList[0].module)===!1]])])])]),_:1}),l(N),l(be,{align:"right"},{default:t(()=>[l(M,{flat:"",label:e.$t("Cancel"),color:"negative",onClick:e.onCancel},null,8,["label","onClick"]),l(M,{flat:"",label:e.$t("Apply"),color:"primary",onClick:e.onSave},null,8,["label","onClick"])]),_:1})]),_:1})):Y("",!0)]),_:1},8,["model-value"])])}var tl=de(He,[["render",ll]]);const nl=ae({name:"WidgetSection",props:["pageId","tabId","id","label","icon","fullscreen","widgetEdges","widgetConfig","items"],components:{WidgetPopup:tl},setup(e){H.dev("DEBUG","WidgetSection","setup()");const v=ve(),m=se(),O=[{id:"copy",icon:"mdi-content-copy",label:v.t("copy")},{id:"duplicate",icon:"mdi-content-duplicate",label:v.t("duplicate")}],F=q(()=>e.id!=="desktop"&&e.widgetConfig[e.id+"SameAs"]!=="specific-layout"),T=q(()=>[{label:v.t("wie Desktop"),value:"desktop"},{label:v.t("wie Smartphone"),value:"smartphone"},{label:v.t("eigenes Layout"),value:"specific-layout"}].filter(u=>u.value!==e.id));me(()=>e.fullscreen,u=>{H.dev("DEBUG","WidgetSection","watch",u),u===!0&&$.value.length===0&&J()});const g=u=>{H.dev("DEBUG","WidgetSection","onChange",u),m.setWidgetConfig({pageId:e.pageId,tabId:e.tabId,key:u.id,val:u.value})},r=V({}),f=(u,o,k,S,W)=>{H.dev("DEBUG","WidgetSection","onResized",u,o,k,S,W),r.value[u]={width:(100/(12/k)).toFixed(2),height:S}},n=V({}),C=(u,o)=>{n.value[".widgetOptions-move-"+u.id]=o},s={},a=u=>m.widgets[u]||{items:[]},_=u=>{u=u||[];const o=u.join("-");return s[o]?s[o]:(H.dev("DEBUG","WidgetSection","getWidgetsData",u),!u||u.length===0?v.t("No widgets assigned"):(s[o]=u.map(k=>{const S=a(k);S.items=S.items||[];const W=S.items.filter(j=>j.type==="divider").length;return S.module+(!S.label&&!S.title?"":" ("+(S.label||S.title)+(S.module!=="StateList"?"":", "+S.items.length+" "+v.t("items")+" "+v.t("apprx.")+" "+((S.hideTitle!==!0?56:0)+W+(S.items.length-W)*46)+"px "+v.t("in height"))+")")}).join(", "),s[o]))},$=V(oe(e.items)||[]);Te(()=>{});const h=u=>{m.setWidgets({pageId:e.pageId,tabId:e.tabId,key:"widgets"+ge(e.id),val:u})},D=V(),J=()=>{let u=0,o=0;for(const k of $.value){const S=k.y+k.h;S>o&&(o=S,u=k.x)}if($.value.push({x:u,y:o,w:4,h:4,i:ue()}),D.value&&D.value[D.value.length-1]){const k=D.value[D.value.length-1].$el,{top:S,height:W}=k.getBoundingClientRect();k.parentElement.parentElement.scrollTo(0,S+W+1e3)}h($.value)},ne=(u,o,k)=>{const W=m.layout.find(Z=>Z.id===k).tabs.find(Z=>Z.id===o),j=oe(W["widgets"+ge(e.id)]);u=oe(u);let L=0;j.forEach(Z=>{L=Z.x>=u.x&&Z.x+Z.w<=u.x+u.w?Math.max(L,Z.y+Z.h):L}),u.y=L,j.push(u),m.setWidgets({pageId:k,tabId:o,key:"widgets"+ge(e.id),val:j}),y(u,{confirmation:!1})},le=u=>{const o=u.id,k=oe($.value.find(W=>W.i===o));k.i=ue(),u.val==="copy"&&(k.items=k.items||[],k.items=k.items.map(W=>{const j=a(W),L=ue();return m.copyWidget({id:L,widget:j}),L}));let S=k.y+k.h;$.value.forEach(W=>{S=W.x>=k.x&&W.x+W.w<=k.x+k.w?Math.max(S,W.y+W.h):S}),k.y=S,$.value.push(k),h($.value)},te=u=>m.hasWidget({widgetId:u.items[0]}),y=(u,o={},k)=>{const S=u.i;if(o.verifyAssignedMultiple&&m.hasWidget({widgetId:u.items[0]})===1)k.stopPropagation();else if(o.verifyAssignedMultiple)return;if(o.confirmation=o.confirmation===!1?!0:confirm(v.t(typeof o.confirmation=="string"?o.confirmation:"Really delete item")+"?"),o.confirmation){const W=$.value.findIndex(L=>L.i===S),j=$.value[W].items;$.value.splice(W,1),h($.value),o.deleteAssignedWidget&&j.forEach(L=>{m.removeWidget({widget:{id:L}})})}},w=V(null),X=u=>{H.dev("DEBUG","WidgetSection","saveWidgetAssignments",u),$.value.splice($.value.findIndex(o=>o.i===w.value.i),1,{...w.value,...u}),w.value=null,h($.value)},he=u=>{for(const o in n.value)n.value[o]&&n.value[o].hide();n.value[u]&&n.value[u].show()};return Ee(()=>{D.value&&D.value.forEach(u=>{f(u.$props.i,u.$props.h,u.$props.w,u.$props.h*u.rowHeight+(u.$props.h-1)*u.margin[0],null)})}),{...fe($),gridItemElements:D,expanded:e.id==="desktop",copyMenu:O,onChange:g,onResized:f,popupWidgetOrder:V(!1),pages:m.layout.filter(u=>!u.type||u.type==="page"),widgets:$,widgetSizes:r,setWidgets:h,getWidget:a,getWidgetsData:_,setRef:C,widgetOptions:n,showPageMenu:he,selectedWidget:w,hasWidget:te,addWidget:J,copyWidget:le,moveWidget:ne,deleteWidget:y,saveWidgetAssignments:X,disabled:F,options:T}}}),ol={style:{padding:"0 16px 8px 16px","min-height":"64px"},class:"row"},il={class:"grid-item tooltip-widget"},al={class:"row justify-between"},sl={class:"row items-center",style:{"padding-left":"8px"}},dl={class:"row"},ul={style:{padding:"0 8px 8px 8px","min-height":"64px"},class:"row"},rl={style:{margin:"auto 0"}},cl={class:"text-h6 row items-center"},gl={class:"grid-layout-container",style:{height:"800px","overflow-y":"scroll"}},pl={class:"row justify-between"},vl={class:"row items-center",style:{"padding-left":"8px"}},ml=b("\xA0 "),fl={key:0},hl={class:"row"},yl={class:"row q-pa-sm tooltip-widget",style:{overflow:"hidden"}};function bl(e,v,m,O,F,T){const g=Q("widget-popup"),r=Q("icon"),f=Q("inputs"),n=Q("grid-item"),C=Q("grid-layout");return c(),I("div",null,[l(g,{onOnClose:v[0]||(v[0]=s=>e.selectedWidget=null),onOnSave:e.saveWidgetAssignments,widget:e.selectedWidget},null,8,["onOnSave","widget"]),l(ke,{"model-value":e.disabled!==!0?e.expanded:!1,class:"full-width paper",disable:e.disabled},{header:t(()=>[i("div",{class:"row full-width",onClick:v[2]||(v[2]=s=>e.expanded=!e.expanded)},[l(p,{avatar:""},{default:t(()=>[l(r,{name:e.icon},null,8,["name"])]),_:1}),l(p,{style:{height:"40px"}},{default:t(()=>[b(d(e.label),1)]),_:1}),e.id!=="desktop"?(c(),E(p,{key:0,side:"",class:"notDisabled"},{default:t(()=>[l(f,{onOnSelect:e.onChange,type:"select",options:e.options,dense:"",label:e.$t("Use same layout as"),id:e.id+"SameAs",onClick:v[1]||(v[1]=x(()=>{},["prevent"])),value:e.widgetConfig[e.id+"SameAs"]||"desktop",style:{width:"150px"}},null,8,["onOnSelect","options","label","id","value"])]),_:1})):Y("",!0)])]),default:t(()=>[i("div",null,[P(i("div",null,[P(i("div",ol,[l(M,{color:"secondary",icon:"mdi-plus-circle",label:e.$t("Add Widget"),onClick:e.addWidget,style:{margin:"auto 0"}},null,8,["label","onClick"])],512),[[z,e.widgets.length===0]]),l(N),P(i("div",il,[i("div",al,[i("div",sl,d(e.$t("Fullscreen")),1),i("div",dl,[l(M,{size:"sm",flat:"",round:"",icon:"mdi-pencil",onClick:v[3]||(v[3]=s=>e.selectedWidget=e.widgets[0])})])])],512),[[z,e.widgets[0]!==void 0]])],512),[[z,e.fullscreen===!0]]),P(i("div",null,[i("div",ul,[l(M,{color:"secondary",icon:"mdi-plus-circle",label:e.$t("Add Widget"),onClick:e.addWidget,style:{margin:"auto 0"}},null,8,["label","onClick"]),l(f,{dense:"",type:"switch",inline:"",label:e.$t("Height of all widgets equal to page height (no scrollbars)"),id:e.id+"FitPageHeight",onOnChange:e.onChange,value:e.widgetConfig[e.id+"FitPageHeight"]||!1,style:{margin:"auto 0 auto 8px"}},null,8,["label","id","onOnChange","value"]),P(l(f,{set:e.rowHeight=parseInt(e.widgetConfig[e.id+"FitPageHeight"]!==!0&&e.widgetConfig[e.id+"WidgetHeight"])||50,dense:"",type:"number",min:10,label:e.$t("Widget height")+" ("+e.$t("in pixels")+")",id:e.id+"WidgetHeight",onOnChange:e.onChange,value:e.widgetConfig[e.id+"WidgetHeight"]||50,style:{margin:"auto 0 auto 4px"}},null,8,["set","label","id","onOnChange","value"]),[[z,e.widgetConfig[e.id+"FitPageHeight"]!==!0]]),l(f,{set:e.gapSize=parseInt(e.widgetConfig[e.id+"GapSize"]||5),dense:"",type:"number",min:0,label:e.$t("Widget gaps")+" ("+e.$t("in pixels")+")",id:e.id+"GapSize",onOnChange:e.onChange,value:e.widgetConfig[e.id+"GapSize"]||5,style:{margin:"auto 0 auto 4px"}},null,8,["set","label","id","onOnChange","value"]),i("div",rl,[l(f,{type:"button",color:"primary",icon:"mdi-sort-numeric-variant",label:"Change Widget Responsive Order",onOnClick:v[4]||(v[4]=s=>e.popupWidgetOrder=!0),size:"md"})])]),l(N),l($e,{modelValue:e.popupWidgetOrder,"onUpdate:modelValue":v[7]||(v[7]=s=>e.popupWidgetOrder=s)},{default:t(()=>[l(Ce,{class:"column full-height",style:{width:"1400px","max-width":"40vw"}},{default:t(()=>[l(re,{class:"row items-center"},{default:t(()=>[i("div",cl,d(e.$t("Change Widget Responsive Order")),1),l(ye),l(M,{flat:"",round:"",color:"grey",icon:"close",onClick:v[5]||(v[5]=s=>e.popupWidgetOrder=!1)})]),_:1}),l(N),l(re,{class:"col scroll body"},{default:t(()=>[l(K,{ref:"elDragDrop"},{default:t(()=>[(c(!0),I(U,null,G(e.widgets,(s,a)=>(c(),E(A,{key:"grid-item-"+s.i,class:"paper","data-id":s.i,set:s=e.getWidget(s.items[0])},{default:t(()=>[l(p,{avatar:"",center:""},{default:t(()=>[l(r,{size:"sm",name:"mdi-drag-horizontal",class:"dragndrop"})]),_:1}),l(p,null,{default:t(()=>[s.title?(c(),E(B,{key:0},{default:t(()=>[b(d(s.title),1)]),_:2},1024)):(c(),E(B,{key:1},{default:t(()=>[i("em",null,d(e.$t("No Title")),1)]),_:1})),l(B,{caption:""},{default:t(()=>[b(d(e.$t("Module"))+" "+d(s.module),1)]),_:2},1024)]),_:2},1024),l(p,{side:""},{default:t(()=>[b(d(a),1)]),_:2},1024)]),_:2},1032,["data-id","set"]))),128))]),_:1},512)]),_:1}),l(N),l(be,{align:"right"},{default:t(()=>[l(M,{flat:"",label:e.$t("Close"),color:"primary",onClick:v[6]||(v[6]=s=>e.popupWidgetOrder=!1)},null,8,["label"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),i("div",gl,[l(C,{onLayoutUpdated:e.setWidgets,layout:e.widgets,"onUpdate:layout":v[8]||(v[8]=s=>e.widgets=s),"row-height":e.rowHeight,margin:[e.gapSize,e.gapSize],"use-css-transforms":!0,responsive:!1,preventCollision:!1,style:{"min-height":"50px"}},{default:t(()=>[(c(!0),I(U,null,G(e.widgets,(s,a)=>(c(),E(n,{key:"grid-item-"+s.i,ref_for:!0,ref:"gridItemElements",x:s.x,y:s.y,w:s.w,h:s.h,i:s.i,class:R(["grid-item tooltip-widget",{"rounded-borders":e.widgetEdges!==!0}]),onResized:e.onResized},{default:t(()=>[l(pe,{target:".tooltip-widget"},{default:t(()=>[b(d(e.getWidgetsData(s.items)),1)]),_:2},1024),i("div",pl,[i("div",vl,[i("span",{class:R("sort-"+a)},"[ "+d(a)+" ]",3),ml,l(pe,{target:".sort-"+a},{default:t(()=>[b(d(e.$t("Responsive Position"))+": "+d(a),1)]),_:2},1032,["target"]),b(" "+d(e.$t("Position")+": "+s.x+"x * "+s.y+"y")+" ",1),e.widgetSizes[s.i]?(c(),I("span",fl,"\xA0- "+d(e.$t("Size")+": "+s.w+"w ("+e.widgetSizes[s.i].width+"%) * "+s.h+"h ("+e.widgetSizes[s.i].height+"px)"),1)):Y("",!0)]),i("div",hl,[l(f,{class:"q-ma-none",type:"button",round:"",icon:"mdi-pencil",tooltip:e.$t("edit"),onClick:x(_=>e.selectedWidget=s,["stop"])},null,8,["tooltip","onClick"]),l(f,{class:"q-ma-none",type:"button",round:"",icon:"mdi-content-copy",tooltip:e.$t("copy"),items:e.copyMenu,onOnSelect:e.copyWidget,id:s.i,denseMenu:""},null,8,["tooltip","items","onOnSelect","id"]),l(f,{class:R(["widgetOptions-"+s.i,"q-ma-none"]),type:"button",round:"",icon:"mdi-file-move-outline",tooltip:e.$t("move"),id:s.i},null,8,["class","tooltip","id"]),l(ie,{target:".widgetOptions-"+s.i,anchor:"bottom left",self:"top left","auto-close":""},{default:t(()=>[(c(!0),I(U,null,G(e.pages,_=>(c(),E(A,{key:_.id,class:R("widgetOptions-move-"+_.id),onMouseenter:$=>e.showPageMenu(".widgetOptions-move-"+_.id)},{default:t(()=>[l(p,{avatar:""},{default:t(()=>[l(r,{size:"xs",name:_.icon},null,8,["name"])]),_:2},1024),l(p,null,{default:t(()=>[b(d(_.title),1)]),_:2},1024),l(p,{side:""},{default:t(()=>[l(r,{name:"mdi-chevron-right"})]),_:1}),l(ie,{ref_for:!0,ref:$=>e.setRef(_,$),anchor:"top end",self:"top start","auto-close":""},{default:t(()=>[l(K,null,{default:t(()=>[(c(!0),I(U,null,G(_.tabs,$=>(c(),E(A,{key:$.id,clickable:"",onClick:h=>e.moveWidget(s,$.id,_.id)},{default:t(()=>[l(p,{avatar:""},{default:t(()=>[l(r,{size:"xs",name:$.icon},null,8,["name"])]),_:2},1024),l(p,null,{default:t(()=>[b(d($.title),1)]),_:2},1024),l(p,{side:""})]),_:2},1032,["onClick"]))),128))]),_:2},1024)]),_:2},1536)]),_:2},1032,["class","onMouseenter"]))),128))]),_:2},1032,["target"]),l(f,{class:R(["deleteOptions-"+s.i,"q-ma-none"]),type:"button",round:"",icon:"mdi-delete",tooltip:e.$t("delete"),color:"negative",onClick:_=>e.deleteWidget(s,{verifyAssignedMultiple:!0},_)},null,8,["class","tooltip","onClick"]),l(ie,{target:".deleteOptions-"+s.i,anchor:"bottom left",self:"top left","auto-close":""},{default:t(()=>[l(A,{clickable:"",onClick:x(_=>e.deleteWidget(s,{confirmation:"Delete Box only"}),["stop"])},{default:t(()=>[l(p,{avatar:""},{default:t(()=>[l(r,{size:"xs",name:"mdi-delete",color:"negative"})]),_:1}),l(p,null,{default:t(()=>[b(d(e.$t("Delete Box only")),1)]),_:1})]),_:2},1032,["onClick"]),l(A,{clickable:"",onClick:x(_=>e.deleteWidget(s,{confirmation:"Delete Box and assigned Widget",deleteAssignedWidget:!0}),["stop"])},{default:t(()=>[l(p,{avatar:""},{default:t(()=>[l(r,{size:"xs",name:"mdi-delete-sweep",color:"negative"})]),_:1}),l(p,null,{default:t(()=>[b(d(e.$t("Delete Box and assigned Widget")),1)]),_:1})]),_:2},1032,["onClick"])]),_:2},1032,["target"])])]),i("div",yl,[b(d(e.getWidgetsData(s.items))+" ",1),l(pe,null,{default:t(()=>[b(d(e.getWidgetsData(s.items)),1)]),_:2},1024)])]),_:2},1032,["x","y","w","h","i","class","onResized"]))),128)),i("div",{class:"grid-spacer",style:ee({bottom:-3*e.rowHeight+"px",height:3*e.rowHeight+"px"})},null,4)]),_:1},8,["onLayoutUpdated","layout","row-height","margin"])])],512),[[z,e.fullscreen!==!0]])])]),_:1},8,["model-value","disable"])])}var Cl=de(nl,[["render",bl]]);const $l=ae({name:"TabSection",props:["pageId","tabId"],components:{WidgetSection:Cl},setup(e){H.dev("DEBUG","TabSection","setup()");const v=se(),m=T=>{H.dev("DEBUG","TabSection","onChange",T);let g=T.value;try{g=g&&T.json!==void 0&&g.indexOf("{")>-1&&g.indexOf("}")>-1?JSON.parse(g):g}catch(r){console.warn(T.value,r)}v.editTab({pageId:e.pageId,tabId:e.tabId,key:T.id,val:g})},O=q(()=>(v.layout.find(r=>r.id===e.pageId)||{}).tabs.find(r=>r.id===e.tabId)||{}),F=q(()=>O.value.title?typeof O.value.title=="string"?O.value.title:O.value.title.default||Object.values(O.value.title)[0]:"");return{onChange:m,tab:O,tabTitle:F}}}),wl={style:{padding:"0 8px"}},kl={class:"text-h6 primary q-ma-sm"},Sl={class:"row"},Ol={class:"col"},_l={class:"col"},Wl={class:"row"},Il={class:"col"},Dl={class:"col"},Tl={class:"row"},El={class:"col"},Pl={class:"col"},zl={class:"row"},Ll={class:"col-2"},Bl={class:"col"},jl={class:"text-h6 primary q-ma-sm",style:{"margin-top":"24px"}};function Al(e,v,m,O,F,T){const g=Q("inputs"),r=Q("widget-section");return c(),I("div",wl,[i("div",kl,d(e.$t("Tab"))+": "+d(e.tabTitle)+" ("+d(e.$t("ID")+": "+e.tab.id)+")",1),i("div",Sl,[i("div",Ol,[l(g,{json:"",onOnChange:e.onChange,id:"icon",label:e.$t("Tab")+" "+e.$t("Icon"),value:e.tab.icon||"",icon:e.tab.icon},null,8,["onOnChange","label","value","icon"])]),i("div",_l,[l(g,{json:"",onOnChange:e.onChange,id:"title",label:e.$t("Tab")+" "+e.$t("Title"),value:e.tab.title||""},null,8,["onOnChange","label","value"])])]),i("div",Wl,[i("div",Il,[l(g,{json:"",onOnChange:e.onChange,id:"iconStyle",label:"config#Devices#iconStyle#label",info:"config#Devices#iconStyle#info",value:e.tab.iconStyle},null,8,["onOnChange","value"])]),i("div",Dl,[l(g,{json:"",onOnChange:e.onChange,id:"bodyStyle",label:"config#Devices#bodyStyle#label",info:"config#Devices#bodyStyle#info",value:e.tab.bodyStyle},null,8,["onOnChange","value"])])]),i("div",Tl,[i("div",El,[l(g,{json:"",onOnChange:e.onChange,id:"iconSelectedStyle",label:"config#Layout#iconSelectedStyle#label",info:"config#Layout#iconSelectedStyle#info",value:e.tab.iconSelectedStyle},null,8,["onOnChange","value"])]),i("div",Pl,[l(g,{json:"",onOnChange:e.onChange,id:"bodySelectedStyle",label:"config#Layout#bodySelectedStyle#label",info:"config#Layout#bodySelectedStyle#info",value:e.tab.bodySelectedStyle},null,8,["onOnChange","value"])])]),i("div",zl,[i("div",Ll,[l(g,{type:"switch",inline:"",label:e.$t("Tab")+" "+e.$t("Fullscreen"),id:"fullscreen",onOnChange:e.onChange,value:e.tab.fullscreen||!1,style:{margin:"auto 0 auto 16px"}},null,8,["label","onOnChange","value"])]),i("div",Bl,[l(g,{type:"switch",inline:"",label:e.$t("Widgets edges (round or angled)"),id:"widgetEdges",onOnChange:e.onChange,value:e.tab.widgetEdges||!1,style:{margin:"auto 0 auto 16px"}},null,8,["label","onOnChange","value"])])]),i("div",jl,d(e.$t("Widgets of tab"))+": "+d(e.tabTitle),1),l(r,{pageId:e.pageId,tabId:e.tabId,id:"desktop",label:"Desktop",icon:"mdi-monitor",fullscreen:e.tab.fullscreen||!1,widgetEdges:e.tab.widgetEdges||!1,widgetConfig:e.tab.widgetConfig||{},items:e.tab.widgetsDesktop},null,8,["pageId","tabId","fullscreen","widgetEdges","widgetConfig","items"]),l(r,{pageId:e.pageId,tabId:e.tabId,id:"smartphone",label:"Smartphone",icon:"mdi-cellphone",fullscreen:e.tab.fullscreen||!1,widgetEdges:e.tab.widgetEdges||!1,widgetConfig:e.tab.widgetConfig||{},items:e.tab.widgetsSmartphone},null,8,["pageId","tabId","fullscreen","widgetEdges","widgetConfig","items"])])}var ql=de($l,[["render",Al]]);const Ql=ae({name:"DrawerSection",props:["pageId"],components:{TabSection:ql},setup(e,{emit:v}){var te;H.dev("DEBUG","DrawerSection","setup()");const m=we(),O=se(),F=q(()=>{const y=[];return O.getPagesWithoutDeletions.forEach(w=>{w.id!==e.pageId&&y.push({id:w.id,label:w.title,...w})}),y}),T=q(()=>O.layout.find(y=>y.id===e.pageId)||{}),g=q(()=>typeof T.value.title=="string"?T.value.title:T.value.title&&T.value.title.default||Object.values(T.value.title)[0]),r=q({get(){return(T.value.tabs||[]).map(w=>(w._hasIconBinding=typeof w.icon=="object",w._hasTitleBinding=typeof w.title=="object",w))},set(y){O.setTabs({pageId:e.pageId,tabs:y})}}),f=m.getSelectedPage.id===T.value.id&&m.getSelectedTab||((te=T.value.tabs)==null?void 0:te[0])||{},n=V(f.id||null),C=V({}),s=(y,w)=>{C.value[".tabOptions-move-"+y.id]=w};let a=null;me(()=>e.pageId,()=>{var y,w;H.dev("DEBUG","DrawerSection","watch",e.pageId),n.value=a||((w=(y=r.value)==null?void 0:y[0])==null?void 0:w.id)||null,a=null});const _=()=>{O.addTab({pageId:e.pageId}),n.value=r.value[r.value.length-1].id},$=(y,w=!1)=>{O.addTab({pageId:e.pageId,tabId:y,copyWidgets:w}),n.value=r.value[r.value.length-1].id},h=(y,w)=>{O.moveTab({pageId:e.pageId,tabId:y,destinationPageId:w}),n.value=y,a=y,v("onSelectPage",O.layout.find(X=>X.id===w)||{})},D=y=>{if(O.deleteTab({pageId:e.pageId,tabId:y}),n.value===y){const w=r.value.find(X=>X._deleted!==!0);n.value=w?w.id:null}},J=y=>{O.restoreTab({pageId:e.pageId,tabId:y}),n.value=y},ne=y=>{H.dev("DEBUG","DrawerSection","onChange",y);let w=y.value;try{w=w&&y.json!==void 0&&y.value.indexOf("{")>-1&&y.value.indexOf("}")>-1?JSON.parse(y.value):y.value}catch(X){console.warn(y.value,X)}O.editDrawerItem({itemId:e.pageId,key:y.id,val:w})},le=y=>O.changeDrawerItemId(e.pageId,y);return{...fe(r,y=>r.value=y,{direction:"vertical"}),onChange:ne,setRef:s,onChangeId:le,pages:F,page:T,pageTitle:g,tabs:r,tabOptions:C,selectedTab:n,addTab:_,copyTab:$,moveTab:h,deleteTab:D,restoreTab:J}}}),Hl={class:"text-h6 primary q-ma-sm"},Ml={class:"row"},Fl={class:"col"},Ul={class:"col"},Gl={class:"row"},Vl={class:"col"},Rl={class:"col"},Nl={class:"row"},Jl={class:"col"},Yl={class:"col"},Zl={key:0},Kl={class:"text-h6 primary q-ma-sm"},Xl={class:"q-ma-sm row"},xl={ref:"elDragDrop",class:"row"},et={key:0},lt={key:1},tt={key:2},nt={key:3};function ot(e,v,m,O,F,T){const g=Q("inputs"),r=Q("icon"),f=Q("tab-section");return c(),I("div",{key:e.page.id},[i("div",Hl,[b(d(e.$t("Page"))+": "+d(e.pageTitle)+" ",1),i("span",null,"(ID: "+d(e.page.id)+")",1)]),i("div",Ml,[i("div",Fl,[l(g,{json:"",onOnChange:e.onChange,id:"icon",label:e.$t("Icon"),value:e.page.icon||"",icon:e.page.icon},null,8,["onOnChange","label","value","icon"])]),i("div",Ul,[l(g,{json:"",onOnChange:e.onChange,id:"title",label:e.$t("Title"),value:e.page.title||""},null,8,["onOnChange","label","value"])])]),i("div",Gl,[i("div",Vl,[l(g,{json:"",onOnChange:e.onChange,id:"iconStyle",label:"config#Devices#iconStyle#label",info:"config#Devices#iconStyle#info",value:e.page.iconStyle},null,8,["onOnChange","value"])]),i("div",Rl,[l(g,{json:"",onOnChange:e.onChange,id:"bodyStyle",label:"config#Devices#bodyStyle#label",info:"config#Devices#bodyStyle#info",value:e.page.bodyStyle},null,8,["onOnChange","value"])])]),i("div",Nl,[i("div",Jl,[l(g,{json:"",onOnChange:e.onChange,id:"iconSelectedStyle",label:"config#Layout#iconSelectedStyle#label",info:"config#Layout#iconSelectedStyle#info",value:e.page.iconSelectedStyle},null,8,["onOnChange","value"])]),i("div",Yl,[l(g,{json:"",onOnChange:e.onChange,id:"bodySelectedStyle",label:"config#Layout#bodySelectedStyle#label",info:"config#Layout#bodySelectedStyle#info",value:e.page.bodySelectedStyle},null,8,["onOnChange","value"])])]),!e.page.type||e.page.type==="page"?(c(),I("div",Zl,[i("div",Kl,d(e.$t("Tabs of page"))+": "+d(e.pageTitle),1),i("div",Xl,[l(M,{color:"secondary",icon:"mdi-plus-circle",label:e.$t("Add Tab"),onClick:e.addTab},null,8,["label","onClick"]),l(g,{type:"switch",inline:"",label:e.$t("Do not show Tab Labels (only Icons)"),id:"hideLabels",onOnChange:e.onChange,value:e.page.hideLabels||!1,style:{margin:"auto 0 auto 16px"}},null,8,["label","onOnChange","value"])]),l(ze,{modelValue:e.selectedTab,"onUpdate:modelValue":v[1]||(v[1]=n=>e.selectedTab=n),"inline-label":"","outside-arrows":"","mobile-arrows":"",class:"bg-primary text-white full-width",align:"left"},{default:t(()=>[i("div",xl,[(c(!0),I(U,null,G(e.tabs,n=>(c(),E(Pe,{key:n.id,name:n.id,style:ee({backgroundColor:n.backgroundColor}),class:R({"q-px-xs":!0,rowDeleted:n._deleted===!0}),disable:n._deleted===!0},{default:t(()=>[l(r,{size:"sm",name:"mdi-drag-vertical",class:"dragndrop",color:n.color},null,8,["color"]),n._hasIconBinding?(c(),I("div",et,[l(ce,{flat:"",dense:""},{label:t(()=>[l(r,{size:"xs",name:n.icon.default||Object.values(n.icon)[0],class:"tabIcon q-mr-xs",color:n.iconColor||n.color},null,8,["name","color"])]),default:t(()=>[l(K,null,{default:t(()=>[(c(!0),I(U,null,G(n.icon,(C,s)=>(c(),E(A,{key:s},{default:t(()=>[l(p,{avatar:""},{default:t(()=>[l(r,{size:"xs",name:C,class:"tabIcon q-mr-xs",color:n.iconColor||n.color},null,8,["name","color"])]),_:2},1024),l(p,null,{default:t(()=>[l(B,null,{default:t(()=>[b(d(C),1)]),_:2},1024),l(B,{caption:""},{default:t(()=>[b(d(s),1)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:2},1024)]),_:2},1024)])):(c(),I("div",lt,[l(r,{size:"xs",name:n.icon,class:"tabIcon q-mr-xs",color:n.iconColor||n.color},null,8,["name","color"])])),n._hasTitleBinding?(c(),I("div",tt,[l(ce,{flat:"",dense:"",label:n.title.default||Object.values(n.title)[0]},{default:t(()=>[l(K,null,{default:t(()=>[(c(!0),I(U,null,G(n.title,(C,s)=>(c(),E(A,{key:s},{default:t(()=>[l(p,null,{default:t(()=>[l(B,null,{default:t(()=>[b(d(C),1)]),_:2},1024),l(B,{caption:""},{default:t(()=>[b(d(s),1)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:2},1024)]),_:2},1032,["label"])])):(c(),I("div",nt,[P(i("div",{class:"q-tab__label",style:ee({color:n.color})},d(n.title),5),[[z,e.page.hideLabels!==!0]])])),i("div",{class:"row items-center no-wrap",style:ee([{"margin-left":"16px"},{color:n.color}])},[l(N,{vertical:"",class:"q-ma-xs"}),P(l(g,{round:"",type:"button",icon:"mdi-restore",tooltip:e.$t("restore"),color:"positive",onClick:C=>e.restoreTab(n.id)},null,8,["tooltip","onClick"]),[[z,n._deleted===!0]]),P(l(M,{class:R("tabOptions-"+n.id),dense:"",flat:"",round:"",color:"white",icon:"mdi-dots-vertical",onClick:v[0]||(v[0]=x(()=>{},["stop"]))},null,8,["class"]),[[z,n._deleted!==!0]]),l(ie,{target:".tabOptions-"+n.id,anchor:"bottom left",self:"top left","auto-close":""},{default:t(()=>[P(l(A,{clickable:"",onClick:C=>e.copyTab(n.id,!0)},{default:t(()=>[l(p,{avatar:""},{default:t(()=>[l(r,{size:"xs",name:"mdi-content-copy"})]),_:1}),l(p,null,{default:t(()=>[b(d(e.$t("copy")),1)]),_:1})]),_:2},1032,["onClick"]),[[z,n._deleted!==!0]]),P(l(A,{clickable:"",onClick:C=>e.copyTab(n.id)},{default:t(()=>[l(p,{avatar:""},{default:t(()=>[l(r,{size:"xs",name:"mdi-content-duplicate"})]),_:1}),l(p,null,{default:t(()=>[b(d(e.$t("duplicate")),1)]),_:1})]),_:2},1032,["onClick"]),[[z,n._deleted!==!0]]),P(l(A,{class:R("tabOptions-move-"+n.id),onMouseover:C=>e.tabOptions[".tabOptions-move-"+n.id].show(),clickable:""},{default:t(()=>[l(p,{avatar:""},{default:t(()=>[l(r,{size:"xs",name:"mdi-folder-move-outline"})]),_:1}),l(p,null,{default:t(()=>[b(d(e.$t("move")),1)]),_:1}),l(p,{side:""},{default:t(()=>[l(r,{name:"mdi-chevron-right"})]),_:1}),l(ie,{ref_for:!0,ref:C=>e.setRef(n,C),anchor:"top end",self:"top start","auto-close":""},{default:t(()=>[l(K,null,{default:t(()=>[(c(!0),I(U,null,G(e.pages,C=>(c(),E(A,{key:C.id,clickable:"",onClick:s=>e.moveTab(n.id,C.id)},{default:t(()=>[l(p,{avatar:""},{default:t(()=>[l(r,{size:"xs",name:C.icon},null,8,["name"])]),_:2},1024),l(p,null,{default:t(()=>[b(d(C.title),1)]),_:2},1024),l(p,{side:""})]),_:2},1032,["onClick"]))),128))]),_:2},1024)]),_:2},1536)]),_:2},1032,["class","onMouseover"]),[[z,n._deleted!==!0&&e.pages.length>0]]),l(A,{clickable:"",style:{color:"#fff",background:"var(--q-negative)"},onClick:C=>e.deleteTab(n.id)},{default:t(()=>[l(p,{avatar:""},{default:t(()=>[l(r,{size:"xs",name:"mdi-delete"})]),_:1}),l(p,null,{default:t(()=>[b(d(e.$t("delete")),1)]),_:1})]),_:2},1032,["onClick"])]),_:2},1032,["target"])],4)]),_:2},1032,["name","style","class","disable"]))),128))],512)]),_:1},8,["modelValue"]),l(Be,{modelValue:e.selectedTab,"onUpdate:modelValue":v[2]||(v[2]=n=>e.selectedTab=n),animated:"","keep-alive":"",class:"border"},{default:t(()=>[(c(!0),I(U,null,G(e.tabs,n=>(c(),E(Le,{key:n.id,name:n.id,style:{padding:"16px 0"},class:"body"},{default:t(()=>[l(f,{pageId:e.page.id,tabId:n.id},null,8,["pageId","tabId"])]),_:2},1032,["name"]))),128))]),_:1},8,["modelValue"])])):Y("",!0)])}var it=de(Ql,[["render",ot]]);const at=ae({name:"LayoutsPage",components:{DrawerSection:it,JsonEditor:qe},setup(){H.dev("DEBUG","LayoutsPage","setup()");const e=ve(),v=we(),m=se(),O=[{id:"copy",icon:"mdi-content-copy",label:e.t("copy")},{id:"duplicate",icon:"mdi-content-duplicate",label:e.t("duplicate")}],F=h=>m.set({["settings."+h.id]:h.value}),T=h=>{if(h._error){m.addError(h.id,h._error);return}m.removeError(h.id),h.value&&m.set({tmpJsonEditor:{key:h.id,json:JSON.parse(h.value)}})},g=q({get(){return(m.getLayout||[]).map(D=>(D._hasIconBinding=typeof D.icon=="object",D._hasTitleBinding=typeof D.title=="object",D))},set(h){m.setLayout(h)}}),r=V(m.selectedPage?m.selectedPage:m.getLayout.find(h=>h.type==="page"&&h._deleted!==!0)),f=h=>{r.value=h},n=()=>m.addDrawerItem({type:"divider"}),C=()=>m.addDrawerItem({type:"header",title:e.t("New Header")}),s=()=>{m.addDrawerItem({type:"page",icon:"mdi-file",title:e.t("New Page"),tabs:[]}),r.value=g.value[g.value.length-1],m.addTab({pageId:r.value.id})},a=h=>{const D=h.id;m.copyDrawerItem({itemId:D,copyWidgets:h.val==="copy"});const J=g.value[g.value.length-1];J.type==="page"&&(r.value=J)},_=h=>{m.deleteDrawerItem({itemId:h}),r.value.id===h&&(r.value=g.value.find(D=>D.type==="page"&&D._deleted!==!0))},$=h=>{m.restoreDrawerItem({itemId:h});const D=g.value.find(J=>J.id===h);D.type==="page"&&(r.value=D)};return{...fe(g,h=>g.value=h),copyMenu:O,json:q(()=>m.layout),settings:q(()=>m.settings),proWarning:q(()=>!je.isPro()&&g.value.filter(h=>h.type==="page").length>1),pageHeight:q(()=>v.pageHeight),pagesWithoutDeletionsCount:q(()=>m.getPagesWithoutDeletions.length),onChangeSettings:F,onJsonEditor:T,onSelectPage:f,selectedPage:r,pages:g,addDivider:n,addHeader:C,addPage:s,copyItem:a,deleteItem:_,restoreItem:$}}}),st={class:"full-height LayoutsPage"},dt={class:"row no-wrap"},ut={class:"row",style:{"margin-bottom":"54px"}},rt={class:"col-3"},ct={class:"text-h6 primary q-ma-sm"},gt={key:0},pt={key:1},vt={key:1},mt={key:2},ft={class:"row items-center"},ht={class:"col-9"};function yt(e,v,m,O,F,T){const g=Q("alert"),r=Q("icon"),f=Q("inputs"),n=Q("paper"),C=Q("drawer-section"),s=Q("json-editor");return c(),I("div",st,[i("div",dt,[l(Oe,{class:"paper",style:{"min-height":"56px"}},{default:t(()=>[l(Se,{shrink:""},{default:t(()=>[b(d(e.$t("Layout")),1)]),_:1})]),_:1})]),P(i("div",ut,[i("div",rt,[l(n,{class:"q-pa-sm"},{default:t(()=>[i("div",ct,d(e.$t("Drawer")+" / "+e.$t("Pages")),1),l(Ae,null,{default:t(()=>[l(M,{color:"primary",icon:"mdi-plus-circle",label:e.$t("Add Page"),onClick:e.addPage},null,8,["label","onClick"]),l(M,{color:"secondary",icon:"mdi-plus-circle",label:e.$t("Add Header"),onClick:e.addHeader},null,8,["label","onClick"]),l(M,{color:"secondary",icon:"mdi-plus-circle",label:e.$t("Add Divider"),onClick:e.addDivider},null,8,["label","onClick"])]),_:1}),P(l(g,{style:{margin:"16px 0 0 0"}},{default:t(()=>[b(d(e.$t("Only a single page is allowed without Pro. A single page may hold infinite tabs though."))+".",1)]),_:1},512),[[z,e.proWarning]]),l(N,{style:{margin:"16px 0"}}),l(K,{ref:"elDragDrop"},{default:t(()=>[(c(!0),I(U,null,G(e.pages,a=>(c(),E(A,{key:a.id,clickable:!a.type||a.type==="page"||a.type==="header",onClick:_=>e.onSelectPage(a),class:R({rowDeleted:a._deleted===!0,selected:e.selectedPage.id===a.id}),disable:a._deleted===!0},{default:t(()=>[l(p,{avatar:"",center:""},{default:t(()=>[l(r,{size:"sm",name:"mdi-drag-horizontal",class:"dragndrop"})]),_:1}),!a.type||a.type==="page"?(c(),E(p,{key:0,avatar:"",center:"",style:ee({backgroundColor:a.backgroundColor})},{default:t(()=>[a._hasIconBinding?(c(),I("div",gt,[l(ce,{flat:"",dense:""},{label:t(()=>[l(r,{name:a.icon.default||Object.values(a.icon)[0],color:e.selectedPage.id===a.id?"white":"primary",styles:{color:a.iconColor}},null,8,["name","color","styles"])]),default:t(()=>[l(K,null,{default:t(()=>[(c(!0),I(U,null,G(a.icon,(_,$)=>(c(),E(A,{key:$},{default:t(()=>[l(p,{avatar:""},{default:t(()=>[l(r,{size:"xs",name:_,class:"pageIcon q-mr-xs",color:a.iconColor||a.color},null,8,["name","color"])]),_:2},1024),l(p,null,{default:t(()=>[l(B,null,{default:t(()=>[b(d(_),1)]),_:2},1024),l(B,{caption:""},{default:t(()=>[b(d($),1)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:2},1024)]),_:2},1024)])):(c(),I("div",pt,[l(r,{name:a.icon,color:e.selectedPage.id===a.id?"white":"primary",styles:{color:a.iconColor}},null,8,["name","color","styles"])]))]),_:2},1032,["style"])):Y("",!0),l(p,{class:R({itemDeleted:a._deleted===!0}),style:ee({backgroundColor:a.backgroundColor,color:a.color})},{default:t(()=>[a.type==="divider"?(c(),E(N,{key:0})):Y("",!0),a._hasTitleBinding?(c(),I("div",vt,[l(ce,{flat:"",dense:"",label:a.title.default||Object.values(a.title)[0]},{default:t(()=>[l(K,null,{default:t(()=>[(c(!0),I(U,null,G(a.title,(_,$)=>(c(),E(A,{key:$},{default:t(()=>[l(p,null,{default:t(()=>[l(B,null,{default:t(()=>[b(d(_),1)]),_:2},1024),l(B,{caption:""},{default:t(()=>[b(d($),1)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:2},1024)]),_:2},1032,["label"])])):(c(),I("div",mt,[l(B,{class:R({header:a.type==="header"}),style:ee({color:a.color})},{default:t(()=>[b(d(a.title),1)]),_:2},1032,["class","style"])]))]),_:2},1032,["class","style"]),l(p,{side:"",class:R({rowDeleted:a._deleted===!0,selected:e.selectedPage.id===a.id})},{default:t(()=>[i("div",ft,[a.type==="page"?P((c(),E(f,{key:0,type:"button",round:"",icon:"mdi-content-copy",tooltip:e.$t("copy"),items:e.copyMenu,onOnSelect:e.copyItem,id:a.id,denseMenu:""},null,8,["tooltip","items","onOnSelect","id"])),[[z,a.type!=="divider"&&a._deleted!==!0]]):P((c(),E(f,{key:1,type:"button",round:"",icon:"mdi-content-copy",tooltip:e.$t("copy"),onClick:x(_=>e.copyItem({id:a.id}),["stop"])},null,8,["tooltip","onClick"])),[[z,a.type!=="divider"&&a._deleted!==!0]]),P(l(f,{type:"button",round:"",icon:"mdi-delete",tooltip:e.$t("delete"),color:"negative",onClick:x(_=>e.deleteItem(a.id),["stop"])},null,8,["tooltip","onClick"]),[[z,(a.type&&a.type!=="page"||(!a.type||a.type==="page")&&e.pagesWithoutDeletionsCount>1)&&a._deleted!==!0]]),P(l(f,{type:"button",round:"",icon:"mdi-restore",tooltip:e.$t("restore"),color:"positive",onClick:x(_=>e.restoreItem(a.id),["stop"]),class:"restore"},null,8,["tooltip","onClick"]),[[z,a._deleted===!0]])])]),_:2},1032,["class"])]),_:2},1032,["clickable","onClick","class","disable"]))),128)),l(N,{class:"q-my-sm"}),l(A,null,{default:t(()=>[l(p,{avatar:"",center:""}),l(p,{avatar:"",center:""},{default:t(()=>[l(r,{name:"mdi-cog",color:"primary"})]),_:1}),l(p,null,{default:t(()=>[l(B,null,{default:t(()=>[b(d(e.$t("Configuration"))+" & "+d(e.$t("Help")),1)]),_:1}),l(B,{caption:""},{default:t(()=>[b(d(e.$t("show in sidebar")),1)]),_:1})]),_:1}),l(p,{side:""},{default:t(()=>[l(f,{type:"Switch",inline:"",onOnChange:e.onChangeSettings,id:"drawerShowSettings",value:e.settings.drawerShowSettings},null,8,["onOnChange","value"])]),_:1})]),_:1}),l(A,null,{default:t(()=>[l(p,{avatar:"",center:""}),l(p,{avatar:"",center:""},{default:t(()=>[l(r,{name:"mdi-menu",color:"primary"})]),_:1}),l(p,null,{default:t(()=>[l(B,null,{default:t(()=>[b(d(e.$t("Drawer")),1)]),_:1}),l(B,{caption:""},{default:t(()=>[b(d(e.$t("show button")),1)]),_:1})]),_:1}),l(p,{side:""},{default:t(()=>[l(f,{type:"Switch",inline:"",onOnChange:e.onChangeSettings,id:"drawerShowMenuButton",value:e.settings.drawerShowMenuButton},null,8,["onOnChange","value"])]),_:1})]),_:1})]),_:1},512)]),_:1})]),i("div",ht,[l(n,{class:"q-pa-sm"},{default:t(()=>[e.selectedPage&&e.selectedPage.id?(c(),E(C,{key:0,onOnSelectPage:e.onSelectPage,pageId:e.selectedPage.id},null,8,["onOnSelectPage","pageId"])):Y("",!0)]),_:1})])],512),[[z,!e.settings.configExpertMode]]),P(l(n,{style:ee({height:e.pageHeight-66-16+"px"})},{default:t(()=>[l(s,{id:"layout",json:e.json,onOnChange:e.onJsonEditor},null,8,["json","onOnChange"])]),_:1},8,["style"]),[[z,e.settings.configExpertMode]])])}var Tt=de(at,[["render",yt]]);export{Tt as default};
