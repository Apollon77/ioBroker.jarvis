import{_ as O,q as X,I as Y,cj as Z,dd as _,c as i,a4 as k,z as x,cl as c,cG as ee,A as ae,B as se,j as te,o as d,a as l,w as t,k as r,ad as re,P as de,g as n,e as q,d as I,l as oe,F as ie,n as p,O as N,K as b,a2 as w,a8 as R,$ as Q,M as z,N as g,i as h,t as S,cK as D,f,cS as ne}from"./index-6bce915b.js";import{Q as le}from"./QToolbar-8b25080f.js";import{Q as ue}from"./QHeader-c54cbe08.js";import{Q as ve}from"./QDrawer-613ce623.js";const be=X({name:"Sidebar",setup(){const e=Y(),o=Z(),B=_.isPro(),H=o.platform.is.mobile,C=o.screen.sizes.md,m=i(()=>B?e.layout:e.layout.slice(0,1)),u=i(()=>e.drawerMiniMode),a=k(!0),y=k(m.value),T=s=>{c.dev("Sidebar","resolveBindings");const v=y.value.findIndex(M=>M.id===s.id);y.value[v]={...s,revision:ne().substr(0,5)}};x(()=>{c.dev("Sidebar","Update"),y.value=m.value;for(const s of m.value)s.config={icon:s.icon,title:s.title},ee.getBindings(s,T)});const L=s=>e.set("drawerSidebar",s),U=i({get(){return e.drawerSidebar},set(s){L(s)}}),A=i(()=>e.settings),F=i(()=>{var s;return(s=e.getSelectedPage)==null?void 0:s.id}),K=s=>{var M,E;c.dev("Sidebar","setPage",s);const v=(E=(M=s.tabs)==null?void 0:M[0])==null?void 0:E.id;if(!v)return console.warn("Sidebar","Page "+s.id+" has no tabs!",s),!1;e.set({selectedTabId:v})},W=i(()=>{var s,v;return((v=(s=e.getSelectedPage)==null?void 0:s.tabs)==null?void 0:v.count)||0}),G=i(()=>u.value===!0?!a.value:!0),$=i(()=>u.value===!0?W.value<=1:!0),j=k(),J=i(()=>j.value&&j.value.$el.clientHeight||0),V=k(window.innerHeight-($.value?40:0)),P=()=>{c.dev("Sidebar","onResize()"),V.value=window.innerHeight-($.value?40:0)};return ae(()=>{c.dev("Sidebar","onMounted()"),window.addEventListener("orientationchange",P),window.addEventListener("resize",P)}),se(()=>{c.dev("Sidebar","onUnmounted()"),window.removeEventListener("orientationchange",P),window.removeEventListener("resize",P)}),{elementSidebarBottom:j,elementSidebarBottomHeight:J,isPro:B,isSmartphone:H,maxMobileSize:C,windowHeight:V,itemsWithResolvedBindings:y,drawerMiniMode:u,drawerMiniState:a,sidebar:U,toggleSidebar:L,setPage:K,selectedPageId:F,expanded:G,header:$,settings:A}}}),ce=h("jarvis"),pe={class:"headerInvisible"};function ge(e,o,B,H,C,m){const u=te("icon");return e.settings.drawerShowMenuButton!==!1?(d(),l(ve,{key:0,ref:"drawer",modelValue:e.sidebar,"onUpdate:modelValue":o[1]||(o[1]=a=>e.sidebar=a),mini:e.drawerMiniMode&&e.drawerMiniState,onMouseover:o[2]||(o[2]=a=>e.drawerMiniState=!1),onMouseout:o[3]||(o[3]=a=>e.drawerMiniState=!0),"mini-to-overlay":"",bordered:"",behavior:e.drawerMiniMode?"default":"mobile",overlay:!e.drawerMiniMode,"show-if-above":e.drawerMiniMode,breakpoint:e.maxMobileSize,class:f(["jarvis-sidebar-container",{"jarvis-sidebar-minimode":e.drawerMiniMode===!0,"jarvis-tabs-bottom":e.settings.tabsBottom===!0,"jarvis-header-hidden":e.settings.headerVisible!==!0}]),"content-class":"jarvis-sidebar"},{default:t(()=>[e.drawerMiniMode!==!0?(d(),l(ue,{key:0,style:{position:"relative"}},{default:t(()=>[r(le,null,{default:t(()=>[r(re),r(de,{flat:"",dense:"",round:"",icon:"mdi-chevron-left","aria-label":"Menu",onClick:o[0]||(o[0]=a=>e.toggleSidebar(!1))})]),_:1})]),_:1})):n("",!0),q("div",{style:p({height:e.windowHeight-44+"px"}),class:"q-mt-xs"},[r(N,{dense:"",class:"jarvis-sidebar-items",style:p({"overflow-x":"hidden","overflow-y":e.expanded?"auto":"hidden",maxHeight:e.windowHeight-(e.header?40:0)-e.elementSidebarBottomHeight+"px"})},{default:t(()=>[(d(!0),I(ie,null,oe(e.itemsWithResolvedBindings,a=>(d(),I("div",{key:a.id,class:f(["jarvis-sidebar-item",["jarvis-sidebar-item-"+a.type,"jarvis-"+a.type,"jarvis-"+a.type+"-"+a.id,a.tabs&&a.tabs[0]&&a.tabs[0].id?"jarvis-route-tab-"+(a.tabs&&a.tabs[0]&&a.tabs[0].id):""]])},[a.type==="divider"?(d(),l(R,{key:0,spaced:""})):n("",!0),a.type==="header"?b((d(),l(Q,{key:1,header:"",style:p(e.isPro&&a.id===e.selectedPageId&&a.bodySelectedStyle||e.isPro&&a.bodyStyle||{})},{default:t(()=>[h(S(a.title),1)]),_:2},1032,["style"])),[[w,e.expanded]]):n("",!0),a.type==="header"?b((d(),I("div",{key:2,class:"headerInvisible",style:p(e.isPro&&a.id===e.selectedPageId&&a.bodySelectedStyle||e.isPro&&a.bodyStyle||{})},"\xA0",4)),[[w,!e.expanded]]):n("",!0),!a.type||a.type==="page"?(d(),l(z,{key:3,to:{params:{tabId:a.tabs&&a.tabs[0]&&a.tabs[0].id}},clickable:"",onClick:y=>e.setPage(a),class:f(["full-width",{selected:a.id===e.selectedPageId}]),style:p(e.isPro&&a.id===e.selectedPageId&&a.bodySelectedStyle||e.isPro&&a.bodyStyle||(a.id===e.selectedPageId?{"background-color":"var(--q-primary)",color:"#fff"}:{"background-color":"#fff",color:"var(--q-primary)"})),"active-class":"selected"},{default:t(()=>[r(g,{avatar:"",center:"",class:f({selected:a.id===e.selectedPageId})},{default:t(()=>[r(u,{name:a.icon,style:p(e.isPro&&a.id===e.selectedPageId&&a.iconSelectedStyle||e.isPro&&a.iconStyle||(a.id===e.selectedPageId?"white":"primary"))},null,8,["name","style"])]),_:2},1032,["class"]),r(g,null,{default:t(()=>[r(Q,{class:f({selectedText:a.id===e.selectedPageId})},{default:t(()=>[h(S(a.title),1)]),_:2},1032,["class"])]),_:2},1024)]),_:2},1032,["to","onClick","style","class"])):n("",!0),!a.type||a.type==="page"?(d(),I("div",{key:4,class:f(["spacer",{selected:a.id===e.selectedPageId}])},null,2)):n("",!0)],2))),128))]),_:1},8,["style"]),e.isSmartphone?n("",!0):b((d(),l(N,{key:0,ref:"elementSidebarBottom",class:"sidebarBottom"},{default:t(()=>[r(R,{spaced:""}),b(r(Q,{header:""},{default:t(()=>[ce]),_:1},512),[[w,e.expanded]]),b(q("div",pe,"\xA0",512),[[w,!e.expanded]]),e.isPro?n("",!0):b((d(),l(z,{key:0,clickable:"",to:{name:"AccountPage",params:e.$route.params},exact:""},{default:t(()=>[r(g,{avatar:""},{default:t(()=>[r(u,{name:"mdi-heart",color:"primary"})]),_:1}),r(g,null,{default:t(()=>[h(S(e.$t("Pro Account")),1)]),_:1})]),_:1},8,["to"])),[[D]]),b((d(),l(z,{clickable:"",to:{name:"DevicesPage",params:e.$route.params},exact:"",id:"SettingsButton"},{default:t(()=>[r(g,{avatar:""},{default:t(()=>[r(u,{name:"mdi-cog",color:"primary"})]),_:1}),r(g,null,{default:t(()=>[h(S(e.$t("Configuration"))+" & "+S(e.$t("Help")),1)]),_:1})]),_:1},8,["to"])),[[D]])]),_:1},512)),[[w,e.settings.drawerShowSettings!==!1]])],4)]),_:1},8,["modelValue","mini","behavior","overlay","show-if-above","breakpoint","class"])):n("",!0)}var he=O(be,[["render",ge]]);export{he as default};
