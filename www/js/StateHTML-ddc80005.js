import{bt as L,a4 as T,bM as H,Q as n,d9 as w,ec as b,k as d,ds as c,ao as C,aG as I,ay as u,W as v,b3 as p,bn as f,a2 as S,d1 as k,b1 as D,a1 as B,D as $,X as z,C as N}from"./index-26a1be76.js";const V=T({name:"ModuleStateHTML",props:["widget","_containerSize"],setup(e){const m=H(),_=n(()=>e.widget.config);n(()=>({...w.joinConfig(_.value,b)}));const a=d(!1),t=d(null),s=d(),i=(l,M)=>{if(a.value=!0,l)return t.value=l.message||l,t.value;s.value=M},o=n(()=>s.value&&s.value.val||""),y=n(()=>o.value&&typeof o.value=="string"&&o.value.indexOf("<script")>-1),r=e.widget.items&&e.widget.items[0]||{},g=c.get(r.deviceId);let h=[];return g?h=c.listen(g.id,r.primaryStateKey,i):(t.value=m.t("Device {deviceId} not found").replace("{deviceId}",r.deviceId),console.warn("StateHTML",t.value),a.value=!0),C(()=>c.unlisten(h)),{loaded:a,error:t,html:o,hasScript:y}}}),j={class:"jarvis-StateHTML StateHTML"},F=["innerHTML"],K=["srcdoc"];function Q(e,m,_,a,t,s){const i=I("alert");return u(),v("div",j,[p(S(k,{indeterminate:""},null,512),[[f,!e.loaded&&!e.error]]),p(S(i,null,{default:D(()=>[B($(e.error),1)]),_:1},512),[[f,e.loaded&&e.error]]),p(z("div",null,[e.hasScript?(u(),v("iframe",{key:1,class:"StateHTML-iFrame",style:N({border:0,height:e._containerSize.height+"px"}),srcdoc:e.html},null,12,K)):(u(),v("div",{key:0,innerHTML:e.html},null,8,F))],512),[[f,e.loaded&&!e.error]])])}var G=L(V,[["render",Q],["__scopeId","data-v-011c7ac2"]]);export{G as default};
