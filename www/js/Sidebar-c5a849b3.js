import{bt as X,a4 as Y,bw as Z,co as _,dj as x,Q as i,k as M,aY as ee,cq as y,bQ as E,cK as ae,as as se,aw as te,aG as de,ay as r,U as l,b1 as t,a2 as d,bD as re,bB as oe,V as n,X as U,W as k,aE as ie,I as ne,C as g,bF as q,b3 as v,bn as w,bU as R,a1 as S,bO as $,bG as H,bH as f,D as m,cP as N,A as p,cS as le}from"./index-28487aa9.js";import{Q as ue}from"./QToolbar-20bdd637.js";import{Q as be}from"./QHeader-e0cf21a0.js";import{Q as ve}from"./QDrawer-8c8bc201.js";const ce=Y({name:"Sidebar",setup(){const e=Z(),o=_(),I=x.isPro(),C=o.platform.is.mobile,z=o.screen.sizes.md,B=i(()=>I?e.layout:e.layout.slice(0,1)),u=i(()=>e.drawerMiniMode),a=M(!0),c=M([]),T=s=>{y.dev("Sidebar","resolveBindings");const b=c.value.findIndex(P=>P.id===s.id);c.value[b]={...s,revision:le().substr(0,5)}};ee(B.value,()=>{y.dev("Sidebar","Update"),c.value=E(B.value);for(const s of c.value)s.config=E(s),ae.getBindings(s,T)},{immediate:!0});const V=s=>e.set("drawerSidebar",s),A=i({get(){return e.drawerSidebar},set(s){V(s)}}),W=i(()=>e.settings),F=i(()=>{var s;return(s=e.getSelectedPage)==null?void 0:s.id}),G=s=>{var P,D;y.dev("Sidebar","setPage",s);const b=(D=(P=s.tabs)==null?void 0:P[0])==null?void 0:D.id;if(!b)return console.warn("Sidebar","Page "+s.id+" has no tabs!",s),!1;e.set({selectedTabId:b})},J=i(()=>{var s,b;return((b=(s=e.getSelectedPage)==null?void 0:s.tabs)==null?void 0:b.count)||0}),K=i(()=>u.value===!0?!a.value:!0),Q=i(()=>u.value===!0?J.value<=1:!0),j=M(),O=i(()=>j.value&&j.value.$el.clientHeight||0),L=M(window.innerHeight-(Q.value?40:0)),h=()=>{y.dev("Sidebar","onResize()"),L.value=window.innerHeight-(Q.value?40:0)};return se(()=>{y.dev("Sidebar","onMounted()"),window.addEventListener("orientationchange",h),window.addEventListener("resize",h)}),te(()=>{y.dev("Sidebar","onUnmounted()"),window.removeEventListener("orientationchange",h),window.removeEventListener("resize",h)}),{elementSidebarBottom:j,elementSidebarBottomHeight:O,isPro:I,isSmartphone:C,maxMobileSize:z,windowHeight:L,itemsWithResolvedBindings:c,drawerMiniMode:u,drawerMiniState:a,sidebar:A,toggleSidebar:V,setPage:G,selectedPageId:F,expanded:K,header:Q,settings:W}}}),ye={class:"headerInvisible"};function ge(e,o,I,C,z,B){const u=de("icon");return e.settings.drawerShowMenuButton!==!1?(r(),l(ve,{key:0,ref:"drawer",modelValue:e.sidebar,"onUpdate:modelValue":o[1]||(o[1]=a=>e.sidebar=a),mini:e.drawerMiniMode&&e.drawerMiniState,onMouseover:o[2]||(o[2]=a=>e.drawerMiniState=!1),onMouseout:o[3]||(o[3]=a=>e.drawerMiniState=!0),"mini-to-overlay":"",bordered:"",behavior:e.drawerMiniMode?"default":"mobile",overlay:!e.drawerMiniMode,"show-if-above":e.drawerMiniMode,breakpoint:e.maxMobileSize,class:p(["jarvis-sidebar-container",{"jarvis-sidebar-minimode":e.drawerMiniMode===!0,"jarvis-tabs-bottom":e.settings.tabsBottom===!0,"jarvis-sidebar-header-hidden":e.settings.headerVisible!==!0}]),"content-class":"jarvis-sidebar"},{default:t(()=>[e.drawerMiniMode!==!0?(r(),l(be,{key:0,style:{position:"relative"}},{default:t(()=>[d(ue,null,{default:t(()=>[d(re),d(oe,{flat:"",dense:"",round:"",icon:"mdi-chevron-left","aria-label":"Menu",onClick:o[0]||(o[0]=a=>e.toggleSidebar(!1))})]),_:1})]),_:1})):n("",!0),U("div",{style:g({height:e.windowHeight-44+"px"}),class:"q-mt-xs"},[d(q,{dense:"",class:"jarvis-sidebar-items",style:g({"overflow-x":"hidden","overflow-y":e.expanded?"auto":"hidden",maxHeight:e.windowHeight-(e.header?40:0)-e.elementSidebarBottomHeight+"px"})},{default:t(()=>[(r(!0),k(ne,null,ie(e.itemsWithResolvedBindings,a=>(r(),k("div",{key:a.id,class:p(["jarvis-sidebar-item",["jarvis-sidebar-item-"+a.type,"jarvis-sidebar-item-"+a.type+"-"+a.id,a.tabs&&a.tabs[0]&&a.tabs[0].id?"jarvis-route-tab-"+(a.tabs&&a.tabs[0]&&a.tabs[0].id):""]])},[a.type==="divider"?(r(),l(R,{key:0,spaced:""})):n("",!0),a.type==="header"?v((r(),l($,{key:1,header:"",style:g(e.isPro&&a.id===e.selectedPageId&&a.bodySelectedStyle||e.isPro&&a.bodyStyle||{})},{default:t(()=>[S(m(a.title),1)]),_:2},1032,["style"])),[[w,e.expanded]]):n("",!0),a.type==="header"?v((r(),k("div",{key:2,class:"headerInvisible",style:g(e.isPro&&a.id===e.selectedPageId&&a.bodySelectedStyle||e.isPro&&a.bodyStyle||{})},"\xA0",4)),[[w,!e.expanded]]):n("",!0),!a.type||a.type==="page"?(r(),l(H,{key:3,to:{params:{tabId:a.tabs&&a.tabs[0]&&a.tabs[0].id}},clickable:"",onClick:c=>e.setPage(a),class:p(["full-width",{selected:a.id===e.selectedPageId}]),style:g(e.isPro&&a.id===e.selectedPageId&&a.bodySelectedStyle||e.isPro&&a.bodyStyle||(a.id===e.selectedPageId?{"background-color":"var(--q-primary)",color:"#fff"}:{color:"var(--q-primary)"})),"active-class":"selected"},{default:t(()=>[d(f,{avatar:"",center:"",class:p({selected:a.id===e.selectedPageId})},{default:t(()=>[d(u,{name:a.icon,style:g(e.isPro&&a.id===e.selectedPageId&&a.iconSelectedStyle||e.isPro&&a.iconStyle||(a.id===e.selectedPageId?"white":"primary"))},null,8,["name","style"])]),_:2},1032,["class"]),d(f,null,{default:t(()=>[d($,{class:p({selectedText:a.id===e.selectedPageId})},{default:t(()=>[S(m(a.title),1)]),_:2},1032,["class"])]),_:2},1024)]),_:2},1032,["to","onClick","style","class"])):n("",!0),!a.type||a.type==="page"?(r(),k("div",{key:4,class:p(["spacer",{selected:a.id===e.selectedPageId}])},null,2)):n("",!0)],2))),128))]),_:1},8,["style"]),e.isSmartphone?n("",!0):v((r(),l(q,{key:0,ref:"elementSidebarBottom",class:"sidebarBottom"},{default:t(()=>[d(R,{spaced:""}),v(d($,{header:""},{default:t(()=>[S("jarvis")]),_:1},512),[[w,e.expanded]]),v(U("div",ye,"\xA0",512),[[w,!e.expanded]]),e.isPro?n("",!0):v((r(),l(H,{key:0,clickable:"",to:{name:"AccountPage"},exact:""},{default:t(()=>[d(f,{avatar:""},{default:t(()=>[d(u,{name:"mdi-heart",color:"primary"})]),_:1}),d(f,null,{default:t(()=>[S(m(e.$t("Pro Account")),1)]),_:1})]),_:1})),[[N]]),v((r(),l(H,{clickable:"",to:{name:"DevicesPage"},exact:"",id:"SettingsButton"},{default:t(()=>[d(f,{avatar:""},{default:t(()=>[d(u,{name:"mdi-cog",color:"primary"})]),_:1}),d(f,null,{default:t(()=>[S(m(e.$t("Configuration"))+" & "+m(e.$t("Help")),1)]),_:1})]),_:1})),[[N]])]),_:1},512)),[[w,e.settings.drawerShowSettings!==!1]])],4)]),_:1},8,["modelValue","mini","behavior","overlay","show-if-above","breakpoint","class"])):n("",!0)}var me=X(ce,[["render",ge]]);export{me as default};
