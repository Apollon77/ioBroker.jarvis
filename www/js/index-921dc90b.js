import{bt as G,a4 as R,bM as z,bN as Y,k as g,as as J,aw as X,cH as Z,aG as C,ay as p,W as m,b3 as I,bn as _,X as r,a2 as o,b1 as c,a1 as T,D as b,bT as h,I as E,aE as S,bU as L,cP as q,bS as B,bH as K,dh as D,dk as H,U as O,bG as U,bO as V,bu as x,bp as ee,A as te,bF as ne}from"./index-32e2b91d.js";import{m as ae}from"./marked.esm-4cbe47a7.js";/*!
 * paypal-js v5.1.1 (2022-08-03T17:21:59.218Z)
 * Copyright 2020-present, PayPal, Inc. All rights reserved.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function re(e,t){var n=document.querySelector('script[src="'.concat(e,'"]'));if(n===null)return null;var i=Q(e,t),l=n.cloneNode();if(delete l.dataset.uidAuto,Object.keys(l.dataset).length!==Object.keys(i.dataset).length)return null;var s=!0;return Object.keys(l.dataset).forEach(function(d){l.dataset[d]!==i.dataset[d]&&(s=!1)}),s?n:null}function se(e){var t=e.url,n=e.attributes,i=e.onSuccess,l=e.onError,s=Q(t,n);s.onerror=l,s.onload=i,document.head.insertBefore(s,document.head.firstElementChild)}function oe(e){var t="https://www.paypal.com/sdk/js";e.sdkBaseURL&&(t=e.sdkBaseURL,delete e.sdkBaseURL),ue(e);var n=Object.keys(e).filter(function(s){return typeof e[s]!="undefined"&&e[s]!==null&&e[s]!==""}).reduce(function(s,d){var u=e[d].toString();return d.substring(0,5)==="data-"?s.dataAttributes[d]=u:s.queryParams[d]=u,s},{queryParams:{},dataAttributes:{}}),i=n.queryParams,l=n.dataAttributes;return{url:"".concat(t,"?").concat(ie(i)),dataAttributes:l}}function ie(e){var t="";return Object.keys(e).forEach(function(n){t.length!==0&&(t+="&"),t+=n+"="+e[n]}),t}function le(e){var t=e.split("/* Original Error:")[1];return t?t.replace(/\n/g,"").replace("*/","").trim():e}function Q(e,t){t===void 0&&(t={});var n=document.createElement("script");return n.src=e,Object.keys(t).forEach(function(i){n.setAttribute(i,t[i]),i==="data-csp-nonce"&&n.setAttribute("nonce",t["data-csp-nonce"])}),n}function ue(e){var t=e["merchant-id"],n=e["data-merchant-id"],i="",l="";return Array.isArray(t)?t.length>1?(i="*",l=t.toString()):i=t.toString():typeof t=="string"&&t.length>0?i=t:typeof n=="string"&&n.length>0&&(i="*",l=n),e["merchant-id"]=i,e["data-merchant-id"]=l,e}function ce(e,t){if(t===void 0&&(t=j()),F(e,t),typeof window=="undefined")return t.resolve(null);var n=oe(e),i=n.url,l=n.dataAttributes,s=l["data-namespace"]||"paypal",d=P(s);return re(i,l)&&d?t.resolve(d):de({url:i,attributes:l},t).then(function(){var u=P(s);if(u)return u;throw new Error("The window.".concat(s," global variable is not available."))})}function de(e,t){t===void 0&&(t=j()),F(e,t);var n=e.url,i=e.attributes;if(typeof n!="string"||n.length===0)throw new Error("Invalid url.");if(typeof i!="undefined"&&typeof i!="object")throw new Error("Expected attributes to be an object.");return new t(function(l,s){if(typeof window=="undefined")return l();se({url:n,attributes:i,onSuccess:function(){return l()},onError:function(){var d=new Error('The script "'.concat(n,'" failed to load.'));return window.fetch?fetch(n).then(function(u){return u.status===200&&s(d),u.text()}).then(function(u){var a=le(u);s(new Error(a))}).catch(function(u){s(u)}):s(d)}})})}function j(){if(typeof Promise=="undefined")throw new Error("Promise is undefined. To resolve the issue, use a Promise polyfill.");return Promise}function P(e){return window[e]}function F(e,t){if(typeof e!="object"||e===null)throw new Error("Expected an options object.");if(typeof t!="undefined"&&typeof t!="function")throw new Error("Expected PromisePonyfill to be a function.")}const fe=R({name:"AccountPage",setup(){console.log("AccountPage","setup()");const e=z();Y();const t="Ad8Db5feNlBy6SdFa7O0fpJ2QYIcyFO9SGSg4tNpxOgOlLyWTkN6JmOFBV58ItTpdUwfBGW2L8WuoIAn",n=g(),i=g(!1),l=D.getLicence(),s=g(null),d=g(l.subscriber.email_address),u=g(l.subscriptionId),a=g(null),k=g(!1),$=()=>{s.value=null,d.value&&(u.value||a.value)&&(k.value=!0,H.post("user/invoice",{action:u.value?"getInvoicesBySubscriptionId":"getInvoicesByInvoiceId",email:d.value,subscriptionId:u.value,invoiceId:a.value}).then(f=>{s.value=f.map(w=>(w.selected=l&&w.invoiceId===l.invoiceId,w))}).catch(f=>{s.value=[],console.warn("AccountPage",f.message)}).finally(()=>{k.value=!1}))},W=f=>{D.setToken(f).then(()=>window.location.reload())};let y=null;J(()=>{$(),ce({"client-id":t,components:"buttons",currency:"EUR",vault:!0,intent:"subscription"}).then(f=>{const w={style:{shape:"rect",color:"blue",layout:"horizontal",label:"buynow",tagline:!1},createSubscription:(v,N)=>N.subscription.create({plan_id:"P-8EY03930L1769123MMEFPZPI"}),onApprove:(v,N)=>{i.value=!0,H.post("user/invoice",{action:"assignUserToInvoice",userId:userId.value,subscriptionId:v.subscriptionID}).then(A=>D.setToken(A,v.subscriptionID)).catch(A=>console.error(A)).finally(()=>{i.value="done",window.location.reload()})}};y=f.Buttons(w),y.render("#paypal-button-subscribe").catch(v=>{console.error("Failed to render the PayPal Buttons",v)})})}),X(()=>{y&&y.close&&y.close(),Object.keys(window).forEach(f=>{/paypal|zoid|post_robot/.test(f)&&delete window[f]})});const M={};return["SupportByBuying","UsageNotice","Termination","Disclaimer"].forEach(f=>{let w="",v=0;for(M[f]=[];(w=e.t(f+"["+v+"]"))!==f+"["+v+"]";)v++,M[f].push(w)}),{format:Z,marked:ae,now:Math.ceil(Date.now()/1e3),t:M,invoiceId:a,subscriptionId:u,email:d,status:k,getInvoices:$,invoices:s,setLicence:W,isPaying:i,error:n}}}),pe={class:"q-ma-sm"},be={class:"row"},me={class:"col"},ve={class:"row no-wrap q-col-gutter-sm"},he={class:"col-8"},we={class:"text-h6"},ge=r("div",{class:"text-subtitle2"},null,-1),ye=["innerHTML"],Ie=["innerHTML"],_e=["innerHTML"],Ee=r("div",{id:"paypal-button-subscribe"},null,-1),Se={class:"col-4"},ke={class:"text-h6"},Le=r("div",{class:"text-subtitle2"},null,-1),Me={class:"row"},Ae={class:"col"},Te={class:"row"},Be={class:"col"},De=r("div",{class:"col-shrink q-px-md q-pb-sm row flex-center"},"or",-1),Oe={class:"col"},Ue={class:"row"},$e={class:"col text-center"},Ne={class:"col text-center"},Ce={class:"text-h6"},qe=r("div",{class:"text-subtitle2"},null,-1),He=["innerHTML"];function Ve(e,t,n,i,l,s){const d=C("alert"),u=C("inputs");return p(),m("div",pe,[I(r("div",be,[r("div",me,[o(d,null,{default:c(()=>[T(b(e.error),1)]),_:1})])],512),[[_,e.error]]),r("div",ve,[r("div",he,[o(B,null,{default:c(()=>[o(h,{class:"bg-primary text-white"},{default:c(()=>[r("div",we,b(e.$t("Buy"))+" & "+b(e.$t("Subscribe")),1),ge]),_:1}),o(h,null,{default:c(()=>[(p(!0),m(E,null,S(e.t.SupportByBuying,a=>(p(),m("p",{key:a},[r("span",{innerHTML:e.marked.parse(a)},null,8,ye)]))),128))]),_:1}),o(L),o(h,null,{default:c(()=>[r("strong",null,b(e.$t("Usage Notice")),1),(p(!0),m(E,null,S(e.t.UsageNotice,a=>(p(),m("p",{key:a},[r("span",{innerHTML:e.marked.parse(a)},null,8,Ie)]))),128))]),_:1}),o(L),o(h,null,{default:c(()=>[r("strong",null,b(e.$t("Legal Remarks")),1),(p(!0),m(E,null,S(e.t.Disclaimer,a=>(p(),m("p",{key:a},[r("span",{innerHTML:e.marked.parse(a)},null,8,_e)]))),128))]),_:1}),o(L),o(h,{class:"text-center"},{default:c(()=>[I(r("div",null,[r("em",null,b(e.$t("buy now")),1),Ee],512),[[_,e.isPaying===!1]]),I(r("div",null,[o(q,{color:"primary",size:"3em"})],512),[[_,e.isPaying===!0]])]),_:1})]),_:1})]),r("div",Se,[o(B,{class:"q-mb-sm"},{default:c(()=>[o(h,{class:"bg-primary text-white"},{default:c(()=>[r("div",ke,b(e.$t("Get Licences")),1),Le]),_:1}),o(h,null,{default:c(()=>[r("div",Me,[r("div",Ae,[o(u,{modelValue:e.email,"onUpdate:modelValue":t[0]||(t[0]=a=>e.email=a),label:"E-Mail",value:e.email},null,8,["modelValue","value"])])]),r("div",Te,[r("div",Be,[o(u,{modelValue:e.subscriptionId,"onUpdate:modelValue":t[1]||(t[1]=a=>e.subscriptionId=a),label:"Abonnement-ID",value:e.subscriptionId},null,8,["modelValue","value"])]),De,r("div",Oe,[o(u,{modelValue:e.invoiceId,"onUpdate:modelValue":t[2]||(t[2]=a=>e.invoiceId=a),label:"Invoice-ID",value:e.invoiceId},null,8,["modelValue","value"])])]),r("div",Ue,[I(r("div",$e,[o(u,{onOnClick:e.getInvoices,type:"button",label:e.$t("Get Licences"),flat:!1,color:"primary"},null,8,["onOnClick","label"])],512),[[_,e.status===!1]]),I(r("div",Ne,[o(q,{color:"primary",size:"3em"})],512),[[_,e.status!==!1]])]),o(L,{class:"q-mx-sm q-my-md"}),o(K,null,{default:c(()=>[(p(!0),m(E,null,S(e.invoices,a=>(p(),O(ne,{key:a._id,class:te({"bg-positive":a.expires>e.now})},{default:c(()=>[o(U,null,{default:c(()=>[o(V,null,{default:c(()=>[T(b(a.date)+", #"+b(a.invoiceId),1)]),_:2},1024),o(V,{caption:""},{default:c(()=>[T(b(e.$t("valid to"))+" "+b(e.format(a.expires*1e3,"dd. MMM yyyy, HH:mm")),1)]),_:2},1024)]),_:2},1024),a.selected?(p(),O(U,{key:1,side:""},{default:c(()=>[o(u,{type:"button",round:"",tooltip:e.$t("Set Licence"),class:"gt-xs",flat:"",icon:"mdi-checkbox-blank-circle-outline",onClick:ee(k=>e.setLicence(a.token),["stop"])},null,8,["tooltip","onClick"])]),_:2},1024)):(p(),O(U,{key:0,side:""},{default:c(()=>[o(x,{name:"mdi-checkbox-marked-circle-outline"})]),_:1}))]),_:2},1032,["class"]))),128))]),_:1})]),_:1})]),_:1}),o(B,null,{default:c(()=>[o(h,{class:"bg-primary text-white"},{default:c(()=>[r("div",Ce,b(e.$t("Unsubscribe"))+" / "+b(e.$t("Terminate")),1),qe]),_:1}),o(h,null,{default:c(()=>[(p(!0),m(E,null,S(e.t.Termination,a=>(p(),m("p",{key:a},[r("span",{innerHTML:e.marked.parse(a)},null,8,He)]))),128))]),_:1})]),_:1})])])])}var je=G(fe,[["render",Ve]]);export{je as default};
