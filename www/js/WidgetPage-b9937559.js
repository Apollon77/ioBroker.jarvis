import{bW as ve,a2 as P,bf as ge,d5 as pe,b8 as fe,b4 as he,z as ye,h as me,cf as Ce,aY as Se,ch as ne,B as be,d6 as we,q as le,ck as Q,W as Ie,cl as se,c as N,d7 as H,ct as X,a3 as Oe,_ as ie,d8 as De,d4 as ke,j as T,o as l,d as I,e as d,J as m,a1 as S,k as t,w as c,F as R,l as de,a as C,M as V,Z as $e,f as ue,t as D,g as y,L as z,cK as Ee,Y as oe,O as j,bV as Ke,p as _,m as Z,ad as x,i as J,I as Le,N as te,a6 as U,x as Be,a4 as Ge,ab as Me,a5 as ae,a7 as Ve,a8 as Ae}from"./index-80522cd8.js";import{Q as We}from"./QExpansionItem-ebbf8237.js";import{D as Fe,a as Qe,u as Ue}from"./useDragDrop-cc6a0951.js";var qe=ve({name:"QForm",props:{autofocus:Boolean,noErrorFocus:Boolean,noResetFocus:Boolean,greedy:Boolean,onSubmit:Function},emits:["reset","validation-success","validation-error"],setup(e,{slots:k,emit:K}){const G=Se(),b=P(null);let w=0;const a=[];function L(v){const O=[],M=typeof v=="boolean"?v:e.noErrorFocus!==!0,f=++w,i=(g,r)=>{K("validation-"+(g===!0?"success":"error"),r)};for(let g=0;g<a.length;g++){const r=a[g],$=r.validate();if(typeof $.then=="function")O.push($.then(B=>({valid:B,comp:r}),B=>({valid:!1,comp:r,err:B})));else if($!==!0){if(e.greedy===!1)return i(!1,r),M===!0&&typeof r.focus=="function"&&r.focus(),Promise.resolve(!1);O.push({valid:!1,comp:r})}}return O.length===0?(i(!0),Promise.resolve(!0)):Promise.all(O).then(g=>{const r=g.filter(Y=>Y.valid!==!0);if(r.length===0)return f===w&&i(!0),!0;const{valid:$,comp:B,err:A}=r[0];return f===w&&(A!==void 0&&console.error(A),i(!1,B),M===!0&&$!==!0&&typeof B.focus=="function"&&B.focus()),!1})}function s(){w++,a.forEach(v=>{typeof v.resetValidation=="function"&&v.resetValidation()})}function n(v){v!==void 0&&ne(v);const O=w+1;L().then(M=>{O===w&&M===!0&&(e.onSubmit!==void 0?K("submit",v):v!==void 0&&v.target!==void 0&&typeof v.target.submit=="function"&&v.target.submit())})}function p(v){v!==void 0&&ne(v),K("reset"),be(()=>{s(),e.autofocus===!0&&e.noResetFocus!==!0&&E()})}function E(){we(()=>{if(b.value===null)return;const v=b.value.querySelector("[autofocus], [data-autofocus]")||Array.prototype.find.call(b.value.querySelectorAll("[tabindex]"),O=>O.tabIndex>-1);v!=null&&v.focus({preventScroll:!0})})}ge(pe,{bindComponent(v){a.push(v)},unbindComponent(v){const O=a.indexOf(v);O>-1&&a.splice(O,1)}});let W=!1;return fe(()=>{W=!0}),he(()=>{W===!0&&e.autofocus===!0&&E()}),ye(()=>{e.autofocus===!0&&E()}),Object.assign(G.proxy,{validate:L,resetValidation:s,submit:n,reset:p,focus:E,getValidationComponents:()=>a}),()=>me("form",{class:"q-form",ref:b,onSubmit:n,onReset:p},Ce(k.default))}});const Pe=le({name:"WidgetDevicesSection",props:["module","itemList"],emits:["onChange"],components:{Draggable:Fe},setup(e,{emit:k}){Q.dev("DEBUG","WidgetDevicesSection","setup()");const K=Ie(),G=se(),b=N(()=>H.Settings[e.module]||{}),w=N(()=>G.devices),a=o=>w.value[o],L=o=>w.value[o.deviceId].function==="other"?"_defaults":w.value[o.deviceId].function,s=o=>Object.keys(w.value[o].states)||[],n=o=>s(o).map(u=>({label:u,value:u})),p=o=>E[o].devices.length!==0,E=G.getGroups("function"),W=P(Object.values(E)),v=o=>(Q.dev("DEBUG","WidgetDevicesSection","shallBeShown",o),!b.value.addDevice||b.value.addDevice&&(!b.value.addDevice.fields||b.value.addDevice.fields&&b.value.addDevice.fields.includes(o))),O=(o,u)=>{Q.dev("DEBUG","WidgetDevicesSection","onFilter",o);const h=Object.values(o?G.getGroups("function",o):E);u(()=>{W.value=h})},M=(o,u,h)=>{Q.dev("DEBUG","WidgetDevicesSection","componentValues",o,u,h);const F=w.value[o.deviceId]&&w.value[o.deviceId].states[o[h+"StateKey"]]||{},q=o[u+"Element"];return De(F[q+"Config"]||{},o[q+"Config"]&&o[q+"Config"][h]||{})},f=P(X(e.itemList)),i=(o,u=null)=>{Q.dev("DEBUG","WidgetDevicesSection","addItem",o,u);const h=ke(),F={...o,id:h};if(u===null){if(o.type==="device"){const q=s(o.deviceId)[0]||null;F.primaryStateKey=q,F.bodyStateKey=q,F.bodyElement="LastChangeBody"}f.value.push(F)}else f.value.splice(u,0,F);k("onChange",{id:"items",value:f.value})},g=o=>{const u=X(f.value.find(h=>h.id===o));i(u,f.value.findIndex(h=>h.id===u.id)+1)},r=o=>{confirm(K.t("Really delete item?"))&&(f.value.splice(f.value.findIndex(h=>h.id===o),1),k("onChange",{id:"items",value:f.value}))},$=P(),B=o=>{(!o.attributes||o.attributes&&o.attributes.deleted!==!0)&&(i({type:"device",deviceId:o.id}),b.value.addDevice&&b.value.addDevice.max!==void 0&&b.value.addDevice.max<=f.value.length&&$.value.hidePopup())},A=P({}),Y=()=>{A.value.value&&i({type:"group",name:A.value.value}),A.value={}},re=()=>i({type:"divider"}),ee=o=>{if(Q.dev("DEBUG","WidgetDevicesSection","onChange",o),o.id&&o.itemId){const u=f.value.findIndex(h=>h.id===o.itemId);if(u>-1){if(o.id.indexOf("moduleConfig.")>-1)f.value[u].moduleConfig={...f.value[u].moduleConfig||{},[o.id.replace("moduleConfig.","")]:o.value};else if(o.id.indexOf("secondaryStatesConfig.")>-1)f.value[u].secondaryStatesConfig={...f.value[u].secondaryStatesConfig||{},[o.id.replace("secondaryStatesConfig.","")]:o.value};else if(o.id==="componentOptions"){const h=o.stateKey||f.value[u].primaryStateKey;f.value[u][o.component+"Config"]={...f.value[u][o.component+"Config"]||{},[h]:{...f.value[u][o.component+"Config"]&&f.value[u][o.component+"Config"][h]||{},...o.value}}}else f.value[u][o.id]=o.value;k("onChange",{id:"items",value:f.value})}}},ce=(o,u)=>{Q.dev("DEBUG","WidgetDevicesSection","onChangeSecondaryStatesKeys",o,u),ee({value:u.map(h=>h.value||h),itemId:o,id:"secondaryStatesKeys"})};return{...Qe(),FunctionsComponentsList:Oe.ComponentsListAsOptions,ModuleSettings:b,onFilter:O,shallBeShown:v,deviceList:w,getDevice:a,getDeviceFunction:L,getDeviceStates:s,getDeviceStatesOptions:n,hasDevices:p,onChange:ee,onChangeSecondaryStatesKeys:ce,isInGroup:!1,setGroup:o=>{A.value=o},group:A,addGroup:Y,addDivider:re,addDevice:B,items:f,addItem:i,copyItem:g,deleteItem:r,componentValues:M,addDeviceElement:$,optionsAddDevice:E,optionGroupsAddDevice:W}}}),je={class:"full-width"},Ne={class:"row sticky body"},Te={class:"col-4"},Re=J("\xA0"),ze={key:0},He={class:"col-3"},Je={class:"col-3",style:{"line-height":"70px"}},Ye={class:"row"},Ze=["set"],Xe={class:"row items-center"},_e={key:0},xe={key:1},en={key:2},nn={key:3,class:"row nowrap"},on={key:0,class:"row nowrap"},tn={key:1,class:"row nowrap"},an={key:2,class:"row nowrap"};function ln(e,k,K,G,b,w){const a=T("inputs"),L=T("icon"),s=T("draggable");return l(),I("div",je,[d("div",Ne,[d("div",Te,[m(t(oe,{onFilter:e.onFilter,ref:"addDeviceElement",label:e.$t("Add Device"),options:e.optionGroupsAddDevice,"model-value":"","use-input":"","input-debounce":750,"stack-label":"",style:{margin:"0 8px"}},{option:c(n=>[t(We,{"expand-separator":"","header-class":"text-weight-bold",label:n.opt.label,icon:n.opt.icon},{default:c(()=>[(l(!0),I(R,null,de(n.opt.devices,p=>m((l(),C(z,{key:p.id,clickable:"",onClick:E=>e.addDevice(p)},{default:c(()=>[t(V,null,{default:c(()=>[t($e,{class:"q-ml-md"},{default:c(()=>[d("span",{class:ue({"text-strike":p.attributes&&p.attributes.deleted===!0})},D(p.label?p.label+" ("+p.name+")":p.name),3),Re,p.attributes&&p.attributes.deleted===!0?(l(),I("em",ze,"[ "+D(e.$t("deleted"))+" ]",1)):y("",!0)]),_:2},1024)]),_:2},1024)]),_:2},1032,["onClick"])),[[Ee]])),128))]),_:2},1032,["label","icon"])]),_:1},8,["onFilter","label","options"]),[[S,e.ModuleSettings.addDevice!==!1&&(!e.ModuleSettings.addDevice||e.ModuleSettings.addDevice&&(e.ModuleSettings.addDevice.max===void 0||e.ModuleSettings.addDevice.max>e.items.length))]])]),m(d("div",{class:"col-1",style:{"text-align":"center","line-height":"70px"}},D(e.$t("or")),513),[[S,e.ModuleSettings.addGroup!==!1]]),m(d("div",He,[t(a,{label:"Add Group",onOnChange:e.setGroup,onKeyup:Ke(e.addGroup,["enter"]),value:e.group.value||""},{end:c(()=>[m(t(j,{flat:"",size:"sm",dense:"",icon:"mdi-check",label:e.$t("add group"),style:{height:"32px","min-width":"100px","margin-top":"16px"},onClick:e.addGroup},null,8,["label","onClick"]),[[S,!!e.group.value]])]),_:1},8,["onOnChange","onKeyup","value"])],512),[[S,e.ModuleSettings.addGroup!==!1]]),m(d("div",{class:"col-1",style:{"text-align":"center","line-height":"70px"}},D(e.$t("or")),513),[[S,e.ModuleSettings.addDivider!==!1]]),m(d("div",Je,[t(j,{icon:"mdi-minus",label:e.$t("Add Divider"),color:"primary",onClick:e.addDivider},null,8,["label","onClick"])],512),[[S,e.ModuleSettings.addDivider!==!1]])]),d("div",Ye,[t(te,{ref:"deviceListElement",class:"full-width",style:{"margin-top":"16px"}},{default:c(()=>[t(s,_({class:"list-group",tag:"div","component-data":{tag:"div",type:"transition",name:e.drag?null:"flip-list"},modelValue:e.items,"onUpdate:modelValue":k[0]||(k[0]=n=>e.items=n)},e.dragOptions,{onStart:k[1]||(k[1]=n=>e.drag=!0),onEnd:k[2]||(k[2]=n=>e.drag=!1),"item-key":"id",handle:".dragndrop"}),{item:c(({element:n})=>[(l(),I("div",{key:n.id,set:e.isInGroup=n.type==="device"?e.isInGroup:n.type==="divider"?!1:n.type==="group"},[t(z,null,{default:c(()=>[t(V,{avatar:""},{default:c(()=>[d("div",Xe,[m(t(L,{name:"mdi-drag-horizontal",class:"dragndrop",style:{"padding-right":"16px"}},null,512),[[S,e.items.length>1]]),t(a,{type:"button",dense:"",icon:"mdi-content-copy",tooltip:e.$t("copy"),onClick:Z(p=>e.copyItem(n.id),["stop"])},null,8,["tooltip","onClick"]),m(t(a,{type:"button",dense:"",icon:"mdi-delete",tooltip:e.$t("delete"),color:"negative",onClick:Z(p=>e.deleteItem(n.id),["stop"])},null,8,["tooltip","onClick"]),[[S,n._deleted!==!0]]),m(t(a,{type:"button",dense:"",icon:"mdi-restore",tooltip:e.$t("restore"),color:"positive",onClick:Z(p=>e.restoreItem(n.id),["stop"]),class:"restore"},null,8,["tooltip","onClick"]),[[S,n._deleted===!0]])])]),_:2},1024),n.type!=="device"||n.type==="device"&&e.deviceList[n.deviceId]!==void 0?(l(),I(R,{key:0},[e.ModuleSettings.customBodySection?(l(),C(V,{key:0},{default:c(()=>[(l(),C(x(e.ModuleSettings.customBodySection),_({...e.$props,...e.$attrs},{onOnChange:e.onChange,item:n,device:e.deviceList[n.deviceId]}),null,16,["onOnChange","item","device"]))]),_:2},1024)):(l(),C(V,{key:1},{default:c(()=>[n.type==="divider"?(l(),I("span",_e,[d("em",null,D("("+e.$t("divider")+")"),1)])):y("",!0),n.type==="group"?(l(),I("span",xe,[d("strong",null,D(n.name),1)])):y("",!0),n.type==="device"?(l(),I("span",en,[d("strong",null,D(e.deviceList[n.deviceId].name),1),J(" ("+D(e.deviceList[n.deviceId].function+", #"+n.deviceId)+")",1)])):y("",!0),n.type==="device"?(l(),I("div",nn,[e.shallBeShown("label")?(l(),C(a,{key:0,dense:"",onOnChange:e.onChange,label:"Label",itemId:n.id,id:"label",json:"",value:n.label||"",placeholder:e.deviceList[n.deviceId].states[n.bodyStateKey]&&e.deviceList[n.deviceId].states[n.bodyStateKey].label?JSON.stringify(e.deviceList[n.deviceId].states[n.bodyStateKey].label):e.deviceList[n.deviceId].name},null,8,["onOnChange","itemId","value","placeholder"])):y("",!0),e.shallBeShown("bodyStateKey")?(l(),C(a,{key:1,dense:"",style:{width:"130px"},onOnSelect:e.onChange,label:"Body State",itemId:n.id,id:"bodyStateKey",value:n.bodyStateKey,type:"select",options:e.getDeviceStatesOptions(n.deviceId)},null,8,["onOnSelect","itemId","value","options"])):y("",!0),e.shallBeShown("bodyElement")?m((l(),C(a,{key:2,dense:"",style:{width:"230px"},onOnSelect:e.onChange,onOnOptions:e.onChange,id:"bodyElement",label:"Body Element",state:e.deviceList[n.deviceId].states[n.bodyStateKey],stateKey:n.bodyStateKey,itemId:n.id,value:n.bodyElement,type:"select.components",components:e.FunctionsComponentsList.bodyElements[e.getDeviceFunction(n)],componentValues:e.componentValues(n,"body",n.bodyStateKey)},null,8,["onOnSelect","onOnOptions","state","stateKey","itemId","value","components","componentValues"])),[[S,n.bodyStateKey]]):y("",!0)])):y("",!0)]),_:2},1024)),e.ModuleSettings.customActionSection?(l(),C(V,{key:2,side:""},{default:c(()=>[(l(),C(x(e.ModuleSettings.customActionSection),{onOnChange:e.onChange,item:n,device:e.deviceList[n.deviceId]},null,40,["onOnChange","item","device"]))]),_:2},1024)):(l(),C(V,{key:3,side:""},{default:c(()=>[n.type==="group"?(l(),I("div",on,[t(a,{dense:"",style:{width:"100px"},onOnChange:e.onChange,label:e.$t("Group Actions"),itemId:n.id,id:"actions",value:n.actions||!1,type:"switch"},null,8,["onOnChange","label","itemId","value"]),e.shallBeShown("groupElement")?m((l(),C(a,{key:0,dense:"",style:{width:"200px"},onOnSelect:e.onChange,onOnOptions:e.onChange,id:"groupElement",label:"Group Element",stateKey:"group",itemId:n.id,value:n.groupElement,type:"select.components",components:e.FunctionsComponentsList.actionElements._defaults.filter(p=>!["DatePickerAction","TimePickerAction","InputAction","DropdownAction"].includes(p.value)),componentValues:e.componentValues(n,"group","group")},null,8,["onOnSelect","onOnOptions","itemId","value","components","componentValues"])),[[S,n.actions===!0]]):y("",!0)])):y("",!0),n.type==="device"?(l(),I("div",tn,[e.shallBeShown("primaryStateKey")?(l(),C(a,{key:0,dense:"",style:{width:"130px"},onOnSelect:e.onChange,label:"Action State",itemId:n.id,id:"primaryStateKey",value:n.primaryStateKey,type:"select",options:e.getDeviceStatesOptions(n.deviceId)},null,8,["onOnSelect","itemId","value","options"])):y("",!0),e.shallBeShown("showState")?m((l(),C(a,{key:1,dense:"",style:{width:"100px"},onOnChange:e.onChange,label:"Show State",itemId:n.id,id:"showState",value:n.showState!==void 0?n.showState:!0,type:"switch"},null,8,["onOnChange","itemId","value"])),[[S,n.primaryStateKey]]):y("",!0),e.shallBeShown("showGroupAction")?m((l(),C(a,{key:2,dense:"",style:{width:"100px"},onOnChange:e.onChange,label:"Use in Actions",itemId:n.id,id:"useInGroup",value:n.useInGroup!==void 0?n.useInGroup:!0,type:"switch"},null,8,["onOnChange","itemId","value"])),[[S,n.primaryStateKey&&e.isInGroup===!0]]):y("",!0),e.shallBeShown("actionElement")?m((l(),C(a,{key:3,dense:"",style:{width:"200px"},onOnSelect:e.onChange,onOnOptions:e.onChange,id:"actionElement",label:"Action Element",state:e.deviceList[n.deviceId].states[n.primaryStateKey],stateKey:n.primaryStateKey,itemId:n.id,value:n.actionElement,type:"select.components",components:e.FunctionsComponentsList.actionElements[e.getDeviceFunction(n)],componentValues:e.componentValues(n,"action",n.primaryStateKey)},null,8,["onOnSelect","onOnOptions","state","stateKey","itemId","value","components","componentValues"])),[[S,n.primaryStateKey]]):y("",!0)])):y("",!0),n.type==="device"?(l(),I("div",an,[e.shallBeShown("secondaryStatesKeys")?(l(),C(oe,{key:0,"stack-label":"",dense:"",style:{width:"430px"},"onUpdate:modelValue":p=>e.onChangeSecondaryStatesKeys(n.id,p),label:e.$t("Secondary State"),"model-value":n.secondaryStatesKeys,options:e.getDeviceStatesOptions(n.deviceId),"use-chips":"",multiple:""},{after:c(()=>[t(j,{flat:"",dense:"",icon:"mdi-dots-vertical","click.prevent":""},{default:c(()=>[t(Le,null,{default:c(()=>[t(te,{style:{"min-width":"100px"}},{default:c(()=>[t(z,null,{default:c(()=>[t(V,null,{default:c(()=>[t(a,{dense:"",onOnChange:e.onChange,itemId:n.id,label:"Use Labels",id:"secondaryStatesConfig.useLabel",value:n.secondaryStatesConfig&&n.secondaryStatesConfig.useLabel||!1,type:"switch",inline:""},null,8,["onOnChange","itemId","value"])]),_:2},1024)]),_:2},1024),t(z,null,{default:c(()=>[t(V,null,{default:c(()=>[t(a,{dense:"",onOnChange:e.onChange,itemId:n.id,label:"Use Colors",id:"secondaryStatesConfig.useColor",value:n.secondaryStatesConfig&&n.secondaryStatesConfig.useColor||!0,type:"switch",inline:""},null,8,["onOnChange","itemId","value"])]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1024)]),_:2},1032,["onUpdate:modelValue","label","model-value","options"])):y("",!0)])):y("",!0)]),_:2},1024))],64)):(l(),C(V,{key:1},{default:c(()=>[J(D(e.$t("Device not found")+" ("+e.$t("Device ID")+": "+n.deviceId+")"),1)]),_:2},1024))]),_:2},1024),t(U)],8,Ze))]),_:1},16,["component-data","modelValue"])]),_:1},512)])])}var sn=ie(Pe,[["render",ln],["__scopeId","data-v-8ff806f0"]]);const dn=le({name:"WidgetPage",props:["widgetId"],emits:["onClose"],components:{WidgetDevicesSection:sn},setup(e,{emit:k}){const K=se(),{errors:G,hasErrors:b,addError:w,removeError:a,resetErrors:L}=Ue({module:"Empty"}),s=P(null);Be(()=>e.widgetId,i=>{i?(s.value=K.widgets[i]?X(K.widgets[i]):{id:i,config:{}},s.value.module&&a("module")):s.value=null});const n=H.ModuleList.map(i=>({label:i,value:i})),p=N(()=>H.Configurations[s.value.module]||[]),E=N(()=>H.Settings[s.value.module]||{}),W=N(()=>{const i={};return p.value.forEach(g=>{if(s.value.config[g.parameter]===void 0){const r=typeof g.value=="function"?g.value(s.value):g.value;O({id:"config."+g.parameter,value:r}),i[g.parameter]=r}else i[g.parameter]=s.value.config[g.parameter]}),i}),v=i=>i?Object.keys(i).some(g=>{const r=Array.isArray(i[g])?i[g]:[i[g]],$=s.value.config[g]===void 0?p.value.find(B=>B.parameter===g).value:s.value.config[g];return r.includes($)}):!0,O=i=>{const{_error:g,id:r,value:$}=i;g?w(r,g):r!==void 0&&$!==void 0&&r.indexOf("config.")!==-1?(s.value.config[r.replace("config.","")]=$,a(r)):r!==void 0&&$!==void 0&&(s.value[r]=$,a(r),r==="module"&&(L(),s.value.config={}))},M=(i=null)=>{k("onClose",i),s.value=null,L()};return{ModuleList:n,ModuleConfigurations:p,ModuleSettings:E,ModuleConfigValues:W,errors:G,hasErrors:b,dependencies:v,widget:s,onChange:O,onCancel:M,onSave:()=>{K.addWidget({widget:s.value}),M(s.value)}}}}),un={class:"text-h6 row items-center"},rn={class:"text-h6 primary q-ma-sm"},cn={class:"row"},vn={class:"col"},gn={class:"col"},pn={class:"col"},fn={class:"col-2"},hn={class:"col-1"},yn={class:"text-h6 primary q-ma-sm"},mn={class:"row"},Cn={class:"col-3"},Sn={class:"col-9"},bn={class:"text-h7 primary q-ma-sm"},wn={class:"row"},In={class:"row"},On={class:"q-pa-sm"},Dn={key:0,class:"row"},kn={class:"text-h7 primary q-ma-sm"},$n={class:"row"};function En(e,k,K,G,b,w){const a=T("inputs"),L=T("widget-devices-section");return l(),C(Ae,{"model-value":e.widget!==null,"full-height":"",persistent:""},{default:c(()=>[e.widget!==null?(l(),C(Ge,{key:0,class:"column full-height",style:{width:"1400px","max-width":"90vw"}},{default:c(()=>[t(ae,{class:"row items-center"},{default:c(()=>[d("div",un,[J(D(e.$t("Widget"))+": ",1),t(a,{dense:"",onOnChange:e.onChange,id:"title",label:e.$t("Name"),value:e.widget.title||"",autofocus:"",style:{width:"230px"}},null,8,["onOnChange","label","value"])]),t(Me),t(j,{flat:"",round:"",color:"grey",icon:"close",onClick:e.onCancel},null,8,["onClick"])]),_:1}),t(U),t(ae,{id:"WidgetDialogBody",class:"col scroll body"},{default:c(()=>[t(qe,null,{default:c(()=>[d("div",rn,D(e.$t("Widget-Box")),1),t(U,{style:{margin:"0 -16px"}}),d("div",cn,[d("div",vn,[t(a,{onOnChange:e.onChange,id:"icon",label:e.$t("Widget")+" "+e.$t("Icon"),value:e.widget.icon||e.ModuleSettings.icon||"",icon:e.widget.icon},null,8,["onOnChange","label","value","icon"])]),d("div",gn,[t(a,{onOnChange:e.onChange,id:"label",label:e.$t("Widget")+" "+e.$t("Label"),value:e.widget.label||"",placeholder:e.widget.title},null,8,["onOnChange","label","value","placeholder"])]),d("div",pn,[t(a,{onOnChange:e.onChange,id:"link",label:e.$t("Widget")+" "+e.$t("Link"),value:e.widget.link||"",info:"config#HomeKitTile#jumper#info"},null,8,["onOnChange","label","value"])]),d("div",fn,[t(a,{type:"switch",onOnChange:e.onChange,id:"hideTitle",label:e.$t("Hide Widget Label and Icon"),value:e.widget.hideTitle||!1},null,8,["onOnChange","label","value"])]),d("div",hn,[m(t(a,{type:"switch",onOnChange:e.onChange,id:"hideSeparator",label:e.$t("Hide Separator"),value:e.widget.hideSeparator||!1},null,8,["onOnChange","label","value"]),[[S,e.widget.hideTitle!==!0]])])]),d("div",yn,D(e.$t("Module")),1),t(U,{style:{margin:"0 -16px"}}),d("div",mn,[d("div",Cn,[t(a,{onOnSelect:e.onChange,id:"module",label:e.$t("Module"),type:"select",options:e.ModuleList,value:e.widget.module,"options-dense":"","use-input":"",required:"",error:e.errors.module!==void 0,"error-message":e.errors.module},null,8,["onOnSelect","label","options","value","error","error-message"])]),d("div",Sn,[m(d("div",{class:"centered"},D(e.$t(e.widget.module+"#description")),513),[[S,e.widget.module]])])]),m(d("div",null,[d("div",bn,D(e.$t("Module Configuration")),1),t(U,{style:{margin:"0 0 8px 0"}}),m(d("div",wn,[(l(!0),I(R,null,de(e.ModuleConfigurations,s=>(l(),I(R,null,[s.hide!==!0?m((l(),I("div",{class:ue("col-"+(s.columns||4)),key:s.parameter},[t(a,_(s,{onOnChange:e.onChange,onOnSelect:e.onChange,id:"config."+s.parameter,value:e.ModuleConfigValues[s.parameter]}),null,16,["onOnChange","onOnSelect","id","value"])],2)),[[S,e.dependencies(s.dependencies)]]):y("",!0)],64))),256))],512),[[S,e.ModuleConfigurations.length>0]]),m(d("div",In,[d("p",On,D(e.$t("No configuration options for this module")),1)],512),[[S,e.ModuleConfigurations.length===0]]),e.ModuleSettings&&e.ModuleSettings.customConfiguration?(l(),I("div",Dn,[(l(),C(x(e.ModuleSettings.customConfiguration),{config:e.widget.config,onOnChange:e.onChange},null,40,["config","onOnChange"]))])):y("",!0),e.ModuleSettings.addDevice!==!1?(l(),I(R,{key:1},[d("div",kn,D(e.$t("Module Devices")),1),t(U,{style:{margin:"0 -0 8px 0"}}),d("div",$n,[t(L,{onOnChange:e.onChange,ModuleConfigValues:e.ModuleConfigValues,itemList:e.widget.items||[],module:e.widget.module},null,8,["onOnChange","ModuleConfigValues","itemList","module"])])],64)):y("",!0)],512),[[S,e.widget.module]])]),_:1})]),_:1}),t(U),t(Ve,{align:"right"},{default:c(()=>[t(j,{flat:"",label:e.$t("Cancel"),color:"negative",onClick:e.onCancel},null,8,["label","onClick"]),t(j,{flat:"",label:e.$t("Apply"),color:"primary",onClick:e.onSave,disable:e.hasErrors},null,8,["label","onClick","disable"])]),_:1})]),_:1})):y("",!0)]),_:1},8,["model-value"])}var Gn=ie(dn,[["render",En],["__scopeId","data-v-071db1c4"]]);export{Gn as W};
