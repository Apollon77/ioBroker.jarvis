import{_ as L,q as T,Y as w,c as n,d8 as H,dX as C,a4 as l,ds as c,b8 as I,j as k,o as u,d as v,K as p,a2 as f,k as S,d0 as b,w as B,i as D,t as $,e as j,n as z}from"./index-52a12785.js";const F=T({name:"ModuleStateHTML",props:["widget","_containerSize"],setup(e){const m=w(),_=n(()=>e.widget.config);n(()=>({...H.joinConfig(_.value,C)}));const a=l(!1),t=l(null),s=l(),i=(d,y)=>{if(a.value=!0,d)return t.value=d.message||d,t.value;s.value=y},o=n(()=>s.value&&s.value.val||""),M=n(()=>o.value&&typeof o.value=="string"&&o.value.indexOf("<script")>-1),r=e.widget.items&&e.widget.items[0]||{},g=c.get(r.deviceId);let h=[];return g?h=c.listen(g.id,r.primaryStateKey,i):(t.value=m.t("Device {deviceId} not found").replace("{deviceId}",r.deviceId),console.warn("StateHTML",t.value),a.value=!0),I(()=>c.unlisten(h)),{loaded:a,error:t,html:o,hasScript:M}}}),K={class:"jarvis-StateHTML StateHTML"},N=["innerHTML"],V=["srcdoc"];function q(e,m,_,a,t,s){const i=k("alert");return u(),v("div",K,[p(S(b,{indeterminate:""},null,512),[[f,!e.loaded&&!e.error]]),p(S(i,null,{default:B(()=>[D($(e.error),1)]),_:1},512),[[f,e.loaded&&e.error]]),p(j("div",null,[e.hasScript?(u(),v("iframe",{key:1,class:"StateHTML-iFrame",style:z({border:0,height:e._containerSize.height+"px"}),srcdoc:e.html},null,12,V)):(u(),v("div",{key:0,innerHTML:e.html},null,8,N))],512),[[f,e.loaded&&!e.error]])])}var O=L(F,[["render",q],["__scopeId","data-v-529dd270"]]);export{O as default};
