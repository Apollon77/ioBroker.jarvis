import{c as H}from"./vendor.quasar-78ba37d9.js";import{d as h,u as i,p as d,J as j,r as O,o as c,a as u,b as v,v as f,h as y,i as P,j as D,t as I,e as w,y as z}from"./vendor.vue-1bbf3cb4.js";import{u as k}from"./vendor.vue-i18n-e0977824.js";import{M as C}from"./modules-9c8c454f.js";import{P as p,D as _}from"./controllers-596cf83c.js";import{_ as $}from"./helpers-7b53fe93.js";var B={"StateHTML#description":"Zeigt dynamische HTML Inhalte von Datenpunkten an.","Incorrect HTML provided to StateHTML module":"Fehlerhafter HTML Code im StateHTML Modul"},ee=Object.freeze(Object.defineProperty({__proto__:null,default:B},Symbol.toStringTag,{value:"Module"})),K={"StateHTML#description":"Displays dynamic HTML contents from states."},te=Object.freeze(Object.defineProperty({__proto__:null,default:K},Symbol.toStringTag,{value:"Module"})),F={"StateHTML#description":"\u041E\u0442\u043E\u0431\u0440\u0430\u0436\u0430\u0435\u0442 \u0441\u043E\u0434\u0435\u0440\u0436\u0438\u043C\u043E\u0435 \u0434\u0438\u043D\u0430\u043C\u0438\u0447\u0435\u0441\u043A\u043E\u0433\u043E HTML \u0438\u0437 \u0441\u0442\u0430\u0442\u0443\u0441\u0430","Incorrect HTML provided to StateHTML module":"\u041C\u043E\u0434\u0443\u043B\u044E StateHTML \u043F\u0435\u0440\u0435\u0434\u0430\u043D \u043D\u0435\u043A\u043E\u0440\u0440\u0435\u043A\u0442\u043D\u044B\u0439 HTML"},oe=Object.freeze(Object.defineProperty({__proto__:null,default:F},Symbol.toStringTag,{value:"Module"}));const N={addGroup:!1,addDivider:!1,addDevice:{max:1,fields:["primaryStateKey"]}};var T=[],ae=Object.freeze(Object.defineProperty({__proto__:null,Settings:N,default:T},Symbol.toStringTag,{value:"Module"}));const V=h({name:"ModuleStateHTML",props:["widget","_containerSize"],setup(e){const m=k(),S=i(()=>e.widget.config);i(()=>({...C.joinConfig(S.value,T)}));const a=d(!1),o=d(null),r=d(),s=(t,Z,q,L)=>{if(a.value=!0,t)return o.value=t&&t.message||t,o.value;r.value=L},n=i(()=>{let t=r.value&&r.value.val||"";return t=!p.isPro()&&t.indexOf("<link")!==-1?t.replace(/(<link(.*)>)/gi,""):t,t=!p.isPro()&&t.indexOf("<style")!==-1?t.replace(/(<style([\s\S]*?)<\/style>)/g,""):t,t}),b=i(()=>p.isPro()&&n.value&&typeof n.value=="string"&&n.value.indexOf("<script")!==-1),l=e.widget.items&&e.widget.items[0]||{},g=_.get(l.deviceId);let M=[];return g?M=_.listen(g.id,l.primaryStateKey,s):(o.value=m.t("Device {deviceId} not found").replace("{deviceId}",l.deviceId),console.warn("StateHTML",o.value),a.value=!0),j(()=>_.unlisten(M)),{loaded:a,error:o,html:n,hasScript:b}}}),E={class:"jarvis-StateHTML StateHTML"},G=["innerHTML"],J=["srcdoc"];function Q(e,m,S,a,o,r){const s=O("alert");return c(),u("div",E,[v(y(H,{indeterminate:""},null,512),[[f,!e.loaded&&!e.error]]),v(y(s,null,{default:P(()=>[D(I(e.error),1)]),_:1},512),[[f,e.loaded&&e.error]]),v(w("div",null,[e.hasScript?(c(),u("iframe",{key:1,class:"StateHTML-iFrame",style:z({border:0,height:e._containerSize.height+"px"}),srcdoc:e.html},null,12,J)):(c(),u("div",{key:0,innerHTML:e.html},null,8,G))],512),[[f,e.loaded&&!e.error]])])}var U=$(V,[["render",Q],["__scopeId","data-v-01c14b25"]]),re=Object.freeze(Object.defineProperty({__proto__:null,default:U},Symbol.toStringTag,{value:"Module"}));export{re as S,ee as _,te as a,oe as b,ae as c};
