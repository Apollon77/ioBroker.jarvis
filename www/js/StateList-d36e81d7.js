import{_,q as C,az as k,d5 as D,dn as L,a2 as f,y as h,j as g,o as d,a as p,w,d as c,l as K,F as y,g as S,a6 as I,f as b,N as F,dp as r,cG as j}from"./index-7dce1004.js";import"./StateListGroup-dbe1b4b7.js";import z from"./StateListItem-5546b85f.js";const P=C({name:"ModuleStateList",props:["widget","isPopup","openDeviceDetails"],components:{StateListItem:z},setup(t){const m=k(t.widget,"config"),v=D.joinConfig(m.value,L),n=f({}),u=(e,i,a)=>{if(e)return console.warn("StateList",e.message,e),e.message||e;n.value[a.id+":"+i.key]=i};let l=f([]),s=null,o={};return h(()=>{l.value=[],s=null,o={},t.widget.items.forEach(e=>{if(e.type==="group"&&(s=e.id,o[s]={}),e.type==="divider"&&(s=null),e.type==="device"){const i=r.get(e.deviceId);if(!i)j.warn("StateList","Device with ID "+e.deviceId+" not found!");else{l.value.push({item:e,device:i}),s!==null&&o[s]!==void 0&&(o[s][i.id+"#"+e.primaryStateKey]={item:e,device:i});const a=e;n.value[i.id+":"+a.primaryStateKey]={},a.primaryStateKey&&r.listen(i.id,a.primaryStateKey,u),n.value[i.id+":"+a.bodyStateKey]={},a.bodyStateKey&&r.listen(i.id,a.bodyStateKey,u)}}else l.value.push({item:e})})}),{entries:l,groups:o,moduleConfig:v,states:n}}}),$={key:0};function B(t,m,v,n,u,l){const s=g("state-list-group"),o=g("state-list-item");return d(),p(F,{key:t.widget.revision,dense:t.moduleConfig.dense,class:b(["jarvis-StateList",{horizontal:t.moduleConfig.horizontal,stacked:t.moduleConfig.stacked}])},{default:w(()=>[(d(!0),c(y,null,K(t.entries,(e,i)=>(d(),c(y,{key:"item-"+e.item.id},[e.item.type==="group"?(d(),c("div",$)):S("",!0),e.item.type==="group"?(d(),p(s,{key:1,devices:t.groups[e.item.id],deviceConfig:e.item,moduleConfig:t.moduleConfig},null,8,["devices","deviceConfig","moduleConfig"])):e.item.type==="device"?(d(),p(o,{key:"state-list-item-"+e.item.id,isFirstItem:i===0,device:e.device,deviceConfig:e.item,primaryState:t.states[e.device.id+":"+e.item.primaryStateKey],bodyState:t.states[e.device.id+":"+e.item.bodyStateKey],isPopup:t.isPopup,openDeviceDetails:t.openDeviceDetails},null,8,["isFirstItem","device","deviceConfig","primaryState","bodyState","isPopup","openDeviceDetails"])):e.item.type==="divider"?(d(),p(I,{key:3,class:"jarvis-StateListSeparator"})):S("",!0)],64))),128))]),_:1},8,["dense","class"])}var Q=_(P,[["render",B],["__scopeId","data-v-44f7715a"]]);export{Q as default};
