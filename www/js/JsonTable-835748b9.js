var j=Object.defineProperty,W=Object.defineProperties;var R=Object.getOwnPropertyDescriptors;var q=Object.getOwnPropertySymbols;var z=Object.prototype.hasOwnProperty,F=Object.prototype.propertyIsEnumerable;var Q=(e,r,t)=>r in e?j(e,r,{enumerable:!0,configurable:!0,writable:!0,value:t}):e[r]=t,S=(e,r)=>{for(var t in r||(r={}))z.call(r,t)&&Q(e,t,r[t]);if(q)for(var t of q(r))F.call(r,t)&&Q(e,t,r[t]);return e},B=(e,r)=>W(e,R(r));import{dz as requiredArgs,dA as toDate,dB as toInteger,dQ as getUTCISOWeek,dR as getUTCWeek,dS as getUTCWeekYear,dT as startOfUTCWeek,dU as startOfUTCISOWeek,dV as dateLangEn,dW as longFormatters,dX as isProtectedWeekYearToken,dY as throwProtectedError,dZ as isProtectedDayOfYearToken,d_ as subMilliseconds,dL as getTimezoneOffsetInMilliseconds,d$ as assign,_ as _export_sfc,q as defineComponent,X as useI18n,e0 as stripHtml,dd as Pro,d7 as Modules,e1 as ConfigFile,e2 as parseISO,cG as format,dr as Devices,j as resolveComponent,o as openBlock,d as createElementBlock,J as withDirectives,a2 as vShow,k as createVNode,w as withCtx,a as createBlock,Y as createSlots,g as createCommentVNode,n as normalizeStyle,i as createTextVNode,t as toDisplayString,Q as QIcon,W as QInput,e as createBaseVNode,Z as QSelect,a7 as QSeparator,O as QBtn,F as Fragment,l as renderList,f as normalizeClass}from"./index-e79b9e6f.js";import{c as QTable,b as QTd,Q as QTr}from"./QTable-2c5ee13a.js";import"./QVirtualScroll-8ce489da.js";function compareDesc(e,r){requiredArgs(2,arguments);var t=toDate(e),n=toDate(r),a=t.getTime()-n.getTime();return a>0?-1:a<0?1:a}function setUTCDay(e,r,t){requiredArgs(2,arguments);var n=t||{},a=n.locale,o=a&&a.options&&a.options.weekStartsOn,s=o==null?0:toInteger(o),u=n.weekStartsOn==null?s:toInteger(n.weekStartsOn);if(!(u>=0&&u<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var c=toDate(e),p=toInteger(r),m=c.getUTCDay(),h=p%7,T=(h+7)%7,y=(T<u?7:0)+p-m;return c.setUTCDate(c.getUTCDate()+y),c}function setUTCISODay(e,r){requiredArgs(2,arguments);var t=toInteger(r);t%7===0&&(t=t-7);var n=1,a=toDate(e),o=a.getUTCDay(),s=t%7,u=(s+7)%7,c=(u<n?7:0)+t-o;return a.setUTCDate(a.getUTCDate()+c),a}function setUTCISOWeek(e,r){requiredArgs(2,arguments);var t=toDate(e),n=toInteger(r),a=getUTCISOWeek(t)-n;return t.setUTCDate(t.getUTCDate()-a*7),t}function setUTCWeek(e,r,t){requiredArgs(2,arguments);var n=toDate(e),a=toInteger(r),o=getUTCWeek(n,t)-a;return n.setUTCDate(n.getUTCDate()-o*7),n}var MILLISECONDS_IN_HOUR=36e5,MILLISECONDS_IN_MINUTE=6e4,MILLISECONDS_IN_SECOND=1e3,numericPatterns={month:/^(1[0-2]|0?\d)/,date:/^(3[0-1]|[0-2]?\d)/,dayOfYear:/^(36[0-6]|3[0-5]\d|[0-2]?\d?\d)/,week:/^(5[0-3]|[0-4]?\d)/,hour23h:/^(2[0-3]|[0-1]?\d)/,hour24h:/^(2[0-4]|[0-1]?\d)/,hour11h:/^(1[0-1]|0?\d)/,hour12h:/^(1[0-2]|0?\d)/,minute:/^[0-5]?\d/,second:/^[0-5]?\d/,singleDigit:/^\d/,twoDigits:/^\d{1,2}/,threeDigits:/^\d{1,3}/,fourDigits:/^\d{1,4}/,anyDigitsSigned:/^-?\d+/,singleDigitSigned:/^-?\d/,twoDigitsSigned:/^-?\d{1,2}/,threeDigitsSigned:/^-?\d{1,3}/,fourDigitsSigned:/^-?\d{1,4}/},timezonePatterns={basicOptionalMinutes:/^([+-])(\d{2})(\d{2})?|Z/,basic:/^([+-])(\d{2})(\d{2})|Z/,basicOptionalSeconds:/^([+-])(\d{2})(\d{2})((\d{2}))?|Z/,extended:/^([+-])(\d{2}):(\d{2})|Z/,extendedOptionalSeconds:/^([+-])(\d{2}):(\d{2})(:(\d{2}))?|Z/};function parseNumericPattern(e,r,t){var n=r.match(e);if(!n)return null;var a=parseInt(n[0],10);return{value:t?t(a):a,rest:r.slice(n[0].length)}}function parseTimezonePattern(e,r){var t=r.match(e);if(!t)return null;if(t[0]==="Z")return{value:0,rest:r.slice(1)};var n=t[1]==="+"?1:-1,a=t[2]?parseInt(t[2],10):0,o=t[3]?parseInt(t[3],10):0,s=t[5]?parseInt(t[5],10):0;return{value:n*(a*MILLISECONDS_IN_HOUR+o*MILLISECONDS_IN_MINUTE+s*MILLISECONDS_IN_SECOND),rest:r.slice(t[0].length)}}function parseAnyDigitsSigned(e,r){return parseNumericPattern(numericPatterns.anyDigitsSigned,e,r)}function parseNDigits(e,r,t){switch(e){case 1:return parseNumericPattern(numericPatterns.singleDigit,r,t);case 2:return parseNumericPattern(numericPatterns.twoDigits,r,t);case 3:return parseNumericPattern(numericPatterns.threeDigits,r,t);case 4:return parseNumericPattern(numericPatterns.fourDigits,r,t);default:return parseNumericPattern(new RegExp("^\\d{1,"+e+"}"),r,t)}}function parseNDigitsSigned(e,r,t){switch(e){case 1:return parseNumericPattern(numericPatterns.singleDigitSigned,r,t);case 2:return parseNumericPattern(numericPatterns.twoDigitsSigned,r,t);case 3:return parseNumericPattern(numericPatterns.threeDigitsSigned,r,t);case 4:return parseNumericPattern(numericPatterns.fourDigitsSigned,r,t);default:return parseNumericPattern(new RegExp("^-?\\d{1,"+e+"}"),r,t)}}function dayPeriodEnumToHours(e){switch(e){case"morning":return 4;case"evening":return 17;case"pm":case"noon":case"afternoon":return 12;case"am":case"midnight":case"night":default:return 0}}function normalizeTwoDigitYear(e,r){var t=r>0,n=t?r:1-r,a;if(n<=50)a=e||100;else{var o=n+50,s=Math.floor(o/100)*100,u=e>=o%100;a=e+s-(u?100:0)}return t?a:1-a}var DAYS_IN_MONTH=[31,28,31,30,31,30,31,31,30,31,30,31],DAYS_IN_MONTH_LEAP_YEAR=[31,29,31,30,31,30,31,31,30,31,30,31];function isLeapYearIndex(e){return e%400===0||e%4===0&&e%100!==0}var parsers={G:{priority:140,parse:function(e,r,t,n){switch(r){case"G":case"GG":case"GGG":return t.era(e,{width:"abbreviated"})||t.era(e,{width:"narrow"});case"GGGGG":return t.era(e,{width:"narrow"});case"GGGG":default:return t.era(e,{width:"wide"})||t.era(e,{width:"abbreviated"})||t.era(e,{width:"narrow"})}},set:function(e,r,t,n){return r.era=t,e.setUTCFullYear(t,0,1),e.setUTCHours(0,0,0,0),e},incompatibleTokens:["R","u","t","T"]},y:{priority:130,parse:function(e,r,t,n){var a=function(o){return{year:o,isTwoDigitYear:r==="yy"}};switch(r){case"y":return parseNDigits(4,e,a);case"yo":return t.ordinalNumber(e,{unit:"year",valueCallback:a});default:return parseNDigits(r.length,e,a)}},validate:function(e,r,t){return r.isTwoDigitYear||r.year>0},set:function(e,r,t,n){var a=e.getUTCFullYear();if(t.isTwoDigitYear){var o=normalizeTwoDigitYear(t.year,a);return e.setUTCFullYear(o,0,1),e.setUTCHours(0,0,0,0),e}var s=!("era"in r)||r.era===1?t.year:1-t.year;return e.setUTCFullYear(s,0,1),e.setUTCHours(0,0,0,0),e},incompatibleTokens:["Y","R","u","w","I","i","e","c","t","T"]},Y:{priority:130,parse:function(e,r,t,n){var a=function(o){return{year:o,isTwoDigitYear:r==="YY"}};switch(r){case"Y":return parseNDigits(4,e,a);case"Yo":return t.ordinalNumber(e,{unit:"year",valueCallback:a});default:return parseNDigits(r.length,e,a)}},validate:function(e,r,t){return r.isTwoDigitYear||r.year>0},set:function(e,r,t,n){var a=getUTCWeekYear(e,n);if(t.isTwoDigitYear){var o=normalizeTwoDigitYear(t.year,a);return e.setUTCFullYear(o,0,n.firstWeekContainsDate),e.setUTCHours(0,0,0,0),startOfUTCWeek(e,n)}var s=!("era"in r)||r.era===1?t.year:1-t.year;return e.setUTCFullYear(s,0,n.firstWeekContainsDate),e.setUTCHours(0,0,0,0),startOfUTCWeek(e,n)},incompatibleTokens:["y","R","u","Q","q","M","L","I","d","D","i","t","T"]},R:{priority:130,parse:function(e,r,t,n){return parseNDigitsSigned(r==="R"?4:r.length,e)},set:function(e,r,t,n){var a=new Date(0);return a.setUTCFullYear(t,0,4),a.setUTCHours(0,0,0,0),startOfUTCISOWeek(a)},incompatibleTokens:["G","y","Y","u","Q","q","M","L","w","d","D","e","c","t","T"]},u:{priority:130,parse:function(e,r,t,n){return parseNDigitsSigned(r==="u"?4:r.length,e)},set:function(e,r,t,n){return e.setUTCFullYear(t,0,1),e.setUTCHours(0,0,0,0),e},incompatibleTokens:["G","y","Y","R","w","I","i","e","c","t","T"]},Q:{priority:120,parse:function(e,r,t,n){switch(r){case"Q":case"QQ":return parseNDigits(r.length,e);case"Qo":return t.ordinalNumber(e,{unit:"quarter"});case"QQQ":return t.quarter(e,{width:"abbreviated",context:"formatting"})||t.quarter(e,{width:"narrow",context:"formatting"});case"QQQQQ":return t.quarter(e,{width:"narrow",context:"formatting"});case"QQQQ":default:return t.quarter(e,{width:"wide",context:"formatting"})||t.quarter(e,{width:"abbreviated",context:"formatting"})||t.quarter(e,{width:"narrow",context:"formatting"})}},validate:function(e,r,t){return r>=1&&r<=4},set:function(e,r,t,n){return e.setUTCMonth((t-1)*3,1),e.setUTCHours(0,0,0,0),e},incompatibleTokens:["Y","R","q","M","L","w","I","d","D","i","e","c","t","T"]},q:{priority:120,parse:function(e,r,t,n){switch(r){case"q":case"qq":return parseNDigits(r.length,e);case"qo":return t.ordinalNumber(e,{unit:"quarter"});case"qqq":return t.quarter(e,{width:"abbreviated",context:"standalone"})||t.quarter(e,{width:"narrow",context:"standalone"});case"qqqqq":return t.quarter(e,{width:"narrow",context:"standalone"});case"qqqq":default:return t.quarter(e,{width:"wide",context:"standalone"})||t.quarter(e,{width:"abbreviated",context:"standalone"})||t.quarter(e,{width:"narrow",context:"standalone"})}},validate:function(e,r,t){return r>=1&&r<=4},set:function(e,r,t,n){return e.setUTCMonth((t-1)*3,1),e.setUTCHours(0,0,0,0),e},incompatibleTokens:["Y","R","Q","M","L","w","I","d","D","i","e","c","t","T"]},M:{priority:110,parse:function(e,r,t,n){var a=function(o){return o-1};switch(r){case"M":return parseNumericPattern(numericPatterns.month,e,a);case"MM":return parseNDigits(2,e,a);case"Mo":return t.ordinalNumber(e,{unit:"month",valueCallback:a});case"MMM":return t.month(e,{width:"abbreviated",context:"formatting"})||t.month(e,{width:"narrow",context:"formatting"});case"MMMMM":return t.month(e,{width:"narrow",context:"formatting"});case"MMMM":default:return t.month(e,{width:"wide",context:"formatting"})||t.month(e,{width:"abbreviated",context:"formatting"})||t.month(e,{width:"narrow",context:"formatting"})}},validate:function(e,r,t){return r>=0&&r<=11},set:function(e,r,t,n){return e.setUTCMonth(t,1),e.setUTCHours(0,0,0,0),e},incompatibleTokens:["Y","R","q","Q","L","w","I","D","i","e","c","t","T"]},L:{priority:110,parse:function(e,r,t,n){var a=function(o){return o-1};switch(r){case"L":return parseNumericPattern(numericPatterns.month,e,a);case"LL":return parseNDigits(2,e,a);case"Lo":return t.ordinalNumber(e,{unit:"month",valueCallback:a});case"LLL":return t.month(e,{width:"abbreviated",context:"standalone"})||t.month(e,{width:"narrow",context:"standalone"});case"LLLLL":return t.month(e,{width:"narrow",context:"standalone"});case"LLLL":default:return t.month(e,{width:"wide",context:"standalone"})||t.month(e,{width:"abbreviated",context:"standalone"})||t.month(e,{width:"narrow",context:"standalone"})}},validate:function(e,r,t){return r>=0&&r<=11},set:function(e,r,t,n){return e.setUTCMonth(t,1),e.setUTCHours(0,0,0,0),e},incompatibleTokens:["Y","R","q","Q","M","w","I","D","i","e","c","t","T"]},w:{priority:100,parse:function(e,r,t,n){switch(r){case"w":return parseNumericPattern(numericPatterns.week,e);case"wo":return t.ordinalNumber(e,{unit:"week"});default:return parseNDigits(r.length,e)}},validate:function(e,r,t){return r>=1&&r<=53},set:function(e,r,t,n){return startOfUTCWeek(setUTCWeek(e,t,n),n)},incompatibleTokens:["y","R","u","q","Q","M","L","I","d","D","i","t","T"]},I:{priority:100,parse:function(e,r,t,n){switch(r){case"I":return parseNumericPattern(numericPatterns.week,e);case"Io":return t.ordinalNumber(e,{unit:"week"});default:return parseNDigits(r.length,e)}},validate:function(e,r,t){return r>=1&&r<=53},set:function(e,r,t,n){return startOfUTCISOWeek(setUTCISOWeek(e,t,n),n)},incompatibleTokens:["y","Y","u","q","Q","M","L","w","d","D","e","c","t","T"]},d:{priority:90,subPriority:1,parse:function(e,r,t,n){switch(r){case"d":return parseNumericPattern(numericPatterns.date,e);case"do":return t.ordinalNumber(e,{unit:"date"});default:return parseNDigits(r.length,e)}},validate:function(e,r,t){var n=e.getUTCFullYear(),a=isLeapYearIndex(n),o=e.getUTCMonth();return a?r>=1&&r<=DAYS_IN_MONTH_LEAP_YEAR[o]:r>=1&&r<=DAYS_IN_MONTH[o]},set:function(e,r,t,n){return e.setUTCDate(t),e.setUTCHours(0,0,0,0),e},incompatibleTokens:["Y","R","q","Q","w","I","D","i","e","c","t","T"]},D:{priority:90,subPriority:1,parse:function(e,r,t,n){switch(r){case"D":case"DD":return parseNumericPattern(numericPatterns.dayOfYear,e);case"Do":return t.ordinalNumber(e,{unit:"date"});default:return parseNDigits(r.length,e)}},validate:function(e,r,t){var n=e.getUTCFullYear(),a=isLeapYearIndex(n);return a?r>=1&&r<=366:r>=1&&r<=365},set:function(e,r,t,n){return e.setUTCMonth(0,t),e.setUTCHours(0,0,0,0),e},incompatibleTokens:["Y","R","q","Q","M","L","w","I","d","E","i","e","c","t","T"]},E:{priority:90,parse:function(e,r,t,n){switch(r){case"E":case"EE":case"EEE":return t.day(e,{width:"abbreviated",context:"formatting"})||t.day(e,{width:"short",context:"formatting"})||t.day(e,{width:"narrow",context:"formatting"});case"EEEEE":return t.day(e,{width:"narrow",context:"formatting"});case"EEEEEE":return t.day(e,{width:"short",context:"formatting"})||t.day(e,{width:"narrow",context:"formatting"});case"EEEE":default:return t.day(e,{width:"wide",context:"formatting"})||t.day(e,{width:"abbreviated",context:"formatting"})||t.day(e,{width:"short",context:"formatting"})||t.day(e,{width:"narrow",context:"formatting"})}},validate:function(e,r,t){return r>=0&&r<=6},set:function(e,r,t,n){return e=setUTCDay(e,t,n),e.setUTCHours(0,0,0,0),e},incompatibleTokens:["D","i","e","c","t","T"]},e:{priority:90,parse:function(e,r,t,n){var a=function(o){var s=Math.floor((o-1)/7)*7;return(o+n.weekStartsOn+6)%7+s};switch(r){case"e":case"ee":return parseNDigits(r.length,e,a);case"eo":return t.ordinalNumber(e,{unit:"day",valueCallback:a});case"eee":return t.day(e,{width:"abbreviated",context:"formatting"})||t.day(e,{width:"short",context:"formatting"})||t.day(e,{width:"narrow",context:"formatting"});case"eeeee":return t.day(e,{width:"narrow",context:"formatting"});case"eeeeee":return t.day(e,{width:"short",context:"formatting"})||t.day(e,{width:"narrow",context:"formatting"});case"eeee":default:return t.day(e,{width:"wide",context:"formatting"})||t.day(e,{width:"abbreviated",context:"formatting"})||t.day(e,{width:"short",context:"formatting"})||t.day(e,{width:"narrow",context:"formatting"})}},validate:function(e,r,t){return r>=0&&r<=6},set:function(e,r,t,n){return e=setUTCDay(e,t,n),e.setUTCHours(0,0,0,0),e},incompatibleTokens:["y","R","u","q","Q","M","L","I","d","D","E","i","c","t","T"]},c:{priority:90,parse:function(e,r,t,n){var a=function(o){var s=Math.floor((o-1)/7)*7;return(o+n.weekStartsOn+6)%7+s};switch(r){case"c":case"cc":return parseNDigits(r.length,e,a);case"co":return t.ordinalNumber(e,{unit:"day",valueCallback:a});case"ccc":return t.day(e,{width:"abbreviated",context:"standalone"})||t.day(e,{width:"short",context:"standalone"})||t.day(e,{width:"narrow",context:"standalone"});case"ccccc":return t.day(e,{width:"narrow",context:"standalone"});case"cccccc":return t.day(e,{width:"short",context:"standalone"})||t.day(e,{width:"narrow",context:"standalone"});case"cccc":default:return t.day(e,{width:"wide",context:"standalone"})||t.day(e,{width:"abbreviated",context:"standalone"})||t.day(e,{width:"short",context:"standalone"})||t.day(e,{width:"narrow",context:"standalone"})}},validate:function(e,r,t){return r>=0&&r<=6},set:function(e,r,t,n){return e=setUTCDay(e,t,n),e.setUTCHours(0,0,0,0),e},incompatibleTokens:["y","R","u","q","Q","M","L","I","d","D","E","i","e","t","T"]},i:{priority:90,parse:function(e,r,t,n){var a=function(o){return o===0?7:o};switch(r){case"i":case"ii":return parseNDigits(r.length,e);case"io":return t.ordinalNumber(e,{unit:"day"});case"iii":return t.day(e,{width:"abbreviated",context:"formatting",valueCallback:a})||t.day(e,{width:"short",context:"formatting",valueCallback:a})||t.day(e,{width:"narrow",context:"formatting",valueCallback:a});case"iiiii":return t.day(e,{width:"narrow",context:"formatting",valueCallback:a});case"iiiiii":return t.day(e,{width:"short",context:"formatting",valueCallback:a})||t.day(e,{width:"narrow",context:"formatting",valueCallback:a});case"iiii":default:return t.day(e,{width:"wide",context:"formatting",valueCallback:a})||t.day(e,{width:"abbreviated",context:"formatting",valueCallback:a})||t.day(e,{width:"short",context:"formatting",valueCallback:a})||t.day(e,{width:"narrow",context:"formatting",valueCallback:a})}},validate:function(e,r,t){return r>=1&&r<=7},set:function(e,r,t,n){return e=setUTCISODay(e,t,n),e.setUTCHours(0,0,0,0),e},incompatibleTokens:["y","Y","u","q","Q","M","L","w","d","D","E","e","c","t","T"]},a:{priority:80,parse:function(e,r,t,n){switch(r){case"a":case"aa":case"aaa":return t.dayPeriod(e,{width:"abbreviated",context:"formatting"})||t.dayPeriod(e,{width:"narrow",context:"formatting"});case"aaaaa":return t.dayPeriod(e,{width:"narrow",context:"formatting"});case"aaaa":default:return t.dayPeriod(e,{width:"wide",context:"formatting"})||t.dayPeriod(e,{width:"abbreviated",context:"formatting"})||t.dayPeriod(e,{width:"narrow",context:"formatting"})}},set:function(e,r,t,n){return e.setUTCHours(dayPeriodEnumToHours(t),0,0,0),e},incompatibleTokens:["b","B","H","k","t","T"]},b:{priority:80,parse:function(e,r,t,n){switch(r){case"b":case"bb":case"bbb":return t.dayPeriod(e,{width:"abbreviated",context:"formatting"})||t.dayPeriod(e,{width:"narrow",context:"formatting"});case"bbbbb":return t.dayPeriod(e,{width:"narrow",context:"formatting"});case"bbbb":default:return t.dayPeriod(e,{width:"wide",context:"formatting"})||t.dayPeriod(e,{width:"abbreviated",context:"formatting"})||t.dayPeriod(e,{width:"narrow",context:"formatting"})}},set:function(e,r,t,n){return e.setUTCHours(dayPeriodEnumToHours(t),0,0,0),e},incompatibleTokens:["a","B","H","k","t","T"]},B:{priority:80,parse:function(e,r,t,n){switch(r){case"B":case"BB":case"BBB":return t.dayPeriod(e,{width:"abbreviated",context:"formatting"})||t.dayPeriod(e,{width:"narrow",context:"formatting"});case"BBBBB":return t.dayPeriod(e,{width:"narrow",context:"formatting"});case"BBBB":default:return t.dayPeriod(e,{width:"wide",context:"formatting"})||t.dayPeriod(e,{width:"abbreviated",context:"formatting"})||t.dayPeriod(e,{width:"narrow",context:"formatting"})}},set:function(e,r,t,n){return e.setUTCHours(dayPeriodEnumToHours(t),0,0,0),e},incompatibleTokens:["a","b","t","T"]},h:{priority:70,parse:function(e,r,t,n){switch(r){case"h":return parseNumericPattern(numericPatterns.hour12h,e);case"ho":return t.ordinalNumber(e,{unit:"hour"});default:return parseNDigits(r.length,e)}},validate:function(e,r,t){return r>=1&&r<=12},set:function(e,r,t,n){var a=e.getUTCHours()>=12;return a&&t<12?e.setUTCHours(t+12,0,0,0):!a&&t===12?e.setUTCHours(0,0,0,0):e.setUTCHours(t,0,0,0),e},incompatibleTokens:["H","K","k","t","T"]},H:{priority:70,parse:function(e,r,t,n){switch(r){case"H":return parseNumericPattern(numericPatterns.hour23h,e);case"Ho":return t.ordinalNumber(e,{unit:"hour"});default:return parseNDigits(r.length,e)}},validate:function(e,r,t){return r>=0&&r<=23},set:function(e,r,t,n){return e.setUTCHours(t,0,0,0),e},incompatibleTokens:["a","b","h","K","k","t","T"]},K:{priority:70,parse:function(e,r,t,n){switch(r){case"K":return parseNumericPattern(numericPatterns.hour11h,e);case"Ko":return t.ordinalNumber(e,{unit:"hour"});default:return parseNDigits(r.length,e)}},validate:function(e,r,t){return r>=0&&r<=11},set:function(e,r,t,n){var a=e.getUTCHours()>=12;return a&&t<12?e.setUTCHours(t+12,0,0,0):e.setUTCHours(t,0,0,0),e},incompatibleTokens:["h","H","k","t","T"]},k:{priority:70,parse:function(e,r,t,n){switch(r){case"k":return parseNumericPattern(numericPatterns.hour24h,e);case"ko":return t.ordinalNumber(e,{unit:"hour"});default:return parseNDigits(r.length,e)}},validate:function(e,r,t){return r>=1&&r<=24},set:function(e,r,t,n){var a=t<=24?t%24:t;return e.setUTCHours(a,0,0,0),e},incompatibleTokens:["a","b","h","H","K","t","T"]},m:{priority:60,parse:function(e,r,t,n){switch(r){case"m":return parseNumericPattern(numericPatterns.minute,e);case"mo":return t.ordinalNumber(e,{unit:"minute"});default:return parseNDigits(r.length,e)}},validate:function(e,r,t){return r>=0&&r<=59},set:function(e,r,t,n){return e.setUTCMinutes(t,0,0),e},incompatibleTokens:["t","T"]},s:{priority:50,parse:function(e,r,t,n){switch(r){case"s":return parseNumericPattern(numericPatterns.second,e);case"so":return t.ordinalNumber(e,{unit:"second"});default:return parseNDigits(r.length,e)}},validate:function(e,r,t){return r>=0&&r<=59},set:function(e,r,t,n){return e.setUTCSeconds(t,0),e},incompatibleTokens:["t","T"]},S:{priority:30,parse:function(e,r,t,n){var a=function(o){return Math.floor(o*Math.pow(10,-r.length+3))};return parseNDigits(r.length,e,a)},set:function(e,r,t,n){return e.setUTCMilliseconds(t),e},incompatibleTokens:["t","T"]},X:{priority:10,parse:function(e,r,t,n){switch(r){case"X":return parseTimezonePattern(timezonePatterns.basicOptionalMinutes,e);case"XX":return parseTimezonePattern(timezonePatterns.basic,e);case"XXXX":return parseTimezonePattern(timezonePatterns.basicOptionalSeconds,e);case"XXXXX":return parseTimezonePattern(timezonePatterns.extendedOptionalSeconds,e);case"XXX":default:return parseTimezonePattern(timezonePatterns.extended,e)}},set:function(e,r,t,n){return r.timestampIsSet?e:new Date(e.getTime()-t)},incompatibleTokens:["t","T","x"]},x:{priority:10,parse:function(e,r,t,n){switch(r){case"x":return parseTimezonePattern(timezonePatterns.basicOptionalMinutes,e);case"xx":return parseTimezonePattern(timezonePatterns.basic,e);case"xxxx":return parseTimezonePattern(timezonePatterns.basicOptionalSeconds,e);case"xxxxx":return parseTimezonePattern(timezonePatterns.extendedOptionalSeconds,e);case"xxx":default:return parseTimezonePattern(timezonePatterns.extended,e)}},set:function(e,r,t,n){return r.timestampIsSet?e:new Date(e.getTime()-t)},incompatibleTokens:["t","T","X"]},t:{priority:40,parse:function(e,r,t,n){return parseAnyDigitsSigned(e)},set:function(e,r,t,n){return[new Date(t*1e3),{timestampIsSet:!0}]},incompatibleTokens:"*"},T:{priority:20,parse:function(e,r,t,n){return parseAnyDigitsSigned(e)},set:function(e,r,t,n){return[new Date(t),{timestampIsSet:!0}]},incompatibleTokens:"*"}},parsers$1=parsers,TIMEZONE_UNIT_PRIORITY=10,formattingTokensRegExp=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,longFormattingTokensRegExp=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,escapedStringRegExp=/^'([^]*?)'?$/,doubleQuoteRegExp=/''/g,notWhitespaceRegExp=/\S/,unescapedLatinCharacterRegExp=/[a-zA-Z]/;function parse(e,r,t,n){requiredArgs(3,arguments);var a=String(e),o=String(r),s=n||{},u=s.locale||dateLangEn;if(!u.match)throw new RangeError("locale must contain match property");var c=u.options&&u.options.firstWeekContainsDate,p=c==null?1:toInteger(c),m=s.firstWeekContainsDate==null?p:toInteger(s.firstWeekContainsDate);if(!(m>=1&&m<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var h=u.options&&u.options.weekStartsOn,T=h==null?0:toInteger(h),y=s.weekStartsOn==null?T:toInteger(s.weekStartsOn);if(!(y>=0&&y<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");if(o==="")return a===""?toDate(t):new Date(NaN);var x={firstWeekContainsDate:m,weekStartsOn:y,locale:u},k=[{priority:TIMEZONE_UNIT_PRIORITY,subPriority:-1,set:dateToSystemTimezone,index:0}],w,E=o.match(longFormattingTokensRegExp).map(function(d){var f=d[0];if(f==="p"||f==="P"){var C=longFormatters[f];return C(d,u.formatLong,x)}return d}).join("").match(formattingTokensRegExp),b=[];for(w=0;w<E.length;w++){var l=E[w];!s.useAdditionalWeekYearTokens&&isProtectedWeekYearToken(l)&&throwProtectedError(l,o,e),!s.useAdditionalDayOfYearTokens&&isProtectedDayOfYearToken(l)&&throwProtectedError(l,o,e);var v=l[0],g=parsers$1[v];if(g){var M=g.incompatibleTokens;if(Array.isArray(M)){for(var I=void 0,N=0;N<b.length;N++){var Y=b[N].token;if(M.indexOf(Y)!==-1||Y===v){I=b[N];break}}if(I)throw new RangeError("The format string mustn't contain `".concat(I.fullToken,"` and `").concat(l,"` at the same time"))}else if(g.incompatibleTokens==="*"&&b.length)throw new RangeError("The format string mustn't contain `".concat(l,"` and any other token at the same time"));b.push({token:v,fullToken:l});var U=g.parse(a,l,u.match,x);if(!U)return new Date(NaN);k.push({priority:g.priority,subPriority:g.subPriority||0,set:g.set,validate:g.validate,value:U.value,index:k.length}),a=U.rest}else{if(v.match(unescapedLatinCharacterRegExp))throw new RangeError("Format string contains an unescaped latin alphabet character `"+v+"`");if(l==="''"?l="'":v==="'"&&(l=cleanEscapedString(l)),a.indexOf(l)===0)a=a.slice(l.length);else return new Date(NaN)}}if(a.length>0&&notWhitespaceRegExp.test(a))return new Date(NaN);var L=k.map(function(d){return d.priority}).sort(function(d,f){return f-d}).filter(function(d,f,C){return C.indexOf(d)===f}).map(function(d){return k.filter(function(f){return f.priority===d}).sort(function(f,C){return C.subPriority-f.subPriority})}).map(function(d){return d[0]}),O=toDate(t);if(isNaN(O))return new Date(NaN);var _=subMilliseconds(O,getTimezoneOffsetInMilliseconds(O)),H={};for(w=0;w<L.length;w++){var D=L[w];if(D.validate&&!D.validate(_,D.value,x))return new Date(NaN);var P=D.set(_,H,D.value,x);P[0]?(_=P[0],assign(H,P[1])):_=P}return _}function dateToSystemTimezone(e,r){if(r.timestampIsSet)return e;var t=new Date(0);return t.setFullYear(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate()),t.setHours(e.getUTCHours(),e.getUTCMinutes(),e.getUTCSeconds(),e.getUTCMilliseconds()),t}function cleanEscapedString(e){return e.match(escapedStringRegExp)[1].replace(doubleQuoteRegExp,"'")}var JsonTable_vue_vue_type_style_index_0_lang="";const _sfc_main=defineComponent({name:"ModuleJsonTable",props:["widget","_containerSize"],setup(){return{i18n:useI18n()}},data(){return this.stripHtml=stripHtml,{size:this._containerSize,filter:"",columns:[],columnsVisible:[],loaded:!1,error:!1,json:[],isPro:Pro.isPro()}},computed:{config(){const e=Modules.joinConfig(this.widget.config,ConfigFile);return e.thead=e.thead||[],e},deviceConfig(){return this.widget.items&&this.widget.items[0]||{}},style(){return{height:this.size.height+"px"}},pagination(){return{sortBy:this.config.sortColumn?this.config.sortColumn.toLowerCase():"",descending:this.config.sortDirection!==void 0?this.config.sortDirection:!1,rowsPerPage:this.config.rowsPerPage>=0?this.config.rowsPerPage:10}}},methods:{gotState(e,r){if(e){this.loaded=!0;return}this.error=!1,this.json=this.parse(r.val)},parse(data){if(!data)return[];let json=this.convertToJson(data);try{if(json=typeof json=="string"?JSON.parse(json):json,json=this.flatten(json),!Array.isArray(json)&&typeof json!="object")throw new Error("JSON must be array of objects.");const columns=[],columnsVisible=[];let theads=this.config.thead&&this.config.thead.length>0?this.config.thead:!json||!json[0]?[]:Object.keys(json[0]).map(e=>({field:e,label:e}));if(!Array.isArray(json)||this.config.object===!0){const e=[];theads=this.config.thead&&this.config.thead.length>0?this.config.thead:[{field:this.i18n.t("Column")+" A"},{field:this.i18n.t("Column")+" B"}],json=json[0]||json;for(const r in json){const t=json[r];e.push({[theads[0].field||theads[0].label]:r,[theads[1].field||theads[1].label]:t})}json=e}if(json.length>0)for(const i in theads){const thead=theads[i],columnKey=thead.field||Object.keys(json[0])[i];let val=json[0][columnKey];const parsedFloat=parseFloat(val),column=B(S({label:columnKey,align:"left",sortable:!0},thead),{name:columnKey.toLowerCase(),field:columnKey});if(thead.format&&Pro.isPro())try{column.format=eval(thead.format),val=column.format(val)}catch(e){this.error=e.message,console.error(e)}else thead.format&&!Pro.isPro()&&Pro.warn("JsonTable: Callback for format only available in Pro.");if(/\\d{4}-\\d{2}-\\d{2}([ |T]\\d{2}:\\d{2}:\\d{2}Z?)?/.test(val))column.sort=(e,r)=>compareDesc(parseISO(e),parseISO(r)),column.format=e=>format(e);else if(/(0[1-9]|[12][0-9]|3[01])[.](0[1-9]|1[012])[.]((19|20)[0-9]{2})?/.test(val)){const e=new Date;column.sort=(r,t)=>(r=r&&r.endsWith(".")?r+""+e.getFullYear():r&&!r.endsWith(".")&&r.indexOf(".")===r.lastIndexOf(".")?r+"."+e.getFullYear():r,t=t&&t.endsWith(".")?t+""+e.getFullYear():t&&!t.endsWith(".")&&t.indexOf(".")===t.lastIndexOf(".")?t+"."+e.getFullYear():t,r&&t?compareDesc(parse(r,"dd.MM.yyyy",new Date),parse(t,"dd.MM.yyyy",new Date)):0)}else/\\d{2}:\\d{2}(:\\d{2})?/.test(val)?column.sort=(e,r)=>(e=e.replace(/:/,""),r=r.replace(/:/,""),e===r?0:e>r?1:-1):/((25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)(\.|$)){4}/.test(val)?column.sort=(e,r)=>(e=e.split(".").map(t=>("00"+t).slice(-3)).join(""),r=r.split(".").map(t=>("00"+t).slice(-3)).join(""),e===r?0:e>r?1:-1):Number.isNaN(parsedFloat)||(column.sort=(e,r)=>(e=parseFloat(e),r=parseFloat(r),e===r?0:e>r?1:-1));columns.push(column),column.visible!==!1&&columnsVisible.push(columnKey.toLowerCase())}this.columns=columns,this.columnsVisible=columnsVisible}catch(e){console.warn(e),this.error=e.message,json=[]}return this.config.max>0?json.slice(0,this.config.max):json},flatten(e){return e.map(r=>this.flat(r))},flat(e){let r={};for(const t in e){let n=e[t];if(typeof n=="object"&&!Array.isArray(n)){n=this.flat(n);const a={};for(const o in n)a[t+"."+o]=n[o];r=S(S({},r),a)}else r[t]=n}return r},extractLabel(e){const r=e.indexOf(">")+1,t=e.indexOf("</",r);return e.substr(r,t-r)},convertToJson(e){let r=e;if(r&&r.indexOf("<table")!==-1&&r.indexOf("<tr")!==-1){const t=r.substr(r.indexOf("<table")),n=t.substr(0,t.indexOf("</table>")),a=n.substr(n.indexOf(">")+1),o=a.split("<tr");o.shift();const s=r.indexOf("<th")!==-1?a.split("<th"):o[0];s.shift();const u=s.map(p=>p?stripHtml(this.extractLabel(p)):"");o.shift();const c=[];o.forEach(p=>{const m=p.split("<td");m.shift();const h={};m.forEach((T,y)=>{h[u[y]]=T?stripHtml(this.extractLabel(T)):""}),Object.keys(h).length===u.length&&c.push(h)}),r=JSON.stringify(c)}return r}},watch:{_containerSize(e){this.size=e},deviceConfig:{immediate:!0,handler:function(e){this.device=Devices.get(e.deviceId),this.device?Devices.listen(this.device.id,e.primaryStateKey,this.gotState):(this.error="JsonTable: "+this.i18n.t("Device {deviceId} not found").replace("{deviceId}",e.deviceId),console.warn(this.error),this.loaded=!0)}}},beforeUnmount(){this.device&&Devices.unlisten(this.device.id,this.deviceConfig.primaryStateKey,this.gotState)}}),_hoisted_1={class:"row"},_hoisted_2=["innerHTML"],_hoisted_3={key:1};function _sfc_render(e,r,t,n,a,o){const s=resolveComponent("alert");return openBlock(),createElementBlock("div",{class:"jarvis-JsonTable-Container",style:normalizeStyle(e.style),key:e.widget.revision},[withDirectives(createVNode(s,null,{default:withCtx(()=>[createTextVNode(toDisplayString(e.error),1)]),_:1},512),[[vShow,e.error]]),e.device?withDirectives((openBlock(),createBlock(QTable,{key:0,rows:e.json,filter:e.filter,flat:"",dense:e.config.dense,pagination:e.pagination,"binary-state-sort":"",columns:e.columns,"row-key":"name","visible-columns":e.columnsVisible,class:"jarvis-JsonTable sticky-table-header full-height"},createSlots({body:withCtx(u=>[createVNode(QTr,{props:u},{default:withCtx(()=>[(openBlock(!0),createElementBlock(Fragment,null,renderList(u.cols,c=>(openBlock(),createBlock(QTd,{key:c.field,class:normalizeClass({[u.rowIndex%2!==1?"jarvis-JsonTable-row-odd":"jarvis-JsonTable-row-even"]:!0}),align:c.align},{default:withCtx(()=>[e.isPro?(openBlock(),createElementBlock("div",{key:0,innerHTML:c.value},null,8,_hoisted_2)):(openBlock(),createElementBlock("div",_hoisted_3,toDisplayString(c.value),1))]),_:2},1032,["class","align"]))),128))]),_:2},1032,["props"])]),_:2},[e.config.hideFilter!==!0?{name:"top-left",fn:withCtx(()=>[withDirectives(createVNode(QInput,{borderless:"",dense:"",debounce:"300",modelValue:e.filter,"onUpdate:modelValue":r[0]||(r[0]=u=>e.filter=u),placeholder:e.$t("Search"),style:{"max-width":"120px"}},{prepend:withCtx(()=>[createVNode(QIcon,{name:"search"})]),_:1},8,["modelValue","placeholder"]),[[vShow,e.json&&e.json.length>0]])])}:void 0,e.config.hideColumnsSelector!==!0||e.config.hideFullscreenButton!==!0?{name:"top-right",fn:withCtx(u=>[withDirectives(createBaseVNode("div",_hoisted_1,[e.config.hideColumnsSelector!==!0?(openBlock(),createBlock(QSelect,{key:0,modelValue:e.columnsVisible,"onUpdate:modelValue":r[1]||(r[1]=c=>e.columnsVisible=c),multiple:"",outlined:"",dense:"","options-dense":"","display-value":e.$q.lang.table.columns,"emit-value":"","map-options":"",options:e.columns,"option-value":"name","options-cover":"",style:{"min-width":"150px"}},null,8,["modelValue","display-value","options"])):createCommentVNode("",!0),e.config.hideColumnsSelector!==!0&&e.config.hideFullscreenButton!==!0?(openBlock(),createBlock(QSeparator,{key:1,vertical:"",class:"q-mx-sm"})):createCommentVNode("",!0),e.config.hideFullscreenButton!==!0?(openBlock(),createBlock(QBtn,{key:2,flat:"",round:"",dense:"",icon:u.inFullscreen?"fullscreen_exit":"fullscreen",onClick:u.toggleFullscreen,style:{width:"40px"}},null,8,["icon","onClick"])):createCommentVNode("",!0)],512),[[vShow,e.json&&e.json.length>0]])])}:void 0]),1032,["rows","filter","dense","pagination","columns","visible-columns"])),[[vShow,!e.error]]):createCommentVNode("",!0)],4)}var JsonTable=_export_sfc(_sfc_main,[["render",_sfc_render]]);export{JsonTable as default};
