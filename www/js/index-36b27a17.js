import{bt as F,a4 as W,bM as G,bN as R,k as w,as as z,aw as Y,cH as J,aG as O,ay as m,W as v,b3 as y,bn as _,X as r,a2 as s,b1 as d,a1 as T,D as p,bT as h,I,aE as E,bU as k,cP as U,bS as L,bH as X,dk as N,dh as C,U as Z,bG as $,bO as q,bp as K,A as x,bF as ee}from"./index-11c4bfce.js";import{m as te}from"./marked.esm-4cbe47a7.js";/*!
 * paypal-js v5.1.1 (2022-08-03T17:21:59.218Z)
 * Copyright 2020-present, PayPal, Inc. All rights reserved.
 *
 * Licensed under the Apache License, Version 2.0 (the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http://www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */function ne(e,t){var n=document.querySelector('script[src="'.concat(e,'"]'));if(n===null)return null;var o=V(e,t),i=n.cloneNode();if(delete i.dataset.uidAuto,Object.keys(i.dataset).length!==Object.keys(o.dataset).length)return null;var l=!0;return Object.keys(i.dataset).forEach(function(c){i.dataset[c]!==o.dataset[c]&&(l=!1)}),l?n:null}function ae(e){var t=e.url,n=e.attributes,o=e.onSuccess,i=e.onError,l=V(t,n);l.onerror=i,l.onload=o,document.head.insertBefore(l,document.head.firstElementChild)}function re(e){var t="https://www.paypal.com/sdk/js";e.sdkBaseURL&&(t=e.sdkBaseURL,delete e.sdkBaseURL),le(e);var n=Object.keys(e).filter(function(l){return typeof e[l]!="undefined"&&e[l]!==null&&e[l]!==""}).reduce(function(l,c){var u=e[c].toString();return c.substring(0,5)==="data-"?l.dataAttributes[c]=u:l.queryParams[c]=u,l},{queryParams:{},dataAttributes:{}}),o=n.queryParams,i=n.dataAttributes;return{url:"".concat(t,"?").concat(se(o)),dataAttributes:i}}function se(e){var t="";return Object.keys(e).forEach(function(n){t.length!==0&&(t+="&"),t+=n+"="+e[n]}),t}function oe(e){var t=e.split("/* Original Error:")[1];return t?t.replace(/\n/g,"").replace("*/","").trim():e}function V(e,t){t===void 0&&(t={});var n=document.createElement("script");return n.src=e,Object.keys(t).forEach(function(o){n.setAttribute(o,t[o]),o==="data-csp-nonce"&&n.setAttribute("nonce",t["data-csp-nonce"])}),n}function le(e){var t=e["merchant-id"],n=e["data-merchant-id"],o="",i="";return Array.isArray(t)?t.length>1?(o="*",i=t.toString()):o=t.toString():typeof t=="string"&&t.length>0?o=t:typeof n=="string"&&n.length>0&&(o="*",i=n),e["merchant-id"]=o,e["data-merchant-id"]=i,e}function ie(e,t){if(t===void 0&&(t=P()),j(e,t),typeof window=="undefined")return t.resolve(null);var n=re(e),o=n.url,i=n.dataAttributes,l=i["data-namespace"]||"paypal",c=H(l);return ne(o,i)&&c?t.resolve(c):ue({url:o,attributes:i},t).then(function(){var u=H(l);if(u)return u;throw new Error("The window.".concat(l," global variable is not available."))})}function ue(e,t){t===void 0&&(t=P()),j(e,t);var n=e.url,o=e.attributes;if(typeof n!="string"||n.length===0)throw new Error("Invalid url.");if(typeof o!="undefined"&&typeof o!="object")throw new Error("Expected attributes to be an object.");return new t(function(i,l){if(typeof window=="undefined")return i();ae({url:n,attributes:o,onSuccess:function(){return i()},onError:function(){var c=new Error('The script "'.concat(n,'" failed to load.'));return window.fetch?fetch(n).then(function(u){return u.status===200&&l(c),u.text()}).then(function(u){var a=oe(u);l(new Error(a))}).catch(function(u){l(u)}):l(c)}})})}function P(){if(typeof Promise=="undefined")throw new Error("Promise is undefined. To resolve the issue, use a Promise polyfill.");return Promise}function H(e){return window[e]}function j(e,t){if(typeof e!="object"||e===null)throw new Error("Expected an options object.");if(typeof t!="undefined"&&typeof t!="function")throw new Error("Expected PromisePonyfill to be a function.")}const ce=W({name:"AccountPage",setup(){console.log("AccountPage","setup()");const e=G();R();const t="Ad8Db5feNlBy6SdFa7O0fpJ2QYIcyFO9SGSg4tNpxOgOlLyWTkN6JmOFBV58ItTpdUwfBGW2L8WuoIAn",n=w(),o=w(!1),i=w(null),l=w(null),c=w(null),u=w(null),a=w(!1),B=()=>{i.value=null,l.value&&(c.value||u.value)&&(a.value=!0,N.post("user/invoice",{action:c.value?"getInvoicesBySubscriptionId":"getInvoicesByInvoiceId",email:l.value,subscriptionId:c.value,invoiceId:u.value}).then(f=>{i.value=f}).catch(f=>{i.value=[],console.warn("AccountPage",f.message)}).finally(()=>{a.value=!1}))},Q=f=>{C.setToken(f).then(()=>window.location.reload())};let g=null;z(()=>{ie({"client-id":t,components:"buttons",currency:"EUR",vault:!0,intent:"subscription"}).then(f=>{const S={style:{shape:"rect",color:"blue",layout:"horizontal",label:"buynow",tagline:!1},createSubscription:(b,D)=>D.subscription.create({plan_id:"P-8EY03930L1769123MMEFPZPI"}),onApprove:(b,D)=>{o.value=!0,N.post("user/invoice",{action:"assignUserToInvoice",userId:userId.value,subscriptionId:b.subscriptionID}).then(A=>C.setToken(A,b.subscriptionID)).catch(A=>console.error(A)).finally(()=>{o.value="done",window.location.reload()})}};g=f.Buttons(S),g.render("#paypal-button-subscribe").catch(b=>{console.error("Failed to render the PayPal Buttons",b)})})}),Y(()=>{g&&g.close&&g.close(),Object.keys(window).forEach(f=>{/paypal|zoid|post_robot/.test(f)&&delete window[f]})});const M={};return["SupportByBuying","UsageNotice","Termination","Disclaimer"].forEach(f=>{let S="",b=0;for(M[f]=[];(S=e.t(f+"["+b+"]"))!==f+"["+b+"]";)b++,M[f].push(S)}),{format:J,marked:te,now:Math.ceil(Date.now()/1e3),t:M,invoiceId:u,subscriptionId:c,email:l,status:a,getInvoices:B,invoices:i,setLicence:Q,isPaying:o,error:n}}}),de={class:"q-ma-sm"},fe={class:"row"},pe={class:"col"},me={class:"row no-wrap q-col-gutter-sm"},ve={class:"col-8"},be={class:"text-h6"},he=r("div",{class:"text-subtitle2"},null,-1),we=["innerHTML"],ge=["innerHTML"],ye=["innerHTML"],_e=r("div",{id:"paypal-button-subscribe"},null,-1),Ie={class:"col-4"},Ee={class:"text-h6"},Se=r("div",{class:"text-subtitle2"},null,-1),ke={class:"row"},Me={class:"col"},Ae={class:"row"},Te={class:"col"},Le=r("div",{class:"col-shrink q-px-md q-pb-sm row flex-center"},"or",-1),Be={class:"col"},De={class:"row"},Oe={class:"col text-center"},Ue={class:"col text-center"},Ne={class:"text-h6"},Ce=r("div",{class:"text-subtitle2"},null,-1),$e=["innerHTML"];function qe(e,t,n,o,i,l){const c=O("alert"),u=O("inputs");return m(),v("div",de,[y(r("div",fe,[r("div",pe,[s(c,null,{default:d(()=>[T(p(e.error),1)]),_:1})])],512),[[_,e.error]]),r("div",me,[r("div",ve,[s(L,null,{default:d(()=>[s(h,{class:"bg-primary text-white"},{default:d(()=>[r("div",be,p(e.$t("Buy"))+" & "+p(e.$t("Subscribe")),1),he]),_:1}),s(h,null,{default:d(()=>[(m(!0),v(I,null,E(e.t.SupportByBuying,a=>(m(),v("p",{key:a},[r("span",{innerHTML:e.marked.parse(a)},null,8,we)]))),128))]),_:1}),s(k),s(h,null,{default:d(()=>[r("strong",null,p(e.$t("Usage Notice")),1),(m(!0),v(I,null,E(e.t.UsageNotice,a=>(m(),v("p",{key:a},[r("span",{innerHTML:e.marked.parse(a)},null,8,ge)]))),128))]),_:1}),s(k),s(h,null,{default:d(()=>[r("strong",null,p(e.$t("Legal Remarks")),1),(m(!0),v(I,null,E(e.t.Disclaimer,a=>(m(),v("p",{key:a},[r("span",{innerHTML:e.marked.parse(a)},null,8,ye)]))),128))]),_:1}),s(k),s(h,{class:"text-center"},{default:d(()=>[y(r("div",null,[_e,r("em",null,p(e.$t("buy now")),1)],512),[[_,e.isPaying===!1]]),y(r("div",null,[s(U,{color:"primary",size:"3em"})],512),[[_,e.isPaying===!0]])]),_:1})]),_:1})]),r("div",Ie,[s(L,{class:"q-mb-sm"},{default:d(()=>[s(h,{class:"bg-primary text-white"},{default:d(()=>[r("div",Ee,p(e.$t("Get Invoices")),1),Se]),_:1}),s(h,null,{default:d(()=>[r("div",ke,[r("div",Me,[s(u,{modelValue:e.email,"onUpdate:modelValue":t[0]||(t[0]=a=>e.email=a),label:"E-Mail"},null,8,["modelValue"])])]),r("div",Ae,[r("div",Te,[s(u,{modelValue:e.subscriptionId,"onUpdate:modelValue":t[1]||(t[1]=a=>e.subscriptionId=a),label:"Abonnement-ID"},null,8,["modelValue"])]),Le,r("div",Be,[s(u,{modelValue:e.invoiceId,"onUpdate:modelValue":t[2]||(t[2]=a=>e.invoiceId=a),label:"Invoice-ID"},null,8,["modelValue"])])]),r("div",De,[y(r("div",Oe,[s(u,{onOnClick:e.getInvoices,type:"button",label:"Get Invoices",flat:!1,color:"primary"},null,8,["onOnClick"])],512),[[_,e.status===!1]]),y(r("div",Ue,[s(U,{color:"primary",size:"3em"})],512),[[_,e.status!==!1]])]),s(k,{class:"q-mx-sm q-my-md"}),s(X,null,{default:d(()=>[(m(!0),v(I,null,E(e.invoices,a=>(m(),Z(ee,{key:a._id,class:x({"bg-positive":a.expires>e.now})},{default:d(()=>[s($,null,{default:d(()=>[s(q,null,{default:d(()=>[T(p(a.date)+", #"+p(a.invoiceId),1)]),_:2},1024),s(q,{caption:""},{default:d(()=>[T(p(e.$t("valid to"))+" "+p(e.format(a.expires*1e3,"dd. MMM yyyy, HH:mm")),1)]),_:2},1024)]),_:2},1024),s($,{side:""},{default:d(()=>[s(u,{type:"button",round:"",tooltip:"set licence",class:"gt-xs",flat:"",icon:"mdi-file-check",onClick:K(B=>e.setLicence(a.token),["stop"])},null,8,["onClick"])]),_:2},1024)]),_:2},1032,["class"]))),128))]),_:1})]),_:1})]),_:1}),s(L,null,{default:d(()=>[s(h,{class:"bg-primary text-white"},{default:d(()=>[r("div",Ne,p(e.$t("Unsubscribe"))+" / "+p(e.$t("Terminate")),1),Ce]),_:1}),s(h,null,{default:d(()=>[(m(!0),v(I,null,E(e.t.Termination,a=>(m(),v("p",{key:a},[r("span",{innerHTML:e.marked.parse(a)},null,8,$e)]))),128))]),_:1})]),_:1})])])])}var Pe=F(ce,[["render",qe]]);export{Pe as default};
