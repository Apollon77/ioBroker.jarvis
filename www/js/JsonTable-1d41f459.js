import{dA as requiredArgs,dB as toDate,dR as millisecondsInHour,dS as millisecondsInMinute,dT as millisecondsInSecond,dU as getUTCWeekYear,dV as startOfUTCWeek,dW as startOfUTCISOWeek,dX as getUTCWeek,dC as toInteger,dY as getUTCISOWeek,dZ as getDefaultOptions,d_ as dateLangEn,d$ as longFormatters,e0 as subMilliseconds,dM as getTimezoneOffsetInMilliseconds,e1 as assign,e2 as isProtectedWeekYearToken,e3 as throwProtectedError,e4 as isProtectedDayOfYearToken,bt as _export_sfc,a4 as defineComponent,bL as useI18n,Q as computed,d9 as Modules,e5 as ConfigFile,k as ref,aY as watch,ds as Devices,ao as onBeforeUnmount,df as Pro,aG as resolveComponent,ay as openBlock,W as createElementBlock,b3 as withDirectives,bn as vShow,a2 as createVNode,d1 as QLinearProgress,b1 as withCtx,a1 as createTextVNode,D as toDisplayString,U as createBlock,$ as createSlots,bu as QIcon,bC as QInput,X as createBaseVNode,bO as QSelect,V as createCommentVNode,bT as QSeparator,bB as QBtn,I as Fragment,aE as renderList,C as normalizeStyle,A as normalizeClass,bP as _default,e6 as parseISO,cH as format,e7 as stripHtml}from"./index-67bd4720.js";import{Q as QTr,c as QTable,b as QTd}from"./QTable-3d6ae28a.js";import"./QVirtualScroll-bf2878ee.js";function compareDesc(t,e){requiredArgs(2,arguments);var r=toDate(t),n=toDate(e),a=r.getTime()-n.getTime();return a>0?-1:a<0?1:a}function _defineProperty$w(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var TIMEZONE_UNIT_PRIORITY=10;class Setter{constructor(){_defineProperty$w(this,"priority",void 0),_defineProperty$w(this,"subPriority",0)}validate(e,r){return!0}}class ValueSetter extends Setter{constructor(e,r,n,a,s){super(),this.value=e,this.validateValue=r,this.setValue=n,this.priority=a,s&&(this.subPriority=s)}validate(e,r){return this.validateValue(e,this.value,r)}set(e,r,n){return this.setValue(e,r,this.value,n)}}class DateToSystemTimezoneSetter extends Setter{constructor(){super(...arguments),_defineProperty$w(this,"priority",TIMEZONE_UNIT_PRIORITY),_defineProperty$w(this,"subPriority",-1)}set(e,r){if(r.timestampIsSet)return e;var n=new Date(0);return n.setFullYear(e.getUTCFullYear(),e.getUTCMonth(),e.getUTCDate()),n.setHours(e.getUTCHours(),e.getUTCMinutes(),e.getUTCSeconds(),e.getUTCMilliseconds()),n}}function _defineProperty$v(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}class Parser{constructor(){_defineProperty$v(this,"incompatibleTokens",void 0),_defineProperty$v(this,"priority",void 0),_defineProperty$v(this,"subPriority",void 0)}run(e,r,n,a){var s=this.parse(e,r,n,a);return s?{setter:new ValueSetter(s.value,this.validate,this.set,this.priority,this.subPriority),rest:s.rest}:null}validate(e,r,n){return!0}}function _defineProperty$u(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}class EraParser extends Parser{constructor(){super(...arguments),_defineProperty$u(this,"priority",140),_defineProperty$u(this,"incompatibleTokens",["R","u","t","T"])}parse(e,r,n){switch(r){case"G":case"GG":case"GGG":return n.era(e,{width:"abbreviated"})||n.era(e,{width:"narrow"});case"GGGGG":return n.era(e,{width:"narrow"});case"GGGG":default:return n.era(e,{width:"wide"})||n.era(e,{width:"abbreviated"})||n.era(e,{width:"narrow"})}}set(e,r,n){return r.era=n,e.setUTCFullYear(n,0,1),e.setUTCHours(0,0,0,0),e}}var numericPatterns={month:/^(1[0-2]|0?\d)/,date:/^(3[0-1]|[0-2]?\d)/,dayOfYear:/^(36[0-6]|3[0-5]\d|[0-2]?\d?\d)/,week:/^(5[0-3]|[0-4]?\d)/,hour23h:/^(2[0-3]|[0-1]?\d)/,hour24h:/^(2[0-4]|[0-1]?\d)/,hour11h:/^(1[0-1]|0?\d)/,hour12h:/^(1[0-2]|0?\d)/,minute:/^[0-5]?\d/,second:/^[0-5]?\d/,singleDigit:/^\d/,twoDigits:/^\d{1,2}/,threeDigits:/^\d{1,3}/,fourDigits:/^\d{1,4}/,anyDigitsSigned:/^-?\d+/,singleDigitSigned:/^-?\d/,twoDigitsSigned:/^-?\d{1,2}/,threeDigitsSigned:/^-?\d{1,3}/,fourDigitsSigned:/^-?\d{1,4}/},timezonePatterns={basicOptionalMinutes:/^([+-])(\d{2})(\d{2})?|Z/,basic:/^([+-])(\d{2})(\d{2})|Z/,basicOptionalSeconds:/^([+-])(\d{2})(\d{2})((\d{2}))?|Z/,extended:/^([+-])(\d{2}):(\d{2})|Z/,extendedOptionalSeconds:/^([+-])(\d{2}):(\d{2})(:(\d{2}))?|Z/};function mapValue(t,e){return t&&{value:e(t.value),rest:t.rest}}function parseNumericPattern(t,e){var r=e.match(t);return r?{value:parseInt(r[0],10),rest:e.slice(r[0].length)}:null}function parseTimezonePattern(t,e){var r=e.match(t);if(!r)return null;if(r[0]==="Z")return{value:0,rest:e.slice(1)};var n=r[1]==="+"?1:-1,a=r[2]?parseInt(r[2],10):0,s=r[3]?parseInt(r[3],10):0,l=r[5]?parseInt(r[5],10):0;return{value:n*(a*millisecondsInHour+s*millisecondsInMinute+l*millisecondsInSecond),rest:e.slice(r[0].length)}}function parseAnyDigitsSigned(t){return parseNumericPattern(numericPatterns.anyDigitsSigned,t)}function parseNDigits(t,e){switch(t){case 1:return parseNumericPattern(numericPatterns.singleDigit,e);case 2:return parseNumericPattern(numericPatterns.twoDigits,e);case 3:return parseNumericPattern(numericPatterns.threeDigits,e);case 4:return parseNumericPattern(numericPatterns.fourDigits,e);default:return parseNumericPattern(new RegExp("^\\d{1,"+t+"}"),e)}}function parseNDigitsSigned(t,e){switch(t){case 1:return parseNumericPattern(numericPatterns.singleDigitSigned,e);case 2:return parseNumericPattern(numericPatterns.twoDigitsSigned,e);case 3:return parseNumericPattern(numericPatterns.threeDigitsSigned,e);case 4:return parseNumericPattern(numericPatterns.fourDigitsSigned,e);default:return parseNumericPattern(new RegExp("^-?\\d{1,"+t+"}"),e)}}function dayPeriodEnumToHours(t){switch(t){case"morning":return 4;case"evening":return 17;case"pm":case"noon":case"afternoon":return 12;case"am":case"midnight":case"night":default:return 0}}function normalizeTwoDigitYear(t,e){var r=e>0,n=r?e:1-e,a;if(n<=50)a=t||100;else{var s=n+50,l=Math.floor(s/100)*100,u=t>=s%100;a=t+l-(u?100:0)}return r?a:1-a}function isLeapYearIndex(t){return t%400===0||t%4===0&&t%100!==0}function _defineProperty$t(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}class YearParser extends Parser{constructor(){super(...arguments),_defineProperty$t(this,"priority",130),_defineProperty$t(this,"incompatibleTokens",["Y","R","u","w","I","i","e","c","t","T"])}parse(e,r,n){var a=function(s){return{year:s,isTwoDigitYear:r==="yy"}};switch(r){case"y":return mapValue(parseNDigits(4,e),a);case"yo":return mapValue(n.ordinalNumber(e,{unit:"year"}),a);default:return mapValue(parseNDigits(r.length,e),a)}}validate(e,r){return r.isTwoDigitYear||r.year>0}set(e,r,n){var a=e.getUTCFullYear();if(n.isTwoDigitYear){var s=normalizeTwoDigitYear(n.year,a);return e.setUTCFullYear(s,0,1),e.setUTCHours(0,0,0,0),e}var l=!("era"in r)||r.era===1?n.year:1-n.year;return e.setUTCFullYear(l,0,1),e.setUTCHours(0,0,0,0),e}}function _defineProperty$s(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}class LocalWeekYearParser extends Parser{constructor(){super(...arguments),_defineProperty$s(this,"priority",130),_defineProperty$s(this,"incompatibleTokens",["y","R","u","Q","q","M","L","I","d","D","i","t","T"])}parse(e,r,n){var a=function(s){return{year:s,isTwoDigitYear:r==="YY"}};switch(r){case"Y":return mapValue(parseNDigits(4,e),a);case"Yo":return mapValue(n.ordinalNumber(e,{unit:"year"}),a);default:return mapValue(parseNDigits(r.length,e),a)}}validate(e,r){return r.isTwoDigitYear||r.year>0}set(e,r,n,a){var s=getUTCWeekYear(e,a);if(n.isTwoDigitYear){var l=normalizeTwoDigitYear(n.year,s);return e.setUTCFullYear(l,0,a.firstWeekContainsDate),e.setUTCHours(0,0,0,0),startOfUTCWeek(e,a)}var u=!("era"in r)||r.era===1?n.year:1-n.year;return e.setUTCFullYear(u,0,a.firstWeekContainsDate),e.setUTCHours(0,0,0,0),startOfUTCWeek(e,a)}}function _defineProperty$r(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}class ISOWeekYearParser extends Parser{constructor(){super(...arguments),_defineProperty$r(this,"priority",130),_defineProperty$r(this,"incompatibleTokens",["G","y","Y","u","Q","q","M","L","w","d","D","e","c","t","T"])}parse(e,r){return parseNDigitsSigned(r==="R"?4:r.length,e)}set(e,r,n){var a=new Date(0);return a.setUTCFullYear(n,0,4),a.setUTCHours(0,0,0,0),startOfUTCISOWeek(a)}}function _defineProperty$q(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}class ExtendedYearParser extends Parser{constructor(){super(...arguments),_defineProperty$q(this,"priority",130),_defineProperty$q(this,"incompatibleTokens",["G","y","Y","R","w","I","i","e","c","t","T"])}parse(e,r){return parseNDigitsSigned(r==="u"?4:r.length,e)}set(e,r,n){return e.setUTCFullYear(n,0,1),e.setUTCHours(0,0,0,0),e}}function _defineProperty$p(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}class QuarterParser extends Parser{constructor(){super(...arguments),_defineProperty$p(this,"priority",120),_defineProperty$p(this,"incompatibleTokens",["Y","R","q","M","L","w","I","d","D","i","e","c","t","T"])}parse(e,r,n){switch(r){case"Q":case"QQ":return parseNDigits(r.length,e);case"Qo":return n.ordinalNumber(e,{unit:"quarter"});case"QQQ":return n.quarter(e,{width:"abbreviated",context:"formatting"})||n.quarter(e,{width:"narrow",context:"formatting"});case"QQQQQ":return n.quarter(e,{width:"narrow",context:"formatting"});case"QQQQ":default:return n.quarter(e,{width:"wide",context:"formatting"})||n.quarter(e,{width:"abbreviated",context:"formatting"})||n.quarter(e,{width:"narrow",context:"formatting"})}}validate(e,r){return r>=1&&r<=4}set(e,r,n){return e.setUTCMonth((n-1)*3,1),e.setUTCHours(0,0,0,0),e}}function _defineProperty$o(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}class StandAloneQuarterParser extends Parser{constructor(){super(...arguments),_defineProperty$o(this,"priority",120),_defineProperty$o(this,"incompatibleTokens",["Y","R","Q","M","L","w","I","d","D","i","e","c","t","T"])}parse(e,r,n){switch(r){case"q":case"qq":return parseNDigits(r.length,e);case"qo":return n.ordinalNumber(e,{unit:"quarter"});case"qqq":return n.quarter(e,{width:"abbreviated",context:"standalone"})||n.quarter(e,{width:"narrow",context:"standalone"});case"qqqqq":return n.quarter(e,{width:"narrow",context:"standalone"});case"qqqq":default:return n.quarter(e,{width:"wide",context:"standalone"})||n.quarter(e,{width:"abbreviated",context:"standalone"})||n.quarter(e,{width:"narrow",context:"standalone"})}}validate(e,r){return r>=1&&r<=4}set(e,r,n){return e.setUTCMonth((n-1)*3,1),e.setUTCHours(0,0,0,0),e}}function _defineProperty$n(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}class MonthParser extends Parser{constructor(){super(...arguments),_defineProperty$n(this,"incompatibleTokens",["Y","R","q","Q","L","w","I","D","i","e","c","t","T"]),_defineProperty$n(this,"priority",110)}parse(e,r,n){var a=function(s){return s-1};switch(r){case"M":return mapValue(parseNumericPattern(numericPatterns.month,e),a);case"MM":return mapValue(parseNDigits(2,e),a);case"Mo":return mapValue(n.ordinalNumber(e,{unit:"month"}),a);case"MMM":return n.month(e,{width:"abbreviated",context:"formatting"})||n.month(e,{width:"narrow",context:"formatting"});case"MMMMM":return n.month(e,{width:"narrow",context:"formatting"});case"MMMM":default:return n.month(e,{width:"wide",context:"formatting"})||n.month(e,{width:"abbreviated",context:"formatting"})||n.month(e,{width:"narrow",context:"formatting"})}}validate(e,r){return r>=0&&r<=11}set(e,r,n){return e.setUTCMonth(n,1),e.setUTCHours(0,0,0,0),e}}function _defineProperty$m(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}class StandAloneMonthParser extends Parser{constructor(){super(...arguments),_defineProperty$m(this,"priority",110),_defineProperty$m(this,"incompatibleTokens",["Y","R","q","Q","M","w","I","D","i","e","c","t","T"])}parse(e,r,n){var a=function(s){return s-1};switch(r){case"L":return mapValue(parseNumericPattern(numericPatterns.month,e),a);case"LL":return mapValue(parseNDigits(2,e),a);case"Lo":return mapValue(n.ordinalNumber(e,{unit:"month"}),a);case"LLL":return n.month(e,{width:"abbreviated",context:"standalone"})||n.month(e,{width:"narrow",context:"standalone"});case"LLLLL":return n.month(e,{width:"narrow",context:"standalone"});case"LLLL":default:return n.month(e,{width:"wide",context:"standalone"})||n.month(e,{width:"abbreviated",context:"standalone"})||n.month(e,{width:"narrow",context:"standalone"})}}validate(e,r){return r>=0&&r<=11}set(e,r,n){return e.setUTCMonth(n,1),e.setUTCHours(0,0,0,0),e}}function setUTCWeek(t,e,r){requiredArgs(2,arguments);var n=toDate(t),a=toInteger(e),s=getUTCWeek(n,r)-a;return n.setUTCDate(n.getUTCDate()-s*7),n}function _defineProperty$l(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}class LocalWeekParser extends Parser{constructor(){super(...arguments),_defineProperty$l(this,"priority",100),_defineProperty$l(this,"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","i","t","T"])}parse(e,r,n){switch(r){case"w":return parseNumericPattern(numericPatterns.week,e);case"wo":return n.ordinalNumber(e,{unit:"week"});default:return parseNDigits(r.length,e)}}validate(e,r){return r>=1&&r<=53}set(e,r,n,a){return startOfUTCWeek(setUTCWeek(e,n,a),a)}}function setUTCISOWeek(t,e){requiredArgs(2,arguments);var r=toDate(t),n=toInteger(e),a=getUTCISOWeek(r)-n;return r.setUTCDate(r.getUTCDate()-a*7),r}function _defineProperty$k(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}class ISOWeekParser extends Parser{constructor(){super(...arguments),_defineProperty$k(this,"priority",100),_defineProperty$k(this,"incompatibleTokens",["y","Y","u","q","Q","M","L","w","d","D","e","c","t","T"])}parse(e,r,n){switch(r){case"I":return parseNumericPattern(numericPatterns.week,e);case"Io":return n.ordinalNumber(e,{unit:"week"});default:return parseNDigits(r.length,e)}}validate(e,r){return r>=1&&r<=53}set(e,r,n){return startOfUTCISOWeek(setUTCISOWeek(e,n))}}function _defineProperty$j(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}var DAYS_IN_MONTH=[31,28,31,30,31,30,31,31,30,31,30,31],DAYS_IN_MONTH_LEAP_YEAR=[31,29,31,30,31,30,31,31,30,31,30,31];class DateParser extends Parser{constructor(){super(...arguments),_defineProperty$j(this,"priority",90),_defineProperty$j(this,"subPriority",1),_defineProperty$j(this,"incompatibleTokens",["Y","R","q","Q","w","I","D","i","e","c","t","T"])}parse(e,r,n){switch(r){case"d":return parseNumericPattern(numericPatterns.date,e);case"do":return n.ordinalNumber(e,{unit:"date"});default:return parseNDigits(r.length,e)}}validate(e,r){var n=e.getUTCFullYear(),a=isLeapYearIndex(n),s=e.getUTCMonth();return a?r>=1&&r<=DAYS_IN_MONTH_LEAP_YEAR[s]:r>=1&&r<=DAYS_IN_MONTH[s]}set(e,r,n){return e.setUTCDate(n),e.setUTCHours(0,0,0,0),e}}function _defineProperty$i(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}class DayOfYearParser extends Parser{constructor(){super(...arguments),_defineProperty$i(this,"priority",90),_defineProperty$i(this,"subpriority",1),_defineProperty$i(this,"incompatibleTokens",["Y","R","q","Q","M","L","w","I","d","E","i","e","c","t","T"])}parse(e,r,n){switch(r){case"D":case"DD":return parseNumericPattern(numericPatterns.dayOfYear,e);case"Do":return n.ordinalNumber(e,{unit:"date"});default:return parseNDigits(r.length,e)}}validate(e,r){var n=e.getUTCFullYear(),a=isLeapYearIndex(n);return a?r>=1&&r<=366:r>=1&&r<=365}set(e,r,n){return e.setUTCMonth(0,n),e.setUTCHours(0,0,0,0),e}}function setUTCDay(t,e,r){var n,a,s,l,u,d,p,m;requiredArgs(2,arguments);var w=getDefaultOptions(),h=toInteger((n=(a=(s=(l=r==null?void 0:r.weekStartsOn)!==null&&l!==void 0?l:r==null||(u=r.locale)===null||u===void 0||(d=u.options)===null||d===void 0?void 0:d.weekStartsOn)!==null&&s!==void 0?s:w.weekStartsOn)!==null&&a!==void 0?a:(p=w.locale)===null||p===void 0||(m=p.options)===null||m===void 0?void 0:m.weekStartsOn)!==null&&n!==void 0?n:0);if(!(h>=0&&h<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");var P=toDate(t),v=toInteger(e),T=P.getUTCDay(),b=v%7,_=(b+7)%7,D=(_<h?7:0)+v-T;return P.setUTCDate(P.getUTCDate()+D),P}function _defineProperty$h(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}class DayParser extends Parser{constructor(){super(...arguments),_defineProperty$h(this,"priority",90),_defineProperty$h(this,"incompatibleTokens",["D","i","e","c","t","T"])}parse(e,r,n){switch(r){case"E":case"EE":case"EEE":return n.day(e,{width:"abbreviated",context:"formatting"})||n.day(e,{width:"short",context:"formatting"})||n.day(e,{width:"narrow",context:"formatting"});case"EEEEE":return n.day(e,{width:"narrow",context:"formatting"});case"EEEEEE":return n.day(e,{width:"short",context:"formatting"})||n.day(e,{width:"narrow",context:"formatting"});case"EEEE":default:return n.day(e,{width:"wide",context:"formatting"})||n.day(e,{width:"abbreviated",context:"formatting"})||n.day(e,{width:"short",context:"formatting"})||n.day(e,{width:"narrow",context:"formatting"})}}validate(e,r){return r>=0&&r<=6}set(e,r,n,a){return e=setUTCDay(e,n,a),e.setUTCHours(0,0,0,0),e}}function _defineProperty$g(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}class LocalDayParser extends Parser{constructor(){super(...arguments),_defineProperty$g(this,"priority",90),_defineProperty$g(this,"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","E","i","c","t","T"])}parse(e,r,n,a){var s=function(l){var u=Math.floor((l-1)/7)*7;return(l+a.weekStartsOn+6)%7+u};switch(r){case"e":case"ee":return mapValue(parseNDigits(r.length,e),s);case"eo":return mapValue(n.ordinalNumber(e,{unit:"day"}),s);case"eee":return n.day(e,{width:"abbreviated",context:"formatting"})||n.day(e,{width:"short",context:"formatting"})||n.day(e,{width:"narrow",context:"formatting"});case"eeeee":return n.day(e,{width:"narrow",context:"formatting"});case"eeeeee":return n.day(e,{width:"short",context:"formatting"})||n.day(e,{width:"narrow",context:"formatting"});case"eeee":default:return n.day(e,{width:"wide",context:"formatting"})||n.day(e,{width:"abbreviated",context:"formatting"})||n.day(e,{width:"short",context:"formatting"})||n.day(e,{width:"narrow",context:"formatting"})}}validate(e,r){return r>=0&&r<=6}set(e,r,n,a){return e=setUTCDay(e,n,a),e.setUTCHours(0,0,0,0),e}}function _defineProperty$f(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}class StandAloneLocalDayParser extends Parser{constructor(){super(...arguments),_defineProperty$f(this,"priority",90),_defineProperty$f(this,"incompatibleTokens",["y","R","u","q","Q","M","L","I","d","D","E","i","e","t","T"])}parse(e,r,n,a){var s=function(l){var u=Math.floor((l-1)/7)*7;return(l+a.weekStartsOn+6)%7+u};switch(r){case"c":case"cc":return mapValue(parseNDigits(r.length,e),s);case"co":return mapValue(n.ordinalNumber(e,{unit:"day"}),s);case"ccc":return n.day(e,{width:"abbreviated",context:"standalone"})||n.day(e,{width:"short",context:"standalone"})||n.day(e,{width:"narrow",context:"standalone"});case"ccccc":return n.day(e,{width:"narrow",context:"standalone"});case"cccccc":return n.day(e,{width:"short",context:"standalone"})||n.day(e,{width:"narrow",context:"standalone"});case"cccc":default:return n.day(e,{width:"wide",context:"standalone"})||n.day(e,{width:"abbreviated",context:"standalone"})||n.day(e,{width:"short",context:"standalone"})||n.day(e,{width:"narrow",context:"standalone"})}}validate(e,r){return r>=0&&r<=6}set(e,r,n,a){return e=setUTCDay(e,n,a),e.setUTCHours(0,0,0,0),e}}function setUTCISODay(t,e){requiredArgs(2,arguments);var r=toInteger(e);r%7===0&&(r=r-7);var n=1,a=toDate(t),s=a.getUTCDay(),l=r%7,u=(l+7)%7,d=(u<n?7:0)+r-s;return a.setUTCDate(a.getUTCDate()+d),a}function _defineProperty$e(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}class ISODayParser extends Parser{constructor(){super(...arguments),_defineProperty$e(this,"priority",90),_defineProperty$e(this,"incompatibleTokens",["y","Y","u","q","Q","M","L","w","d","D","E","e","c","t","T"])}parse(e,r,n){var a=function(s){return s===0?7:s};switch(r){case"i":case"ii":return parseNDigits(r.length,e);case"io":return n.ordinalNumber(e,{unit:"day"});case"iii":return mapValue(n.day(e,{width:"abbreviated",context:"formatting"})||n.day(e,{width:"short",context:"formatting"})||n.day(e,{width:"narrow",context:"formatting"}),a);case"iiiii":return mapValue(n.day(e,{width:"narrow",context:"formatting"}),a);case"iiiiii":return mapValue(n.day(e,{width:"short",context:"formatting"})||n.day(e,{width:"narrow",context:"formatting"}),a);case"iiii":default:return mapValue(n.day(e,{width:"wide",context:"formatting"})||n.day(e,{width:"abbreviated",context:"formatting"})||n.day(e,{width:"short",context:"formatting"})||n.day(e,{width:"narrow",context:"formatting"}),a)}}validate(e,r){return r>=1&&r<=7}set(e,r,n){return e=setUTCISODay(e,n),e.setUTCHours(0,0,0,0),e}}function _defineProperty$d(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}class AMPMParser extends Parser{constructor(){super(...arguments),_defineProperty$d(this,"priority",80),_defineProperty$d(this,"incompatibleTokens",["b","B","H","k","t","T"])}parse(e,r,n){switch(r){case"a":case"aa":case"aaa":return n.dayPeriod(e,{width:"abbreviated",context:"formatting"})||n.dayPeriod(e,{width:"narrow",context:"formatting"});case"aaaaa":return n.dayPeriod(e,{width:"narrow",context:"formatting"});case"aaaa":default:return n.dayPeriod(e,{width:"wide",context:"formatting"})||n.dayPeriod(e,{width:"abbreviated",context:"formatting"})||n.dayPeriod(e,{width:"narrow",context:"formatting"})}}set(e,r,n){return e.setUTCHours(dayPeriodEnumToHours(n),0,0,0),e}}function _defineProperty$c(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}class AMPMMidnightParser extends Parser{constructor(){super(...arguments),_defineProperty$c(this,"priority",80),_defineProperty$c(this,"incompatibleTokens",["a","B","H","k","t","T"])}parse(e,r,n){switch(r){case"b":case"bb":case"bbb":return n.dayPeriod(e,{width:"abbreviated",context:"formatting"})||n.dayPeriod(e,{width:"narrow",context:"formatting"});case"bbbbb":return n.dayPeriod(e,{width:"narrow",context:"formatting"});case"bbbb":default:return n.dayPeriod(e,{width:"wide",context:"formatting"})||n.dayPeriod(e,{width:"abbreviated",context:"formatting"})||n.dayPeriod(e,{width:"narrow",context:"formatting"})}}set(e,r,n){return e.setUTCHours(dayPeriodEnumToHours(n),0,0,0),e}}function _defineProperty$b(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}class DayPeriodParser extends Parser{constructor(){super(...arguments),_defineProperty$b(this,"priority",80),_defineProperty$b(this,"incompatibleTokens",["a","b","t","T"])}parse(e,r,n){switch(r){case"B":case"BB":case"BBB":return n.dayPeriod(e,{width:"abbreviated",context:"formatting"})||n.dayPeriod(e,{width:"narrow",context:"formatting"});case"BBBBB":return n.dayPeriod(e,{width:"narrow",context:"formatting"});case"BBBB":default:return n.dayPeriod(e,{width:"wide",context:"formatting"})||n.dayPeriod(e,{width:"abbreviated",context:"formatting"})||n.dayPeriod(e,{width:"narrow",context:"formatting"})}}set(e,r,n){return e.setUTCHours(dayPeriodEnumToHours(n),0,0,0),e}}function _defineProperty$a(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}class Hour1to12Parser extends Parser{constructor(){super(...arguments),_defineProperty$a(this,"priority",70),_defineProperty$a(this,"incompatibleTokens",["H","K","k","t","T"])}parse(e,r,n){switch(r){case"h":return parseNumericPattern(numericPatterns.hour12h,e);case"ho":return n.ordinalNumber(e,{unit:"hour"});default:return parseNDigits(r.length,e)}}validate(e,r){return r>=1&&r<=12}set(e,r,n){var a=e.getUTCHours()>=12;return a&&n<12?e.setUTCHours(n+12,0,0,0):!a&&n===12?e.setUTCHours(0,0,0,0):e.setUTCHours(n,0,0,0),e}}function _defineProperty$9(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}class Hour0to23Parser extends Parser{constructor(){super(...arguments),_defineProperty$9(this,"priority",70),_defineProperty$9(this,"incompatibleTokens",["a","b","h","K","k","t","T"])}parse(e,r,n){switch(r){case"H":return parseNumericPattern(numericPatterns.hour23h,e);case"Ho":return n.ordinalNumber(e,{unit:"hour"});default:return parseNDigits(r.length,e)}}validate(e,r){return r>=0&&r<=23}set(e,r,n){return e.setUTCHours(n,0,0,0),e}}function _defineProperty$8(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}class Hour0To11Parser extends Parser{constructor(){super(...arguments),_defineProperty$8(this,"priority",70),_defineProperty$8(this,"incompatibleTokens",["h","H","k","t","T"])}parse(e,r,n){switch(r){case"K":return parseNumericPattern(numericPatterns.hour11h,e);case"Ko":return n.ordinalNumber(e,{unit:"hour"});default:return parseNDigits(r.length,e)}}validate(e,r){return r>=0&&r<=11}set(e,r,n){var a=e.getUTCHours()>=12;return a&&n<12?e.setUTCHours(n+12,0,0,0):e.setUTCHours(n,0,0,0),e}}function _defineProperty$7(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}class Hour1To24Parser extends Parser{constructor(){super(...arguments),_defineProperty$7(this,"priority",70),_defineProperty$7(this,"incompatibleTokens",["a","b","h","H","K","t","T"])}parse(e,r,n){switch(r){case"k":return parseNumericPattern(numericPatterns.hour24h,e);case"ko":return n.ordinalNumber(e,{unit:"hour"});default:return parseNDigits(r.length,e)}}validate(e,r){return r>=1&&r<=24}set(e,r,n){var a=n<=24?n%24:n;return e.setUTCHours(a,0,0,0),e}}function _defineProperty$6(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}class MinuteParser extends Parser{constructor(){super(...arguments),_defineProperty$6(this,"priority",60),_defineProperty$6(this,"incompatibleTokens",["t","T"])}parse(e,r,n){switch(r){case"m":return parseNumericPattern(numericPatterns.minute,e);case"mo":return n.ordinalNumber(e,{unit:"minute"});default:return parseNDigits(r.length,e)}}validate(e,r){return r>=0&&r<=59}set(e,r,n){return e.setUTCMinutes(n,0,0),e}}function _defineProperty$5(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}class SecondParser extends Parser{constructor(){super(...arguments),_defineProperty$5(this,"priority",50),_defineProperty$5(this,"incompatibleTokens",["t","T"])}parse(e,r,n){switch(r){case"s":return parseNumericPattern(numericPatterns.second,e);case"so":return n.ordinalNumber(e,{unit:"second"});default:return parseNDigits(r.length,e)}}validate(e,r){return r>=0&&r<=59}set(e,r,n){return e.setUTCSeconds(n,0),e}}function _defineProperty$4(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}class FractionOfSecondParser extends Parser{constructor(){super(...arguments),_defineProperty$4(this,"priority",30),_defineProperty$4(this,"incompatibleTokens",["t","T"])}parse(e,r){var n=function(a){return Math.floor(a*Math.pow(10,-r.length+3))};return mapValue(parseNDigits(r.length,e),n)}set(e,r,n){return e.setUTCMilliseconds(n),e}}function _defineProperty$3(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}class ISOTimezoneWithZParser extends Parser{constructor(){super(...arguments),_defineProperty$3(this,"priority",10),_defineProperty$3(this,"incompatibleTokens",["t","T","x"])}parse(e,r){switch(r){case"X":return parseTimezonePattern(timezonePatterns.basicOptionalMinutes,e);case"XX":return parseTimezonePattern(timezonePatterns.basic,e);case"XXXX":return parseTimezonePattern(timezonePatterns.basicOptionalSeconds,e);case"XXXXX":return parseTimezonePattern(timezonePatterns.extendedOptionalSeconds,e);case"XXX":default:return parseTimezonePattern(timezonePatterns.extended,e)}}set(e,r,n){return r.timestampIsSet?e:new Date(e.getTime()-n)}}function _defineProperty$2(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}class ISOTimezoneParser extends Parser{constructor(){super(...arguments),_defineProperty$2(this,"priority",10),_defineProperty$2(this,"incompatibleTokens",["t","T","X"])}parse(e,r){switch(r){case"x":return parseTimezonePattern(timezonePatterns.basicOptionalMinutes,e);case"xx":return parseTimezonePattern(timezonePatterns.basic,e);case"xxxx":return parseTimezonePattern(timezonePatterns.basicOptionalSeconds,e);case"xxxxx":return parseTimezonePattern(timezonePatterns.extendedOptionalSeconds,e);case"xxx":default:return parseTimezonePattern(timezonePatterns.extended,e)}}set(e,r,n){return r.timestampIsSet?e:new Date(e.getTime()-n)}}function _defineProperty$1(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}class TimestampSecondsParser extends Parser{constructor(){super(...arguments),_defineProperty$1(this,"priority",40),_defineProperty$1(this,"incompatibleTokens","*")}parse(e){return parseAnyDigitsSigned(e)}set(e,r,n){return[new Date(n*1e3),{timestampIsSet:!0}]}}function _defineProperty(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}class TimestampMillisecondsParser extends Parser{constructor(){super(...arguments),_defineProperty(this,"priority",20),_defineProperty(this,"incompatibleTokens","*")}parse(e){return parseAnyDigitsSigned(e)}set(e,r,n){return[new Date(n),{timestampIsSet:!0}]}}var parsers={G:new EraParser,y:new YearParser,Y:new LocalWeekYearParser,R:new ISOWeekYearParser,u:new ExtendedYearParser,Q:new QuarterParser,q:new StandAloneQuarterParser,M:new MonthParser,L:new StandAloneMonthParser,w:new LocalWeekParser,I:new ISOWeekParser,d:new DateParser,D:new DayOfYearParser,E:new DayParser,e:new LocalDayParser,c:new StandAloneLocalDayParser,i:new ISODayParser,a:new AMPMParser,b:new AMPMMidnightParser,B:new DayPeriodParser,h:new Hour1to12Parser,H:new Hour0to23Parser,K:new Hour0To11Parser,k:new Hour1To24Parser,m:new MinuteParser,s:new SecondParser,S:new FractionOfSecondParser,X:new ISOTimezoneWithZParser,x:new ISOTimezoneParser,t:new TimestampSecondsParser,T:new TimestampMillisecondsParser},formattingTokensRegExp=/[yYQqMLwIdDecihHKkms]o|(\w)\1*|''|'(''|[^'])+('|$)|./g,longFormattingTokensRegExp=/P+p+|P+|p+|''|'(''|[^'])+('|$)|./g,escapedStringRegExp=/^'([^]*?)'?$/,doubleQuoteRegExp=/''/g,notWhitespaceRegExp=/\S/,unescapedLatinCharacterRegExp=/[a-zA-Z]/;function parse(t,e,r,n){var a,s,l,u,d,p,m,w,h,P,v,T,b,_,D,U,I,E;requiredArgs(3,arguments);var g=String(t),O=String(e),x=getDefaultOptions(),$=(a=(s=n==null?void 0:n.locale)!==null&&s!==void 0?s:x.locale)!==null&&a!==void 0?a:dateLangEn;if(!$.match)throw new RangeError("locale must contain match property");var Y=toInteger((l=(u=(d=(p=n==null?void 0:n.firstWeekContainsDate)!==null&&p!==void 0?p:n==null||(m=n.locale)===null||m===void 0||(w=m.options)===null||w===void 0?void 0:w.firstWeekContainsDate)!==null&&d!==void 0?d:x.firstWeekContainsDate)!==null&&u!==void 0?u:(h=x.locale)===null||h===void 0||(P=h.options)===null||P===void 0?void 0:P.firstWeekContainsDate)!==null&&l!==void 0?l:1);if(!(Y>=1&&Y<=7))throw new RangeError("firstWeekContainsDate must be between 1 and 7 inclusively");var k=toInteger((v=(T=(b=(_=n==null?void 0:n.weekStartsOn)!==null&&_!==void 0?_:n==null||(D=n.locale)===null||D===void 0||(U=D.options)===null||U===void 0?void 0:U.weekStartsOn)!==null&&b!==void 0?b:x.weekStartsOn)!==null&&T!==void 0?T:(I=x.locale)===null||I===void 0||(E=I.options)===null||E===void 0?void 0:E.weekStartsOn)!==null&&v!==void 0?v:0);if(!(k>=0&&k<=6))throw new RangeError("weekStartsOn must be between 0 and 6 inclusively");if(O==="")return g===""?toDate(r):new Date(NaN);var H={firstWeekContainsDate:Y,weekStartsOn:k,locale:$},L=[new DateToSystemTimezoneSetter],G=O.match(longFormattingTokensRegExp).map(function(o){var f=o[0];if(f in longFormatters){var y=longFormatters[f];return y(o,$.formatLong)}return o}).join("").match(formattingTokensRegExp),V=[],J=function(o){!(n!=null&&n.useAdditionalWeekYearTokens)&&isProtectedWeekYearToken(o)&&throwProtectedError(o,O,t),!(n!=null&&n.useAdditionalDayOfYearTokens)&&isProtectedDayOfYearToken(o)&&throwProtectedError(o,O,t);var f=o[0],y=parsers[f];if(y){var A=y.incompatibleTokens;if(Array.isArray(A)){var z=V.find(function(F){return A.includes(F.token)||F.token===f});if(z)throw new RangeError("The format string mustn't contain `".concat(z.fullToken,"` and `").concat(o,"` at the same time"))}else if(y.incompatibleTokens==="*"&&V.length>0)throw new RangeError("The format string mustn't contain `".concat(o,"` and any other token at the same time"));V.push({token:f,fullToken:o});var Q=y.run(g,o,$.match,H);if(!Q)return N=o,{v:new Date(NaN)};L.push(Q.setter),g=Q.rest}else{if(f.match(unescapedLatinCharacterRegExp))throw new RangeError("Format string contains an unescaped latin alphabet character `"+f+"`");if(o==="''"?o="'":f==="'"&&(o=cleanEscapedString(o)),g.indexOf(o)===0)g=g.slice(o.length);else return N=o,{v:new Date(NaN)}}N=o};for(var N of G){var W=J(N);if(typeof W=="object")return W.v}if(g.length>0&&notWhitespaceRegExp.test(g))return new Date(NaN);var X=L.map(function(o){return o.priority}).sort(function(o,f){return f-o}).filter(function(o,f,y){return y.indexOf(o)===f}).map(function(o){return L.filter(function(f){return f.priority===o}).sort(function(f,y){return y.subPriority-f.subPriority})}).map(function(o){return o[0]}),q=toDate(r);if(isNaN(q.getTime()))return new Date(NaN);var C=subMilliseconds(q,getTimezoneOffsetInMilliseconds(q)),B={};for(var R of X){if(!R.validate(C,H))return new Date(NaN);var M=R.set(C,B,H);Array.isArray(M)?(C=M[0],assign(B,M[1])):C=M}return C}function cleanEscapedString(t){return t.match(escapedStringRegExp)[1].replace(doubleQuoteRegExp,"'")}var JsonTable_vue_vue_type_style_index_0_lang="";const _sfc_main=defineComponent({name:"ModuleJsonTable",props:["widget","_containerSize"],setup(props){const i18n=useI18n(),config=computed(()=>props.widget.config),moduleConfig=computed(()=>({...Modules.joinConfig(config.value,ConfigFile)})),device=ref(null),deviceConfig=computed(()=>props.widget.items&&props.widget.items[0]||{}),columns=ref([]),columnsVisible=ref([]),parser=data=>{if(!data)return[];loaded.value=!1;const c=[],cVisible=[];let j=convertToJson(data);try{if(j=typeof j=="string"?JSON.parse(j):j,j=flatten(j),!Array.isArray(j)&&typeof j!="object")throw new Error("JSON must be array of objects.");let theads=_default(moduleConfig.value.thead&&moduleConfig.value.thead.length>0?moduleConfig.value.thead:!j||!j[0]?[]:Object.keys(j[0]).map(t=>({field:t,label:t})));if(!Array.isArray(j)||moduleConfig.value.object===!0){const t=[];theads=_default(moduleConfig.value.thead&&moduleConfig.value.thead.length>0?moduleConfig.value.thead:[{field:i18n.t("Column")+" A"},{field:i18n.t("Column")+" B"}]),j=j[0]||j;for(const e in j){const r=j[e];t.push({[theads[0].field||theads[0].label]:e,[theads[1].field||theads[1].label]:r})}j=t}if(j.length>0){for(const i in theads){const thead=theads[i],columnKey=thead.field||thead.label||Object.keys(j[0])[i];let val=j[0][columnKey];const parsedFloat=parseFloat(val);if(!columnKey){console.warn("JsonTable",'Neither "field" nor "label" defined for column #'+i,thead);continue}const column={label:columnKey,align:"left",sortable:!0,...thead,name:columnKey.toLowerCase(),field:columnKey};if(thead.format&&Pro.isPro())try{column.format=eval(thead.format),val=column.format(val)}catch(t){error.value=t.message,console.error("JsonTable",t)}else thead.format&&!Pro.isPro()&&Pro.warn("JsonTable: Callback for format only available in Pro.");const RegExpTime="\\d{2}:\\d{2}(:\\d{2})?",RegExpDateGerman="(0[1-9]|[12][0-9]|3[01])[.](0[1-9]|1[012])[.]((19|20)[0-9]{2})?";/^\d{4}[\.-]\d{2}[\.-]\d{2}([ |T]\d{2}:\d{2}(:\d{2})?([.]\d{3})?Z?)?$/.test(val)?(column.sort=(t,e)=>compareDesc(parseISO(t),parseISO(e)),column.format=t=>format(t,thead.mask?thead.mask:t.indexOf(":")!==-1?"dd.MM.yyyy HH:mm":"dd.MM.yyyy")):RegExp("^"+RegExpDateGerman+"$").test(val)||RegExp("^"+RegExpDateGerman+" "+RegExpTime+"$").test(val)?column.sort=(t,e)=>{const r=new Date;return t=t&&t.endsWith(".")?t+""+r.getFullYear():t&&!t.endsWith(".")&&t.indexOf(".")===t.lastIndexOf(".")?t+"."+r.getFullYear():t,e=e&&e.endsWith(".")?e+""+r.getFullYear():e&&!e.endsWith(".")&&e.indexOf(".")===e.lastIndexOf(".")?e+"."+r.getFullYear():e,t&&e?compareDesc(parse(t,t.toString().length===10?"dd.MM.yyyy":"dd.MM.yyyy HH:mm:ss",new Date),parse(e,e.toString().length===10?"dd.MM.yyyy":"dd.MM.yyyy HH:mm:ss",new Date)):0}:RegExp("^"+RegExpTime+"$").test(val)?column.sort=(t,e)=>(t=t.replace(/:/,""),e=e.replace(/:/,""),t===e?0:t>e?1:-1):/^((25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)(\.|$)){4}$/.test(val)?column.sort=(t,e)=>(t=t.split(".").map(r=>("00"+r).slice(-3)).join(""),e=e.split(".").map(r=>("00"+r).slice(-3)).join(""),t===e?0:t>e?1:-1):Number.isNaN(parsedFloat)||(column.sort=(t,e)=>(t=parseFloat(t),e=parseFloat(e),t===e?0:t>e?1:-1)),c.push(column),column.visible!==!1&&cVisible.push(columnKey.toLowerCase())}columns.value=c,columnsVisible.value=cVisible}}catch(t){error.value=t.message,console.warn("JsonTable",t),j=[]}return loaded.value=!0,moduleConfig.value.max>0?j.slice(0,moduleConfig.value.max):j},flatten=t=>t.map(e=>flat(e)),flat=t=>{let e={};for(const r in t){let n=t[r];if(typeof n=="object"&&!Array.isArray(n)){n=flat(n);const a={};for(const s in n)a[r+"."+s]=n[s];e={...e,...a}}else e[r]=n}return e},extractLabel=t=>{const e=t.indexOf(">")+1,r=t.indexOf("</",e);return t.substr(e,r-e)},convertToJson=t=>{let e=t;if(e&&!e.startsWith("{")&&!e.startsWith("[")&&!e.endsWith("}")&&!e.endsWith("]")&&e.indexOf("<table")!==-1&&e.indexOf("<tr")!==-1){const r=e.substr(e.indexOf("<table")),n=r.substr(0,r.indexOf("</table>")),a=n.substr(n.indexOf(">")+1),s=a.split("<tr");s.shift();const l=e.indexOf("<th")!==-1?a.split("<th"):s[0];l.shift();const u=l.map(p=>p?stripHtml(extractLabel(p)):"");s.shift();const d=[];s.forEach(p=>{const m=p.split("<td");m.shift();const w={};m.forEach((h,P)=>{w[u[P]]=h?stripHtml(extractLabel(h)):""}),Object.keys(w).length===u.length&&d.push(w)}),e=JSON.stringify(d)}return e},json=ref([]),gotState=(t,e,r)=>{if(t)return console.warn("JsonTable",t.message,t),t.message||t;json.value=parser(e.val)},error=ref(null),loaded=ref(!1);let subscriptionKeys=[];return watch(deviceConfig,t=>{device.value=Devices.get(t.deviceId),device.value?subscriptionKeys=Devices.listen(device.value.id,t.primaryStateKey,gotState):(error.value=i18n.t("Device {deviceId} not found").replace("{deviceId}",t.deviceId),console.warn("JsonTable",error.value),loaded.value=!0)},{immediate:!0}),onBeforeUnmount(()=>Devices.unlisten(subscriptionKeys)),{json,filter:ref(),columns,columnsVisible,loaded,error,device,moduleConfig,isPro:Pro.isPro(),style:computed(()=>({height:props._containerSize.height+"px"})),pagination:computed(()=>({sortBy:moduleConfig.value.sortColumn?moduleConfig.value.sortColumn.toLowerCase():"",descending:moduleConfig.value.sortDirection!==void 0?moduleConfig.value.sortDirection:!1,rowsPerPage:moduleConfig.value.rowsPerPage>=0?moduleConfig.value.rowsPerPage:10}))}}}),_hoisted_1={class:"row"},_hoisted_2=["innerHTML"],_hoisted_3={key:1};function _sfc_render(t,e,r,n,a,s){const l=resolveComponent("alert");return openBlock(),createElementBlock("div",{class:"jarvis-JsonTable-Container",style:normalizeStyle(t.style),key:t.widget.revision},[withDirectives(createVNode(QLinearProgress,{indeterminate:""},null,512),[[vShow,!t.loaded&&!t.error]]),withDirectives(createVNode(l,null,{default:withCtx(()=>[createTextVNode(toDisplayString(t.error),1)]),_:1},512),[[vShow,t.error]]),t.device?withDirectives((openBlock(),createBlock(QTable,{key:0,rows:t.json,filter:t.filter,flat:"",dense:t.moduleConfig.dense,pagination:t.pagination,"binary-state-sort":"",columns:t.columns,"row-key":"name","visible-columns":t.columnsVisible,class:"jarvis-JsonTable sticky-table-header full-height"},createSlots({body:withCtx(u=>[createVNode(QTr,{props:u},{default:withCtx(()=>[(openBlock(!0),createElementBlock(Fragment,null,renderList(u.cols,d=>(openBlock(),createBlock(QTd,{key:d.field,class:normalizeClass({[u.rowIndex%2!==1?"jarvis-JsonTable-row-odd":"jarvis-JsonTable-row-even"]:!0}),align:d.align},{default:withCtx(()=>[t.isPro?(openBlock(),createElementBlock("div",{key:0,innerHTML:d.value},null,8,_hoisted_2)):(openBlock(),createElementBlock("div",_hoisted_3,toDisplayString(d.value),1))]),_:2},1032,["class","align"]))),128))]),_:2},1032,["props"])]),_:2},[t.moduleConfig.hideFilter!==!0?{name:"top-left",fn:withCtx(()=>[withDirectives(createVNode(QInput,{borderless:"",dense:"",debounce:"300",modelValue:t.filter,"onUpdate:modelValue":e[0]||(e[0]=u=>t.filter=u),placeholder:t.$t("Search"),style:{"max-width":"120px"}},{prepend:withCtx(()=>[createVNode(QIcon,{name:"search"})]),_:1},8,["modelValue","placeholder"]),[[vShow,t.json&&t.json.length>0]])]),key:"0"}:void 0,t.moduleConfig.hideColumnsSelector!==!0||t.moduleConfig.hideFullscreenButton!==!0?{name:"top-right",fn:withCtx(u=>[withDirectives(createBaseVNode("div",_hoisted_1,[t.moduleConfig.hideColumnsSelector!==!0?(openBlock(),createBlock(QSelect,{key:0,modelValue:t.columnsVisible,"onUpdate:modelValue":e[1]||(e[1]=d=>t.columnsVisible=d),multiple:"",outlined:"",dense:"","options-dense":"","display-value":t.$q.lang.table.columns,"emit-value":"","map-options":"",options:t.columns,"option-value":"name","options-cover":"",style:{"min-width":"150px"}},null,8,["modelValue","display-value","options"])):createCommentVNode("",!0),t.moduleConfig.hideColumnsSelector!==!0&&t.moduleConfig.hideFullscreenButton!==!0?(openBlock(),createBlock(QSeparator,{key:1,vertical:"",class:"q-mx-sm"})):createCommentVNode("",!0),t.moduleConfig.hideFullscreenButton!==!0?(openBlock(),createBlock(QBtn,{key:2,flat:"",round:"",dense:"",icon:u.inFullscreen?"fullscreen_exit":"fullscreen",onClick:u.toggleFullscreen,style:{width:"40px"}},null,8,["icon","onClick"])):createCommentVNode("",!0)],512),[[vShow,t.json&&t.json.length>0]])]),key:"1"}:void 0]),1032,["rows","filter","dense","pagination","columns","visible-columns"])),[[vShow,!t.error]]):createCommentVNode("",!0)],4)}var JsonTable=_export_sfc(_sfc_main,[["render",_sfc_render]]);export{JsonTable as default};
