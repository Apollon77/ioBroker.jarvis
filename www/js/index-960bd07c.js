import{Q as We}from"./QToolbarTitle-af2ae400.js";import{Q as Ie}from"./QToolbar-0b1e5bdd.js";import{a4 as de,cq as M,bM as he,cn as ue,k as F,aY as pe,bQ as ae,Q as B,df as _e,dg as De,bt as re,d8 as ge,aG as q,ay as u,W as _,a2 as l,b1 as t,U as O,bS as Ce,bT as me,X as s,D as d,bD as $e,bB as H,bU as N,b3 as E,bP as Te,I as V,aE as G,bG as A,bH as v,bO as z,a1 as b,cP as Ee,bn as P,bF as Y,V as K,bV as we,bW as ke,dh as be,as as Pe,ct as ce,bp as Z,A as R,by as se,C as x,bw as Se,cv as ze,cu as Le,di as Be,dj as je,dk as Ae,cU as qe}from"./index-3290303e.js";import{Q as ve}from"./QBtnDropdown-a4382f5c.js";import{J as Qe}from"./json-editor-ffe9e921.js";import{Q as fe}from"./QTooltip-0d4ba5fc.js";import{Q as Oe}from"./QExpansionItem-5c11d570.js";import{W as Me}from"./WidgetPage-853cd9fc.js";import{a as ye}from"./useDragDrop-02d9ba19.js";import"./_commonjsHelpers-55d1ff45.js";import"./QSlideTransition-579cc1b5.js";const He=de({name:"WidgetPopup",props:["widget"],emits:["onClose","onSave"],components:{WidgetPage:Me},setup(e,{emit:p}){M.dev("DEBUG","WidgetPopup","setup()");const m=he(),W=ue(),U=[{label:m.t("top aligned"),value:"top"},{label:m.t("middle aligned"),value:"middle"},{label:m.t("bottom aligned"),value:"bottom"}],D=[{label:m.t("left aligned"),value:"left"},{label:m.t("center aligned"),value:"center"},{label:m.t("right aligned"),value:"right"},{label:m.t("fill full width"),value:"fill-width"}];let g={};Object.values(W.widgets).forEach(n=>{g[n.module]=g[n.module]||{label:n.module,widgets:[]},n._deleted!==!0&&g[n.module].widgets.push({...n,value:n.id,label:n.label?n.label+" "+(n.title?"("+n.title+")":""):n.title||""})}),g=Object.values(g);const r=F(g),f=F(null);pe(()=>e.widget,n=>{M.dev("DEBUG","WidgetPopup","watch",n),f.value=n?ae({items:[],...n}):null});const o=B(()=>f.value.scaleToFitContents!==void 0?f.value.scaleToFitContents:!0),y=B(()=>f.value.alignmentVertical||"top"),i=B(()=>f.value.alignmentHorizontal||"center"),a=B(()=>f.value.allowFullscreen||!1),k=B(()=>f.value.items?f.value.items.map(n=>W.widgets[n]||{}):[]),L=(n,$)=>{M.dev("DEBUG","WidgetPopup","onFilter",n);let w=g;n&&(n=n.toLowerCase(),w=[],g.forEach(C=>{const S=[];C.widgets.forEach(j=>{(j.module&&j.module.toLowerCase().indexOf(n)!==-1||j.id&&j.id.toLowerCase().indexOf(n)!==-1||j.title&&j.title.toLowerCase().indexOf(n)!==-1||j.label&&j.label.toLowerCase().indexOf(n)!==-1)&&S.push(j)}),S.length>0&&w.push({label:C.label+" ("+S.length+")",widgets:S})})),$(()=>{r.value=w.sort((C,S)=>(C=C.label?C.label.toLowerCase():"",S=S.label?S.label.toLowerCase():"",C===S?0:C>S?1:-1))})},c=F(null);let T=!1;const Q=n=>{M.dev("DEBUG","WidgetPopup","onChange",n),f.value[n.id]=n.value},ne=n=>{n&&n.module&&T===!0&&le({id:c.value}),T=!1,c.value=null},oe=()=>{f.value=null,p("onClose")},ee=()=>{p("onSave",f.value),oe()},ie=F(),le=n=>{f.value.items.push(n.id),ie.value.hidePopup()};return{ScaleExceptions:_e,AlignmentExceptions:De,alignmentHorizontal:D,alignmentVertical:U,inputValueAlignmentHorizontal:i,inputValueAlignmentVertical:y,inputScaleToFitContents:o,inputValueAllowFullscreen:a,onChange:Q,onClose:ne,onCancel:oe,onSave:ee,onFilter:L,itemList:k,widgetListFiltered:r,selectedWidgetId:c,container:f,addWidgetElement:ie,assignWidget:le,addWidget:()=>{T=!0,c.value=ge()},editWidget:n=>{c.value=n},deleteWidget:n=>{confirm(m.t("Really delete item?"))&&f.value.items.splice(f.value.items.indexOf(n),1)}}}}),Ue={class:"text-h6"},Fe={class:"text-h7 primary q-ma-sm"},Ve={class:"row"},Ge={class:"col"},Re={class:"col-1",style:{"text-align":"center","line-height":"56px"}},Ne={class:"col-3",style:{"text-align":"center","line-height":"56px"}},Je={key:0},Ye={class:"row items-center"},Ke={class:"text-h7 primary q-ma-sm",style:{"margin-top":"16px"}},Xe={class:"row q-pb-xs"},Ze={class:"col"},xe={class:"col"},el={class:"col"},ll={class:"col"};function tl(e,p,m,W,U,D){const g=q("widget-page"),r=q("icon"),f=q("inputs");return u(),_("div",null,[l(g,{onOnClose:e.onClose,widgetId:e.selectedWidgetId},null,8,["onOnClose","widgetId"]),l(ke,{"model-value":e.container!==null,persistent:""},{default:t(()=>[e.container?(u(),O(Ce,{key:0,class:"column",style:{width:"1200px","max-width":"90vw"}},{default:t(()=>[l(me,{class:"row items-center"},{default:t(()=>[s("div",Ue,d(e.$t("Assign Widget to Box")),1),l($e),l(H,{flat:"",round:"",color:"grey",icon:"close",onClick:e.onCancel},null,8,["onClick"])]),_:1}),l(N),l(me,{class:"col defaultPadding-2 q-pt-none scroll body"},{default:t(()=>[s("div",Fe,d(e.$t("Widget")),1),l(N,{style:{margin:"0 0 8px 0"}}),E(s("div",Ve,[s("div",Ge,[l(Te,{onFilter:e.onFilter,ref:"addWidgetElement",label:e.$t("Assign Widget"),options:e.widgetListFiltered,"model-value":"","use-input":"","stack-label":"",style:{margin:"0 8px"}},{option:t(o=>[l(Oe,{"expand-separator":"","header-class":"text-weight-bold",label:o.opt.label},{default:t(()=>[(u(!0),_(V,null,G(o.opt.widgets,y=>E((u(),O(A,{key:y.id,clickable:"",onClick:i=>e.assignWidget(y)},{default:t(()=>[l(v,null,{default:t(()=>[y.label?(u(),O(z,{key:0,class:"q-ml-md"},{default:t(()=>[b(d(y.label),1)]),_:2},1024)):(u(),O(z,{key:1,class:"q-ml-md"},{default:t(()=>[s("em",null,"("+d(e.$t("no title"))+")",1)]),_:1})),l(z,{class:"q-ml-md",caption:""},{default:t(()=>[b(d(y.id),1)]),_:2},1024)]),_:2},1024)]),_:2},1032,["onClick"])),[[Ee]])),128))]),_:2},1032,["label"])]),_:1},8,["onFilter","label","options"])]),s("div",Re,d(e.$t("or")),1),s("div",Ne,[l(H,{color:"primary",icon:"mdi-plus-circle",label:e.$t("Add Widget"),onClick:e.addWidget},null,8,["label","onClick"])])],512),[[P,e.itemList.length===0]]),l(Y,null,{default:t(()=>[(u(!0),_(V,null,G(e.itemList,(o,y)=>(u(),O(A,{key:o.id+"-"+y,class:"list-group-item"},{default:t(()=>[o.icon?(u(),O(v,{key:0,avatar:""},{default:t(()=>[l(r,{color:"primary",name:o.icon},null,8,["name"])]),_:2},1024)):K("",!0),l(v,null,{default:t(()=>[l(z,null,{default:t(()=>[b(d(o.label||o.title||e.$t("no title"))+" ",1),o._deleted?(u(),_("em",Je,"[ "+d(e.$t("deleted"))+" ]",1)):K("",!0)]),_:2},1024),l(z,{caption:""},{default:t(()=>[b("Widget ID: "+d(o.id)+", Module: "+d(o.module),1)]),_:2},1024)]),_:2},1024),l(v,{side:""},{default:t(()=>[s("div",Ye,[o._deleted!==!0?(u(),O(H,{key:0,size:"sm",flat:"",round:"",onClick:i=>e.editWidget(o.id),icon:"mdi-pencil"},null,8,["onClick"])):K("",!0),l(H,{size:"sm",flat:"",round:"",onClick:i=>e.deleteWidget(o.id),icon:"mdi-delete",color:"negative"},null,8,["onClick"])])]),_:2},1024)]),_:2},1024))),128))]),_:1}),s("div",Ke,d(e.$t("Options")),1),l(N,{style:{margin:"0 0 8px 0"}}),s("div",Xe,[s("div",Ze,[l(f,{icon:"mdi-resize",onOnChange:e.onChange,id:"allowFullscreen",label:"Allow fullscreen",type:"switch",value:e.inputValueAllowFullscreen},null,8,["onOnChange","value"])]),s("div",xe,[E(l(f,{icon:"mdi-fit-to-page",onOnChange:e.onChange,id:"scaleToFitContents",label:"Scale contents to fit widget",type:"switch",value:e.inputScaleToFitContents},null,8,["onOnChange","value"]),[[P,e.itemList[0]&&e.ScaleExceptions.includes(e.itemList[0].module)===!1]])]),s("div",el,[E(l(f,{icon:"mdi-arrow-split-horizontal",onOnSelect:e.onChange,id:"alignmentVertical",label:"Vertical alignment",type:"select",options:e.alignmentVertical,value:e.inputValueAlignmentVertical},null,8,["onOnSelect","options","value"]),[[P,e.itemList[0]&&e.AlignmentExceptions.includes(e.itemList[0].module)===!1]])]),s("div",ll,[E(l(f,{icon:"mdi-arrow-split-vertical",onOnSelect:e.onChange,id:"alignmentHorizontal",label:"Horizontal alignment",type:"select",options:e.alignmentHorizontal,value:e.inputValueAlignmentHorizontal},null,8,["onOnSelect","options","value"]),[[P,e.itemList[0]&&e.AlignmentExceptions.includes(e.itemList[0].module)===!1]])])])]),_:1}),l(N),l(we,{align:"right"},{default:t(()=>[l(H,{flat:"",label:e.$t("Cancel"),color:"negative",onClick:e.onCancel},null,8,["label","onClick"]),l(H,{flat:"",label:e.$t("Apply"),color:"primary",onClick:e.onSave},null,8,["label","onClick"])]),_:1})]),_:1})):K("",!0)]),_:1},8,["model-value"])])}var nl=re(He,[["render",tl]]);const ol=de({name:"WidgetSection",props:["pageId","tabId","id","label","icon","fullscreen","widgetEdges","widgetConfig","items"],components:{WidgetPopup:nl},setup(e){M.dev("DEBUG","WidgetSection","setup()");const p=he(),m=ue(),W=[{id:"copy",icon:"mdi-content-copy",label:p.t("copy")},{id:"duplicate",icon:"mdi-content-duplicate",label:p.t("duplicate")}],U=F(e.id==="desktop"),D=B(()=>e.id!=="desktop"&&e.widgetConfig[e.id+"SameAs"]!=="specific-layout"),g=B(()=>[{label:p.t("wie Desktop"),value:"desktop"},{label:p.t("wie Smartphone"),value:"smartphone"},{label:p.t("eigenes Layout"),value:"specific-layout"}].filter(n=>n.value!==e.id));pe(()=>e.fullscreen,n=>{M.dev("DEBUG","WidgetSection","watch",n),n===!0&&c.value.length===0&&ne()});const r=n=>{M.dev("DEBUG","WidgetSection","onChange",n),n.id.endsWith("SameAs")&&(U.value=n.value!=="desktop"),m.setWidgetConfig({pageId:e.pageId,tabId:e.tabId,key:n.id,val:n.value})},f=F({}),o=(n,$,w,C,S)=>{M.dev("DEBUG","WidgetSection","onResized",n,$,w,C,S),f.value[n]={width:(100/(12/w)).toFixed(2),height:C}},y=F({}),i=(n,$)=>{y.value[".widgetOptions-move-"+n.id]=$},a={},k=n=>m.widgets[n]||{items:[]},L=n=>{n=n||[];const $=n.join("-");return a[$]?a[$]:(M.dev("DEBUG","WidgetSection","getWidgetsData",n),!n||n.length===0?p.t("No widgets assigned"):(a[$]=n.map(w=>{const C=k(w);C.items=C.items||[];const S=C.items.filter(j=>j.type==="divider").length;return C.module+(!C.label&&!C.title?"":" ("+(C.label||C.title)+(C.module!=="StateList"?"":", "+C.items.length+" "+p.t("items")+" "+p.t("apprx.")+" "+((C.hideTitle!==!0?56:0)+S+(C.items.length-S)*46)+"px "+p.t("in height"))+")")}).join(", "),a[$]))},c=F(ae(e.items)||[]);pe(()=>e.items,()=>{be(e.items)!==be(c.value)&&(c.value=ae(e.items)||[])});const T=n=>{m.setWidgets({pageId:e.pageId,tabId:e.tabId,key:"widgets"+ce(e.id),val:n})},Q=F(),ne=()=>{let n=0,$=0;for(const w of c.value){const C=w.y+w.h;C>$&&($=C,n=w.x)}if(c.value.push({x:n,y:$,w:4,h:4,i:ge()}),Q.value&&Q.value[Q.value.length-1]){const w=Q.value[Q.value.length-1].$el,{top:C,height:S}=w.getBoundingClientRect();w.parentElement.parentElement.scrollTo(0,C+S+1e3)}T(c.value)},oe=(n,$,w)=>{const S=m.layout.find(X=>X.id===w).tabs.find(X=>X.id===$),j=ae(S["widgets"+ce(e.id)]);n=ae(n);let J=0;j.forEach(X=>{J=X.x>=n.x&&X.x+X.w<=n.x+n.w?Math.max(J,X.y+X.h):J}),n.y=J,j.push(n),m.setWidgets({pageId:w,tabId:$,key:"widgets"+ce(e.id),val:j}),le(n,{confirmation:!1})},ee=n=>{const $=n.id,w=ae(c.value.find(S=>S.i===$));w.i=ge(),n.val==="copy"&&(w.items=w.items||[],w.items=w.items.map(S=>{const j=k(S),J=ge();return m.copyWidget({id:J,widget:j}),J}));let C=w.y+w.h;c.value.forEach(S=>{C=S.x>=w.x&&S.x+S.w<=w.x+w.w?Math.max(C,S.y+S.h):C}),w.y=C,c.value.push(w),T(c.value)},ie=n=>m.hasWidget({widgetId:n.items[0]}),le=(n,$={},w)=>{const C=n.i;if($.verifyAssignedMultiple&&(!n.items||!n.items[0]||m.hasWidget({widgetId:n.items[0]})>1))w.stopPropagation();else if($.verifyAssignedMultiple)return;if($.confirmation=$.confirmation===!1?!0:confirm(p.t(typeof $.confirmation=="string"?$.confirmation:"Really delete item")+"?"),$.confirmation){const S=c.value.findIndex(J=>J.i===C),j=c.value[S].items;c.value.splice(S,1),T(c.value),$.deleteAssignedWidget&&j.forEach(J=>{m.removeWidget({widget:{id:J}})})}},h=F(null),I=n=>{M.dev("DEBUG","WidgetSection","saveWidgetAssignments",n),c.value.splice(c.value.findIndex($=>$.i===h.value.i),1,{...h.value,...n}),h.value=null,T(c.value)},te=n=>{for(const $ in y.value)y.value[$]&&y.value[$].hide();y.value[n]&&y.value[n].show()};return Pe(()=>{Q.value&&Q.value.forEach(n=>{o(n.$props.i,n.$props.h,n.$props.w,n.$props.h*n.rowHeight+(n.$props.h-1)*n.margin[0],null)})}),{...ye(c,n=>{m.setWidgets({pageId:e.pageId,tabId:e.tabId,key:"widgets"+ce(e.id),val:n})}),gridItemElements:Q,expanded:U,copyMenu:W,onChange:r,onResized:o,popupWidgetOrder:F(!1),pages:m.layout.filter(n=>!n.type||n.type==="page"),widgets:c,widgetSizes:f,setWidgets:T,getWidget:k,getWidgetsData:L,setRef:i,widgetOptions:y,showPageMenu:te,selectedWidget:h,hasWidget:ie,addWidget:ne,copyWidget:ee,moveWidget:oe,deleteWidget:le,saveWidgetAssignments:I,disabled:D,options:g}}}),il={class:"row full-width"},al={style:{padding:"0 16px 8px 16px","min-height":"64px"},class:"row"},sl={class:"row justify-between"},dl={class:"row items-center",style:{"padding-left":"8px"}},ul={class:"row"},rl={style:{padding:"0 8px 8px 8px","min-height":"64px"},class:"row"},cl={style:{margin:"auto 0"}},gl={class:"text-h6 row items-center"},pl={class:"grid-layout-container",style:{height:"800px","overflow-y":"scroll"}},ml={class:"row justify-between"},vl={class:"row items-center",style:{"padding-left":"8px"}},fl={key:0},hl={class:"row"},yl={class:"row q-pa-sm tooltip-widget",style:{overflow:"hidden"}};function bl(e,p,m,W,U,D){const g=q("widget-popup"),r=q("icon"),f=q("inputs"),o=q("grid-item"),y=q("grid-layout");return u(),_("div",null,[l(g,{onOnClose:p[0]||(p[0]=i=>e.selectedWidget=null),onOnSave:e.saveWidgetAssignments,widget:e.selectedWidget},null,8,["onOnSave","widget"]),l(Oe,{modelValue:e.expanded,"onUpdate:modelValue":p[9]||(p[9]=i=>e.expanded=i),class:"full-width paper",disable:e.disabled},{header:t(()=>[s("div",il,[l(v,{avatar:""},{default:t(()=>[l(r,{name:e.icon},null,8,["name"])]),_:1}),l(v,{style:{height:"40px"}},{default:t(()=>[b(d(e.label),1)]),_:1}),e.id!=="desktop"?(u(),O(v,{key:0,side:"",class:"notDisabled",onClick:p[2]||(p[2]=Z(()=>{},["stop"]))},{default:t(()=>[l(f,{onOnSelect:e.onChange,type:"select",options:e.options,dense:"",label:e.$t("Use same layout as"),id:e.id+"SameAs",onClick:p[1]||(p[1]=Z(()=>{},["stop"])),value:e.widgetConfig[e.id+"SameAs"]||"desktop",style:{width:"150px"}},null,8,["onOnSelect","options","label","id","value"])]),_:1})):K("",!0)])]),default:t(()=>[s("div",null,[E(s("div",null,[E(s("div",al,[l(H,{color:"secondary",icon:"mdi-plus-circle",label:e.$t("Add Widget"),onClick:e.addWidget,style:{margin:"auto 0"}},null,8,["label","onClick"])],512),[[P,e.widgets.length===0]]),l(N),E(s("div",{class:R(["grid-item tooltip-widget",[e.id]])},[s("div",sl,[s("div",dl,d(e.$t("Fullscreen")),1),s("div",ul,[l(H,{size:"sm",flat:"",round:"",icon:"mdi-pencil",onClick:p[3]||(p[3]=i=>e.selectedWidget=e.widgets[0])})])])],2),[[P,e.widgets[0]!==void 0]])],512),[[P,e.fullscreen===!0]]),E(s("div",null,[s("div",rl,[l(H,{color:"secondary",icon:"mdi-plus-circle",label:e.$t("Add Widget"),onClick:e.addWidget,style:{margin:"auto 0"}},null,8,["label","onClick"]),l(f,{dense:"",type:"switch",inline:"",label:e.$t("Height of all widgets equal to page height (no scrollbars)"),id:e.id+"FitPageHeight",onOnChange:e.onChange,value:e.widgetConfig[e.id+"FitPageHeight"]||!1,style:{margin:"auto 0 auto 8px"}},null,8,["label","id","onOnChange","value"]),E(l(f,{set:e.rowHeight=parseInt(e.widgetConfig[e.id+"FitPageHeight"]!==!0&&e.widgetConfig[e.id+"WidgetHeight"])||50,dense:"",type:"number",min:10,label:e.$t("Widget height")+" ("+e.$t("in pixels")+")",id:e.id+"WidgetHeight",onOnChange:e.onChange,value:e.widgetConfig[e.id+"WidgetHeight"]||50,style:{margin:"auto 0 auto 4px"}},null,8,["set","label","id","onOnChange","value"]),[[P,e.widgetConfig[e.id+"FitPageHeight"]!==!0]]),l(f,{set:e.gapSize=parseInt(e.widgetConfig[e.id+"GapSize"]||5),dense:"",type:"number",min:0,label:e.$t("Widget gaps")+" ("+e.$t("in pixels")+")",id:e.id+"GapSize",onOnChange:e.onChange,value:e.widgetConfig[e.id+"GapSize"]||5,style:{margin:"auto 0 auto 4px"}},null,8,["set","label","id","onOnChange","value"]),E(s("div",cl,[l(f,{type:"button",color:"primary",icon:"mdi-sort-numeric-variant",label:"Change Widget Responsive Order",onOnClick:p[4]||(p[4]=i=>e.popupWidgetOrder=!0),size:"md"})],512),[[P,e.widgets.length>1]])]),l(N),l(ke,{modelValue:e.popupWidgetOrder,"onUpdate:modelValue":p[7]||(p[7]=i=>e.popupWidgetOrder=i)},{default:t(()=>[l(Ce,{class:"column full-height",style:{width:"1400px","max-width":"40vw"}},{default:t(()=>[l(me,{class:"row items-center"},{default:t(()=>[s("div",gl,d(e.$t("Change Widget Responsive Order")),1),l($e),l(H,{flat:"",round:"",color:"grey",icon:"close",onClick:p[5]||(p[5]=i=>e.popupWidgetOrder=!1)})]),_:1}),l(N),l(me,{class:"col scroll body"},{default:t(()=>[l(Y,{ref:"elDragDrop"},{default:t(()=>[(u(!0),_(V,null,G(e.widgets,(i,a)=>(u(),O(A,{key:"grid-item-"+i.i,class:"paper","data-id":i.i,set:i=i.items&&i.items[0]&&e.getWidget(i.items[0])||{}},{default:t(()=>[l(v,{avatar:"",center:""},{default:t(()=>[l(r,{size:"sm",name:"mdi-drag-horizontal",class:"dragndrop"})]),_:1}),l(v,null,{default:t(()=>[i.title?(u(),O(z,{key:0},{default:t(()=>[b(d(i.title),1)]),_:2},1024)):(u(),O(z,{key:1},{default:t(()=>[s("em",null,d(e.$t("No Title")),1)]),_:1})),i.module?(u(),O(z,{key:2,caption:""},{default:t(()=>[b(d(e.$t("Module"))+" "+d(i.module),1)]),_:2},1024)):(u(),O(z,{key:3,caption:""},{default:t(()=>[b(d(e.$t("No Module selected")),1)]),_:1}))]),_:2},1024),l(v,{side:""},{default:t(()=>[b(d(a),1)]),_:2},1024)]),_:2},1032,["data-id","set"]))),128))]),_:1},512)]),_:1}),l(N),l(we,{align:"right"},{default:t(()=>[l(H,{flat:"",label:e.$t("Close"),color:"primary",onClick:p[6]||(p[6]=i=>e.popupWidgetOrder=!1)},null,8,["label"])]),_:1})]),_:1})]),_:1},8,["modelValue"]),s("div",pl,[l(y,{onLayoutUpdated:e.setWidgets,layout:e.widgets,"onUpdate:layout":p[8]||(p[8]=i=>e.widgets=i),"row-height":e.rowHeight,margin:[e.gapSize,e.gapSize],"use-css-transforms":!0,responsive:!1,preventCollision:!1,style:{"min-height":"50px"}},{default:t(()=>[(u(!0),_(V,null,G(e.widgets,(i,a)=>(u(),O(o,{key:"grid-item-"+i.i,ref_for:!0,ref:"gridItemElements",x:i.x,y:i.y,w:i.w,h:i.h,i:i.i,class:R(["grid-item tooltip-widget",{"rounded-borders":e.widgetEdges!==!0,[e.id]:!0}]),onResized:e.onResized},{default:t(()=>[l(fe,{target:".tooltip-widget"},{default:t(()=>[b(d(e.getWidgetsData(i.items)),1)]),_:2},1024),s("div",ml,[s("div",vl,[s("span",{class:R("sort-"+a)},"[ "+d(a)+" ]",3),b("\xA0 "),l(fe,{target:".sort-"+a},{default:t(()=>[b(d(e.$t("Responsive Position"))+": "+d(a),1)]),_:2},1032,["target"]),b(" "+d(e.$t("Position")+": "+i.x+"x * "+i.y+"y")+" ",1),e.widgetSizes[i.i]?(u(),_("span",fl,"\xA0- "+d(e.$t("Size")+": "+i.w+"w ("+e.widgetSizes[i.i].width+"%) * "+i.h+"h ("+e.widgetSizes[i.i].height+"px)"),1)):K("",!0)]),s("div",hl,[l(f,{class:"q-ma-none",type:"button",round:"",icon:"mdi-pencil",tooltip:e.$t("edit"),onClick:Z(k=>e.selectedWidget=i,["stop"])},null,8,["tooltip","onClick"]),l(f,{class:"q-ma-none",type:"button",round:"",icon:"mdi-content-copy",tooltip:e.$t("copy"),items:e.copyMenu,onOnSelect:e.copyWidget,id:i.i,denseMenu:""},null,8,["tooltip","items","onOnSelect","id"]),l(f,{class:R(["widgetOptions-"+i.i,"q-ma-none"]),type:"button",round:"",icon:"mdi-file-move-outline",tooltip:e.$t("move"),id:i.i},null,8,["class","tooltip","id"]),l(se,{target:".widgetOptions-"+i.i,anchor:"bottom left",self:"top left","auto-close":""},{default:t(()=>[(u(!0),_(V,null,G(e.pages,k=>(u(),O(A,{key:k.id,class:R("widgetOptions-move-"+k.id),onMouseenter:L=>e.showPageMenu(".widgetOptions-move-"+k.id)},{default:t(()=>[l(v,{avatar:""},{default:t(()=>[l(r,{size:"xs",name:k.icon},null,8,["name"])]),_:2},1024),l(v,null,{default:t(()=>[b(d(k.title),1)]),_:2},1024),l(v,{side:""},{default:t(()=>[l(r,{name:"mdi-chevron-right"})]),_:1}),l(se,{ref_for:!0,ref:L=>e.setRef(k,L),anchor:"top end",self:"top start","auto-close":""},{default:t(()=>[l(Y,null,{default:t(()=>[(u(!0),_(V,null,G(k.tabs,L=>(u(),O(A,{key:L.id,clickable:"",onClick:c=>e.moveWidget(i,L.id,k.id)},{default:t(()=>[l(v,{avatar:""},{default:t(()=>[l(r,{size:"xs",name:L.icon},null,8,["name"])]),_:2},1024),l(v,null,{default:t(()=>[b(d(L.title),1)]),_:2},1024),l(v,{side:""})]),_:2},1032,["onClick"]))),128))]),_:2},1024)]),_:2},1536)]),_:2},1032,["class","onMouseenter"]))),128))]),_:2},1032,["target"]),(u(),O(f,{key:"deleteOptions-"+i.i+"-inputs",class:R(["deleteOptions-"+i.i,"q-ma-none"]),type:"button",round:"",icon:"mdi-delete",tooltip:e.$t("delete"),color:"negative",onClick:k=>e.deleteWidget(i,{verifyAssignedMultiple:!0},k)},null,8,["class","tooltip","onClick"])),(u(),O(se,{key:"deleteOptions-"+i.i+"-menu",target:".deleteOptions-"+i.i,anchor:"bottom left",self:"top left","auto-close":""},{default:t(()=>[l(A,{clickable:"",onClick:Z(k=>e.deleteWidget(i,{confirmation:"Delete Box only"}),["stop"])},{default:t(()=>[l(v,{avatar:""},{default:t(()=>[l(r,{size:"xs",name:"mdi-delete",color:"negative"})]),_:1}),l(v,null,{default:t(()=>[b(d(e.$t("Delete Box only")),1)]),_:1})]),_:2},1032,["onClick"]),l(A,{clickable:"",onClick:Z(k=>e.deleteWidget(i,{confirmation:"Delete Box and assigned Widget",deleteAssignedWidget:!0}),["stop"])},{default:t(()=>[l(v,{avatar:""},{default:t(()=>[l(r,{size:"xs",name:"mdi-delete-sweep",color:"negative"})]),_:1}),l(v,null,{default:t(()=>[b(d(e.$t("Delete Box and assigned Widget")),1)]),_:1})]),_:2},1032,["onClick"])]),_:2},1032,["target"]))])]),s("div",yl,[b(d(e.getWidgetsData(i.items))+" ",1),l(fe,null,{default:t(()=>[b(d(e.getWidgetsData(i.items)),1)]),_:2},1024)])]),_:2},1032,["x","y","w","h","i","class","onResized"]))),128)),s("div",{class:"grid-spacer",style:x({bottom:-3*e.rowHeight+"px",height:3*e.rowHeight+"px"})},null,4)]),_:1},8,["onLayoutUpdated","layout","row-height","margin"])])],512),[[P,e.fullscreen!==!0]])])]),_:1},8,["modelValue","disable"])])}var Cl=re(ol,[["render",bl]]);const $l=de({name:"TabSection",props:["pageId","tabId"],components:{WidgetSection:Cl},setup(e){M.dev("DEBUG","TabSection","setup()");const p=ue(),m=D=>{M.dev("DEBUG","TabSection","onChange",D);let g=D.value;try{g=g&&D.json!==void 0&&g.indexOf("{")>-1&&g.indexOf("}")>-1?JSON.parse(g):g}catch(r){console.warn(D.value,r)}p.editTab({pageId:e.pageId,tabId:e.tabId,key:D.id,val:g})},W=B(()=>(p.layout.find(r=>r.id===e.pageId)||{}).tabs.find(r=>r.id===e.tabId)||{}),U=B(()=>W.value.title?typeof W.value.title=="string"?W.value.title:W.value.title.default||Object.values(W.value.title)[0]:"");return{onChange:m,tab:W,tabTitle:U}}}),wl={style:{padding:"0 8px"}},kl={class:"text-h6 primary q-ma-sm"},Sl={class:"row"},Ol={class:"col"},Wl={class:"col"},Il={class:"row"},_l={class:"col"},Dl={class:"col"},Tl={class:"row"},El={class:"col"},Pl={class:"col"},zl={class:"row"},Ll={class:"col-2"},Bl={class:"col"},jl={class:"text-h6 primary q-ma-sm",style:{"margin-top":"24px"}};function Al(e,p,m,W,U,D){const g=q("inputs"),r=q("widget-section");return u(),_("div",wl,[s("div",kl,d(e.$t("Tab"))+": "+d(e.tabTitle)+" ("+d(e.$t("ID")+": "+e.tab.id)+")",1),s("div",Sl,[s("div",Ol,[l(g,{json:"",onOnChange:e.onChange,id:"icon",label:e.$t("Tab")+" "+e.$t("Icon"),value:e.tab.icon||"",icon:e.tab.icon},null,8,["onOnChange","label","value","icon"])]),s("div",Wl,[l(g,{json:"",onOnChange:e.onChange,id:"title",label:e.$t("Tab")+" "+e.$t("Title"),value:e.tab.title||""},null,8,["onOnChange","label","value"])])]),s("div",Il,[s("div",_l,[l(g,{json:"",onOnChange:e.onChange,id:"iconStyle",label:"config#Devices#iconStyle#label",info:"config#Devices#iconStyle#info",value:e.tab.iconStyle},null,8,["onOnChange","value"])]),s("div",Dl,[l(g,{json:"",onOnChange:e.onChange,id:"bodyStyle",label:"config#Devices#bodyStyle#label",info:"config#Devices#bodyStyle#info",value:e.tab.bodyStyle},null,8,["onOnChange","value"])])]),s("div",Tl,[s("div",El,[l(g,{json:"",onOnChange:e.onChange,id:"iconSelectedStyle",label:"config#Layout#iconSelectedStyle#label",info:"config#Layout#iconSelectedStyle#info",value:e.tab.iconSelectedStyle},null,8,["onOnChange","value"])]),s("div",Pl,[l(g,{json:"",onOnChange:e.onChange,id:"bodySelectedStyle",label:"config#Layout#bodySelectedStyle#label",info:"config#Layout#bodySelectedStyle#info",value:e.tab.bodySelectedStyle},null,8,["onOnChange","value"])])]),s("div",zl,[s("div",Ll,[l(g,{type:"switch",inline:"",label:e.$t("Tab")+" "+e.$t("Fullscreen"),id:"fullscreen",onOnChange:e.onChange,value:e.tab.fullscreen||!1,style:{margin:"auto 0 auto 16px"}},null,8,["label","onOnChange","value"])]),s("div",Bl,[l(g,{type:"switch",inline:"",label:e.$t("Widgets edges (round or angled)"),id:"widgetEdges",onOnChange:e.onChange,value:e.tab.widgetEdges||!1,style:{margin:"auto 0 auto 16px"}},null,8,["label","onOnChange","value"])])]),s("div",jl,d(e.$t("Widgets of tab"))+": "+d(e.tabTitle),1),l(r,{pageId:e.pageId,tabId:e.tabId,id:"desktop",label:"Desktop",icon:"mdi-monitor",fullscreen:e.tab.fullscreen||!1,widgetEdges:e.tab.widgetEdges||!1,widgetConfig:e.tab.widgetConfig||{},items:e.tab.widgetsDesktop},null,8,["pageId","tabId","fullscreen","widgetEdges","widgetConfig","items"]),l(r,{pageId:e.pageId,tabId:e.tabId,id:"smartphone",label:"Smartphone",icon:"mdi-cellphone",fullscreen:e.tab.fullscreen||!1,widgetEdges:e.tab.widgetEdges||!1,widgetConfig:e.tab.widgetConfig||{},items:e.tab.widgetsSmartphone},null,8,["pageId","tabId","fullscreen","widgetEdges","widgetConfig","items"])])}var ql=re($l,[["render",Al]]);const Ql=de({name:"DrawerSection",props:["pageId"],components:{TabSection:ql},setup(e,{emit:p}){var le;M.dev("DEBUG","DrawerSection","setup()");const m=Se(),W=ue(),U=B(()=>{const h=[];return W.getPagesWithoutDeletions.forEach(I=>{I.id!==e.pageId&&h.push({id:I.id,label:I.title,...I})}),h}),D=B(()=>W.layout.find(h=>h.id===e.pageId)||{}),g=B(()=>typeof D.value.title=="string"?D.value.title:D.value.title&&D.value.title.default||Object.values(D.value.title)[0]),r=B({get(){return(D.value.tabs||[]).map(I=>(I._hasIconBinding=typeof I.icon=="object",I._hasTitleBinding=typeof I.title=="object",I))},set(h){W.setTabs({pageId:e.pageId,tabs:h})}}),f=m.getSelectedPage.id===D.value.id&&m.getSelectedTab||((le=D.value.tabs)==null?void 0:le[0])||{},o=F(f.id||null),y=F({}),i=(h,I)=>{y.value[".tabOptions-move-"+h.id]=I};let a=null;pe(()=>e.pageId,()=>{var h,I;M.dev("DEBUG","DrawerSection","watch",e.pageId),o.value=a||((I=(h=r.value)==null?void 0:h[0])==null?void 0:I.id)||null,a=null});const k=()=>{W.addTab({pageId:e.pageId}),o.value=r.value[r.value.length-1].id},L=(h,I=!1)=>{W.addTab({pageId:e.pageId,tabId:h,copyWidgets:I}),o.value=r.value[r.value.length-1].id},c=(h,I)=>{W.moveTab({pageId:e.pageId,tabId:h,destinationPageId:I}),o.value=h,a=h,p("onSelectPage",W.layout.find(te=>te.id===I)||{})},T=h=>{if(W.deleteTab({pageId:e.pageId,tabId:h}),o.value===h){const I=r.value.find(te=>te._deleted!==!0);o.value=I?I.id:null}},Q=h=>{W.restoreTab({pageId:e.pageId,tabId:h}),o.value=h},ne=h=>{M.dev("DEBUG","DrawerSection","onChange",h);let I=h.value;try{I=I&&h.json!==void 0&&h.value.indexOf("{")>-1&&h.value.indexOf("}")>-1?JSON.parse(h.value):h.value}catch(te){console.warn(h.value,te)}W.editDrawerItem({itemId:e.pageId,key:h.id,val:I})},oe=h=>W.changeDrawerItemId(e.pageId,h),ee=F(),ie=B(()=>ee.value&&ee.value.$el.offsetWidth?Math.floor(ee.value.$el.offsetWidth*.95)+"px":"100%");return{...ye(r,h=>r.value=h,{direction:"vertical"}),onChange:ne,setRef:i,breakpoint:ie,elTabs:ee,onChangeId:oe,pages:U,page:D,pageTitle:g,tabs:r,tabOptions:y,selectedTab:o,addTab:k,copyTab:L,moveTab:c,deleteTab:T,restoreTab:Q}}}),Ml={class:"text-h6 primary q-ma-sm"},Hl={class:"row"},Ul={class:"col"},Fl={class:"col"},Vl={class:"row"},Gl={class:"col"},Rl={class:"col"},Nl={class:"row"},Jl={class:"col"},Yl={class:"col"},Kl={key:0},Xl={class:"text-h6 primary q-ma-sm"},Zl={class:"q-ma-sm row"},xl={key:0},et={key:1},lt={key:2},tt={key:3};function nt(e,p,m,W,U,D){const g=q("inputs"),r=q("icon"),f=q("tab-section");return u(),_("div",{key:e.page.id},[s("div",Ml,[b(d(e.$t("Page"))+": "+d(e.pageTitle)+" ",1),s("span",null,"(ID: "+d(e.page.id)+" )",1)]),s("div",Hl,[s("div",Ul,[l(g,{json:"",onOnChange:e.onChange,id:"icon",label:e.$t("Icon"),value:e.page.icon||"",icon:e.page.icon},null,8,["onOnChange","label","value","icon"])]),s("div",Fl,[l(g,{json:"",onOnChange:e.onChange,id:"title",label:e.$t("Title"),value:e.page.title||""},null,8,["onOnChange","label","value"])])]),s("div",Vl,[s("div",Gl,[l(g,{json:"",onOnChange:e.onChange,id:"iconStyle",label:"config#Devices#iconStyle#label",info:"config#Devices#iconStyle#info",value:e.page.iconStyle},null,8,["onOnChange","value"])]),s("div",Rl,[l(g,{json:"",onOnChange:e.onChange,id:"bodyStyle",label:"config#Devices#bodyStyle#label",info:"config#Devices#bodyStyle#info",value:e.page.bodyStyle},null,8,["onOnChange","value"])])]),s("div",Nl,[s("div",Jl,[l(g,{json:"",onOnChange:e.onChange,id:"iconSelectedStyle",label:"config#Layout#iconSelectedStyle#label",info:"config#Layout#iconSelectedStyle#info",value:e.page.iconSelectedStyle},null,8,["onOnChange","value"])]),s("div",Yl,[l(g,{json:"",onOnChange:e.onChange,id:"bodySelectedStyle",label:"config#Layout#bodySelectedStyle#label",info:"config#Layout#bodySelectedStyle#info",value:e.page.bodySelectedStyle},null,8,["onOnChange","value"])])]),!e.page.type||e.page.type==="page"?(u(),_("div",Kl,[s("div",Xl,d(e.$t("Tabs of page"))+": "+d(e.pageTitle),1),s("div",Zl,[l(H,{color:"secondary",icon:"mdi-plus-circle",label:e.$t("Add Tab"),onClick:e.addTab},null,8,["label","onClick"]),l(g,{type:"switch",inline:"",label:e.$t("Do not show Tab Labels (only Icons)"),id:"hideLabels",onOnChange:e.onChange,value:e.page.hideLabels||!1,style:{margin:"auto 0 auto 16px"}},null,8,["label","onOnChange","value"])]),l(Le,{ref:"elTabs",modelValue:e.selectedTab,"onUpdate:modelValue":p[1]||(p[1]=o=>e.selectedTab=o),"inline-label":"","outside-arrows":"","mobile-arrows":"",class:"bg-primary text-white full-width",align:"left"},{default:t(()=>[s("div",{ref:"elDragDrop",class:"row",style:x({width:e.breakpoint})},[(u(!0),_(V,null,G(e.tabs,o=>(u(),O(ze,{key:o.id,name:o.id,style:x({backgroundColor:o.backgroundColor,height:"48px"}),class:R({"q-px-xs":!0,rowDeleted:o._deleted===!0}),disable:o._deleted===!0},{default:t(()=>[l(r,{size:"sm",name:"mdi-drag-vertical",class:"dragndrop",color:o.color},null,8,["color"]),o._hasIconBinding?(u(),_("div",xl,[l(ve,{flat:"",dense:""},{label:t(()=>[l(r,{size:"xs",name:o.icon.default||Object.values(o.icon)[0],class:"tabIcon q-mr-xs",color:o.iconColor||o.color},null,8,["name","color"])]),default:t(()=>[l(Y,null,{default:t(()=>[(u(!0),_(V,null,G(o.icon,(y,i)=>(u(),O(A,{key:i},{default:t(()=>[l(v,{avatar:""},{default:t(()=>[l(r,{size:"xs",name:y,class:"tabIcon q-mr-xs",color:o.iconColor||o.color},null,8,["name","color"])]),_:2},1024),l(v,null,{default:t(()=>[l(z,null,{default:t(()=>[b(d(y),1)]),_:2},1024),l(z,{caption:""},{default:t(()=>[b(d(i),1)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:2},1024)]),_:2},1024)])):(u(),_("div",et,[l(r,{size:"xs",name:o.icon,class:"tabIcon q-mr-xs",color:o.iconColor||o.color},null,8,["name","color"])])),o._hasTitleBinding?(u(),_("div",lt,[l(ve,{flat:"",dense:"",label:o.title.default||Object.values(o.title)[0]},{default:t(()=>[l(Y,null,{default:t(()=>[(u(!0),_(V,null,G(o.title,(y,i)=>(u(),O(A,{key:i},{default:t(()=>[l(v,null,{default:t(()=>[l(z,null,{default:t(()=>[b(d(y),1)]),_:2},1024),l(z,{caption:""},{default:t(()=>[b(d(i),1)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:2},1024)]),_:2},1032,["label"])])):(u(),_("div",tt,[E(s("div",{class:"q-tab__label",style:x({color:o.color})},d(o.title),5),[[P,e.page.hideLabels!==!0]])])),s("div",{class:"row items-center no-wrap",style:x([{"margin-left":"16px"},{color:o.color}])},[l(N,{vertical:"",class:"q-ma-xs"}),E(l(g,{round:"",type:"button",icon:"mdi-restore",tooltip:e.$t("restore"),color:"positive",onClick:y=>e.restoreTab(o.id)},null,8,["tooltip","onClick"]),[[P,o._deleted===!0]]),E(l(H,{class:R("tabOptions-"+o.id),dense:"",flat:"",round:"",color:"white",icon:"mdi-dots-vertical",onClick:p[0]||(p[0]=Z(()=>{},["stop"]))},null,8,["class"]),[[P,o._deleted!==!0]]),l(se,{target:".tabOptions-"+o.id,anchor:"bottom left",self:"top left","auto-close":""},{default:t(()=>[E(l(A,{clickable:"",onClick:y=>e.copyTab(o.id,!0)},{default:t(()=>[l(v,{avatar:""},{default:t(()=>[l(r,{size:"xs",name:"mdi-content-copy"})]),_:1}),l(v,null,{default:t(()=>[b(d(e.$t("copy")),1)]),_:1})]),_:2},1032,["onClick"]),[[P,o._deleted!==!0]]),E(l(A,{clickable:"",onClick:y=>e.copyTab(o.id)},{default:t(()=>[l(v,{avatar:""},{default:t(()=>[l(r,{size:"xs",name:"mdi-content-duplicate"})]),_:1}),l(v,null,{default:t(()=>[b(d(e.$t("duplicate")),1)]),_:1})]),_:2},1032,["onClick"]),[[P,o._deleted!==!0]]),E(l(A,{class:R("tabOptions-move-"+o.id),onMouseover:y=>e.tabOptions[".tabOptions-move-"+o.id]&&e.tabOptions[".tabOptions-move-"+o.id].show(),clickable:""},{default:t(()=>[l(v,{avatar:""},{default:t(()=>[l(r,{size:"xs",name:"mdi-folder-move-outline"})]),_:1}),l(v,null,{default:t(()=>[b(d(e.$t("move")),1)]),_:1}),l(v,{side:""},{default:t(()=>[l(r,{name:"mdi-chevron-right"})]),_:1}),l(se,{ref_for:!0,ref:y=>e.setRef(o,y),anchor:"top end",self:"top start","auto-close":""},{default:t(()=>[l(Y,null,{default:t(()=>[(u(!0),_(V,null,G(e.pages,y=>(u(),O(A,{key:y.id,clickable:"",onClick:i=>e.moveTab(o.id,y.id)},{default:t(()=>[l(v,{avatar:""},{default:t(()=>[l(r,{size:"xs",name:y.icon},null,8,["name"])]),_:2},1024),l(v,null,{default:t(()=>[b(d(y.title),1)]),_:2},1024),l(v,{side:""})]),_:2},1032,["onClick"]))),128))]),_:2},1024)]),_:2},1536)]),_:2},1032,["class","onMouseover"]),[[P,o._deleted!==!0&&e.pages.length>0]]),l(A,{clickable:"",style:{color:"#fff",background:"var(--q-negative)"},onClick:y=>e.deleteTab(o.id)},{default:t(()=>[l(v,{avatar:""},{default:t(()=>[l(r,{size:"xs",name:"mdi-delete"})]),_:1}),l(v,null,{default:t(()=>[b(d(e.$t("delete")),1)]),_:1})]),_:2},1032,["onClick"])]),_:2},1032,["target"])],4)]),_:2},1032,["name","style","class","disable"]))),128))],4)]),_:1},8,["modelValue"]),l(je,{modelValue:e.selectedTab,"onUpdate:modelValue":p[2]||(p[2]=o=>e.selectedTab=o),animated:"","keep-alive":"",class:"border"},{default:t(()=>[(u(!0),_(V,null,G(e.tabs,o=>(u(),O(Be,{key:o.id,name:o.id,style:{padding:"16px 0"},class:"body"},{default:t(()=>[l(f,{pageId:e.page.id,tabId:o.id},null,8,["pageId","tabId"])]),_:2},1032,["name"]))),128))]),_:1},8,["modelValue"])])):K("",!0)])}var ot=re(Ql,[["render",nt]]);const it=de({name:"LayoutsPage",components:{DrawerSection:ot,JsonEditor:Qe},setup(){M.dev("DEBUG","LayoutsPage","setup()");const e=he(),p=Se(),m=ue(),W=[{id:"copy",icon:"mdi-content-copy",label:e.t("copy")},{id:"duplicate",icon:"mdi-content-duplicate",label:e.t("duplicate")}],U=c=>m.set({["settings."+c.id]:c.value}),D=c=>{if(c._error){m.addError(c.id,c._error);return}m.removeError(c.id),c.value&&m.set({tmpJsonEditor:{key:c.id,json:JSON.parse(c.value)}})},g=B({get(){return(m.getLayout||[]).map(T=>(T._hasIconBinding=typeof T.icon=="object",T._hasTitleBinding=typeof T.title=="object",T))},set(c){m.setLayout(c)}}),r=F(p.getSelectedPage||(m.selectedPage?m.selectedPage:m.getLayout.find(c=>c.type==="page"&&c._deleted!==!0))),f=c=>{r.value=c},o=()=>m.addDrawerItem({type:"divider"}),y=()=>m.addDrawerItem({type:"header",title:e.t("New Header")}),i=()=>{m.addDrawerItem({type:"page",icon:"mdi-file",title:e.t("New Page"),tabs:[]}),r.value=g.value[g.value.length-1],m.addTab({pageId:r.value.id})},a=c=>{const T=c.id;m.copyDrawerItem({itemId:T,copyWidgets:c.val==="copy"});const Q=g.value[g.value.length-1];Q.type==="page"&&(r.value=Q)},k=c=>{m.deleteDrawerItem({itemId:c}),r.value.id===c&&(r.value=g.value.find(T=>T.type==="page"&&T._deleted!==!0))},L=c=>{m.restoreDrawerItem({itemId:c});const T=g.value.find(Q=>Q.id===c);T.type==="page"&&(r.value=T)};return{...ye(g,c=>g.value=c),copyMenu:W,json:B(()=>m.layout),settings:B(()=>m.settings),proWarning:B(()=>!Ae.isPro()&&g.value.filter(c=>c.type==="page").length>1),pageHeight:B(()=>p.pageHeight),pagesWithoutDeletionsCount:B(()=>m.getPagesWithoutDeletions.length),onChangeSettings:U,onJsonEditor:D,onSelectPage:f,selectedPage:r,pages:g,addDivider:o,addHeader:y,addPage:i,copyItem:a,deleteItem:k,restoreItem:L}}}),at={class:"full-height LayoutsPage"},st={class:"row no-wrap"},dt={class:"row",style:{"margin-bottom":"54px"}},ut={class:"col-3"},rt={class:"text-h6 primary q-ma-sm"},ct={key:0},gt={key:1},pt={key:1},mt={key:2},vt={class:"row items-center"},ft={class:"col-9"};function ht(e,p,m,W,U,D){const g=q("alert"),r=q("icon"),f=q("inputs"),o=q("paper"),y=q("drawer-section"),i=q("json-editor");return u(),_("div",at,[s("div",st,[l(Ie,{class:"paper",style:{"min-height":"56px"}},{default:t(()=>[l(We,{shrink:""},{default:t(()=>[b(d(e.$t("Layout")),1)]),_:1})]),_:1})]),E(s("div",dt,[s("div",ut,[l(o,{class:"q-pa-sm"},{default:t(()=>[s("div",rt,d(e.$t("Drawer")+" / "+e.$t("Pages")),1),l(qe,null,{default:t(()=>[l(H,{color:"primary",icon:"mdi-plus-circle",label:e.$t("Add Page"),onClick:e.addPage},null,8,["label","onClick"]),l(H,{color:"secondary",icon:"mdi-plus-circle",label:e.$t("Add Header"),onClick:e.addHeader},null,8,["label","onClick"]),l(H,{color:"secondary",icon:"mdi-plus-circle",label:e.$t("Add Divider"),onClick:e.addDivider},null,8,["label","onClick"])]),_:1}),E(l(g,{style:{margin:"16px 0 0 0"}},{default:t(()=>[b(d(e.$t("Only a single page is allowed without Pro. A single page may hold infinite tabs though."))+".",1)]),_:1},512),[[P,e.proWarning]]),l(N,{style:{margin:"16px 0"}}),l(Y,{ref:"elDragDrop"},{default:t(()=>[(u(!0),_(V,null,G(e.pages,a=>(u(),O(A,{key:a.id,clickable:!a.type||a.type==="page"||a.type==="header",onClick:k=>e.onSelectPage(a),class:R({rowDeleted:a._deleted===!0,selected:e.selectedPage.id===a.id}),disable:a._deleted===!0},{default:t(()=>[l(v,{avatar:"",center:""},{default:t(()=>[l(r,{size:"sm",name:"mdi-drag-horizontal",class:"dragndrop"})]),_:1}),!a.type||a.type==="page"?(u(),O(v,{key:0,avatar:"",center:"",style:x({backgroundColor:a.backgroundColor})},{default:t(()=>[a._hasIconBinding?(u(),_("div",ct,[l(ve,{flat:"",dense:""},{label:t(()=>[l(r,{name:a.icon.default||Object.values(a.icon)[0],color:e.selectedPage.id===a.id?"white":"primary",styles:{color:a.iconColor}},null,8,["name","color","styles"])]),default:t(()=>[l(Y,null,{default:t(()=>[(u(!0),_(V,null,G(a.icon,(k,L)=>(u(),O(A,{key:L},{default:t(()=>[l(v,{avatar:""},{default:t(()=>[l(r,{size:"xs",name:k,class:"pageIcon q-mr-xs",color:a.iconColor||a.color},null,8,["name","color"])]),_:2},1024),l(v,null,{default:t(()=>[l(z,null,{default:t(()=>[b(d(k),1)]),_:2},1024),l(z,{caption:""},{default:t(()=>[b(d(L),1)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:2},1024)]),_:2},1024)])):(u(),_("div",gt,[l(r,{name:a.icon,color:e.selectedPage.id===a.id?"white":"primary",styles:{color:a.iconColor}},null,8,["name","color","styles"])]))]),_:2},1032,["style"])):K("",!0),l(v,{class:R({itemDeleted:a._deleted===!0}),style:x({backgroundColor:a.backgroundColor,color:a.color})},{default:t(()=>[a.type==="divider"?(u(),O(N,{key:0})):K("",!0),a._hasTitleBinding?(u(),_("div",pt,[l(ve,{flat:"",dense:"",label:a.title.default||Object.values(a.title)[0]},{default:t(()=>[l(Y,null,{default:t(()=>[(u(!0),_(V,null,G(a.title,(k,L)=>(u(),O(A,{key:L},{default:t(()=>[l(v,null,{default:t(()=>[l(z,null,{default:t(()=>[b(d(k),1)]),_:2},1024),l(z,{caption:""},{default:t(()=>[b(d(L),1)]),_:2},1024)]),_:2},1024)]),_:2},1024))),128))]),_:2},1024)]),_:2},1032,["label"])])):(u(),_("div",mt,[l(z,{class:R({header:a.type==="header"}),style:x({color:a.color})},{default:t(()=>[b(d(a.title),1)]),_:2},1032,["class","style"])]))]),_:2},1032,["class","style"]),l(v,{side:"",class:R({rowDeleted:a._deleted===!0,selected:e.selectedPage.id===a.id})},{default:t(()=>[s("div",vt,[a.type==="page"?E((u(),O(f,{key:0,type:"button",round:"",icon:"mdi-content-copy",tooltip:e.$t("copy"),items:e.copyMenu,onOnSelect:e.copyItem,id:a.id,denseMenu:""},null,8,["tooltip","items","onOnSelect","id"])),[[P,a.type!=="divider"&&a._deleted!==!0]]):E((u(),O(f,{key:1,type:"button",round:"",icon:"mdi-content-copy",tooltip:e.$t("copy"),onClick:Z(k=>e.copyItem({id:a.id}),["stop"])},null,8,["tooltip","onClick"])),[[P,a.type!=="divider"&&a._deleted!==!0]]),E(l(f,{type:"button",round:"",icon:"mdi-delete",tooltip:e.$t("delete"),color:"negative",onClick:Z(k=>e.deleteItem(a.id),["stop"])},null,8,["tooltip","onClick"]),[[P,(a.type&&a.type!=="page"||(!a.type||a.type==="page")&&e.pagesWithoutDeletionsCount>1)&&a._deleted!==!0]]),E(l(f,{type:"button",round:"",icon:"mdi-restore",tooltip:e.$t("restore"),color:"positive",onClick:Z(k=>e.restoreItem(a.id),["stop"]),class:"restore"},null,8,["tooltip","onClick"]),[[P,a._deleted===!0]])])]),_:2},1032,["class"])]),_:2},1032,["clickable","onClick","class","disable"]))),128))]),_:1},512),l(Y,null,{default:t(()=>[l(N,{class:"q-my-sm"}),l(A,null,{default:t(()=>[l(v,{avatar:"",center:""}),l(v,{avatar:"",center:""},{default:t(()=>[l(r,{name:"mdi-cog",color:"primary"})]),_:1}),l(v,null,{default:t(()=>[l(z,null,{default:t(()=>[b(d(e.$t("Configuration"))+" & "+d(e.$t("Help")),1)]),_:1}),l(z,{caption:""},{default:t(()=>[b(d(e.$t("show in sidebar")),1)]),_:1})]),_:1}),l(v,{side:""},{default:t(()=>[l(f,{type:"Switch",inline:"",onOnChange:e.onChangeSettings,id:"drawerShowSettings",value:e.settings.drawerShowSettings},null,8,["onOnChange","value"])]),_:1})]),_:1}),l(A,null,{default:t(()=>[l(v,{avatar:"",center:""}),l(v,{avatar:"",center:""},{default:t(()=>[l(r,{name:"mdi-menu",color:"primary"})]),_:1}),l(v,null,{default:t(()=>[l(z,null,{default:t(()=>[b(d(e.$t("Drawer")),1)]),_:1}),l(z,{caption:""},{default:t(()=>[b(d(e.$t("show button")),1)]),_:1})]),_:1}),l(v,{side:""},{default:t(()=>[l(f,{type:"Switch",inline:"",onOnChange:e.onChangeSettings,id:"drawerShowMenuButton",value:e.settings.drawerShowMenuButton},null,8,["onOnChange","value"])]),_:1})]),_:1})]),_:1})]),_:1})]),s("div",ft,[l(o,{class:"q-pa-sm"},{default:t(()=>[e.selectedPage&&e.selectedPage.id?(u(),O(y,{key:0,onOnSelectPage:e.onSelectPage,pageId:e.selectedPage.id},null,8,["onOnSelectPage","pageId"])):K("",!0)]),_:1})])],512),[[P,!e.settings.configExpertMode]]),E(l(o,{style:x({height:e.pageHeight-66-16+"px"})},{default:t(()=>[l(i,{id:"layout",json:e.json,onOnChange:e.onJsonEditor},null,8,["json","onOnChange"])]),_:1},8,["style"]),[[P,e.settings.configExpertMode]])])}var Dt=re(it,[["render",ht]]);export{Dt as default};
