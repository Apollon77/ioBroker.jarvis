(this.webpackJsonpjarvis=this.webpackJsonpjarvis||[]).push([[0],{108:function(e,t,a){"use strict";var n=a(14),i=a(87),r=a(6);t.a={timeToSeconds:function(e){if(e.toString().indexOf(":")>-1){var t=(e=e.toString()).split(":").length-1>1?e.split(":"):("0:"+e).split(":"),a=Object(n.a)(t,3),i=a[0],r=a[1],o=a[2];e=3600*parseInt(i)+60*parseInt(r)+parseInt(o)}return parseInt(e)},timeToHoursMinutesSeconds:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(e.toString().indexOf(":")>-1)return e;if(e=parseInt(e),t=t||e>3600,Number.isNaN(e))return t?"00:00:00":"00:00";var a="0"+Math.floor(e/3600),n="0"+Math.floor(e/60),i="0"+e%60;return t?[a.substr(-2),n.substr(-2),i.substr(-2)].join(":"):[n.substr(-2),i.substr(-2)].join(":")},secondsToDateTime:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"dd. MMM yyyy, HH:mm";return Object(i.a)(new Date(1e3*e),t,{locale:r.b[r.a.getLanguage()]})}}},144:function(e,t,a){"use strict";a.r(t);var n=a(106),i=a(20),r=a(21),o=a(26),s=a(17),c=a(25),l=a(19),u=a(0),d=a.n(u),p=a(6),f=a(597),g=a(119),h=a(340),m=a(220),v=a(12),b=a(2),y=a(684),S=a(4),k=function(e){return{defaultListDivider:{margin:"0 0 5px 0"},defaultListIcon:function(t){return Object(v.a)({},e.components.icon,{},t.styles)},horizontalListItem:{display:"inline-block",textAlign:"center",paddingRight:"16px",width:"140px",marginTop:"10px"},horizontalListItemIcon:{minWidth:"auto"},horizontalListItemAction:{textAlign:"center",top:0,right:0,position:"static",transform:"none"},verticalListItemAction:{textAlign:"right"}}},O=Object(S.a)(k)((function(e){var t=e.customClassNames,a=e.children,n=e.classes,i=Array.isArray(t)?t:[t];return i=i.map((function(e){return n[e]?n[e]:e})),d.a.createElement("span",{className:Object(b.a)(i)},a)})),j=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(o.a)(this,Object(s.a)(t).call(this,e))).stateChange=function(e,t){e!==a.props.device.primaryStateKey&&e!==a.props.device.secondaryStateKey||a.setState(Object(l.a)({},e,t))},a.state={ListItemTextWidth:"100%"},a.state[a.props.device.primaryStateKey]=a.props.device.getDeviceState()||{},a.props.device.secondaryStateKey&&(a.state[a.props.device.secondaryStateKey]=a.props.device.getDeviceState(a.props.device.secondaryStateKey)||{}),a.ListItemText=d.a.createRef(),a.ListItemSecondaryAction=d.a.createRef(),a}return Object(c.a)(t,e),Object(r.a)(t,[{key:"componentDidMount",value:function(){this.ListItemTextWidth=Math.floor(this.ListItemText.current.offsetWidth),this.resizeComponent(),this.props.device.listen(this.stateChange)}},{key:"componentWillUnmount",value:function(){this.props.device.unlisten(this.stateChange)}},{key:"componentDidUpdate",value:function(){this.resizeComponent()}},{key:"resizeComponent",value:function(){var e=Math.floor(1.08*this.ListItemSecondaryAction.current.offsetWidth);this.state.ListItemSecondaryActionWidth!==e&&this.setState({ListItemSecondaryActionWidth:e,ListItemTextWidth:this.ListItemTextWidth-e+"px"})}},{key:"openDialog",value:function(){this.props.openDialog(this.props.device)}},{key:"render",value:function(){var e=this.props,t=e.classes,a=e.horizontal,n=e.device,i=e.component,r=e.action,o=this.state[n.primaryStateKey],s=n.get("options"),c=n.getIcon(n.primaryStateKey,o.val)||n.getIcon(n.primaryStateKey,o.value),l=i&&n.getComponent(),u=n.getAction(n.primaryStateKey,!1===n.options.primaryAction),p=r&&this.state[n.secondaryStateKey]?n.getAction(n.secondaryStateKey):null;return d.a.createElement(d.a.Fragment,null,s.divider&&"after"!==s.divider&&d.a.createElement(g.a,{divider:!0,className:t.defaultListDivider}),d.a.createElement(g.a,{className:Object(b.a)(this.props.openDialog&&t.finger,a&&t.horizontalListItem),button:null!==this.props.openDialog,onClick:this.props.openDialog&&this.openDialog.bind(this)},d.a.createElement(y.a,{className:Object(b.a)(a&&t.horizontalListItemIcon)},null===c?d.a.createElement(d.a.Fragment,null):d.a.createElement(O,{customClassNames:["defaultListIcon","mdi mdi-"+c],styles:n.getStyle("icon",n.primaryStateKey,o.val)})),d.a.createElement(m.a,{ref:this.ListItemText,disableTypography:!1!==l,primary:l||n.getOption("label"),secondary:null!==s.subtitle&&(s.subtitle||o&&o.timeChanged)||null,style:{flex:"initial",width:this.state.ListItemTextWidth}}),d.a.createElement(h.a,{ref:this.ListItemSecondaryAction,className:a?t.horizontalListItemAction:t.verticalListItemAction},p?[u,d.a.createElement("br",{key:"br_"+n.id}),p]:u)),s.divider&&"after"===s.divider&&d.a.createElement(g.a,{divider:!0,style:{margin:"5px 0"}}))}}]),t}(d.a.Component),E=Object(S.a)(k)(j),w=a(178),C=a(594),x=function(e){return{defaultListSectionDivider:{margin:"5px 0 0 0"},defaultListSectionDividerItem:{margin:"6px 0 7px 0",padding:"0 16px !important"},defaultListSectionText:Object(l.a)({margin:0},e.breakpoints.down("md"),{margin:"0 0 0 10px"}),horizontalList:{display:"flex",flexDirection:"row",flexWrap:"wrap"}}},T=Object(S.a)(x)((function(e){var t=e.classes,a=e.getDevicesBySubgroup,n=e.subgroup,i=e.title,r=e.subgroupActions,o=function(e){a(n).forEach((function(t){var a=e;"level"===t.primaryStateKey&&(a=a?100:0),t.setDeviceState(null,a)}))};return d.a.createElement(d.a.Fragment,null,d.a.createElement(g.a,{divider:!0,className:t.defaultListSectionDivider}),d.a.createElement(g.a,{className:t.defaultListSectionDividerItem},d.a.createElement(m.a,{className:t.defaultListSectionText,primary:i}),d.a.createElement(h.a,null,null===r||!1===r?null:d.a.createElement(C.a,{color:"primary",size:"small"},d.a.createElement(w.a,{onClick:function(){return o(!0)}},p.a.t("on")),d.a.createElement(w.a,{onClick:function(){return o(!1)}},p.a.t("off"))))))})),D=function(e){function t(){return Object(i.a)(this,t),Object(o.a)(this,Object(s.a)(t).apply(this,arguments))}return Object(c.a)(t,e),Object(r.a)(t,[{key:"getDevicesBySubgroup",value:function(e){var t=[];return this.props.devices.forEach((function(a){e===a.getOption("subgroup")&&t.push(a)})),t}},{key:"render",value:function(){var e,t=this,a=this.props,i=a.classes,r=a.horizontal,o=a.devices,s=a.settings,c=a.component,l=a.action,u=Object(n.a)(a,["classes","horizontal","devices","settings","component","action"]);return d.a.createElement(f.a,{dense:!0,className:r&&i.horizontalList},o.map((function(a,n){var i=null!==e&&null!==a.options.subgroup&&a.options.subgroup!==e&&d.a.createElement(T,{key:"ListDivider-"+a.get("id"),getDevicesBySubgroup:t.getDevicesBySubgroup.bind(t),subgroup:a.getOption("subgroup"),title:a.options.subgroup,subgroupActions:s.subgroupActions||a.options.subgroupActions}),o=d.a.createElement(E,Object.assign({},u,{key:"StateListItem-"+a.get("id"),horizontal:r,device:a,component:c||!1,action:l||!0}));return e=a.getOption("subgroup"),[i,o]})))}}]),t}(d.a.Component);t.default=Object(S.a)(x)(D)},193:function(e,t,a){"use strict";a.r(t);var n=a(6),i=a(411)("./door."+n.a.getLanguage()).default;n.a.setTranslation(n.a.getLanguage(),i),t.default={configurations:{open:{icon:{true:"door-open",false:"door-closed"},state:{true:n.a.t("door#open#true"),false:n.a.t("door#open#false")}},lock:{}},components:{},actions:{},styles:{}}},194:function(e,t,a){"use strict";a.r(t);var n=a(0),i=a.n(n),r=a(6),o=a(44),s=a(413)("./heating."+r.a.getLanguage()).default;r.a.setTranslation(r.a.getLanguage(),s),t.default={configurations:{temperature:{value:function(e){return e.toFixed(1)},unit:" \xb0C"},setTemperature:{unit:" \xb0C",icon:"thermometer-chevron-up"},humidity:{unit:" %"},boost:{icon:"radiator"}},components:{setTemperature:function(e){var t=o.default.components.LevelComponent;return i.a.createElement(t,Object.assign({min:0,max:35},e))}},actions:{boost:o.default.actions.PowerAction},styles:{}}},213:function(e,t,a){"use strict";a.r(t);var n=a(6),i=a(578)("./location."+n.a.getLanguage()).default;n.a.setTranslation(n.a.getLanguage(),i),t.default={configurations:{position:{icon:"map-marker"},presence:{icon:{true:"map-marker-radius",false:"map-marker-remove-outline"},state:{true:n.a.t("location#presence#true"),false:n.a.t("location#presence#false")}},users:{icon:{"":"account-group-outline",default:"account-group"},state:{"":n.a.t("location#users#empty")}}},components:{},actions:{},styles:{}}},214:function(e,t,a){"use strict";a.r(t);var n=a(6),i=a(580)("./user."+n.a.getLanguage()).default;n.a.setTranslation(n.a.getLanguage(),i),t.default={configurations:{position:{icon:"map-marker"},location:{icon:"account"},battery:{}},components:{},actions:{},styles:{}}},215:function(e,t,a){"use strict";a.r(t);var n=a(6),i=a(582)("./window."+n.a.getLanguage()).default;n.a.setTranslation(n.a.getLanguage(),i),t.default={configurations:{open:{icon:{true:"window-open-variant",false:"window-closed-variant"},state:{true:n.a.t("window#open#true"),false:n.a.t("window#open#false")}}},components:{},actions:{},styles:{}}},216:function(e,t,a){"use strict";a.r(t);var n=a(14),i=a(0),r=a.n(i),o=a(218),s=a(6);var c={HsvToRgb:function(e){var t,a,i,r,o,s,c,l,u=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,d=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;if(Array.isArray(e))d=e[2],u=e[1],e=e[0];else if("string"===typeof e&&e.indexOf(",")){var p=e.split(","),f=Object(n.a)(p,3);e=f[0],u=f[1],d=f[2]}switch(e>1&&(e/=360),s=d*(1-u),c=d*(1-(o=6*e-(r=Math.floor(6*e)))*u),l=d*(1-(1-o)*u),r%6){case 0:t=d,a=l,i=s;break;case 1:t=c,a=d,i=s;break;case 2:t=s,a=d,i=l;break;case 3:t=s,a=c,i=d;break;case 4:t=l,a=s,i=d;break;case 5:t=d,a=s,i=c}return[Math.round(255*t),Math.round(255*a),Math.round(255*i)]},RgbToHex:function(e,t,a){if(Array.isArray(e))a=e[2],t=e[1],e=e[0];else if("string"===typeof e&&e.indexOf(",")){var i=e.split(","),r=Object(n.a)(i,3);e=r[0],t=r[1],a=r[2]}return e=parseInt(e).toString(16),t=parseInt(t).toString(16),a=parseInt(a).toString(16),1===e.length&&(e="0"+e),1===t.length&&(t="0"+t),1===a.length&&(a="0"+a),"#"+e+t+a}},l=a(44),u=a(576)("./light."+s.a.getLanguage()).default;function d(e){var t=e.stateKey,a=e.stateVal,o=Object(i.useState)(a),s=Object(n.a)(o,2),c=s[0],u=s[1];Object(i.useEffect)((function(){return u(a)}),[a]);var d,p={};"rgb"===t&&c?p={Red:(d=c.split(","))[0],Green:d[1],Blue:d[2]}:"hsv"===t&&c&&(p={Hue:(d=c.split(","))[0],Saturation:d[1],Brightness:d[2]});var f=l.default.components.Label,g=[];for(var h in p)g.push(r.a.createElement(f,{key:h,label:h+" "+p[h],br:!0}));return g}function p(e){var t=e.device,a=e.stateKey,s=e.stateVal,u=e.title,d=s||"#ffffff";"rgb"===a?d=c.RgbToHex(d):"hsv"===a&&(d=c.RgbToHex(c.HsvToRgb(d)));var p=Object(i.useState)(d),f=Object(n.a)(p,2),g=f[0],h=f[1];Object(i.useEffect)((function(){"rgb"===a?h(c.RgbToHex(s)):"hsv"===a?h(c.RgbToHex(c.HsvToRgb(s))):"hex"===a&&h(s)}),[a,s]);var m=l.default.components.Component;return r.a.createElement(m,{title:u||a},r.a.createElement(o.SketchPicker,{color:g,width:"100%",onChangeComplete:function(e,n){e=e[a],"rgb"===a?e=[e.r,e.g,e.b].join(","):"hsv"===a&&(e=[e.h,e.s,e.v].join(",")),t.setDeviceState(a,e).catch((function(e){return console.error(e)}))}}))}s.a.setTranslation(s.a.getLanguage(),u);var f={icon:{default:"palette"},unit:" \xb0"};t.default={configurations:{power:{icon:{true:"lightbulb-on",false:"lightbulb-off-outline"}},level:{value:function(e){return e>0&&e<=1?100*e:e},unit:function(e){return e>0?" %":null},icon:{default:"lightbulb-on",0:"lightbulb-off-outline"},state:{0:s.a.t("light#level#off")}},colorTemperature:{icon:{default:"thermometer"},unit:" \xb0K"},hue:f,rgb:f,hsv:f,hex:f},components:{level:l.default.components.LevelComponent,colorTemperature:function(e){var t=l.default.components.LevelComponent;return r.a.createElement(t,Object.assign({min:2e3,max:6500,step:10},e))},rgb:p,hsv:p,hex:p,hue:function(e){var t=e.device,a=e.stateKey,s=e.stateVal,u=e.title,d=Object(i.useState)(s),p=Object(n.a)(d,2),f=p[0],g=p[1];Object(i.useEffect)((function(){return g(s)}),[s]);var h=l.default.components.Component,m=c.RgbToHex(c.HsvToRgb(f));return r.a.createElement(h,{title:u||a},r.a.createElement(o.HuePicker,{color:m,width:"100%",onChangeComplete:function(e,n){g(Math.round(e.hsl.h)),t.setDeviceState(a,Math.round(e.hsl.h)).catch((function(e){return console.error(e)}))}}))}},actions:{power:l.default.actions.PowerAction,level:function(e){var t=e.device,a=e.stateKey,o=e.stateVal,s=function(e){p(e.target.checked),t.setDeviceState(a,e.target.checked?100:0).catch((function(e){return console.error(e)}))},c=Object(i.useState)(o>0),u=Object(n.a)(c,2),d=u[0],p=u[1];return Object(i.useEffect)((function(){return p(o>0)}),[o]),t.parent&&t.parent.states.power?r.a.createElement(l.default.actions.Action,Object.assign({},e,{stateVal:d,onChange:s})):r.a.createElement(l.default.actions.PowerAction,Object.assign({},e,{stateVal:d,onChange:s}))},rgb:d,hsv:d,hex:d},styles:{_any:{state:{0:{color:"#999"}}}}}},217:function(e,t,a){"use strict";a.r(t);var n=a(14),i=a(0),r=a.n(i),o=a(2),s=a(174),c=a.n(s),l=a(178),u=a(594),d=a(317),p=a.n(d),f=a(157),g=a.n(f),h=a(156),m=a.n(h),v=a(6),b=a(44);var y=a(176),S=Object(y.a)((function(e){return{value:function(e){return{float:"left",lineHeight:"32px",marginRight:"10px"}},borderLeftTransparent:{borderLeftColor:"transparent !important"},borderLeftColor:{borderLeftColor:c()(e.palette.primary.main).alpha(.5).rgb().toString()+"!important"},borderRightTransparent:{borderRightColor:"transparent !important"},borderRightColor:{borderRightColor:c()(e.palette.primary.main).alpha(.5).rgb().toString()+"!important"},borderRightColorSecondary:{borderRightColor:c()(e.palette.secondary.main).alpha(.5).rgb().toString()+"!important"}}})),k=a(409)("./blind."+v.a.getLanguage()).default;v.a.setTranslation(v.a.getLanguage(),k);t.default={configurations:{level:{value:function(e){return Math.round(e)},icon:{default:"window-shutter-open",">90":"window-shutter-open","<=90":"window-shutter"}},level2:{value:function(e){return Math.round(e)},unit:" %",icon:{default:"window-shutter-open",">90":"window-shutter-open","<=90":"window-shutter"}},activity:{val:function(e,t,a){return function(e,t){if("HomeMatic"===e)switch(t){case 1:case 2:t=!0;break;case 3:t=!1;break;default:t=null}else if("Shelly"===e)switch(t){case"open":case"close":t=!0;break;case"stop":t=!1;break;default:t=null}return t}(a.options.manufacturer,e)},icon:{true:"pan-vertical",false:"dots-vertical"},state:{true:v.a.t("blind#activity#true"),false:v.a.t("blind#activity#false")}}},components:{level2:b.default.components.LevelComponent},actions:{level:function(e){var t=e.device,a=e.state,s=e.stateKey,c=S(),d=Object(i.useState)(a.value),f=Object(n.a)(d,2),h=f[0],v=f[1];Object(i.useEffect)((function(){return v(a.value)}),[a]);var b=function(e,t,a){"activity"===e&&j(t.val)},y=Object(i.useState)(!1),k=Object(n.a)(y,2),O=k[0],j=k[1];return Object(i.useEffect)((function(){return t.states.activity&&t.states.activity.state&&(t.states.activity.state="string"===typeof t.states.activity.state?{node:t.states.activity.state}:t.states.activity.state,t.requestDeviceState("activity",!0).catch((function(e){return console.error(e)})),t.listen(b)),function(){return t.unlisten(b)}}),[t,a]),r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:c.value},h+a.unit),r.a.createElement(u.a,{size:"small"},r.a.createElement(l.a,{color:"primary",className:Object(o.a)(null!==O&&(O?c.borderRightTransparent:c.borderRightColor)),onClick:function(){v(100),j(!0),t.setDeviceState(s,100).catch((function(e){return console.error(e)}))}},r.a.createElement(p.a,null)),null!==O&&r.a.createElement(l.a,{color:"secondary",className:Object(o.a)(O?c.borderRightColorSecondary:[c.borderLeftTransparent,c.borderRightTransparent]),onClick:function(){j(!1),t.setDeviceState("activity",!0).catch((function(e){return console.error(e)}))},disabled:!O},r.a.createElement(m.a,null)),r.a.createElement(l.a,{color:"primary",className:Object(o.a)(null!==O&&(O?c.borderLeftTransparent:c.borderLeftColor)),onClick:function(){v(0),j(!0),t.setDeviceState(s,0).catch((function(e){return console.error(e)}))}},r.a.createElement(g.a,null))))}},styles:{}}},255:function(e,t,a){"use strict";a.r(t);var n=a(217);a.d(t,"default",(function(){return n.default}))},258:function(e,t,a){"use strict";a.r(t),t.default={"blind#activity":"Aktivit\xe4t","blind#level":"Behangh\xf6he","blind#level2":"Lamellenposition","blind#activity#true":"in Bewegung","blind#activity#false":"keine"}},259:function(e,t,a){"use strict";a.r(t),t.default={"blind#activity":"Activity","blind#level":"Level","blind#level2":"Lamella","blind#activity#true":"moving","blind#activity#false":"none"}},260:function(e,t,a){"use strict";a.r(t),t.default={"door#bell":"Klingel","door#lock":"Schlo\xdf","door#open":"T\xfcr","door#open#true":"offen","door#open#false":"geschlossen"}},261:function(e,t,a){"use strict";a.r(t),t.default={"door#bell":"Bell","door#lock":"Lock","door#open":"Door","door#open#true":"open","door#open#false":"closed"}},262:function(e,t,a){"use strict";a.r(t),t.default={"heating#boost":"Boost","heating#humidity":"Luftfeuchtigkeit","heating#setTemperature":"eingestellte Temperatur","heating#temperature":"Temperatur"}},263:function(e,t,a){"use strict";a.r(t),t.default={"heating#boost":"Boost","heating#humidity":"Humidity","heating#setTemperature":"Set Temperature","heating#temperature":"Temperature"}},27:function(e,t,a){"use strict";a.d(t,"a",(function(){return s}));var n=a(12),i=a(20),r=a(21),o=a(6),s=function(){function e(){Object(i.a)(this,e)}return Object(r.a)(e,null,[{key:"setSettings",value:function(t){return!!t&&(e.settings=Object(n.a)({},e.settings,{},t||{}),console.log("Set settings",e.settings),!0)}},{key:"getSetting",value:function(t){return e.settings[t]||""}},{key:"applySettings",value:function(){if(e.settings.language?(o.a.setLanguage(e.settings.language),o.a.loadTranslation(e.settings.language)):o.a.loadTranslation(),e.settings.pageTitle&&(document.title=e.settings.pageTitle),e.settings.pageFavicon&&"data:"===e.settings.pageFavicon.substr(0,5)&&(document.getElementById("favicon").href=e.settings.pageFavicon),e.settings.translations){var t=e.settings.translations;for(var a in t)o.a.setTranslation(a,t[a])}}}]),e}();s.settings={}},297:function(e,t,a){"use strict";a.r(t),t.default={"light#colorTemperature":"Farbtemperatur","light#hex":"Farbe (Hex)","light#hsv":"Farbraum Hue-Saturation-Value (HSV)","light#hue":"Farbe (Hue)","light#level":"Helligkeit","light#power":"Licht","light#rgb":"Farbraum Rot-Gr\xfcn-Blau (RGB)","light#level#off":"ausgeschaltet"}},298:function(e,t,a){"use strict";a.r(t),t.default={"light#colorTemperature":"Color Temperature","light#hex":"Color (Hex)","light#hsv":"Colorspace Hue-Saturation-Value (HSV)","light#hue":"Color (Hue)","light#level":"Brightness","light#power":"Power","light#rgb":"Colorspace Red-Green-Blue (RGB)","light#level#off":"off"}},299:function(e,t,a){"use strict";a.r(t),t.default={"location#position":"Position","location#presence":"Anwesenheit","location#users":"Benutzer","location#presence#true":"anwesend","location#presence#false":"abwesend","location#users#empty":"niemand anwesend"}},300:function(e,t,a){"use strict";a.r(t),t.default={"location#position":"Position","location#presence":"Presence","location#users":"Users","location#presence#true":"present","location#presence#false":"absent","location#users#empty":"nobody present"}},301:function(e,t,a){"use strict";a.r(t),t.default={"user#location":"Standort","user#position":"Position"}},302:function(e,t,a){"use strict";a.r(t),t.default={"user#location":"Location","user#position":"Position"}},303:function(e,t,a){"use strict";a.r(t),t.default={"window#open":"Fenster","window#open#true":"offen","window#open#false":"geschlossen"}},304:function(e,t,a){"use strict";a.r(t),t.default={"window#open":"Window","window#open#true":"open","window#open#false":"closed"}},305:function(e,t,a){"use strict";a.r(t),a.d(t,"ModuleSettings",(function(){return T}));var n=a(12),i=a(19),r=a(20),o=a(21),s=a(26),c=a(17),l=a(25),u=a(0),d=a.n(u),p=a(2),f=a(87),g=a(52),h=a(6),m=a(120),v=a(89),b=a(221),y=a(597),S=a(339),k=a(119),O=a(220),j=a(340),E=a(320),w=a.n(E),C=a(4),x=function(e){function t(e){var a;return Object(r.a)(this,t),(a=Object(s.a)(this,Object(c.a)(t).call(this,e))).state={adapterInformation:[],adapterAliveStatus:{},newUpdates:!1,updatesJson:"",lastUpdateCheck:""},a.socket=g.a.getConnection,a.list=a.props.settings.list?Array.isArray(a.props.settings.list)?a.props.settings.list:a.props.settings.list.split(","):null,a.blacklist=a.props.settings.blacklist?Array.isArray(a.props.settings.blacklist)?a.props.settings.blacklist:a.props.settings.blacklist.split(","):null,a}return Object(l.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){var e=this;if(!1!==this.props.settings.updates){var t=["admin.0.info.newUpdates","admin.0.info.lastUpdateCheck","admin.0.info.updatesJson"];this.socket.getStates(t,(function(a,n){e.setState({newUpdates:n["admin.0.info.newUpdates"].val,lastUpdateCheck:n["admin.0.info.lastUpdateCheck"].val,updatesJson:n["admin.0.info.updatesJson"].val}),e.socket.subscribeStates(t,(function(t,a){t=t.substr(t.lastIndexOf(".")+1),e.state[t]!==a.val&&e.setState(Object(i.a)({},t,a.val))}))}))}this.socket.getAdapterInstances((function(t,a){var r=[];if(a&&a.rows){var o=[];a.rows.forEach((function(t,a){(!e.list||e.list&&e.list.indexOf(t.value.common.name)>-1)&&(!e.blacklist||e.blacklist&&-1===e.blacklist.indexOf(t.value.common.name))&&(o.push(t),r=r.concat([t.id+".alive",t.id+".connected",t.id.replace("system.adapter.","")+".info.connection"]))})),e.setState({adapterInformation:o.sort((function(e,t){return e.id>t.id?1:t.id>e.id?-1:0}))}),e.socket.getStates(r,(function(t,a){e.setState({adapterAliveStatus:a}),e.socket.subscribeStates(r,(function(t,a){!a||e.state.adapterAliveStatus[t]&&a.val===e.state.adapterAliveStatus[t].val||e.setState((function(e){return{adapterAliveStatus:Object(n.a)({},e.adapterAliveStatus,Object(i.a)({},t,a))}}))}))}))}}))}},{key:"render",value:function(){var e=this,t=this.props.classes,a=this.state.updatesJson&&JSON.parse(this.state.updatesJson)||{},n=Object.keys(a).length,i=d.a.createElement(k.a,{key:"loading",className:t.loading},d.a.createElement(m.a,{size:20}));return this.state.adapterInformation.length>0&&(i=this.state.adapterInformation.map((function(n){n.update=a[n.value.common.name]||!1;var i=n.value.common.enabled,r=e.state.adapterAliveStatus[n.id+".alive"]&&e.state.adapterAliveStatus[n.id+".alive"].val||!1,o=e.state.adapterAliveStatus[n.id+".connected"]&&e.state.adapterAliveStatus[n.id+".connected"].val||!1,s=!e.state.adapterAliveStatus[n.id.replace("system.adapter.","")+".info.connection"]||e.state.adapterAliveStatus[n.id.replace("system.adapter.","")+".info.connection"].val,c=h.a.t("Adapter")+" "+(i?r&&o&&s?h.a.t("alive"):h.a.t("not alive"):h.a.t("disabled"));return d.a.createElement(k.a,{key:"adapter-"+n.id},d.a.createElement(S.a,null,d.a.createElement(b.a,{alt:n.value.common.name,src:n.value.common.extIcon,className:t.small})),d.a.createElement(O.a,{primary:n.value.common.title,secondary:["v"+n.value.common.version,n.update&&n.value.common.version!==n.update.availableVersion&&d.a.createElement("span",{key:"updates-"+n.id},", ",d.a.createElement("span",{className:t.UpdateAvailable},h.a.t("Update available")+" v"+n.update.availableVersion)),n.value.common.runAsCompactMode&&", "+h.a.t("Compact Mode")+" "+h.a.t("on")+" ("+h.a.t("Group")+" "+n.value.common.compactGroup+")"]}),d.a.createElement(j.a,{className:Object(p.a)(t.StatusIndicator,i?r&&o&&s?t.alive:t.notAlive:t.disabled)},d.a.createElement(v.a,{title:c},d.a.createElement("span",{className:i?r&&o&&s?"mdi mdi-check-circle":"mdi mdi-alert":"mdi mdi-close"}))))}))),d.a.createElement(y.a,{dense:!0},!1===this.state.newUpdates?this.state.lastUpdateCheck&&d.a.createElement(k.a,{key:"updates",classes:{root:t.noUpdates}},d.a.createElement(O.a,{primary:h.a.t("last update")+": "+Object(f.a)(new Date(this.state.lastUpdateCheck),"dd.MM.yyyy HH:mm:ss",{locale:h.b[h.a.getLanguage()]})})):d.a.createElement(k.a,{key:"updates",classes:{container:t.UpdatesListItem}},d.a.createElement(S.a,null,d.a.createElement(w.a,null)),d.a.createElement(O.a,{primary:h.a.t("Updates available")+"!"}),d.a.createElement(j.a,{className:Object(p.a)(t.StatusIndicator,t.UpdatesIndicator)},n)),i)}}]),t}(d.a.Component),T={noDevicesAllowed:!0,title:h.a.t("Adapter Status"),icon:"traffic-light"};t.default=Object(C.a)((function(e){return{noUpdates:{fontStyle:"italic",textAlign:"right",color:"rgba(0, 0, 0, 0.54)"},UpdateAvailable:{color:"#CCAA00"},UpdatesListItem:{backgroundColor:"#ffd700",color:"#fff",margin:e.spacing(0,-2),paddingLeft:e.spacing(2)},UpdatesIndicator:{right:e.spacing(3.75),backgroundColor:"#CCAA00",borderRadius:"50%",width:e.spacing(3),height:e.spacing(3),color:"#fff",textAlign:"center",fontSize:"1rem !important"},StatusIndicator:{fontSize:"1.4rem"},loading:{textAlign:"center",marginTop:"5px"},small:{width:e.spacing(3),height:e.spacing(3)},alive:{color:"#86d686"},notAlive:{color:"#f7e43b"},disabled:{color:"#bababa"}}}))(x)},306:function(e,t,a){"use strict";a.r(t);var n=a(47),i=a(12),r=a(20),o=a(21),s=a(26),c=a(17),l=a(74),u=a(25),d=a(0),p=a.n(d),f=a(2),g=a(321),h=(a(587),a(588),a(334)),m=a(6),v=a(108),b=a(120),y=a(178),S=a(594),k=a(605),O=a(89),j=a(88),E=a(341),w=a(36),C=a(602),x=a(222),T=a(342),D=a(110),N=a(177),L=a(325),I=a.n(L),R=a(326),A=a.n(R),M=a(323),P=a.n(M),F=a(324),U=a.n(F),B=a(328),H=a.n(B),K=a(327),_=a.n(K),z=a(4),V=function(e){function t(e){var a;return Object(r.a)(this,t),(a=Object(s.a)(this,Object(c.a)(t).call(this,e))).historyChange=function(e){return function(t,n,r,o){a.addChartGraph(o,n,Object(i.a)({},e,{axis:a.getAxis(e.start,e.end)})),a.setState({loading:!1})}},a.stateChange=function(e){return function(t,n,r,o){return a.updateChartGraph(o,n,Object(i.a)({},e,{axis:a.getAxis(e.end,new Date)}))}},a.chartFilter=a.props.settings.chartFilter||{},a.chartConfig=a.props.settings.chartConfig||{},a.chartConfig.yAxes=a.chartConfig.yAxes||[],a.chartConfig.yAxes.unshift({id:"left",type:"linear",position:"left",ticks:{callback:function(e){return(a.chartConfig.yLeftAxisUnitBefore||"")+Number.parseFloat(e).toFixed(1)+(a.chartConfig.yLeftAxisUnitAfter||"")}}}),a.state={loading:!0,errors:[],datePicker:!1,selectedTimeRangeValue:a.chartFilter&&a.chartFilter.selectedTimeRangeValue||1,selectedTimeRangeUnit:a.chartFilter&&a.chartFilter.selectedTimeRangeUnit||"days",selectedDateTime:a.chartFilter&&a.chartFilter.selectedDateTime&&new Date(a.chartFilter.selectedDateTime)||new Date,dateNow:!a.chartFilter||!a.chartFilter.selectedDateTime,chartLabels:[],chartData:{labels:[],datasets:[]},chartPan:!0,chartZoom:!0},a.timer=null,a.timeRangeRef=p.a.createRef(),a.chartRef=p.a.createRef(),a.chartUpdates={},a.chartOptions={maintainAspectRatio:!1,spanGaps:!0,legend:{onClick:a.legendClickHandler.bind(Object(l.a)(a))},tooltips:{callbacks:{label:function(e,t){return t.datasets[e.datasetIndex].label+": "+e.value+t.datasets[e.datasetIndex].unit}}},scales:{yAxes:a.chartConfig.yAxes},plugins:{colorschemes:{scheme:"brewer.SetOne9"},zoom:{pan:{enabled:!0,mode:"xy"},zoom:{enabled:!0,mode:"xy"}}}},a}return Object(u.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=Object(i.a)({},this.getTimeRange(),{axis:this.getAxis()});this.props.devices.forEach((function(a){a.label=a.name+" ("+m.a.t(a.primaryStateKey)+")",a.requestDeviceStateHistory(a.options.history||null,!0,{start:t.start,end:t.end,step:t.step,aggregate:"average",ignoreNull:!0}).catch((function(e){console.error(e)})),a.listen("historyChange",(function(t){return e.historyChange})),null!==e.props.settings.liveUpdates&&!1!==e.props.settings.liveUpdates&&e.state.dateNow&&a.listen((function(t){return e.stateChange}))}))}},{key:"componentWillUnmount",value:function(){var e=this;this.props.devices.forEach((function(t){t.unlisten(e.stateChange)}))}},{key:"componentDidUpdate",value:function(e,t){var a=this;!this.state.selectedTimeRangeValue||t.selectedDateTime===this.state.selectedDateTime&&t.selectedTimeRangeValue===this.state.selectedTimeRangeValue&&t.selectedTimeRangeUnit===this.state.selectedTimeRangeUnit||(this.setState({loading:!0,errors:[]}),clearTimeout(this.timer),this.timer=setTimeout((function(){var e=a.getTimeRange();a.props.devices.forEach((function(t){t.requestDeviceStateHistory(t.options.history||null,!0,{start:e.start,end:e.end,step:e.step,aggregate:"average",ignoreNull:!0}).catch((function(e){console.error(e)}))}))}),500))}},{key:"getTimeRange",value:function(){var e=this.state.selectedDateTime.getTime(),t=this.state.selectedTimeRangeValue,a=1,n="dd. MMM yyyy, HH:mm";switch(this.state.selectedTimeRangeUnit){default:break;case"seconds":n="dd. MMM yyyy, HH:mm:ss";break;case"minutes":n="dd. MMM yyyy, HH:mm:ss",t*=60;break;case"hours":n="dd. MMM yyyy, HH:mm",t=60*t*60,a*=60;break;case"days":n="dd. MMM yyyy, HH:mm",t=60*t*60*24,a=60*a*60;break;case"months":n="dd. MMM yyyy",t=60*t*60*24*31,a=60*a*60*24;break;case"years":n="dd. MMM yyyy",t=60*t*60*24*365,a=60*a*60*24*31}return{axisTimeFormat:n,start:e-1e3*t,end:e,timeRange:1e3*t,step:1e3*a}}},{key:"getAxis",value:function(e,t){for(var a=this.getTimeRange(),n=a.step,i=a.axisTimeFormat,r={},o=e;o<=t;o+=n)r[o]=v.a.secondsToDateTime(o/1e3,i);return r}},{key:"groupChartData",value:function(e,t){var a,i=[],r=Object.keys(t);return r.forEach((function(t,o){for(var s in a=r[o-1>0?o-1:0],e){var c=e[s];if(c.val=parseFloat(c.val),c.ts&&null!==c.val&&!(a>c.ts))if(a<c.ts&&c.ts<=t)i[o]=i[o]?[].concat(Object(n.a)(i[o]),[c.val]):[c.val];else if(c.ts>t)break}i[o]&&(1===i[o].length?i[o]=i[o][0]:i[o]=i[o].reduce((function(e,t){return e+t}),0)/i[o].length)})),i}},{key:"updateChartGraph",value:function(e,t,a){var i=this.state.chartLabels.findIndex((function(t){return t===e.label}));if(-1===i)return!1;this.chartUpdates[i]=this.chartUpdates[i]||[],this.chartUpdates[i].push({ts:t.ts,val:t.val});var r=this.groupChartData(this.chartUpdates[i],a.axis);this.chartRef.current.chartInstance.data.labels=[].concat(Object(n.a)(this.state.chartData.labels),Object(n.a)(Object.values(a.axis))),this.chartRef.current.chartInstance.data.datasets[i].data=[].concat(Object(n.a)(this.state.chartData.datasets[i].data),Object(n.a)(r)),this.chartRef.current.chartInstance.update()}},{key:"addChartGraph",value:function(e,t,a){if(!t||!t.length){var r=m.a.t("No history data given for %s").replace("%s",e.label)+"!";return this.setState((function(e){return{errors:[].concat(Object(n.a)(e.errors),[r])}})),!1}var o=this.groupChartData(t,a.axis),s=this.state.chartLabels.findIndex((function(t){return t===e.label}));if(s>-1)this.chartRef.current.chartInstance.data.labels=Object.values(a.axis),this.chartRef.current.chartInstance.data.datasets[s].data=o,this.chartRef.current.chartInstance.update();else{this.setState((function(t){return{chartLabels:[].concat(Object(n.a)(t.chartLabels),[e.label])}}));var c=Object(i.a)({label:e.label,unit:e.states[e.primaryStateKey].state.value.unit||"",fill:!1},e.options.graphConfig||{},{data:o});this.setState((function(e){return{axisTimeFormat:a.axisTimeFormat,chartData:{labels:Object.values(a.axis),datasets:[].concat(Object(n.a)(e.chartData.datasets),[c])}}}))}}},{key:"legendClickHandler",value:function(e,t){var a=t.datasetIndex,n=this.chartRef.current.chartInstance,i=n.getDatasetMeta(a);i.hidden=null===i.hidden?!n.data.datasets[a].hidden:null,n.update(),n.resetZoom()}},{key:"disablePan",value:function(){var e=this.chartRef.current.chartInstance.options.plugins.zoom.pan.enabled;this.chartRef.current.chartInstance.options.plugins.zoom.pan.enabled=!1===e,this.setState({chartPan:!1===e})}},{key:"disableZoom",value:function(){var e=this.chartRef.current.chartInstance.options.plugins.zoom.zoom.enabled;this.chartRef.current.chartInstance.options.plugins.zoom.zoom.enabled=!1===e,this.setState({chartZoom:!1===e})}},{key:"render",value:function(){var e=this,t=this.props,a=t.classes,n=t.settings;return p.a.createElement("div",null,p.a.createElement("div",{className:a.options},p.a.createElement(j.a,{className:a.datePicker},p.a.createElement(O.a,{title:m.a.t("Period shown in Chart")},p.a.createElement(P.a,{className:a.icon})),p.a.createElement(x.a,{inputRef:this.timeRangeRef,className:a.input,value:this.state.selectedTimeRangeValue,onChange:function(t){return e.setState({selectedTimeRangeValue:t.target.value})}}),p.a.createElement(T.a,{value:this.state.selectedTimeRangeUnit,onChange:function(t){return e.setState({selectedTimeRangeUnit:t.target.value})},displayEmpty:!0,disableUnderline:!0,className:a.select},p.a.createElement(D.a,{value:"seconds"},m.a.t("Seconds")),p.a.createElement(D.a,{value:"minutes"},m.a.t("Minutes")),p.a.createElement(D.a,{value:"hours"},m.a.t("Hours")),p.a.createElement(D.a,{value:"days"},m.a.t("Days")),p.a.createElement(D.a,{value:"months"},m.a.t("Months")),p.a.createElement(D.a,{value:"years"},m.a.t("Years")))),p.a.createElement(j.a,{className:a.datePicker},p.a.createElement(O.a,{title:m.a.t("End date")},p.a.createElement(U.a,{className:a.icon})),p.a.createElement(w.a,{locale:m.b[m.a.getLanguage()],utils:h.a},p.a.createElement(C.a,{className:a.input,value:this.state.selectedDateTime,onChange:function(t){return e.setState({selectedDateTime:t,dateNow:!1})},open:this.state.datePicker,onOpen:function(){return e.setState({datePicker:!0})},onClose:function(){return e.setState({datePicker:!1})},variant:"inline",ampm:!1,format:"dd.MM.yyyy HH:mm",InputProps:{disableUnderline:!0}})),p.a.createElement(O.a,{title:m.a.t("Select end date")},p.a.createElement(N.a,{color:"primary",className:a.iconButton,onClick:function(){return e.setState({datePicker:!0})}},p.a.createElement(I.a,null))),p.a.createElement(E.a,{className:a.dividerVertical,orientation:"vertical"}),p.a.createElement(O.a,{title:m.a.t("Select today as end date")},p.a.createElement(N.a,{className:a.iconButton,onClick:function(){return e.setState({selectedDateTime:new Date,dateNow:!0})}},p.a.createElement(A.a,null)))),p.a.createElement(O.a,{title:m.a.t("Live updates are "+(null!==this.props.settings.liveUpdates&&!1!==this.props.settings.liveUpdates&&this.state.dateNow?"on":"off")),placement:"top",style:{display:"flex"}},p.a.createElement("span",null,p.a.createElement(y.a,{disabled:!0,className:Object(f.a)(a.datePicker,null!==this.props.settings.liveUpdates&&!1!==this.props.settings.liveUpdates&&this.state.dateNow?a.button:a.buttonDisabled)},p.a.createElement(_.a,null))))),p.a.createElement(E.a,{className:a.divider}),p.a.createElement("div",{className:a.toolbar},p.a.createElement("div",{className:a.errorMessage},this.state.errors.length>0&&p.a.createElement(k.a,{severity:"error"},this.state.errors.map((function(e,t){return[e,p.a.createElement("br",{key:"br-error-"+t})]})))),p.a.createElement(S.a,{className:a.toolbarButtons,color:"primary"},p.a.createElement(y.a,{disableElevation:!0,variant:"contained",onClick:function(){return e.chartRef.current.chartInstance.resetZoom()}},p.a.createElement(O.a,{title:m.a.t("Reset Zoom")},p.a.createElement(H.a,null))))),p.a.createElement("div",{className:"chart-container",style:{position:"relative",height:n.chartHeight||"500px"}},this.state.loading&&p.a.createElement("div",{className:a.loading},p.a.createElement(b.a,null)),p.a.createElement(g.a,{ref:this.chartRef,data:this.state.chartData,options:this.chartOptions})))}}]),t}(p.a.Component);t.default=Object(z.a)((function(e){return{loading:{position:"absolute",backgroundColor:"rgba(0, 0, 0, 0.3)",width:"100%",height:"100%",display:"flex",alignItems:"center",justifyContent:"center"},errorMessage:{marginBottom:5,marginRight:15,width:"100%"},toolbar:{display:"flex"},toolbarButtons:{display:"initial",whiteSpace:"nowrap"},options:{display:"flex",justifyContent:"center"},datePicker:{padding:"2px 4px",display:"flex",alignItems:"center",margin:2},input:{marginLeft:e.spacing(1),flex:1},select:{width:100},icon:{margin:10},iconButton:{padding:10},divider:{margin:"15px 0"},dividerVertical:{height:28,margin:4},button:{backgroundColor:e.palette.primary.main,color:"#fff !important",margin:"4px"},buttonDisabled:{backgroundColor:"#eee",margin:"4px"}}}))(V)},307:function(e,t,a){"use strict";a.r(t),a.d(t,"default",(function(){return p})),a.d(t,"ModuleSettings",(function(){return f}));var n=a(12),i=a(14),r=a(0),o=a.n(r),s=a(87),c=a(219),l=a(27),u=a(6),d=a(120);function p(e){var t=e.settings,a=Object(r.useRef)(),p=Object(r.useState)(Object(s.a)(new Date,t.format,{locale:u.b[u.a.getLanguage()]})),f=Object(i.a)(p,2),g=f[0],h=f[1],m=Object(r.useState)(""),v=Object(i.a)(m,2),b=v[0],y=v[1],S=Object(r.useState)(""),k=Object(i.a)(S,2),O=k[0],j=k[1],E=Object(r.useState)(""),w=Object(i.a)(E,2),C=w[0],x=w[1];return t.style=Object(n.a)({fontSize:"1.5rem",textAlign:"center"},t.style),t.format=t.format||"dd.MM.yyyy HH:mm:ss",t.refresh=t.format.indexOf("s")>-1?1e3:t.format.indexOf("i")>-1?6e4:36e5,Object(r.useEffect)((function(){clearTimeout(a.current),a.current=setTimeout((function(){return h(Object(s.a)(new Date,t.format,{locale:u.b[u.a.getLanguage()]}))}),t.refresh),l.a.getSetting("iobroker").latitude&&l.a.getSetting("iobroker").longitude&&(j(Object(c.getSunrise)(l.a.getSetting("iobroker").latitude,l.a.getSetting("iobroker").longitude)),x(Object(c.getSunset)(l.a.getSetting("iobroker").latitude,l.a.getSetting("iobroker").longitude))),l.a.getSetting("iobroker").city&&y(l.a.getSetting("iobroker").city)}),[t]),o.a.createElement("div",{style:t.style},u.a.t("%DateTime").replace(/%DateTime/,g),!1!==t.sun&&o.a.createElement("div",{style:{margin:"5px 0",fontSize:"1.2rem"}},o.a.createElement("span",{className:"mdi mdi-city-variant-outline"})," ",b||o.a.createElement(d.a,{size:"1.2rem"}),o.a.createElement("span",{style:{margin:"0 10px"}}),o.a.createElement("span",{className:"mdi mdi-weather-sunset-up"})," ",O?Object(s.a)(O,"HH:mm"):o.a.createElement(d.a,{size:"1.2rem"}),o.a.createElement("span",{style:{margin:"0 10px"}}),o.a.createElement("span",{className:"mdi mdi-weather-sunset-down"})," ",C?Object(s.a)(C,"HH:mm"):o.a.createElement(d.a,{size:"1.2rem"})))}var f={noDevicesAllowed:!0,title:u.a.t("Time"),icon:"clock-outline"}},308:function(e,t,a){"use strict";a.r(t),a.d(t,"default",(function(){return j}));var n=a(19),i=a(12),r=a(14),o=a(0),s=a.n(o),c=a(2),l=a(40),u=a.n(l),d=a(607),p=a(609),f=a(601),g=a(608),h=a(27),m=a(6),v=a(604),b=a(53),y=a(89),S=a(221),k=a(176),O=Object(k.a)((function(e){return{map:{width:"100%",height:"100%"},mapOverview:{color:"#666",position:"absolute",left:0,bottom:0,width:"100%",height:"60px",zIndex:999,display:"flex",alignItems:"center","& > *":{margin:e.spacing(1),cursor:"pointer"}},mapIconContainer:{},mapIconParent:{backgroundColor:"#fff",boxShadow:"0 0 0 8px rgba(255, 255, 255, 0.3)",borderRadius:"50%",width:"100%",height:"100%"},mapIcon:{fontSize:"2rem",color:e.palette.primary.main,transform:"translate3d(4px, -4px,0)",display:"block","&:after":{content:'""',display:"block",padding:"50% 0%"}},mapTooltip:{}}}));function j(e){var t=e.settings,a=e.devices,l=O(),u=Object(o.useState)(t.component.defaultZoom),f=Object(r.a)(u,1)[0],g=Object(o.useState)(t.component.defaultPosition?Array.isArray(t.component.defaultPosition)?t.component.defaultPosition:t.component.defaultPosition.split(","):[h.a.getSetting("iobroker").latitude,h.a.getSetting("iobroker").longitude]),k=Object(r.a)(g,1)[0],j=Object(o.useState)({}),w=Object(r.a)(j,2),C=w[0],x=w[1],T=Object(o.useRef)(),D=Object(o.useCallback)((function(){T.current=this}),[]),N=Object(o.useCallback)((function(e){return T.current.flyTo(e.split(","))}),[]),L=function(e,t,a){"position"===e&&x((function(e){return e[a.id]&&e[a.id].position===t.val?e:(a.options.position=t.val,Object(i.a)({},e,Object(n.a)({},a.id,a)))}))};Object(o.useEffect)((function(){return a.forEach((function(e){e.requestDeviceState("position").catch((function(t){console.error(t),x((function(t){return t[e.id]?t:Object(i.a)({},t,Object(n.a)({},e.id,null))}))})),e.listen(L)})),function(){return a.forEach((function(e){return e.unlisten(L)}))}}),[a]);var I=[],R=[];if(a.length>0&&a.length===Object.keys(C).length){var A=function(e){var a=C[e];if(null!==a){var n=s.a.createElement(E,{key:"marker-"+a.id,position:a.options.position,device:a,settings:t.component});I.push(n);var i=null;if(a.attributes.avatar)i=s.a.createElement(S.a,{key:"overview-"+a.id,alt:a.name,src:a.attributes.avatar,onClick:function(){return N(a.options.position)}});else{var r=a.getDeviceState(),o=a.getIcon(null,r&&void 0!==r.val?r.val:null),l=a.getStyle("icon",null,r&&void 0!==r.val?r.val:null);console.log(r&&void 0!==r.val?r.val:null),console.log(l),i=s.a.createElement(S.a,{style:l,key:"overview-"+a.id,alt:a.name,onClick:function(){return N(a.options.position)}},s.a.createElement("span",{className:Object(c.a)("mdi mdi-"+o)}))}R.push(s.a.createElement(y.a,{key:"tooltip-"+a.id,title:a.name,"aria-label":a.name,arrow:!0},i))}};for(var M in C)A(M)}return s.a.createElement(s.a.Fragment,null,s.a.createElement(v.a,{className:l.mapOverview},s.a.createElement(b.a,null,m.a.t("Jump to"),":"),R),s.a.createElement(d.a,{useFlyTo:!0,center:k,zoom:f,className:l.map,whenReady:D},s.a.createElement(p.a,{attribution:'&copy <a href="http://osm.org/copyright">OpenStreetMap</a> contributors',url:"https://{s}.tile.osm.org/{z}/{x}/{y}.png"}),I))}function E(e){var t=e.position,a=e.device,n=e.settings,i=O(),r=null,l=40;if(console.info("Marker for "+a.function+" "+a.name+" added to map."),a.attributes&&a.attributes.avatar&&"data:image/"===a.attributes.avatar.substr(0,11))r=u.a.divIcon({className:i.mapIconContainer,html:'<img src="'+a.attributes.avatar+'" class="'+i.mapIconParent+'" />',iconSize:[64,64]});else{l=30;var d=a.getDeviceState(),p=a.getIcon(null,d&&void 0!==d.val?d.val:null),h=a.getStyle("icon",null,d&&void 0!==d.val?d.val:null);console.log(h);var m=Object(k.a)({root:h},{name:"testi"});console.log(m.root),r=u.a.divIcon({className:i.mapIconContainer,html:'<div class="'+Object(c.a)(i.mapIconParent)+'"><span class="'+Object(c.a)(i.mapIcon,"mdi mdi-"+p)+'"></span></div>',iconSize:[40,40]})}var v=Object(o.useCallback)((function(){this.closeTooltip().openTooltip()}),[]);return s.a.createElement(f.a,{riseOnHover:!0,position:Array.isArray(t)?t:t.split(","),icon:r,onMouseOver:v},s.a.createElement(g.a,{className:i.mapTooltip,direction:n.tooltipDirection||"bottom",permanent:n.tooltipPermanent||!0,offset:[0,l]},a.name))}},309:function(e,t,a){"use strict";a.r(t),a.d(t,"default",(function(){return o}));var n=a(0),i=a.n(n),r=a(144);function o(e){return i.a.createElement(r.default,Object.assign({horizontal:!0},e))}},310:function(e,t,a){"use strict";a.r(t),a.d(t,"default",(function(){return f})),a.d(t,"ModuleSettings",(function(){return g}));var n=a(14),i=a(0),r=a.n(i),o=a(52),s=a(6),c=a(337),l=a(88),u=a(53),d=a(176),p=Object(d.a)((function(e){return{paper:{width:100,height:160,padding:5,textAlign:"center"}}}));function f(e){var t=e.settings,a=p(),d=Object(i.useState)(null),f=Object(n.a)(d,2),g=f[0],h=f[1];Object(i.useEffect)((function(){o.a.getConnection.getRemoteResource(t.url).then((function(e){200===e.statusCode&&h(JSON.parse(e.body))}),(function(e){return console.error(e)}))}),[t.url]);var m=[];if(!g)return null;for(var v in g.day){var b=g.day[v];b.title=1===v?s.a.t("today"):2===v?s.a.t("tomorrow"):b.name;var y=r.a.createElement(c.a,{key:"day-"+v,item:!0},r.a.createElement(l.a,{className:a.paper},r.a.createElement(u.a,{variant:"body1"},b.title),r.a.createElement(u.a,{variant:"caption"},b.date)));m.push(y)}return r.a.createElement(c.a,{container:!0,justify:"space-between",spacing:1},m)}var g={noDevicesAllowed:!0,title:s.a.t("Weather"),icon:"weather-partly-cloudy"}},311:function(e,t,a){"use strict";a.r(t);var n=a(0),i=a.n(n),r=a(12),o=a(19),s=a(20),c=a(21),l=a(26),u=a(17),d=a(25),p=a(2),f=a(108),g=a(341),h=a(683),m=a(331),v=a.n(m),b=a(330),y=a.n(b),S=a(156),k=a.n(S),O=a(332),j=a.n(O),E=a(333),w=a.n(E),C=a(4),x=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).stateChange=function(e,t){"duration"===e&&t&&-1===t.val.indexOf(":")&&(t.val=f.a.timeToHoursMinutesSeconds(t.val)),"isRunning"===e&&t&&"string"===typeof t.val&&(t.val=t.val.indexOf("play")>-1),a.setState(Object(o.a)({},e,t),(function(){a.progress()}))},a.state={},a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){for(var e in this.props.device.states)this.props.device.requestDeviceState(e,!0).catch((function(e){return console.error(e)}));this.props.device.listen(this.stateChange)}},{key:"componentWillUnmount",value:function(){this.props.device.unlisten(this.stateChange)}},{key:"progress",value:function(){var e=this;clearTimeout(this.progressTimeout),this.state.isRunning&&!0===this.state.isRunning.val&&this.state.progress&&this.state.progress.val&&this.state.duration&&this.state.duration.val&&(this.progressTimeout=setTimeout((function(){e.setState((function(e){return{progress:Object(r.a)({},e.progress,{val:f.a.timeToSeconds(e.progress.val)+1})}}),(function(){return e.progress()}))}),1e3))}},{key:"openDialog",value:function(){this.props.openDialog(this.props.device)}},{key:"setDeviceState",value:function(e,t){this.props.device.setDeviceState(e,t).catch((function(e){return console.error(e)}))}},{key:"render",value:function(){var e=this.props,t=e.classes,a=e.noHeader,n=e.index,r=e.device,o={},s={};this.state.background&&""!==this.state.background.val&&(o.backgroundImage="url("+((r.options.backgroundUrlPrepend||"")+this.state.background.val)+")"),this.state.duration&&this.state.duration.val&&(s.width=(this.state.progress&&this.state.progress.val||0)+"px");var c=this.state.isRunning&&this.state.isRunning.val?[i.a.createElement(y.a,{onClick:this.setDeviceState.bind(this,"pause",!0)}),i.a.createElement(k.a,null)]:[i.a.createElement(v.a,{onClick:this.setDeviceState.bind(this,"play",!0)})];return i.a.createElement(i.a.Fragment,null,n>0&&i.a.createElement(g.a,{className:t.divider}),i.a.createElement("div",{className:Object(p.a)(t.container,a&&t.noHeader)},i.a.createElement("div",{className:Object(p.a)(this.state.background&&""!==this.state.background.val?t.image:t.noImage),style:o,onClick:this.openDialog.bind(this)},i.a.createElement("div",{className:t.information},i.a.createElement("p",{className:t.informationLeft},this.state.grandParent&&this.state.grandParent.val&&[this.state.grandParent.val,i.a.createElement("br",{key:"br-"+r.id})],this.state.parent&&this.state.parent.val&&this.state.parent.val+" - ",this.state.title&&this.state.title.val),i.a.createElement("p",{className:t.informationRight},this.state.progress&&f.a.timeToHoursMinutesSeconds(this.state.progress.val)," / ",this.state.duration&&this.state.duration.val))),i.a.createElement("div",{className:t.length,style:{}},i.a.createElement("div",{className:t.lengthBar,style:s})),i.a.createElement("div",{className:t.controls},i.a.createElement("div",{className:Object(p.a)(t.controlsBox,t.controlsBoxLeft)}),i.a.createElement("div",{className:Object(p.a)(t.controlsBox,t.controlsBoxCenter)},i.a.createElement(h.a,{className:t.controlButton,size:"small",color:"secondary"},i.a.createElement(j.a,{onClick:this.setDeviceState.bind(this,"previous",!0)})),c.map((function(e,a){return i.a.createElement(h.a,{key:"icon-"+a,className:t.controlButton,size:"large",color:"primary"},e)})),i.a.createElement(h.a,{className:t.controlButton,size:"small",color:"secondary"},i.a.createElement(w.a,{onClick:this.setDeviceState.bind(this,"next",!0)}))),i.a.createElement("div",{className:Object(p.a)(t.controlsBox,t.controlsBoxRight)}))))}}]),t}(i.a.Component),T=Object(C.a)((function(e){return{divider:{margin:"15px -16px"},container:{margin:e.spacing(0,-2)},noHeader:{marginTop:e.spacing(-4)},image:{height:"200px",display:"flex",alignItems:"flex-end",backgroundPosition:"center",cursor:"pointer"},noImage:{backgroundColor:e.palette.primary.main,display:"flex",cursor:"pointer"},information:{backgroundColor:e.palette.primary.main+"66",color:"#fff",padding:"10px",margin:0,width:"100%",minHeight:"45px"},informationLeft:{width:"80%",float:"left",margin:0},informationRight:{width:"19%",float:"right",margin:0,textAlign:"right"},length:{backgroundColor:e.palette.primary.main,width:"100%",height:"7px"},lengthBar:{backgroundColor:e.palette.secondary.main,height:"100%"},controls:{display:"flex",alignItems:"stretch"},controlsBox:{display:"flex",justifyContent:"center",alignItems:"center",paddingTop:"30px"},controlsBoxLeft:{flex:1,flexDirection:"column",alignItems:"baseline"},controlsBoxCenter:{flex:3},controlsBoxRight:{flex:1,justifyContent:"end"},controlButton:{margin:"0 5px"},controlButtonSmall:{margin:"0 10px",fontSize:"1.2rem",height:"32px",width:"32px"}}}))(x);function D(e){var t=e.devices,a=e.settings;return t.map((function(t,n){return i.a.createElement(T,Object.assign({key:"MultimediaItem-"+t.id},e,{index:n,noHeader:0===n&&null===a.icon&&null===a.title,device:t}))}))}a.d(t,"default",(function(){return D}))},361:function(e,t,a){e.exports=a(590)},366:function(e,t,a){},367:function(e,t,a){var n={"./de.js":368,"./en.js":369};function i(e){var t=r(e);return a(t)}function r(e){if(!a.o(n,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return n[e]}i.keys=function(){return Object.keys(n)},i.resolve=r,e.exports=i,i.id=367},368:function(e,t,a){"use strict";a.r(t),t.default={"Retrieving settings":"Einstellungen werden geladen","last update":"letzte Aktualisierung","Updates available":"Aktualisierung verf\xfcgbar",on:"an",off:"aus",user:"User",users:"Users",door:"T\xfcr",window:"Fenster",open:"offen",closed:"geschlossen","turn on":"anschalten",power:"Ger\xe4te Status",trigger:"Ger\xe4te Status",brightness:"Helligkeit",wind:"Wind",battery:"Batterie","%DateTime":"%DateTime Uhr",running:"Ger\xe4t l\xe4uft",consumption:"Verbrauch"}},369:function(e,t,a){"use strict";a.r(t),t.default={}},401:function(e,t){},409:function(e,t,a){var n={"./blind.de":258,"./blind.de.js":258,"./blind.en":259,"./blind.en.js":259,"./blind.js":217};function i(e){var t=r(e);return a(t)}function r(e){if(!a.o(n,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return n[e]}i.keys=function(){return Object.keys(n)},i.resolve=r,e.exports=i,i.id=409},410:function(e,t,a){"use strict";a.r(t);var n=a(193);a.d(t,"default",(function(){return n.default}))},411:function(e,t,a){var n={"./door.de":260,"./door.de.js":260,"./door.en":261,"./door.en.js":261,"./door.js":193};function i(e){var t=r(e);return a(t)}function r(e){if(!a.o(n,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return n[e]}i.keys=function(){return Object.keys(n)},i.resolve=r,e.exports=i,i.id=411},412:function(e,t,a){"use strict";a.r(t);var n=a(194);a.d(t,"default",(function(){return n.default}))},413:function(e,t,a){var n={"./heating.de":262,"./heating.de.js":262,"./heating.en":263,"./heating.en.js":263,"./heating.js":194};function i(e){var t=r(e);return a(t)}function r(e){if(!a.o(n,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return n[e]}i.keys=function(){return Object.keys(n)},i.resolve=r,e.exports=i,i.id=413},414:function(e,t,a){"use strict";a.r(t);var n=a(216);a.d(t,"default",(function(){return n.default}))},44:function(e,t,a){"use strict";a.r(t);var n=a(47),i=a(14),r=a(19),o=a(12),s=a(0),c=a.n(s),l=a(2),u=a(6),d=a(611),p=a(593),f=a(178),g=a(176),h=a(4),m=Object(g.a)((function(e){return{component:{padding:e.spacing(2,0,2,0)},sliderMarkLabel:Object(r.a)({},e.breakpoints.down("md"),{display:"none","&:nth-child(5)":{display:"block"},"&:nth-child(15)":{display:"block"},"&:nth-child(25)":{display:"block"}})}})),v=Object(h.a)((function(e){return{primaryAction:function(e){return Object(o.a)({},e.styles)},secondaryAction:function(e){return Object(o.a)({color:"#999",fontSize:"14px"},e.styles)}}}))((function(e){var t=e.classes,a=e.device,n=e.state,i=e.stateKey;return c.a.createElement("span",{className:Object(l.a)(i===a.primaryStateKey&&t.primaryAction||i===a.secondaryStateKey&&t.secondaryAction)},n&&n.value," ",n&&n.unit)}));function b(e){var t=e.device,a=e.stateKey,n=e.stateVal,r=e.onChange,o=Object(s.useState)(n),l=Object(i.a)(o,2),u=l[0],d=l[1];return Object(s.useEffect)((function(){return d(n)}),[n]),c.a.createElement(p.a,{checked:u,onChange:r||function(e){d(e.target.checked),t.setDeviceState(a,e.target.checked).catch((function(e){return console.error(e)}))},value:!0!==u,color:"primary"})}function y(e){var t=e.device,a=e.stateKey,n=e.stateVal;if(!0===n||n>0)return c.a.createElement(v,Object.assign({},e,{onChange:null}));return c.a.createElement(f.a,{variant:"outlined",color:"primary",size:"small",startIcon:c.a.createElement("span",{className:"mdi mdi-power"}),onClick:function(){t.setDeviceState(a,!0).catch((function(e){return console.error(e)}))}},u.a.t("turn on"))}function S(e){var t=e.label,a=e.br||!1;return c.a.createElement(c.a.Fragment,null,t,a&&c.a.createElement("br",null))}function k(e){var t=e.title,a=e.children,n=m();return c.a.createElement(c.a.Fragment,null,c.a.createElement(S,{label:t}),c.a.createElement("div",{className:n.component},a))}function O(e){var t=e.device,a=e.stateKey,r=e.stateVal,o=e.title,l=e.min,u=e.max,p=e.step,f=e.markSteps,g=m(),h=Object(s.useState)(r),v=Object(i.a)(h,2),b=v[0],y=v[1];Object(s.useEffect)((function(){return y(r)}),[r]),p=p||1;var S=((u=u||100)-(l=l||0))/((f=f||11)-1)||10;return c.a.createElement(k,{title:o||a},c.a.createElement(d.a,{classes:{markLabel:g.sliderMarkLabel},onChangeCommitted:function(e,n){y(n),t.setDeviceState(a,n).catch((function(e){return console.error(e)}))},value:b,valueLabelDisplay:"auto",marks:Object(n.a)(Array(f).keys()).map((function(e){return{value:l+e*S,label:l+e*S}})),min:l,max:u,step:p}))}t.default={configurations:{_any:{value:function(e){return e.toString()}},battery:{unit:" %",icon:"battery-medium"},door:{icon:{true:"door-open",false:"door-closed"},state:{true:"open",false:"closed"}},humidity:{unit:" %",icon:"water-percent"},level:{unit:" %"},position:{icon:"map-marker"},power:{state:{true:"on",false:"off"},icon:"power"},temperature:{unit:" \xb0C",icon:"thermometer"},trigger:{state:{true:"on",false:"off"},icon:"power"},wind:{unit:" km/h",icon:"weather-windy"}},components:{Label:S,Component:k,LevelComponent:O,level:O},actions:{Action:v,PowerAction:b,TriggerAction:y,power:b,trigger:y},styles:{_any:{state:{true:{color:"#090",fontWeight:"bold"},false:{color:"#999"}}}}}},52:function(e,t,a){"use strict";var n=a(20),i=a(21),r=a(12),o=a(26),s=a(17),c=a(25),l=a(152),u=a.n(l),d=a(316),p=a.n(d),f=function(e){function t(){var e,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object(n.a)(this,t),(e=Object(o.a)(this,Object(s.a)(t).call(this))).socket=p()(a,Object(r.a)({timeout:1e4},i,{query:"ws=true"})),e.statesSubscribes={},e.socket.on("connect",(function(){return e.emit("connect")})),e.socket.on("reconnect",(function(t){return e.emit("reconnect",t)})),e.socket.on("reconnect_error",(function(t){return e.emit("error",{type:"reconnect",event:"reconnect_error",message:t.message})})),e.socket.on("reconnect_failed",(function(){return e.emit("error",{type:"reconnect",event:"reconnect_failed",message:"Reconnection failed!"})})),e.socket.on("disconnect",(function(t){return e.emit("disconnect",t)})),e.socket.on("connect_error",(function(t){return e.emit("error",{type:"connect",event:"connect_error",message:t.message})})),e.socket.on("connect_timeout",(function(){return e.emit("error",{type:"connect",event:"connect_timeout",message:"Connect ran into timeout!"})})),e.socket.on("error",(function(t){return e.emit("error",{type:"error",event:"error",message:t.message})})),e.socket.on("stateChange",(function(t,a){return setTimeout((function(){return e.stateChange(t,a)}),0)})),e}return Object(c.a)(t,e),Object(i.a)(t,[{key:"subscribeStates",value:function(e,t){var a=this;(e=Array.isArray(e)?e:[e]).forEach((function(e){return a.subscribeState(e,t)}))}},{key:"subscribeState",value:function(e,t){if(this.statesSubscribes[e])-1===this.statesSubscribes[e].cbs.indexOf(t)&&this.statesSubscribes[e].cbs.push(t);else{var a=e.replace(/\./g,"\\.").replace(/\*/g,".*").replace(/\(/g,"\\(").replace(/\)/g,"\\)").replace(/\+/g,"\\+").replace(/\[/g,"\\[");-1===a.indexOf("*")&&(a+="$"),this.statesSubscribes[e]={reg:new RegExp(a),cbs:[t]},this.socket.connected&&this.socket.emit("subscribe",e)}}},{key:"stateChange",value:function(e,t){for(var a in e=e?e.replace(/[\s'"]/g,"_"):"",this.statesSubscribes)this.statesSubscribes.hasOwnProperty(a)&&this.statesSubscribes[a].reg.test(e)&&this.statesSubscribes[a].cbs.forEach((function(a){return a(e,t)}))}},{key:"getAdapterInstances",value:function(e,t){return"function"===typeof e&&(t=e,e=null),this.getObjectView("system","instance",{startkey:"system.adapter."+(e?e+".":""),endkey:"system.adapter."+(e?e+".999":"zzz")},t)}},{key:"getObject",value:function(e,t){var a=this;if(!t)return new Promise((function(t,n){return a.getObject(e,(function(e,a){return e?n(e):t(a)}))}));this.socket.emit("getObject",e,t)}},{key:"getObjectView",value:function(e,t,a,n){var i=this;if(!n)return new Promise((function(n,r){return i.getObjectView(e,t,a,(function(e){return e?r(e):n()}))}));this.socket.emit("getObjectView",e,t,a,n)}},{key:"getRemoteResource",value:function(e,t){var a=this;if(!t)return new Promise((function(t,n){return a.getRemoteResource(e,(function(e,a){return e?n(e):t(a)}))}));this.socket.emit("httpGet",e,t)}},{key:"getState",value:function(e,t){var a=this;if(!t)return new Promise((function(t,n){return a.getState(e,(function(e,a){return e?n(e):t(a)}))}));this.socket.emit("getState",e,t)}},{key:"getStates",value:function(e,t){var a=this;if(!t)return new Promise((function(t,n){return a.getStates(e,(function(e,a){return e?n(e):t(a)}))}));this.socket.emit("getStates",e,t)}},{key:"getStateHistory",value:function(e,t,a){var n=this;if("function"===typeof t&&(a=t,t={}),!a)return new Promise((function(a,i){return n.getStateHistory(e,t,(function(e,t){return e?i(e):a(t)}))}));this.socket.emit("getHistory",e,t,a)}},{key:"setState",value:function(e,t,a){var n=this;if(!a)return new Promise((function(a,i){return n.setState(e,t,(function(e){return e?i(e):a()}))}));this.socket.emit("setState",e,t,a)}}]),t}(u.a);a.d(t,"a",(function(){return g}));var g=function(){function e(){Object(n.a)(this,e)}return Object(i.a)(e,null,[{key:"connect",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return t&&(e.setUrl=t),e.connection=new f(e.url),a&&(e.setListeners=a),e.connection}},{key:"getConnection",get:function(){return e.connection||null}},{key:"getUrl",get:function(){return e.url}},{key:"reconnect",get:function(){return e.connect}},{key:"setListener",set:function(t){e.connection.on(t.event,t.callback)}},{key:"setListeners",set:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return!(!t||!Array.isArray(t))&&(t.forEach((function(t){return e.setListener=t})),!0)}},{key:"setUrl",set:function(t){e.url=t}}]),e}();g.url=window.location.hostname,g.connection=null},576:function(e,t,a){var n={"./light.de":297,"./light.de.js":297,"./light.en":298,"./light.en.js":298,"./light.js":216};function i(e){var t=r(e);return a(t)}function r(e){if(!a.o(n,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return n[e]}i.keys=function(){return Object.keys(n)},i.resolve=r,e.exports=i,i.id=576},577:function(e,t,a){"use strict";a.r(t);var n=a(213);a.d(t,"default",(function(){return n.default}))},578:function(e,t,a){var n={"./location.de":299,"./location.de.js":299,"./location.en":300,"./location.en.js":300,"./location.js":213};function i(e){var t=r(e);return a(t)}function r(e){if(!a.o(n,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return n[e]}i.keys=function(){return Object.keys(n)},i.resolve=r,e.exports=i,i.id=578},579:function(e,t,a){"use strict";a.r(t);var n=a(214);a.d(t,"default",(function(){return n.default}))},580:function(e,t,a){var n={"./user.de":301,"./user.de.js":301,"./user.en":302,"./user.en.js":302,"./user.js":214};function i(e){var t=r(e);return a(t)}function r(e){if(!a.o(n,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return n[e]}i.keys=function(){return Object.keys(n)},i.resolve=r,e.exports=i,i.id=580},581:function(e,t,a){"use strict";a.r(t);var n=a(215);a.d(t,"default",(function(){return n.default}))},582:function(e,t,a){var n={"./window.de":303,"./window.de.js":303,"./window.en":304,"./window.en.js":304,"./window.js":215};function i(e){var t=r(e);return a(t)}function r(e){if(!a.o(n,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return n[e]}i.keys=function(){return Object.keys(n)},i.resolve=r,e.exports=i,i.id=582},590:function(e,t,a){"use strict";a.r(t);var n=a(0),i=a.n(n),r=a(22),o=a.n(r),s=(a(366),a(47)),c=a(12),l=a(20),u=a(21),d=a(26),p=a(17),f=a(25),g=a(19),h=a(96),m=a(337),v=a(120),b=a(53),y=a(688),S=a(176),k=Object(S.a)((function(e){return{gridContainer:Object(g.a)({paddingLeft:e.spacing(1)},e.breakpoints.down("md"),{paddingLeft:e.spacing(.4)})}}));function O(e){for(var t=e.contents,a=void 0===t?{}:t,n=k(),r=Object.keys(a).length,o=[],s=1;s<=r;s++)a[s]?o.push(i.a.createElement(m.a,{key:s,item:!0,xs:12,sm:6,md:6,lg:Math.round(12/r),xl:Math.round(12/r)},a[s])):console.warn("No content for column #"+s+"!");return i.a.createElement(m.a,{container:!0,spacing:0,className:n.gridContainer},o)}var j=a(106),E=a(2),w=a(695),C=a(663),x=a(177),T=a(103),D=a.n(T),N=a(312),L=a.n(N),I=a(313),R=a.n(I),A=a(314),M=a.n(A),P=a(315),F=a.n(P),U=a(173),B=a(662),H=Object(S.a)((function(e){return{success:{backgroundColor:U.a[600]},error:{backgroundColor:e.palette.error.dark},info:{backgroundColor:e.palette.primary.main},warning:{backgroundColor:B.a[700]},icon:{fontSize:20},iconVariant:{opacity:.9,marginRight:e.spacing(1)},message:{display:"flex",alignItems:"center"}}})),K={success:L.a,warning:R.a,error:M.a,info:F.a};function _(e){var t=H(),a=e.className,n=e.open,r=e.autoHideDuration,o=e.message,s=e.closeButton,c=e.onClose,l=e.variant,u=Object(j.a)(e,["className","open","autoHideDuration","message","closeButton","onClose","variant"]),d=K[l];return n=n||!0,r=r||null,i.a.createElement(w.a,{anchorOrigin:{vertical:"bottom",horizontal:"center"},open:n,autoHideDuration:r,onClose:c},i.a.createElement(C.a,Object.assign({className:Object(E.a)(t[l],a),message:i.a.createElement("span",{id:"client-snackbar",className:t.message},i.a.createElement(d,{className:Object(E.a)(t.icon,t.iconVariant)}),o),action:s&&[i.a.createElement(x.a,{key:"close","aria-label":"close",color:"inherit",onClick:c},i.a.createElement(D.a,{className:t.icon}))]},u)))}var z="https://192.168.178.29:8082",V=a(6),G=a(52),W=a(27),J=a(68),q=a(152),Z=a.n(q),Y={defaults:a(44).default,blind:a(255).default,door:a(410).default,heating:a(412).default,jalousie:a(255).default,light:a(414).default,location:a(577).default,user:a(579).default,window:a(581).default},$=function(e){function t(e){var a;if(Object(l.a)(this,t),(a=Object(d.a)(this,Object(p.a)(t).call(this))).function=e,!a.function)throw new Error("No function given!");return a.functionId=a.function.toLowerCase(),a.defaults=Y.defaults.configurations,a.configurations=Y[a.functionId]&&Y[a.functionId].configurations||{},a.defaultStyles=Y.defaults.styles,a.styles=Y[a.functionId]&&Y[a.functionId].styles||{},a.components=Object(c.a)({},Y.defaults.components,{},Y[a.functionId]&&Y[a.functionId].components||{}),a.actions=Object(c.a)({},Y.defaults.actions,{},Y[a.functionId]&&Y[a.functionId].actions||{}),a}return Object(f.a)(t,e),Object(u.a)(t,[{key:"_applyFunction",value:function(e,t){return this._isFunction(e)?e(t):t}},{key:"_getValueFromSettings",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";for(var a in e)if(void 0!==e[a])return e[a];return t}},{key:"_isFunction",value:function(e){return e&&"function"===typeof e}},{key:"_isValue",value:function(e){return void 0!==e}},{key:"_setObjectStructure",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;return e&&"object"==typeof e?"object"!=typeof e||e.default||(e.default=t):e={default:e||t},e}}]),t}(Z.a),Q={"hm-rpc":"HomeMatic",shelly:"Shelly",sonoff:"Sonoff"},X=a(690),ee=function(e){function t(e,a){var n;Object(l.a)(this,t);try{n=Object(d.a)(this,Object(p.a)(t).call(this,e.function))}catch(i){throw new Error("No function given for device "+e.name+"!")}if(n.id=e.id,n.name=e.name,n.room=e.room||null,n.states=e.states,n.options=e.options,n.attributes=e.attributes||{},n.socket=a,!n.options||"object"!==typeof n.options||0===Object.keys(n.options).length)throw new Error("Device"+(e.id||e.name?" "+(e.name||e.id):"")+" not defined for jarvis!");if(!n.states||"object"!==typeof n.states||0===Object.keys(n.states).length)throw new Error("Insufficent properties provided"+(e.id||e.name?" for device "+(e.name||e.id):"")+" (no states defined)!");if(!(n.id&&n.name&&n.function))throw new Error("Insufficent properties provided"+(e.id||e.name?" for device "+(e.name||e.id):"")+" (no id, name or function defined)!");if(!n.socket)throw new Error("No socket given!");return n.children=e.children||[],n.parent=e.parent||null,n._setProperties(),n.stateSubscriptions=[],n.on("error",(function(e){return console.error("Device error occured!",e)})),n}return Object(f.a)(t,e),Object(u.a)(t,[{key:"_getStateFromKey",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"state";if(e&&"object"===typeof e)return e;var a=this.states[e||this.primaryStateKey];return void 0===a?V.a.t("State does not exist in device %device%").replace(/%device%/g,this.name)+"!":("string"===typeof a?(this.states[e||this.primaryStateKey]=Object(g.a)({},t,{node:a}),a=this.states[e||this.primaryStateKey]):"string"===typeof a[t]&&(this.states[e||this.primaryStateKey][t]={node:a[t]},a=this.states[e||this.primaryStateKey]),a&&a[t]?"object"!=typeof a[t]||a[t].node?a:V.a.t("No %stateType% specified for device %device%").replace(/%device%/g,this.name).replace(/%stateType%/g,t)+"!":V.a.t("Incorrect or non-defined state key for device %device%").replace(/%device%/g,this.name).replace(/%stateType%/g,t)+"!")}},{key:"_getConfigurationSetting",value:function(e,a,n,i){var r=this;if(this[e][a]){if("object"===typeof this[e][a][n]){var o=Object.keys(this[e][a][n]);if(o.toString().indexOf("<")>-1||o.toString().indexOf(">")>-1||o.toString().indexOf("!=")>-1){var s=this[e][a][n].default;return o.forEach((function(t){var c=t.replace("<=","").replace("<","").replace(">=","").replace(">","").replace("!=","");t.indexOf("<=")>-1&&i<=c?s=r[e][a][n][t]:t.indexOf("<")>-1&&i<c?s=r[e][a][n][t]:t.indexOf(">=")>-1&&i>=c?s=r[e][a][n][t]:t.indexOf(">")>-1&&i>c?s=r[e][a][n][t]:o.toString().indexOf("!=")>-1&&i!=c&&(s=r[e][a][n][t])})),s}return Object(J.a)(Object(p.a)(t.prototype),"_isValue",this).call(this,this[e][a][n][i])?this[e][a][n][i]:this[e][a][n].default}if(Object(J.a)(Object(p.a)(t.prototype),"_isFunction",this).call(this,this[e][a][n]))return this[e][a][n](i,a,this);if("string"===typeof this[e][a][n])return this[e][a][n]}else if(this[e]._any){if("object"===typeof this[e]._any[n])return Object(J.a)(Object(p.a)(t.prototype),"_isValue",this).call(this,this[e]._any[n][i])?this[e]._any[n][i]:this[e]._any[n].default;if(Object(J.a)(Object(p.a)(t.prototype),"_isFunction",this).call(this,this[e]._any[n]))return this[e]._any[n](i,a,this)}}},{key:"_getUserSetting",value:function(e,a,n){var i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],r=this.options;if(i){r=this.options.styles;var o=a;a=e,e=o}if(r[a]&&r[a][e])return"object"===typeof r[a][e]?Object(J.a)(Object(p.a)(t.prototype),"_isValue",this).call(this,r[a][e][n])?r[a][e][n]:r[a][e].default:Object(J.a)(Object(p.a)(t.prototype),"_isFunction",this).call(this,r[a][e])?r[a][e](n,e,this):r[a][e]}},{key:"_setProperties",value:function(){var e=this,a=Object.keys(this.states);this.options.ignoredStates&&(this.options.ignoredStates=Array.isArray(this.options.ignoredStates)?this.options.ignoredStates:[this.options.ignoredStates],this.options.ignoredStates.forEach((function(t){e.states[t]&&delete e.states[t]}))),this.options.hiddenStates=[],this.options.hideStates&&(this.options.hideStates=Array.isArray(this.options.hideStates)?this.options.hideStates:[this.options.hideStates],this.options.hideStates.forEach((function(t){e.states[t]&&e.options.hiddenStates.push(t)}))),this.primaryStateKey=this.options.primary||a[0],this.secondaryStateKey=this.options.secondary||null,["value","state","unit","icon","styles"].forEach((function(n){var i=e.options[n]&&Object.keys(e.options[n])[0];e.options[n]=e.options[n]?Object(J.a)(Object(p.a)(t.prototype),"_setObjectStructure",e).call(e,i&&a.indexOf(i)>-1?e.options[n]:Object(g.a)({},e.primaryStateKey,e.options[n])):{}})),this.states[this.primaryStateKey]=this._getStateFromKey(this.primaryStateKey),this.options.manufacturer=this.primaryStateKey&&Q[this.states[this.primaryStateKey].state.node.substr(0,this.states[this.primaryStateKey].state.node.indexOf("."))]||"unknown",this.options.groups=Array.isArray(this.options.group)?this.options.group:[this.options.group],this.options.sort=this.options.sort||999,this.options.label=this.options.label&&"string"===typeof this.options.label&&this.options.label.replace(/%name%/g,this.name)||this.options.label||this.name,this.options.divider=this.options.divider||!1}},{key:"_updateDeviceState",value:function(e,a){var n=this;a.timeChanged=Object(X.a)(new Date(a.lc-5e3),{locale:V.b[V.a.getLanguage()],includeSeconds:!0,addSuffix:!0}),a.unit="";var i=this._getConfigurationSetting("configurations",e,"val",a.val);return a.val=void 0!==i?i:a.val,a.value=a.val,[{value:"value"},{state:"value"},{unit:"unit"}].forEach((function(i){var r=Object.keys(i).toString(),o=Object.values(i).toString(),s={};s.options=n._getUserSetting(e,r,a.val),["configurations","defaults"].forEach((function(t){s[t]=n._getConfigurationSetting(t,e,r,a.val)})),a[o]=Object(J.a)(Object(p.a)(t.prototype),"_getValueFromSettings",n).call(n,s,a[o])})),a.value=V.a.t(a.value),a}},{key:"get",value:function(e){return this[e]||null}},{key:"getAction",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];e=e||this.primaryStateKey;var a=this.states[e].state.value,n=a?a.val:null,r=!t&&this.actions[e]||this.actions.Action;return i.a.createElement(r,{key:"action-"+this.id+"-"+e,device:this,state:a,stateKey:e,stateVal:n,styles:this.getStyle("state",e,n)})}},{key:"getComponent",value:function(e){e=e||this.primaryStateKey;var t=this.states[e].state.value,a=t?t.val:null,n=this.components[e];return n&&i.a.createElement(n,{title:this.states[e].label||V.a.t(this.function+"#"+e),device:this,stateKey:e,stateVal:a})||this.states[e].label||V.a.t(this.function+"#"+e)}},{key:"getDeviceState",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,a=this.states[e||this.primaryStateKey],n=null;return a&&a.state&&null!==t&&void 0!==a.state.value&&void 0!==a.state.value[t]?n=a.state.value[t]:a&&a.state&&null===t&&void 0!==a.state.value&&(n=a.state.value),n}},{key:"getIcon",value:function(e){var a=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;e=e||this.primaryStateKey;var r={};return r.options=this._getUserSetting(e,"icon",n),["configurations","defaults"].forEach((function(t){r[t]=a._getConfigurationSetting(t,e,"icon",n)})),Object(J.a)(Object(p.a)(t.prototype),"_getValueFromSettings",this).call(this,r,i)}},{key:"getOption",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"default";return this.options[e]&&(this.options[e][t]||this.options[e].default)||this.options[e]||null}},{key:"getStyle",value:function(e){var a=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"default",r={};return n=n||this.primaryStateKey,r.options=this._getUserSetting(n,e,i,!0),["styles","defaultStyles"].forEach((function(t){r[t]=a._getConfigurationSetting(t,n,e,i)})),Object(J.a)(Object(p.a)(t.prototype),"_getValueFromSettings",this).call(this,r,{})}},{key:"listen",value:function(e,t){"function"===typeof e&&(t=e,e="stateChange"),this.listeners(e).findIndex((function(e){return e.toString()==t.toString()}))>-1||this.on(e,t)}},{key:"requestDeviceStates",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=[];for(var a in this.states)t.push(this.requestDeviceState(a,e));return t}},{key:"requestDeviceState",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,a=arguments.length>1&&void 0!==arguments[1]&&arguments[1];t=t||this.primaryStateKey;var n=this._getStateFromKey(t);return"string"==typeof n?Promise.reject({success:!1,stateKey:t,error:n}):new Promise((function(i,r){void 0!==n.state.value&&e.stateSubscriptions.indexOf(t)>-1?(e.emit("stateChange",t,n.state.value,e),i({success:!0,stateKey:t,cached:!0})):e.socket.getState(n.state.node).then((function(o){null===o&&r({success:!1,stateKey:t,error:"State "+n.state.node+" not found!"}),n.state.value=e._updateDeviceState(t,o),e.emit("stateChange",t,n.state.value,e),a&&e.subscribeDeviceState(t).catch((function(e){return r(e)})),i({success:!0,stateKey:t,cached:!1})})).catch((function(e){return r({success:!1,stateKey:t,error:e})}))}))}},{key:"requestDeviceStateHistory",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,a=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};t=t||this.primaryStateKey;var i=this._getStateFromKey(t);return"string"==typeof i?Promise.reject({success:!1,stateKey:t,error:i}):new Promise((function(r,o){i.state.historyCache=i.state.historyCache||{},n.start&&n.end&&n.step&&void 0!==i.state.historyCache[n.start+"#"+n.end+"#"+n.step]?(e.emit("historyChange",t,i.state.historyCache[n.start+"#"+n.end+"#"+n.step],i.state,e),r({success:!0,stateKey:t,cached:!0})):e.socket.getStateHistory(i.state.node,n).then((function(s){null===s&&o({success:!1,stateKey:t,error:"State "+i.state.node+" not found!"}),n.start&&n.end&&n.step&&(i.state.historyCache[n.start+"#"+n.end+"#"+n.step]=s),i.state.history=s,e.emit("historyChange",t,i.state.history,i.state,e),a&&e.subscribeDeviceState(t).catch((function(e){return o(e)})),r({success:!0,stateKey:t,cached:!1})})).catch((function(e){return o({success:!1,stateKey:t,error:e})}))}))}},{key:"setAction",value:function(e){this.options.action=e}},{key:"setComponent",value:function(e){this.options.label=e}},{key:"setDeviceState",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,a=arguments.length>1?arguments[1]:void 0;t=t||this.primaryStateKey;var n=this._getStateFromKey(t,"action");return"string"==typeof n?Promise.reject({success:!1,stateKey:t,error:n}):new Promise((function(i,r){e.socket.setState(n.action.node,a).then((function(a){-1===e.stateSubscriptions.indexOf(t)&&e.requestDeviceState(t),i({success:!0,stateKey:t})})).catch((function(e){return r({success:!1,stateKey:t,error:e})}))}))}},{key:"subscribeDeviceState",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;t=t||this.primaryStateKey;var a=this._getStateFromKey(t);return"string"==typeof a?Promise.reject({success:!1,stateKey:t,error:a}):-1===this.stateSubscriptions.indexOf(t)?(this.stateSubscriptions.push(t),new Promise((function(n){e.socket.subscribeState(a.state.node,(function(n,i,r){i&&i.val!==e.getDeviceState(t,"val")&&(a.state.value=e._updateDeviceState(t,i),e.emit("stateChange",t,a.state.value,e),e.children.forEach((function(n){return n.emit("stateChange",t,a.state.value,e)})))})),n({success:!0,stateKey:t})}))):Promise.reject({success:!1,stateKey:t,error:"State already subscribed!"})}},{key:"unlisten",value:function(e,t){"function"===typeof e&&(t=e,e="stateChange"),this.off(e,t)}}]),t}($),te=a(74),ae=a(682),ne={settings:a(591).default},ie=a(14),re=a(681),oe=a(664),se=a(89),ce=Object(S.a)((function(e){return{appBar:{flexGrow:1,boxShadow:"none",transform:"none"},toolbar:{backgroundColor:e.palette.primary.main},menuButton:{marginRight:e.spacing(2)},title:{flexGrow:1},icon:Object(c.a)({},e.components.icon,{color:"#fff",paddingRight:"6px",width:"1em",height:"1em",display:"inline-block",fontSize:"1.5rem",transition:"fill 200ms cubic-bezier(0.4, 0, 0.2, 1) 0ms",flexShrink:0,userSelect:"none"})}}));function le(e){var t=ce(),a=e.children,n=e.title,r=e.connectionStatus,o=(e.toggleDrawer,e.navigate,e.notifications,n.indexOf("|")>-1?n.split("|"):[null,n]),s=Object(ie.a)(o,2),c=s[0],l=s[1],u=r?"lan-connect":"pending"===r?"lan-pending":"lan-disconnect",d=r?V.a.t("Connected to ioBroker"):"pending"===r?V.a.t("Not connected to ioBroker! Reconnecting.."):V.a.t("Not connected to ioBroker! Connection failed!");return i.a.createElement(re.a,{id:"appBar",position:"static",className:t.appBar},i.a.createElement(oe.a,{className:t.toolbar},i.a.createElement(b.a,{variant:"h6",className:t.title},c&&i.a.createElement("span",{className:Object(E.a)(t.icon,"mdi mdi-"+c)}),"null"!==l&&l),i.a.createElement(x.a,{color:"inherit"},i.a.createElement(se.a,{title:V.a.t(d)},i.a.createElement("span",{className:"mdi mdi-"+u})))),a)}function ue(){var e=window;return{width:e.innerWidth,height:e.innerHeight}}var de=a(691),pe=a(679),fe=a(604),ge=Object(S.a)((function(e){return{icon:Object(c.a)({},e.components.icon,{color:"#fff",paddingBottom:"6px",width:"1em",height:"1em",display:"inline-block",fontSize:"1.5rem",transition:"fill 200ms cubic-bezier(0.4, 0, 0.2, 1) 0ms",flexShrink:0,userSelect:"none"}),tabs:{backgroundColor:e.palette.primary.main,paddingLeft:e.spacing(),color:"#fff",width:"calc(100% - "+e.spacing()+"px)",zIndex:101,borderBottom:"5px solid #eee"},fixed:{position:"fixed",top:0},indicator:{backgroundColor:"#fff"},fullscreen:{marginLeft:-e.spacing(),marginTop:"-5px"},grid:{paddingBottom:"30px"}}}));function he(e){var t=e.tabs,a=e.selectTab,r=ge(),o=Object(n.useRef)({}),s=Object(n.useState)(0),c=Object(ie.a)(s,2),l=c[0],u=c[1],d=Object(n.useState)(!1),p=Object(ie.a)(d,2),f=p[0],g=p[1],h=Object(n.useCallback)((function(){var e=o.current.top+o.current.height-53,t=window.scrollY>=e;g((function(a){return a!==t?(document.getElementById("root").style.paddingTop=t?e-5-8+"px":0,t):a}))}),[o]);Object(n.useEffect)((function(){return o.current={top:document.getElementById("tabBar").offsetTop,height:document.getElementById("tabBar").offsetHeight},window.addEventListener("scroll",h),function(){return window.removeEventListener("keydown",h,0)}}),[h]);var m=t.map((function(e,t){var a=e.indexOf("|")>-1?e.split("|"):[null,e],n=Object(ie.a)(a,2),o=n[0],s=n[1];return i.a.createElement(pe.a,{key:"tab"+t,icon:i.a.createElement("span",{className:Object(E.a)(r.icon,"mdi mdi-"+o)}),label:f||!0===W.a.tabsHideLabels||"null"===s?null:s})}));return i.a.createElement(de.a,{id:"tabBar",value:l,onChange:function(e,n){a(n,t[n]),u(n)},variant:"scrollable",classes:{root:Object(E.a)(r.tabs,f&&r.fixed),indicator:r.indicator}},m)}function me(e){var t=e.children,a=e.selectedTab,r=e.renderedTab,o=e.fullscreen,s=ge(),c=function(){var e=Object(n.useState)(ue()),t=Object(ie.a)(e,2),a=t[0],i=t[1];return Object(n.useEffect)((function(){function e(){i(ue())}return window.addEventListener("resize",e),function(){return window.removeEventListener("resize",e)}}),[]),a}().height,l=Object(n.useState)(c),u=Object(ie.a)(l,2),d=u[0],p=u[1],f=Object(n.useRef)({});Object(n.useEffect)((function(){f.current=document.getElementById("appBar").offsetHeight,p(c-f.current+5)}),[c]);var g=Object(n.useState)(null),h=Object(ie.a)(g,2),m=h[0],v=h[1];return Object(n.useEffect)((function(){setTimeout((function(){return v(a!==r)}),10)}),[a,r]),i.a.createElement(fe.a,{role:"tabpanel",hidden:m,id:"tabpanel-"+r,className:Object(E.a)(o?s.fullscreen:s.grid),style:{height:d+"px"}},t)}var ve=a(694),be=a(4),ye=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(d.a)(this,Object(p.a)(t).call(this,e))).state={},a}return Object(f.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.classes;t.notifications;return i.a.createElement(ve.a,{anchor:"right",open:this.props.open,onClose:function(){return e.props.toggleDrawer("notificationDrawer",!1)},classes:{paper:a.drawer}})}}]),t}(i.a.Component),Se=Object(be.a)((function(e){return{drawer:{width:400}}}))(ye),ke=a(178),Oe=a(677),je=a(678),Ee=a(680),we={AdapterStatus:a(305).ModuleSettings||{},Chart:a(306).ModuleSettings||{},DateTime:a(307).ModuleSettings||{},Map:a(308).ModuleSettings||{},Multimedia:a(311).ModuleSettings||{},StateList:a(144).ModuleSettings||{},StateListHorizontal:a(309).ModuleSettings||{},Weather:a(310).ModuleSettings||{}},Ce={AdapterStatus:a(305).default,Chart:a(306).default,DateTime:a(307).default,Map:a(308).default,Multimedia:a(311).default,StateList:a(144).default,StateListHorizontal:a(309).default,Weather:a(310).default},xe=Object(be.a)((function(e){return{root:{margin:0,padding:e.spacing(2)},closeButton:{position:"absolute",right:e.spacing(1),top:e.spacing(1),color:e.palette.grey[500]}}}))((function(e){var t=e.children,a=e.classes,n=e.onClose,r=Object(j.a)(e,["children","classes","onClose"]);return i.a.createElement(Oe.a,Object.assign({disableTypography:!0,className:a.root},r),i.a.createElement(b.a,{variant:"h6"},t),n?i.a.createElement(x.a,{"aria-label":"close",className:a.closeButton,onClick:n},i.a.createElement(D.a,null)):null)})),Te=Object(be.a)((function(e){return{root:Object(g.a)({padding:e.spacing(2)},e.breakpoints.down("md"),{paddingLeft:e.spacing(1)})}}))(je.a),De=Object(be.a)((function(e){return{root:{margin:0,padding:e.spacing(1)}}}))(Ee.a),Ne=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(d.a)(this,Object(p.a)(t).call(this,e))).state={children:[]},a}return Object(f.a)(t,e),Object(u.a)(t,[{key:"componentDidUpdate",value:function(e,t){var a=this,n=this.props.contents&&this.props.contents.device;if(n.id&&this.props.contents.ts!==e.contents.ts)if(n.children.length)console.info("Got "+Object.keys(n.children).length+" states for device "+n.name+" from cache.",n.children),this.setState({children:n.children},(function(){return a.forceUpdate()}));else{var i=[],r=[];for(var o in n.states)if(!(void 0===n.states[o].state||n.options.hiddenStates.indexOf(o)>-1)){var s=new ee({parent:n,id:n.id+"#"+o,name:n.name,function:n.function,states:n.states,options:Object(c.a)({},n.options,{primary:o,secondary:null,divider:0!==r.length,subgroup:null,subtitle:null})},G.a.getConnection,window.language);n.children.push(s),i.push(s.requestDeviceState(null,!0)),r.push(s)}Promise.allSettled(i).then((function(){console.info("Retrieved "+Object.keys(r).length+" states for device "+n.name+".",r),a.setState({children:r},(function(){return a.forceUpdate()}))}))}else n.id||this.props.contents.ts===e.contents.ts||this.setState({children:[]},(function(){return a.forceUpdate()}))}},{key:"shouldComponentUpdate",value:function(e,t){return!this.props.contents||this.props.contents.ts!==e.contents.ts}},{key:"render",value:function(){var e=this.props,t=e.open,a=e.closeDialog,n=e.contents.device;return i.a.createElement(ae.a,{onClose:a,open:t||!1,maxWidth:"md",fullWidth:!0},i.a.createElement(xe,{onClose:a},n.name),i.a.createElement(Te,{dividers:!0,style:{padding:0}},i.a.createElement(Ce.StateList,{openDialog:null,devices:this.state.children,component:!0,action:!0})),i.a.createElement(De,null,i.a.createElement(ke.a,{autoFocus:!0,onClick:a,color:"primary"},"Close")))}}]),t}(i.a.Component),Le=a(685),Ie=a(686),Re=a(687),Ae=a(221),Me=Object(S.a)((function(e){return{card:Object(g.a)({margin:e.spacing(1,1,0,0)},e.breakpoints.down("md"),{margin:e.spacing(.4,.4,0,0)}),cardHeaderNoContents:{padding:e.spacing()},cardAvatar:function(t){return Object(c.a)({backgroundColor:e.palette.primary.main,color:"#fff",fontSize:"24px"},t)},cardContent:Object(g.a)({padding:e.spacing(0,2)},e.breakpoints.down("md"),{padding:e.spacing(0)})}}));function Pe(e){var t=e.title,a=e.icon,n=e.iconStyle,r=Me(n);return i.a.createElement(Le.a,{className:r.card},i.a.createElement(Ie.a,{avatar:null!==a&&i.a.createElement(Ae.a,{variant:"rounded",classes:{root:r.cardAvatar}},i.a.createElement("span",{className:"mdi mdi-"+(a||"home")})),title:t&&i.a.createElement(b.a,{variant:"h5",component:"h2"},t)}),i.a.createElement(Re.a,{className:r.cardContent},e.children))}var Fe=function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!t&&!0!==we[t.settings.component.module].noDevicesAllowed)return console.error("Group "+e+" defined in columns but not assigned to any devices!"),null;t.settings.component="string"===typeof t.settings.component?{module:t.settings.component}:t.settings.component||{};var n=Ce[t.settings.component.module||"StateList"];return void 0===n?(console.error('Undefined component "'+t.settings.component.module+'" used!'),null):i.a.createElement(n,{key:"Tag"+e,devices:t.devices,openDialog:a.action?a.action:null,settings:Object(c.a)({},t.settings,{},a)})},Ue=function(e,t){for(var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n={},r=Object.keys(e).length,o=1;o<=r;o++){var s=e[o];if(n[o]=n[o]||[],s&&Object.keys(s).length)for(var c in s){var l=t[c]||{};l.devices=l.devices||[],l.settings=s[c]||{},l.settings.component="string"===typeof l.settings.component?{module:l.settings.component}:l.settings.component||{},l.settings.module=we[l.settings.component.module]||{};var u=Fe(c,l,a);(l.devices.length>0||l.settings.module.noDevicesAllowed)&&u&&n[o].push(i.a.createElement(Pe,{key:"Box-"+c,title:null===l.settings.title?null:l.settings.title||l.name||l.settings.module.title,icon:null===l.settings.icon?null:l.settings.icon||l.settings.module.icon,iconStyle:l.settings.iconStyle},u))}else n[o].push(null)}return n},Be=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(d.a)(this,Object(p.a)(t).call(this,e))).state={connectionStatus:a.props.connectionStatus||!1,selectedTab:0,tabTitle:"",page:"home",notificationDrawer:!1,notifications:[],notificationsUnread:0,dialog:!1,dialogContents:{ts:0,device:{}}},a.closeDialog=a.closeDialog.bind(Object(te.a)(a)),a.openDialog=a.openDialog.bind(Object(te.a)(a)),a.selectTab=a.selectTab.bind(Object(te.a)(a)),a.toggleDrawer=a.toggleDrawer.bind(Object(te.a)(a)),a.navigate=a.navigate.bind(Object(te.a)(a)),a.socket=G.a.getConnection,a.gridContents={},a.layout=W.a.getSetting("layout"),a.tabs=Object.keys(a.layout),a.tabsEnabled=1!==a.tabs[0],a.state.tabTitle=a.tabs[a.state.selectedTab],a.tabsEnabled||(a.layout={Home:a.layout},a.tabs.push("1")),a.widgetProps={},a}return Object(f.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.socket.getState("jarvis.0.notifications").then((function(t){t=t&&t.val&&JSON.parse(t.val)||[],e.setState({notificationsUnread:t.filter((function(e){return!e.unread||!1!==e.unread})).length,notifications:t})})),this.socket.subscribeState("jarvis.0.notifications",(function(e){return console.log(e)}))}},{key:"getTabPanels",value:function(){var e=0,t=[];for(var a in this.layout){var n=this.layout[a],r=Object.keys(n)[0],o=Number.isNaN(parseInt(r));!this.gridContents[a]&&o?this.gridContents[a]=Fe(n,Object(c.a)({},this.props.groups[r],{settings:n[r]}),Object(c.a)({action:this.openDialog},this.widgetProps)):this.gridContents[a]||(this.gridContents[a]=i.a.createElement(O,{contents:Ue(n,this.props.groups,Object(c.a)({action:this.openDialog},this.widgetProps))}));var s=i.a.createElement(me,{key:"tabPanel-"+e,renderedTab:e,selectedTab:this.state.selectedTab,fullscreen:o},this.gridContents[a]);t.push(s),e++}return t}},{key:"closeDialog",value:function(){this.setState({dialog:!1,dialogContents:{ts:Date.now(),device:{}}})}},{key:"openDialog",value:function(e){this.setState({dialog:!0,dialogContents:{ts:Date.now(),device:e}})}},{key:"selectTab",value:function(e,t){this.setState({selectedTab:e,tabTitle:t})}},{key:"toggleDrawer",value:function(e,t){this.setState(Object(g.a)({},e,t))}},{key:"navigate",value:function(e){this.setState({page:e})}},{key:"render",value:function(){var e=this,t=ne[this.state.page]||null;return i.a.createElement(i.a.Fragment,null,i.a.createElement(le,{title:W.a.topBarTitle||this.tabsEnabled&&this.state.tabTitle||"jarvis",connectionStatus:this.state.connectionStatus,toggleDrawer:this.toggleDrawer,navigate:this.navigate,notifications:this.state.notificationsUnread},this.tabsEnabled&&i.a.createElement(he,{tabs:this.tabs,selectTab:this.selectTab})),i.a.createElement(Se,{open:this.state.notificationDrawer,toggleDrawer:this.toggleDrawer,notifications:this.state.notifications}),t&&i.a.createElement(ae.a,{fullWidth:!0,maxWidth:"xl",open:"home"!==this.state.page,onClose:function(){return e.navigate("home")}},i.a.createElement(t,{devices:this.props.devices,onClose:function(){return e.navigate("home")}})),i.a.createElement(Ne,{open:this.state.dialog,contents:this.state.dialogContents,closeDialog:this.closeDialog}),this.getTabPanels())}}]),t}(i.a.Component),He=a(689),Ke=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(d.a)(this,Object(p.a)(t).call(this,e))).state={loaded:[],connected:!1,error:!1,errorMessage:"",theme:null},a}return Object(f.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=function(t){e.setState({connected:!1,error:!0,errorMessage:V.a.t("string"===typeof t?t:t.message)+".."}),setTimeout((function e(){console.log(V.a.t("Attempting reconnect")+".."),G.a.reconnect(),setTimeout((function(){return e}),15e3)}),1e4)},n="3000"===window.location.port?z:window.location.protocol+"//"+window.location.hostname+(window.location.port?":"+window.location.port:""),i=[{event:"connect",callback:function(){return e.setState({connected:!0,error:!1,errorMessage:""})}},{event:"reconnect",callback:function(){return e.setState({connected:"pending",error:!1,errorMessage:""})}},{event:"disconnect",callback:t},{event:"error",callback:t}];console.log("Connect to "+n+"..."),this.socket=G.a.connect(n,i),this.settings={},this.socket.getState(h.a.SETTINGS).then((function(t){try{t&&(e.settings=Object(c.a)({},e.settings,{},JSON.parse(t.val)||{}),W.a.setSettings(e.settings),W.a.applySettings(),a.e(3).then(a.bind(null,718)).then((function(t){return e.setState({theme:t.default})}))),void 0===Object.keys(e.settings.layout)[0]?e.setState({error:!0,errorMessage:V.a.t("Please create the configuration. See documentation.")}):e.setState({loaded:[].concat(Object(s.a)(e.state.loaded),["settings"])})}catch(n){console.error("GET_SETTINGS: "+n.message),e.setState({error:!0,errorMessage:V.a.t("Error parsing settings")+"!"})}})).catch((function(t){console.error("GET_SETTINGS: "+t.message),e.setState({error:!0,errorMessage:"string"===typeof t?V.a.t(t):V.a.t(t.message)})})),this.settings.iobroker={},this.socket.getObject("system.config",(function(t,a){a&&a.common&&(e.settings.iobroker=a.common,W.a.setSettings({iobroker:e.settings.iobroker}))})),this.devices={},this.groups={},this.socket.getState(h.a.DEVICES).then((function(t){try{e.devices=JSON.parse(t.val),e.processDevices(e.devices).then((function(t){e.groups=t,e.setState({loaded:[].concat(Object(s.a)(e.state.loaded),["groups"])})}))}catch(a){console.error("GET_DEVICES: "+a.message),e.setState({error:!0,errorMessage:V.a.t("Error parsing devices")+"!"})}})).catch((function(t){console.error("GET_DEVICES: "+t.message),e.setState({error:!0,errorMessage:V.a.t("Socket failed while getting devices")+"!"})}))}},{key:"groupDevice",value:function(e,t){return t.get("options").groups.forEach((function(a){var n=a.toLowerCase().replace(/ /g,"");e[n]?e[n].devices.push(t):e[n]={id:n,name:a,devices:[t]}})),e}},{key:"processDevice",value:function(e){var t=[],a=null;try{a=new ee(e,this.socket),t.push(a.requestDeviceState(null,!0)),a.secondaryStateKey&&t.push(a.requestDeviceState(a.secondaryStateKey,!0))}catch(n){console.warn(n.message)}return new Promise((function(e){Promise.allSettled(t).then((function(t){t.forEach((function(e){"rejected"===e.status&&console.error(e)})),e(a)}))}))}},{key:"processDevices",value:function(e){var t=this,a=[],n={},i=0,r=0,o=function(o){i++,e[o].options=e[o].jarvis,delete e[o].jarvis;var s=Object(c.a)({},e[o],{id:o});a.push(new Promise((function(e,a){t.processDevice(s).then((function(i){null!==i&&(r++,n=t.groupDevice(n,i),e(o)),a(o)}))})));var l=function(e){var i=s.states[e];i&&void 0!==i.jarvis&&a.push(new Promise((function(a,l){t.processDevice(Object(c.a)({},s,{id:o+"#"+e,states:Object(g.a)({},e,i),options:i.jarvis})).then((function(e){null!==e&&(r++,n=t.groupDevice(n,e),a(o)),l(o)}))})))};for(var u in s.states)l(u)};for(var s in e)o(s);return new Promise((function(e){return Promise.allSettled(a).then((function(t){for(var a in n)n[a].devices.sort((function(e,t){return e.options.sort>t.options.sort?1:t.options.sort>e.options.sort?-1:0}));console.info("Processed "+i+" devices. Added "+r+" devices in "+Object.keys(n).length+" groups.",t,n),e(n)}))}))}},{key:"renderError",value:function(e){return e=e||this.state.errorMessage,console.error("Error:",e),i.a.createElement(_,{key:"StatusSnackbar",variant:"error",closeButton:!1,message:e.toString()})}},{key:"renderLoadingProgress",value:function(){var e=this.props.classes;return i.a.createElement(m.a,{key:"loadingProcess",container:!0,spacing:0,direction:"column",justify:"center",alignItems:"center",style:{minHeight:"100vh"}},i.a.createElement(v.a,null),i.a.createElement(b.a,{className:e.loading},V.a.t("Retrieving settings"),"..."))}},{key:"renderLoadingSkeleton",value:function(e){for(var t=this.props.classes,a=e.topBar,n=e.tabBar,r=e.gridColumns,o=function(e){return i.a.createElement(y.a,{animation:"wave",variant:"rect",className:t.gridItem,height:e.height})},s={},c=1;c<=r;c++){s[c]=s[c]||[];for(var l=3*Math.random()+2,u=1;u<=l;u++)s[c].push(i.a.createElement(o,{key:c+"#"+u,height:300*Math.random()+100}))}return i.a.createElement(i.a.Fragment,null,a&&i.a.createElement(y.a,{animation:"wave",variant:"rect",height:64}),n&&i.a.createElement(y.a,{animation:"wave",variant:"rect",height:48}),i.a.createElement(O,{key:"loadingSkeleton",contents:s}))}},{key:"render",value:function(){var e=this.state.error?this.renderError():null;if(this.state.error&&this.state.loaded.length<2)return e;if(-1===this.state.loaded.indexOf("settings"))return this.renderLoadingProgress();if(-1===this.state.loaded.indexOf("groups")){var t=Object.keys(this.settings.layout)[0];return void 0===t?null:this.renderLoadingSkeleton({topBar:!0,tabBar:1!==t,gridColumns:1!==t?Object.keys(this.settings.layout[t]).length:t.length})}return console.log("Connected:",this.state.connected),i.a.createElement(He.a,{theme:this.state.theme},e,i.a.createElement(Be,{key:"jarvis",connectionStatus:this.state.connected,devices:this.devices,groups:this.groups}))}}]),t}(i.a.Component),_e=Object(be.a)((function(e){return{loading:{margin:"10px 0 0 0",color:"#999"},gridItem:Object(g.a)({margin:e.spacing(1,1,0,0)},e.breakpoints.down("md"),{marginRight:e.spacing(.4,.4,0,0)})}}))(Ke);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(i.a.createElement(_e,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},591:function(e,t,a){"use strict";a.r(t);var n=a(19),i=a(12),r=a(20),o=a(21),s=a(26),c=a(17),l=a(25),u=a(0),d=a.n(u),p=a(2),f=a(96),g=a(52),h=a(27),m=a(6),v=a(677),b=a(678),y=a(680),S=a(178),k=a(88),O=a(691),j=a(679),E=a(177),w=a(103),C=a.n(w),x=a(669),T=a(667),D=a(668),N=a(693),L=a(676),I=a(675),R=a(53),A=a(157),M=a.n(A),P=a(673),F=a(598),U=a(674),B=a(599),H=a(593),K=a(342),_=a(692),z=a(610),V=a(110),G=a(14),W=a(176),J=a(671),q=a(670),Z=a(696),Y=a(13),$=a(664),Q=a(89),X=a(319),ee=a.n(X),te=Object(W.a)((function(e){return{root:{paddingLeft:e.spacing(2),paddingRight:e.spacing(1)},highlight:"light"===e.palette.type?{color:e.palette.secondary.main,backgroundColor:Object(Y.e)(e.palette.secondary.light,.85)}:{color:e.palette.text.primary,backgroundColor:e.palette.secondary.dark},title:{flex:"1 1 100%"}}}));function ae(e){var t=te(),a=e.title,i=e.numSelected;return d.a.createElement($.a,{className:Object(p.a)(t.root,Object(n.a)({},t.highlight,i>0))},i>0?d.a.createElement(R.a,{className:t.title,color:"inherit",variant:"subtitle1"},i," selected"):d.a.createElement(R.a,{className:t.title,variant:"h6",id:"tableTitle"},a),i>0&&d.a.createElement(Q.a,{title:"Delete"},d.a.createElement(E.a,{"aria-label":"delete"},d.a.createElement(ee.a,null))))}var ne=a(666),ie=a(698);function re(e){var t=e.classes,a=e.headCells,n=e.onSelectAllClick,i=e.order,r=e.orderBy,o=e.numSelected,s=e.rowCount,c=e.onRequestSort;return d.a.createElement(ne.a,null,d.a.createElement(T.a,null,d.a.createElement(D.a,{padding:"checkbox"},d.a.createElement(_.a,{indeterminate:o>0&&o<s,checked:s>0&&o===s,onChange:n,inputProps:{"aria-label":"select all"}})),a.map((function(e){return d.a.createElement(D.a,{key:e.id,align:e.align||"left",padding:e.disablePadding?"none":"default",sortDirection:r===e.id&&i},d.a.createElement(ie.a,{active:r===e.id,direction:r===e.id?i:"asc",onClick:(a=e.id,function(e){c(e,a)})},d.a.createElement("strong",null,e.label),r===e.id?d.a.createElement("span",{className:t.visuallyHidden},"desc"===i?"sorted descending":"sorted ascending"):null));var a}))))}function oe(e){var t=e.columns,a=e.pageRows,n=e.emptyRows,i=e.selected,r=e.onClick;return d.a.createElement(x.a,null,a.map((function(e,a){var n,o=(n=e.id,-1!==i.indexOf(n)),s="enhanced-table-checkbox-".concat(a);return d.a.createElement(T.a,{hover:!0,onClick:function(t){return r(t,e.id)},role:"checkbox","aria-checked":o,tabIndex:-1,key:e.id,selected:o},d.a.createElement(D.a,{padding:"checkbox"},d.a.createElement(_.a,{checked:o,inputProps:{"aria-labelledby":s}})),t.map((function(t){return d.a.createElement(D.a,{key:"TableCell-"+a+"-"+t.id,id:s,scope:"row",padding:"none"},e[t.id]||"")})))})),n>0&&d.a.createElement(T.a,{style:{height:53*n}},d.a.createElement(D.a,{colSpan:6})))}var se=Object(W.a)((function(e){return{root:{width:"100%"},paper:{width:"100%",marginBottom:e.spacing(2)},table:{minWidth:750},visuallyHidden:{border:0,clip:"rect(0 0 0 0)",height:1,margin:-1,overflow:"hidden",padding:0,position:"absolute",top:20,width:1}}}));function ce(e,t,a){return t[a]<e[a]?-1:t[a]>e[a]?1:0}function le(e,t){return"desc"===e?function(e,a){return ce(e,a,t)}:function(e,a){return-ce(e,a,t)}}function ue(e,t){var a=e.map((function(e,t){return[e,t]}));return a.sort((function(e,a){var n=t(e[0],a[0]);return 0!==n?n:e[1]-a[1]})),a.map((function(e){return e[0]}))}function de(e){var t=se(),a=e.title,n=e.headCells,i=e.CustomTableBody,r=e.rows,o=e.pagination,s=e.defaultOrder,c=e.defaultOrderBy,l=e.defaultSelected,u=e.defaultPage,p=e.defaultRowsPerPage,f=d.a.useState(s||"asc"),g=Object(G.a)(f,2),h=g[0],m=g[1],v=d.a.useState(c||n[0].id),b=Object(G.a)(v,2),y=b[0],S=b[1],k=d.a.useState(l||[]),O=Object(G.a)(k,2),j=O[0],E=O[1],w=d.a.useState(u||0),C=Object(G.a)(w,2),x=C[0],T=C[1],D=d.a.useState(o?p||5:r.length),N=Object(G.a)(D,2),L=N[0],I=N[1],R=i||oe;return d.a.createElement(d.a.Fragment,null,d.a.createElement(ae,{title:a,numSelected:j.length}),d.a.createElement(q.a,null,d.a.createElement(J.a,{className:t.table,"aria-labelledby":"tableTitle","aria-label":"enhanced table"},d.a.createElement(re,{headCells:n,classes:t,numSelected:j.length,order:h,orderBy:y,onSelectAllClick:function(e){if(e.target.checked){var t=r.map((function(e){return e.id}));E(t)}else E([])},onRequestSort:function(e,t){m(y===t&&"asc"===h?"desc":"asc"),S(t)},rowCount:r.length}),d.a.createElement(R,{columns:n,pageRows:ue(r,le(h,y)).slice(x*L,x*L+L),emptyRows:L-Math.min(L,r.length-x*L),selected:j,onClick:function(e,t){var a=j.indexOf(t),n=[];-1===a?n=n.concat(j,t):0===a?n=n.concat(j.slice(1)):a===j.length-1?n=n.concat(j.slice(0,-1)):a>0&&(n=n.concat(j.slice(0,a),j.slice(a+1))),E(n)}}))),o&&d.a.createElement(Z.a,{rowsPerPageOptions:[5,10,25],component:"div",count:r.length,rowsPerPage:L,page:x,onChangePage:function(e,t){T(t)},onChangeRowsPerPage:function(e){I(parseInt(e.target.value,10)),T(0)}}))}var pe=a(4),fe=[{id:"name",disablePadding:!0,label:m.a.t("Name")},{id:"function",disablePadding:!1,label:m.a.t("Function")},{id:"states",disablePadding:!1,label:m.a.t("States")},{id:"jarvis",disablePadding:!1,label:m.a.t("Jarvis")},{id:"attributes",disablePadding:!1,label:m.a.t("Attributes")}],ge=function(e){function t(e){var a;return Object(r.a)(this,t),(a=Object(s.a)(this,Object(c.a)(t).call(this,e))).handleTabChange=function(e,t){return a.setState({tab:t})},a.handlePanelChange=function(e){return function(t,n){return a.setState({panel:!!n&&e})}},a.handleSwitchChange=function(e){return function(t){var r=t&&t.target&&t.target.checked||!1;a.setState((function(t){return{settings:Object(i.a)({},t.settings,Object(n.a)({},e,r))}}))}},a.handleTextChange=function(e){return function(t){var r=t&&t.target&&t.target.value||"";e?a.setState((function(t){return{settings:Object(i.a)({},t.settings,Object(n.a)({},e,r))}})):a.setState({settings:JSON.parse(r)})}},a.save=function(){h.a.setSettings(a.state.settings),g.a.getConnection.setState(f.a.SETTINGS,JSON.stringify(h.a.settings)).then((function(){return window.location.reload()})).catch((function(e){return console.error(e)}))},a.renderTableForDevices=function(e){e.columns,e.pageRows,e.emptyRows;var t=e.selected;e.onClick;return d.a.createElement(x.a,null,a.rows.map((function(a,n){var i,r=(i=a.id,-1!==t.indexOf(i)),o="device-".concat(n);return d.a.createElement(T.a,{hover:!0,onClick:function(t){return e.onClick(t,a.id)},role:"checkbox","aria-checked":r,tabIndex:-1,key:a.id,selected:r},d.a.createElement(D.a,{padding:"checkbox"},d.a.createElement(_.a,{checked:r,inputProps:{"aria-labelledby":o}})),d.a.createElement(D.a,{id:o,scope:"row"},d.a.createElement(P.a,{InputProps:{disableUnderline:!0},style:{width:400},value:a.name})),d.a.createElement(D.a,{id:o,scope:"row"},d.a.createElement(P.a,{InputProps:{disableUnderline:!0},style:{width:400},value:a.function})),d.a.createElement(D.a,{id:o,scope:"row"},d.a.createElement(P.a,null)),d.a.createElement(D.a,{id:o,scope:"row"},d.a.createElement(P.a,null)),d.a.createElement(D.a,{id:o,scope:"row"},d.a.createElement(P.a,null)))})))},delete h.a.settings.iobroker,a.state={tab:0,panel:!1,settings:h.a.settings||{}},a.rows=Object.keys(a.props.devices).map((function(e){return Object(i.a)({id:e},a.props.devices[e])})),a}return Object(l.a)(t,e),Object(o.a)(t,[{key:"renderSettingForSelect",value:function(e,t){var a=this.props.classes;t.options=t.options||{};var n=Object.keys(t.options).map((function(a){return d.a.createElement(V.a,{key:"MenuItem-"+e+"-"+a,value:a},t.options[a])}));return d.a.createElement(F.a,{key:"FormControl-"+e,className:a.formControl},d.a.createElement(z.a,null,t.label),d.a.createElement(K.a,{key:"Select-"+e,className:a.input,value:this.state.settings[e]||t.default||"",onChange:this.handleTextChange(e)},n),d.a.createElement(B.a,null,t.helperText||""))}},{key:"renderSettingForText",value:function(e,t){var a=this.props.classes;return d.a.createElement(P.a,{key:"TextField-"+e,className:Object(p.a)(a.input,a.textField),label:t.label,placeholder:t.default||"",helperText:t.helperText||"",onChange:this.handleTextChange(e),value:this.state.settings[e]||""})}},{key:"renderSettingForSwitch",value:function(e,t){return d.a.createElement(U.a,{key:"FormControlLabel-"+e,control:d.a.createElement(H.a,{checked:void 0!==this.state.settings[e]?this.state.settings[e]:t.default||!1,onChange:this.handleSwitchChange(e)}),label:t.label})}},{key:"renderSetting",value:function(e,t){switch(t.type){case"text":return this.renderSettingForText(e,t);case"switch":return this.renderSettingForSwitch(e,t);case"select":return this.renderSettingForSelect(e,t);default:return null}}},{key:"renderPanel",value:function(e,t){var a=this,n=this.props.classes,i=Object.keys(t.settings).map((function(e){return a.renderSetting(e,t.settings[e])}));return d.a.createElement(N.a,{key:"ExpansionPanel-"+e,expanded:this.state.panel===e,onChange:this.handlePanelChange(e)},d.a.createElement(I.a,{expandIcon:d.a.createElement(M.a,null),id:"panel-header-"+e},d.a.createElement(R.a,{className:n.heading},t.label),t.description&&d.a.createElement(R.a,{className:n.secondaryHeading},t.description)),d.a.createElement(L.a,null,i))}},{key:"render",value:function(){var e=this,t=this.props.classes,a=Object.keys(f.b).map((function(t){return e.renderPanel(t,f.b[t])}));return d.a.createElement(d.a.Fragment,null,d.a.createElement(v.a,{disableTypography:!0},d.a.createElement(R.a,{variant:"h6"},"Configuration"),d.a.createElement(E.a,{"aria-label":"close",className:t.closeButton,onClick:function(){return e.props.onClose()}},d.a.createElement(C.a,null))),d.a.createElement(b.a,{className:t.dialogContent},d.a.createElement(k.a,{square:!0},d.a.createElement(O.a,{className:t.tabs,value:this.state.tab,indicatorColor:"primary",textColor:"primary",onChange:this.handleTabChange},d.a.createElement(j.a,{label:"Devices"}),d.a.createElement(j.a,{label:"Settings"}),d.a.createElement(j.a,{label:"Layout"}),d.a.createElement(j.a,{label:["Settings & Layout",d.a.createElement("br",{key:"tab"}),"Raw Editor"]}))),d.a.createElement("div",{hidden:0!==this.state.tab},d.a.createElement(k.a,{className:t.paper},d.a.createElement(de,{title:"Devices",headCells:fe,rows:this.rows,CustomTableBody:this.renderTableForDevices}))),d.a.createElement("div",{hidden:1!==this.state.tab,style:{width:"100%"}},d.a.createElement(k.a,{className:t.title},d.a.createElement(R.a,{variant:"h6",id:"tableTitle"},m.a.t("Settings"))),a),d.a.createElement("div",{hidden:2!==this.state.tab},"Layout"),d.a.createElement("div",{hidden:3!==this.state.tab,style:{width:"100%"}},d.a.createElement(k.a,{className:t.paper},d.a.createElement(R.a,{className:t.title,variant:"h6",id:"tableTitle"},m.a.t("Raw Editor")),d.a.createElement(P.a,{InputProps:{className:t.rawEditor},key:"TextField-Raw",multiline:!0,fullWidth:!0,onChange:this.handleTextChange(null),value:JSON.stringify(this.state.settings,null,3)})))),d.a.createElement(y.a,null,d.a.createElement(S.a,{autoFocus:!0,onClick:function(){return e.props.onClose()},color:"secondary"},m.a.t("Cancel")),d.a.createElement(S.a,{onClick:this.save,color:"primary"},m.a.t("Save"))))}}]),t}(d.a.Component);t.default=Object(pe.a)((function(e){return{tabs:{marginBottom:"10px"},heading:{fontSize:e.typography.pxToRem(15),flexBasis:"33.33%",flexShrink:0},secondaryHeading:{fontSize:e.typography.pxToRem(15),color:e.palette.text.secondary},closeButton:{position:"absolute",right:e.spacing(1),top:e.spacing(1),color:e.palette.grey[500]},dialogContent:{backgroundColor:"#fafafa"},title:{paddingLeft:e.spacing(2),paddingRight:e.spacing(1),minHeight:"64px",display:"flex",position:"relative",alignItems:"center"},input:{width:300},textField:{marginLeft:e.spacing(1),marginRight:e.spacing(1)},rawEditor:{fontFamily:"Roboto Mono,Consolas,Courier New,monospace !important"}}}))(ge)},6:function(e,t,a){"use strict";a.d(t,"b",(function(){return o})),a.d(t,"a",(function(){return s}));var n=a(12),i=a(20),r=a(21),o={de:a(606).a},s=function(){function e(){Object(i.a)(this,e)}return Object(r.a)(e,null,[{key:"setLanguage",value:function(t){return!!t&&(e.language=t,console.log("i18n: Set language to "+t+"."),!0)}},{key:"loadTranslations",value:function(t){return!!t&&((t=Array.isArray(t)?t:[t]).forEach((function(t){return e.loadTranslation(t)})),!0)}},{key:"loadTranslation",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e.language;if(t){var n;try{n=a(367)("./"+t+".js").default}catch(i){return console.error(i.message),!1}return e.setTranslation(t,n),!0}return!1}},{key:"setTranslation",value:function(t,a){return!(!t||!a)&&(e.translations[t]=Object(n.a)({},e.translations[t]||{},{},a),console.log("i18n: Set translations for language "+t+"."),!0)}},{key:"getLanguage",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return e.language.substr(0,t?5:2)}},{key:"t",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e.language;if(t=t.toString(),e.translations[i])if(t.indexOf("#")>-1){for(var r=t.split("#");r.length>0&&!e.translations[i][r.join("#")];)r.shift();t=e.translations[i][r.join("#")]||t}else t=e.translations[i][t]||t;for(var o in n)t=t.replace(RegExp("%"+o+"%","g"),n[o]);return a.ucFirst&&(t=t.charAt(0).toUpperCase()+t.slice(1)),t}}]),e}();s.translations={},s.language=navigator.language||navigator.userLanguage||"en-EN"},96:function(e,t,a){"use strict";a.d(t,"a",(function(){return i}));var n=a(6),i={SETTINGS:"jarvis.0.settings",DEVICES:"jarvis.0.devices"};t.b={pageSettings:{label:"Page Settings",settings:{language:{label:"Spracheinstellung von jarvis",type:"select",options:{de:"Deutsch",en:"English"},default:n.a.getLanguage()},pageFavicon:{label:"Favicon im Browser",info:"base64 Wert der Grafik",type:"text"},pageTitle:{label:"Titel im Browser",type:"text",default:"jarvis - just another remarkable vis"}}},tabSettings:{label:"Tab Settings",settings:{tabsHideLabels:{label:"Tab Bar Labels nicht anzeigen",info:"Zeigt nur die Icons im Tab und nicht die Labels",type:"switch",default:!1}}},themeSettings:{label:"Theme Settings",settings:{themeColorPrimary:{label:"Prim\xe4re Farbe des Themes",type:"text",default:"blue|700"},themeColorSecondary:{label:"Sekund\xe4re Farbe des Themes",type:"text",default:"pink"}}}}}},[[361,1,2]]]);
//# sourceMappingURL=main.b186717b.chunk.js.map