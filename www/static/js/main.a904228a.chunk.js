(this.webpackJsonpjarvis=this.webpackJsonpjarvis||[]).push([[0],{10:function(e,t,a){"use strict";a.d(t,"a",(function(){return s}));var n=a(40),i=a(20),r=a(21),s=function(){function e(){Object(i.a)(this,e)}return Object(r.a)(e,null,[{key:"_",value:function(t,a){var i,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"info",s=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],o=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};((a=Array.isArray(a)?a:[a]).forEach((function(a){e.log.push({time:new Date,module:t,criticality:r,message:a,stack:o})})),s)&&(a[0]=t+" # "+a[0],(i=console)[r].apply(i,Object(n.a)(a)))}},{key:"getLog",value:function(){return e.log}}]),e}();s.log=[]},112:function(e,t,a){"use strict";var n=a(15),i=a(90),r=a(6);t.a={timeToSeconds:function(e){if(e.toString().indexOf(":")>-1){var t=(e=e.toString()).split(":").length-1>1?e.split(":"):("0:"+e).split(":"),a=Object(n.a)(t,3),i=a[0],r=a[1],s=a[2];e=3600*parseInt(i)+60*parseInt(r)+parseInt(s)}return parseInt(e)},timeToHoursMinutesSeconds:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(e.toString().indexOf(":")>-1)return e;if(e=parseInt(e),t=t||e>3600,Number.isNaN(e))return t?"00:00:00":"00:00";var a="0"+Math.floor(e/3600),n="0"+Math.floor(e/60),i="0"+e%60;return t?[a.substr(-2),n.substr(-2),i.substr(-2)].join(":"):[n.substr(-2),i.substr(-2)].join(":")},secondsToDateTime:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"dd. MMM yyyy, HH:mm";return Object(i.a)(new Date(1e3*e),t,{locale:r.b[r.a.getLanguage()]})}}},152:function(e,t,a){"use strict";a.r(t);var n=a(110),i=a(20),r=a(21),s=a(26),o=a(18),c=a(27),l=a(22),u=a(0),d=a.n(u),p=a(6),g=a(611),f=a(124),h=a(353),m=a(225),v=a(13),b=a(2),y=a(690),S=a(4),k=function(e){return{defaultListDivider:{margin:"0 0 5px 0"},defaultListIcon:function(t){return Object(v.a)({},e.components.icon,{},t.styles)},horizontalListItem:{display:"inline-block",textAlign:"center",paddingRight:"16px",width:"140px",marginTop:"10px"},horizontalListItemIcon:{minWidth:"auto"},horizontalListItemAction:{textAlign:"center",top:0,right:0,position:"static",transform:"none"},verticalListItemAction:{textAlign:"right"}}},O=Object(S.a)(k)((function(e){var t=e.customClassNames,a=e.children,n=e.classes,i=Array.isArray(t)?t:[t];return i=i.map((function(e){return n[e]?n[e]:e})),d.a.createElement("span",{className:Object(b.a)(i)},a)})),j=function(e){function t(e){var a;return Object(i.a)(this,t),(a=Object(s.a)(this,Object(o.a)(t).call(this,e))).stateChange=function(e,t){e!==a.props.device.primaryStateKey&&e!==a.props.device.secondaryStateKey||a.setState(Object(l.a)({},e,t))},a.state={ListItemTextWidth:"100%"},a.state[a.props.device.primaryStateKey]=a.props.device.getDeviceState()||{},a.props.device.secondaryStateKey&&(a.state[a.props.device.secondaryStateKey]=a.props.device.getDeviceState(a.props.device.secondaryStateKey)||{}),a.ListItemText=d.a.createRef(),a.ListItemSecondaryAction=d.a.createRef(),a}return Object(c.a)(t,e),Object(r.a)(t,[{key:"componentDidMount",value:function(){this.ListItemTextWidth=Math.floor(this.ListItemText.current.offsetWidth),this.resizeComponent(),this.props.device.listen(this.stateChange)}},{key:"componentWillUnmount",value:function(){this.props.device.unlisten(this.stateChange)}},{key:"componentDidUpdate",value:function(){this.resizeComponent()}},{key:"resizeComponent",value:function(){var e=Math.floor(1.08*this.ListItemSecondaryAction.current.offsetWidth);this.state.ListItemSecondaryActionWidth!==e&&this.setState({ListItemSecondaryActionWidth:e,ListItemTextWidth:this.ListItemTextWidth-e+"px"})}},{key:"openDialog",value:function(){this.props.openDialog(this.props.device)}},{key:"render",value:function(){var e=this.props,t=e.classes,a=e.horizontal,n=e.device,i=e.component,r=e.action,s=this.state[n.primaryStateKey],o=n.get("options"),c=n.getIcon(n.primaryStateKey,s.val)||n.getIcon(n.primaryStateKey,s.value),l=i&&n.getComponent(),u=n.getAction(n.primaryStateKey,!1===n.options.primaryAction),p=r&&this.state[n.secondaryStateKey]?n.getAction(n.secondaryStateKey):null;return d.a.createElement(d.a.Fragment,null,o.divider&&"after"!==o.divider&&d.a.createElement(f.a,{divider:!0,className:t.defaultListDivider}),d.a.createElement(f.a,{className:Object(b.a)(this.props.openDialog&&t.finger,a&&t.horizontalListItem),button:null!==this.props.openDialog,onClick:this.props.openDialog&&this.openDialog.bind(this)},d.a.createElement(y.a,{className:Object(b.a)(a&&t.horizontalListItemIcon)},null===c?d.a.createElement(d.a.Fragment,null):d.a.createElement(O,{customClassNames:["defaultListIcon","mdi mdi-"+c],styles:n.getStyle("icon",n.primaryStateKey,s.val)})),d.a.createElement(m.a,{ref:this.ListItemText,disableTypography:!1!==l,primary:l||n.getOption("label"),secondary:null!==o.subtitle&&(o.subtitle||s&&s.timeChanged)||null,style:{flex:"initial",width:this.state.ListItemTextWidth}}),d.a.createElement(h.a,{ref:this.ListItemSecondaryAction,className:a?t.horizontalListItemAction:t.verticalListItemAction},p?[u,d.a.createElement("br",{key:"br_"+n.id}),p]:u)),o.divider&&"after"===o.divider&&d.a.createElement(f.a,{divider:!0,style:{margin:"5px 0"}}))}}]),t}(d.a.Component),E=Object(S.a)(k)(j),w=a(100),C=a(606),x=function(e){return{defaultListSectionDivider:{margin:"5px 0 0 0"},defaultListSectionDividerItem:{margin:"6px 0 7px 0",padding:"0 16px !important"},defaultListSectionText:Object(l.a)({margin:0},e.breakpoints.down("md"),{margin:"0 0 0 10px"}),horizontalList:{display:"flex",flexDirection:"row",flexWrap:"wrap"}}},T=Object(S.a)(x)((function(e){var t=e.classes,a=e.getDevicesBySubgroup,n=e.subgroup,i=e.title,r=e.subgroupActions,s=function(e){a(n).forEach((function(t){var a=e;"level"===t.primaryStateKey&&(a=a?100:0),t.setDeviceState(null,a)}))};return d.a.createElement(d.a.Fragment,null,d.a.createElement(f.a,{divider:!0,className:t.defaultListSectionDivider}),d.a.createElement(f.a,{className:t.defaultListSectionDividerItem},d.a.createElement(m.a,{className:t.defaultListSectionText,primary:i}),d.a.createElement(h.a,null,null===r||!1===r?null:d.a.createElement(C.a,{color:"primary",size:"small"},d.a.createElement(w.a,{onClick:function(){return s(!0)}},p.a.t("on")),d.a.createElement(w.a,{onClick:function(){return s(!1)}},p.a.t("off"))))))})),D=function(e){function t(){return Object(i.a)(this,t),Object(s.a)(this,Object(o.a)(t).apply(this,arguments))}return Object(c.a)(t,e),Object(r.a)(t,[{key:"getDevicesBySubgroup",value:function(e){var t=[];return this.props.devices.forEach((function(a){e===a.getOption("subgroup")&&t.push(a)})),t}},{key:"render",value:function(){var e,t=this,a=this.props,i=a.classes,r=a.horizontal,s=a.devices,o=a.settings,c=a.component,l=a.action,u=Object(n.a)(a,["classes","horizontal","devices","settings","component","action"]);return d.a.createElement(g.a,{dense:!0,className:r&&i.horizontalList},s.map((function(a,n){var i=null!==e&&null!==a.options.subgroup&&a.options.subgroup!==e&&d.a.createElement(T,{key:"ListDivider-"+a.get("id"),getDevicesBySubgroup:t.getDevicesBySubgroup.bind(t),subgroup:a.getOption("subgroup"),title:a.options.subgroup,subgroupActions:o.subgroupActions||a.options.subgroupActions}),s=d.a.createElement(E,Object.assign({},u,{key:"StateListItem-"+a.get("id"),horizontal:r,device:a,component:c||!1,action:l||!0}));return e=a.getOption("subgroup"),[i,s]})))}}]),t}(d.a.Component);t.default=Object(S.a)(x)(D)},177:function(e,t,a){"use strict";var n=a(15),i=a(0),r=a.n(i),s=a(185),o=a(685),c=a(684),l=a(699),u=a(22),d=a(2),p=a(14),g=a(681),f=a(41),h=a(114),m=a(91),v=a(326),b=a.n(v),y=Object(s.a)((function(e){return{root:{paddingLeft:e.spacing(2),paddingRight:e.spacing(1)},highlight:"light"===e.palette.type?{color:e.palette.secondary.main,backgroundColor:Object(p.e)(e.palette.secondary.light,.85)}:{color:e.palette.text.primary,backgroundColor:e.palette.secondary.dark},title:{flex:"1 1 100%"}}}));function S(e){var t=y(),a=e.title,n=e.numSelected;return r.a.createElement(g.a,{className:Object(d.a)(t.root,Object(u.a)({},t.highlight,n>0))},n>0?r.a.createElement(f.a,{className:t.title,color:"inherit",variant:"subtitle1"},n," selected"):r.a.createElement(f.a,{className:t.title,variant:"h6",id:"tableTitle"},void 0!==a&&a),n>0&&r.a.createElement(m.a,{title:"Delete"},r.a.createElement(h.a,{"aria-label":"delete"},r.a.createElement(b.a,null))))}var k=a(683),O=a(607),j=a(115),E=a(701),w=a(623);function C(e){var t=e.classes,a=e.headCells,n=e.onSelectAllClick,i=e.selectable,s=e.order,o=e.orderBy,c=e.numSelected,l=e.rowCount,u=e.onRequestSort;return r.a.createElement(k.a,null,r.a.createElement(O.a,null,!1!==i&&r.a.createElement(j.a,{padding:"checkbox"},r.a.createElement(w.a,{indeterminate:c>0&&c<l,checked:l>0&&c===l,onChange:n,inputProps:{"aria-label":"select all"}})),a.map((function(e){return r.a.createElement(j.a,{key:e.id,align:e.align||"left",padding:e.disablePadding?"none":"default",sortDirection:o===e.id&&s},r.a.createElement(E.a,{active:o===e.id,direction:o===e.id?s:"asc",onClick:(a=e.id,function(e){u(e,a)})},r.a.createElement("strong",null,e.label),o===e.id?r.a.createElement("span",{className:t.visuallyHidden},"desc"===s?"sorted descending":"sorted ascending"):null));var a}))))}var x=a(13),T=a(90),D=a(608),N=Object(s.a)((function(e){return{noWrap:{whiteSpace:"nowrap"}}}));function L(e,t,a){if(null!==t&&"object"===typeof t){if(a.indexOf(t)>=0)return;a.push(t)}return t}function I(e){var t=e.columns,a=e.pageRows,n=e.emptyRows,i=e.rowStyles,s=e.selectable,o=e.selected,c=e.onClick,l=N();return r.a.createElement(D.a,null,a.map((function(e,a){var n,u=(n=e.id,-1!==o.indexOf(n)),p="enhanced-table-checkbox-".concat(a),g={};for(var f in i){var h=i[f];e[f]&&Object.keys(h).indexOf(e[f])>-1&&(g=Object(x.a)({},g,{},h[e[f]]))}return r.a.createElement(O.a,{key:"TableRow-"+a,hover:!0,onClick:c?function(t){return c(t,e.id)}:void 0,role:"checkbox","aria-checked":u,tabIndex:-1,selected:u},!1!==s&&r.a.createElement(j.a,{key:"TableCell-"+a+"-Checkbox",style:g,padding:"checkbox"},r.a.createElement(w.a,{checked:u,inputProps:{"aria-labelledby":p}})),t.map((function(t){return r.a.createElement(j.a,{key:"TableCell-"+a+"-"+t.id,classes:{root:Object(d.a)(t.noWrap&&l.noWrap)},style:g,scope:"row",padding:t.disablePadding?"none":"default"},function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";if(void 0===e||null===e)return"";var a=[];switch(t.toLowerCase()){case"date":e=Object(T.a)(e,"yyyy-MM-dd HH:mm:ss");break;default:e="boolean"===typeof(e=Array.isArray(e)||"object"===typeof e?JSON.stringify(e,(function(e,t){return L(0,t,a)})):e)?e.toString():e}return e}(e[t.id],t.type))})))})),n>0&&r.a.createElement(O.a,{style:{height:53*n}},r.a.createElement(j.a,{colSpan:6})))}a.d(t,"a",(function(){return P}));var A=Object(s.a)((function(e){return{root:{width:"100%"},paper:{width:"100%",marginBottom:e.spacing(2)},table:{minWidth:750},visuallyHidden:{border:0,clip:"rect(0 0 0 0)",height:1,margin:-1,overflow:"hidden",padding:0,position:"absolute",top:20,width:1}}}));function R(e,t,a){return t[a]<e[a]?-1:t[a]>e[a]?1:0}function M(e,t){return"desc"===e?function(e,a){return R(e,a,t)}:function(e,a){return-R(e,a,t)}}function _(e,t){var a=e.map((function(e,t){return[e,t]}));return a.sort((function(e,a){var n=t(e[0],a[0]);return 0!==n?n:e[1]-a[1]})),a.map((function(e){return e[0]}))}function P(e){var t=A(),a=e.title,i=e.headCells,s=e.CustomTableBody,u=e.rows,d=e.selectable,p=e.pagination,g=e.defaultOrder,f=e.defaultOrderBy,h=e.defaultSelected,m=e.defaultPage,v=e.defaultRowsPerPage,b=r.a.useState(g||"asc"),y=Object(n.a)(b,2),k=y[0],O=y[1],j=r.a.useState(f||i[0].id),E=Object(n.a)(j,2),w=E[0],x=E[1],T=r.a.useState(h||[]),D=Object(n.a)(T,2),N=D[0],L=D[1],R=r.a.useState(m||0),P=Object(n.a)(R,2),F=P[0],U=P[1],B=r.a.useState(p?v||5:u.length),H=Object(n.a)(B,2),K=H[0],z=H[1],V=s||I;return r.a.createElement(r.a.Fragment,null,r.a.createElement(S,{title:a,numSelected:N.length}),r.a.createElement(c.a,null,r.a.createElement(o.a,{className:t.table,"aria-labelledby":"tableTitle","aria-label":"enhanced table"},r.a.createElement(C,Object.assign({classes:t,numSelected:N.length,order:k,orderBy:w,onSelectAllClick:function(e){if(e.target.checked){var t=u.map((function(e){return e.id}));L(t)}else L([])},onRequestSort:function(e,t){O(w===t&&"asc"===k?"desc":"asc"),x(t)},rowCount:u.length},e)),r.a.createElement(V,Object.assign({columns:i,pageRows:_(u,M(k,w)).slice(F*K,F*K+K),emptyRows:K-Math.min(K,u.length-F*K),onClick:!1!==d&&function(e,t){var a=N.indexOf(t),n=[];-1===a?n=n.concat(N,t):0===a?n=n.concat(N.slice(1)):a===N.length-1?n=n.concat(N.slice(0,-1)):a>0&&(n=n.concat(N.slice(0,a),N.slice(a+1))),L(n)},selected:N},e)))),p&&r.a.createElement(l.a,{rowsPerPageOptions:[5,10,25],component:"div",count:u.length,rowsPerPage:K,page:F,onChangePage:function(e,t){U(t)},onChangeRowsPerPage:function(e){z(parseInt(e.target.value,10)),U(0)}}))}},198:function(e,t,a){"use strict";a.r(t);var n=a(6),i=a(423)("./door."+n.a.getLanguage()).default;n.a.setTranslation(n.a.getLanguage(),i),t.default={configurations:{open:{icon:{true:"door-open",false:"door-closed"},state:{true:n.a.t("door#open#true"),false:n.a.t("door#open#false")}},lock:{}},components:{},actions:{},styles:{}}},199:function(e,t,a){"use strict";a.r(t);var n=a(0),i=a.n(n),r=a(6),s=a(47),o=a(425)("./heating."+r.a.getLanguage()).default;r.a.setTranslation(r.a.getLanguage(),o),t.default={configurations:{temperature:{value:function(e){return e.toFixed(1)},unit:" \xb0C"},setTemperature:{unit:" \xb0C",icon:"thermometer-chevron-up"},humidity:{unit:" %"},boost:{icon:"radiator"}},components:{setTemperature:function(e){var t=s.default.components.LevelComponent;return i.a.createElement(t,Object.assign({min:0,max:35},e))}},actions:{boost:s.default.actions.PowerAction},styles:{}}},218:function(e,t,a){"use strict";a.r(t);var n=a(6),i=a(590)("./location."+n.a.getLanguage()).default;n.a.setTranslation(n.a.getLanguage(),i),t.default={configurations:{position:{icon:"map-marker"},presence:{icon:{true:"map-marker-radius",false:"map-marker-remove-outline"},state:{true:n.a.t("location#presence#true"),false:n.a.t("location#presence#false")}},users:{icon:{"":"account-group-outline",default:"account-group"},state:{"":n.a.t("location#users#empty")}}},components:{},actions:{},styles:{}}},219:function(e,t,a){"use strict";a.r(t);var n=a(6),i=a(592)("./user."+n.a.getLanguage()).default;n.a.setTranslation(n.a.getLanguage(),i),t.default={configurations:{position:{icon:"map-marker"},location:{icon:"account"},battery:{}},components:{},actions:{},styles:{}}},220:function(e,t,a){"use strict";a.r(t);var n=a(6),i=a(594)("./window."+n.a.getLanguage()).default;n.a.setTranslation(n.a.getLanguage(),i),t.default={configurations:{open:{icon:{true:"window-open-variant",false:"window-closed-variant"},state:{true:n.a.t("window#open#true"),false:n.a.t("window#open#false")}}},components:{},actions:{},styles:{}}},221:function(e,t,a){"use strict";a.r(t);var n=a(15),i=a(0),r=a.n(i),s=a(223),o=a(10),c=a(6);var l={HsvToRgb:function(e){var t,a,i,r,s,o,c,l,u=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,d=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;if(Array.isArray(e))d=e[2],u=e[1],e=e[0];else if("string"===typeof e&&e.indexOf(",")){var p=e.split(","),g=Object(n.a)(p,3);e=g[0],u=g[1],d=g[2]}switch(e>1&&(e/=360),o=d*(1-u),c=d*(1-(s=6*e-(r=Math.floor(6*e)))*u),l=d*(1-(1-s)*u),r%6){case 0:t=d,a=l,i=o;break;case 1:t=c,a=d,i=o;break;case 2:t=o,a=d,i=l;break;case 3:t=o,a=c,i=d;break;case 4:t=l,a=o,i=d;break;case 5:t=d,a=o,i=c}return[Math.round(255*t),Math.round(255*a),Math.round(255*i)]},RgbToHex:function(e,t,a){if(Array.isArray(e))a=e[2],t=e[1],e=e[0];else if("string"===typeof e&&e.indexOf(",")){var i=e.split(","),r=Object(n.a)(i,3);e=r[0],t=r[1],a=r[2]}return e=parseInt(e).toString(16),t=parseInt(t).toString(16),a=parseInt(a).toString(16),1===e.length&&(e="0"+e),1===t.length&&(t="0"+t),1===a.length&&(a="0"+a),"#"+e+t+a}},u=a(47),d=a(588)("./light."+c.a.getLanguage()).default;function p(e){var t=e.stateKey,a=e.stateVal,s=Object(i.useState)(a),o=Object(n.a)(s,2),c=o[0],l=o[1];Object(i.useEffect)((function(){return l(a)}),[a]);var d,p={};"rgb"===t&&c?p={Red:(d=c.split(","))[0],Green:d[1],Blue:d[2]}:"hsv"===t&&c&&(p={Hue:(d=c.split(","))[0],Saturation:d[1],Brightness:d[2]});var g=u.default.components.Label,f=[];for(var h in p)f.push(r.a.createElement(g,{key:h,label:h+" "+p[h],br:!0}));return f}function g(e){var t=e.device,a=e.stateKey,c=e.stateVal,d=e.title,p=c||"#ffffff";"rgb"===a?p=l.RgbToHex(p):"hsv"===a&&(p=l.RgbToHex(l.HsvToRgb(p)));var g=Object(i.useState)(p),f=Object(n.a)(g,2),h=f[0],m=f[1];Object(i.useEffect)((function(){"rgb"===a?m(l.RgbToHex(c)):"hsv"===a?m(l.RgbToHex(l.HsvToRgb(c))):"hex"===a&&m(c)}),[a,c]);var v=u.default.components.Component;return r.a.createElement(v,{title:d||a},r.a.createElement(s.SketchPicker,{color:h,width:"100%",onChangeComplete:function(e,n){e=e[a],"rgb"===a?e=[e.r,e.g,e.b].join(","):"hsv"===a&&(e=[e.h,e.s,e.v].join(",")),t.setDeviceState(a,e).catch((function(e){return o.a._("Function (light)",e.message,"error",!0,e.stack)}))}}))}c.a.setTranslation(c.a.getLanguage(),d);var f={icon:{default:"palette"},unit:" \xb0"};t.default={configurations:{power:{icon:{true:"lightbulb-on",false:"lightbulb-off-outline"}},level:{value:function(e){return e>0&&e<=1?100*e:e},unit:function(e){return e>0?" %":null},icon:{default:"lightbulb-on",0:"lightbulb-off-outline"},state:{0:c.a.t("light#level#off")}},colorTemperature:{icon:{default:"thermometer"},unit:" \xb0K"},hue:f,rgb:f,hsv:f,hex:f},components:{level:u.default.components.LevelComponent,colorTemperature:function(e){var t=u.default.components.LevelComponent;return r.a.createElement(t,Object.assign({min:2e3,max:6500,step:10},e))},rgb:g,hsv:g,hex:g,hue:function(e){var t=e.device,a=e.stateKey,c=e.stateVal,d=e.title,p=Object(i.useState)(c),g=Object(n.a)(p,2),f=g[0],h=g[1];Object(i.useEffect)((function(){return h(c)}),[c]);var m=u.default.components.Component,v=l.RgbToHex(l.HsvToRgb(f));return r.a.createElement(m,{title:d||a},r.a.createElement(s.HuePicker,{color:v,width:"100%",onChangeComplete:function(e,n){h(Math.round(e.hsl.h)),t.setDeviceState(a,Math.round(e.hsl.h)).catch((function(e){return o.a._("Function (light)",e.message,"error",!0,e.stack)}))}}))}},actions:{power:u.default.actions.PowerAction,level:function(e){var t=e.device,a=e.stateKey,s=e.stateVal,c=function(e){g(e.target.checked),t.setDeviceState(a,e.target.checked?100:0).catch((function(e){return o.a._("Function (light)",e.message,"error",!0,e.stack)}))},l=Object(i.useState)(s>0),d=Object(n.a)(l,2),p=d[0],g=d[1];return Object(i.useEffect)((function(){return g(s>0)}),[s]),t.parent&&t.parent.states.power?r.a.createElement(u.default.actions.Action,Object.assign({},e,{stateVal:p,onChange:c})):r.a.createElement(u.default.actions.PowerAction,Object.assign({},e,{stateVal:p,onChange:c}))},rgb:p,hsv:p,hex:p},styles:{_any:{state:{0:{color:"#999"}}}}}},222:function(e,t,a){"use strict";a.r(t);var n=a(15),i=a(0),r=a.n(i),s=a(2),o=a(183),c=a.n(o),l=a(100),u=a(606),d=a(324),p=a.n(d),g=a(165),f=a.n(g),h=a(164),m=a.n(h),v=a(10),b=a(6),y=a(47);var S=a(185),k=Object(S.a)((function(e){return{value:function(e){return{float:"left",lineHeight:"32px",marginRight:"10px"}},borderLeftTransparent:{borderLeftColor:"transparent !important"},borderLeftColor:{borderLeftColor:c()(e.palette.primary.main).alpha(.5).rgb().toString()+"!important"},borderRightTransparent:{borderRightColor:"transparent !important"},borderRightColor:{borderRightColor:c()(e.palette.primary.main).alpha(.5).rgb().toString()+"!important"},borderRightColorSecondary:{borderRightColor:c()(e.palette.secondary.main).alpha(.5).rgb().toString()+"!important"}}})),O=a(421)("./blind."+b.a.getLanguage()).default;b.a.setTranslation(b.a.getLanguage(),O);t.default={configurations:{level:{value:function(e){return Math.round(e)},icon:{default:"window-shutter-open",">90":"window-shutter-open","<=90":"window-shutter"}},level2:{value:function(e){return Math.round(e)},unit:" %",icon:{default:"window-shutter-open",">90":"window-shutter-open","<=90":"window-shutter"}},activity:{val:function(e,t,a){return function(e,t){if("HomeMatic"===e)switch(t){case 1:case 2:t=!0;break;case 3:t=!1;break;default:t=null}else if("Shelly"===e)switch(t){case"open":case"close":t=!0;break;case"stop":t=!1;break;default:t=null}return t}(a.options.manufacturer,e)},icon:{true:"pan-vertical",false:"dots-vertical"},state:{true:b.a.t("blind#activity#true"),false:b.a.t("blind#activity#false")}}},components:{level2:y.default.components.LevelComponent},actions:{level:function(e){var t=e.device,a=e.state,o=e.stateKey,c=k(),d=Object(i.useState)(a.value),g=Object(n.a)(d,2),h=g[0],b=g[1];Object(i.useEffect)((function(){return b(a.value)}),[a]);var y=function(e,t,a){"activity"===e&&E(t.val)},S=Object(i.useState)(!1),O=Object(n.a)(S,2),j=O[0],E=O[1];return Object(i.useEffect)((function(){return t.states.activity&&t.states.activity.state&&(t.states.activity.state="string"===typeof t.states.activity.state?{node:t.states.activity.state}:t.states.activity.state,t.requestDeviceState("activity",!0).catch((function(e){return v.a._("Function (blind)",e.message,"error",!0,e.stack)})),t.listen(y)),function(){return t.unlisten(y)}}),[t,a]),r.a.createElement(r.a.Fragment,null,r.a.createElement("div",{className:c.value},h+a.unit),r.a.createElement(u.a,{size:"small"},r.a.createElement(l.a,{color:"primary",className:Object(s.a)(null!==j&&(j?c.borderRightTransparent:c.borderRightColor)),onClick:function(){b(100),E(!0),t.setDeviceState(o,100).catch((function(e){return v.a._("Function (blind)",e.message,"error",!0,e.stack)}))}},r.a.createElement(p.a,null)),null!==j&&r.a.createElement(l.a,{color:"secondary",className:Object(s.a)(j?c.borderRightColorSecondary:[c.borderLeftTransparent,c.borderRightTransparent]),onClick:function(){E(!1),t.setDeviceState("activity",!0).catch((function(e){return v.a._("Function (blind)",e.message,"error",!0,e.stack)}))},disabled:!j},r.a.createElement(m.a,null)),r.a.createElement(l.a,{color:"primary",className:Object(s.a)(null!==j&&(j?c.borderLeftTransparent:c.borderLeftColor)),onClick:function(){b(0),E(!0),t.setDeviceState(o,0).catch((function(e){return v.a._("Function (blind)",e.message,"error",!0,e.stack)}))}},r.a.createElement(f.a,null))))}},styles:{}}},262:function(e,t,a){"use strict";a.r(t);var n=a(222);a.d(t,"default",(function(){return n.default}))},265:function(e,t,a){"use strict";a.r(t),t.default={"blind#activity":"Aktivit\xe4t","blind#level":"Behangh\xf6he","blind#level2":"Lamellenposition","blind#activity#true":"in Bewegung","blind#activity#false":"keine"}},266:function(e,t,a){"use strict";a.r(t),t.default={"blind#activity":"Activity","blind#level":"Level","blind#level2":"Lamella","blind#activity#true":"moving","blind#activity#false":"none"}},267:function(e,t,a){"use strict";a.r(t),t.default={"door#bell":"Klingel","door#lock":"Schlo\xdf","door#open":"T\xfcr","door#open#true":"offen","door#open#false":"geschlossen"}},268:function(e,t,a){"use strict";a.r(t),t.default={"door#bell":"Bell","door#lock":"Lock","door#open":"Door","door#open#true":"open","door#open#false":"closed"}},269:function(e,t,a){"use strict";a.r(t),t.default={"heating#boost":"Boost","heating#humidity":"Luftfeuchtigkeit","heating#setTemperature":"eingestellte Temperatur","heating#temperature":"Temperatur"}},270:function(e,t,a){"use strict";a.r(t),t.default={"heating#boost":"Boost","heating#humidity":"Humidity","heating#setTemperature":"Set Temperature","heating#temperature":"Temperature"}},28:function(e,t,a){"use strict";a.d(t,"a",(function(){return c}));var n=a(13),i=a(20),r=a(21),s=a(10),o=a(6),c=function(){function e(){Object(i.a)(this,e)}return Object(r.a)(e,null,[{key:"setSettings",value:function(t){return!!t&&(e.settings=Object(n.a)({},e.settings,{},t||{}),s.a._("Settings",["Set settings",e.settings]),!0)}},{key:"getSetting",value:function(t){return e.settings[t]||""}},{key:"applySettings",value:function(){if(e.settings.language?(o.a.setLanguage(e.settings.language),o.a.loadTranslation(e.settings.language)):o.a.loadTranslation(),e.settings.pageTitle&&(document.title=e.settings.pageTitle),e.settings.pageFavicon&&"data:"===e.settings.pageFavicon.substr(0,5)&&(document.getElementById("favicon").href=e.settings.pageFavicon),e.settings.translations){var t=e.settings.translations;for(var a in t)o.a.setTranslation(a,t[a])}}}]),e}();c.settings={}},304:function(e,t,a){"use strict";a.r(t),t.default={"light#colorTemperature":"Farbtemperatur","light#hex":"Farbe (Hex)","light#hsv":"Farbraum Hue-Saturation-Value (HSV)","light#hue":"Farbe (Hue)","light#level":"Helligkeit","light#power":"Licht","light#rgb":"Farbraum Rot-Gr\xfcn-Blau (RGB)","light#level#off":"ausgeschaltet"}},305:function(e,t,a){"use strict";a.r(t),t.default={"light#colorTemperature":"Color Temperature","light#hex":"Color (Hex)","light#hsv":"Colorspace Hue-Saturation-Value (HSV)","light#hue":"Color (Hue)","light#level":"Brightness","light#power":"Power","light#rgb":"Colorspace Red-Green-Blue (RGB)","light#level#off":"off"}},306:function(e,t,a){"use strict";a.r(t),t.default={"location#position":"Position","location#presence":"Anwesenheit","location#users":"Benutzer","location#presence#true":"anwesend","location#presence#false":"abwesend","location#users#empty":"niemand anwesend"}},307:function(e,t,a){"use strict";a.r(t),t.default={"location#position":"Position","location#presence":"Presence","location#users":"Users","location#presence#true":"present","location#presence#false":"absent","location#users#empty":"nobody present"}},308:function(e,t,a){"use strict";a.r(t),t.default={"user#location":"Standort","user#position":"Position"}},309:function(e,t,a){"use strict";a.r(t),t.default={"user#location":"Location","user#position":"Position"}},310:function(e,t,a){"use strict";a.r(t),t.default={"window#open":"Fenster","window#open#true":"offen","window#open#false":"geschlossen"}},311:function(e,t,a){"use strict";a.r(t),t.default={"window#open":"Window","window#open#true":"open","window#open#false":"closed"}},312:function(e,t,a){"use strict";a.r(t),a.d(t,"ModuleSettings",(function(){return D}));var n=a(40),i=a(13),r=a(22),s=a(20),o=a(21),c=a(26),l=a(18),u=a(27),d=a(0),p=a.n(d),g=a(2),f=a(90),h=a(54),m=a(6),v=a(125),b=a(91),y=a(227),S=a(611),k=a(352),O=a(124),j=a(225),E=a(353),w=a(327),C=a.n(w),x=a(4),T=function(e){function t(e){var a;return Object(s.a)(this,t),(a=Object(c.a)(this,Object(l.a)(t).call(this,e))).state={adapterInformation:[],adapterAliveStatus:{},newUpdates:!1,updatesJson:"",lastUpdateCheck:""},a.socket=h.a.getConnection,a.list=a.props.settings.list?Array.isArray(a.props.settings.list)?a.props.settings.list:a.props.settings.list.split(","):null,a.blacklist=a.props.settings.blacklist?Array.isArray(a.props.settings.blacklist)?a.props.settings.blacklist:a.props.settings.blacklist.split(","):null,a.updateStates=["admin.0.info.newUpdates","admin.0.info.lastUpdateCheck","admin.0.info.updatesJson"],a.adapterStates=[],a}return Object(u.a)(t,e),Object(o.a)(t,[{key:"componentDidMount",value:function(){var e=this;!1!==this.props.settings.updates&&this.socket.getStates(this.updateStates,(function(t,a){e.setState({newUpdates:a["admin.0.info.newUpdates"].val,lastUpdateCheck:a["admin.0.info.lastUpdateCheck"].val,updatesJson:a["admin.0.info.updatesJson"].val}),e.socket.subscribeStates(e.updateStates,(function(t,a){t=t.substr(t.lastIndexOf(".")+1),e.state[t]!==a.val&&e.setState(Object(r.a)({},t,a.val))}))})),this.socket.getAdapterInstances((function(t,a){if(a&&a.rows){var n=[];a.rows.forEach((function(t,a){(!e.list||e.list&&e.list.indexOf(t.value.common.name)>-1)&&(!e.blacklist||e.blacklist&&-1===e.blacklist.indexOf(t.value.common.name))&&(n.push(t),e.adapterStates=e.adapterStates.concat([t.id+".alive",t.id+".connected",t.id.replace("system.adapter.","")+".info.connection"]))})),e.setState({adapterInformation:n.sort((function(e,t){return e.id>t.id?1:t.id>e.id?-1:0}))}),e.socket.getStates(e.adapterStates,(function(t,a){e.setState({adapterAliveStatus:a}),e.socket.subscribeStates(e.adapterStates,(function(t,a){!a||e.state.adapterAliveStatus[t]&&a.val===e.state.adapterAliveStatus[t].val||e.setState((function(e){return{adapterAliveStatus:Object(i.a)({},e.adapterAliveStatus,Object(r.a)({},t,a))}}))}))}))}}))}},{key:"componentWillUnmount",value:function(){this.socket.unsubscribeStates([].concat(Object(n.a)(this.updateStates),Object(n.a)(this.adapterStates)))}},{key:"render",value:function(){var e=this,t=this.props.classes,a=this.state.updatesJson&&JSON.parse(this.state.updatesJson)||{},n=Object.keys(a).length,i=p.a.createElement(O.a,{key:"loading",className:t.loading},p.a.createElement(v.a,{size:20}));return this.state.adapterInformation.length>0&&(i=this.state.adapterInformation.map((function(n){n.update=a[n.value.common.name]||!1;var i=n.value.common.enabled,r=e.state.adapterAliveStatus[n.id+".alive"]&&e.state.adapterAliveStatus[n.id+".alive"].val||!1,s=e.state.adapterAliveStatus[n.id+".connected"]&&e.state.adapterAliveStatus[n.id+".connected"].val||!1,o=!e.state.adapterAliveStatus[n.id.replace("system.adapter.","")+".info.connection"]||e.state.adapterAliveStatus[n.id.replace("system.adapter.","")+".info.connection"].val,c=m.a.t("Adapter")+" "+(i?r&&s&&o?m.a.t("alive"):m.a.t("not alive"):m.a.t("disabled"));return p.a.createElement(O.a,{key:"adapter-"+n.id},p.a.createElement(k.a,null,p.a.createElement(y.a,{alt:n.value.common.name,src:n.value.common.extIcon,className:t.small})),p.a.createElement(j.a,{primary:n.value.common.title,secondary:["v"+n.value.common.version,n.update&&n.value.common.version!==n.update.availableVersion&&p.a.createElement("span",{key:"updates-"+n.id},", ",p.a.createElement("span",{className:t.UpdateAvailable},m.a.t("Update available")+" v"+n.update.availableVersion)),n.value.common.runAsCompactMode&&", "+m.a.t("Compact Mode")+" "+m.a.t("on")+" ("+m.a.t("Group")+" "+n.value.common.compactGroup+")"]}),p.a.createElement(E.a,{className:Object(g.a)(t.StatusIndicator,i?r&&s&&o?t.alive:t.notAlive:t.disabled)},p.a.createElement(b.a,{title:c},p.a.createElement("span",{className:i?r&&s&&o?"mdi mdi-check-circle":"mdi mdi-alert":"mdi mdi-close"}))))}))),p.a.createElement(S.a,{dense:!0},!1===this.state.newUpdates?this.state.lastUpdateCheck&&p.a.createElement(O.a,{key:"updates",classes:{root:t.noUpdates}},p.a.createElement(j.a,{primary:m.a.t("last update")+": "+Object(f.a)(new Date(this.state.lastUpdateCheck),"dd.MM.yyyy HH:mm:ss",{locale:m.b[m.a.getLanguage()]})})):p.a.createElement(O.a,{key:"updates",classes:{container:t.UpdatesListItem}},p.a.createElement(k.a,null,p.a.createElement(C.a,null)),p.a.createElement(j.a,{primary:m.a.t("Updates available")+"!"}),p.a.createElement(E.a,{className:Object(g.a)(t.StatusIndicator,t.UpdatesIndicator)},n)),i)}}]),t}(p.a.Component),D={noDevicesAllowed:!0,title:m.a.t("Adapter Status"),icon:"traffic-light"};t.default=Object(x.a)((function(e){return{noUpdates:{fontStyle:"italic",textAlign:"right",color:"rgba(0, 0, 0, 0.54)"},UpdateAvailable:{color:"#CCAA00"},UpdatesListItem:{backgroundColor:"#ffd700",color:"#fff",margin:e.spacing(0,-2),paddingLeft:e.spacing(2)},UpdatesIndicator:{right:e.spacing(3.75),backgroundColor:"#CCAA00",borderRadius:"50%",width:e.spacing(3),height:e.spacing(3),color:"#fff",textAlign:"center",fontSize:"1rem !important"},StatusIndicator:{fontSize:"1.4rem"},loading:{textAlign:"center",marginTop:"5px"},small:{width:e.spacing(3),height:e.spacing(3)},alive:{color:"#86d686"},notAlive:{color:"#f7e43b"},disabled:{color:"#bababa"}}}))(T)},313:function(e,t,a){"use strict";a.r(t);var n=a(40),i=a(13),r=a(20),s=a(21),o=a(26),c=a(18),l=a(77),u=a(27),d=a(0),p=a.n(d),g=a(2),f=a(328),h=(a(601),a(602),a(341)),m=a(10),v=a(6),b=a(112),y=a(125),S=a(100),k=a(606),O=a(620),j=a(91),E=a(55),w=a(354),C=a(38),x=a(617),T=a(228),D=a(226),N=a(101),L=a(114),I=a(332),A=a.n(I),R=a(333),M=a.n(R),_=a(330),P=a.n(_),F=a(331),U=a.n(F),B=a(335),H=a.n(B),K=a(334),z=a.n(K),V=a(4),W=function(e){function t(e){var a;return Object(r.a)(this,t),(a=Object(o.a)(this,Object(c.a)(t).call(this,e))).historyChange=function(e){return function(t,n,r,s){a.addChartGraph(s,n,Object(i.a)({},e,{axis:a.getAxis(e.start,e.end)})),a.setState({loading:!1})}},a.stateChange=function(e){return function(t,n,r,s){return a.updateChartGraph(s,n,Object(i.a)({},e,{axis:a.getAxis(e.end,new Date)}))}},a.chartFilter=a.props.settings.chartFilter||{},a.chartConfig=a.props.settings.chartConfig||{},a.chartConfig.yAxes=a.chartConfig.yAxes||[],a.chartConfig.yAxes.unshift({id:"left",type:"linear",position:"left",ticks:{callback:function(e){return(a.chartConfig.yLeftAxisUnitBefore||"")+Number.parseFloat(e).toFixed(1)+(a.chartConfig.yLeftAxisUnitAfter||"")}}}),a.state={loading:!0,errors:[],datePicker:!1,selectedTimeRangeValue:a.chartFilter&&a.chartFilter.selectedTimeRangeValue||1,selectedTimeRangeUnit:a.chartFilter&&a.chartFilter.selectedTimeRangeUnit||"days",selectedDateTime:a.chartFilter&&a.chartFilter.selectedDateTime&&new Date(a.chartFilter.selectedDateTime)||new Date,dateNow:!a.chartFilter||!a.chartFilter.selectedDateTime,chartLabels:[],chartData:{labels:[],datasets:[]},chartPan:!0,chartZoom:!0},a.timer=null,a.timeRangeRef=p.a.createRef(),a.chartRef=p.a.createRef(),a.chartUpdates={},a.chartOptions={maintainAspectRatio:!1,spanGaps:!0,legend:{onClick:a.legendClickHandler.bind(Object(l.a)(a))},tooltips:{callbacks:{label:function(e,t){return t.datasets[e.datasetIndex].label+": "+e.value+t.datasets[e.datasetIndex].unit}}},scales:{yAxes:a.chartConfig.yAxes},plugins:{colorschemes:{scheme:"brewer.SetOne9"},zoom:{pan:{enabled:!0,mode:"xy"},zoom:{enabled:!0,mode:"xy"}}}},a}return Object(u.a)(t,e),Object(s.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=Object(i.a)({},this.getTimeRange(),{axis:this.getAxis()});this.props.devices.forEach((function(a){a.label=a.name+" ("+v.a.t(a.primaryStateKey)+")",a.requestDeviceStateHistory(a.options.history||null,!0,{start:t.start,end:t.end,step:t.step,aggregate:"average",ignoreNull:!0}).catch((function(e){return m.a._("Modules (Chart)",e.message,"error",!0,e.stack)})),a.listen("historyChange",(function(t){return e.historyChange})),null!==e.props.settings.liveUpdates&&!1!==e.props.settings.liveUpdates&&e.state.dateNow&&a.listen((function(t){return e.stateChange}))}))}},{key:"componentWillUnmount",value:function(){var e=this;this.props.devices.forEach((function(t){t.unlisten(e.stateChange)}))}},{key:"componentDidUpdate",value:function(e,t){var a=this;!this.state.selectedTimeRangeValue||t.selectedDateTime===this.state.selectedDateTime&&t.selectedTimeRangeValue===this.state.selectedTimeRangeValue&&t.selectedTimeRangeUnit===this.state.selectedTimeRangeUnit||(this.setState({loading:!0,errors:[]}),clearTimeout(this.timer),this.timer=setTimeout((function(){var e=a.getTimeRange();a.props.devices.forEach((function(t){t.requestDeviceStateHistory(t.options.history||null,!0,{start:e.start,end:e.end,step:e.step,aggregate:"average",ignoreNull:!0}).catch((function(e){return m.a._("Modules (Chart)",e.message,"error",!0,e.stack)}))}))}),500))}},{key:"getTimeRange",value:function(){var e=this.state.selectedDateTime.getTime(),t=this.state.selectedTimeRangeValue,a=1,n="dd. MMM yyyy, HH:mm";switch(this.state.selectedTimeRangeUnit){default:break;case"seconds":n="dd. MMM yyyy, HH:mm:ss";break;case"minutes":n="dd. MMM yyyy, HH:mm:ss",t*=60;break;case"hours":n="dd. MMM yyyy, HH:mm",t=60*t*60,a*=60;break;case"days":n="dd. MMM yyyy, HH:mm",t=60*t*60*24,a=60*a*60;break;case"months":n="dd. MMM yyyy",t=60*t*60*24*31,a=60*a*60*24;break;case"years":n="dd. MMM yyyy",t=60*t*60*24*365,a=60*a*60*24*31}return{axisTimeFormat:n,start:e-1e3*t,end:e,timeRange:1e3*t,step:1e3*a}}},{key:"getAxis",value:function(e,t){for(var a=this.getTimeRange(),n=a.step,i=a.axisTimeFormat,r={},s=e;s<=t;s+=n)r[s]=b.a.secondsToDateTime(s/1e3,i);return r}},{key:"groupChartData",value:function(e,t){var a,i=[],r=Object.keys(t);return r.forEach((function(t,s){for(var o in a=r[s-1>0?s-1:0],e){var c=e[o];if(c.val=parseFloat(c.val),c.ts&&null!==c.val&&!(a>c.ts))if(a<c.ts&&c.ts<=t)i[s]=i[s]?[].concat(Object(n.a)(i[s]),[c.val]):[c.val];else if(c.ts>t)break}i[s]&&(1===i[s].length?i[s]=i[s][0]:i[s]=i[s].reduce((function(e,t){return e+t}),0)/i[s].length)})),i}},{key:"updateChartGraph",value:function(e,t,a){var i=this.state.chartLabels.findIndex((function(t){return t===e.label}));if(-1===i)return!1;this.chartUpdates[i]=this.chartUpdates[i]||[],this.chartUpdates[i].push({ts:t.ts,val:t.val});var r=this.groupChartData(this.chartUpdates[i],a.axis);this.chartRef.current.chartInstance.data.labels=[].concat(Object(n.a)(this.state.chartData.labels),Object(n.a)(Object.values(a.axis))),this.chartRef.current.chartInstance.data.datasets[i].data=[].concat(Object(n.a)(this.state.chartData.datasets[i].data),Object(n.a)(r)),this.chartRef.current.chartInstance.update()}},{key:"addChartGraph",value:function(e,t,a){if(!t||!t.length){var r=v.a.t("No history data given for %s").replace("%s",e.label)+"!";return this.setState((function(e){return{errors:[].concat(Object(n.a)(e.errors),[r])}})),!1}var s=this.groupChartData(t,a.axis),o=this.state.chartLabels.findIndex((function(t){return t===e.label}));if(o>-1)this.chartRef.current.chartInstance.data.labels=Object.values(a.axis),this.chartRef.current.chartInstance.data.datasets[o].data=s,this.chartRef.current.chartInstance.update();else{this.setState((function(t){return{chartLabels:[].concat(Object(n.a)(t.chartLabels),[e.label])}}));var c=Object(i.a)({label:e.label,unit:e.states[e.primaryStateKey].state.value.unit||"",fill:!1},e.options.graphConfig||{},{data:s});this.setState((function(e){return{axisTimeFormat:a.axisTimeFormat,chartData:{labels:Object.values(a.axis),datasets:[].concat(Object(n.a)(e.chartData.datasets),[c])}}}))}}},{key:"legendClickHandler",value:function(e,t){var a=t.datasetIndex,n=this.chartRef.current.chartInstance,i=n.getDatasetMeta(a);i.hidden=null===i.hidden?!n.data.datasets[a].hidden:null,n.update(),n.resetZoom()}},{key:"disablePan",value:function(){var e=this.chartRef.current.chartInstance.options.plugins.zoom.pan.enabled;this.chartRef.current.chartInstance.options.plugins.zoom.pan.enabled=!1===e,this.setState({chartPan:!1===e})}},{key:"disableZoom",value:function(){var e=this.chartRef.current.chartInstance.options.plugins.zoom.zoom.enabled;this.chartRef.current.chartInstance.options.plugins.zoom.zoom.enabled=!1===e,this.setState({chartZoom:!1===e})}},{key:"render",value:function(){var e=this,t=this.props,a=t.classes,n=t.settings;return p.a.createElement("div",null,p.a.createElement("div",{className:a.options},p.a.createElement(E.a,{className:a.datePicker},p.a.createElement(j.a,{title:v.a.t("Period shown in Chart")},p.a.createElement(P.a,{className:a.icon})),p.a.createElement(T.a,{inputRef:this.timeRangeRef,className:a.input,value:this.state.selectedTimeRangeValue,onChange:function(t){return e.setState({selectedTimeRangeValue:t.target.value})}}),p.a.createElement(D.a,{value:this.state.selectedTimeRangeUnit,onChange:function(t){return e.setState({selectedTimeRangeUnit:t.target.value})},displayEmpty:!0,disableUnderline:!0,className:a.select},p.a.createElement(N.a,{value:"seconds"},v.a.t("Seconds")),p.a.createElement(N.a,{value:"minutes"},v.a.t("Minutes")),p.a.createElement(N.a,{value:"hours"},v.a.t("Hours")),p.a.createElement(N.a,{value:"days"},v.a.t("Days")),p.a.createElement(N.a,{value:"months"},v.a.t("Months")),p.a.createElement(N.a,{value:"years"},v.a.t("Years")))),p.a.createElement(E.a,{className:a.datePicker},p.a.createElement(j.a,{title:v.a.t("End date")},p.a.createElement(U.a,{className:a.icon})),p.a.createElement(C.a,{locale:v.b[v.a.getLanguage()],utils:h.a},p.a.createElement(x.a,{className:a.input,value:this.state.selectedDateTime,onChange:function(t){return e.setState({selectedDateTime:t,dateNow:!1})},open:this.state.datePicker,onOpen:function(){return e.setState({datePicker:!0})},onClose:function(){return e.setState({datePicker:!1})},variant:"inline",ampm:!1,format:"dd.MM.yyyy HH:mm",InputProps:{disableUnderline:!0}})),p.a.createElement(j.a,{title:v.a.t("Select end date")},p.a.createElement(L.a,{color:"primary",className:a.iconButton,onClick:function(){return e.setState({datePicker:!0})}},p.a.createElement(A.a,null))),p.a.createElement(w.a,{className:a.dividerVertical,orientation:"vertical"}),p.a.createElement(j.a,{title:v.a.t("Select today as end date")},p.a.createElement(L.a,{className:a.iconButton,onClick:function(){return e.setState({selectedDateTime:new Date,dateNow:!0})}},p.a.createElement(M.a,null)))),p.a.createElement(j.a,{title:v.a.t("Live updates are "+(null!==this.props.settings.liveUpdates&&!1!==this.props.settings.liveUpdates&&this.state.dateNow?"on":"off")),placement:"top",style:{display:"flex"}},p.a.createElement("span",null,p.a.createElement(S.a,{disabled:!0,className:Object(g.a)(a.datePicker,null!==this.props.settings.liveUpdates&&!1!==this.props.settings.liveUpdates&&this.state.dateNow?a.button:a.buttonDisabled)},p.a.createElement(z.a,null))))),p.a.createElement(w.a,{className:a.divider}),p.a.createElement("div",{className:a.toolbar},p.a.createElement("div",{className:a.errorMessage},this.state.errors.length>0&&p.a.createElement(O.a,{severity:"error"},this.state.errors.map((function(e,t){return[e,p.a.createElement("br",{key:"br-error-"+t})]})))),p.a.createElement(k.a,{className:a.toolbarButtons,color:"primary"},p.a.createElement(S.a,{disableElevation:!0,variant:"contained",onClick:function(){return e.chartRef.current.chartInstance.resetZoom()}},p.a.createElement(j.a,{title:v.a.t("Reset Zoom")},p.a.createElement(H.a,null))))),p.a.createElement("div",{className:"chart-container",style:{position:"relative",height:n.chartHeight||"500px"}},this.state.loading&&p.a.createElement("div",{className:a.loading},p.a.createElement(y.a,null)),p.a.createElement(f.a,{ref:this.chartRef,data:this.state.chartData,options:this.chartOptions})))}}]),t}(p.a.Component);t.default=Object(V.a)((function(e){return{loading:{position:"absolute",backgroundColor:"rgba(0, 0, 0, 0.3)",width:"100%",height:"100%",display:"flex",alignItems:"center",justifyContent:"center"},errorMessage:{marginBottom:5,marginRight:15,width:"100%"},toolbar:{display:"flex"},toolbarButtons:{display:"initial",whiteSpace:"nowrap"},options:{display:"flex",justifyContent:"center"},datePicker:{padding:"2px 4px",display:"flex",alignItems:"center",margin:2},input:{marginLeft:e.spacing(1),flex:1},select:{width:100},icon:{margin:10},iconButton:{padding:10},divider:{margin:"15px 0"},dividerVertical:{height:28,margin:4},button:{backgroundColor:e.palette.primary.main,color:"#fff !important",margin:"4px"},buttonDisabled:{backgroundColor:"#eee",margin:"4px"}}}))(W)},314:function(e,t,a){"use strict";a.r(t),a.d(t,"default",(function(){return p})),a.d(t,"ModuleSettings",(function(){return g}));var n=a(13),i=a(15),r=a(0),s=a.n(r),o=a(90),c=a(224),l=a(28),u=a(6),d=a(125);function p(e){var t=e.settings,a=Object(r.useRef)(),p=Object(r.useState)(Object(o.a)(new Date,t.format,{locale:u.b[u.a.getLanguage()]})),g=Object(i.a)(p,2),f=g[0],h=g[1],m=Object(r.useState)(""),v=Object(i.a)(m,2),b=v[0],y=v[1],S=Object(r.useState)(""),k=Object(i.a)(S,2),O=k[0],j=k[1],E=Object(r.useState)(""),w=Object(i.a)(E,2),C=w[0],x=w[1];return t.style=Object(n.a)({fontSize:"1.5rem",textAlign:"center"},t.style),t.format=t.format||"dd.MM.yyyy HH:mm:ss",t.refresh=t.format.indexOf("s")>-1?1e3:t.format.indexOf("i")>-1?6e4:36e5,Object(r.useEffect)((function(){clearTimeout(a.current),a.current=setTimeout((function(){return h(Object(o.a)(new Date,t.format,{locale:u.b[u.a.getLanguage()]}))}),t.refresh),l.a.getSetting("iobroker").latitude&&l.a.getSetting("iobroker").longitude&&(j(Object(c.getSunrise)(l.a.getSetting("iobroker").latitude,l.a.getSetting("iobroker").longitude)),x(Object(c.getSunset)(l.a.getSetting("iobroker").latitude,l.a.getSetting("iobroker").longitude))),l.a.getSetting("iobroker").city&&y(l.a.getSetting("iobroker").city)}),[t]),s.a.createElement("div",{style:t.style},u.a.t("%DateTime").replace(/%DateTime/,f),!1!==t.sun&&s.a.createElement("div",{style:{margin:"5px 0",fontSize:"1.2rem"}},s.a.createElement("span",{className:"mdi mdi-city-variant-outline"})," ",b||s.a.createElement(d.a,{size:"1.2rem"}),s.a.createElement("span",{style:{margin:"0 10px"}}),s.a.createElement("span",{className:"mdi mdi-weather-sunset-up"})," ",O?Object(o.a)(O,"HH:mm"):s.a.createElement(d.a,{size:"1.2rem"}),s.a.createElement("span",{style:{margin:"0 10px"}}),s.a.createElement("span",{className:"mdi mdi-weather-sunset-down"})," ",C?Object(o.a)(C,"HH:mm"):s.a.createElement(d.a,{size:"1.2rem"})))}var g={noDevicesAllowed:!0,title:u.a.t("Time"),icon:"clock-outline"}},315:function(e,t,a){"use strict";a.r(t),a.d(t,"default",(function(){return E}));var n=a(22),i=a(13),r=a(15),s=a(0),o=a.n(s),c=a(2),l=a(43),u=a.n(l),d=a(624),p=a(627),g=a(616),f=a(626),h=a(10),m=a(28),v=a(6),b=a(619),y=a(41),S=a(91),k=a(227),O=a(185),j=Object(O.a)((function(e){return{map:{width:"100%",height:"100%"},mapOverview:{color:"#666",position:"absolute",left:0,bottom:0,width:"100%",height:"60px",zIndex:999,display:"flex",alignItems:"center","& > *":{margin:e.spacing(1),cursor:"pointer"}},mapIconContainer:{},mapIconParent:{backgroundColor:"#fff",boxShadow:"0 0 0 8px rgba(255, 255, 255, 0.3)",borderRadius:"50%",width:"100%",height:"100%"},mapIcon:{fontSize:"2rem",color:e.palette.primary.main,transform:"translate3d(4px, -4px,0)",display:"block","&:after":{content:'""',display:"block",padding:"50% 0%"}},mapTooltip:{}}}));function E(e){var t=e.settings,a=e.devices,l=j(),u=Object(s.useState)(t.component.defaultZoom),g=Object(r.a)(u,1)[0],f=Object(s.useState)(t.component.defaultPosition?Array.isArray(t.component.defaultPosition)?t.component.defaultPosition:t.component.defaultPosition.split(","):[m.a.getSetting("iobroker").latitude,m.a.getSetting("iobroker").longitude]),O=Object(r.a)(f,1)[0],E=Object(s.useState)({}),C=Object(r.a)(E,2),x=C[0],T=C[1],D=Object(s.useRef)(),N=Object(s.useCallback)((function(){D.current=this}),[]),L=Object(s.useCallback)((function(e){return D.current.flyTo(e.split(","))}),[]),I=function(e,t,a){"position"===e&&T((function(e){return e[a.id]&&e[a.id].position===t.val?e:(a.options.position=t.val,Object(i.a)({},e,Object(n.a)({},a.id,a)))}))};Object(s.useEffect)((function(){return a.forEach((function(e){e.requestDeviceState("position").catch((function(t){h.a._("Modules (Map)",t.message,"error",!0,t.stack),T((function(t){return t[e.id]?t:Object(i.a)({},t,Object(n.a)({},e.id,null))}))})),e.listen(I)})),function(){return a.forEach((function(e){return e.unlisten(I)}))}}),[a]);var A=[],R=[];if(a.length>0&&a.length===Object.keys(x).length){var M=function(e){var a=x[e];if(null!==a){var n=o.a.createElement(w,{key:"marker-"+a.id,position:a.options.position,device:a,settings:t.component});A.push(n);var i=null;if(a.attributes.avatar)i=o.a.createElement(k.a,{key:"overview-"+a.id,alt:a.name,src:a.attributes.avatar,onClick:function(){return L(a.options.position)}});else{var r=a.getDeviceState(),s=a.getIcon(null,r&&void 0!==r.val?r.val:null),l=a.getStyle("icon",null,r&&void 0!==r.val?r.val:null);console.log(r&&void 0!==r.val?r.val:null),console.log(l),i=o.a.createElement(k.a,{style:l,key:"overview-"+a.id,alt:a.name,onClick:function(){return L(a.options.position)}},o.a.createElement("span",{className:Object(c.a)("mdi mdi-"+s)}))}R.push(o.a.createElement(S.a,{key:"tooltip-"+a.id,title:a.name,"aria-label":a.name,arrow:!0},i))}};for(var _ in x)M(_)}return o.a.createElement(o.a.Fragment,null,o.a.createElement(b.a,{className:l.mapOverview},o.a.createElement(y.a,null,v.a.t("Jump to"),":"),R),o.a.createElement(d.a,{useFlyTo:!0,center:O,zoom:g,className:l.map,whenReady:N},o.a.createElement(p.a,{attribution:'&copy <a href="http://osm.org/copyright">OpenStreetMap</a> contributors',url:"https://{s}.tile.osm.org/{z}/{x}/{y}.png"}),A))}function w(e){var t=e.position,a=e.device,n=e.settings,i=j(),r=null,l=40;if(h.a._("Modules (Map)","Marker for "+a.function+" "+a.name+" added to map."),a.attributes&&a.attributes.avatar&&"data:image/"===a.attributes.avatar.substr(0,11))r=u.a.divIcon({className:i.mapIconContainer,html:'<img src="'+a.attributes.avatar+'" class="'+i.mapIconParent+'" />',iconSize:[64,64]});else{l=30;var d=a.getDeviceState(),p=a.getIcon(null,d&&void 0!==d.val?d.val:null),m=a.getStyle("icon",null,d&&void 0!==d.val?d.val:null);console.log(m);var v=Object(O.a)({root:m},{name:"testi"});console.log(v.root),r=u.a.divIcon({className:i.mapIconContainer,html:'<div class="'+Object(c.a)(i.mapIconParent)+'"><span class="'+Object(c.a)(i.mapIcon,"mdi mdi-"+p)+'"></span></div>',iconSize:[40,40]})}var b=Object(s.useCallback)((function(){this.closeTooltip().openTooltip()}),[]);return o.a.createElement(g.a,{riseOnHover:!0,position:Array.isArray(t)?t:t.split(","),icon:r,onMouseOver:b},o.a.createElement(f.a,{className:i.mapTooltip,direction:n.tooltipDirection||"bottom",permanent:n.tooltipPermanent||!0,offset:[0,l]},a.name))}},316:function(e,t,a){"use strict";a.r(t),a.d(t,"default",(function(){return s}));var n=a(0),i=a.n(n),r=a(152);function s(e){return i.a.createElement(r.default,Object.assign({horizontal:!0},e))}},317:function(e,t,a){"use strict";a.r(t),a.d(t,"default",(function(){return f})),a.d(t,"ModuleSettings",(function(){return h}));var n=a(15),i=a(0),r=a.n(i),s=a(10),o=a(54),c=a(6),l=a(344),u=a(55),d=a(41),p=a(185),g=Object(p.a)((function(e){return{paper:{width:100,height:160,padding:5,textAlign:"center"}}}));function f(e){var t=e.settings,a=g(),p=Object(i.useState)(null),f=Object(n.a)(p,2),h=f[0],m=f[1];Object(i.useEffect)((function(){o.a.getConnection.getRemoteResource(t.url).then((function(e){200===e.statusCode&&m(JSON.parse(e.body))}),(function(e){return s.a._("Modules (Weather)",e.message,"error",!0,e.stack)}))}),[t.url]);var v=[];if(!h)return null;for(var b in h.day){var y=h.day[b];y.title=1===b?c.a.t("today"):2===b?c.a.t("tomorrow"):y.name;var S=r.a.createElement(l.a,{key:"day-"+b,item:!0},r.a.createElement(u.a,{className:a.paper},r.a.createElement(d.a,{variant:"body1"},y.title),r.a.createElement(d.a,{variant:"caption"},y.date)));v.push(S)}return r.a.createElement(l.a,{container:!0,justify:"space-between",spacing:1},v)}var h={noDevicesAllowed:!0,title:c.a.t("Weather"),icon:"weather-partly-cloudy"}},318:function(e,t,a){"use strict";a.r(t);var n=a(0),i=a.n(n),r=a(13),s=a(22),o=a(20),c=a(21),l=a(26),u=a(18),d=a(27),p=a(2),g=a(10),f=a(112),h=a(354),m=a(689),v=a(338),b=a.n(v),y=a(337),S=a.n(y),k=a(164),O=a.n(k),j=a(339),E=a.n(j),w=a(340),C=a.n(w),x=a(4),T=function(e){function t(e){var a;return Object(o.a)(this,t),(a=Object(l.a)(this,Object(u.a)(t).call(this,e))).stateChange=function(e,t){"duration"===e&&t&&-1===t.val.indexOf(":")&&(t.val=f.a.timeToHoursMinutesSeconds(t.val)),"isRunning"===e&&t&&"string"===typeof t.val&&(t.val=t.val.indexOf("play")>-1),a.setState(Object(s.a)({},e,t),(function(){a.progress()}))},a.state={},a}return Object(d.a)(t,e),Object(c.a)(t,[{key:"componentDidMount",value:function(){for(var e in this.props.device.states)this.props.device.requestDeviceState(e,!0).catch((function(e){return g.a._("Modules (MultimediaItem)",e.message,"error",!0,e.stack)}));this.props.device.listen(this.stateChange)}},{key:"componentWillUnmount",value:function(){this.props.device.unlisten(this.stateChange)}},{key:"progress",value:function(){var e=this;clearTimeout(this.progressTimeout),this.state.isRunning&&!0===this.state.isRunning.val&&this.state.progress&&this.state.progress.val&&this.state.duration&&this.state.duration.val&&(this.progressTimeout=setTimeout((function(){e.setState((function(e){return{progress:Object(r.a)({},e.progress,{val:f.a.timeToSeconds(e.progress.val)+1})}}),(function(){return e.progress()}))}),1e3))}},{key:"openDialog",value:function(){this.props.openDialog(this.props.device)}},{key:"setDeviceState",value:function(e,t){this.props.device.setDeviceState(e,t).catch((function(e){return g.a._("Modules (MultimediaItem)",e.message,"error",!0,e.stack)}))}},{key:"render",value:function(){var e=this.props,t=e.classes,a=e.noHeader,n=e.index,r=e.device,s={},o={};this.state.background&&""!==this.state.background.val&&(s.backgroundImage="url("+((r.options.backgroundUrlPrepend||"")+this.state.background.val)+")"),this.state.duration&&this.state.duration.val&&(o.width=(this.state.progress&&this.state.progress.val||0)+"px");var c=this.state.isRunning&&this.state.isRunning.val?[i.a.createElement(S.a,{onClick:this.setDeviceState.bind(this,"pause",!0)}),i.a.createElement(O.a,null)]:[i.a.createElement(b.a,{onClick:this.setDeviceState.bind(this,"play",!0)})];return i.a.createElement(i.a.Fragment,null,n>0&&i.a.createElement(h.a,{className:t.divider}),i.a.createElement("div",{className:Object(p.a)(t.container,a&&t.noHeader)},i.a.createElement("div",{className:Object(p.a)(this.state.background&&""!==this.state.background.val?t.image:t.noImage),style:s,onClick:this.openDialog.bind(this)},i.a.createElement("div",{className:t.information},i.a.createElement("p",{className:t.informationLeft},this.state.grandParent&&this.state.grandParent.val&&[this.state.grandParent.val,i.a.createElement("br",{key:"br-"+r.id})],this.state.parent&&this.state.parent.val&&this.state.parent.val+" - ",this.state.title&&this.state.title.val),i.a.createElement("p",{className:t.informationRight},this.state.progress&&f.a.timeToHoursMinutesSeconds(this.state.progress.val)," / ",this.state.duration&&this.state.duration.val))),i.a.createElement("div",{className:t.length,style:{}},i.a.createElement("div",{className:t.lengthBar,style:o})),i.a.createElement("div",{className:t.controls},i.a.createElement("div",{className:Object(p.a)(t.controlsBox,t.controlsBoxLeft)}),i.a.createElement("div",{className:Object(p.a)(t.controlsBox,t.controlsBoxCenter)},i.a.createElement(m.a,{className:t.controlButton,size:"small",color:"secondary"},i.a.createElement(E.a,{onClick:this.setDeviceState.bind(this,"previous",!0)})),c.map((function(e,a){return i.a.createElement(m.a,{key:"icon-"+a,className:t.controlButton,size:"large",color:"primary"},e)})),i.a.createElement(m.a,{className:t.controlButton,size:"small",color:"secondary"},i.a.createElement(C.a,{onClick:this.setDeviceState.bind(this,"next",!0)}))),i.a.createElement("div",{className:Object(p.a)(t.controlsBox,t.controlsBoxRight)}))))}}]),t}(i.a.Component),D=Object(x.a)((function(e){return{divider:{margin:"15px -16px"},container:{margin:e.spacing(0,-2)},noHeader:{marginTop:e.spacing(-4)},image:{height:"200px",display:"flex",alignItems:"flex-end",backgroundPosition:"center",cursor:"pointer"},noImage:{backgroundColor:e.palette.primary.main,display:"flex",cursor:"pointer"},information:{backgroundColor:e.palette.primary.main+"66",color:"#fff",padding:"10px",margin:0,width:"100%",minHeight:"45px"},informationLeft:{width:"80%",float:"left",margin:0},informationRight:{width:"19%",float:"right",margin:0,textAlign:"right"},length:{backgroundColor:e.palette.primary.main,width:"100%",height:"7px"},lengthBar:{backgroundColor:e.palette.secondary.main,height:"100%"},controls:{display:"flex",alignItems:"stretch"},controlsBox:{display:"flex",justifyContent:"center",alignItems:"center",paddingTop:"30px"},controlsBoxLeft:{flex:1,flexDirection:"column",alignItems:"baseline"},controlsBoxCenter:{flex:3},controlsBoxRight:{flex:1,justifyContent:"end"},controlButton:{margin:"0 5px"},controlButtonSmall:{margin:"0 10px",fontSize:"1.2rem",height:"32px",width:"32px"}}}))(T);function N(e){var t=e.devices,a=e.settings;return t.map((function(t,n){return i.a.createElement(D,Object.assign({key:"MultimediaItem-"+t.id},e,{index:n,noHeader:0===n&&null===a.icon&&null===a.title,device:t}))}))}a.d(t,"default",(function(){return N}))},373:function(e,t,a){e.exports=a(604)},378:function(e,t,a){},379:function(e,t,a){var n={"./de.js":380,"./en.js":381};function i(e){var t=r(e);return a(t)}function r(e){if(!a.o(n,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return n[e]}i.keys=function(){return Object.keys(n)},i.resolve=r,e.exports=i,i.id=379},380:function(e,t,a){"use strict";a.r(t),t.default={"Retrieving settings":"Einstellungen werden geladen","last update":"letzte Aktualisierung","Updates available":"Aktualisierung verf\xfcgbar",on:"an",off:"aus",user:"User",users:"Users",door:"T\xfcr",window:"Fenster",open:"offen",closed:"geschlossen","turn on":"anschalten",power:"Ger\xe4te Status",trigger:"Ger\xe4te Status",brightness:"Helligkeit",wind:"Wind",battery:"Batterie","%DateTime":"%DateTime Uhr",running:"Ger\xe4t l\xe4uft",consumption:"Verbrauch"}},381:function(e,t,a){"use strict";a.r(t),t.default={}},413:function(e,t){},421:function(e,t,a){var n={"./blind.de":265,"./blind.de.js":265,"./blind.en":266,"./blind.en.js":266,"./blind.js":222};function i(e){var t=r(e);return a(t)}function r(e){if(!a.o(n,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return n[e]}i.keys=function(){return Object.keys(n)},i.resolve=r,e.exports=i,i.id=421},422:function(e,t,a){"use strict";a.r(t);var n=a(198);a.d(t,"default",(function(){return n.default}))},423:function(e,t,a){var n={"./door.de":267,"./door.de.js":267,"./door.en":268,"./door.en.js":268,"./door.js":198};function i(e){var t=r(e);return a(t)}function r(e){if(!a.o(n,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return n[e]}i.keys=function(){return Object.keys(n)},i.resolve=r,e.exports=i,i.id=423},424:function(e,t,a){"use strict";a.r(t);var n=a(199);a.d(t,"default",(function(){return n.default}))},425:function(e,t,a){var n={"./heating.de":269,"./heating.de.js":269,"./heating.en":270,"./heating.en.js":270,"./heating.js":199};function i(e){var t=r(e);return a(t)}function r(e){if(!a.o(n,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return n[e]}i.keys=function(){return Object.keys(n)},i.resolve=r,e.exports=i,i.id=425},426:function(e,t,a){"use strict";a.r(t);var n=a(221);a.d(t,"default",(function(){return n.default}))},47:function(e,t,a){"use strict";a.r(t);var n=a(40),i=a(15),r=a(22),s=a(13),o=a(0),c=a.n(o),l=a(2),u=a(10),d=a(6),p=a(629),g=a(345),f=a(100),h=a(185),m=a(4),v=Object(h.a)((function(e){return{component:{padding:e.spacing(2,0,2,0)},sliderMarkLabel:Object(r.a)({},e.breakpoints.down("md"),{display:"none","&:nth-child(5)":{display:"block"},"&:nth-child(15)":{display:"block"},"&:nth-child(25)":{display:"block"}})}})),b=Object(m.a)((function(e){return{primaryAction:function(e){return Object(s.a)({},e.styles)},secondaryAction:function(e){return Object(s.a)({color:"#999",fontSize:"14px"},e.styles)}}}))((function(e){var t=e.classes,a=e.device,n=e.state,i=e.stateKey;return c.a.createElement("span",{className:Object(l.a)(i===a.primaryStateKey&&t.primaryAction||i===a.secondaryStateKey&&t.secondaryAction)},n&&n.value," ",n&&n.unit)}));function y(e){var t=e.device,a=e.stateKey,n=e.stateVal,r=e.onChange,s=Object(o.useState)(n),l=Object(i.a)(s,2),d=l[0],p=l[1];return Object(o.useEffect)((function(){return p(n)}),[n]),c.a.createElement(g.a,{checked:d,onChange:r||function(e){p(e.target.checked),t.setDeviceState(a,e.target.checked).catch((function(e){return u.a._("Function (defaults)",e.message,"error",!0,e.stack)}))},value:!0!==d,color:"primary"})}function S(e){var t=e.device,a=e.stateKey,n=e.stateVal;if(!0===n||n>0)return c.a.createElement(b,Object.assign({},e,{onChange:null}));return c.a.createElement(f.a,{variant:"outlined",color:"primary",size:"small",startIcon:c.a.createElement("span",{className:"mdi mdi-power"}),onClick:function(){t.setDeviceState(a,!0).catch((function(e){return u.a._("Function (defaults)",e.message,"error",!0,e.stack)}))}},d.a.t("turn on"))}function k(e){var t=e.label,a=e.br||!1;return c.a.createElement(c.a.Fragment,null,t,a&&c.a.createElement("br",null))}function O(e){var t=e.title,a=e.children,n=v();return c.a.createElement(c.a.Fragment,null,c.a.createElement(k,{label:t}),c.a.createElement("div",{className:n.component},a))}function j(e){var t=e.device,a=e.stateKey,r=e.stateVal,s=e.title,l=e.min,d=e.max,g=e.step,f=e.markSteps,h=v(),m=Object(o.useState)(r),b=Object(i.a)(m,2),y=b[0],S=b[1];Object(o.useEffect)((function(){return S(r)}),[r]),g=g||1;var k=((d=d||100)-(l=l||0))/((f=f||11)-1)||10;return c.a.createElement(O,{title:s||a},c.a.createElement(p.a,{classes:{markLabel:h.sliderMarkLabel},onChange:function(e,t){return S(t)},onChangeCommitted:function(e,n){S(n),t.setDeviceState(a,n).catch((function(e){return u.a._("Function (defaults)",e.message,"error",!0,e.stack)}))},value:y,valueLabelDisplay:"auto",marks:Object(n.a)(Array(f).keys()).map((function(e){return{value:l+e*k,label:l+e*k}})),min:l,max:d,step:g}))}t.default={configurations:{_any:{value:function(e){return e.toString()}},battery:{unit:" %",icon:"battery-medium"},door:{icon:{true:"door-open",false:"door-closed"},state:{true:"open",false:"closed"}},humidity:{unit:" %",icon:"water-percent"},level:{unit:" %"},position:{icon:"map-marker"},power:{state:{true:"on",false:"off"},icon:"power"},temperature:{unit:" \xb0C",icon:"thermometer"},trigger:{state:{true:"on",false:"off"},icon:"power"},wind:{unit:" km/h",icon:"weather-windy"}},components:{Label:k,Component:O,LevelComponent:j,level:j},actions:{Action:b,PowerAction:y,TriggerAction:S,power:y,trigger:S},styles:{_any:{state:{true:{color:"#090",fontWeight:"bold"},false:{color:"#999"}}}}}},54:function(e,t,a){"use strict";var n=a(20),i=a(21),r=a(13),s=a(26),o=a(18),c=a(27),l=a(160),u=a.n(l),d=a(323),p=a.n(d),g=(a(10),function(e){function t(){var e,a=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object(n.a)(this,t),(e=Object(s.a)(this,Object(o.a)(t).call(this))).socket=p()(a,Object(r.a)({timeout:1e4},i,{query:"ws=true"})),e.statesSubscribes={},e.socket.on("connect",(function(){return e.emit("connect")})),e.socket.on("reconnect",(function(t){return e.emit("reconnect",t)})),e.socket.on("reconnect_error",(function(t){return e.emit("error",{type:"reconnect",event:"reconnect_error",message:t.message})})),e.socket.on("reconnect_failed",(function(){return e.emit("error",{type:"reconnect",event:"reconnect_failed",message:"Reconnection failed!"})})),e.socket.on("disconnect",(function(t){return e.emit("disconnect",t)})),e.socket.on("connect_error",(function(t){return e.emit("error",{type:"connect",event:"connect_error",message:t.message})})),e.socket.on("connect_timeout",(function(){return e.emit("error",{type:"connect",event:"connect_timeout",message:"Connect ran into timeout!"})})),e.socket.on("error",(function(t){return e.emit("error",{type:"error",event:"error",message:t.message})})),e.socket.on("stateChange",(function(t,a){return setTimeout((function(){return e.stateChange(t,a)}),0)})),e}return Object(c.a)(t,e),Object(i.a)(t,[{key:"_getPatternFromId",value:function(e){var t=e.replace(/\./g,"\\.").replace(/\*/g,".*").replace(/\(/g,"\\(").replace(/\)/g,"\\)").replace(/\+/g,"\\+").replace(/\[/g,"\\[");return-1===t.indexOf("*")&&(t+="$"),t}},{key:"subscribeStates",value:function(e,t){var a=this;(e=Array.isArray(e)?e:[e]).forEach((function(e){return a.subscribeState(e,t)}))}},{key:"subscribeState",value:function(e,t){if(this.statesSubscribes[e])-1===this.statesSubscribes[e].cbs.indexOf(t)&&this.statesSubscribes[e].cbs.push(t);else{var a=this._getPatternFromId(e);this.statesSubscribes[e]={reg:new RegExp(a),cbs:[t]},this.socket.connected&&this.socket.emit("subscribe",e)}}},{key:"stateChange",value:function(e,t){for(var a in e=e?e.replace(/[\s'"]/g,"_"):"",this.statesSubscribes)this.statesSubscribes.hasOwnProperty(a)&&this.statesSubscribes[a].reg.test(e)&&this.statesSubscribes[a].cbs.forEach((function(a){return a(e,t)}))}},{key:"getAdapterInstances",value:function(e,t){return"function"===typeof e&&(t=e,e=null),this.getObjectView("system","instance",{startkey:"system.adapter."+(e?e+".":""),endkey:"system.adapter."+(e?e+".999":"zzz")},t)}},{key:"getObject",value:function(e,t){var a=this;if(!t)return new Promise((function(t,n){return a.getObject(e,(function(e,a){return e?n(e):t(a)}))}));this.socket.emit("getObject",e,t)}},{key:"getObjectView",value:function(e,t,a,n){var i=this;if(!n)return new Promise((function(n,r){return i.getObjectView(e,t,a,(function(e){return e?r(e):n()}))}));this.socket.emit("getObjectView",e,t,a,n)}},{key:"getRemoteResource",value:function(e,t){var a=this;if(!t)return new Promise((function(t,n){return a.getRemoteResource(e,(function(e,a){return e?n(e):t(a)}))}));this.socket.emit("httpGet",e,t)}},{key:"getState",value:function(e,t){var a=this;if(!t)return new Promise((function(t,n){return a.getState(e,(function(e,a){return e?n(e):t(a)}))}));this.socket.emit("getState",e,t)}},{key:"getStates",value:function(e,t){var a=this;if(!t)return new Promise((function(t,n){return a.getStates(e,(function(e,a){return e?n(e):t(a)}))}));this.socket.emit("getStates",e,t)}},{key:"getStateHistory",value:function(e,t,a){var n=this;if("function"===typeof t&&(a=t,t={}),!a)return new Promise((function(a,i){return n.getStateHistory(e,t,(function(e,t){return e?i(e):a(t)}))}));this.socket.emit("getHistory",e,t,a)}},{key:"setState",value:function(e,t,a){var n=this;if(!a)return new Promise((function(a,i){return n.setState(e,t,(function(e){return e?i(e):a()}))}));this.socket.emit("setState",e,t,a)}},{key:"unsubscribeStates",value:function(e){var t=this;(e=Array.isArray(e)?e:[e]).forEach((function(e){return t.unsubscribeState(e)}))}},{key:"unsubscribeState",value:function(e){this.statesSubscribes[e]&&this.socket.connected&&(this.socket.emit("unsubscribe",e),delete this.statesSubscribes[e])}}]),t}(u.a));a.d(t,"a",(function(){return f}));var f=function(){function e(){Object(n.a)(this,e)}return Object(i.a)(e,null,[{key:"connect",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return t&&(e.setUrl=t),e.connection=new g(e.url),a&&(e.setListeners=a),e.connection}},{key:"getConnection",get:function(){return e.connection||null}},{key:"getUrl",get:function(){return e.url}},{key:"reconnect",get:function(){return e.connect}},{key:"setListener",set:function(t){e.connection.on(t.event,t.callback)}},{key:"setListeners",set:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return!(!t||!Array.isArray(t))&&(t.forEach((function(t){return e.setListener=t})),!0)}},{key:"setUrl",set:function(t){e.url=t}}]),e}();f.url=window.location.hostname,f.connection=null},588:function(e,t,a){var n={"./light.de":304,"./light.de.js":304,"./light.en":305,"./light.en.js":305,"./light.js":221};function i(e){var t=r(e);return a(t)}function r(e){if(!a.o(n,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return n[e]}i.keys=function(){return Object.keys(n)},i.resolve=r,e.exports=i,i.id=588},589:function(e,t,a){"use strict";a.r(t);var n=a(218);a.d(t,"default",(function(){return n.default}))},590:function(e,t,a){var n={"./location.de":306,"./location.de.js":306,"./location.en":307,"./location.en.js":307,"./location.js":218};function i(e){var t=r(e);return a(t)}function r(e){if(!a.o(n,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return n[e]}i.keys=function(){return Object.keys(n)},i.resolve=r,e.exports=i,i.id=590},591:function(e,t,a){"use strict";a.r(t);var n=a(219);a.d(t,"default",(function(){return n.default}))},592:function(e,t,a){var n={"./user.de":308,"./user.de.js":308,"./user.en":309,"./user.en.js":309,"./user.js":219};function i(e){var t=r(e);return a(t)}function r(e){if(!a.o(n,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return n[e]}i.keys=function(){return Object.keys(n)},i.resolve=r,e.exports=i,i.id=592},593:function(e,t,a){"use strict";a.r(t);var n=a(220);a.d(t,"default",(function(){return n.default}))},594:function(e,t,a){var n={"./window.de":310,"./window.de.js":310,"./window.en":311,"./window.en.js":311,"./window.js":220};function i(e){var t=r(e);return a(t)}function r(e){if(!a.o(n,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return n[e]}i.keys=function(){return Object.keys(n)},i.resolve=r,e.exports=i,i.id=594},595:function(e,t,a){"use strict";a.r(t);var n=a(22),i=a(13),r=a(20),s=a(21),o=a(26),c=a(18),l=a(27),u=a(0),d=a.n(u),p=a(2),g=a(98),f=a(54),h=a(28),m=a(6),v=a(348),b=a(349),y=a(350),S=a(100),k=a(55),O=a(621),j=a(186),E=a(114),w=a(84),C=a.n(w),x=a(608),T=a(607),D=a(115),N=a(625),L=a(614),I=a(613),A=a(41),R=a(165),M=a.n(R),_=a(102),P=a(346),F=a(612),U=a(347),B=a(345),H=a(226),K=a(623),z=a(356),V=a(101),W=a(177),G=a(4),J=[{id:"name",disablePadding:!0,label:m.a.t("Name")},{id:"function",disablePadding:!1,label:m.a.t("Function")},{id:"states",disablePadding:!1,label:m.a.t("States")},{id:"jarvis",disablePadding:!1,label:m.a.t("Jarvis")},{id:"attributes",disablePadding:!1,label:m.a.t("Attributes")}],q=function(e){function t(e){var a;return Object(r.a)(this,t),(a=Object(o.a)(this,Object(c.a)(t).call(this,e))).handleTabChange=function(e,t){return a.setState({tab:t})},a.handlePanelChange=function(e){return function(t,n){return a.setState({panel:!!n&&e})}},a.handleSwitchChange=function(e){return function(t){var r=t&&t.target&&t.target.checked||!1;a.setState((function(t){return{settings:Object(i.a)({},t.settings,Object(n.a)({},e,r))}}))}},a.handleTextChange=function(e){return function(t){var r=t&&t.target&&t.target.value||"";e?a.setState((function(t){return{settings:Object(i.a)({},t.settings,Object(n.a)({},e,r))}})):a.setState({settings:JSON.parse(r)})}},a.save=function(){h.a.setSettings(a.state.settings),f.a.getConnection.setState(g.a.SETTINGS,JSON.stringify(h.a.settings)).then((function(){return window.location.reload()})).catch((function(e){return console.error(e)}))},a.renderTableForDevices=function(e){e.columns,e.pageRows,e.emptyRows;var t=e.selected;e.onClick;return d.a.createElement(x.a,null,a.rows.map((function(a,n){var i,r=(i=a.id,-1!==t.indexOf(i)),s="device-".concat(n);return d.a.createElement(T.a,{hover:!0,onClick:function(t){return e.onClick(t,a.id)},role:"checkbox","aria-checked":r,tabIndex:-1,key:a.id,selected:r},d.a.createElement(D.a,{padding:"checkbox"},d.a.createElement(K.a,{checked:r,inputProps:{"aria-labelledby":s}})),d.a.createElement(D.a,{id:s,scope:"row"},d.a.createElement(_.a,{InputProps:{disableUnderline:!0},style:{width:400},value:a.name})),d.a.createElement(D.a,{id:s,scope:"row"},d.a.createElement(_.a,{InputProps:{disableUnderline:!0},style:{width:400},value:a.function})),d.a.createElement(D.a,{id:s,scope:"row"},d.a.createElement(_.a,null)),d.a.createElement(D.a,{id:s,scope:"row"},d.a.createElement(_.a,null)),d.a.createElement(D.a,{id:s,scope:"row"},d.a.createElement(_.a,null)))})))},delete h.a.settings.iobroker,a.state={tab:0,panel:!1,settings:h.a.settings||{}},a.rows=Object.keys(a.props.devices).map((function(e){return Object(i.a)({id:e},a.props.devices[e])})),a}return Object(l.a)(t,e),Object(s.a)(t,[{key:"renderSettingForSelect",value:function(e,t){var a=this.props.classes;t.options=t.options||{};var n=Object.keys(t.options).map((function(a){return d.a.createElement(V.a,{key:"MenuItem-"+e+"-"+a,value:a},t.options[a])}));return d.a.createElement(P.a,{key:"FormControl-"+e,className:a.formControl},d.a.createElement(z.a,null,t.label),d.a.createElement(H.a,{key:"Select-"+e,className:a.input,value:this.state.settings[e]||t.default||"",onChange:this.handleTextChange(e)},n),d.a.createElement(U.a,null,t.helperText||""))}},{key:"renderSettingForText",value:function(e,t){var a=this.props.classes;return d.a.createElement(_.a,{key:"TextField-"+e,className:Object(p.a)(a.input,a.textField),label:t.label,placeholder:t.default||"",helperText:t.helperText||"",onChange:this.handleTextChange(e),value:this.state.settings[e]||""})}},{key:"renderSettingForSwitch",value:function(e,t){return d.a.createElement(F.a,{key:"FormControlLabel-"+e,control:d.a.createElement(B.a,{checked:void 0!==this.state.settings[e]?this.state.settings[e]:t.default||!1,onChange:this.handleSwitchChange(e)}),label:t.label})}},{key:"renderSetting",value:function(e,t){switch(t.type){case"text":return this.renderSettingForText(e,t);case"switch":return this.renderSettingForSwitch(e,t);case"select":return this.renderSettingForSelect(e,t);default:return null}}},{key:"renderPanel",value:function(e,t){var a=this,n=this.props.classes,i=Object.keys(t.settings).map((function(e){return a.renderSetting(e,t.settings[e])}));return d.a.createElement(N.a,{key:"ExpansionPanel-"+e,expanded:this.state.panel===e,onChange:this.handlePanelChange(e)},d.a.createElement(I.a,{expandIcon:d.a.createElement(M.a,null),id:"panel-header-"+e},d.a.createElement(A.a,{className:n.heading},t.label),t.description&&d.a.createElement(A.a,{className:n.secondaryHeading},t.description)),d.a.createElement(L.a,null,i))}},{key:"render",value:function(){var e=this,t=this.props.classes,a=Object.keys(g.b).map((function(t){return e.renderPanel(t,g.b[t])}));return d.a.createElement(d.a.Fragment,null,d.a.createElement(v.a,{disableTypography:!0},d.a.createElement(A.a,{variant:"h6"},"Configuration"),d.a.createElement(E.a,{"aria-label":"close",className:t.closeButton,onClick:function(){return e.props.onClose()}},d.a.createElement(C.a,null))),d.a.createElement(b.a,{className:t.dialogContent},d.a.createElement(k.a,{square:!0},d.a.createElement(O.a,{className:t.tabs,value:this.state.tab,indicatorColor:"primary",textColor:"primary",onChange:this.handleTabChange},d.a.createElement(j.a,{label:"Devices"}),d.a.createElement(j.a,{label:"Settings"}),d.a.createElement(j.a,{label:"Layout"}),d.a.createElement(j.a,{label:["Settings & Layout",d.a.createElement("br",{key:"tab"}),"Raw Editor"]}))),d.a.createElement("div",{hidden:0!==this.state.tab},d.a.createElement(k.a,{className:t.paper},d.a.createElement(W.a,{title:"Devices",headCells:J,rows:this.rows,CustomTableBody:this.renderTableForDevices}))),d.a.createElement("div",{hidden:1!==this.state.tab,style:{width:"100%"}},d.a.createElement(k.a,{className:t.title},d.a.createElement(A.a,{variant:"h6",id:"tableTitle"},m.a.t("Settings"))),a),d.a.createElement("div",{hidden:2!==this.state.tab},"Layout"),d.a.createElement("div",{hidden:3!==this.state.tab,style:{width:"100%"}},d.a.createElement(k.a,{className:t.paper},d.a.createElement(A.a,{className:t.title,variant:"h6",id:"tableTitle"},m.a.t("Raw Editor")),d.a.createElement(_.a,{InputProps:{className:t.rawEditor},key:"TextField-Raw",multiline:!0,fullWidth:!0,onChange:this.handleTextChange(null),value:JSON.stringify(this.state.settings,null,3)})))),d.a.createElement(y.a,null,d.a.createElement(S.a,{autoFocus:!0,onClick:function(){return e.props.onClose()},color:"secondary"},m.a.t("Cancel")),d.a.createElement(S.a,{onClick:this.save,color:"primary"},m.a.t("Save"))))}}]),t}(d.a.Component);t.default=Object(G.a)((function(e){return{tabs:{marginBottom:"10px"},heading:{fontSize:e.typography.pxToRem(15),flexBasis:"33.33%",flexShrink:0},secondaryHeading:{fontSize:e.typography.pxToRem(15),color:e.palette.text.secondary},closeButton:{position:"absolute",right:e.spacing(1),top:e.spacing(1),color:e.palette.grey[500]},dialogContent:{backgroundColor:"#fafafa"},title:{paddingLeft:e.spacing(2),paddingRight:e.spacing(1),minHeight:"64px",display:"flex",position:"relative",alignItems:"center"},input:{width:300},textField:{marginLeft:e.spacing(1),marginRight:e.spacing(1)},rawEditor:{fontFamily:"Roboto Mono,Consolas,Courier New,monospace !important"}}}))(q)},596:function(e,t,a){"use strict";a.r(t);var n=a(20),i=a(21),r=a(26),s=a(18),o=a(27),c=a(0),l=a.n(c),u=a(10),d=a(6),p=a(348),g=a(349),f=a(350),h=a(55),m=a(41),v=a(100),b=a(114),y=a(84),S=a.n(y),k=a(177),O=a(4),j=[{id:"time",type:"Date",label:d.a.t("Time"),noWrap:!0},{id:"module",label:d.a.t("Module"),noWrap:!0},{id:"criticality",label:d.a.t("Criticality"),noWrap:!0},{id:"message",label:d.a.t("Message")},{id:"stack",type:"Object",label:d.a.t("Stack Trace")}],E={criticality:{debug:{color:"rgba(0, 0, 0, 0.4)",backgroundColor:"rgba(0, 0, 0, 0.1)"},info:{color:"rgb(13, 60, 97)",backgroundColor:"rgb(232, 244, 253)"},warn:{color:"rgb(102, 60, 0)",backgroundColor:"rgb(255, 244, 229)"},error:{color:"rgb(97, 26, 21)",backgroundColor:"rgb(253, 236, 234)"},success:{color:"rgb(30, 70, 32)",backgroundColor:"rgb(237, 247, 237)"}}},w=function(e){function t(){return Object(n.a)(this,t),Object(r.a)(this,Object(s.a)(t).apply(this,arguments))}return Object(o.a)(t,e),Object(i.a)(t,[{key:"render",value:function(){var e=this,t=this.props.classes,a=u.a.getLog();return l.a.createElement(l.a.Fragment,null,l.a.createElement(p.a,{disableTypography:!0},l.a.createElement(m.a,{variant:"h6"},"Logs"),l.a.createElement(b.a,{"aria-label":"close",className:t.closeButton,onClick:function(){return e.props.onClose()}},l.a.createElement(S.a,null))),l.a.createElement(g.a,{className:t.dialogContent},l.a.createElement(h.a,{className:t.paper},l.a.createElement(k.a,{selectable:!1,headCells:j,rows:a,rowStyles:E}))),l.a.createElement(f.a,null,l.a.createElement(v.a,{autoFocus:!0,onClick:function(){return e.props.onClose()},color:"primary"},d.a.t("Close"))))}}]),t}(l.a.Component);t.default=Object(O.a)((function(e){return{closeButton:{position:"absolute",right:e.spacing(1),top:e.spacing(1),color:e.palette.grey[500]},dialogContent:{backgroundColor:"#fafafa"}}}))(w)},6:function(e,t,a){"use strict";a.d(t,"b",(function(){return o})),a.d(t,"a",(function(){return c}));var n=a(13),i=a(20),r=a(21),s=a(10),o={de:a(622).a},c=function(){function e(){Object(i.a)(this,e)}return Object(r.a)(e,null,[{key:"setLanguage",value:function(t){return!!t&&(e.language=t,s.a._("i18n","Set language to "+t+"."),!0)}},{key:"loadTranslations",value:function(t){return!!t&&((t=Array.isArray(t)?t:[t]).forEach((function(t){return e.loadTranslation(t)})),!0)}},{key:"loadTranslation",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e.getLanguage();if(t){var n;try{n=a(379)("./"+t+".js").default,e.setTranslation(t,n)}catch(i){return s.a._("i18n",i.message,"error",!1,i.stack),!1}return!0}return!1}},{key:"setTranslation",value:function(t,a){return!(!t||!a)&&(e.translations[t]=Object(n.a)({},e.translations[t]||{},{},a),s.a._("i18n","Set translations for language "+t+".","debug"),!0)}},{key:"getLanguage",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return e.language.substr(0,t?5:2)}},{key:"t",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e.getLanguage();if(t=t.toString(),e.translations[i]){if(t.indexOf("#")>-1){for(var r=t.split("#");r.length>0&&!e.translations[i][r.join("#")];)r.shift();t=r.join("#")}e.translations[i][t]?t=e.translations[i][t]:s.a._("i18n",'Word "'+t+'" not found in language '+i+"!","debug",!1)}else s.a._("i18n","Language "+i+" not loaded for word "+t+"!","error");for(var o in n)t=t.replace(RegExp("%"+o+"%","g"),n[o]);return a.ucFirst&&(t=t.charAt(0).toUpperCase()+t.slice(1)),t}}]),e}();c.translations={},c.language=navigator.language||navigator.userLanguage||"en-EN"},604:function(e,t,a){"use strict";a.r(t);var n=a(0),i=a.n(n),r=a(24),s=a.n(r),o=(a(378),a(40)),c=a(13),l=a(20),u=a(21),d=a(26),p=a(18),g=a(27),f=a(22),h=a(98),m=a(344),v=a(125),b=a(41),y=a(694),S=a(10),k=a(185),O=Object(k.a)((function(e){return{gridContainer:Object(f.a)({paddingLeft:e.spacing(1)},e.breakpoints.down("md"),{paddingLeft:e.spacing(.4)})}}));function j(e){for(var t=e.contents,a=void 0===t?{}:t,n=O(),r=Object.keys(a).length,s=[],o=1;o<=r;o++)a[o]?s.push(i.a.createElement(m.a,{key:o,item:!0,xs:12,sm:6,md:6,lg:Math.round(12/r),xl:Math.round(12/r)},a[o])):S.a._("GridContainer","No content for column #"+o+"!","warn");return i.a.createElement(m.a,{container:!0,spacing:0,className:n.gridContainer},s)}var E=a(110),w=a(2),C=a(698),x=a(680),T=a(114),D=a(84),N=a.n(D),L=a(319),I=a.n(L),A=a(320),R=a.n(A),M=a(321),_=a.n(M),P=a(322),F=a.n(P),U=a(182),B=a(679),H=Object(k.a)((function(e){return{success:{backgroundColor:U.a[600]},error:{backgroundColor:e.palette.error.dark},info:{backgroundColor:e.palette.primary.main},warning:{backgroundColor:B.a[700]},icon:{fontSize:20},iconVariant:{opacity:.9,marginRight:e.spacing(1)},message:{display:"flex",alignItems:"center"}}})),K={success:I.a,warning:R.a,error:_.a,info:F.a};function z(e){var t=H(),a=e.className,n=e.open,r=e.autoHideDuration,s=e.message,o=e.closeButton,c=e.onClose,l=e.variant,u=Object(E.a)(e,["className","open","autoHideDuration","message","closeButton","onClose","variant"]),d=K[l];return n=n||!0,r=r||null,i.a.createElement(C.a,{anchorOrigin:{vertical:"bottom",horizontal:"center"},open:n,autoHideDuration:r,onClose:c},i.a.createElement(x.a,Object.assign({className:Object(w.a)(t[l],a),message:i.a.createElement("span",{id:"client-snackbar",className:t.message},i.a.createElement(d,{className:Object(w.a)(t.icon,t.iconVariant)}),s),action:o&&[i.a.createElement(T.a,{key:"close","aria-label":"close",color:"inherit",onClick:c},i.a.createElement(N.a,{className:t.icon}))]},u)))}var V="https://192.168.178.29:8082",W=a(6),G=a(54),J=a(28),q=a(70),Z=a(160),Y=a.n(Z),$={defaults:a(47).default,blind:a(262).default,door:a(422).default,heating:a(424).default,jalousie:a(262).default,light:a(426).default,location:a(589).default,user:a(591).default,window:a(593).default},Q=function(e){function t(e){var a;if(Object(l.a)(this,t),(a=Object(d.a)(this,Object(p.a)(t).call(this))).function=e,!a.function)throw new Error("No function given!");return a.functionId=a.function.toLowerCase(),a.defaults=$.defaults.configurations,a.configurations=$[a.functionId]&&$[a.functionId].configurations||{},a.defaultStyles=$.defaults.styles,a.styles=$[a.functionId]&&$[a.functionId].styles||{},a.components=Object(c.a)({},$.defaults.components,{},$[a.functionId]&&$[a.functionId].components||{}),a.actions=Object(c.a)({},$.defaults.actions,{},$[a.functionId]&&$[a.functionId].actions||{}),a}return Object(g.a)(t,e),Object(u.a)(t,[{key:"_applyFunction",value:function(e,t){return this._isFunction(e)?e(t):t}},{key:"_getValueFromSettings",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";for(var a in e)if(void 0!==e[a])return e[a];return t}},{key:"_isFunction",value:function(e){return e&&"function"===typeof e}},{key:"_isValue",value:function(e){return void 0!==e}},{key:"_setObjectStructure",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;return e&&"object"==typeof e?"object"!=typeof e||e.default||(e.default=t):e={default:e||t},e}}]),t}(Y.a),X={"hm-rpc":"HomeMatic",shelly:"Shelly",sonoff:"Sonoff"},ee=a(696),te=function(e){function t(e,a){var n;Object(l.a)(this,t);try{n=Object(d.a)(this,Object(p.a)(t).call(this,e.function))}catch(i){throw new Error("No function given for device "+e.name+"!")}if(n.id=e.id,n.name=e.name,n.room=e.room||null,n.states=e.states,n.options=e.options,n.attributes=e.attributes||{},n.socket=a,!n.options||"object"!==typeof n.options||0===Object.keys(n.options).length)throw new Error("Device"+(e.id||e.name?" "+(e.name||e.id):"")+" not defined for jarvis!");if(!n.states||"object"!==typeof n.states||0===Object.keys(n.states).length)throw new Error("Insufficent properties provided"+(e.id||e.name?" for device "+(e.name||e.id):"")+" (no states defined)!");if(!(n.id&&n.name&&n.function))throw new Error("Insufficent properties provided"+(e.id||e.name?" for device "+(e.name||e.id):"")+" (no id, name or function defined)!");if(!n.socket)throw new Error("No socket given!");return n.children=e.children||[],n.parent=e.parent||null,n._setProperties(),n.stateSubscriptions=[],n.on("error",(function(e){return S.a._("Device",["Device error occured!",e.message],"error",!1,e.stack)})),n}return Object(g.a)(t,e),Object(u.a)(t,[{key:"_getStateFromKey",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"state";if(e&&"object"===typeof e)return e;var a=this.states[e||this.primaryStateKey];return void 0===a?W.a.t("State does not exist in device %device%").replace(/%device%/g,this.name)+"!":("string"===typeof a?(this.states[e||this.primaryStateKey]=Object(f.a)({},t,{node:a}),a=this.states[e||this.primaryStateKey]):"string"===typeof a[t]&&(this.states[e||this.primaryStateKey][t]={node:a[t]},a=this.states[e||this.primaryStateKey]),a&&a[t]?"object"!=typeof a[t]||a[t].node?a:W.a.t("No %stateType% specified for device %device%").replace(/%device%/g,this.name).replace(/%stateType%/g,t)+"!":W.a.t("Incorrect or non-defined state key for device %device%").replace(/%device%/g,this.name).replace(/%stateType%/g,t)+"!")}},{key:"_getConfigurationSetting",value:function(e,a,n,i){var r=this;if(this[e][a]){if("object"===typeof this[e][a][n]){var s=Object.keys(this[e][a][n]);if(s.toString().indexOf("<")>-1||s.toString().indexOf(">")>-1||s.toString().indexOf("!=")>-1){var o=this[e][a][n].default;return s.forEach((function(t){var c=t.replace("<=","").replace("<","").replace(">=","").replace(">","").replace("!=","");t.indexOf("<=")>-1&&i<=c?o=r[e][a][n][t]:t.indexOf("<")>-1&&i<c?o=r[e][a][n][t]:t.indexOf(">=")>-1&&i>=c?o=r[e][a][n][t]:t.indexOf(">")>-1&&i>c?o=r[e][a][n][t]:s.toString().indexOf("!=")>-1&&i!=c&&(o=r[e][a][n][t])})),o}return Object(q.a)(Object(p.a)(t.prototype),"_isValue",this).call(this,this[e][a][n][i])?this[e][a][n][i]:this[e][a][n].default}if(Object(q.a)(Object(p.a)(t.prototype),"_isFunction",this).call(this,this[e][a][n]))return this[e][a][n](i,a,this);if("string"===typeof this[e][a][n])return this[e][a][n]}else if(this[e]._any){if("object"===typeof this[e]._any[n])return Object(q.a)(Object(p.a)(t.prototype),"_isValue",this).call(this,this[e]._any[n][i])?this[e]._any[n][i]:this[e]._any[n].default;if(Object(q.a)(Object(p.a)(t.prototype),"_isFunction",this).call(this,this[e]._any[n]))return this[e]._any[n](i,a,this)}}},{key:"_getUserSetting",value:function(e,a,n){var i=arguments.length>3&&void 0!==arguments[3]&&arguments[3],r=this.options;if(i){r=this.options.styles;var s=a;a=e,e=s}if(r[a]&&r[a][e])return"object"===typeof r[a][e]?Object(q.a)(Object(p.a)(t.prototype),"_isValue",this).call(this,r[a][e][n])?r[a][e][n]:r[a][e].default:Object(q.a)(Object(p.a)(t.prototype),"_isFunction",this).call(this,r[a][e])?r[a][e](n,e,this):r[a][e]}},{key:"_setProperties",value:function(){var e=this,a=Object.keys(this.states);this.options.ignoredStates&&(this.options.ignoredStates=Array.isArray(this.options.ignoredStates)?this.options.ignoredStates:[this.options.ignoredStates],this.options.ignoredStates.forEach((function(t){e.states[t]&&delete e.states[t]}))),this.options.hiddenStates=[],this.options.hideStates&&(this.options.hideStates=Array.isArray(this.options.hideStates)?this.options.hideStates:[this.options.hideStates],this.options.hideStates.forEach((function(t){e.states[t]&&e.options.hiddenStates.push(t)}))),this.primaryStateKey=this.options.primary||a[0],this.secondaryStateKey=this.options.secondary||null,["value","state","unit","icon","styles"].forEach((function(n){var i=e.options[n]&&Object.keys(e.options[n])[0];e.options[n]=e.options[n]?Object(q.a)(Object(p.a)(t.prototype),"_setObjectStructure",e).call(e,i&&a.indexOf(i)>-1?e.options[n]:Object(f.a)({},e.primaryStateKey,e.options[n])):{}})),this.states[this.primaryStateKey]=this._getStateFromKey(this.primaryStateKey),this.options.manufacturer=this.primaryStateKey&&X[this.states[this.primaryStateKey].state.node.substr(0,this.states[this.primaryStateKey].state.node.indexOf("."))]||"unknown",this.options.groups=Array.isArray(this.options.group)?this.options.group:[this.options.group],this.options.sort=this.options.sort||999,this.options.label=this.options.label&&"string"===typeof this.options.label&&this.options.label.replace(/%name%/g,this.name)||this.options.label||this.name,this.options.divider=this.options.divider||!1}},{key:"_updateDeviceState",value:function(e,a){var n=this;a.timeChanged=Object(ee.a)(new Date(a.lc-5e3),{locale:W.b[W.a.getLanguage()],includeSeconds:!0,addSuffix:!0}),a.unit="";var i=this._getConfigurationSetting("configurations",e,"val",a.val);return a.val=void 0!==i?i:a.val,a.value=a.val,[{value:"value"},{state:"value"},{unit:"unit"}].forEach((function(i){var r=Object.keys(i).toString(),s=Object.values(i).toString(),o={};o.options=n._getUserSetting(e,r,a.val),["configurations","defaults"].forEach((function(t){o[t]=n._getConfigurationSetting(t,e,r,a.val)})),a[s]=Object(q.a)(Object(p.a)(t.prototype),"_getValueFromSettings",n).call(n,o,a[s])})),a.value=W.a.t(a.value),a}},{key:"get",value:function(e){return this[e]||null}},{key:"getAction",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];e=e||this.primaryStateKey;var a=this.states[e].state.value,n=a?a.val:null,r=!t&&this.actions[e]||this.actions.Action;return i.a.createElement(r,{key:"action-"+this.id+"-"+e,device:this,state:a,stateKey:e,stateVal:n,styles:this.getStyle("state",e,n)})}},{key:"getComponent",value:function(e){e=e||this.primaryStateKey;var t=this.states[e].state.value,a=t?t.val:null,n=this.components[e];return n&&i.a.createElement(n,{title:this.states[e].label||W.a.t(this.function+"#"+e),device:this,stateKey:e,stateVal:a})||this.states[e].label||W.a.t(this.function+"#"+e)}},{key:"getDeviceState",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,a=this.states[e||this.primaryStateKey],n=null;return a&&a.state&&null!==t&&void 0!==a.state.value&&void 0!==a.state.value[t]?n=a.state.value[t]:a&&a.state&&null===t&&void 0!==a.state.value&&(n=a.state.value),n}},{key:"getIcon",value:function(e){var a=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;e=e||this.primaryStateKey;var r={};return r.options=this._getUserSetting(e,"icon",n),["configurations","defaults"].forEach((function(t){r[t]=a._getConfigurationSetting(t,e,"icon",n)})),Object(q.a)(Object(p.a)(t.prototype),"_getValueFromSettings",this).call(this,r,i)}},{key:"getOption",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"default";return this.options[e]&&(this.options[e][t]||this.options[e].default)||this.options[e]||null}},{key:"getStyle",value:function(e){var a=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"default",r={};return n=n||this.primaryStateKey,r.options=this._getUserSetting(n,e,i,!0),["styles","defaultStyles"].forEach((function(t){r[t]=a._getConfigurationSetting(t,n,e,i)})),Object(q.a)(Object(p.a)(t.prototype),"_getValueFromSettings",this).call(this,r,{})}},{key:"listen",value:function(e,t){"function"===typeof e&&(t=e,e="stateChange"),this.listeners(e).findIndex((function(e){return e.toString()==t.toString()}))>-1||this.on(e,t)}},{key:"requestDeviceStates",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=[];for(var a in this.states)t.push(this.requestDeviceState(a,e));return t}},{key:"requestDeviceState",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,a=arguments.length>1&&void 0!==arguments[1]&&arguments[1];t=t||this.primaryStateKey;var n=this._getStateFromKey(t);return"string"==typeof n?Promise.reject({success:!1,stateKey:t,error:n}):new Promise((function(i,r){void 0!==n.state.value&&e.stateSubscriptions.indexOf(t)>-1?(e.emit("stateChange",t,n.state.value,e),i({success:!0,stateKey:t,cached:!0})):e.socket.getState(n.state.node).then((function(s){null===s&&r({success:!1,stateKey:t,error:"State "+n.state.node+" not found!"}),n.state.value=e._updateDeviceState(t,s),e.emit("stateChange",t,n.state.value,e),a&&e.subscribeDeviceState(t).catch((function(e){return r(e)})),i({success:!0,stateKey:t,cached:!1})})).catch((function(e){return r({success:!1,stateKey:t,error:e})}))}))}},{key:"requestDeviceStateHistory",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,a=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};t=t||this.primaryStateKey;var i=this._getStateFromKey(t);return"string"==typeof i?Promise.reject({success:!1,stateKey:t,error:i}):new Promise((function(r,s){i.state.historyCache=i.state.historyCache||{},n.start&&n.end&&n.step&&void 0!==i.state.historyCache[n.start+"#"+n.end+"#"+n.step]?(e.emit("historyChange",t,i.state.historyCache[n.start+"#"+n.end+"#"+n.step],i.state,e),r({success:!0,stateKey:t,cached:!0})):e.socket.getStateHistory(i.state.node,n).then((function(o){null===o&&s({success:!1,stateKey:t,error:"State "+i.state.node+" not found!"}),n.start&&n.end&&n.step&&(i.state.historyCache[n.start+"#"+n.end+"#"+n.step]=o),i.state.history=o,e.emit("historyChange",t,i.state.history,i.state,e),a&&e.subscribeDeviceState(t).catch((function(e){return s(e)})),r({success:!0,stateKey:t,cached:!1})})).catch((function(e){return s({success:!1,stateKey:t,error:e})}))}))}},{key:"setAction",value:function(e){this.options.action=e}},{key:"setComponent",value:function(e){this.options.label=e}},{key:"setDeviceState",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,a=arguments.length>1?arguments[1]:void 0;t=t||this.primaryStateKey;var n=this._getStateFromKey(t,"action");return"string"==typeof n?Promise.reject({success:!1,stateKey:t,error:n}):new Promise((function(i,r){e.socket.setState(n.action.node,a).then((function(a){-1===e.stateSubscriptions.indexOf(t)&&e.requestDeviceState(t),i({success:!0,stateKey:t})})).catch((function(e){return r({success:!1,stateKey:t,error:e})}))}))}},{key:"subscribeDeviceState",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;t=t||this.primaryStateKey;var a=this._getStateFromKey(t);return"string"==typeof a?Promise.reject({success:!1,stateKey:t,error:a}):-1===this.stateSubscriptions.indexOf(t)?(this.stateSubscriptions.push(t),new Promise((function(n){e.socket.subscribeState(a.state.node,(function(n,i,r){i&&i.val!==e.getDeviceState(t,"val")&&(a.state.value=e._updateDeviceState(t,i),e.emit("stateChange",t,a.state.value,e),e.children.forEach((function(n){return n.emit("stateChange",t,a.state.value,e)})))})),n({success:!0,stateKey:t})}))):Promise.reject({success:!1,stateKey:t,error:"State already subscribed!"})}},{key:"unlisten",value:function(e,t){"function"===typeof e&&(t=e,e="stateChange"),this.off(e,t)}}]),t}(Q),ae=a(77),ne=a(688),ie={settings:a(595).default,logs:a(596).default},re=a(15),se=a(687),oe=a(681),ce=a(91),le=Object(k.a)((function(e){return{appBar:{flexGrow:1,boxShadow:"none",transform:"none"},toolbar:{backgroundColor:e.palette.primary.main},menuButton:{marginRight:e.spacing(2)},title:{flexGrow:1},icon:Object(c.a)({},e.components.icon,{color:"#fff",paddingRight:"6px",width:"1em",height:"1em",display:"inline-block",fontSize:"1.5rem",transition:"fill 200ms cubic-bezier(0.4, 0, 0.2, 1) 0ms",flexShrink:0,userSelect:"none"})}}));function ue(e){var t=le(),a=e.children,n=e.title,r=e.connectionStatus,s=(e.toggleDrawer,e.navigate),o=(e.notifications,n.indexOf("|")>-1?n.split("|"):[null,n]),c=Object(re.a)(o,2),l=c[0],u=c[1],d=r?"lan-connect":"pending"===r?"lan-pending":"lan-disconnect",p=r?W.a.t("Connected to ioBroker"):"pending"===r?W.a.t("Not connected to ioBroker! Reconnecting.."):W.a.t("Not connected to ioBroker! Connection failed!");return i.a.createElement(se.a,{id:"appBar",position:"static",className:t.appBar},i.a.createElement(oe.a,{className:t.toolbar},i.a.createElement(b.a,{variant:"h6",className:t.title},l&&i.a.createElement("span",{className:Object(w.a)(t.icon,"mdi mdi-"+l)}),"null"!==u&&u),i.a.createElement(T.a,{color:"inherit",onClick:function(){return s("logs")}},i.a.createElement(ce.a,{title:W.a.t(p)},i.a.createElement("span",{className:"mdi mdi-"+d})))),a)}function de(){var e=window;return{width:e.innerWidth,height:e.innerHeight}}var pe=a(621),ge=a(186),fe=a(619),he=Object(k.a)((function(e){return{icon:Object(c.a)({},e.components.icon,{color:"#fff",paddingBottom:"6px",width:"1em",height:"1em",display:"inline-block",fontSize:"1.5rem",transition:"fill 200ms cubic-bezier(0.4, 0, 0.2, 1) 0ms",flexShrink:0,userSelect:"none"}),tabs:{backgroundColor:e.palette.primary.main,paddingLeft:e.spacing(),color:"#fff",width:"calc(100% - "+e.spacing()+"px)",zIndex:101,borderBottom:"5px solid #eee"},fixed:{position:"fixed",top:0},indicator:{backgroundColor:"#fff"},fullscreen:{marginLeft:-e.spacing(),marginTop:"-5px"},grid:{paddingBottom:"30px"}}}));function me(e){var t=e.tabs,a=e.selectTab,r=he(),s=Object(n.useRef)({}),o=Object(n.useState)(0),c=Object(re.a)(o,2),l=c[0],u=c[1],d=Object(n.useState)(!1),p=Object(re.a)(d,2),g=p[0],f=p[1],h=Object(n.useCallback)((function(){var e=s.current.top+s.current.height-53,t=window.scrollY>=e;f((function(a){return a!==t?(document.getElementById("root").style.paddingTop=t?e-5-8+"px":0,t):a}))}),[s]);Object(n.useEffect)((function(){return s.current={top:document.getElementById("tabBar").offsetTop,height:document.getElementById("tabBar").offsetHeight},window.addEventListener("scroll",h),function(){return window.removeEventListener("keydown",h,0)}}),[h]);var m=t.map((function(e,t){var a=e.indexOf("|")>-1?e.split("|"):[null,e],n=Object(re.a)(a,2),s=n[0],o=n[1];return i.a.createElement(ge.a,{key:"tab"+t,icon:i.a.createElement("span",{className:Object(w.a)(r.icon,"mdi mdi-"+s)}),label:g||!0===J.a.getSetting("tabsHideLabels")||"null"===o?null:o})}));return i.a.createElement(pe.a,{id:"tabBar",value:l,onChange:function(e,n){a(n,t[n]),u(n)},variant:"scrollable",classes:{root:Object(w.a)(r.tabs,g&&r.fixed),indicator:r.indicator}},m)}function ve(e){var t=e.children,a=e.selectedTab,r=e.renderedTab,s=e.fullscreen,o=he(),c=function(){var e=Object(n.useState)(de()),t=Object(re.a)(e,2),a=t[0],i=t[1];return Object(n.useEffect)((function(){function e(){i(de())}return window.addEventListener("resize",e),function(){return window.removeEventListener("resize",e)}}),[]),a}().height,l=Object(n.useState)(c),u=Object(re.a)(l,2),d=u[0],p=u[1],g=Object(n.useRef)({});Object(n.useEffect)((function(){g.current=document.getElementById("appBar").offsetHeight,p(c-g.current+5)}),[c]);var f=Object(n.useState)(null),h=Object(re.a)(f,2),m=h[0],v=h[1];return Object(n.useEffect)((function(){setTimeout((function(){return v(a!==r)}),10)}),[a,r]),i.a.createElement(fe.a,{role:"tabpanel",hidden:m,id:"tabpanel-"+r,className:Object(w.a)(s?o.fullscreen:o.grid),style:{height:d+"px"}},t)}var be=a(697),ye=a(4),Se=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(d.a)(this,Object(p.a)(t).call(this,e))).state={},a}return Object(g.a)(t,e),Object(u.a)(t,[{key:"render",value:function(){var e=this,t=this.props,a=t.classes;t.notifications;return i.a.createElement(be.a,{anchor:"right",open:this.props.open,onClose:function(){return e.props.toggleDrawer("notificationDrawer",!1)},classes:{paper:a.drawer}})}}]),t}(i.a.Component),ke=Object(ye.a)((function(e){return{drawer:{width:400}}}))(Se),Oe=a(100),je=a(348),Ee=a(349),we=a(350),Ce={AdapterStatus:a(312).ModuleSettings||{},Chart:a(313).ModuleSettings||{},DateTime:a(314).ModuleSettings||{},Map:a(315).ModuleSettings||{},Multimedia:a(318).ModuleSettings||{},StateList:a(152).ModuleSettings||{},StateListHorizontal:a(316).ModuleSettings||{},Weather:a(317).ModuleSettings||{}},xe={AdapterStatus:a(312).default,Chart:a(313).default,DateTime:a(314).default,Map:a(315).default,Multimedia:a(318).default,StateList:a(152).default,StateListHorizontal:a(316).default,Weather:a(317).default},Te=Object(ye.a)((function(e){return{root:{margin:0,padding:e.spacing(2)},closeButton:{position:"absolute",right:e.spacing(1),top:e.spacing(1),color:e.palette.grey[500]}}}))((function(e){var t=e.children,a=e.classes,n=e.onClose,r=Object(E.a)(e,["children","classes","onClose"]);return i.a.createElement(je.a,Object.assign({disableTypography:!0,className:a.root},r),i.a.createElement(b.a,{variant:"h6"},t),n?i.a.createElement(T.a,{"aria-label":"close",className:a.closeButton,onClick:n},i.a.createElement(N.a,null)):null)})),De=Object(ye.a)((function(e){return{root:Object(f.a)({padding:e.spacing(2)},e.breakpoints.down("md"),{paddingLeft:e.spacing(1)})}}))(Ee.a),Ne=Object(ye.a)((function(e){return{root:{margin:0,padding:e.spacing(1)}}}))(we.a),Le=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(d.a)(this,Object(p.a)(t).call(this,e))).state={children:[]},a}return Object(g.a)(t,e),Object(u.a)(t,[{key:"componentDidUpdate",value:function(e,t){var a=this,n=this.props.contents&&this.props.contents.device;if(n.id&&this.props.contents.ts!==e.contents.ts)if(n.children.length)S.a._("Popup",["Got "+Object.keys(n.children).length+" states for device "+n.name+" from cache.",n.children]),this.setState({children:n.children},(function(){return a.forceUpdate()}));else{var i=[],r=[];for(var s in n.states)if(!(void 0===n.states[s].state||n.options.hiddenStates.indexOf(s)>-1)){var o=new te({parent:n,id:n.id+"#"+s,name:n.name,function:n.function,states:n.states,options:Object(c.a)({},n.options,{primary:s,secondary:null,divider:0!==r.length,subgroup:null,subtitle:null})},G.a.getConnection,window.language);n.children.push(o),i.push(o.requestDeviceState(null,!0)),r.push(o)}Promise.allSettled(i).then((function(){S.a._("Popup",["Retrieved "+Object.keys(r).length+" states for device "+n.name+".",r]),a.setState({children:r},(function(){return a.forceUpdate()}))}))}else n.id||this.props.contents.ts===e.contents.ts||this.setState({children:[]},(function(){return a.forceUpdate()}))}},{key:"shouldComponentUpdate",value:function(e,t){return!this.props.contents||this.props.contents.ts!==e.contents.ts}},{key:"render",value:function(){var e=this.props,t=e.open,a=e.closeDialog,n=e.contents.device;return i.a.createElement(ne.a,{onClose:a,open:t||!1,maxWidth:"md",fullWidth:!0},i.a.createElement(Te,{onClose:a},n.name),i.a.createElement(De,{dividers:!0,style:{padding:0}},i.a.createElement(xe.StateList,{openDialog:null,devices:this.state.children,component:!0,action:!0})),i.a.createElement(Ne,null,i.a.createElement(Oe.a,{autoFocus:!0,onClick:a,color:"primary"},"Close")))}}]),t}(i.a.Component),Ie=a(691),Ae=a(692),Re=a(693),Me=a(227),_e=Object(k.a)((function(e){return{card:Object(f.a)({margin:e.spacing(1,1,0,0)},e.breakpoints.down("md"),{margin:e.spacing(.4,.4,0,0)}),cardHeaderNoContents:{padding:e.spacing()},cardAvatar:function(t){return Object(c.a)({backgroundColor:e.palette.primary.main,color:"#fff",fontSize:"24px"},t)},cardContent:Object(f.a)({padding:e.spacing(0,2)},e.breakpoints.down("md"),{padding:e.spacing(0)})}}));function Pe(e){var t=e.title,a=e.icon,n=e.iconStyle,r=_e(n);return i.a.createElement(Ie.a,{className:r.card},i.a.createElement(Ae.a,{avatar:null!==a&&i.a.createElement(Me.a,{variant:"rounded",classes:{root:r.cardAvatar}},i.a.createElement("span",{className:"mdi mdi-"+(a||"home")})),title:t&&i.a.createElement(b.a,{variant:"h5",component:"h2"},t)}),i.a.createElement(Re.a,{className:r.cardContent},e.children))}var Fe=function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!t&&!0!==Ce[t.settings.component.module].noDevicesAllowed)return S.a._("Jarvis","Group "+e+" defined in columns but not assigned to any devices!","error"),null;t.settings.component="string"===typeof t.settings.component?{module:t.settings.component}:t.settings.component||{};var n=xe[t.settings.component.module||"StateList"];return void 0===n?(S.a._("Jarvis",'Undefined component "'+t.settings.component.module+'" used!',"error"),null):i.a.createElement(n,{key:"Tag"+e,devices:t.devices,openDialog:a.action?a.action:null,settings:Object(c.a)({},t.settings,{},a)})},Ue=function(e,t){for(var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n={},r=Object.keys(e).length,s=1;s<=r;s++){var o=e[s];if(n[s]=n[s]||[],o&&Object.keys(o).length)for(var c in o){var l=t[c]||{};l.devices=l.devices||[],l.settings=o[c]||{},l.settings.component="string"===typeof l.settings.component?{module:l.settings.component}:l.settings.component||{},l.settings.module=Ce[l.settings.component.module]||{};var u=Fe(c,l,a);(l.devices.length>0||l.settings.module.noDevicesAllowed)&&u&&n[s].push(i.a.createElement(Pe,{key:"Box-"+c,title:null===l.settings.title?null:l.settings.title||l.name||l.settings.module.title,icon:null===l.settings.icon?null:l.settings.icon||l.settings.module.icon,iconStyle:l.settings.iconStyle},u))}else n[s].push(null)}return n},Be=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(d.a)(this,Object(p.a)(t).call(this,e))).state={connectionStatus:a.props.connectionStatus||!1,selectedTab:0,tabTitle:"",page:"home",notificationDrawer:!1,notifications:[],notificationsUnread:0,dialog:!1,dialogContents:{ts:0,device:{}}},a.closeDialog=a.closeDialog.bind(Object(ae.a)(a)),a.openDialog=a.openDialog.bind(Object(ae.a)(a)),a.selectTab=a.selectTab.bind(Object(ae.a)(a)),a.toggleDrawer=a.toggleDrawer.bind(Object(ae.a)(a)),a.navigate=a.navigate.bind(Object(ae.a)(a)),a.socket=G.a.getConnection,a.gridContents={},a.layout=J.a.getSetting("layout"),a.tabs=Object.keys(a.layout),a.tabsEnabled=1!==a.tabs[0],a.state.tabTitle=a.tabs[a.state.selectedTab],a.tabsEnabled||(a.layout={Home:a.layout},a.tabs.push("1")),a.widgetProps={},a}return Object(g.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=this;this.socket.getState("jarvis.0.notifications").then((function(t){t=t&&t.val&&JSON.parse(t.val)||[],e.setState({notificationsUnread:t.filter((function(e){return!e.unread||!1!==e.unread})).length,notifications:t})})),this.socket.subscribeState("jarvis.0.notifications",(function(e){return S.a._("Jarvis",e)}))}},{key:"getTabPanels",value:function(){var e=0,t=[];for(var a in this.layout){var n=this.layout[a],r=Object.keys(n)[0],s=Number.isNaN(parseInt(r));!this.gridContents[a]&&s?this.gridContents[a]=Fe(n,Object(c.a)({},this.props.groups[r],{settings:n[r]}),Object(c.a)({action:this.openDialog},this.widgetProps)):this.gridContents[a]||(this.gridContents[a]=i.a.createElement(j,{contents:Ue(n,this.props.groups,Object(c.a)({action:this.openDialog},this.widgetProps))}));var o=i.a.createElement(ve,{key:"tabPanel-"+e,renderedTab:e,selectedTab:this.state.selectedTab,fullscreen:s},this.gridContents[a]);t.push(o),e++}return t}},{key:"closeDialog",value:function(){this.setState({dialog:!1,dialogContents:{ts:Date.now(),device:{}}})}},{key:"openDialog",value:function(e){this.setState({dialog:!0,dialogContents:{ts:Date.now(),device:e}})}},{key:"selectTab",value:function(e,t){this.setState({selectedTab:e,tabTitle:t})}},{key:"toggleDrawer",value:function(e,t){this.setState(Object(f.a)({},e,t))}},{key:"navigate",value:function(e){this.setState({page:e})}},{key:"render",value:function(){var e=this,t=ie[this.state.page]||null;return i.a.createElement(i.a.Fragment,null,i.a.createElement(ue,{title:J.a.topBarTitle||this.tabsEnabled&&this.state.tabTitle||"jarvis",connectionStatus:this.state.connectionStatus,toggleDrawer:this.toggleDrawer,navigate:this.navigate,notifications:this.state.notificationsUnread},this.tabsEnabled&&i.a.createElement(me,{tabs:this.tabs,selectTab:this.selectTab})),i.a.createElement(ke,{open:this.state.notificationDrawer,toggleDrawer:this.toggleDrawer,notifications:this.state.notifications}),t&&i.a.createElement(ne.a,{fullWidth:!0,maxWidth:"xl",open:"home"!==this.state.page,onClose:function(){return e.navigate("home")}},i.a.createElement(t,{devices:this.props.devices,onClose:function(){return e.navigate("home")}})),i.a.createElement(Le,{open:this.state.dialog,contents:this.state.dialogContents,closeDialog:this.closeDialog}),this.getTabPanels())}}]),t}(i.a.Component),He=a(695),Ke=function(e){function t(e){var a;return Object(l.a)(this,t),(a=Object(d.a)(this,Object(p.a)(t).call(this,e))).state={loaded:[],connected:!1,error:!1,errorMessage:"",theme:null},a}return Object(g.a)(t,e),Object(u.a)(t,[{key:"componentDidMount",value:function(){var e=this,t=function(t){S.a._("App",W.a.t("Socket disconnected")+"!","error",!0,t.stack),e.setState({connected:!1,error:!0,errorMessage:W.a.t("string"===typeof t?t:t.message)+".."}),setTimeout((function e(){S.a._("App",W.a.t("Attempting reconnect")+".."),G.a.reconnect(),setTimeout((function(){return e}),15e3)}),1e4)},n="3000"===window.location.port?V:window.location.protocol+"//"+window.location.hostname+(window.location.port?":"+window.location.port:""),i=[{event:"connect",callback:function(){return e.setState({connected:!0,error:!1,errorMessage:""})}},{event:"reconnect",callback:function(){return e.setState({connected:"pending",error:!1,errorMessage:""})}},{event:"disconnect",callback:t},{event:"error",callback:t}];S.a._("App",W.a.t("Connect to")+" "+n+"..."),this.socket=G.a.connect(n,i),this.settings={},this.socket.getState(h.a.SETTINGS).then((function(t){try{t&&(e.settings=Object(c.a)({},e.settings,{},JSON.parse(t.val)||{}),J.a.setSettings(e.settings),J.a.applySettings(),a.e(3).then(a.bind(null,721)).then((function(t){return e.setState({theme:t.default})}))),void 0===Object.keys(e.settings.layout)[0]?e.setState({error:!0,errorMessage:W.a.t("Please create the configuration. See documentation.")}):e.setState({loaded:[].concat(Object(o.a)(e.state.loaded),["settings"])})}catch(n){S.a._("App","GET_SETTINGS: "+n.message,"error"),e.setState({error:!0,errorMessage:W.a.t("Error parsing settings")+"!"})}})).catch((function(t){S.a._("App","GET_SETTINGS: "+t.message,"error"),e.setState({error:!0,errorMessage:"string"===typeof t?W.a.t(t):W.a.t(t.message)})})),this.settings.iobroker={},this.socket.getObject("system.config",(function(t,a){a&&a.common&&(e.settings.iobroker=a.common,J.a.setSettings({iobroker:e.settings.iobroker}))})),this.devices={},this.groups={},this.socket.getState(h.a.DEVICES).then((function(t){try{e.devices=JSON.parse(t.val),e.processDevices(e.devices).then((function(t){e.groups=t,e.setState({loaded:[].concat(Object(o.a)(e.state.loaded),["groups"])})}))}catch(a){S.a._("App","GET_DEVICES: "+a.message,"error"),e.setState({error:!0,errorMessage:W.a.t("Error parsing devices")+"!"})}})).catch((function(t){S.a._("App","GET_DEVICES: "+t.message,"error"),e.setState({error:!0,errorMessage:W.a.t("Socket failed while getting devices")+"!"})}))}},{key:"groupDevice",value:function(e,t){return t.get("options").groups.forEach((function(a){var n=a.toLowerCase().replace(/ /g,"");e[n]?e[n].devices.push(t):e[n]={id:n,name:a,devices:[t]}})),e}},{key:"processDevice",value:function(e){var t=[],a=null;try{a=new te(e,this.socket),t.push(a.requestDeviceState(null,!0)),a.secondaryStateKey&&t.push(a.requestDeviceState(a.secondaryStateKey,!0))}catch(n){S.a._("App",n.message,"warn")}return new Promise((function(e){Promise.allSettled(t).then((function(t){t.forEach((function(e){"rejected"===e.status&&S.a._("App",e,"error")})),e(a)}))}))}},{key:"processDevices",value:function(e){var t=this,a=[],n={},i=0,r=0,s=function(s){i++,e[s].options=e[s].jarvis,delete e[s].jarvis;var o=Object(c.a)({},e[s],{id:s});a.push(new Promise((function(e,a){t.processDevice(o).then((function(i){null!==i&&(r++,n=t.groupDevice(n,i),e(s)),a(s)}))})));var l=function(e){var i=o.states[e];i&&void 0!==i.jarvis&&a.push(new Promise((function(a,l){t.processDevice(Object(c.a)({},o,{id:s+"#"+e,states:Object(f.a)({},e,i),options:i.jarvis})).then((function(e){null!==e&&(r++,n=t.groupDevice(n,e),a(s)),l(s)}))})))};for(var u in o.states)l(u)};for(var o in e)s(o);return new Promise((function(e){return Promise.allSettled(a).then((function(t){for(var a in n)n[a].devices.sort((function(e,t){return e.options.sort>t.options.sort?1:t.options.sort>e.options.sort?-1:0}));S.a._("App",["Processed "+i+" devices. Added "+r+" devices in "+Object.keys(n).length+" groups.",t,n]),e(n)}))}))}},{key:"renderError",value:function(e){return e=e||this.state.errorMessage,S.a._("App",e,"error"),i.a.createElement(z,{key:"StatusSnackbar",variant:"error",closeButton:!1,message:e.toString()})}},{key:"renderLoadingProgress",value:function(){var e=this.props.classes;return i.a.createElement(m.a,{key:"loadingProcess",container:!0,spacing:0,direction:"column",justify:"center",alignItems:"center",style:{minHeight:"100vh"}},i.a.createElement(v.a,null),i.a.createElement(b.a,{className:e.loading},W.a.t("Retrieving settings"),"..."))}},{key:"renderLoadingSkeleton",value:function(e){for(var t=this.props.classes,a=e.topBar,n=e.tabBar,r=e.gridColumns,s=function(e){return i.a.createElement(y.a,{animation:"wave",variant:"rect",className:t.gridItem,height:e.height})},o={},c=1;c<=r;c++){o[c]=o[c]||[];for(var l=3*Math.random()+2,u=1;u<=l;u++)o[c].push(i.a.createElement(s,{key:c+"#"+u,height:300*Math.random()+100}))}return i.a.createElement(i.a.Fragment,null,a&&i.a.createElement(y.a,{animation:"wave",variant:"rect",height:64}),n&&i.a.createElement(y.a,{animation:"wave",variant:"rect",height:48}),i.a.createElement(j,{key:"loadingSkeleton",contents:o}))}},{key:"render",value:function(){var e=this.state.error?this.renderError():null;if(this.state.error&&this.state.loaded.length<2)return e;if(-1===this.state.loaded.indexOf("settings"))return this.renderLoadingProgress();if(-1===this.state.loaded.indexOf("groups")){var t=Object.keys(this.settings.layout)[0];return void 0===t?null:this.renderLoadingSkeleton({topBar:!0,tabBar:1!==t,gridColumns:1!==t?Object.keys(this.settings.layout[t]).length:t.length})}return S.a._("App",["Connected:",this.state.connected]),i.a.createElement(He.a,{theme:this.state.theme},e,i.a.createElement(Be,{key:"jarvis",connectionStatus:this.state.connected,devices:this.devices,groups:this.groups}))}}]),t}(i.a.Component),ze=Object(ye.a)((function(e){return{loading:{margin:"10px 0 0 0",color:"#999"},gridItem:Object(f.a)({margin:e.spacing(1,1,0,0)},e.breakpoints.down("md"),{marginRight:e.spacing(.4,.4,0,0)})}}))(Ke);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));s.a.render(i.a.createElement(ze,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},98:function(e,t,a){"use strict";a.d(t,"a",(function(){return i}));var n=a(6),i={SETTINGS:"jarvis.0.settings",DEVICES:"jarvis.0.devices"};t.b={pageSettings:{label:"Page Settings",settings:{language:{label:"Spracheinstellung von jarvis",type:"select",options:{de:"Deutsch",en:"English"},default:n.a.getLanguage()},pageFavicon:{label:"Favicon im Browser",info:"base64 Wert der Grafik",type:"text"},pageTitle:{label:"Titel im Browser",type:"text",default:"jarvis - just another remarkable vis"}}},tabSettings:{label:"Tab Settings",settings:{tabsHideLabels:{label:"Tab Bar Labels nicht anzeigen",info:"Zeigt nur die Icons im Tab und nicht die Labels",type:"switch",default:!1}}},themeSettings:{label:"Theme Settings",settings:{themeColorPrimary:{label:"Prim\xe4re Farbe des Themes",type:"text",default:"blue|700"},themeColorSecondary:{label:"Sekund\xe4re Farbe des Themes",type:"text",default:"pink"}}}}}},[[373,1,2]]]);
//# sourceMappingURL=main.a904228a.chunk.js.map