{"version":3,"sources":["helpers/timeConverter.js","modules/StateListItem.js","modules/StateList.js","functions/blind.js","modules/AdapterStatus.js","modules/Chart.js","modules/DateTime.js","modules/Map.js","modules/StateListHorizontal.js","modules/Weather.js","modules/MultimediaItem.js","modules/Multimedia.js","i18n sync /^/.*/.js$","i18n/de.js","i18n/en.js","functions/door.js","functions/heating.js","functions/defaults.js","functions/location.js","functions/user.js","functions/window.js","components/GridContainer.js","components/StatusSnackbar.js","config/config.dev.js","functions/index.js","Function.js","Adapters.js","Device.js","components/TopBar.js","helpers/useWindowDimensions.js","components/TabBar.js","components/Notifications.js","modules/index.js","components/Popup.js","components/Widget.js","theme.js","Jarvis.js","App.js","serviceWorker.js","index.js","helpers/colorConverter.js","functions/light.js","Socket.js","Connection.js","i18n.js"],"names":["timeToSeconds","time","toString","indexOf","split","length","hours","minutes","seconds","parseInt","timeToHoursMinutesSeconds","withHours","Number","isNaN","Math","floor","substr","join","secondsToDateTime","dateTimeFormat","format","Date","locale","de","styles","theme","defaultListDivider","margin","defaultListIcon","props","components","icon","horizontalListItem","display","textAlign","paddingRight","width","marginTop","horizontalListItemIcon","minWidth","horizontalListItemAction","top","right","position","transform","verticalListItemAction","ListItemIconElement","withStyles","customClassNames","children","classes","classNames","Array","isArray","map","className","clsx","StateListItem","state","device","primaryStateKey","getDeviceState","secondaryStateKey","this","on","stateKey","setState","openDialog","horizontal","component","action","options","get","getIcon","val","primary","getAction","primaryAction","secondary","Fragment","divider","ListItem","finger","button","onClick","bind","ListItemIcon","getStyle","ListItemText","getComponent","getOption","subtitle","timeChanged","ListItemSecondaryAction","key","id","style","React","Component","defaultListSectionDivider","defaultListSectionDividerItem","padding","defaultListSectionText","breakpoints","down","horizontalList","flexDirection","flexWrap","ListDivider","getDevicesBySubgroup","subgroup","title","subgroupActions","handleChange","targetStatus","forEach","status","setDeviceState","ButtonGroup","color","size","Button","i18n","t","StateList","devices","push","settings","List","dense","i","listSection","listItem","useStyles","makeStyles","value","float","lineHeight","marginRight","noBorder","borderLeftColor","configurations","level","round","level2","unit","defaults","LevelComponent","actions","useState","setLevel","useEffect","activity","setActivity","states","requestDeviceState","catch","err","console","error","sKey","s","manufacturer","borderRightColor","disabled","AdapterStatus","adapterInformation","adapterAliveStatus","newUpdates","updatesJson","lastUpdateCheck","socket","Connection","getConnection","list","blacklist","updates","updateStates","getStates","subscribeStates","update","lastIndexOf","getAdapterInstances","instances","rows","adapters","instance","common","name","concat","replace","sort","item1","item2","aliveStatus","prevState","updateList","JSON","parse","Object","keys","adapterList","loading","adapter","enabled","alive","connected","connection","tooltip","alt","src","extIcon","small","version","UpdateAvailable","availableVersion","runAsCompactMode","compactGroup","StatusIndicator","notAlive","root","noUpdates","container","UpdatesListItem","UpdatesIndicator","Settings","noDevicesAllowed","fontStyle","backgroundColor","spacing","paddingLeft","borderRadius","height","fontSize","Chart","chartFilter","chartConfig","yAxes","unshift","type","ticks","callback","yLeftAxisUnitBefore","parseFloat","toFixed","yLeftAxisUnitAfter","errors","datePicker","selectedTimeRangeValue","selectedTimeRangeUnit","selectedDateTime","dateNow","chartLabels","chartData","labels","datasets","chartPan","chartZoom","timer","timeRangeRef","createRef","chartRef","chartUpdates","chartOptions","maintainAspectRatio","spanGaps","legend","legendClickHandler","tooltips","callbacks","label","item","data","datasetIndex","scales","plugins","colorschemes","scheme","zoom","pan","mode","getTimeRange","axis","getAxis","requestDeviceStateHistory","history","start","end","step","addChartGraph","liveUpdates","updateChartGraph","prevProps","clearTimeout","setTimeout","getTime","timeRange","axisTimeFormat","helpers","prevMarker","markers","marker","index","entry","ts","reduce","a","b","chartIndex","findIndex","groupChartData","current","chartInstance","values","prevStates","dataSet","fill","graphConfig","e","legendItem","ci","meta","getDatasetMeta","hidden","resetZoom","inputRef","input","onChange","event","target","displayEmpty","disableUnderline","select","deLocale","utils","DateFnsUtils","open","onOpen","onClose","variant","ampm","InputProps","iconButton","dividerVertical","orientation","placement","buttonDisabled","toolbar","errorMessage","severity","createElement","toolbarButtons","disableElevation","chartHeight","ref","alignItems","justifyContent","marginBottom","whiteSpace","marginLeft","flex","palette","main","DateTime","refTimer","useRef","setDateTime","city","setCity","sunrise","setSunrise","sunset","setSunset","refresh","_global","iobroker","latitude","longitude","getSunrise","getSunset","sun","mapOverview","left","bottom","zIndex","cursor","mapIconContainer","mapIconParent","boxShadow","mapIcon","content","mapTooltip","Map","defaultZoom","defaultPosition","setMarkers","memoizedMapInitialised","useCallback","memoizedHandleClick","flyTo","prevMarkers","mapMarkers","Marker","attributes","avatar","undefined","log","aria-label","arrow","useFlyTo","center","whenReady","attribution","url","markerIcon","offset","info","function","L","divIcon","html","iconSize","memoizedHandleMouseEvent","closeTooltip","openTooltip","riseOnHover","onMouseOver","direction","tooltipDirection","permanent","tooltipPermanent","StateListHorizontal","paper","Weather","setData","getRemoteResource","then","response","statusCode","body","weatherForecast","day","forecast","dailyForecast","date","justify","Multimedia","progress","progressTimeout","isRunning","duration","noHeader","styleImage","styleLengthBar","background","backgroundImage","backgroundUrlPrepend","playIconElements","Divider","image","noImage","information","informationLeft","grandParent","parent","informationRight","lengthBar","controls","controlsBox","controlsBoxLeft","controlsBoxCenter","Fab","controlButton","controlsBoxRight","backgroundPosition","minHeight","paddingTop","controlButtonSmall","MultimediaItem","webpackContext","req","webpackContextResolve","__webpack_require__","o","Error","code","resolve","module","exports","temperature","setTemperature","humidity","boost","Level","min","max","PowerAction","sliderMarkLabel","Action","secondaryAction","stateVal","parentOnChange","checked","setChecked","TriggerAction","startIcon","Label","linebreak","br","markSteps","markStep","markLabel","onChangeCommitted","defaultValue","valueLabelDisplay","marks","number","_any","battery","door","power","trigger","wind","true","false","gridContainer","GridContainer","contents","columns","grid","column","Grid","xs","sm","md","lg","xl","warn","success","green","dark","warning","amber","iconVariant","opacity","message","variantIcon","CheckCircleIcon","WarningIcon","ErrorIcon","InfoIcon","StatusSnackbar","autoHideDuration","closeButton","other","Icon","Snackbar","anchorOrigin","vertical","SnackbarContent","IconButton","require","default","blind","heating","jalousie","light","location","user","window","Function","functionType","functionId","toLowerCase","functions","defaultStyles","_isFunction","obj","EventEmitter","Device","deviceProperties","sysLang","room","_setProperties","stateSubscriptions","stateType","node","config","attribute","tmp","ignoredStates","ignoredState","hiddenStates","hideStates","hideState","stateOrAttribute","_getStateFromKey","Adapters","groups","group","formatDistanceToNow","lc","includeSeconds","addSuffix","pair","option","_getUserSetting","_getConfigurationSetting","property","forceDefault","stateProperty","deviceState","defaultIcon","subscribe","responses","Promise","reject","emit","getState","_updateDeviceState","subscribeDeviceState","historyCache","getStateHistory","res","subscribeState","params","child","appBar","flexGrow","menuButton","transition","flexShrink","userSelect","TopBar","connectionStatus","toggleDrawer","navigate","notifications","connectionStatusIcon","connectionStatusTooltip","AppBar","Toolbar","edge","Typography","Tooltip","getWindowDimensions","innerWidth","innerHeight","paddingBottom","tabs","borderBottom","fixed","indicator","fullscreen","TabBar","selectTab","tabBarProps","tab","setTab","setFixed","handleScroll","threshold","scrollY","prevFixed","document","getElementById","offsetTop","offsetHeight","addEventListener","removeEventListener","renderedTabs","Tab","Tabs","selectedTab","TabPanel","renderedTab","windowDimensions","setWindowDimensions","handleResize","useWindowDimensions","mapHeight","setMapHeight","topBarHeight","setHidden","Box","role","Notifications","Drawer","anchor","drawer","ModuleSettings","DialogTitle","grey","disableTypography","DialogContent","MuiDialogContent","DialogActions","MuiDialogActions","Popup","forceUpdate","language","allSettled","nextProps","nextState","closeDialog","Dialog","maxWidth","fullWidth","dividers","autoFocus","card","cardHeaderNoContents","cardAvatar","cardContent","Widget","iconStyle","Card","CardHeader","Avatar","CardContent","blue","pink","createMuiTheme","getGroup","groupId","Tag","Modules","getGridContents","gridContents","columnContents","Jarvis","tabTitle","page","notificationDrawer","notificationsUnread","dialog","dialogContents","layout","tabsEnabled","widgetProps","filter","notification","unread","tabPanels","tabLabel","tabPanel","now","ThemeProvider","topBarTitle","getTabPanels","App","loaded","errorHandler","reconnect","port","protocol","hostname","listeners","connect","useSettings","getObject","processDevices","debug","email","LogRocket","init","uuid","identify","navigator","userLanguage","setLanguage","loadTranslations","pageTitle","pageFavicon","href","translations","setTranslation","promises","results","result","deviceList","groupedDevices","deviceId","jarvis","processDevice","groupDevice","stringify","CircularProgress","topBar","tabBar","gridColumns","SkeletonLoader","Skeleton","animation","gridItem","loaders","random","loader","renderError","renderLoadingProgress","renderLoadingSkeleton","Boolean","match","ReactDOM","render","serviceWorker","ready","registration","unregister","HsvToRgb","h","r","g","f","p","q","v","RgbToHex","LightColorAction","colorSpace","setColorSpace","colors","Red","Green","Blue","Hue","Saturation","Brightness","LightColorComponent","initialColor","onChangeComplete","colorTemperature","hue","rgb","hsv","hex","setHue","hsl","Socket","io","timeout","query","statesSubscribes","attempts","reason","stateChange","ids","cb","cbs","reg","RegExp","task","hasOwnProperty","test","getObjectView","design","search","pattern","setUrl","setListeners","listener","setListener","languages","loadTranslation","translation","lang","word","placeholders","parts","shift","ucFirst","charAt","toUpperCase","slice"],"mappings":"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","file":"static/js/main.a9f1286e.chunk.js","sourcesContent":["import { format } from 'date-fns'\r\nimport { de } from 'date-fns/locale'\r\n\r\n/**\r\n *\r\n *\r\n */\r\nfunction timeToSeconds(time) {\r\n\t\r\n\tif (time.toString().indexOf(':') > -1) {\r\n\t\ttime = time.toString();\r\n\t\tlet format = time.split(':').length-1;\r\n\t\tlet [ hours, minutes, seconds ] = format > 1 ? time.split(':') : ('0:' + time).split(':');\r\n\t\ttime = parseInt(hours) * 3600 + parseInt(minutes) * 60 + parseInt(seconds);\r\n\t}\r\n\t\r\n\treturn parseInt(time);\r\n}\r\n\r\n/**\r\n *\r\n *\r\n */\r\nfunction timeToHoursMinutesSeconds(time, withHours = false) {\r\n\t\r\n\tif (time.toString().indexOf(':') > -1) {\r\n\t\treturn time;\r\n\t}\r\n\t\r\n\ttime = parseInt(time);\r\n\twithHours = withHours || (time > 3600);\r\n\t\r\n\tif (Number.isNaN(time)) {\r\n\t\treturn withHours ? '00:00:00' : '00:00';\r\n\t}\r\n\t\r\n\tlet hours = '0' + Math.floor(time/3600);\r\n\tlet minutes = '0' + Math.floor(time/60);\r\n\tlet seconds = '0' + (time % 60);\r\n\t\r\n\treturn withHours ? [ hours.substr(-2), minutes.substr(-2), seconds.substr(-2) ].join(':') : [ minutes.substr(-2), seconds.substr(-2) ].join(':');\r\n}\r\n\r\n/**\r\n *\r\n *\r\n */\r\nfunction secondsToDateTime(seconds, dateTimeFormat = 'dd. MMM yyyy, HH:mm') {\r\n\treturn format(new Date(seconds*1000), dateTimeFormat, { locale: de });\r\n}\r\n\r\n\r\nexport default {\r\n\ttimeToSeconds,\r\n\ttimeToHoursMinutesSeconds,\r\n\tsecondsToDateTime\r\n}","import React from 'react'\r\nimport clsx from 'clsx'\r\n\r\nimport ListItem from '@material-ui/core/ListItem'\r\nimport ListItemIcon from '@material-ui/core/ListItemIcon'\r\nimport ListItemSecondaryAction from '@material-ui/core/ListItemSecondaryAction'\r\nimport ListItemText from '@material-ui/core/ListItemText'\r\n\r\n\r\n/*\r\n * STYLES\r\n */\r\nimport { withStyles } from '@material-ui/core/styles';\r\nconst styles = theme => ({\r\n\tdefaultListDivider: {\r\n\t\tmargin: '0 0 5px 0'\r\n\t},\r\n\tdefaultListIcon: props => ({\r\n\t\t...theme.components.icon,\r\n\t\t...props.styles\r\n\t}),\r\n\thorizontalListItem: {\r\n\t\tdisplay: 'inline-block',\r\n\t\ttextAlign: 'center',\r\n\t\tpaddingRight: '16px',\r\n\t\twidth: '140px',\r\n\t\tmarginTop: '10px'\r\n\t},\r\n\thorizontalListItemIcon: {\r\n\t\tminWidth: 'auto'\r\n\t},\r\n\thorizontalListItemAction: {\r\n\t\ttextAlign: 'center',\r\n\t\ttop: 0,\r\n\t\tright: 0,\r\n\t\tposition: 'static',\r\n\t\ttransform: 'none',\r\n\t},\r\n\tverticalListItemAction: {\r\n\t\ttextAlign: 'right'\r\n\t},\r\n});\r\n\r\n\r\nconst ListItemIconElement = withStyles(styles)(props => {\r\n\tconst { customClassNames, children, classes } = props;\r\n\t\r\n\tlet classNames = Array.isArray(customClassNames) ? customClassNames : [customClassNames];\r\n\tclassNames = classNames.map(className => (classes[className] ? classes[className] : className));\r\n\t\r\n\treturn <span className={clsx(classNames)}>{children}</span>\r\n});\r\n\r\n\r\nclass StateListItem extends React.Component {\r\n\t\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\t\r\n\t\tthis.state = {}\r\n\t\tthis.state[this.props.device.primaryStateKey] = this.props.device.getDeviceState() || {}\r\n\t\t\r\n\t\tif (this.props.device.secondaryStateKey) {\r\n\t\t\tthis.state[this.props.device.secondaryStateKey] = this.props.device.getDeviceState(this.props.device.secondaryStateKey) || {}\r\n\t\t}\r\n\t}\r\n\t\r\n\tcomponentDidMount() {\r\n\t\t\r\n\t\tthis.props.device.on('stateChange', (stateKey, state) => {\r\n\t\t\tif (stateKey === this.props.device.primaryStateKey || stateKey === this.props.device.secondaryStateKey) {\r\n\t\t\t\tthis.setState({ [stateKey]: state });\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\t\r\n\topenDialog() {\r\n\t\tthis.props.openDialog(this.props.device);\r\n\t}\r\n\t\r\n\trender() {\r\n\t\tconst { classes, horizontal, device, component, action } = this.props;\r\n\t\t\r\n\t\tconst state = this.state[device.primaryStateKey];\r\n\t\tconst options = device.get('options');\r\n\t\t\r\n\t\tlet icon = device.getIcon(device.primaryStateKey, state.val);\r\n\t\tlet primary = device.getAction(device.primaryStateKey, device.options.primaryAction === false);\r\n\t\tlet secondary = action && this.state[device.secondaryStateKey] ? device.getAction(device.secondaryStateKey) : null;\r\n\t\t\r\n\t\treturn (\r\n\r\n<React.Fragment>\r\n\t\r\n\t{options.divider && options.divider !== 'after' && <ListItem divider className={classes.defaultListDivider} />}\r\n\t\r\n\t<ListItem\r\n\t\tclassName={clsx(this.props.openDialog && classes.finger, horizontal && classes.horizontalListItem)}\r\n\t\tbutton={this.props.openDialog !== null}\r\n\t\tonClick={this.props.openDialog && this.openDialog.bind(this)}\r\n\t\t>\r\n\t\t\r\n\t\t<ListItemIcon className={clsx(horizontal && classes.horizontalListItemIcon)}>\r\n\t\t{icon === null ? <React.Fragment /> :\r\n\t\t\t<ListItemIconElement customClassNames={['defaultListIcon','mdi mdi-' + icon]} styles={device.getStyle('icon', device.primaryStateKey, state.val)} />\r\n\t\t}\r\n\t\t</ListItemIcon>\r\n\t\t\r\n\t\t<ListItemText\r\n\t\t\tprimary={(component && device.getComponent()) || device.getOption('label')}\r\n\t\t\tsecondary={(options.subtitle !== null ? (options.subtitle || (state && state.timeChanged) || null) : null)}\r\n\t\t\t/>\r\n\t\t\r\n\t\t<ListItemSecondaryAction className={ horizontal ? classes.horizontalListItemAction : classes.verticalListItemAction }>\r\n\t\t\t{!secondary ? primary : [ primary, <br key={'br_' + device.id} />, secondary ]}\r\n\t\t</ListItemSecondaryAction>\r\n\t</ListItem>\r\n\t\r\n\t{options.divider && options.divider === 'after' && <ListItem divider style={{margin: '5px 0'}} />}\r\n\t\r\n</React.Fragment>\r\n\r\n\t\t);\r\n\t}\r\n}\r\n\r\nexport default withStyles(styles)(StateListItem);\r\n","import React from 'react'\r\nimport i18n from '../i18n'\r\n\r\nimport List from '@material-ui/core/List'\r\nimport ListItem from '@material-ui/core/ListItem'\r\nimport ListItemSecondaryAction from '@material-ui/core/ListItemSecondaryAction'\r\nimport ListItemText from '@material-ui/core/ListItemText'\r\nimport StateListItem from './StateListItem'\r\nimport Button from '@material-ui/core/Button'\r\nimport ButtonGroup from '@material-ui/core/ButtonGroup'\r\n\r\n\r\n/*\r\n * STYLES\r\n */\r\nimport { withStyles } from '@material-ui/core/styles';\r\nconst styles = theme => ({\r\n\tdefaultListSectionDivider: {\r\n\t\tmargin: '5px 0 0 0'\r\n\t},\r\n\tdefaultListSectionDividerItem: {\r\n\t\tmargin: '6px 0 7px 0',\r\n\t\tpadding: '0 16px !important'\r\n\t},\r\n\tdefaultListSectionText: {\r\n\t\tmargin: 0,\r\n\t\t[theme.breakpoints.down('md')]: {\r\n\t\t\tmargin: '0 0 0 10px',\r\n\t\t}\r\n\t},\r\n\thorizontalList: {\r\n\t\tdisplay: 'flex',\r\n\t\tflexDirection: 'row',\r\n\t\tflexWrap: 'wrap'\r\n\t}\r\n});\r\n\r\n\r\nconst ListDivider = withStyles(styles)(props => {\r\n\tconst { classes, getDevicesBySubgroup, subgroup, title, subgroupActions } = props;\r\n\t\r\n\tconst handleChangeOn = () => handleChange(true);\r\n\tconst handleChangeOff = () => handleChange(false);\r\n\tconst handleChange = targetStatus => {\r\n\t\t\r\n\t\tconst devices = getDevicesBySubgroup(subgroup);\r\n\t\tdevices.forEach(device => {\r\n\t\t\t\r\n\t\t\tlet status = targetStatus;\r\n\t\t\tif (device.primaryStateKey === 'level') {\r\n\t\t\t\tstatus = status ? 100 : 0;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tdevice.setDeviceState(null, status);\r\n\t\t});\r\n\t}\r\n\t\r\n\treturn (\r\n\t\r\n<React.Fragment>\r\n\t<ListItem divider className={classes.defaultListSectionDivider} />\r\n\t<ListItem className={classes.defaultListSectionDividerItem}>\r\n\t\t<ListItemText\r\n\t\t\tclassName={classes.defaultListSectionText}\r\n\t\t\tprimary={title}\r\n\t\t\t/>\r\n\t\t\r\n\t\t<ListItemSecondaryAction>\r\n\t\t{subgroupActions === null || subgroupActions === false ? null :\r\n\t\t\t<ButtonGroup color=\"primary\" size=\"small\">\r\n\t\t\t\t<Button onClick={handleChangeOn}>{i18n.t('on')}</Button>\r\n\t\t\t\t<Button onClick={handleChangeOff}>{i18n.t('off')}</Button>\r\n\t\t\t</ButtonGroup>\r\n\t\t}\r\n\t\t\r\n\t\t</ListItemSecondaryAction>\r\n\t</ListItem>\r\n</React.Fragment>\r\n\t\r\n\t);\r\n});\r\n\r\nclass StateList extends React.Component {\r\n\t\r\n\tgetDevicesBySubgroup(subgroup) {\r\n\t\t\r\n\t\tlet devices = [];\r\n\t\tthis.props.devices.forEach(device => {\r\n\t\t\t\r\n\t\t\tif (subgroup === device.getOption('subgroup')) {\r\n\t\t\t\tdevices.push(device);\r\n\t\t\t}\r\n\t\t});\r\n\t\t\r\n\t\treturn devices;\r\n\t}\r\n\t\r\n\trender() {\r\n\t\tconst { classes, horizontal, devices, settings, component, action, ...props } = this.props;\r\n\t\tlet subgroup;\r\n\t\t\r\n\t\treturn (\r\n\r\n<List dense={true} className={horizontal && classes.horizontalList}>\r\n\t{devices.map((device, i) => {\r\n\t\t\r\n\t\tconst listSection = subgroup !== null && device.options.subgroup !== null && device.options.subgroup !== subgroup && <ListDivider\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tkey={'ListDivider-' + device.get('id')}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tgetDevicesBySubgroup={this.getDevicesBySubgroup.bind(this)}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tsubgroup={device.getOption('subgroup')}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ttitle={device.options.subgroup}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tsubgroupActions={settings.subgroupActions || device.options.subgroupActions}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\r\n\t\tconst listItem = <StateListItem\r\n\t\t\t\t\t\t\t{...props}\r\n\t\t\t\t\t\t\tkey={'StateListItem-' + device.get('id')}\r\n\t\t\t\t\t\t\thorizontal={horizontal}\r\n\t\t\t\t\t\t\tdevice={device}\r\n\t\t\t\t\t\t\tcomponent={component || false}\r\n\t\t\t\t\t\t\taction={action || true}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\r\n\t\tsubgroup = device.getOption('subgroup');\r\n\t\treturn [ listSection, listItem ];\r\n\t})}\r\n</List>\r\n\r\n\t\t);\r\n\t}\r\n}\r\n\r\nexport default withStyles(styles)(StateList);\r\n","import React, { useState, useEffect } from 'react'\r\n\r\nimport Button from '@material-ui/core/Button'\r\nimport ButtonGroup from '@material-ui/core/ButtonGroup'\r\nimport ExpandLessIcon from '@material-ui/icons/ExpandLess'\r\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore'\r\nimport StopIcon from '@material-ui/icons/Stop';\r\n\r\nimport defaults from './defaults'\r\n\r\n\r\n/*\r\n * STYLES\r\n */\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nconst useStyles = makeStyles(theme => ({\r\n\tvalue: props => ({\r\n\t\tfloat: 'left',\r\n\t\tlineHeight: '32px',\r\n\t\tmarginRight: '10px'\r\n\t}),\r\n\tnoBorder: {\r\n\t\tborderLeftColor: 'transparent'\r\n\t}\r\n}));\r\n\r\n\r\n/*\r\n * ACTIONS\r\n *\r\n */\r\nfunction BlindLevelAction(props) {\r\n\tconst { device, state, stateKey } = props;\r\n\tconst classes = useStyles();\r\n\t\r\n\tconst onGoUp = () => {\r\n\t\tsetLevel(100);\r\n\t\tsetActivity(true);\r\n\t\tdevice.setDeviceState(stateKey, 100).catch(err => console.error(err));\r\n\t}\r\n\t\r\n\tconst onGoDown = () => {\r\n\t\tsetLevel(0);\r\n\t\tsetActivity(true);\r\n\t\tdevice.setDeviceState(stateKey, 0).catch(err => console.error(err));\r\n\t}\r\n\t\r\n\tconst onStop = () => {\r\n\t\tsetActivity(false);\r\n\t\tdevice.setDeviceState('activity', true).catch(err => console.error(err));\r\n\t}\r\n\t\r\n\t// level\r\n\tconst [level, setLevel] = useState(state.value);\r\n\tuseEffect(() => setLevel(state.value), [state.value]);\r\n\t\r\n\t// activity\r\n\tconst [activity, setActivity] = useState(null);\r\n\tuseEffect(() => {\r\n\t\t\r\n\t\tif (device.states.activity && device.states.activity.state) {\r\n\t\t\tdevice.states.activity.state = typeof device.states.activity.state === 'string' ? { 'node': device.states.activity.state } : device.states.activity.state;\r\n\t\t\t\r\n\t\t\t// request device state\r\n\t\t\tdevice.requestDeviceState('activity', true).catch(err => console.error(err));\r\n\t\t\t\r\n\t\t\t// listen for updates\r\n\t\t\tdevice.on('stateChange', (sKey, s) => {\r\n\t\t\t\tif (sKey === 'activity') {\r\n\t\t\t\t\t\r\n\t\t\t\t\tlet val = s.val;\r\n\t\t\t\t\t\r\n\t\t\t\t\t// HomeMatic\r\n\t\t\t\t\tif (device.options.manufacturer === 'HomeMatic') {\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tswitch(val) {\r\n\t\t\t\t\t\t\tcase 1: // UP\r\n\t\t\t\t\t\t\tcase 2: // DOWN\r\n\t\t\t\t\t\t\t\tval = true;\r\n\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tcase 3: // STABLE\r\n\t\t\t\t\t\t\tdefault: // UNKNOWN\r\n\t\t\t\t\t\t\t\tval = false;\r\n\t\t\t\t\t\t\t\tbreak;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t\t//\r\n\t\t\t\t\tsetActivity(val);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\t\t\r\n\t}, [device]);\r\n\t\r\n\treturn (\r\n\r\n<React.Fragment>\r\n\t\r\n\t<div className={classes.value}>\r\n\t\t{level + state.unit}\r\n\t</div>\r\n\t\r\n\t<ButtonGroup size=\"small\">\r\n\t\t<Button color=\"primary\" onClick={onGoUp}><ExpandLessIcon /></Button>\r\n\t\t\t{activity !== null && <Button color=\"secondary\" style={{ borderRightColor: !activity ? 'transparent' : 'rgba(245, 0, 87, 0.5)' }} onClick={onStop} disabled={!activity}><StopIcon /></Button>}\r\n\t\t<Button color=\"primary\" style={activity !== null ? { borderLeftColor: !activity ? 'rgba(0, 0, 0, 0.26)' : 'transparent' } : {}} onClick={onGoDown}><ExpandMoreIcon /></Button>\r\n\t</ButtonGroup>\r\n</React.Fragment>\r\n\r\n\t);\r\n}\r\n\r\n\r\nexport default {\r\n\tconfigurations: {\r\n\t\tlevel: {\r\n\t\t\tvalue: val => Math.round(val),\r\n\t\t\ticon: {\r\n\t\t\t\t'default': 'window-shutter-open',\r\n\t\t\t\t'>90': 'window-shutter-open',\r\n\t\t\t\t'<=90': 'window-shutter'\r\n\t\t\t}\r\n\t\t},\r\n\t\tlevel2: {\r\n\t\t\tvalue: val => Math.round(val),\r\n\t\t\tunit: ' %',\r\n\t\t\ticon: {\r\n\t\t\t\t'default': 'window-shutter-open',\r\n\t\t\t\t'>90': 'window-shutter-open',\r\n\t\t\t\t'<=90': 'window-shutter'\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\tcomponents: {\r\n\t\tlevel2: defaults.components.LevelComponent\r\n\t},\r\n\tactions: {\r\n\t\tlevel: BlindLevelAction\r\n\t},\r\n\tstyles: {\r\n\t}\r\n}","import React from 'react'\r\nimport clsx from 'clsx'\r\n\r\nimport { format } from 'date-fns'\r\nimport { de } from 'date-fns/locale'\r\n\r\nimport Connection from '../Connection'\r\nimport i18n from '../i18n'\r\n\r\nimport CircularProgress from '@material-ui/core/CircularProgress'\r\nimport Tooltip from '@material-ui/core/Tooltip'\r\nimport Avatar from '@material-ui/core/Avatar'\r\nimport List from '@material-ui/core/List'\r\nimport ListItemAvatar from '@material-ui/core/ListItemAvatar'\r\nimport ListItem from '@material-ui/core/ListItem'\r\nimport ListItemText from '@material-ui/core/ListItemText'\r\nimport ListItemSecondaryAction from '@material-ui/core/ListItemSecondaryAction'\r\nimport StarIcon from '@material-ui/icons/Star';\r\n\r\n\r\n/*\r\n * STYLES\r\n */\r\nimport { withStyles } from '@material-ui/core/styles';\r\nconst styles = theme => ({\r\n\tnoUpdates: {\r\n\t\tfontStyle: 'italic',\r\n\t\ttextAlign: 'right',\r\n\t\tcolor: 'rgba(0, 0, 0, 0.54)'\r\n\t},\r\n\tUpdateAvailable: {\r\n\t\tcolor: '#CCAA00',\r\n\t},\r\n\tUpdatesListItem: {\r\n\t\tbackgroundColor: '#ffd700',\r\n\t\tcolor: '#fff',\r\n\t\tmargin: theme.spacing(0, -2),\r\n\t\tpaddingLeft: theme.spacing(2)\r\n\t},\r\n\tUpdatesIndicator: {\r\n\t\tright: theme.spacing(3.75),\r\n\t\tbackgroundColor: '#CCAA00',\r\n\t\tborderRadius: '50%',\r\n\t\twidth: theme.spacing(3),\r\n\t\theight: theme.spacing(3),\r\n\t\tcolor: '#fff',\r\n\t\ttextAlign: 'center',\r\n\t\tfontSize: '1rem !important'\r\n\t},\r\n\tStatusIndicator: {\r\n\t\tfontSize: '1.4rem'\r\n\t},\r\n\tloading: {\r\n\t\ttextAlign: 'center',\r\n\t\tmarginTop: '5px'\r\n\t},\r\n\tsmall: {\r\n\t\twidth: theme.spacing(3),\r\n\t\theight: theme.spacing(3),\r\n\t},\r\n\talive: {\r\n\t\tcolor: '#86d686'\r\n\t},\r\n\tnotAlive: {\r\n\t\tcolor: '#f7e43b'\r\n\t},\r\n\tdisabled: {\r\n\t\tcolor: '#bababa'\r\n\t}\r\n});\r\n\r\n\r\nclass AdapterStatus extends React.Component {\r\n\t\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\t\r\n\t\tthis.state = {\r\n\t\t\tadapterInformation: [],\r\n\t\t\tadapterAliveStatus: {},\r\n\t\t\tnewUpdates: false,\r\n\t\t\tupdatesJson: '',\r\n\t\t\tlastUpdateCheck: ''\r\n\t\t}\r\n\t\t\r\n\t\tthis.socket = Connection.getConnection;\r\n\t\tthis.list = this.props.settings.list ? (Array.isArray(this.props.settings.list) ? this.props.settings.list : this.props.settings.list.split(',')) : null;\r\n\t\tthis.blacklist = this.props.settings.blacklist ? (Array.isArray(this.props.settings.blacklist) ? this.props.settings.blacklist : this.props.settings.blacklist.split(',')) : null;\r\n\t}\r\n\t\r\n\tcomponentDidMount() {\r\n\t\t\r\n\t\t// retrieve updates\r\n\t\tif (this.props.settings.updates !== false) {\r\n\t\t\t\r\n\t\t\tlet updateStates = ['admin.0.info.newUpdates', 'admin.0.info.lastUpdateCheck', 'admin.0.info.updatesJson'];\r\n\t\t\tthis.socket.getStates(updateStates, (err, states) => {\r\n\t\t\t\t\r\n\t\t\t\tthis.setState({\r\n\t\t\t\t\tnewUpdates: states['admin.0.info.newUpdates'].val,\r\n\t\t\t\t\tlastUpdateCheck: states['admin.0.info.lastUpdateCheck'].val,\r\n\t\t\t\t\tupdatesJson: states['admin.0.info.updatesJson'].val\r\n\t\t\t\t});\r\n\t\t\t\t\r\n\t\t\t\t// get state updates\r\n\t\t\t\tthis.socket.subscribeStates(updateStates, (id, update) => {\r\n\t\t\t\t\t\r\n\t\t\t\t\tid = id.substr(id.lastIndexOf('.')+1);\r\n\t\t\t\t\tif (this.state[id] !== update.val) {\r\n\t\t\t\t\t\tthis.setState({ [id]: update.val });\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t});\r\n\t\t}\r\n\t\t\r\n\t\t// get adapter instances\r\n\t\tthis.socket.getAdapterInstances((err, instances) => {\r\n\t\t\t\r\n\t\t\tlet states = [];\r\n\t\t\tif (instances && instances.rows) {\r\n\t\t\t\tlet adapters = [];\r\n\t\t\t\t\r\n\t\t\t\t// states per instance to retrieve\r\n\t\t\t\tinstances.rows.forEach((instance, i) => {\r\n\t\t\t\t\t\r\n\t\t\t\t\t// get alive / connected states\r\n\t\t\t\t\tif ((!this.list || (this.list && this.list.indexOf(instance.value.common.name) > -1)) && (!this.blacklist || (this.blacklist && this.blacklist.indexOf(instance.value.common.name) === -1))) {\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tadapters.push(instance);\r\n\t\t\t\t\t\tstates = states.concat([\r\n\t\t\t\t\t\t\tinstance.id + '.alive',\r\n\t\t\t\t\t\t\tinstance.id + '.connected',\r\n\t\t\t\t\t\t\tinstance.id.replace('system.adapter.', '') + '.info.connection'\r\n\t\t\t\t\t\t]);\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t\t\r\n\t\t\t\t// sort instances\r\n\t\t\t\tthis.setState({ adapterInformation: adapters.sort((item1, item2) => {\r\n\t\t\t\t\t\tif (item1.id > item2.id) return 1;\r\n\t\t\t\t\t\telse if (item2.id > item1.id) return -1;\r\n\t\t\t\t\t\telse return 0;\r\n\t\t\t\t\t})\r\n\t\t\t\t});\r\n\t\t\t\t\r\n\t\t\t\t// retrieve intial states\r\n\t\t\t\tthis.socket.getStates(states, (err, adapterAliveStatus) => {\r\n\t\t\t\t\tthis.setState({ adapterAliveStatus });\r\n\t\t\t\t\t\r\n\t\t\t\t\t// get state updates\r\n\t\t\t\t\tthis.socket.subscribeStates(states, (id, aliveStatus) => {\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tif (aliveStatus && (!this.state.adapterAliveStatus[id] || (aliveStatus.val !== this.state.adapterAliveStatus[id].val))) {\r\n\t\t\t\t\t\t\tthis.setState(prevState => ({ adapterAliveStatus: { ...prevState.adapterAliveStatus, [id]: aliveStatus } }));\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\t\r\n\trender() {\r\n\t\tconst { classes } = this.props;\r\n\t\t\r\n\t\t// adapter updates\r\n\t\tconst updateList = (this.state.updatesJson && JSON.parse(this.state.updatesJson)) || {};\r\n\t\tconst updates = Object.keys(updateList).length\r\n\t\t\r\n\t\t// adapter instances\r\n\t\tlet adapterList = <ListItem key='loading' className={classes.loading}><CircularProgress size={20} /></ListItem>\r\n\t\t\r\n\t\tif (this.state.adapterInformation.length > 0) {\r\n\t\t\t\r\n\t\t\tadapterList = this.state.adapterInformation.map(adapter => {\r\n\t\t\t\tadapter.update = updateList[adapter.value.common.name] || false;\r\n\t\t\t\t\r\n\t\t\t\tconst enabled = adapter.value.common.enabled;\r\n\t\t\t\tconst alive = (this.state.adapterAliveStatus[adapter.id + '.alive'] && this.state.adapterAliveStatus[adapter.id + '.alive'].val) || false;\r\n\t\t\t\tconst connected = (this.state.adapterAliveStatus[adapter.id + '.connected'] && this.state.adapterAliveStatus[adapter.id + '.connected'].val) || false;\r\n\t\t\t\tconst connection = this.state.adapterAliveStatus[adapter.id.replace('system.adapter.', '') + '.info.connection'] ? this.state.adapterAliveStatus[adapter.id.replace('system.adapter.', '') + '.info.connection'].val : true;\r\n\t\t\t\t\r\n\t\t\t\tconst tooltip = i18n.t('Adapter') + ' ' + (enabled ? (alive && connected && connection ? i18n.t('alive') : i18n.t('not alive')) : i18n.t('disabled'));\r\n\t\t\t\t\r\n\t\t\t\treturn (\r\n\t\t\t\t\r\n\t\t\t\t\t<ListItem key={'adapter-' + adapter.id}>\r\n\t\t\t\t\t\t<ListItemAvatar>\r\n\t\t\t\t\t\t\t<Avatar alt={adapter.value.common.name} src={adapter.value.common.extIcon} className={classes.small} />\r\n\t\t\t\t\t\t</ListItemAvatar>\r\n\t\t\t\t\t\t<ListItemText\r\n\t\t\t\t\t\t\tprimary={adapter.value.common.title}\r\n\t\t\t\t\t\t\tsecondary={[\r\n\t\t\t\t\t\t\t\t'v' + adapter.value.common.version,\r\n\t\t\t\t\t\t\t\t(adapter.update && (<span key={'updates-' + adapter.id}>, <span className={classes.UpdateAvailable}>{i18n.t('Update available') + ' v' + adapter.update.availableVersion}</span></span>)),\r\n\t\t\t\t\t\t\t\t(adapter.value.common.runAsCompactMode && ', ' + i18n.t('Compact Mode') + ' ' + i18n.t('on') + ' (' + i18n.t('Group') + ' ' + adapter.value.common.compactGroup + ')')\r\n\t\t\t\t\t\t\t]}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t<ListItemSecondaryAction className={clsx(classes.StatusIndicator, enabled ? (alive && connected && connection ? classes.alive : classes.notAlive) : classes.disabled)}>\r\n\t\t\t\t\t\t\t<Tooltip title={tooltip}>\r\n\t\t\t\t\t\t\t\t<span className={enabled ? (alive && connected && connection ? 'mdi mdi-check-circle' : 'mdi mdi-alert') : 'mdi mdi-close'}></span>\r\n\t\t\t\t\t\t\t</Tooltip>\r\n\t\t\t\t\t\t</ListItemSecondaryAction>\r\n\t\t\t\t\t</ListItem>\r\n\t\t\t\t\r\n\t\t\t\t)\r\n\t\t\t});\r\n\t\t}\r\n\t\t\r\n\t\treturn (\r\n\r\n<List dense>\r\n\t{this.state.newUpdates === false ? (this.state.lastUpdateCheck && \r\n\t<ListItem key=\"updates\" classes={{ root: classes.noUpdates }}>\r\n\t\t<ListItemText\r\n\t\t\tprimary={i18n.t('last update') + ': ' + format(new Date(this.state.lastUpdateCheck), 'dd.MM.yyyy HH:mm:ss', { locale: de })}\r\n\t\t\t/>\r\n\t\t\r\n\t</ListItem>)\r\n\t:\r\n\t<ListItem key=\"updates\" classes={{ container: classes.UpdatesListItem }}>\r\n\t\t<ListItemAvatar>\r\n\t\t\t<StarIcon />\r\n\t\t</ListItemAvatar>\r\n\t\t<ListItemText\r\n\t\t\tprimary={i18n.t('Updates available') + '!'}\r\n\t\t\t/>\r\n\t\t\r\n\t\t<ListItemSecondaryAction className={clsx(classes.StatusIndicator, classes.UpdatesIndicator)}>\r\n\t\t\t{updates}\r\n\t\t</ListItemSecondaryAction>\r\n\t</ListItem>\r\n\t}\r\n\t\r\n\t{adapterList}\r\n</List>\r\n\r\n\t\t);\r\n\t}\r\n}\r\n\r\nexport const Settings = {\r\n\tnoDevicesAllowed: true,\r\n\ttitle: i18n.t('Adapter Status'),\r\n\ticon: 'traffic-light'\r\n}\r\n\r\nexport default withStyles(styles)(AdapterStatus);\r\n","import React from 'react'\r\nimport clsx from 'clsx'\r\n\r\nimport { Line } from 'react-chartjs-2'\r\n// eslint-disable-next-line\r\nimport chartjs_colorschemes from 'chartjs-plugin-colorschemes'\r\n// eslint-disable-next-line\r\nimport chartjs_zoom from 'chartjs-plugin-zoom'\r\n\r\nimport deLocale from 'date-fns/locale/de'\r\nimport DateFnsUtils from '@date-io/date-fns'\r\n\r\nimport i18n from '../i18n'\r\nimport helpers from '../helpers/timeConverter'\r\n\r\nimport CircularProgress from '@material-ui/core/CircularProgress'\r\nimport Button from '@material-ui/core/Button'\r\nimport ButtonGroup from '@material-ui/core/ButtonGroup'\r\nimport Alert from '@material-ui/lab/Alert'\r\nimport Tooltip from '@material-ui/core/Tooltip'\r\nimport Paper from '@material-ui/core/Paper'\r\nimport Divider from '@material-ui/core/Divider'\r\nimport { MuiPickersUtilsProvider, DateTimePicker } from '@material-ui/pickers'\r\nimport InputBase from '@material-ui/core/InputBase'\r\nimport Select from '@material-ui/core/Select'\r\nimport MenuItem from '@material-ui/core/MenuItem'\r\nimport IconButton from '@material-ui/core/IconButton'\r\nimport CalendarIcon from '@material-ui/icons/Event'\r\nimport CalendarTodayIcon from '@material-ui/icons/EventAvailable'\r\nimport HistoryIcon from '@material-ui/icons/History'\r\nimport FastRewindIcon from '@material-ui/icons/FastRewind'\r\n//import DisablePan from '@material-ui/icons/SelectAll'\r\n//import DisableZoom from '@material-ui/icons/LocationDisabled'\r\nimport ResetZoom from '@material-ui/icons/ZoomOutMap'\r\nimport LiveUpdates from '@material-ui/icons/Update'\r\n\r\n\r\n\r\n/*\r\n * STYLES\r\n */\r\nimport { withStyles } from '@material-ui/core/styles';\r\nconst styles = theme => ({\r\n\tloading: {\r\n\t\tposition: 'absolute',\r\n\t\tbackgroundColor: 'rgba(0, 0, 0, 0.3)',\r\n\t\twidth: '100%',\r\n\t\theight: '100%',\r\n\t\tdisplay: 'flex',\r\n\t\talignItems: 'center',\r\n\t\tjustifyContent: 'center',\r\n\t},\r\n\terrorMessage: {\r\n\t\tmarginBottom: 5,\r\n\t\tmarginRight: 15,\r\n\t\twidth: '100%'\r\n\t},\r\n\ttoolbar: {\r\n\t\tdisplay: 'flex'\r\n\t},\r\n\ttoolbarButtons: {\r\n\t\tdisplay: 'initial',\r\n\t\twhiteSpace: 'nowrap'\r\n\t},\r\n\toptions: {\r\n\t\tdisplay: 'flex',\r\n\t\tjustifyContent: 'center',\r\n\t},\r\n\tdatePicker: {\r\n\t\tpadding: '2px 4px',\r\n\t\tdisplay: 'flex',\r\n\t\talignItems: 'center',\r\n\t\tmargin: 2\r\n\t},\r\n\tinput: {\r\n\t\tmarginLeft: theme.spacing(1),\r\n\t\tflex: 1,\r\n\t},\r\n\tselect: {\r\n\t\twidth: 100\r\n\t},\r\n\ticon: {\r\n\t\tmargin: 10,\r\n\t},\r\n\ticonButton: {\r\n\t\tpadding: 10,\r\n\t},\r\n\tdivider: {\r\n\t\tmargin: '15px 0',\r\n\t},\r\n\tdividerVertical: {\r\n\t\theight: 28,\r\n\t\tmargin: 4,\r\n\t},\r\n\tbutton: {\r\n\t\tbackgroundColor: theme.palette.primary.main,\r\n\t\tcolor: '#fff !important',\r\n\t\tmargin: '4px'\r\n\t},\r\n\tbuttonDisabled: {\r\n\t\tbackgroundColor: '#eee',\r\n\t\tmargin: '4px'\r\n\t}\r\n});\r\n\r\n\r\nclass Chart extends React.Component {\r\n\t\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\t\r\n\t\t// chart settings\r\n\t\tthis.chartFilter = this.props.settings.chartFilter || {};\r\n\t\tthis.chartConfig = this.props.settings.chartConfig || {};\r\n\t\t\r\n\t\tthis.chartConfig.yAxes = this.chartConfig.yAxes || [];\r\n\t\tthis.chartConfig.yAxes.unshift({\r\n\t\t\tid: 'left',\r\n\t\t\ttype: 'linear',\r\n\t\t\tposition: 'left',\r\n\t\t\tticks: {\r\n\t\t\t\tcallback: value => (this.chartConfig.yLeftAxisUnitBefore || '') + Number.parseFloat(value).toFixed(1) + (this.chartConfig.yLeftAxisUnitAfter || '')\r\n\t\t\t}\r\n\t\t});\r\n\t\t\r\n\t\t// states\r\n\t\tthis.state = {\r\n\t\t\tloading: true,\r\n\t\t\terrors: [],\r\n\t\t\t\r\n\t\t\tdatePicker: false,\r\n\t\t\tselectedTimeRangeValue: (this.chartFilter && this.chartFilter.selectedTimeRangeValue) || 1,\r\n\t\t\tselectedTimeRangeUnit: (this.chartFilter && this.chartFilter.selectedTimeRangeUnit) || 'days',\r\n\t\t\tselectedDateTime: (this.chartFilter && this.chartFilter.selectedDateTime && new Date(this.chartFilter.selectedDateTime)) || new Date(),\r\n\t\t\tdateNow: this.chartFilter && this.chartFilter.selectedDateTime ? false : true,\r\n\t\t\t\r\n\t\t\tchartLabels: [],\r\n\t\t\tchartData: {\r\n\t\t\t\tlabels: [],\r\n\t\t\t\tdatasets: []\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\tchartPan: true,\r\n\t\t\tchartZoom: true\r\n\t\t}\r\n\t\t\r\n\t\t//\r\n\t\tthis.timer = null;\r\n\t\tthis.timeRangeRef = React.createRef();\r\n\t\t\r\n\t\t// chart instance options\r\n\t\tthis.chartRef = React.createRef();\r\n\t\tthis.chartUpdates = {};\r\n\t\tthis.chartOptions = {\r\n\t\t\tmaintainAspectRatio: false,\r\n\t\t\tspanGaps: true,\r\n\t\t\tlegend: {\r\n\t\t\t\tonClick: this.legendClickHandler.bind(this)\r\n\t\t\t},\r\n\t\t\ttooltips: {\r\n\t\t\t\tcallbacks: {\r\n\t\t\t\t\tlabel: (item, data) => data.datasets[item.datasetIndex].label + ': ' + item.value + data.datasets[item.datasetIndex].unit\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tscales: {\r\n\t\t\t\tyAxes: this.chartConfig.yAxes\r\n\t\t\t},\r\n\r\n\t\t\tplugins: {\r\n\t\t\t\tcolorschemes: {\r\n\t\t\t\t\tscheme: 'brewer.SetOne9'\r\n\t\t\t\t},\r\n\t\t\t\tzoom: {\r\n\t\t\t\t\t// Container for pan options\r\n\t\t\t\t\tpan: {\r\n\t\t\t\t\t\t// Boolean to enable panning\r\n\t\t\t\t\t\tenabled: true,\r\n\r\n\t\t\t\t\t\t// Panning directions\r\n\t\t\t\t\t\tmode: 'xy'\r\n\t\t\t\t\t},\r\n\t\t\t\t\t\r\n\t\t\t\t\t// Container for zoom options\r\n\t\t\t\t\tzoom: {\r\n\t\t\t\t\t\t// Boolean to enable zooming\r\n\t\t\t\t\t\tenabled: true,\r\n\r\n\t\t\t\t\t\t// Zooming directions.\r\n\t\t\t\t\t\tmode: 'xy'\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t};\r\n\t}\r\n\t\r\n\tcomponentDidMount() {\r\n\t\t\r\n\t\t// request initial history data\r\n\t\tlet options = { ...this.getTimeRange(), axis: this.getAxis() };\r\n\t\t\r\n\t\tthis.props.devices.forEach(device => {\r\n\t\t\tdevice.label = device.name + ' (' + i18n.t(device.primaryStateKey) + ')';\r\n\t\t\tdevice.requestDeviceStateHistory(device.options.history || null, true, { 'start': options.start, 'end': options.end, 'step': options.step, 'aggregate': 'average', 'ignoreNull': true }).catch(err => {\r\n\t\t\t\tconsole.error(err);\r\n\t\t\t});\r\n\t\t\t\r\n\t\t\t// add listeners for newly requested data\r\n\t\t\tdevice.on('historyChange', (stateKey, history, state) => {\r\n\t\t\t\t\r\n\t\t\t\tthis.addChartGraph(device, history, { ...options, axis: this.getAxis(options.start, options.end) } );\r\n\t\t\t\tthis.setState({ loading: false });\r\n\t\t\t});\r\n\t\t\t\r\n\t\t\t// add listeners for data updates\r\n\t\t\tif (this.props.settings.liveUpdates !== null && this.props.settings.liveUpdates !== false && this.state.dateNow) {\r\n\t\t\t\t\r\n\t\t\t\tdevice.on('stateChange', (stateKey, val, state) => this.updateChartGraph(device, val, { ...options, axis: this.getAxis(options.end, new Date()) } ));\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\t\r\n\tcomponentDidUpdate(prevProps, prevState) {\r\n\t\t\r\n\t\tif (this.state.selectedTimeRangeValue &&\r\n\t\t\t\t(prevState.selectedDateTime !== this.state.selectedDateTime || prevState.selectedTimeRangeValue !== this.state.selectedTimeRangeValue || prevState.selectedTimeRangeUnit !== this.state.selectedTimeRangeUnit)\r\n\t\t\t) {\r\n\t\t\t\r\n\t\t\t// request updated history data\r\n\t\t\tthis.setState({ loading: true, errors: [] });\r\n\t\t\t\r\n\t\t\tclearTimeout(this.timer);\r\n\t\t\tthis.timer = setTimeout(() => {\r\n\t\t\t\t\r\n\t\t\t\tconst options = this.getTimeRange();\r\n\t\t\t\tthis.props.devices.forEach(device => {\r\n\t\t\t\t\tdevice.requestDeviceStateHistory(device.options.history || null, true, { 'start': options.start, 'end': options.end, 'step': options.step, 'aggregate': 'average', 'ignoreNull': true }).catch(err => {\r\n\t\t\t\t\t\tconsole.error(err);\r\n\t\t\t\t\t});\r\n\t\t\t\t});\r\n\t\t\t\t\r\n\t\t\t}, 500);\r\n\t\t}\r\n\t}\r\n\t\r\n\tgetTimeRange() {\r\n\t\t\r\n\t\tconst end = this.state.selectedDateTime.getTime();\r\n\t\tlet timeRange = this.state.selectedTimeRangeValue;\r\n\t\tlet step = 1;\r\n\t\tlet axisTimeFormat = 'dd. MMM yyyy, HH:mm';\r\n\t\t\r\n\t\tswitch(this.state.selectedTimeRangeUnit) {\r\n\t\t\tdefault:\r\n\t\t\t\tbreak;\r\n\t\t\t\r\n\t\t\tcase 'seconds':\r\n\t\t\t\taxisTimeFormat = 'dd. MMM yyyy, HH:mm:ss';\r\n\t\t\t\tbreak;\r\n\t\t\t\t\r\n\t\t\tcase 'minutes':\r\n\t\t\t\taxisTimeFormat = 'dd. MMM yyyy, HH:mm:ss';\r\n\t\t\t\ttimeRange = timeRange*60;\r\n\t\t\t\t//step = step;\r\n\t\t\t\tbreak;\r\n\t\t\t\t\r\n\t\t\tcase 'hours':\r\n\t\t\t\taxisTimeFormat = 'dd. MMM yyyy, HH:mm';\r\n\t\t\t\ttimeRange = timeRange*60*60;\r\n\t\t\t\tstep = step*60;\r\n\t\t\t\tbreak;\r\n\t\t\t\t\r\n\t\t\tcase 'days':\r\n\t\t\t\taxisTimeFormat = 'dd. MMM yyyy, HH:mm';\r\n\t\t\t\ttimeRange = timeRange*60*60*24;\r\n\t\t\t\tstep = step*60*60;\r\n\t\t\t\tbreak;\r\n\t\t\t\t\r\n\t\t\tcase 'months':\r\n\t\t\t\taxisTimeFormat = 'dd. MMM yyyy';\r\n\t\t\t\ttimeRange = timeRange*60*60*24*31;\r\n\t\t\t\tstep = step*60*60*24;\r\n\t\t\t\tbreak;\r\n\t\t\t\t\r\n\t\t\tcase 'years':\r\n\t\t\t\taxisTimeFormat = 'dd. MMM yyyy';\r\n\t\t\t\ttimeRange = timeRange*60*60*24*365;\r\n\t\t\t\tstep = step*60*60*24*31;\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\t\t\r\n\t\treturn {\r\n\t\t\t'axisTimeFormat': axisTimeFormat,\r\n\t\t\t'start': end-timeRange*1000,\r\n\t\t\t'end': end,\r\n\t\t\t'timeRange': timeRange*1000,\r\n\t\t\t'step': step*1000\r\n\t\t};\r\n\t}\r\n\t\r\n\tgetAxis(start, end) {\r\n\t\t\r\n\t\tconst { step, axisTimeFormat } = this.getTimeRange();\r\n\t\tlet axis = {};\r\n\t\t\r\n\t\tfor (let time = start; time <= end; time += step) {\r\n\t\t\taxis[time] = helpers.secondsToDateTime(time/1000, axisTimeFormat);\r\n\t\t}\r\n\t\t\r\n\t\treturn axis;\r\n\t}\r\n\t\r\n\tgroupChartData(chartData, axis) {\r\n\t\t\r\n\t\tlet prevMarker;\r\n\t\tlet data = [];\r\n\t\t\r\n\t\tlet markers = Object.keys(axis);\r\n\t\tmarkers.forEach((marker, i) => {\r\n\t\t\tprevMarker = markers[(i-1 > 0 ? i-1 : 0)];\r\n\t\t\t\r\n\t\t\tfor (let index in chartData) {\r\n\t\t\t\tlet entry = chartData[index];\r\n\t\t\t\tentry.val = parseFloat(entry.val);\r\n\t\t\t\t\r\n\t\t\t\t// \r\n\t\t\t\tif (!entry.ts || entry.val === null) {\r\n\t\t\t\t\tcontinue;\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\t// before range, continue\r\n\t\t\t\tif (prevMarker > entry.ts) {\r\n\t\t\t\t\tcontinue;\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\t// in range\r\n\t\t\t\telse if (prevMarker < entry.ts && entry.ts <= marker) {\r\n\t\t\t\t\tdata[i] = !data[i] ? [ entry.val ] : [ ...data[i], entry.val ]; // parseFloat((data[i] ? ((data[i]+entry.val)/2) : entry.val).toFixed(2));\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\t// beyond range, so next marker\r\n\t\t\t\telse if (entry.ts > marker) {\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\t//\r\n\t\t\tif (!data[i]) {\r\n\t\t\t\t// \r\n\t\t\t}\r\n\t\t\telse if (data[i].length === 1) {\r\n\t\t\t\tdata[i] = data[i][0];\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tdata[i] = data[i].reduce((a,b) => a + b, 0) / data[i].length;\r\n\t\t\t}\r\n\t\t});\r\n\t\t\r\n\t\treturn data;\r\n\t}\r\n\t\r\n\tupdateChartGraph(device, value, options) {\r\n\t\t\r\n\t\tconst chartIndex = this.state.chartLabels.findIndex(entry => entry === device.label);\r\n\t\tif (chartIndex === -1) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\t\r\n\t\tthis.chartUpdates[chartIndex] = this.chartUpdates[chartIndex] || [];\r\n\t\tthis.chartUpdates[chartIndex].push({\r\n\t\t\t'ts': value.ts,\r\n\t\t\t'val': value.val\r\n\t\t});\r\n\t\t\r\n\t\t// process data\r\n\t\tconst data = this.groupChartData(this.chartUpdates[chartIndex], options.axis);\r\n\t\t\r\n\t\t//console.log(value);\r\n\t\t//console.log(options, options.axis, data);\r\n\t\t\r\n\t\t// update chart\r\n\t\tthis.chartRef.current.chartInstance.data.labels = [ ...this.state.chartData.labels, ...Object.values(options.axis) ];\r\n\t\tthis.chartRef.current.chartInstance.data.datasets[chartIndex].data = [ ...this.state.chartData.datasets[chartIndex].data, ...data ];\r\n\t\tthis.chartRef.current.chartInstance.update();\r\n\t}\r\n\t\r\n\taddChartGraph(device, history, options) {\r\n\t\t\r\n\t\t// only add chart if data is given\r\n\t\tif (!history || !history.length) {\r\n\t\t\tlet error = i18n.t('No history data given for %s').replace('%s', device.label) + '!';\r\n\t\t\tthis.setState(prevStates => ({ errors: [ ...prevStates.errors, error ] }));\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\t\r\n\t\t// process data\r\n\t\tconst data = this.groupChartData(history, options.axis);\r\n\t\t\r\n\t\t// update chart\r\n\t\tconst chartIndex = this.state.chartLabels.findIndex(entry => entry === device.label);\r\n\t\tif (chartIndex > -1) {\r\n\t\t\tthis.chartRef.current.chartInstance.data.labels = Object.values(options.axis);\r\n\t\t\tthis.chartRef.current.chartInstance.data.datasets[chartIndex].data = data;\r\n\t\t\tthis.chartRef.current.chartInstance.update();\r\n\t\t}\r\n\t\t\r\n\t\t// index chart\r\n\t\telse {\r\n\t\t\tthis.setState(prevStates => ({ chartLabels: [ ...prevStates.chartLabels, device.label ] }));\r\n\t\t\t\r\n\t\t\t// chart dataset\r\n\t\t\tlet dataSet = {\r\n\t\t\t\tlabel: device.label,\r\n\t\t\t\tunit: device.states[device.primaryStateKey].state.value.unit || '',\r\n\t\t\t\tfill: false,\r\n\t\t\t\t...device.options.graphConfig || {},\r\n\t\t\t\tdata: data\r\n\t\t\t};\r\n\t\t\t\r\n\t\t\t// add data to chart\r\n\t\t\tthis.setState(prevStates => ({\r\n\t\t\t\taxisTimeFormat: options.axisTimeFormat,\r\n\t\t\t\tchartData: {\r\n\t\t\t\t\tlabels: Object.values(options.axis),\r\n\t\t\t\t\tdatasets: [ ...prevStates.chartData.datasets, dataSet ],\r\n\t\t\t\t}\r\n\t\t\t}));\r\n\t\t}\r\n\t}\r\n\t\r\n\tlegendClickHandler(e, legendItem) {\r\n\t\t\r\n\t\tlet index = legendItem.datasetIndex;\r\n\t\tlet ci = this.chartRef.current.chartInstance;\r\n\t\tlet meta = ci.getDatasetMeta(index);\r\n\r\n\t\tmeta.hidden = meta.hidden === null ? !ci.data.datasets[index].hidden : null;\r\n\t\tci.update();\r\n\t\tci.resetZoom();\r\n\t}\r\n\t\r\n\tdisablePan() {\r\n\t\tlet pan = this.chartRef.current.chartInstance.options.plugins.zoom.pan.enabled;\r\n\t\tthis.chartRef.current.chartInstance.options.plugins.zoom.pan.enabled = (pan === false);\r\n\t\tthis.setState({ chartPan: (pan === false) });\r\n\t}\r\n\t\r\n\tdisableZoom() {\r\n\t\tlet zoom = this.chartRef.current.chartInstance.options.plugins.zoom.zoom.enabled;\r\n\t\tthis.chartRef.current.chartInstance.options.plugins.zoom.zoom.enabled = (zoom === false);\r\n\t\tthis.setState({ chartZoom: (zoom === false) });\r\n\t}\r\n\t\r\n\trender() {\r\n\t\tconst { classes, settings } = this.props;\r\n\t\treturn (\r\n\r\n<div>\r\n\t<div className={classes.options}>\r\n\t\r\n\t\t<Paper className={classes.datePicker}>\r\n\t\t\t<Tooltip title={i18n.t('Period shown in Chart')}>\r\n\t\t\t\t<HistoryIcon className={classes.icon} />\r\n\t\t\t</Tooltip>\r\n\t\t\t\r\n\t\t\t<InputBase\r\n\t\t\t\tinputRef={this.timeRangeRef}\r\n\t\t\t\tclassName={classes.input}\r\n\t\t\t\tvalue={this.state.selectedTimeRangeValue}\r\n\t\t\t\tonChange={event => this.setState({ selectedTimeRangeValue: event.target.value })}\r\n\t\t\t\t/>\r\n\t\t\t\r\n\t\t\t<Select\r\n\t\t\t\tvalue={this.state.selectedTimeRangeUnit}\r\n\t\t\t\tonChange={event => this.setState({ selectedTimeRangeUnit: event.target.value })}\r\n\t\t\t\tdisplayEmpty\r\n\t\t\t\tdisableUnderline\r\n\t\t\t\tclassName={classes.select}\r\n\t\t\t\t>\r\n\t\t\t\t\r\n\t\t\t\t<MenuItem value=\"seconds\">{i18n.t('Seconds')}</MenuItem>\r\n\t\t\t\t<MenuItem value=\"minutes\">{i18n.t('Minutes')}</MenuItem>\r\n\t\t\t\t<MenuItem value=\"hours\">{i18n.t('Hours')}</MenuItem>\r\n\t\t\t\t<MenuItem value=\"days\">{i18n.t('Days')}</MenuItem>\r\n\t\t\t\t<MenuItem value=\"months\">{i18n.t('Months')}</MenuItem>\r\n\t\t\t\t<MenuItem value=\"years\">{i18n.t('Years')}</MenuItem>\r\n\t\t\t</Select>\r\n\t\t\t\r\n\t\t\t{/*\r\n\t\t\t<IconButton className={classes.iconButton} onClick={() => this.timeRangeRef.current.focus()}>\r\n\t\t\t\t<CalendarIcon />\r\n\t\t\t</IconButton>\r\n\t\t\t*/}\r\n\t\t</Paper>\r\n\r\n\t\t<Paper className={classes.datePicker}>\r\n\t\t\t<Tooltip title={i18n.t('End date')}>\r\n\t\t\t\t<FastRewindIcon className={classes.icon} />\r\n\t\t\t</Tooltip>\r\n\t\t\t\r\n\t\t\t<MuiPickersUtilsProvider locale={deLocale} utils={DateFnsUtils}>\r\n\t\t\t\t<DateTimePicker\r\n\t\t\t\t\tclassName={classes.input}\r\n\t\t\t\t\tvalue={this.state.selectedDateTime}\r\n\t\t\t\t\tonChange={selectedDateTime => this.setState({ selectedDateTime: selectedDateTime, dateNow: false })}\r\n\t\t\t\t\t\r\n\t\t\t\t\topen={this.state.datePicker}\r\n\t\t\t\t\tonOpen={() => this.setState({ datePicker: true })}\r\n\t\t\t\t\tonClose={() => this.setState({ datePicker: false })}\r\n\t\t\t\t\t\r\n\t\t\t\t\tvariant=\"inline\"\r\n\t\t\t\t\tampm={false}\r\n\t\t\t\t\tformat='dd.MM.yyyy HH:mm'\r\n\t\t\t\t\tInputProps={{\r\n\t\t\t\t\t\tdisableUnderline: true,\r\n\t\t\t\t\t}}\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t\r\n\t\t\t</MuiPickersUtilsProvider>\r\n\t\t\t\r\n\t\t\t<Tooltip title={i18n.t('Select end date')}>\r\n\t\t\t\t<IconButton color=\"primary\" className={classes.iconButton} onClick={() => this.setState({ datePicker: true })}>\r\n\t\t\t\t\t<CalendarIcon />\r\n\t\t\t\t</IconButton>\r\n\t\t\t</Tooltip>\r\n\t\t\t<Divider className={classes.dividerVertical} orientation=\"vertical\" />\r\n\t\t\t<Tooltip title={i18n.t('Select today as end date')}>\r\n\t\t\t\t<IconButton className={classes.iconButton} onClick={() => this.setState({ selectedDateTime: new Date(), dateNow: true })}>\r\n\t\t\t\t\t<CalendarTodayIcon />\r\n\t\t\t\t</IconButton>\r\n\t\t\t</Tooltip>\r\n\t\t</Paper>\r\n\t\t\r\n\t\t<Tooltip title={i18n.t('Live updates are ' + (this.props.settings.liveUpdates !== null && this.props.settings.liveUpdates !== false && this.state.dateNow ? 'on' : 'off'))} placement=\"top\" style={{ display: 'flex' }}>\r\n\t\t\t<span>\r\n\t\t\t\t<Button disabled={true} className={clsx(classes.datePicker, this.props.settings.liveUpdates !== null && this.props.settings.liveUpdates !== false && this.state.dateNow ? classes.button : classes.buttonDisabled)}>\r\n\t\t\t\t\t<LiveUpdates />\r\n\t\t\t\t</Button>\r\n\t\t\t</span>\r\n\t\t</Tooltip>\r\n\t\t\r\n\t</div>\r\n\t<Divider className={classes.divider} />\r\n\t\r\n\t<div className={classes.toolbar}>\r\n\t\t<div className={classes.errorMessage}>\r\n\t\t\t{this.state.errors.length > 0 && <Alert severity=\"error\">{this.state.errors.map((error, i) => [ error, React.createElement('br', { key: 'br-error-' + i }) ])}</Alert>}\r\n\t\t</div>\r\n\t\t\r\n\t\t<ButtonGroup className={classes.toolbarButtons} color=\"primary\">\r\n\t\t{/*\r\n\t\t\t<Button disableElevation={true} variant={this.state.chartPan ? 'contained' : 'outlined'} onClick={this.disablePan.bind(this)}>\r\n\t\t\t\t<Tooltip title={i18n.t(this.state.chartPan ? 'Disable panning' : 'Enable panning')}>\r\n\t\t\t\t\t<DisablePan />\r\n\t\t\t\t</Tooltip>\r\n\t\t\t</Button>\r\n\t\t\t<Button disableElevation={true} variant={this.state.chartZoom ? 'contained' : 'outlined'} onClick={this.disableZoom.bind(this)}>\r\n\t\t\t\t<Tooltip title={i18n.t(this.state.chartZoom ? 'Disable Zoom' : 'Enable Zoom')}>\r\n\t\t\t\t\t<DisableZoom />\r\n\t\t\t\t</Tooltip>\r\n\t\t\t</Button>\r\n\t\t*/}\r\n\t\t\t<Button disableElevation={true} variant=\"contained\" onClick={() => this.chartRef.current.chartInstance.resetZoom()}>\r\n\t\t\t\t<Tooltip title={i18n.t('Reset Zoom')}>\r\n\t\t\t\t\t<ResetZoom />\r\n\t\t\t\t</Tooltip>\r\n\t\t\t</Button>\r\n\t\t</ButtonGroup>\r\n\t</div>\r\n\t\r\n\t<div className={'chart-container'} style={{ position: 'relative', height: settings.chartHeight || '500px' }}>\r\n\t\t{this.state.loading && <div className={classes.loading}>\r\n\t\t\t<CircularProgress />\r\n\t\t</div>}\r\n\t\t\r\n\t\t<Line\r\n\t\t\tref={this.chartRef}\r\n\t\t\tdata={this.state.chartData}\r\n\t\t\toptions={this.chartOptions}\r\n\t\t\t/>\r\n\t\t\t\r\n\t</div>\r\n</div>\r\n\r\n\t\t);\r\n\t}\r\n}\r\n\r\nexport default withStyles(styles)(Chart);\r\n","import React, { useState, useEffect, useRef } from 'react'\r\n\r\nimport { format } from 'date-fns'\r\nimport { de } from 'date-fns/locale'\r\nimport { getSunrise, getSunset } from 'sunrise-sunset-js'\r\n\r\nimport i18n from '../i18n'\r\nimport CircularProgress from '@material-ui/core/CircularProgress'\r\n\r\n\r\nexport default function DateTime(props) {\r\n\tconst { settings } = props;\r\n\t\r\n\tconst refTimer = useRef();\r\n\tconst [DateTime, setDateTime] = useState(format(new Date(), settings.format, { locale: de }));\r\n\tconst [city, setCity] = useState('');\r\n\tconst [sunrise, setSunrise] = useState('');\r\n\tconst [sunset, setSunset] = useState('');\r\n\t\r\n\t// https://date-fns.org/v2.9.0/docs/format\r\n\tsettings.style = { fontSize: '1.5rem', textAlign: 'center', ...settings.style };\r\n\tsettings.format = settings.format || 'dd.MM.yyyy HH:mm:ss';\r\n\tsettings.refresh = settings.format.indexOf('s') > -1 ? 1000 : (settings.format.indexOf('i') > -1 ? 60*1000 : 60*60*1000);\r\n\t\r\n\tuseEffect(() => {\r\n\t\tclearTimeout(refTimer.current);\r\n\t\trefTimer.current = setTimeout(() => setDateTime(format(new Date(), settings.format, { locale: de })), settings.refresh);\r\n\t\t\r\n\t\t//\r\n\t\tif (settings._global.iobroker.latitude && settings._global.iobroker.longitude) {\r\n\t\t\tsetSunrise(getSunrise(settings._global.iobroker.latitude, settings._global.iobroker.longitude));\r\n\t\t\tsetSunset(getSunset(settings._global.iobroker.latitude, settings._global.iobroker.longitude));\r\n\t\t}\r\n\t\t\r\n\t\tif (settings._global.iobroker.city) {\r\n\t\t\tsetCity(settings._global.iobroker.city);\r\n\t\t}\r\n\t\t\r\n\t}, [settings]);\r\n\t\r\n\treturn (\r\n\r\n<div style={settings.style}>\r\n\t{i18n.t('%DateTime').replace(/%DateTime/, DateTime)}\r\n\t\r\n\t{settings.sun !== false && <div style={{ margin: '5px 0', fontSize: '1.2rem' }}>\r\n\t\t\r\n\t\t<span className=\"mdi mdi-city-variant-outline\"></span> {city ? city : <CircularProgress size=\"1.2rem\" />}\r\n\t\t<span style={{ margin: '0 10px' }}></span>\r\n\t\t\r\n\t\t<span className=\"mdi mdi-weather-sunset-up\"></span> {sunrise ? format(sunrise, 'HH:mm') : <CircularProgress size=\"1.2rem\" />}\r\n\t\t<span style={{ margin: '0 10px' }}></span>\r\n\t\t\r\n\t\t<span className=\"mdi mdi-weather-sunset-down\"></span> {sunset ? format(sunset, 'HH:mm') : <CircularProgress size=\"1.2rem\" />}\r\n\t</div>\r\n\t}\r\n\t\r\n</div>\r\n\r\n\t);\r\n}\r\n\r\nexport const Settings = {\r\n\tnoDevicesAllowed: true,\r\n\ttitle: i18n.t('Time'),\r\n\ticon: 'clock-outline'\r\n}\r\n","import React, { useState, useEffect, useRef, useCallback } from 'react'\r\nimport clsx from 'clsx'\r\n\r\nimport L from 'leaflet'\r\nimport { Map as LeafletMap, TileLayer, Marker as LeafletMarker, Tooltip as LeafletTooltip } from 'react-leaflet'\r\n\r\nimport i18n from '../i18n'\r\nimport Box from '@material-ui/core/Box'\r\nimport Typography from '@material-ui/core/Typography'\r\nimport Tooltip from '@material-ui/core/Tooltip'\r\nimport Avatar from '@material-ui/core/Avatar'\r\n\r\n\r\n/*\r\n * STYLES\r\n */\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nconst useStyles = makeStyles(theme => ({\r\n\tmap: {\r\n\t\twidth: '100%',\r\n\t\theight: '100%'\r\n\t},\r\n\tmapOverview: {\r\n\t\tcolor: '#666',\r\n\t\tposition: 'absolute',\r\n\t\tleft: 0,\r\n\t\tbottom: 0,\r\n\t\twidth: '100%',\r\n\t\theight: '60px',\r\n\t\tzIndex: 999,\r\n\t\tdisplay: 'flex',\r\n\t\talignItems: 'center',\r\n\t\t\r\n\t\t'& > *': {\r\n\t\t\tmargin: theme.spacing(1),\r\n\t\t\tcursor: 'pointer',\r\n\t\t},\r\n\t},\r\n\tmapIconContainer: {\r\n\t},\r\n\tmapIconParent: {\r\n\t\tbackgroundColor: '#fff',\r\n\t\tboxShadow: '0 0 0 8px rgba(255, 255, 255, 0.3)',\r\n\t\tborderRadius: '50%',\r\n\t\twidth: '100%',\r\n\t\theight: '100%'\r\n\t},\r\n\tmapIcon: {\r\n\t\tfontSize: '2rem',\r\n\t\tcolor: theme.palette.primary.main,\r\n\t\ttransform: 'translate3d(4px, -4px,0)', /* for fontSize: '2.3rem' -> 'translate3d(2px, -8px,0)', */\r\n\t\tdisplay: 'block',\r\n\t\t\r\n\t\t'&:after': {\r\n\t\t\tcontent: '\"\"',\r\n\t\t\tdisplay: 'block',\r\n\t\t\tpadding: '50% 0%'\r\n\t\t}\r\n\t},\r\n\tmapTooltip: {\r\n\t}\r\n}));\r\n\r\n\r\nexport default function Map(props) {\r\n\tconst { settings, devices } = props;\r\n\tconst classes = useStyles();\r\n\t\r\n\tconst [zoom,] = useState(settings.component.defaultZoom);\r\n\tconst [position,] = useState(settings.component.defaultPosition ? (Array.isArray(settings.component.defaultPosition) ? settings.component.defaultPosition : settings.component.defaultPosition.split(',')) : [ settings._global.iobroker.latitude, settings._global.iobroker.longitude ]);\r\n\tconst [markers, setMarkers] = useState({});\r\n\t\r\n\t// map instance\r\n\tconst map = useRef();\r\n\tconst memoizedMapInitialised = useCallback(function() {map.current = this}, [],);\r\n\t\r\n\t// Marker click in overview\r\n\tconst memoizedHandleClick = useCallback(flyTo => map.current.flyTo(flyTo.split(',')), [],);\r\n\t\r\n\t// get gps position coordinates\r\n\tuseEffect(() => {\r\n\t\tdevices.forEach(device => {\r\n\t\t\t\r\n\t\t\t// request device state\r\n\t\t\tdevice.requestDeviceState('position').catch(err => {\r\n\t\t\t\tconsole.error(err);\r\n\t\t\t\t\r\n\t\t\t\tsetMarkers(prevMarkers => {\r\n\t\t\t\t\tif (!prevMarkers[device.id]) {\r\n\t\t\t\t\t\treturn { ...prevMarkers, [device.id]: null };\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t\treturn prevMarkers;\r\n\t\t\t\t});\r\n\t\t\t});\r\n\t\t\t\r\n\t\t\t// listen for updates\r\n\t\t\tdevice.on('stateChange', (stateKey, state) => {\r\n\t\t\t\t\r\n\t\t\t\tif (stateKey === 'position') {\r\n\t\t\t\t\t\r\n\t\t\t\t\tsetMarkers(prevMarkers => {\r\n\t\t\t\t\t\tif (!prevMarkers[device.id] || prevMarkers[device.id].position !== state.val) {\r\n\t\t\t\t\t\t\tdevice.options.position = state.val;\r\n\t\t\t\t\t\t\treturn { ...prevMarkers, [device.id]: device };\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\treturn prevMarkers;\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t});\r\n\t\r\n\t}, [devices]);\r\n\t\r\n\t// add markers\r\n\tlet mapMarkers = [], mapOverview = [];\r\n\tif (devices.length > 0 && devices.length === Object.keys(markers).length) {\r\n\t\t\r\n\t\tfor (let key in markers) {\r\n\t\t\tlet device = markers[key];\r\n\t\t\tif (device !== null) {\r\n\t\t\t\tlet marker = <Marker key={'marker-' + device.id} position={device.options.position} device={device} settings={settings.component} />\r\n\t\t\t\tmapMarkers.push(marker);\r\n\t\t\t\t\r\n\t\t\t\tlet item = null;\r\n\t\t\t\tif (device.attributes.avatar) {\r\n\t\t\t\t\titem = <Avatar key={'overview-' + device.id} alt={device.name} src={device.attributes.avatar} onClick={() => memoizedHandleClick(device.options.position)} />\r\n\t\t\t\t}\r\n\t\t\t\telse {\r\n\t\t\t\t\tlet state = device.getDeviceState();\r\n\t\t\t\t\tconst icon = device.getIcon(null, state && state.val !== undefined ? state.val : null);\r\n\t\t\t\t\tconst styles = device.getStyle('icon', null, state && state.val !== undefined ? state.val : null);\r\n\t\t\t\t\tconsole.log(state && state.val !== undefined ? state.val : null);\r\n\t\t\t\t\tconsole.log(styles);\r\n\t\t\t\t\t\r\n\t\t\t\t\titem = <Avatar style={styles} key={'overview-' + device.id} alt={device.name} onClick={() => memoizedHandleClick(device.options.position)}><span className={clsx('mdi mdi-' + icon)}></span></Avatar>\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tmapOverview.push(<Tooltip key={'tooltip-' + device.id} title={device.name} aria-label={device.name} arrow>{item}</Tooltip>);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\t\r\n\treturn (\r\n\r\n<React.Fragment>\r\n\t<Box className={classes.mapOverview}>\r\n\t\t<Typography>{i18n.t('Jump to')}:</Typography>\r\n\t\t{mapOverview}\r\n\t</Box>\r\n\t<LeafletMap useFlyTo={true} center={position} zoom={zoom} className={classes.map} whenReady={memoizedMapInitialised}>\r\n\t\t<TileLayer\r\n\t\t\tattribution='&amp;copy <a href=\"http://osm.org/copyright\">OpenStreetMap</a> contributors'\r\n\t\t\turl='https://{s}.tile.osm.org/{z}/{x}/{y}.png'\r\n\t\t\t/>\r\n\t\t\r\n\t\t{mapMarkers}\r\n\t</LeafletMap>\r\n</React.Fragment>\r\n\r\n\t);\r\n}\r\n\r\n\r\nfunction Marker(props) {\r\n\tconst { position, device, settings } = props;\r\n\tconst classes = useStyles();\r\n\t\r\n\tlet markerIcon = null, offset = 40;\r\n\tconsole.info('Marker for ' + device.function + ' ' + device.name + ' added to map.');\r\n\t\r\n\t// Marker with avatar / picture\r\n\tif (device.attributes && device.attributes.avatar && device.attributes.avatar.substr(0, 11) === 'data:image/') {\r\n\t\tmarkerIcon = L.divIcon({\r\n\t\t\tclassName: classes.mapIconContainer,\r\n\t\t\thtml: '<img src=\"' + device.attributes.avatar + '\" class=\"' + classes.mapIconParent + '\" />',\r\n\t\t\ticonSize: [ 64, 64 ]\r\n\t\t});\r\n\t}\r\n\t\r\n\t// Marker with Icon\r\n\telse {\r\n\t\toffset = 30;\r\n\t\tlet state = device.getDeviceState();\r\n\t\tconst icon = device.getIcon(null, state && state.val !== undefined ? state.val : null);\r\n\t\tconst styles = device.getStyle('icon', null, state && state.val !== undefined ? state.val : null);\r\n\t\t\r\n\t\tconsole.log(styles); \r\n\t\tconst useStyles = makeStyles({root: styles}, {name:'testi'});\r\n\t\tconsole.log(useStyles.root); \r\n\t\t\r\n\t\tmarkerIcon = L.divIcon({\r\n\t\t\tclassName: classes.mapIconContainer,\r\n\t\t\thtml: '<div class=\"' + clsx(classes.mapIconParent) + '\"><span class=\"' + clsx(classes.mapIcon, 'mdi mdi-' + icon) + '\"></span></div>',\r\n\t\t\ticonSize: [ 40, 40 ]\r\n\t\t});\r\n\t}\r\n\t\r\n\t// Marker MouseOver / MouseOut (bring tooltip to front if markers overlay)\r\n\tconst memoizedHandleMouseEvent = useCallback(function() {this.closeTooltip().openTooltip()}, [],);\r\n\r\n\treturn (\r\n\r\n<LeafletMarker riseOnHover={true} position={Array.isArray(position) ? position : position.split(',')} icon={markerIcon} onMouseOver={memoizedHandleMouseEvent}>\r\n\t<LeafletTooltip className={classes.mapTooltip} direction={settings.tooltipDirection || 'bottom'} permanent={settings.tooltipPermanent || true} offset={[0,offset]}>\r\n\t\t{device.name}\r\n\t</LeafletTooltip>\r\n</LeafletMarker>\r\n\r\n\t);\r\n}","import React from 'react'\r\n\r\nimport StateList from './StateList'\r\n\r\n\r\nexport default function StateListHorizontal(props) {\r\n\treturn (<StateList horizontal={true} {...props} />);\r\n}\r\n","import React, { useState, useEffect } from 'react'\r\n\r\nimport Connection from '../Connection'\r\nimport i18n from '../i18n'\r\n\r\nimport Grid from '@material-ui/core/Grid'\r\nimport Paper from '@material-ui/core/Paper'\r\nimport Typography from '@material-ui/core/Typography'\r\n\r\n\r\n/*\r\n * STYLES\r\n */\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nconst useStyles = makeStyles(theme => ({\r\n\tpaper: {\r\n\t\twidth: 100,\r\n\t\theight: 160,\r\n\t\tpadding: 5,\r\n\t\ttextAlign: 'center',\r\n\t}\r\n}));\r\n\r\n\r\nexport default function Weather(props) {\r\n\tconst { settings } = props;\r\n\tconst classes = useStyles();\r\n\t\r\n\tconst [data,setData] = useState(null);\r\n\tuseEffect(() => {\r\n\t\t\r\n\t\tConnection.getConnection.getRemoteResource(settings.url).then(\r\n\t\t\tresponse => {\r\n\t\t\t\t\r\n\t\t\t\tif (response.statusCode === 200) {\r\n\t\t\t\t\tsetData(JSON.parse(response.body));\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\terror => console.error(error)\r\n\t\t);\r\n\t\t\r\n\t}, [settings.url]);\r\n\t\r\n\tlet weatherForecast = [];\r\n\t//console.log(data);\r\n\t\r\n\tif (!data) {\r\n\t\treturn null;\r\n\t}\r\n\telse {\r\n\t\tfor (let day in data.day) {\r\n\t\t\tlet forecast = data.day[day];\r\n\t\t\tforecast.title = day === 1 ? i18n.t('today') : (day === 2 ? i18n.t('tomorrow') : forecast.name);\r\n\t\t\t\r\n\t\t\tconst dailyForecast = (\r\n\r\n<Grid key={'day-' + day} item>\r\n\t<Paper className={classes.paper}>\r\n\t\t<Typography variant=\"body1\">\r\n\t\t\t{forecast.title}\r\n\t\t</Typography>\r\n\t\t<Typography variant=\"caption\">\r\n\t\t\t{forecast.date}\r\n\t\t</Typography>\r\n\r\n\r\n\t</Paper>\r\n</Grid>\r\n\r\n\t\t\t);\r\n\t\t\t\r\n\t\t\tweatherForecast.push(dailyForecast);\r\n\t\t}\r\n\t}\r\n\t\r\n\treturn (\r\n\r\n<Grid container justify=\"space-between\" spacing={1}>\r\n\t{weatherForecast}\r\n\t\r\n</Grid>\r\n\r\n\t);\r\n}\r\n\r\nexport const Settings = {\r\n\tnoDevicesAllowed: true,\r\n\ttitle: i18n.t('Weather'),\r\n\ticon: 'weather-partly-cloudy'\r\n}\r\n","import React from 'react'\r\nimport clsx from 'clsx'\r\n\r\nimport helpers from '../helpers/timeConverter'\r\n\r\nimport Divider from '@material-ui/core/Divider'\r\n//import IconButton from '@material-ui/core/IconButton'\r\nimport Fab from '@material-ui/core/Fab'\r\nimport PlayIcon from '@material-ui/icons/PlayArrow'\r\nimport PauseIcon from '@material-ui/icons/Pause'\r\nimport StopIcon from '@material-ui/icons/Stop'\r\nimport SkipPreviousIcon from '@material-ui/icons/SkipPrevious'\r\nimport SkipNextIcon from '@material-ui/icons/SkipNext'\r\n\r\n\r\n/*\r\n * STYLES\r\n */\r\nimport { withStyles } from '@material-ui/core/styles';\r\nconst styles = theme => ({\r\n\tdivider: {\r\n\t\tmargin: '15px -16px'\r\n\t},\r\n\tcontainer: {\r\n\t\tmargin: theme.spacing(0, -2),\r\n\t},\r\n\tnoHeader: {\r\n\t\tmarginTop: theme.spacing(-4),\r\n\t},\r\n\timage: {\r\n\t\theight: '200px',\r\n\t\tdisplay: 'flex',\r\n\t\talignItems: 'flex-end',\r\n\t\tbackgroundPosition: 'center',\r\n\t\tcursor: 'pointer'\r\n\t},\r\n\tnoImage: {\r\n\t\tbackgroundColor: theme.palette.primary.main,\r\n\t\tdisplay: 'flex',\r\n\t\tcursor: 'pointer'\r\n\t},\r\n\tinformation: {\r\n\t\tbackgroundColor: theme.palette.primary.main + '66',\r\n\t\tcolor: '#fff',\r\n\t\tpadding: '10px',\r\n\t\tmargin: 0,\r\n\t\twidth: '100%',\r\n\t\tminHeight: '45px'\r\n\t},\r\n\tinformationLeft: {\r\n\t\twidth: '80%',\r\n\t\tfloat: 'left',\r\n\t\tmargin: 0\r\n\t},\r\n\tinformationRight: {\r\n\t\twidth: '19%',\r\n\t\tfloat: 'right',\r\n\t\tmargin: 0,\r\n\t\ttextAlign: 'right'\r\n\t},\r\n\tlength: {\r\n\t\tbackgroundColor: theme.palette.primary.main,\r\n\t\twidth: '100%',\r\n\t\theight: '7px',\r\n\t},\r\n\tlengthBar: {\r\n\t\tbackgroundColor: theme.palette.secondary.main,\r\n\t\theight: '100%',\r\n\t},\r\n\tcontrols: {\r\n\t\tdisplay: 'flex',\r\n\t\talignItems: 'stretch'\r\n\t},\r\n\tcontrolsBox: {\r\n\t\tdisplay: 'flex',\r\n\t\tjustifyContent: 'center',\r\n\t\talignItems: 'center',\r\n\t\tpaddingTop: '30px'\r\n\t},\r\n\tcontrolsBoxLeft: {\r\n\t\tflex: 1,\r\n\t\tflexDirection: 'column',\r\n\t\talignItems: 'baseline'\r\n\t},\r\n\tcontrolsBoxCenter: {\r\n\t\tflex: 3\r\n\t},\r\n\tcontrolsBoxRight: {\r\n\t\tflex: 1,\r\n\t\tjustifyContent: 'end'\r\n\t},\r\n\tcontrolButton: {\r\n\t\tmargin: '0 5px'\r\n\t},\r\n\tcontrolButtonSmall: {\r\n\t\tmargin: '0 10px',\r\n\t\tfontSize: '1.2rem',\r\n\t\theight: '32px',\r\n\t\twidth: '32px'\r\n\t}\r\n});\r\n\r\n\r\nclass Multimedia extends React.Component {\r\n\t\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\t\r\n\t\tthis.state = {}\r\n\t}\r\n\t\r\n\tcomponentDidMount() {\r\n\t\t\r\n\t\t// get initial states\r\n\t\tfor (let stateKey in this.props.device.states) {\r\n\t\t\tthis.props.device.requestDeviceState(stateKey, true).catch(err => console.error(err));\r\n\t\t}\r\n\t\t\r\n\t\t// receive updates\r\n\t\tthis.props.device.on('stateChange', (stateKey, state) => {\r\n\t\t\t\r\n\t\t\t// duration\r\n\t\t\tif (stateKey === 'duration' && state && state.val.indexOf(':') === -1) {\r\n\t\t\t\tstate.val = helpers.timeToHoursMinutesSeconds(state.val);\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\t// isRunning\r\n\t\t\tif (stateKey === 'isRunning' && state && typeof state.val === 'string') {\r\n\t\t\t\tstate.val = state.val.indexOf('play') > -1;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tthis.setState({ [stateKey]: state }, () => {\r\n\t\t\t\tthis.progress();\r\n\t\t\t});\r\n\t\t});\r\n\t}\r\n\t\r\n\tprogress() {\r\n\t\tclearTimeout(this.progressTimeout);\r\n\t\t\r\n\t\tif (this.state.isRunning && this.state.isRunning.val === true && this.state.progress && this.state.progress.val && this.state.duration && this.state.duration.val) {\r\n\t\t\tthis.progressTimeout = setTimeout(() => {\r\n\t\t\t\tthis.setState(prevState => ({ progress: { ...prevState.progress, val: helpers.timeToSeconds(prevState.progress.val) + 1 }}), () => this.progress());\r\n\t\t\t}, 1000);\r\n\t\t}\r\n\t}\r\n\t\r\n\topenDialog() {\r\n\t\tthis.props.openDialog(this.props.device);\r\n\t}\r\n\t\r\n\tsetDeviceState(stateKey, value) {\r\n\t\tthis.props.device.setDeviceState(stateKey, value).catch(err => console.error(err));\r\n\t}\r\n\t\r\n\trender() {\r\n\t\tconst { classes, noHeader, index, device } = this.props;\r\n\t\tlet styleImage = {}, styleLength = {}, styleLengthBar = {};\r\n\t\t\r\n\t\t// background\r\n\t\tif (this.state.background && this.state.background.val !== '') {\r\n\t\t\tstyleImage.backgroundImage = 'url(' + ((device.options.backgroundUrlPrepend || '') + this.state.background.val) + ')';\r\n\t\t}\r\n\t\t\r\n\t\t// duration\r\n\t\tif (this.state.duration && this.state.duration.val) {\r\n\t\t\tstyleLengthBar.width = ((this.state.progress && this.state.progress.val) || 0) + 'px';\r\n\t\t}\r\n\t\t\r\n\t\tconst playIconElements = this.state.isRunning && this.state.isRunning.val ? [<PauseIcon onClick={this.setDeviceState.bind(this, 'pause', true)} />, <StopIcon />] : [<PlayIcon onClick={this.setDeviceState.bind(this, 'play', true)} />];\r\n\t\t//const repeatIcon = 'repeat'; // repeat, repeat-off, repeat-once\r\n\t\t//const shuffleIcon = 'shuffle-variant'; // shuffle-variant, shuffle-disabled\r\n\t\t//const volumeIcon = 'volume-high'; // volume-variant-off\r\n\t\t\r\n\t\treturn (\r\n\r\n<React.Fragment>\r\n\t\r\n\t{index > 0 && <Divider className={classes.divider} />}\r\n\t<div className={clsx(classes.container, noHeader && classes.noHeader)}>\r\n\t\t\r\n\t\t<div className={clsx(this.state.background && this.state.background.val !== '' ? classes.image : classes.noImage)} style={ styleImage } onClick={this.openDialog.bind(this)}>\r\n\t\t\t\r\n\t\t\t<div className={classes.information}>\r\n\t\t\t\t<p className={classes.informationLeft}>\r\n\t\t\t\t\t{this.state.grandParent && this.state.grandParent.val && [this.state.grandParent.val, <br key={'br-' + device.id} />]}\r\n\t\t\t\t\t{this.state.parent && this.state.parent.val && this.state.parent.val + ' - '}{this.state.title && this.state.title.val}\r\n\t\t\t\t</p>\r\n\t\t\t\t<p className={classes.informationRight}>\r\n\t\t\t\t\t{this.state.progress && helpers.timeToHoursMinutesSeconds(this.state.progress.val)} / {this.state.duration && this.state.duration.val}\r\n\t\t\t\t</p>\r\n\t\t\t</div>\r\n\t\t\t\r\n\t\t</div>\r\n\t\t<div className={classes.length} style={ styleLength }>\r\n\t\t\t<div className={classes.lengthBar} style={ styleLengthBar }></div>\r\n\t\t</div>\r\n\t\t\r\n\t\t<div className={classes.controls}>\r\n\t\t\t<div className={clsx(classes.controlsBox, classes.controlsBoxLeft)}>\r\n\t\t\t\t{/*\r\n\t\t\t\t<IconButton size=\"small\" className={classes.controlButtonSmall}>\r\n\t\t\t\t\t<span className={'mdi mdi-' + repeatIcon}></span>\r\n\t\t\t\t</IconButton>\r\n\t\t\t\t<IconButton size=\"small\" className={classes.controlButtonSmall}>\r\n\t\t\t\t\t<span className={'mdi mdi-' + shuffleIcon}></span>\r\n\t\t\t\t</IconButton>\r\n\t\t\t\t*/}\r\n\t\t\t\t\r\n\t\t\t</div>\r\n\t\t\t<div className={clsx(classes.controlsBox, classes.controlsBoxCenter)}>\r\n\t\t\t\t\r\n\t\t\t\t<Fab className={classes.controlButton} size=\"small\" color=\"secondary\">\r\n\t\t\t\t\t<SkipPreviousIcon onClick={this.setDeviceState.bind(this, 'previous', true)} />\r\n\t\t\t\t</Fab>\r\n\t\t\t\t\r\n\t\t\t\t{playIconElements.map((icon, i) => \r\n\t\t\t\t<Fab key={'icon-' + i} className={classes.controlButton} size=\"large\" color=\"primary\">\r\n\t\t\t\t\t{icon}\r\n\t\t\t\t</Fab>\r\n\t\t\t\t)}\r\n\t\t\t\t\r\n\t\t\t\t<Fab className={classes.controlButton} size=\"small\" color=\"secondary\">\r\n\t\t\t\t\t<SkipNextIcon onClick={this.setDeviceState.bind(this, 'next', true)} />\r\n\t\t\t\t</Fab>\r\n\t\t\t\t\r\n\t\t\t</div>\r\n\t\t\t<div className={clsx(classes.controlsBox, classes.controlsBoxRight)}>\r\n\t\t\t\t{/*\r\n\t\t\t\t<IconButton size=\"small\" className={classes.controlButtonSmall}>\r\n\t\t\t\t\t<span className={'mdi mdi-' + volumeIcon}></span>\r\n\t\t\t\t</IconButton>\r\n\t\t\t\t*/}\r\n\t\t\t\t\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t\t\r\n\t</div>\r\n\r\n</React.Fragment>\r\n\r\n\t\t);\r\n\t}\r\n}\r\n\r\nexport default withStyles(styles)(Multimedia);\r\n","import React from 'react'\r\n\r\nimport MultimediaItem from './MultimediaItem'\r\n\r\n\r\nexport default function StateList(props) {\r\n\tconst { devices, settings } = props;\r\n\treturn devices.map((device, i) => <MultimediaItem key={'MultimediaItem-' + device.id} {...props} index={i} noHeader={i === 0 && settings.icon === null && settings.title === null} device={device} />)\r\n}\r\n","var map = {\n\t\"./de.js\": 333,\n\t\"./en.js\": 334\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 332;","export default {\r\n\t/*\r\n\t * LOADING SCREEN\r\n\t */\r\n\t\"Retrieving settings\": \"Einstellungen werden geladen\",\r\n\t\r\n\t/*\r\n\t * GENERAL\r\n\t */\r\n\t\"last update\": \"letzte Aktualisierung\",\r\n\t\"Updates available\": \"Aktualisierung verfügbar\",\r\n\t\r\n\t/*\r\n\t * STATES\r\n\t */\r\n\t\"on\": \"an\",\r\n\t\"off\": \"aus\",\r\n\t\r\n\t\"user\": \"User\",\r\n\t\"users\": \"Users\",\r\n\t\r\n\t\"door\": \"Tür\",\r\n\t\"window\": \"Fenster\",\r\n\t\r\n\t\"open\": \"offen\",\r\n\t\"closed\": \"geschlossen\",\r\n\t\r\n\t\"turn on\": \"anschalten\",\r\n\t\"power\": \"Geräte Status\",\r\n\t\"trigger\": \"Geräte Status\",\r\n\t\r\n\t\"brightness\": \"Helligkeit\",\r\n\t\"wind\": \"Wind\",\r\n\t\"battery\": \"Batterie\",\r\n\t\r\n\t\"%DateTime\": \"%DateTime Uhr\",\r\n\t\"boost\": \"Boost\",\r\n\t\r\n\t/*\r\n\t * BLINDS\r\n\t */\r\n\t\"blind#level\": \"Behanghöhe\",\r\n\t\"blind#level2\": \"Lamellenposition\",\r\n\t\r\n\t\r\n\t/*\r\n\t * LIGHT\r\n\t */\r\n\t\"light#power\": \"Licht\",\r\n\t\"light#level\": \"Helligkeit\",\r\n\t\"colorTemperature\": \"Farbtemperatur\",\r\n\t\"hue\": \"Farbe\",\r\n\t\"light#rgb\": \"Farbraum Rot-Grün-Blau (RGB)\",\r\n\t\"hex\": \"Farbe\",\r\n\t\r\n\t\r\n\t/*\r\n\t * HEATING\r\n\t */\r\n\t\"temperature\": \"Temperatur\",\r\n\t\"humidity\": \"Luftfeuchtigkeit\",\r\n\t\"setTemperature\": \"eingestellte Temperatur\",\r\n\t\r\n\t\r\n\t/*\r\n\t * DOOR\r\n\t */\r\n\t\"bell\": \"Klingel\",\r\n\t\"lock\": \"Schloß\",\r\n\t\"presence\": \"Präsenz\",\r\n\t\r\n\t\r\n\t/*\r\n\t * HOUSEHOLD\r\n\t */\r\n\t\"running\": \"Gerät läuft\",\r\n\t\"consumption\": \"Verbrauch\"\r\n}","export default {\r\n\t/*\r\n\t * LIGHT\r\n\t */\r\n\t\"level\": \"Brightness\",\r\n\t\"colorTemperature\": \"Color Temperature\",\r\n\t\"hue\": \"Color\",\r\n\t\"color\": \"Color\",\r\n\t\"hex\": \"Color\",\r\n}","\r\nexport default {\r\n\tconfigurations: {\r\n\t\topen: {\r\n\t\t\ticon: {\r\n\t\t\t\t'true': 'door-open',\r\n\t\t\t\t'false': 'door-closed'\r\n\t\t\t},\r\n\t\t\tstate: {\r\n\t\t\t\t'true': 'open',\r\n\t\t\t\t'false': 'closed'\r\n\t\t\t},\r\n\t\t}\r\n\t},\r\n\tcomponents: {\r\n\t},\r\n\tactions: {\r\n\t},\r\n\tstyles: {\r\n\t}\r\n}","import React from 'react'\r\n\r\nimport defaults from './defaults'\r\n\r\n\r\n/*\r\n * COMPONENTS\r\n *\r\n */\r\nfunction HeatingSetTemperatureComponent(props) {\r\n\tconst Level = defaults.components.LevelComponent;\r\n\treturn (\r\n\t\t<Level min={0} max={35} {...props} />\r\n\t);\r\n}\r\n\r\n\r\n\r\nexport default {\r\n\tconfigurations: {\r\n\t\ttemperature: {\r\n\t\t\tvalue: (val) => val.toFixed(1),\r\n\t\t\tunit: ' °C'\r\n\t\t},\r\n\t\tsetTemperature: {\r\n\t\t\tunit: ' °C',\r\n\t\t\ticon: 'thermometer-chevron-up'\r\n\t\t},\r\n\t\thumidity: {\r\n\t\t\tunit: ' %'\r\n\t\t},\r\n\t\tboost: {\r\n\t\t\ticon: 'radiator'\r\n\t\t}\r\n\t},\r\n\tcomponents: {\r\n\t\tsetTemperature: HeatingSetTemperatureComponent\r\n\t},\r\n\tactions: {\r\n\t\tboost: defaults.actions.PowerAction\r\n\t},\r\n\tstyles: {\r\n\t}\r\n}","import React, { useState, useEffect } from 'react'\r\nimport clsx from 'clsx'\r\n\r\nimport i18n from '../i18n'\r\n\r\nimport Slider from '@material-ui/core/Slider'\r\nimport Switch from '@material-ui/core/Switch'\r\nimport Button from '@material-ui/core/Button'\r\n\r\n\r\n/*\r\n * STYLES\r\n */\r\nimport { makeStyles, withStyles } from '@material-ui/core/styles';\r\nconst styles = theme => ({\r\n\tprimaryAction: props => ({\r\n\t\t...props.styles\r\n\t}),\r\n\tsecondaryAction: props => ({\r\n\t\tcolor: '#999',\r\n\t\tfontSize: '14px',\r\n\t\t...props.styles\r\n\t}),\r\n});\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n\tcomponent: {\r\n\t\tpadding: theme.spacing(2, 8, 2, 2)\r\n\t},\r\n\tsliderMarkLabel: {\r\n\t\t[theme.breakpoints.down('md')]: {\r\n\t\t\tdisplay: 'none',\r\n\t\t\t'&:nth-child(5)': { display: 'block' },\r\n\t\t\t'&:nth-child(15)': { display: 'block' },\r\n\t\t\t'&:nth-child(25)': { display: 'block' }\r\n\t\t}\r\n\t}\r\n}));\r\n\r\n\r\n/*\r\n * ACTIONS\r\n *\r\n */\r\nconst Action = withStyles(styles)(props => {\r\n\tconst { classes, device, state, stateKey } = props;\r\n\treturn (\r\n\r\n<span className={clsx((stateKey === device.primaryStateKey && classes.primaryAction) || (stateKey === device.secondaryStateKey && classes.secondaryAction))}>\r\n\t{state && state.value} {state && state.unit}\r\n</span>\r\n\r\n\t);\r\n});\r\n\r\nfunction PowerAction(props) {\r\n\tconst { device, stateKey, stateVal, onChange: parentOnChange } = props;\r\n\t\r\n\tconst onChange = (e) => {\r\n\t\tsetChecked(e.target.checked);\r\n\t\tdevice.setDeviceState(stateKey, e.target.checked).catch(err => console.error(err));\r\n\t}\r\n\t\r\n\tconst [checked, setChecked] = useState(stateVal);\r\n\tuseEffect(() => setChecked(stateVal), [stateVal]);\r\n\t\r\n\treturn (\r\n\r\n<Switch\r\n\tchecked={checked}\r\n\tonChange={parentOnChange || onChange}\r\n\tvalue={checked !== true}\r\n\tcolor=\"primary\"\r\n\t/>\r\n\r\n\t);\r\n}\r\n\r\nfunction TriggerAction(props) {\r\n\tconst { device, stateKey, stateVal } = props;\r\n\t\r\n\tconst onClick = () => {\r\n\t\tdevice.setDeviceState(stateKey, true).catch(err => console.error(err));\r\n\t}\r\n\t\r\n\t//\r\n\tif (stateVal === true || stateVal > 0) {\r\n\t\treturn <Action {...props} onChange={null} />;\r\n\t}\r\n\t\r\n\tconst icon = 'power';\r\n\treturn (\r\n\r\n<Button\r\n\tvariant=\"outlined\"\r\n\tcolor=\"primary\"\r\n\tsize=\"small\"\r\n\tstartIcon={<span className={'mdi mdi-' + icon}></span>}\r\n\tonClick={onClick}\r\n\t>\r\n\t\r\n\t{i18n.t('turn on')}\r\n</Button>\r\n\r\n\t);\r\n}\r\n\r\n\r\n/*\r\n * COMPONENTS\r\n *\r\n */\r\nfunction Label(props) {\r\n\tconst { label, br } = props;\r\n\tconst linebreak = br || false;\r\n\t\r\n\treturn (\r\n\t\r\n<React.Fragment>\r\n\t{label}\r\n\t{linebreak && <br />}\r\n</React.Fragment>\r\n\t\r\n\t);\r\n}\r\n\r\nfunction Component(props) {\r\n\tconst { title, children } = props;\r\n\tconst classes = useStyles();\r\n\t\r\n\treturn (\r\n\r\n<React.Fragment>\r\n\t<Label label={title} />\r\n\t<div className={classes.component}>\r\n\t\t{children}\r\n\t\r\n\t</div>\r\n</React.Fragment>\r\n\r\n\t);\r\n}\r\n\r\nfunction LevelComponent(props) {\r\n\tlet { device, stateKey, stateVal, title, min, max, step, markSteps } = props;\r\n\tconst classes = useStyles();\r\n\t\r\n\tconst onChange = (e, val) => {\r\n\t\tsetLevel(val);\r\n\t\tdevice.setDeviceState(stateKey, val).catch(err => console.error(err));\r\n\t}\r\n\t\r\n\tconst [level, setLevel] = useState(stateVal);\r\n\tuseEffect(() => setLevel(stateVal), [stateVal]);\r\n\t\r\n\t// default settings\r\n\tmin = min || 0;\r\n\tmax = max || 100;\r\n\tstep = step || 1;\r\n\tmarkSteps = markSteps || 11; // 0 to 10\r\n\tlet markStep = ((max-min)/(markSteps-1)) || 10;\r\n\treturn (\r\n\r\n<Component title={title || stateKey }>\r\n\t<Slider\r\n\t\tclasses={{ markLabel: classes.sliderMarkLabel }}\r\n\t\t//onChange\r\n\t\tonChangeCommitted={onChange}\r\n\t\tdefaultValue={level}\r\n\t\tvalueLabelDisplay=\"auto\"\r\n\t\tmarks={[...Array(markSteps).keys()].map(number => ({ 'value': min+number*markStep, 'label': min+number*markStep }))}\r\n\t\tmin={min}\r\n\t\tmax={max}\r\n\t\tstep={step}\r\n\t/>\r\n\r\n</Component>\r\n\r\n\t);\r\n}\r\n\r\n\r\n\r\nexport default {\r\n\tconfigurations: {\r\n\t\t_any: {\r\n\t\t\tvalue: (val) => val.toString(),\r\n\t\t\t//unit\r\n\t\t\t//icon\r\n\t\t\t//state\r\n\t\t},\r\n\t\tbattery: {\r\n\t\t\tunit: ' %',\r\n\t\t\ticon: 'battery-medium'\r\n\t\t},\r\n\t\tdoor: {\r\n\t\t\ticon: {\r\n\t\t\t\t'true': 'door-open',\r\n\t\t\t\t'false': 'door-closed'\r\n\t\t\t},\r\n\t\t\tstate: {\r\n\t\t\t\t'true': 'open',\r\n\t\t\t\t'false': 'closed'\r\n\t\t\t},\r\n\t\t},\r\n\t\thumidity: {\r\n\t\t\tunit: ' %',\r\n\t\t\ticon: 'water-percent'\r\n\t\t},\r\n\t\tlevel: {\r\n\t\t\tunit: ' %'\r\n\t\t},\r\n\t\tposition: {\r\n\t\t\ticon: 'map-marker'\r\n\t\t},\r\n\t\tpower: {\r\n\t\t\tstate: {\r\n\t\t\t\t'true': 'on',\r\n\t\t\t\t'false': 'off'\r\n\t\t\t},\r\n\t\t\ticon: 'power'\r\n\t\t},\r\n\t\ttemperature: {\r\n\t\t\tunit: ' °C',\r\n\t\t\ticon: 'thermometer'\r\n\t\t},\r\n\t\ttrigger: {\r\n\t\t\tstate: {\r\n\t\t\t\t'true': 'on',\r\n\t\t\t\t'false': 'off'\r\n\t\t\t},\r\n\t\t\ticon: 'power'\r\n\t\t},\r\n\t\twind: {\r\n\t\t\tunit: ' km/h',\r\n\t\t\ticon: 'weather-windy'\r\n\t\t}\r\n\t},\r\n\tcomponents: {\r\n\t\tLabel,\r\n\t\tComponent,\r\n\t\tLevelComponent,\r\n\t\t\r\n\t\tlevel: LevelComponent\r\n\t},\r\n\tactions: {\r\n\t\tAction,\r\n\t\tPowerAction,\r\n\t\tTriggerAction,\r\n\t\t\r\n\t\tpower: PowerAction,\r\n\t\ttrigger: TriggerAction\r\n\t},\r\n\tstyles: {\r\n\t\t_any: {\r\n\t\t\t//icon: {},\r\n\t\t\tstate: {\r\n\t\t\t\ttrue: {\r\n\t\t\t\t\t'color': '#090',\r\n\t\t\t\t\t'fontWeight': 'bold'\r\n\t\t\t\t},\r\n\t\t\t\tfalse: {\r\n\t\t\t\t\t'color': '#999'\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n}","\r\nexport default {\r\n\tconfigurations: {\r\n\t\tposition: {\r\n\t\t\ticon: 'home'\r\n\t\t}\r\n\t},\r\n\tcomponents: {\r\n\t},\r\n\tactions: {\r\n\t},\r\n\tstyles: {\r\n\t}\r\n}","\r\nexport default {\r\n\tconfigurations: {\r\n\t\tposition: {\r\n\t\t\ticon: 'account'\r\n\t\t}\r\n\t},\r\n\tcomponents: {\r\n\t},\r\n\tactions: {\r\n\t},\r\n\tstyles: {\r\n\t}\r\n}","\r\nexport default {\r\n\tconfigurations: {\r\n\t\topen: {\r\n\t\t\ticon: {\r\n\t\t\t\t'true': 'window-open-variant',\r\n\t\t\t\t'false': 'window-closed-variant'\r\n\t\t\t},\r\n\t\t\tstate: {\r\n\t\t\t\t'true': 'open',\r\n\t\t\t\t'false': 'closed'\r\n\t\t\t},\r\n\t\t}\r\n\t},\r\n\tcomponents: {\r\n\t},\r\n\tactions: {\r\n\t},\r\n\tstyles: {\r\n\t}\r\n}","import React from 'react'\r\n\r\nimport Grid from '@material-ui/core/Grid'\r\n\r\n\r\n/*\r\n * STYLES\r\n */\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nconst useStyles = makeStyles(theme => ({\r\n\tgridContainer: {\r\n\t\tpaddingLeft: theme.spacing(1),\r\n\t\t[theme.breakpoints.down('md')]: {\r\n\t\t\tpaddingLeft: theme.spacing(0.4)\r\n\t\t}\r\n\t}\r\n}));\r\n\r\n\r\nexport default function GridContainer(props) {\r\n\tconst { contents = {} } = props;\r\n\t\r\n\tconst classes = useStyles();\r\n\tconst columns = Object.keys(contents).length;\r\n\t\r\n\tlet grid = [];\r\n\tfor (let column = 1; column <= columns; column++) {\r\n\t\t\r\n\t\tif (!contents[column]) {\r\n\t\t\tconsole.warn('No content for column #' + column + '!');\r\n\t\t\tcontinue;\r\n\t\t}\r\n\t\t\r\n\t\tgrid.push(\r\n\t\t\t<Grid key={column} item\t\t\t\t// @see https://material-ui.com/customization/breakpoints/\r\n\t\t\t\txs={12}\t\t\t\t\t\t\t//    0 -  600px\r\n\t\t\t\tsm={6}\t\t\t\t\t\t\t//  600 -  960px\r\n\t\t\t\tmd={6}\t\t\t\t\t\t\t//  960 - 1280px\r\n\t\t\t\tlg={Math.round(12/columns)}\t\t// 1280 - 1920px\r\n\t\t\t\txl={Math.round(12/columns)}\t\t// \t\t> 1920px\r\n\t\t\t\t>\r\n\t\t\t\t\r\n\t\t\t\t{contents[column]}\r\n\t\t\t</Grid>\r\n\t\t);\r\n\t}\r\n\t\r\n\treturn (\r\n\r\n<Grid container spacing={0} className={classes.gridContainer}>\r\n\t{grid}\r\n</Grid>\r\n\r\n\t);\r\n}\r\n","import React from 'react';\r\nimport clsx from 'clsx';\r\n\r\nimport Snackbar from '@material-ui/core/Snackbar';\r\nimport SnackbarContent from '@material-ui/core/SnackbarContent';\r\nimport IconButton from '@material-ui/core/IconButton';\r\n\r\nimport CloseIcon from '@material-ui/icons/Close';\r\nimport CheckCircleIcon from '@material-ui/icons/CheckCircle';\r\nimport WarningIcon from '@material-ui/icons/Warning';\r\nimport ErrorIcon from '@material-ui/icons/Error';\r\nimport InfoIcon from '@material-ui/icons/Info';\r\n\r\n\r\n\r\n\r\n/*\r\n * STYLES\r\n */\r\nimport { amber, green } from '@material-ui/core/colors';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nconst useStyles = makeStyles(theme => ({\r\n\tsuccess: {\r\n\t\tbackgroundColor: green[600],\r\n\t},\r\n\terror: {\r\n\t\tbackgroundColor: theme.palette.error.dark,\r\n\t},\r\n\tinfo: {\r\n\t\tbackgroundColor: theme.palette.primary.main,\r\n\t},\r\n\twarning: {\r\n\t\tbackgroundColor: amber[700],\r\n\t},\r\n\ticon: {\r\n\t\tfontSize: 20,\r\n\t},\r\n\ticonVariant: {\r\n\t\topacity: 0.9,\r\n\t\tmarginRight: theme.spacing(1),\r\n\t},\r\n\tmessage: {\r\n\t\tdisplay: 'flex',\r\n\t\talignItems: 'center',\r\n\t},\r\n}));\r\n\r\n\r\nconst variantIcon = {\r\n\tsuccess: CheckCircleIcon,\r\n\twarning: WarningIcon,\r\n\terror: ErrorIcon,\r\n\tinfo: InfoIcon,\r\n};\r\n\r\n\r\nexport default function StatusSnackbar(props) {\r\n\tconst classes = useStyles();\r\n\tlet { className, open, autoHideDuration, message, closeButton, onClose, variant, ...other } = props;\r\n\tconst Icon = variantIcon[variant];\r\n\t\r\n\topen = open || true;\r\n\tautoHideDuration = autoHideDuration || null;\r\n\treturn (\r\n\r\n<Snackbar\r\n\tanchorOrigin={{\r\n\t\tvertical: 'bottom',\r\n\t\thorizontal: 'center',\r\n\t}}\r\n\topen={open}\r\n\tautoHideDuration={autoHideDuration}\r\n\tonClose={onClose}\r\n\t>\r\n\t<SnackbarContent\r\n\t\tclassName={clsx(classes[variant], className)}\r\n\t\tmessage={\r\n\t\t\t<span id=\"client-snackbar\" className={classes.message}>\r\n\t\t\t\t<Icon className={clsx(classes.icon, classes.iconVariant)} />\r\n\t\t\t\t{message}\r\n\t\t\t</span>\r\n\t\t}\r\n\t\taction={closeButton && [\r\n\t\t\t<IconButton key=\"close\" aria-label=\"close\" color=\"inherit\" onClick={onClose}>\r\n\t\t\t\t<CloseIcon className={classes.icon} />\r\n\t\t\t</IconButton>,\r\n\t\t]}\r\n\t\t{...other}\r\n\t\t/>\r\n\t\t\r\n</Snackbar>\r\n\r\n\t);\r\n}","export default {\r\n\t\"iobrokerWebAdapterUrl\": \"https://192.168.178.29:8082\"\r\n}","\r\nexport default {\r\n\tdefaults: require('./defaults').default,\r\n\t\r\n\tblind: require('./blind').default,\r\n\tdoor: require('./door').default,\r\n\theating: require('./heating').default,\r\n\tjalousie: require('./blind').default,\r\n\tlight: require('./light').default,\r\n\tlocation: require('./location').default,\r\n\tuser: require('./user').default,\r\n\twindow: require('./window').default\r\n}","import EventEmitter from 'events'\r\nimport functions from './functions'\r\n\r\n\r\n/**\r\n * Function\r\n *\r\n * @param\t{String}\t\tfunctionType\r\n * @return\t{Function}\r\n *\r\n */\r\nexport default class Function extends EventEmitter {\r\n\t\r\n\tconstructor(functionType) {\r\n\t\tsuper();\r\n\t\t\r\n\t\tthis.function = functionType;\r\n\t\t\r\n\t\tif (!this.function) {\t\r\n\t\t\tthrow new Error('No function given!');\r\n\t\t}\r\n\t\t\r\n\t\tthis.functionId = this.function.toLowerCase();\r\n\t\t\r\n\t\t// configuration\r\n\t\tthis.defaults = functions['defaults'].configurations;\r\n\t\tthis.configurations = (functions[this.functionId] && functions[this.functionId].configurations) || {};\r\n\t\t\r\n\t\t// styles\r\n\t\tthis.defaultStyles = functions['defaults'].styles;\r\n\t\tthis.styles = (functions[this.functionId] && functions[this.functionId].styles) || {};\r\n\t\t\r\n\t\t// components and actions\r\n\t\tthis.components = { ...functions['defaults'].components, ...(functions[this.functionId] && functions[this.functionId].components) || {} };\r\n\t\tthis.actions = { ...functions['defaults'].actions, ...(functions[this.functionId] && functions[this.functionId].actions) || {} };\r\n\t}\r\n\t\r\n\t/**\r\n\t *\r\n\t *\r\n\t * @return\t{Mixed}\r\n\t * @private\r\n\t */\r\n\t_applyFunction(key, val) {\r\n\t\treturn this._isFunction(key) ? key(val) : val;\r\n\t}\r\n\t\r\n\t/**\r\n\t *\r\n\t *\r\n\t * @return\t{String}\r\n\t * @private\r\n\t */\r\n\t_getValueFromSettings(settings, defaults = '') {\r\n\t\t\r\n\t\tfor (let key in settings) {\r\n\t\t\tif (settings[key] !== undefined) {\r\n\t\t\t\treturn settings[key];\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\treturn defaults;\r\n\t}\r\n\t\r\n\t/**\r\n\t *\r\n\t *\r\n\t * @return\t{Boolean}\r\n\t * @private\r\n\t */\r\n\t_isFunction(key) {\r\n\t\treturn key && typeof key === 'function';\r\n\t}\r\n\t\r\n\t/**\r\n\t *\r\n\t *\r\n\t * @return\t{Boolean}\r\n\t * @private\r\n\t */\r\n\t_isValue(val) {\r\n\t\treturn val !== undefined; // || val === null || val === false; // null is considered a value, so it can be used to actually null the output\r\n\t}\r\n\t\r\n\t/**\r\n\t *\r\n\t *\r\n\t * @return\t{Object}\r\n\t * @private\r\n\t */\r\n\t_setObjectStructure(obj, defaultValue = undefined) {\r\n\t\t\r\n\t\tif (!obj || typeof obj != 'object') {\r\n\t\t\tobj = { 'default': obj || defaultValue };\r\n\t\t}\r\n\t\telse if (typeof obj == 'object' && !obj.default) {\r\n\t\t\tobj.default = defaultValue;\r\n\t\t}\r\n\t\t\r\n\t\treturn obj;\r\n\t}\r\n}\r\n","export default {\r\n\t\"hm-rpc\": \"HomeMatic\",\r\n}","import React from 'react'\r\nimport i18n from './i18n'\r\nimport Function from './Function'\r\nimport Adapters from './Adapters'\r\n\r\nimport { formatDistanceToNow } from 'date-fns'\r\nimport { de } from 'date-fns/locale'\r\n\r\n\r\n/**\r\n * Device\r\n *\r\n * @param\t{Object}\tdeviceProperties\r\n * @param\t{String}\tdeviceProperties.id\r\n * @param\t{String}\tdeviceProperties.name\r\n * @param\t{String}\t[deviceProperties.room=null]\r\n * @param\t{String}\tdeviceProperties.function\r\n * @param\t{Object}\tdeviceProperties.states\r\n * @param\t{Object}\t[deviceProperties.attributes={}]\r\n * @param\t{Object}\tdeviceProperties.options\r\n * @param\t{Object}\tsocket\r\n * @return\t{Device}\r\n *\r\n */\r\nexport default class Device extends Function {\r\n\t\r\n\tconstructor(deviceProperties, socket, language = window.sysLang || 'en') {\r\n\t\ttry {\r\n\t\t\tsuper(deviceProperties.function);\r\n\t\t}\r\n\t\tcatch(err) {\r\n\t\t\tthrow new Error('No function given for device ' + deviceProperties.name + '!');\r\n\t\t}\r\n\t\t\r\n\t\t// initialise class data\r\n\t\tthis.id = deviceProperties.id;\r\n\t\tthis.name = deviceProperties.name;\r\n\t\t\r\n\t\tthis.room = deviceProperties.room || null;\r\n\t\t\r\n\t\tthis.states = deviceProperties.states;\r\n\t\tthis.options = deviceProperties.options;\r\n\t\tthis.attributes = deviceProperties.attributes || {};\r\n\t\t\r\n\t\tthis.socket = socket;\r\n\t\t\r\n\t\t// verify data\r\n\t\tif (!this.options || typeof this.options !== 'object' || Object.keys(this.options).length === 0) {\r\n\t\t\tthrow new Error('Device' + (deviceProperties.id || deviceProperties.name ? ' ' + (deviceProperties.name || deviceProperties.id) : '') + ' not defined for jarvis!');\r\n\t\t}\r\n\t\telse if (!this.states || typeof this.states !== 'object' || Object.keys(this.states).length === 0) {\r\n\t\t\tthrow new Error('Insufficent properties provided' + (deviceProperties.id || deviceProperties.name ? ' for device ' + (deviceProperties.name || deviceProperties.id) : '') + ' (no states defined)!');\r\n\t\t}\r\n\t\telse if (!this.id || !this.name || !this.function) {\r\n\t\t\tthrow new Error('Insufficent properties provided' + (deviceProperties.id || deviceProperties.name ? ' for device ' + (deviceProperties.name || deviceProperties.id) : '') + ' (no id, name or function defined)!');\r\n\t\t}\r\n\t\telse if (!this.socket) {\t\r\n\t\t\tthrow new Error('No socket given!');\r\n\t\t}\r\n\t\t\r\n\t\t// hierarchy\r\n\t\tthis.children = deviceProperties.children || [];\r\n\t\tthis.parent = deviceProperties.parent || null;\r\n\t\t\r\n\t\t// do some stuff\r\n\t\tthis._setProperties();\r\n\t\tthis.stateSubscriptions = [];\r\n\t\t\r\n\t\t// listen for errors of the device\r\n\t\tthis.on('error', err => console.error('Device error occured!', err));\r\n\t}\r\n\t\r\n\t/**\r\n\t *\r\n\t *\r\n\t * @return\t{Object|String}\r\n\t * @private\r\n\t */\r\n\t_getStateFromKey(stateKey = null, stateType = 'state') {\r\n\t\t\r\n\t\t// already a state object\r\n\t\tif (stateKey && typeof stateKey === 'object') {\r\n\t\t\treturn stateKey;\r\n\t\t}\r\n\t\t\r\n\t\t// get state object\r\n\t\tlet s = this.states[stateKey || this.primaryStateKey];\r\n\t\t\r\n\t\t// state not an object so far\r\n\t\tif (typeof s === 'string') {\r\n\t\t\tthis.states[stateKey || this.primaryStateKey] = { [stateType]: { 'node': s }};\r\n\t\t\ts = this.states[stateKey || this.primaryStateKey];\r\n\t\t}\r\n\t\telse if (typeof s[stateType] === 'string') {\r\n\t\t\tthis.states[stateKey || this.primaryStateKey][stateType] = { 'node': s[stateType] };\r\n\t\t\ts = this.states[stateKey || this.primaryStateKey];\r\n\t\t}\r\n\t\t\r\n\t\t// state not valid\r\n\t\tif (!s || !s[stateType]) {\r\n\t\t\treturn 'Incorrect or non-defined state key for device ' + this.name + '!';\r\n\t\t}\r\n\t\telse if (typeof s[stateType] == 'object' && !s[stateType].node) {\r\n\t\t\treturn 'No ' + stateType + ' specified for device ' + this.name + '!';\r\n\t\t}\r\n\t\t\r\n\t\treturn s;\r\n\t}\r\n\t\r\n\t/**\r\n\t *\r\n\t *\r\n\t * @private\r\n\t */\r\n\t_getConfigurationSetting(config, stateKey, attribute, stateVal) {\r\n\t\t\r\n\t\tif (this[config][stateKey]) {\r\n\t\t\t\r\n\t\t\t// 1. if stateKey (e.g. level, power) is available, try to replace an attribute (e.g. icon, unit or for styles state, icon) based on current state (e.g. true, false)\r\n\t\t\tif (typeof this[config][stateKey][attribute] === 'object') {\r\n\t\t\t\treturn super._isValue(this[config][stateKey][attribute][stateVal]) ? this[config][stateKey][attribute][stateVal] : this[config][stateKey][attribute]['default'];\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\t// 2. if #1 is a function, apply it\r\n\t\t\telse if (super._isFunction(this[config][stateKey][attribute])) {\r\n\t\t\t\treturn this[config][stateKey][attribute](stateVal);\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\t// 3. fallback to stateKey with attribute, if defined but neither an object (thus stateless) nor a function\r\n\t\t\telse if (typeof this[config][stateKey][attribute] === 'string') {\r\n\t\t\t\treturn this[config][stateKey][attribute];\r\n\t\t\t}\r\n\t\t}\r\n\t\telse if (this[config]['_any']) {\r\n\t\t\t\r\n\t\t\t// 4. fallback to _any if no stateKey (e.g. level, power) is given, but consider attribute to be stateful (e.g. true, false)\r\n\t\t\tif (typeof this[config]['_any'][attribute] === 'object') {\r\n\t\t\t\treturn super._isValue(this[config]['_any'][attribute][stateVal]) ? this[config]['_any'][attribute][stateVal] : this[config]['_any'][attribute]['default'];\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\t// 5. if #4 is a function, apply it\r\n\t\t\telse if (super._isFunction(this[config]['_any'][attribute])) {\r\n\t\t\t\treturn this[config]['_any'][attribute](stateVal);\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\t// nothing, return undefined (not null, because this would mean take an empty value)\r\n\t\treturn undefined;\r\n\t}\r\n\t\r\n\t/**\r\n\t *\r\n\t *\r\n\t * @private\r\n\t */\r\n\t_getUserSetting(stateKey, attribute, stateVal, styles = false) {\r\n\t\t\r\n\t\tlet options = this.options;\r\n\t\t\r\n\t\tif (styles) {\r\n\t\t\toptions = this.options['styles'];\r\n\t\t\tlet tmp = attribute;\r\n\t\t\tattribute = stateKey;\r\n\t\t\tstateKey = tmp;\r\n\t\t}\r\n\t\t\r\n\t\tif (options[attribute] && options[attribute][stateKey]) {\r\n\t\t\tif (typeof options[attribute][stateKey] === 'object') {\r\n\t\t\t\treturn super._isValue(options[attribute][stateKey][stateVal]) ? options[attribute][stateKey][stateVal] : options[attribute][stateKey]['default'];\r\n\t\t\t}\r\n\t\t\telse if (super._isFunction(options[attribute][stateKey])) {\r\n\t\t\t\treturn options[attribute][stateKey](stateVal);\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\treturn options[attribute][stateKey];\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\treturn undefined;\r\n\t}\r\n\t\r\n\t/**\r\n\t *\r\n\t *\r\n\t *\r\n\t * @return void\r\n\t * @private\r\n\t *\r\n\t */\r\n\t_setProperties() {\r\n\t\t\r\n\t\tlet states = Object.keys(this.states);\r\n\t\t\r\n\t\t// delete ignored states\r\n\t\tif (this.options.ignoredStates) {\r\n\t\t\tthis.options.ignoredStates = Array.isArray(this.options.ignoredStates) ? this.options.ignoredStates : [this.options.ignoredStates];\r\n\t\t\t\r\n\t\t\tthis.options.ignoredStates.forEach(ignoredState => {\r\n\t\t\t\tif (this.states[ignoredState]) {\r\n\t\t\t\t\tdelete this.states[ignoredState];\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\t\t\r\n\t\t// get hidden states\r\n\t\tthis.options.hiddenStates = [];\r\n\t\tif (this.options.hideStates) {\r\n\t\t\tthis.options.hideStates = Array.isArray(this.options.hideStates) ? this.options.hideStates : [this.options.hideStates];\r\n\t\t\t\r\n\t\t\tthis.options.hideStates.forEach(hideState => {\r\n\t\t\t\tif (this.states[hideState]) {\r\n\t\t\t\t\tthis.options.hiddenStates.push(hideState);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\t\t\r\n\t\t// properties\r\n\t\tthis.primaryStateKey = this.options.primary || states[0];\r\n\t\tthis.secondaryStateKey = this.options.secondary || null;\r\n\t\t\r\n\t\t// bring user settings for value, state, unit, icon and styles in structure\r\n\t\t['value', 'state', 'unit', 'icon', 'styles'].forEach(key => {\r\n\t\t\t\r\n\t\t\tlet stateOrAttribute = this.options[key] && Object.keys(this.options[key])[0];\r\n\t\t\tthis.options[key] = !this.options[key] ? {} : super._setObjectStructure(stateOrAttribute && states.indexOf(stateOrAttribute) > -1 ? this.options[key] : { [this.primaryStateKey]: this.options[key] });\r\n\t\t});\r\n\t\t\r\n\t\t// manufacturer\r\n\t\tthis.states[this.primaryStateKey] = this._getStateFromKey(this.primaryStateKey);\r\n\t\tthis.options.manufacturer = (this.primaryStateKey && Adapters[this.states[this.primaryStateKey].state.node.substr(0, this.states[this.primaryStateKey].state.node.indexOf('.'))]) || 'unknown';\r\n\t\t\r\n\t\t// all options\r\n\t\tthis.options.groups = Array.isArray(this.options.group) ? this.options.group : [this.options.group];\r\n\t\tthis.options.sort = this.options.sort || 999;\r\n\t\t\r\n\t\tthis.options.label = (this.options.label && (typeof this.options.label === 'string' && this.options.label.replace(/%name%/g, this.name))) || this.options.label || this.name;\r\n\t\t//this.options.subtitle = this.options.subtitle;\r\n\t\tthis.options.divider = this.options.divider || false;\r\n\t}\r\n\t\r\n\t/**\r\n\t *\r\n\t *\r\n\t *\r\n\t * @return\t{Object}\r\n\t * @private\r\n\t */\r\n\t_updateDeviceState(stateKey, state) {\r\n\t\t\r\n\t\t// add time changed\r\n\t\tstate.timeChanged = formatDistanceToNow(new Date(state.lc-5*1000), { locale: de, includeSeconds: true, addSuffix: true })\r\n\t\t\r\n\t\t// add unit\r\n\t\tstate.unit = '';\r\n\t\t\r\n\t\t// assign value\r\n\t\tstate.value = state.val;\r\n\t\t\r\n\t\t// mapping of value to state values\r\n\t\t[{ 'value': 'value' }, { 'state': 'value' }, { 'unit': 'unit' }].forEach(pair => {\r\n\t\t\tlet attribute = Object.keys(pair).toString();\r\n\t\t\tlet option = Object.values(pair).toString();\r\n\t\t\tlet settings = {};\r\n\t\t\t\r\n\t\t\t// get user setting\r\n\t\t\tsettings['options'] = this._getUserSetting(stateKey, attribute, state.value);\r\n\t\t\t\r\n\t\t\t// get function setting or fallback to defaults\r\n\t\t\t['configurations', 'defaults'].forEach(config => {\r\n\t\t\t\tsettings[config] = this._getConfigurationSetting(config, stateKey, attribute, state.value);\r\n\t\t\t});\r\n\t\t\t\r\n\t\t\tstate[option] = super._getValueFromSettings(settings, state[option]);\r\n\t\t\t\r\n\t\t});\r\n\t\t\r\n\t\tstate.value = i18n.t(state.value);\r\n\t\treturn state;\r\n\t}\r\n\t\r\n\t/**\r\n\t *\r\n\t *\r\n\t */\r\n\tget(property) {\r\n\t\treturn this[property] || null;\r\n\t}\r\n\t\r\n\t/**\r\n\t *\r\n\t *\r\n\t * @param\t{String}\t[stateKey=this.primaryStateKey]\r\n\t * @return\t{React.Component}\r\n\t */\r\n\tgetAction(stateKey = null, forceDefault = false) {\r\n\t\tstateKey = stateKey || this.primaryStateKey;\r\n\t\t\r\n\t\tconst state = this.states[stateKey].state.value;\r\n\t\tconst stateVal = (state && state.val) || null;\r\n\t\t\r\n\t\tconst Action = (!forceDefault && this.actions[stateKey]) || this.actions.Action;\r\n\t\treturn <Action key={'action-' + this.id + '-' + stateKey} device={this} state={state} stateKey={stateKey} stateVal={stateVal} styles={this.getStyle('state', stateKey, stateVal)} />\r\n\t}\r\n\t\r\n\t/**\r\n\t *\r\n\t *\r\n\t * @param\t{String}\t[stateKey=this.primaryStateKey]\r\n\t * @return\t{React.Component}\r\n\t */\r\n\tgetComponent(stateKey) {\r\n\t\tstateKey = stateKey || this.primaryStateKey;\r\n\t\t\r\n\t\tconst state = this.states[stateKey].state.value;\r\n\t\tconst stateVal = (state && state.val) || null;\r\n\t\t\r\n\t\tconst Component = this.components[stateKey];\r\n\t\treturn (Component && <Component title={i18n.t(this.function + '#' + stateKey)} device={this} stateKey={stateKey} stateVal={stateVal} />) || i18n.t(this.function + '#' + stateKey);\r\n\t}\r\n\t\r\n\t/**\r\n\t *\r\n\t *\r\n\t * @param\t{String}\t[stateKey=this.primaryStateKey]\r\n\t * @param\t{String}\t[stateProperty=null]\r\n\t * @return\t{String}\r\n\t */\r\n\tgetDeviceState(stateKey = null, stateProperty = null) {\r\n\t\tconst s = this.states[stateKey || this.primaryStateKey];\r\n\t\t\r\n\t\tlet deviceState = null;\r\n\t\t\r\n\t\tif (s && s.state && stateProperty !== null && s.state.value !== undefined && s.state.value[stateProperty] !== undefined) {\r\n\t\t\tdeviceState = s.state.value[stateProperty];\r\n\t\t}\r\n\t\telse if (s && s.state && stateProperty === null && s.state.value !== undefined) {\r\n\t\t\tdeviceState = s.state.value;\r\n\t\t}\r\n\t\t\r\n\t\treturn deviceState;\r\n\t}\r\n\t\r\n\t/**\r\n\t * Get an icon based on the current device state (or falls back to a default).\r\n\t *\r\n\t * @param\t{String}\t[stateKey=this.primaryStateKey]\r\n\t * @param\t{String}\t[stateVal=default]\r\n\t * @param\t{String}\t[defaultIcon=null]\r\n\t * @return\t{String}\r\n\t */\r\n\tgetIcon(stateKey, stateVal = '', defaultIcon = '?') {\r\n\t\t\r\n\t\tstateKey = stateKey || this.primaryStateKey;\r\n\t\t\r\n\t\tlet settings = {};\r\n\t\t\r\n\t\t// get user setting\r\n\t\tsettings['options'] = this._getUserSetting(stateKey, 'icon', stateVal);\r\n\t\t\r\n\t\t// get function setting or fallback to defaults\r\n\t\t['configurations', 'defaults'].forEach(config => {\r\n\t\t\tsettings[config] = this._getConfigurationSetting(config, stateKey, 'icon', stateVal);\r\n\t\t});\r\n\t\t\r\n\t\treturn super._getValueFromSettings(settings, defaultIcon);\r\n\t}\r\n\t\r\n\t/**\r\n\t *\r\n\t *\r\n\t */\r\n\tgetOption(option, stateVal = 'default') {\r\n\t\treturn (this.options[option] && (this.options[option][stateVal] || this.options[option]['default'])) || this.options[option] || null;\r\n\t}\r\n\t\r\n\t/**\r\n\t *\r\n\t *\r\n\t */\r\n\tgetStyle(attribute, stateKey = null, stateVal = 'default') {\r\n\t\tlet settings = {};\r\n\t\tstateKey = stateKey || this.primaryStateKey;\r\n\t\t\r\n\t\t// get user setting\r\n\t\tsettings['options'] = this._getUserSetting(stateKey, attribute, stateVal, true);\r\n\t\t\r\n\t\t// get function setting or fallback to defaults\r\n\t\t['styles', 'defaultStyles'].forEach(config => {\r\n\t\t\tsettings[config] = this._getConfigurationSetting(config, stateKey, attribute, stateVal);\r\n\t\t});\r\n\t\t\r\n\t\treturn super._getValueFromSettings(settings, {});\r\n\t}\r\n\t\r\n\t/**\r\n\t * Requests all state values from the backend.\r\n\t *\r\n\t * @param\t{Boolean}\t[subscribe=false]\r\n\t * @return\t{Array<Promises>}\r\n\t *\r\n\t */\r\n\trequestDeviceStates(subscribe = false) {\r\n\t\t\r\n\t\tlet responses = [];\r\n\t\tfor (let stateKey in this.states) {\r\n\t\t\tresponses.push(this.requestDeviceState(stateKey, subscribe));\r\n\t\t}\r\n\t\t\r\n\t\treturn responses;\r\n\t}\r\n\t\r\n\t/**\r\n\t * Requests a state value from the backend.\r\n\t *\r\n\t * @param\t{String}\t[stateKey=this.primaryStateKey]\r\n\t * @param\t{Boolean}\t[subscribe=false]\r\n\t * @return\t{Promise}\r\n\t *\r\n\t */\r\n\trequestDeviceState(stateKey = null, subscribe = false) {\r\n\t\t\r\n\t\tstateKey = stateKey || this.primaryStateKey;\r\n\t\tlet s = this._getStateFromKey(stateKey);\r\n\t\tif (typeof s == 'string') {\r\n\t\t\treturn Promise.reject({ 'success': false, 'stateKey': stateKey, 'error': s });\r\n\t\t}\r\n\t\t\r\n\t\treturn new Promise((resolve, reject) => {\r\n\t\t\t\r\n\t\t\t// send cached value if present and subscrbe (means always updated)\r\n\t\t\tif (s.state.value !== undefined && this.stateSubscriptions.indexOf(stateKey) > -1) {\r\n\t\t\t\t\r\n\t\t\t\t// publish state\r\n\t\t\t\tthis.emit('stateChange', stateKey, s.state.value);\r\n\t\t\t\t\r\n\t\t\t\t// resolve\r\n\t\t\t\tresolve({ 'success': true, 'stateKey': stateKey, 'cached': true });\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\t// request from backend\r\n\t\t\telse {\r\n\t\t\t\tthis.socket.getState(s.state.node)\r\n\t\t\t\t\t.then(state => {\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t// state does not exist\r\n\t\t\t\t\t\tif (state === null) {\r\n\t\t\t\t\t\t\treject({ 'success': false, 'stateKey': stateKey, 'error': 'State ' + s.state.node + ' not found!' });\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t// set result\r\n\t\t\t\t\t\ts.state.value = this._updateDeviceState(stateKey, state);\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t// publish state change\r\n\t\t\t\t\t\tthis.emit('stateChange', stateKey, s.state.value);\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t// subscribe to state\r\n\t\t\t\t\t\tif (subscribe) {\r\n\t\t\t\t\t\t\tthis.subscribeDeviceState(stateKey).catch(err => reject(err));\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t// resolve\r\n\t\t\t\t\t\tresolve({ 'success': true, 'stateKey': stateKey, 'cached': false });\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.catch(err => reject({ 'success': false, 'stateKey': stateKey, 'error': err }));\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\t\r\n\t/**\r\n\t * Requests a state value from the backend.\r\n\t *\r\n\t * @param\t{String}\t[stateKey=this.primaryStateKey]\r\n\t * @param\t{Boolean}\t[subscribe=false]\r\n\t * @param\t{Object}\t[options={}]\r\n\t * @return\t{Promise}\r\n\t * @see https://github.com/ioBroker/ioBroker.history#access-values-from-javascript-adapter\r\n\t *\r\n\t */\r\n\trequestDeviceStateHistory(stateKey = null, subscribe = false, options = {}) {\r\n\t\t\r\n\t\tstateKey = stateKey || this.primaryStateKey;\r\n\t\tlet s = this._getStateFromKey(stateKey);\r\n\t\tif (typeof s == 'string') {\r\n\t\t\treturn Promise.reject({ 'success': false, 'stateKey': stateKey, 'error': s });\r\n\t\t}\r\n\t\t\r\n\t\treturn new Promise((resolve, reject) => {\r\n\t\t\ts.state.historyCache = s.state.historyCache || {};\r\n\t\t\t\r\n\t\t\t// send cached value if present and subscrbe (means always updated)\r\n\t\t\tif (options.start && options.end && options.step && s.state.historyCache[options.start + '#' + options.end + '#' + options.step] !== undefined) {\r\n\t\t\t\t\r\n\t\t\t\t// publish state\r\n\t\t\t\tthis.emit('historyChange', stateKey, s.state.historyCache[options.start + '#' + options.end + '#' + options.step], s.state);\r\n\t\t\t\t\r\n\t\t\t\t// resolve\r\n\t\t\t\tresolve({ 'success': true, 'stateKey': stateKey, 'cached': true });\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\t// request from backend\r\n\t\t\telse {\r\n\t\t\t\tthis.socket.getStateHistory(s.state.node, options)\r\n\t\t\t\t\t.then(history => {\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t// state does not exist\r\n\t\t\t\t\t\tif (history === null) {\r\n\t\t\t\t\t\t\treject({ 'success': false, 'stateKey': stateKey, 'error': 'State ' + s.state.node + ' not found!' });\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t// cache result\r\n\t\t\t\t\t\tif (options.start && options.end && options.step) {\r\n\t\t\t\t\t\t\ts.state.historyCache[options.start + '#' + options.end + '#' + options.step] = history;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t// set result\r\n\t\t\t\t\t\ts.state.history = history;\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t// publish state change\r\n\t\t\t\t\t\tthis.emit('historyChange', stateKey, s.state.history, s.state);\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t// subscribe to state\r\n\t\t\t\t\t\tif (subscribe) {\r\n\t\t\t\t\t\t\tthis.subscribeDeviceState(stateKey).catch(err => reject(err));\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t// resolve\r\n\t\t\t\t\t\tresolve({ 'success': true, 'stateKey': stateKey, 'cached': false });\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.catch(err => reject({ 'success': false, 'stateKey': stateKey, 'error': err }));\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\t\r\n\t/**\r\n\t *\r\n\t *\r\n\t */\r\n\tsetAction(action) {\r\n\t\tthis.options.action = action;\r\n\t}\r\n\t\r\n\t/**\r\n\t *\r\n\t *\r\n\t */\r\n\tsetComponent(component) {\r\n\t\tthis.options.label = component;\r\n\t}\r\n\t\r\n\t/**\r\n\t *\r\n\t *\r\n\t * @param\t{String}\tvalue\r\n\t * @param\t{String}\t[stateKey=this.primaryStateKey]\r\n\t * @return\tvoid\r\n\t */\r\n\tsetDeviceState(stateKey = null, value) {\r\n\t\t\r\n\t\tstateKey = stateKey || this.primaryStateKey;\r\n\t\tlet s = this._getStateFromKey(stateKey, 'action');\r\n\t\tif (typeof s == 'string') {\r\n\t\t\treturn Promise.reject({ 'success': false, 'stateKey': stateKey, 'error': s });\r\n\t\t}\r\n\t\t\r\n\t\treturn new Promise((resolve, reject) => {\r\n\t\t\tthis.socket.setState(s.action.node, value)\r\n\t\t\t\t.then(res => {\r\n\t\t\t\t\r\n\t\t\t\t\t// get state value if not subscribed\r\n\t\t\t\t\tif (this.stateSubscriptions.indexOf(stateKey) === -1) {\r\n\t\t\t\t\t\tthis.requestDeviceState(stateKey);\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t\t// resolve\r\n\t\t\t\t\tresolve({ 'success': true, 'stateKey': stateKey });\r\n\t\t\t\t})\r\n\t\t\t\t.catch(err => reject({ 'success': false, 'stateKey': stateKey, 'error': err }));\r\n\t\t});\r\n\t}\r\n\t\r\n\t/**\r\n\t *\r\n\t *\r\n\t * @param\t{String}\t[stateKey=this.primaryStateKey]\r\n\t * @return\tvoid\r\n\t */\r\n\tsubscribeDeviceState(stateKey = null) {\r\n\t\t\r\n\t\tstateKey = stateKey || this.primaryStateKey;\r\n\t\tlet s = this._getStateFromKey(stateKey);\r\n\t\tif (typeof s == 'string') {\r\n\t\t\treturn Promise.reject({ 'success': false, 'stateKey': stateKey, 'error': s });\r\n\t\t}\r\n\t\t\r\n\t\t// add subscription\t\r\n\t\tthis.stateSubscriptions.push(stateKey);\r\n\t\t\r\n\t\t// subscribe\r\n\t\treturn new Promise(resolve => {\r\n\t\t\tthis.socket.subscribeState(s.state.node, (id, state, params) => {\r\n\t\t\t\t\r\n\t\t\t\tif (state && state.val !== this.getDeviceState(stateKey, 'val')) {\r\n\t\t\t\t\t\r\n\t\t\t\t\t// format value\r\n\t\t\t\t\ts.state.value = this._updateDeviceState(stateKey, state);\r\n\t\t\t\t\t\r\n\t\t\t\t\t// publish state change\r\n\t\t\t\t\tthis.emit('stateChange', stateKey, s.state.value);\r\n\t\t\t\t\t\r\n\t\t\t\t\t// publish to children as well\r\n\t\t\t\t\tthis.children.forEach(child => child.emit('stateChange', stateKey, s.state.value));\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t\t\r\n\t\t\tresolve({ 'success': true, 'stateKey': stateKey });\r\n\t\t});\r\n\t}\r\n}\r\n","import React from 'react'\r\nimport clsx from 'clsx'\r\n\r\nimport i18n from '../i18n'\r\n\r\nimport AppBar from '@material-ui/core/AppBar'\r\nimport Toolbar from '@material-ui/core/Toolbar'\r\nimport Typography from '@material-ui/core/Typography'\r\nimport IconButton from '@material-ui/core/IconButton'\r\nimport Tooltip from '@material-ui/core/tooltip'\r\nimport Badge from '@material-ui/core/Badge'\r\nimport NotificationsIcon from '@material-ui/icons/Notifications'\r\nimport MenuIcon from '@material-ui/icons/Menu'\r\nimport SettingsIcon from '@material-ui/icons/Settings'\r\n\r\n\r\n/*\r\n * STYLES\r\n */\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nconst useStyles = makeStyles(theme => ({\r\n\tappBar: {\r\n\t\tflexGrow: 1,\r\n\t\tboxShadow: 'none',\r\n\t\ttransform: 'none',\r\n\t},\r\n\ttoolbar: {\r\n\t\tbackgroundColor: theme.palette.primary.main\r\n\t},\r\n\tmenuButton: {\r\n\t\tmarginRight: theme.spacing(2)\r\n\t},\r\n\ttitle: {\r\n\t\tflexGrow: 1,\r\n\t},\r\n\ticon: {\r\n\t\t...theme.components.icon,\r\n\t\tcolor: '#fff',\r\n\t\tpaddingRight: '6px',\r\n\t\twidth: '1em',\r\n\t\theight: '1em',\r\n\t\tdisplay: 'inline-block',\r\n\t\tfontSize: '1.5rem',\r\n\t\ttransition: 'fill 200ms cubic-bezier(0.4, 0, 0.2, 1) 0ms',\r\n\t\tflexShrink: 0,\r\n\t\tuserSelect: 'none'\r\n\t}\r\n}));\r\n\r\n\r\nexport default function TopBar(props) {\r\n\tconst classes = useStyles();\r\n\t\r\n\tconst { children, title, connectionStatus, toggleDrawer, navigate, notifications } = props;\r\n\tconst [ icon, label ] = title.indexOf('|') > -1 ? title.split('|') : [ null, title ];\r\n\t\r\n\tconst connectionStatusIcon = connectionStatus ? 'lan-connect' : (connectionStatus === 'pending' ? 'lan-pending' : 'lan-disconnect');\r\n\tconst connectionStatusTooltip = connectionStatus ? i18n.t('Connected to ioBroker') : (connectionStatus === 'pending' ? i18n.t('Not connected to ioBroker! Reconnecting..') : i18n.t('Not connected to ioBroker! Connection failed!'));\r\n\t\r\n\treturn (\r\n\r\n<AppBar id=\"appBar\" position=\"static\" className={classes.appBar}>\r\n\r\n\t<Toolbar className={classes.toolbar}>\r\n\t\r\n\t\t<IconButton color=\"inherit\" edge=\"start\" className={classes.menuButton} onClick={() => toggleDrawer('sidebarDrawer', true)}>\r\n\t\t\t<MenuIcon />\r\n\t\t</IconButton>\r\n\r\n\t\t<Typography variant=\"h6\" className={classes.title}>\r\n\t\t\t{icon && <span className={clsx(classes.icon, 'mdi mdi-' + icon)}></span>}\r\n\t\t\t{label !== 'null' && label}\r\n\t\t</Typography>\r\n\t\t<IconButton color=\"inherit\">\r\n\t\t\t<Tooltip title={i18n.t(connectionStatusTooltip)}>\r\n\t\t\t\t<span className={\"mdi mdi-\" + connectionStatusIcon}></span>\r\n\t\t\t</Tooltip>\r\n\t\t</IconButton>\r\n\t\t\r\n\t\t{/*\r\n\t\t<IconButton color=\"inherit\" onClick={() => navigate('settings')}>\r\n\t\t\t<SettingsIcon />\r\n\t\t</IconButton>\r\n\t\t<IconButton color=\"inherit\" onClick={() => toggleDrawer('notificationDrawer', true)}>\r\n\t\t\t<Badge badgeContent={notifications} color=\"secondary\">\r\n\t\t\t\t<NotificationsIcon />\r\n\t\t\t</Badge>\r\n\t\t</IconButton>\r\n\t\t*/}\r\n\t\t\r\n\t</Toolbar>\r\n\t\r\n\t{children}\r\n</AppBar>\r\n\r\n\t);\r\n}\r\n","/*\r\n * by QoP <https://stackoverflow.com/users/4484822/qop>\r\n * @see https://stackoverflow.com/questions/36862334/get-viewport-window-height-in-reactjs\r\n */\r\nimport { useState, useEffect } from 'react';\r\n\r\nfunction getWindowDimensions() {\r\n  const { innerWidth: width, innerHeight: height } = window;\r\n  return {\r\n    width,\r\n    height\r\n  };\r\n}\r\n\r\nexport default function useWindowDimensions() {\r\n  const [windowDimensions, setWindowDimensions] = useState(getWindowDimensions());\r\n\r\n  useEffect(() => {\r\n    function handleResize() {\r\n      setWindowDimensions(getWindowDimensions());\r\n    }\r\n\r\n    window.addEventListener('resize', handleResize);\r\n    return () => window.removeEventListener('resize', handleResize);\r\n  }, []);\r\n\r\n  return windowDimensions;\r\n}\r\n","import React, { useState, useEffect, useRef, useCallback } from 'react'\r\nimport clsx from 'clsx'\r\n\r\nimport useWindowDimensions from '../helpers/useWindowDimensions'\r\n\r\nimport Tabs from '@material-ui/core/Tabs'\r\nimport Tab from '@material-ui/core/Tab'\r\nimport Box from '@material-ui/core/Box'\r\n\r\n\r\n/*\r\n * STYLES\r\n */\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nconst useStyles = makeStyles(theme => ({\r\n\ticon: {\r\n\t\t...theme.components.icon,\r\n\t\tcolor: '#fff',\r\n\t\tpaddingBottom: '6px',\r\n\t\twidth: '1em',\r\n\t\theight: '1em',\r\n\t\tdisplay: 'inline-block',\r\n\t\tfontSize: '1.5rem',\r\n\t\ttransition: 'fill 200ms cubic-bezier(0.4, 0, 0.2, 1) 0ms',\r\n\t\tflexShrink: 0,\r\n\t\tuserSelect: 'none'\r\n\t},\r\n\ttabs: {\r\n\t\tbackgroundColor: theme.palette.primary.main,\r\n\t\tpaddingLeft: theme.spacing(),\r\n\t\tcolor: '#fff',\r\n\t\twidth: 'calc(100% - ' + theme.spacing() + 'px)',\r\n\t\tzIndex: 101,\r\n\t\tborderBottom: '5px solid #eee'\r\n\t},\r\n\tfixed: {\r\n\t\tposition: 'fixed',\r\n\t\ttop: 0\r\n\t},\r\n\tindicator: {\r\n\t\tbackgroundColor: '#fff',\r\n\t},\r\n\tfullscreen: {\r\n\t\tmarginLeft: -theme.spacing(),\r\n\t\tmarginTop: '-5px',\r\n\t},\r\n\tgrid: {\r\n\t\tpaddingBottom: '30px'\r\n\t}\r\n}));\r\n\r\n\r\nexport default function TabBar(props) {\r\n\tlet { tabs, selectTab } = props;\r\n\tconst classes = useStyles();\r\n\tlet tabBarProps = useRef({});\r\n\t\r\n\t// tab\r\n\tconst [tab, setTab] = useState(0);\r\n\tconst handleChange = (event, selectedTab) => {\r\n\t\tselectTab(selectedTab, tabs[selectedTab]);\r\n\t\tsetTab(selectedTab);\r\n\t}\r\n\t\r\n\t// scroll\r\n\tconst [fixed, setFixed] = useState(false);\r\n\tconst handleScroll = useCallback(() => {\r\n\t\tconst threshold = (tabBarProps.current.top + tabBarProps.current.height - 53);\r\n\t\tconst fixed = window.scrollY >= threshold;\r\n\t\t\r\n\t\tsetFixed(prevFixed => {\r\n\t\t\tif (prevFixed !== fixed) {\r\n\t\t\t\tdocument.getElementById('root').style.paddingTop = fixed ? (threshold-5-8) + 'px' : 0;\r\n\t\t\t\treturn fixed;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\treturn prevFixed;\r\n\t\t});\r\n\t\t\r\n\t}, [tabBarProps]);\r\n\r\n\tuseEffect(() => {\r\n\t\ttabBarProps.current = {\r\n\t\t\ttop: document.getElementById('tabBar').offsetTop,\r\n\t\t\theight: document.getElementById('tabBar').offsetHeight\r\n\t\t}\r\n\t\t\r\n\t\twindow.addEventListener('scroll', handleScroll);\r\n\t\treturn () => window.removeEventListener('keydown', handleScroll, 0);\r\n\t\t\r\n\t}, [handleScroll]);\r\n\t\r\n\t// render tabs\r\n\tconst renderedTabs = tabs.map((tab, i) => {\r\n\t\tconst [ icon, label ] = tab.indexOf('|') > -1 ? tab.split('|') : [ null, tab ];\r\n\t\treturn <Tab key={'tab' + i} icon={<span className={clsx(classes.icon, 'mdi mdi-' + icon)}></span>} label={!fixed && label !== 'null' ? label : null} />\r\n\t});\r\n\t\r\n\treturn (\r\n\r\n<Tabs\r\n\tid=\"tabBar\"\r\n\tvalue={tab}\r\n\tonChange={handleChange}\r\n\tvariant=\"scrollable\"\r\n\tclasses={{\r\n\t\troot: clsx(classes.tabs, fixed && classes.fixed),\r\n\t\tindicator: classes.indicator\r\n\t}}>\r\n\t\r\n\t{renderedTabs}\r\n</Tabs>\r\n\r\n\t);\r\n}\r\n\r\n\r\nexport function TabPanel(props) {\r\n\tconst { children, selectedTab, renderedTab, fullscreen } = props;\r\n\tconst classes = useStyles();\r\n\t\r\n\t\r\n\t// get map height based on viewport\r\n\tconst { height } = useWindowDimensions();\r\n\tconst [mapHeight, setMapHeight] = useState(height);\r\n\tlet topBarHeight = useRef({});\r\n\t\r\n\tuseEffect(() => {\r\n\t\ttopBarHeight.current = document.getElementById('appBar').offsetHeight;\r\n\t\tsetMapHeight(height-topBarHeight.current+5);\r\n\t\t\r\n\t}, [height]);\r\n\t\r\n\t/*\r\n\t * Some components need to be visible upon loading, so proper initialise.\r\n\t * Due to the 'hidden' attribute though, they might be hidden.\r\n\t * This is a workaround to initially show everything for a short period of time and then hide according to tab settings.\r\n\t *\r\n\t */\r\n\tconst [hidden, setHidden] = useState(null);\r\n\tuseEffect(() => {\r\n\t\tsetTimeout(() => setHidden(selectedTab !== renderedTab), 10);\r\n\t\t\r\n\t}, [selectedTab, renderedTab]);\r\n\t\r\n\treturn (\r\n\r\n<Box\r\n\trole=\"tabpanel\"\r\n\thidden={hidden}\r\n\tid={'tabpanel-' + renderedTab}\r\n\tclassName={clsx(fullscreen ? classes.fullscreen : classes.grid)}\r\n\tstyle={{ height: mapHeight + 'px' }}\r\n\t>\r\n\t\r\n\t{children}\r\n</Box>\r\n\r\n\t);\r\n}\r\n","import React from 'react'\r\nimport clsx from 'clsx'\r\n\r\nimport i18n from '../i18n'\r\n\r\nimport Drawer from '@material-ui/core/Drawer'\r\nimport Divider from '@material-ui/core/Divider'\r\nimport List from '@material-ui/core/List'\r\nimport ListItem from '@material-ui/core/ListItem'\r\nimport ListItemIcon from '@material-ui/core/ListItemIcon'\r\nimport ListItemText from '@material-ui/core/ListItemText'\r\n\r\n\r\n/*\r\n * STYLES\r\n */\r\nimport { withStyles } from '@material-ui/core/styles';\r\nconst styles = theme => ({\r\n\tdrawer: {\r\n\t\twidth: 400\r\n\t}\r\n});\r\n\r\n\r\nclass Notifications extends React.Component {\r\n\t\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\t\r\n\t\tthis.state = {\r\n\t\t}\r\n\t}\r\n\t\r\n\trender() {\r\n\t\tconst { classes, notifications } = this.props;\r\n\t\t\r\n\t\treturn (\r\n\r\n<Drawer\r\n\tanchor=\"right\"\r\n\topen={this.props.open}\r\n\tonClose={() => this.props.toggleDrawer('notificationDrawer', false)}\r\n\tclasses={{\r\n\t\tpaper: classes.drawer\r\n\t}}\r\n\t>\r\n\t\r\n</Drawer>\r\n\r\n\t\t);\r\n\t}\r\n}\r\n\r\nexport default withStyles(styles)(Notifications);\r\n","\r\nexport const ModuleSettings = {\r\n\tAdapterStatus: require('./AdapterStatus').Settings || {},\r\n\tChart: require('./Chart').Settings || {},\r\n\tDateTime: require('./DateTime').Settings || {},\r\n\tMap: require('./Map').Settings || {},\r\n\tMultimedia: require('./Multimedia').Settings || {},\r\n\tStateList: require('./StateList').Settings || {},\r\n\tStateListHorizontal: require('./StateListHorizontal').Settings || {},\r\n\tWeather: require('./Weather').Settings || {}\r\n}\r\n\r\nexport default {\r\n\tAdapterStatus: require('./AdapterStatus').default,\r\n\tChart: require('./Chart').default,\r\n\tDateTime: require('./DateTime').default,\r\n\tMap: require('./Map').default,\r\n\tMultimedia: require('./Multimedia').default,\r\n\tStateList: require('./StateList').default,\r\n\tStateListHorizontal: require('./StateListHorizontal').default,\r\n\tWeather: require('./Weather').default\r\n}","import React from 'react'\r\nimport Connection from '../Connection'\r\nimport Device from '../Device'\r\n\r\nimport Button from '@material-ui/core/Button'\r\nimport Dialog from '@material-ui/core/Dialog'\r\nimport MuiDialogTitle from '@material-ui/core/DialogTitle'\r\nimport MuiDialogContent from '@material-ui/core/DialogContent'\r\nimport MuiDialogActions from '@material-ui/core/DialogActions'\r\nimport IconButton from '@material-ui/core/IconButton'\r\nimport CloseIcon from '@material-ui/icons/Close'\r\nimport Typography from '@material-ui/core/Typography'\r\n\r\nimport Modules from '../modules'\r\n\r\n\r\n/*\r\n * STYLES\r\n */\r\nimport { withStyles } from '@material-ui/core/styles';\r\nconst styles = theme => ({\r\n\troot: {\r\n\t\tmargin: 0,\r\n\t\tpadding: theme.spacing(2),\r\n\t},\r\n\tcloseButton: {\r\n\t\tposition: 'absolute',\r\n\t\tright: theme.spacing(1),\r\n\t\ttop: theme.spacing(1),\r\n\t\tcolor: theme.palette.grey[500],\r\n\t},\r\n});\r\n\r\n\r\nconst DialogTitle = withStyles(styles)(props => {\r\n\tconst { children, classes, onClose, ...other } = props;\r\n\treturn (\r\n\r\n<MuiDialogTitle disableTypography className={classes.root} {...other}>\r\n\t<Typography variant=\"h6\">{children}</Typography>\r\n\t{onClose ? (\r\n\t<IconButton aria-label=\"close\" className={classes.closeButton} onClick={onClose}>\r\n\t\t<CloseIcon />\r\n\t</IconButton>\r\n\t) : null}\r\n</MuiDialogTitle>\r\n\r\n\t);\r\n});\r\n\r\nconst DialogContent = withStyles(theme => ({\r\n\troot: {\r\n\t\tpadding: theme.spacing(2),\r\n\t\t[theme.breakpoints.down('md')]: {\r\n\t\t\tpaddingLeft: theme.spacing(1)\r\n\t\t}\r\n\t},\r\n}))(MuiDialogContent);\r\n\r\nconst DialogActions = withStyles(theme => ({\r\n\troot: {\r\n\t\tmargin: 0,\r\n\t\tpadding: theme.spacing(1),\r\n\t},\r\n}))(MuiDialogActions);\r\n\r\n\r\nexport default class Popup extends React.Component {\r\n\t\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\t\r\n\t\tthis.state = {\r\n\t\t\tchildren: []\r\n\t\t};\r\n\t}\r\n\t\r\n\tcomponentDidUpdate(prevProps, prevState) {\r\n\t\t\r\n\t\tlet device = this.props.contents && this.props.contents.device;\r\n\t\tif (device.id && this.props.contents.ts !== prevProps.contents.ts) {\r\n\t\t\t\r\n\t\t\t// get from cache\r\n\t\t\tif (device.children.length) {\r\n\t\t\t\tconsole.info('Got ' + Object.keys(device.children).length + ' states for device ' + device.name + ' from cache.');\r\n\t\t\t\tthis.setState({ 'children': device.children }, () => this.forceUpdate());\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\t// retrieve new\r\n\t\t\telse {\r\n\t\t\t\t// loop through states and request status\r\n\t\t\t\tlet responses = [];\r\n\t\t\t\tlet children = [];\r\n\t\t\t\t\r\n\t\t\t\tfor (let stateKey in device.states) {\r\n\t\t\t\t\t\r\n\t\t\t\t\tif (device.states[stateKey].state === undefined || device.options.hiddenStates.indexOf(stateKey) > -1) {\r\n\t\t\t\t\t\tcontinue;\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t\tlet child = new Device({\r\n\t\t\t\t\t\t\t'parent': device,\r\n\t\t\t\t\t\t\t'id': device.id + '#' + stateKey,\r\n\t\t\t\t\t\t\t'name': device.name,\r\n\t\t\t\t\t\t\t'function': device.function,\r\n\t\t\t\t\t\t\t'states': { [stateKey]: device.states[stateKey] },\r\n\t\t\t\t\t\t\t'options': {\r\n\t\t\t\t\t\t\t\t...device.options,\r\n\t\t\t\t\t\t\t\t'primary': stateKey,\r\n\t\t\t\t\t\t\t\t'secondary': null,\r\n\t\t\t\t\t\t\t\t'divider': children.length !== 0,\r\n\t\t\t\t\t\t\t\t'subgroup': null,\r\n\t\t\t\t\t\t\t\t'subtitle': null\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tConnection.getConnection,\r\n\t\t\t\t\t\twindow.language\r\n\t\t\t\t\t);\r\n\t\t\t\t\t\r\n\t\t\t\t\t// add child to parent\r\n\t\t\t\t\tdevice.children.push(child);\r\n\t\t\t\t\t\r\n\t\t\t\t\t// retrieve state\r\n\t\t\t\t\tresponses.push(child.requestDeviceState(null, true));\r\n\t\t\t\t\tchildren.push(child);\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tPromise.allSettled(responses).then(() => {\r\n\t\t\t\t\tconsole.info('Retrieved ' + Object.keys(children).length + ' states for device ' + device.name + '.', responses);\r\n\t\t\t\t\tthis.setState({ 'children': children }, () => this.forceUpdate());\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t}\r\n\t\telse if (!device.id && this.props.contents.ts !== prevProps.contents.ts) {\r\n\t\t\tthis.setState({ 'children': [] }, () => this.forceUpdate());\r\n\t\t}\r\n\t}\r\n\t\r\n\tshouldComponentUpdate(nextProps, nextState) {\r\n\t\treturn !this.props.contents || this.props.contents.ts !== nextProps.contents.ts;\r\n\t}\r\n\t\r\n\trender() {\r\n\t\tconst { open, closeDialog, contents } = this.props;\r\n\t\tconst { device } = contents;\r\n\t\t\r\n\t\treturn (\r\n\r\n<Dialog onClose={closeDialog} open={open || false} maxWidth={'md'} fullWidth={true}>\r\n\t<DialogTitle onClose={closeDialog}>\r\n\t\t{device.name}\r\n\t</DialogTitle>\r\n\t<DialogContent dividers style={{ padding: 0 }}>\r\n\t\t\r\n\t\t<Modules.StateList openDialog={null} devices={this.state.children} component={true} action={true} />\t\r\n\t\t\r\n\t</DialogContent>\r\n\t<DialogActions>\r\n\t\t<Button autoFocus onClick={closeDialog} color=\"primary\">\r\n\t\t\tClose\r\n\t\t</Button>\r\n\t</DialogActions>\r\n</Dialog>\r\n\r\n\t\t);\r\n\t};\r\n}\r\n","import React from 'react'\r\n\r\nimport Card from '@material-ui/core/Card'\r\nimport CardHeader from '@material-ui/core/CardHeader'\r\nimport CardContent from '@material-ui/core/CardContent'\r\nimport Avatar from '@material-ui/core/Avatar'\r\nimport Typography from '@material-ui/core/Typography'\r\n\r\n\r\n/*\r\n * STYLES\r\n */\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nconst useStyles = makeStyles(theme => ({\r\n\tcard: {\r\n\t\tmargin: theme.spacing(1, 1, 0, 0),\r\n\t\t[theme.breakpoints.down('md')]: {\r\n\t\t\tmargin: theme.spacing(0.4, 0.4, 0, 0)\r\n\t\t}\r\n\t},\r\n\tcardHeaderNoContents: {\r\n\t\tpadding: theme.spacing(),\r\n\t},\r\n\tcardAvatar: props => ({\r\n\t\tbackgroundColor: theme.palette.primary.main,\r\n\t\tcolor: '#fff',\r\n\t\tfontSize: '24px',\r\n\t\t...props\r\n\t}),\r\n\tcardContent: {\r\n\t\tpadding: theme.spacing(0, 2),\r\n\t\t[theme.breakpoints.down('md')]: {\r\n\t\t\tpadding: theme.spacing(0)\r\n\t\t}\r\n\t}\r\n}));\r\n\r\n\r\nexport default function Widget(props) {\r\n\tconst { title, icon, iconStyle } = props;\r\n\tconst classes = useStyles(iconStyle);\r\n\t\r\n\treturn (\r\n\r\n<Card className={classes.card}>\r\n\t<CardHeader\r\n\t\tavatar={icon !== null &&\r\n\t\t\t<Avatar variant=\"rounded\" classes={{ root: classes.cardAvatar }}>\r\n\t\t\t\t{React.createElement('span', { 'className': 'mdi mdi-' + (icon || 'home') })}\r\n\t\t\t</Avatar>\r\n\t\t}\r\n\t\ttitle={title &&\r\n\t\t\t<Typography variant=\"h5\" component=\"h2\">\r\n\t\t\t\t{title}\r\n\t\t\t</Typography>\r\n\t\t}\r\n\t/>\r\n\t<CardContent className={classes.cardContent}>\r\n\t\t{props.children}\r\n\t</CardContent>\r\n</Card>\r\n\r\n\t);\r\n}\r\n","import { createMuiTheme } from '@material-ui/core/styles'\r\nimport { pink } from '@material-ui/core/colors'\r\nimport blue from '@material-ui/core/colors/blue'\r\n\r\nconst primary = blue[700]\r\nconst secondary = pink\r\n\r\nconst theme = createMuiTheme({\r\n\tpalette: {\r\n\t\tprimary: {\r\n\t\t\tmain: primary \r\n\t\t},\r\n\t\tsecondary: secondary,\r\n\t},\r\n\tcomponents: {\r\n\t\ticon: {\r\n\t\t\tfontSize: '24px',\r\n\t\t\tcolor: primary\r\n\t\t},\r\n\t\t'finger': {\r\n\t\t\tcursor: 'pointer'\r\n\t\t}\r\n\t}\r\n});\r\n\r\n//console.debug(theme);\r\nexport default theme;","import React from 'react'\r\n\r\nimport Connection from './Connection'\r\n\r\nimport TopBar from './components/TopBar'\r\nimport TabBar, { TabPanel } from './components/TabBar'\r\nimport Notifications from './components/Notifications'\r\nimport GridContainer from './components/GridContainer'\r\nimport Popup from './components/Popup'\r\nimport Widget from './components/Widget'\r\nimport Modules, { ModuleSettings } from './modules'\r\n\r\n\r\n/*\r\n * STYLES\r\n */\r\nimport { ThemeProvider } from '@material-ui/core/styles';\r\nimport theme from './theme';\r\n\r\n\r\n/*\r\n *\r\n */\r\nconst getGroup = (groupId, group, props = {}) => {\r\n\t\r\n\t// group empty\r\n\tif (!group && ModuleSettings[group.settings.component.module].noDevicesAllowed !== true) {\r\n\t\tconsole.error('Group ' + groupId + ' defined in columns but not assigned to any devices!');\r\n\t\treturn null;\r\n\t}\r\n\t\r\n\t// get module for component\r\n\tgroup.settings._global = props.settings;\r\n\tgroup.settings.component = typeof group.settings.component === 'string' ? { 'module': group.settings.component } : (group.settings.component || {});\r\n\tconst Tag = Modules[group.settings.component.module || 'StateList'];\r\n\t\r\n\t// get tag\r\n\tif (Tag === undefined) {\r\n\t\tconsole.error('Undefined component \"' + group.settings.component.module + '\" used!');\r\n\t\treturn null;\r\n\t}\r\n\t\r\n\treturn <Tag key={'Tag' + groupId} devices={group.devices} openDialog={props.action ? props.action : null} settings={{ ...group.settings, ...props }} />\r\n}\r\n\r\n\r\n/*\r\n *\r\n */\r\nconst getGridContents = (contents, groups, props = {}) => {\r\n\t\r\n\tlet gridContents = {};\r\n\tconst columns = Object.keys(contents).length;\r\n\t\r\n\tfor (let column = 1; column <= columns; column++) {\r\n\t\t\r\n\t\tlet columnContents = contents[column];\r\n\t\tgridContents[column] = gridContents[column] || [];\r\n\t\t\r\n\t\t// no contents, thus add placeholder\r\n\t\tif (!columnContents || !Object.keys(columnContents).length) {\r\n\t\t\tgridContents[column].push(null);\r\n\t\t}\r\n\t\t\r\n\t\t// add contents\r\n\t\telse {\r\n\t\t\tfor (let groupId in columnContents) {\r\n\t\t\t\t\r\n\t\t\t\tlet group = groups[groupId] || {};\r\n\t\t\t\tgroup.devices = group.devices || [];\r\n\t\t\t\tgroup.settings = columnContents[groupId] || {};\r\n\t\t\t\tgroup.settings._global = props.settings;\r\n\t\t\t\tgroup.settings.component = typeof group.settings.component === 'string' ? { 'module': group.settings.component } : (group.settings.component || {});\r\n\t\t\t\tgroup.settings.module = ModuleSettings[group.settings.component.module] || {};\r\n\t\t\t\t\r\n\t\t\t\tlet content = getGroup(groupId, group, props);\r\n\t\t\t\tif ((group.devices.length > 0 || group.settings.module.noDevicesAllowed) && content) {\r\n\t\t\t\t\tgridContents[column].push(\r\n\t\t\t\t\t\t<Widget key={'Box-' + groupId}\r\n\t\t\t\t\t\t\ttitle={group.settings.title === null ? null : (group.settings.title || group.name || group.settings.module.title)}\r\n\t\t\t\t\t\t\ticon={group.settings.icon === null ? null : (group.settings.icon || group.settings.module.icon)}\r\n\t\t\t\t\t\t\ticonStyle={group.settings.iconStyle}\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t{content}\r\n\t\t\t\t\t\t</Widget>\r\n\t\t\t\t\t);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\t\r\n\treturn gridContents;\r\n}\r\n\r\n\r\nexport default class Jarvis extends React.Component {\r\n\t\r\n    constructor(props) {\r\n\t\tsuper(props);\r\n\t\t\r\n\t\tthis.state = {\r\n\t\t\tconnectionStatus: this.props.connectionStatus || false,\r\n\t\t\t\r\n\t\t\tselectedTab: 0,\r\n\t\t\ttabTitle: '',\r\n\t\t\t\r\n\t\t\tpage: null,\r\n\t\t\t\r\n\t\t\tnotificationDrawer: false,\r\n\t\t\tnotifications: [],\r\n\t\t\tnotificationsUnread: 0,\r\n\t\t\t\r\n\t\t\tdialog: false,\r\n\t\t\tdialogContents: {\r\n\t\t\t\t'ts': 0,\r\n\t\t\t\t'device': {}\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\t// bind methods\r\n\t\tthis.closeDialog = this.closeDialog.bind(this);\r\n\t\tthis.openDialog = this.openDialog.bind(this);\r\n\t\tthis.selectTab = this.selectTab.bind(this);\r\n\t\tthis.toggleDrawer = this.toggleDrawer.bind(this);\r\n\t\tthis.navigate = this.navigate.bind(this);\r\n\t\t\r\n\t\t//\r\n\t\tthis.socket = Connection.getConnection;\r\n\t\t\r\n\t\t// initialise\r\n\t\tthis.gridContents = {};\r\n\t\tthis.layout = this.props.settings.layout;\r\n\t\tthis.tabs = Object.keys(this.layout);\r\n\t\tthis.tabsEnabled = this.tabs[0] !== 1;\r\n\t\tthis.state.tabTitle = this.tabs[this.state.selectedTab];\r\n\t\t\r\n\t\t// no tabs defined, so layout wrap into default tab\r\n\t\tif (!this.tabsEnabled) {\r\n\t\t\tthis.layout = { 'Home': this.layout };\r\n\t\t\tthis.tabs.push('1');\r\n\t\t}\r\n\t\t\r\n\t\t// widget props\r\n\t\tthis.widgetProps = {}\r\n\t}\r\n\t\r\n\tcomponentDidMount() {\r\n\t\t\r\n\t\tthis.socket.getState('jarvis.0.notifications').then(notifications => {\r\n\t\t\tnotifications = (notifications && notifications.val && JSON.parse(notifications.val)) || [];\r\n\t\t\t\r\n\t\t\tthis.setState({\r\n\t\t\t\tnotificationsUnread: notifications.filter(notification => !notification.unread || notification.unread !== false).length,\r\n\t\t\t\tnotifications: notifications\r\n\t\t\t});\r\n\t\t});\r\n\t\t\r\n\t\tthis.socket.subscribeState('jarvis.0.notifications', notifications => console.log(notifications));\r\n\t}\r\n\t\r\n\tgetTabPanels() {\r\n\t\t\r\n\t\tlet tab = 0;\r\n\t\tlet tabPanels = [];\r\n\t\tfor (let tabLabel in this.layout) {\r\n\t\t\tconst contents = this.layout[tabLabel];\r\n\t\t\t\r\n\t\t\t// fullscreen in component\r\n\t\t\tlet groupId = Object.keys(contents)[0];\r\n\t\t\tlet fullscreen = Number.isNaN(parseInt(groupId));\r\n\t\t\t\r\n\t\t\tif (!this.gridContents[tabLabel] && fullscreen) {\r\n\t\t\t\tthis.gridContents[tabLabel] = getGroup(contents, { ...this.props.groups[groupId], settings: contents[groupId] }, { settings: this.props.settings, action: this.openDialog, ...this.widgetProps });\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\t// grid layout\r\n\t\t\telse if (!this.gridContents[tabLabel]) {\r\n\t\t\t\tthis.gridContents[tabLabel] = <GridContainer contents={getGridContents(contents, this.props.groups, { settings: this.props.settings, action: this.openDialog, ...this.widgetProps })} />\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tlet tabPanel = (\r\n\t\t\t\t<TabPanel key={'tabPanel-' + tab} renderedTab={tab} selectedTab={this.state.selectedTab} fullscreen={fullscreen}>\r\n\t\t\t\t\t{this.gridContents[tabLabel]}\r\n\t\t\t\t</TabPanel>\r\n\t\t\t);\r\n\t\t\t\r\n\t\t\ttabPanels.push(tabPanel);\r\n\t\t\ttab++;\r\n\t\t}\r\n\t\t\r\n\t\treturn tabPanels;\r\n\t}\r\n\t\r\n\tcloseDialog() {\r\n\t\tthis.setState({ 'dialog': false, 'dialogContents': { 'ts': Date.now(), 'device': {} } });\r\n\t}\r\n\t\r\n\topenDialog(device) {\r\n\t\tthis.setState({ 'dialog': true, 'dialogContents': { 'ts': Date.now(), 'device': device } });\r\n\t}\r\n\t\r\n\tselectTab(tab, title) {\r\n\t\tthis.setState({ selectedTab: tab, tabTitle: title });\r\n\t}\r\n\t\r\n\ttoggleDrawer(drawer, open) {\r\n\t\tthis.setState({ [drawer]: open });\r\n\t}\r\n\t\r\n\tnavigate(page) {\r\n\t\tthis.setState({ page });\r\n\t}\r\n\t\r\n    render() {\r\n        return (\r\n\r\n<ThemeProvider theme={theme}>\r\n\t<TopBar\r\n\t\ttitle={this.props.settings.topBarTitle || (this.tabsEnabled && this.state.tabTitle) || 'jarvis'}\r\n\t\tconnectionStatus={this.state.connectionStatus}\r\n\t\ttoggleDrawer={this.toggleDrawer}\r\n\t\tnavigate={this.navigate}\r\n\t\tnotifications={this.state.notificationsUnread}\r\n\t\t>\r\n\t\t\r\n\t\t{this.tabsEnabled && <TabBar tabs={this.tabs} selectTab={this.selectTab} />}\r\n\t</TopBar>\r\n\t\r\n\t\r\n\t{/* DRAWER: NOTIFICATIONS */}\r\n\t<Notifications\r\n\t\topen={this.state.notificationDrawer}\r\n\t\ttoggleDrawer={this.toggleDrawer}\r\n\t\tnotifications={this.state.notifications}\r\n\t\t/>\r\n\t\r\n\t\r\n\t{/* PAGE */}\r\n\t\r\n\t\r\n\t{/* POPUP */}\r\n\t<Popup open={this.state.dialog} contents={this.state.dialogContents} closeDialog={this.closeDialog} />\r\n\t{this.getTabPanels()}\r\n\t\r\n</ThemeProvider>\r\n\r\n\t\t)\r\n\t}\r\n}\r\n","import React from 'react'\r\nimport LogRocket from 'logrocket'\r\nimport uuid from 'uuid/v3'\r\n\r\nimport Grid from '@material-ui/core/Grid'\r\nimport CircularProgress from '@material-ui/core/CircularProgress'\r\nimport Typography from '@material-ui/core/Typography'\r\nimport Skeleton from '@material-ui/lab/Skeleton'\r\n\r\nimport GridContainer from './components/GridContainer'\r\nimport StatusSnackbar from './components/StatusSnackbar'\r\n\r\nimport config from './config/config.dev.js'\r\nimport i18n from './i18n'\r\nimport Connection from './Connection'\r\nimport Device from './Device'\r\nimport Jarvis from './Jarvis'\r\n\r\n\r\n/*\r\n * STYLES\r\n */\r\nimport { withStyles } from '@material-ui/core/styles';\r\nconst styles = theme => ({\r\n\tloading: {\r\n\t\tmargin: '10px 0 0 0',\r\n\t\tcolor: '#999'\r\n\t},\r\n\tgridItem: {\r\n\t\tmargin: theme.spacing(1, 1, 0, 0),\r\n\t\t[theme.breakpoints.down('md')]: {\r\n\t\t\tmarginRight: theme.spacing(0.4, 0.4, 0, 0)\r\n\t\t}\r\n\t}\r\n});\r\n\r\n\r\n/*\r\n * CONSTANTS\r\n *\r\n */\r\nconst NODE_SETTINGS = 'jarvis.0.settings';\r\nconst NODE_DEVICES = 'jarvis.0.devices';\r\n\r\n\r\nclass App extends React.Component {\r\n\t\r\n    constructor(props) {\r\n\t\tsuper(props);\r\n\t\t\r\n\t\tthis.state = {\r\n\t\t\tloaded: [],\r\n\t\t\tconnected: false,\r\n\t\t\terror: false,\r\n\t\t\terrorMessage: ''\r\n\t\t}\r\n\t};\r\n\t\r\n\tcomponentDidMount() {\r\n\t\t\r\n\t\t// connect and get connection\r\n\t\tconst errorHandler = err => {\r\n\t\t\tthis.setState({ connected: false, error: true, errorMessage: (typeof err === 'string' ? err : err.message) + '..' });\r\n\t\t\tsetTimeout(() => Connection.reconnect, 10*1000);\r\n\t\t};\r\n\t\t\r\n\t\tconst url = window.location.port === '3000' ? config.iobrokerWebAdapterUrl :\r\n\t\t\twindow.location.protocol + '//' + window.location.hostname + (window.location.port ? ':' + window.location.port : '');\r\n\t\t\r\n\t\tconst listeners = [\r\n\t\t\t{ 'event': 'connect', 'callback': () => this.setState({ connected: true, error: false, errorMessage: '' }) },\r\n\t\t\t{ 'event': 'reconnect', 'callback': () => this.setState({ connected: 'pending', error: false, errorMessage: '' }) },\r\n\t\t\t{ 'event': 'disconnect', 'callback': errorHandler },\r\n\t\t\t{ 'event': 'error', 'callback': errorHandler }\r\n\t\t];\r\n\t\t\r\n\t\tconsole.log('Connect to ' + url + '...');\r\n\t\tthis.socket = Connection.connect(url, listeners);\r\n\t\t\r\n\t\t// retrieve settings\r\n\t\tthis.settings = {};\r\n\t\tthis.socket.getState(NODE_SETTINGS)\r\n\t\t\t.then(state => {\r\n\t\t\t\t\r\n\t\t\t\ttry {\r\n\t\t\t\t\tif (state) {\r\n\t\t\t\t\t\tthis.settings = { ...this.settings, ...JSON.parse(state.val) || {} };\r\n\t\t\t\t\t\tthis.useSettings();\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t\tconst tab = Object.keys(this.settings.layout)[0];\r\n\t\t\t\t\tif (tab === undefined) {\r\n\t\t\t\t\t\tthis.setState({\r\n\t\t\t\t\t\t\terror: true,\r\n\t\t\t\t\t\t\terrorMessage: i18n.t('Please create the configuration. See documentation.')\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse {\r\n\t\t\t\t\t\tthis.setState({ loaded: [ ...this.state.loaded, 'settings' ] });\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tcatch(err) {\r\n\t\t\t\t\tconsole.error('GET_SETTINGS: ' + err.message);\r\n\t\t\t\t\tthis.setState({\r\n\t\t\t\t\t\terror: true,\r\n\t\t\t\t\t\terrorMessage: i18n.t('Error parsing settings') + '!'\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t})\r\n\t\t\t.catch(err => {\r\n\t\t\t\tconsole.error('GET_SETTINGS: ' + err.message);\r\n\t\t\t\tthis.setState({\r\n\t\t\t\t\terror: true,\r\n\t\t\t\t\terrorMessage: typeof err === 'string' ? i18n.t(err) : i18n.t(err.message)\r\n\t\t\t\t});\r\n\t\t\t});\r\n\t\t\r\n\t\t// retrieve ioBroker config\r\n\t\tthis.settings.iobroker = {};\r\n\t\tthis.socket.getObject('system.config', (err, data) => {\r\n\t\t\tif (data && data.common) {\r\n\t\t\t\tthis.settings.iobroker = data.common;\r\n\t\t\t}\r\n\t\t});\r\n\t\t\r\n\t\t// retrieve devices\r\n\t\tthis.devices = {};\r\n\t\tthis.groups = {};\r\n\t\t\r\n\t\tthis.socket.getState(NODE_DEVICES)\r\n\t\t\t.then(state => {\r\n\t\t\t\t\r\n\t\t\t\ttry {\r\n\t\t\t\t\tthis.devices = JSON.parse(state.val);\r\n\t\t\t\t\tthis.processDevices(this.devices).then(groups => {\r\n\t\t\t\t\t\tthis.groups = groups;\r\n\t\t\t\t\t\tthis.setState({ loaded: [ ...this.state.loaded, 'groups' ] });\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t\tcatch(err) {\r\n\t\t\t\t\tconsole.error('GET_DEVICES: ' + err.message);\r\n\t\t\t\t\tthis.setState({\r\n\t\t\t\t\t\terror: true,\r\n\t\t\t\t\t\terrorMessage: i18n.t('Error parsing devices') + '!'\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t\t.catch(err => {\r\n\t\t\t\tconsole.error('GET_DEVICES: ' + err.message);\r\n\t\t\t\tthis.setState({\r\n\t\t\t\t\terror: true,\r\n\t\t\t\t\terrorMessage: i18n.t('Socket failed while getting devices') + '!'\r\n\t\t\t\t});\r\n\t\t\t});\r\n    }\r\n\r\n\t/**\r\n\t *\r\n\t *\r\n\t */\r\n\tuseSettings() {\r\n\t\t\r\n\t\t// LogRocket\r\n\t\tif (this.settings.debug && this.settings.debug.name && this.settings.debug.email && this.settings.debug.email.indexOf('@') > -1) {\r\n\t\t\tLogRocket.init('36n1xl/jarvis');\r\n\t\t\t\r\n\t\t\tlet id = uuid(this.settings.debug.name + '#' + this.settings.debug.email, 'e63359dc-bc1c-476e-81cd-8f580d09a557');\r\n\t\t\tLogRocket.identify(id, {\r\n\t\t\t\tname: this.settings.debug.name,\r\n\t\t\t\temail: this.settings.debug.email\r\n\t\t\t});\r\n\t\t\t\r\n\t\t\tconsole.info('Opt-In for providing debugging details to the developer. Your ID is: ' + id);\r\n\t\t}\r\n\t\t\r\n\t\t// language\r\n\t\twindow.language = (this.settings.language || navigator.language || navigator.userLanguage || 'en').substr(0, 2);\r\n\t\ti18n.setLanguage(window.language);\r\n\t\ti18n.loadTranslations(['en', 'de']);\r\n\t\t\r\n\t\t// page title\r\n\t\tif (this.settings.pageTitle) {\r\n\t\t\tdocument.title = this.settings.pageTitle;\r\n\t\t}\r\n\t\t\r\n\t\t// favicon\r\n\t\tif (this.settings.pageFavicon && this.settings.pageFavicon.substr(0, 5) === 'data:') {\r\n\t\t\tdocument.getElementById('favicon').href = this.settings.pageFavicon;\r\n\t\t}\r\n\t\t\r\n\t\t// translations\r\n\t\tif (this.settings.translations) {\r\n\t\t\t\r\n\t\t\tlet translations = this.settings.translations;\r\n\t\t\tfor (let language in translations) {\r\n\t\t\t\ti18n.setTranslation(language, translations[language]);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\t\r\n\t/**\r\n\t *\r\n\t *\r\n\t */\r\n\tgroupDevice(groups, device) {\r\n\t\t\r\n\t\t// add device to group(s)\r\n\t\tlet options = device.get('options');\r\n\t\toptions.groups.forEach(group => {\r\n\t\t\t\r\n\t\t\tlet groupId = group.toLowerCase().replace(/ /g, '');\r\n\t\t\tif (!groups[groupId]) {\r\n\t\t\t\tgroups[groupId] = { 'id': groupId, 'name': group, 'devices': [device] };\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tgroups[groupId].devices.push(device);\r\n\t\t\t}\r\n\t\t});\r\n\t\t\r\n\t\treturn groups;\r\n\t}\r\n\t\r\n\t/**\r\n\t *\r\n\t *\r\n\t */\r\n\tprocessDevice(deviceProperties) {\r\n\t\t\r\n\t\tlet promises = [];\r\n\t\tlet device = null;\r\n\t\ttry {\r\n\t\t\tdevice = new Device(deviceProperties, this.socket, window.language);\r\n\t\t\t\r\n\t\t\t// request primary state value\r\n\t\t\tpromises.push(device.requestDeviceState(null, true));\r\n\t\t\t\r\n\t\t\t// request secondary state value\r\n\t\t\tif (device.secondaryStateKey) {\r\n\t\t\t\tpromises.push(device.requestDeviceState(device.secondaryStateKey, true));\r\n\t\t\t}\r\n\t\t\t\r\n\t\t}\r\n\t\tcatch(err) {\r\n\t\t\tconsole.warn(err.message);\r\n\t\t}\r\n\t\t\r\n\t\treturn new Promise(resolve => {\r\n\t\t\tPromise.allSettled(promises).then(results => {\r\n\t\t\t\t\r\n\t\t\t\tresults.forEach(result => {\r\n\t\t\t\t\tif (result.status === 'rejected') {\r\n\t\t\t\t\t\tconsole.error(result);\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t\t\r\n\t\t\t\tresolve(device);\r\n\t\t\t});\r\n\t\t});\r\n\t}\r\n\t\r\n\t/**\r\n\t *\r\n\t *\r\n\t */\r\n\tprocessDevices(deviceList) {\r\n\t\t\r\n\t\t// loop through all devices of in the device list\r\n\t\tlet promises = [];\r\n\t\tlet groups = {};\r\n\t\t\r\n\t\tlet devices = 0, groupedDevices = 0;\r\n\t\tfor (let deviceId in deviceList) {\r\n\t\t\tdevices++;\r\n\t\t\t\r\n\t\t\tdeviceList[deviceId].options = deviceList[deviceId].jarvis;\r\n\t\t\tdelete deviceList[deviceId].jarvis;\r\n\t\t\t\r\n\t\t\tlet deviceProperties = { ...deviceList[deviceId], 'id': deviceId };\r\n\t\t\tpromises.push(new Promise((resolve, reject) => {\r\n\t\t\t\t\r\n\t\t\t\tthis.processDevice(deviceProperties).then(device => {\r\n\t\t\t\r\n\t\t\t\t\tif (device !== null) {\r\n\t\t\t\t\t\tgroupedDevices++;\r\n\t\t\t\t\t\tgroups = this.groupDevice(groups, device);\r\n\t\t\t\t\t\tresolve(deviceId);\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t\treject(deviceId);\r\n\t\t\t\t});\r\n\t\t\t}));\r\n\t\t\t\r\n\t\t\t// check states for own device settings\r\n\t\t\tfor (let stateKey in deviceProperties.states) {\r\n\t\t\t\t\r\n\t\t\t\tlet state = deviceProperties.states[stateKey];\r\n\t\t\t\tif (state && state.jarvis !== undefined) {\r\n\t\t\t\t\t\r\n\t\t\t\t\tpromises.push(new Promise((resolve, reject) => {\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tthis.processDevice({ ...deviceProperties, 'id': deviceId + '#' + stateKey, 'states': { [stateKey]: state }, 'options': state.jarvis }).then(device => {\r\n\t\t\t\t\t\r\n\t\t\t\t\t\t\tif (device !== null) {\r\n\t\t\t\t\t\t\t\tgroupedDevices++;\r\n\t\t\t\t\t\t\t\tgroups = this.groupDevice(groups, device);\r\n\t\t\t\t\t\t\t\tresolve(deviceId);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\treject(deviceId);\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}));\r\n\t\t\t\t\t\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\treturn new Promise(resolve => Promise.allSettled(promises).then(res => {\r\n\t\t\t\r\n\t\t\t// sort groups\r\n\t\t\tfor (let groupId in groups) {\r\n\t\t\t\tgroups[groupId].devices.sort((item1, item2) => {\r\n\t\t\t\t\tif (item1.options.sort > item2.options.sort) return 1;\r\n\t\t\t\t\telse if (item2.options.sort > item1.options.sort) return -1;\r\n\t\t\t\t\telse return 0;\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\r\n\t\t\t// return\r\n\t\t\tconsole.info('Processed ' + devices + ' devices. Added ' + groupedDevices + ' devices in ' + Object.keys(groups).length + ' groups.', res, groups);\r\n\t\t\tresolve(groups);\r\n\t\t}));\r\n\t};\r\n\t\r\n\trenderError(error) {\r\n\t\terror = error || this.state.errorMessage;\r\n\t\tconsole.error(JSON.stringify(error));\r\n\t\treturn (\r\n\r\n<StatusSnackbar\r\n\tkey={'StatusSnackbar'}\r\n\tvariant=\"error\"\r\n\tcloseButton={false}\r\n\tmessage={error.toString()}\r\n\t/>\r\n\r\n\t\t);\r\n\t}\r\n\t\r\n\trenderLoadingProgress() {\r\n\t\tconst { classes } = this.props;\r\n\t\treturn (\r\n\r\n<Grid\r\n\tkey=\"loadingProcess\"\r\n\tcontainer\r\n\tspacing={0}\r\n\tdirection=\"column\"\r\n\tjustify=\"center\"\r\n\talignItems=\"center\"\r\n\tstyle={{ minHeight: \"100vh\" }}\r\n\t>\r\n\r\n\t<CircularProgress />\r\n\t<Typography className={classes.loading}>{i18n.t('Retrieving settings')}...</Typography>\r\n\r\n</Grid>\r\n\r\n\t\t);\r\n\t};\r\n\t\r\n\trenderLoadingSkeleton(props) {\r\n\t\tconst { classes } = this.props;\r\n\t\tconst { topBar, tabBar, gridColumns } = props;\r\n\t\t\r\n\t\tconst SkeletonLoader = (props) => <Skeleton animation=\"wave\" variant=\"rect\" className={classes.gridItem} height={props.height} />;\r\n\t\t\r\n\t\tlet gridContents = {}\r\n\t\tfor (let column = 1; column <= gridColumns; column++) {\r\n\t\t\tgridContents[column] = gridContents[column] || [];\r\n\t\t\t\r\n\t\t\tlet loaders = Math.random() * (5 - 2) + 2;\r\n\t\t\tfor (let loader = 1; loader <= loaders; loader++) {\r\n\t\t\t\tgridContents[column].push(<SkeletonLoader key={column + '#' + loader} height={(Math.random() * (400 - 100) + 100)} />);\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\treturn (\r\n\r\n<React.Fragment>\r\n\t{topBar && <Skeleton animation=\"wave\" variant=\"rect\" height={64} />}\r\n\t{tabBar && <Skeleton animation=\"wave\" variant=\"rect\" height={48} />}\r\n\t<GridContainer key=\"loadingSkeleton\" contents={gridContents} />\r\n</React.Fragment>\r\n\r\n\t\t);\r\n\t}\r\n\t\r\n    render() {\r\n\t\t\r\n\t\t// error message\r\n\t\tconst error = this.state.error ? this.renderError() : null;\r\n\t\t\r\n\t\t// loading screens\r\n\t\tif (this.state.error && this.state.loaded.length < 2) {\r\n\t\t\treturn error;\r\n\t\t}\r\n\t\telse if (this.state.loaded.indexOf('settings') === -1) {\r\n\t\t\treturn this.renderLoadingProgress();\r\n\t\t}\r\n\t\telse if (this.state.loaded.indexOf('groups') === -1) {\r\n\t\t\tconst tab = Object.keys(this.settings.layout)[0];\r\n\t\t\treturn tab === undefined ? null : this.renderLoadingSkeleton({ topBar: true, tabBar: tab !== 1, gridColumns: (tab !== 1 ? Object.keys(this.settings.layout[tab]).length : tab.length) });\r\n\t\t}\r\n\t\t\r\n\t\t// App\r\n\t\treturn [ error, <Jarvis key=\"jarvis\" connectionStatus={this.state.connected} settings={this.settings} groups={this.groups} /> ];\r\n\t};\r\n}\r\n\r\nexport default withStyles(styles)(App);\r\n","// This optional code is used to register a service worker.\r\n// register() is not called by default.\r\n\r\n// This lets the app load faster on subsequent visits in production, and gives\r\n// it offline capabilities. However, it also means that developers (and users)\r\n// will only see deployed updates on subsequent visits to a page, after all the\r\n// existing tabs open on the page have been closed, since previously cached\r\n// resources are updated in the background.\r\n\r\n// To learn more about the benefits of this model and instructions on how to\r\n// opt-in, read https://bit.ly/CRA-PWA\r\n\r\nconst isLocalhost = Boolean(\r\n  window.location.hostname === 'localhost' ||\r\n    // [::1] is the IPv6 localhost address.\r\n    window.location.hostname === '[::1]' ||\r\n    // 127.0.0.0/8 are considered localhost for IPv4.\r\n    window.location.hostname.match(\r\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\r\n    )\r\n);\r\n\r\nexport function register(config) {\r\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\r\n    // The URL constructor is available in all browsers that support SW.\r\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\r\n    if (publicUrl.origin !== window.location.origin) {\r\n      // Our service worker won't work if PUBLIC_URL is on a different origin\r\n      // from what our page is served on. This might happen if a CDN is used to\r\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\r\n      return;\r\n    }\r\n\r\n    window.addEventListener('load', () => {\r\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\r\n\r\n      if (isLocalhost) {\r\n        // This is running on localhost. Let's check if a service worker still exists or not.\r\n        checkValidServiceWorker(swUrl, config);\r\n\r\n        // Add some additional logging to localhost, pointing developers to the\r\n        // service worker/PWA documentation.\r\n        navigator.serviceWorker.ready.then(() => {\r\n          console.log(\r\n            'This web app is being served cache-first by a service ' +\r\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\r\n          );\r\n        });\r\n      } else {\r\n        // Is not localhost. Just register service worker\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\nfunction registerValidSW(swUrl, config) {\r\n  navigator.serviceWorker\r\n    .register(swUrl)\r\n    .then(registration => {\r\n      registration.onupdatefound = () => {\r\n        const installingWorker = registration.installing;\r\n        if (installingWorker == null) {\r\n          return;\r\n        }\r\n        installingWorker.onstatechange = () => {\r\n          if (installingWorker.state === 'installed') {\r\n            if (navigator.serviceWorker.controller) {\r\n              // At this point, the updated precached content has been fetched,\r\n              // but the previous service worker will still serve the older\r\n              // content until all client tabs are closed.\r\n              console.log(\r\n                'New content is available and will be used when all ' +\r\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\r\n              );\r\n\r\n              // Execute callback\r\n              if (config && config.onUpdate) {\r\n                config.onUpdate(registration);\r\n              }\r\n            } else {\r\n              // At this point, everything has been precached.\r\n              // It's the perfect time to display a\r\n              // \"Content is cached for offline use.\" message.\r\n              console.log('Content is cached for offline use.');\r\n\r\n              // Execute callback\r\n              if (config && config.onSuccess) {\r\n                config.onSuccess(registration);\r\n              }\r\n            }\r\n          }\r\n        };\r\n      };\r\n    })\r\n    .catch(error => {\r\n      console.error('Error during service worker registration:', error);\r\n    });\r\n}\r\n\r\nfunction checkValidServiceWorker(swUrl, config) {\r\n  // Check if the service worker can be found. If it can't reload the page.\r\n  fetch(swUrl, {\r\n    headers: { 'Service-Worker': 'script' }\r\n  })\r\n    .then(response => {\r\n      // Ensure service worker exists, and that we really are getting a JS file.\r\n      const contentType = response.headers.get('content-type');\r\n      if (\r\n        response.status === 404 ||\r\n        (contentType != null && contentType.indexOf('javascript') === -1)\r\n      ) {\r\n        // No service worker found. Probably a different app. Reload the page.\r\n        navigator.serviceWorker.ready.then(registration => {\r\n          registration.unregister().then(() => {\r\n            window.location.reload();\r\n          });\r\n        });\r\n      } else {\r\n        // Service worker found. Proceed as normal.\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    })\r\n    .catch(() => {\r\n      console.log(\r\n        'No internet connection found. App is running in offline mode.'\r\n      );\r\n    });\r\n}\r\n\r\nexport function unregister() {\r\n  if ('serviceWorker' in navigator) {\r\n    navigator.serviceWorker.ready.then(registration => {\r\n      registration.unregister();\r\n    });\r\n  }\r\n}\r\n","import React from 'react'\r\nimport ReactDOM from 'react-dom'\r\n\r\nimport './index.css'\r\nimport App from './App'\r\nimport * as serviceWorker from './serviceWorker'\r\n\r\nReactDOM.render(<App />, document.getElementById('root'));\r\n\r\n// If you want your app to work offline and load faster, you can change\r\n// unregister() to register() below. Note this comes with some pitfalls.\r\n// Learn more about service workers: https://bit.ly/CRA-PWA\r\nserviceWorker.unregister();\r\n","/**\r\n *\r\n *\r\n */\r\nfunction HsvToRgb(h, s = 1, v = 1) {\r\n\tif (Array.isArray(h)) {\r\n\t\tv = h[2];\r\n\t\ts = h[1];\r\n\t\th = h[0];\r\n\t}\r\n\telse if (typeof h === 'string' && h.indexOf(',')) {\r\n\t\t[h, s, v] = h.split(',');\r\n\t}\r\n\t\r\n\tif (h > 1) {\r\n\t\th = h/360;\r\n\t}\r\n\t\r\n\tlet r, g, b, i, f, p, q, t;\r\n\t\r\n\ti = Math.floor(h * 6);\r\n\tf = h * 6 - i;\r\n\tp = v * (1 - s);\r\n\tq = v * (1 - f * s);\r\n\tt = v * (1 - (1 - f) * s);\r\n\t\r\n\tswitch (i % 6) {\r\n\t\tcase 0:\r\n\t\t\tr = v;\r\n\t\t\tg = t;\r\n\t\t\tb = p;\r\n\t\t\tbreak;\r\n\t\t\t\r\n\t\tcase 1:\r\n\t\t\tr = q;\r\n\t\t\tg = v;\r\n\t\t\tb = p;\r\n\t\t\tbreak;\r\n\t\t\r\n\t\tcase 2:\r\n\t\t\tr = p;\r\n\t\t\tg = v;\r\n\t\t\tb = t;\r\n\t\t\tbreak;\r\n\t\t\r\n\t\tcase 3:\r\n\t\t\tr = p;\r\n\t\t\tg = q;\r\n\t\t\tb = v;\r\n\t\t\tbreak;\r\n\t\t\r\n\t\tcase 4:\r\n\t\t\tr = t;\r\n\t\t\tg = p;\r\n\t\t\tb = v;\r\n\t\t\tbreak;\r\n\t\t\r\n\t\tcase 5:\r\n\t\t\tr = v;\r\n\t\t\tg = p;\r\n\t\t\tb = q;\r\n\t\t\tbreak;\r\n\t\t\r\n\t\tdefault: // for webpack\r\n\t\t\tbreak;\r\n\t}\r\n\t\r\n\treturn [\r\n\t\tMath.round(r * 255),\r\n\t\tMath.round(g * 255),\r\n\t\tMath.round(b * 255)\r\n\t];\r\n}\r\n\r\n\r\n/**\r\n *\r\n *\r\n */\r\nfunction RgbToHex(r, g, b) {\r\n\tif (Array.isArray(r)) {\r\n\t\tb = r[2];\r\n\t\tg = r[1];\r\n\t\tr = r[0];\r\n\t}\r\n\telse if (typeof r === 'string' && r.indexOf(',')) {\r\n\t\t[r, g, b] = r.split(',');\r\n\t}\r\n\t\r\n\tr = parseInt(r).toString(16);\r\n\tg = parseInt(g).toString(16);\r\n\tb = parseInt(b).toString(16);\r\n\t\r\n\tif (r.length === 1) r = '0' + r;\r\n\tif (g.length === 1) g = '0' + g;\r\n\tif (b.length === 1) b = '0' + b;\r\n\t\r\n\treturn \"#\" + r + g + b;\r\n}\r\n\r\n\r\nexport default {\r\n\tHsvToRgb,\r\n\tRgbToHex\r\n}","import React, { useState, useEffect } from 'react'\r\nimport { HuePicker, SketchPicker as ColorPicker } from 'react-color'\r\n\r\nimport helpers from '../helpers/colorConverter'\r\nimport defaults from './defaults'\r\n\r\n\r\n/*\r\n * ACTIONS\r\n *\r\n */\r\nfunction LightLevelAction(props) {\r\n\tconst { device, stateKey, stateVal } = props;\r\n\t\r\n\tconst onChange = (e) => {\r\n\t\tsetChecked(e.target.checked);\r\n\t\tdevice.setDeviceState(stateKey, e.target.checked ? 100 : 0).catch(err => console.error(err));\r\n\t}\r\n\t\r\n\tconst [checked, setChecked] = useState(stateVal > 0);\r\n\tuseEffect(() => setChecked(stateVal > 0), [stateVal]);\r\n\t\r\n\t// only show percentage if device has a switch itself\r\n\tif (device.parent && device.parent.states.power) {\r\n\t\treturn <defaults.actions.Action {...props} stateVal={checked} onChange={onChange} />;\r\n\t}\r\n\t\r\n\treturn <defaults.actions.PowerAction {...props} stateVal={checked} onChange={onChange} />\r\n}\r\n\r\nfunction LightColorAction(props) {\r\n\tconst { stateKey, stateVal } = props;\r\n\t\r\n\tconst [colorSpace, setColorSpace] = useState(stateVal);\r\n\tuseEffect(() => setColorSpace(stateVal), [stateVal]);\r\n\t\r\n\tlet colors, labels = {};\r\n\tif (stateKey === 'rgb' && colorSpace) {\r\n\t\tcolors = colorSpace.split(',');\r\n\t\tlabels = { Red: colors[0], Green: colors[1], Blue: colors[2] };\r\n\t\t\r\n\t}\r\n\telse if (stateKey === 'hsv' && colorSpace) {\r\n\t\tcolors = colorSpace.split(',');\r\n\t\tlabels = { Hue: colors[0], Saturation: colors[1], Brightness: colors[2] };\r\n\t}\r\n\t\r\n\tconst Label = defaults.components.Label;\r\n\tlet label = [];\r\n\tfor (let key in labels) {\r\n\t\tlabel.push(<Label key={key} label={key + ' ' + labels[key]} br={true} />);\r\n\t}\r\n\t\r\n\treturn label;\r\n}\r\n\r\n\r\n/*\r\n * COMPONENTS\r\n *\r\n */\r\nfunction LightColorTemperatureComponent(props) {\r\n\tconst Level = defaults.components.LevelComponent;\r\n\treturn (\r\n\t\t<Level min={2000} max={6500} step={10} {...props} />\r\n\t);\r\n}\r\n\r\nfunction LightHueComponent(props) {\r\n\tconst { device, stateKey, stateVal, title } = props;\r\n\t\r\n\tconst onChangeComplete = (color, e) => {\r\n\t\tsetHue(Math.round(color.hsl.h));\r\n\t\tdevice.setDeviceState(stateKey, Math.round(color.hsl.h)).catch(err => console.error(err));\r\n\t}\r\n\t\r\n\tconst [hue, setHue] = useState(stateVal);\r\n\tuseEffect(() => setHue(stateVal), [stateVal]);\r\n\t\r\n\tconst Component = defaults.components.Component;\r\n\tconst color = helpers.RgbToHex(helpers.HsvToRgb(hue));\r\n\treturn (\r\n\r\n<Component title={title || stateKey }>\r\n\t<HuePicker\r\n\t\tcolor={color}\r\n\t\twidth={'100%'}\r\n\t\tonChangeComplete={onChangeComplete}\r\n\t\t/>\r\n\t\t\r\n</Component>\r\n\r\n\t);\r\n}\r\n\r\nfunction LightColorComponent(props) {\r\n\tconst { device, stateKey, stateVal, title } = props;\r\n\t\r\n\tconst onChangeComplete = (color, e) => {\r\n\t\tcolor = color[stateKey];\r\n\t\t\r\n\t\t// RGB\r\n\t\tif (stateKey === 'rgb') {\r\n\t\t\tcolor = [color.r, color.g, color.b].join(',');\r\n\t\t}\r\n\t\t// HSV\r\n\t\telse if (stateKey === 'hsv') {\r\n\t\t\tcolor = [color.h, color.s, color.v].join(',');\r\n\t\t}\r\n\t\t\r\n\t\tdevice.setDeviceState(stateKey, color).catch(err => console.error(err));\r\n\t};\r\n\t\r\n\tlet initialColor = stateVal || '#ffffff';\r\n\t\r\n\t// RGB\r\n\tif (stateKey === 'rgb') {\r\n\t\tinitialColor = helpers.RgbToHex(initialColor);\r\n\t}\r\n\t// HSV\r\n\telse if (stateKey === 'hsv') {\r\n\t\tinitialColor = helpers.RgbToHex(helpers.HsvToRgb(initialColor));\r\n\t}\r\n\t\r\n\tconst [colorSpace, setColorSpace] = useState(initialColor);\r\n\tuseEffect(() => {\r\n\t\t// RGB\r\n\t\tif (stateKey === 'rgb') {\r\n\t\t\tsetColorSpace(helpers.RgbToHex(stateVal));\r\n\t\t}\r\n\t\t// HSV\r\n\t\telse if (stateKey === 'hsv') {\r\n\t\t\tsetColorSpace(helpers.RgbToHex(helpers.HsvToRgb(stateVal)));\r\n\t\t}\r\n\t\t// HEX\r\n\t\telse if (stateKey === 'hex') {\r\n\t\t\tsetColorSpace(stateVal);\r\n\t\t}\r\n\t}, [stateKey, stateVal]);\r\n\t\r\n\tconst Component = defaults.components.Component;\r\n\treturn (\r\n\r\n<Component title={title || stateKey }>\r\n\t<ColorPicker\r\n\t\tcolor={colorSpace}\r\n\t\twidth={'100%'}\r\n\t\tonChangeComplete={onChangeComplete}\r\n\t\t/>\r\n\t\t\r\n</Component>\r\n\r\n\t);\r\n}\r\n\r\n\r\nconst color = {\r\n\ticon: {\r\n\t\t'default': 'palette',\r\n\t},\r\n\tunit: ' °'\r\n}\r\n\r\nexport default {\r\n\tconfigurations: {\r\n\t\tpower: {\r\n\t\t\ticon: {\r\n\t\t\t\t'true': 'lightbulb-on',\r\n\t\t\t\t'false': 'lightbulb-off-outline'\r\n\t\t\t},\r\n\t\t},\r\n\t\tlevel: {\r\n\t\t\tvalue: (val) => val > 0 && val <= 1 ? val * 100 : val,\r\n\t\t\tunit: (value) => value !== 'off' ? ' %' : null,\r\n\t\t\ticon: {\r\n\t\t\t\t'default': 'lightbulb-on',\r\n\t\t\t\t'0': 'lightbulb-off-outline'\r\n\t\t\t},\r\n\t\t\tstate: {\r\n\t\t\t\t'0': 'off'\r\n\t\t\t},\r\n\t\t},\r\n\t\tcolorTemperature: {\r\n\t\t\ticon: {\r\n\t\t\t\t'default': 'thermometer',\r\n\t\t\t},\r\n\t\t\tunit: ' °K'\r\n\t\t},\r\n\t\thue: color,\r\n\t\trgb: color,\r\n\t\thsv: color,\r\n\t\thex: color\r\n\t},\r\n\tcomponents: {\r\n\t\tlevel: defaults.components.LevelComponent,\r\n\t\tcolorTemperature: LightColorTemperatureComponent,\r\n\t\trgb: LightColorComponent,\r\n\t\thsv: LightColorComponent,\r\n\t\thex: LightColorComponent,\r\n\t\thue: LightHueComponent\r\n\t},\r\n\tactions: {\r\n\t\tpower: defaults.actions.PowerAction,\r\n\t\tlevel: LightLevelAction,\r\n\t\trgb: LightColorAction,\r\n\t\thsv: LightColorAction,\r\n\t\thex: LightColorAction\r\n\t},\r\n\tstyles: {\r\n\t\t_any: {\r\n\t\t\t//icon: {},\r\n\t\t\tstate: {\r\n\t\t\t\t'0': {\r\n\t\t\t\t\t'color': '#999'\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n}","import EventEmitter from 'events'\r\nimport io from 'socket.io-client'\r\n\r\n\r\n/**\r\n * Class for Socket.io conncetion handling.\r\n *\r\n * @description This is based on an implementation @GermanBluefox (https://github.com/GermanBluefox), see https://github.com/ioBroker/adapter-react/blob/master/src/Connection.js\r\n *\t\t\t\tOnly required functions are taken from source class. Major change is that all events are emitted, so proper error handling is possible in the App.\r\n *\r\n *\r\n * @param\t{String}\t\turl\r\n * @param\t{Object}\t\toptions\r\n * @return\t{Socket}\r\n * @see https://github.com/ioBroker/ioBroker.socketio/blob/master/lib/socket.js https://github.com/ioBroker/ioBroker.js-controller/blob/master/lib/adapter.js#L635\r\n *\r\n */\r\nexport default class Socket extends EventEmitter {\r\n\t\r\n\tconstructor(url = null, options = {}) {\r\n\t\tsuper();\r\n\t\t\r\n\t\t// socket connection\r\n\t\tthis.socket = io(url, { timeout: 10000, ...options, query: 'ws=true' });\r\n\t\tthis.statesSubscribes = {}; // subscribed states\r\n\t\t\r\n\t\t/*\r\n\t\t * API events\r\n\t\t * @see https://github.com/socketio/socket.io-client/blob/HEAD/docs/API.md#socket\r\n\t\t *\r\n\t\t */\r\n\t\t// connect\r\n\t\tthis.socket.on('connect', () => this.emit('connect'));\r\n\t\t\r\n\t\t// reconnect: Fired upon a successful reconnection.\r\n\t\tthis.socket.on('reconnect', attempts => this.emit('reconnect', attempts));\r\n\t\t\r\n\t\t// reconnect_error: Fired upon a reconnection attempt error.\r\n\t\tthis.socket.on('reconnect_error', error => this.emit('error', { 'type': 'reconnect', 'event': 'reconnect_error', 'message': error.message }));\r\n\t\t\r\n\t\t// reconnect_failed: Fired upon a reconnection attempt error.\r\n\t\tthis.socket.on('reconnect_failed', () => this.emit('error', { 'type': 'reconnect', 'event': 'reconnect_failed', 'message': 'Reconnection failed!' }));\r\n\t\t\r\n\t\t// discconect\r\n\t\tthis.socket.on('disconnect', reason => this.emit('disconnect', reason));\r\n\t\t\r\n\t\t// connect_error\r\n\t\tthis.socket.on('connect_error', error => this.emit('error', { 'type': 'connect', 'event': 'connect_error', 'message': error.message }));\r\n\t\t\r\n\t\t// connect_timeout\r\n\t\tthis.socket.on('connect_timeout', () => this.emit('error', { 'type': 'connect', 'event': 'connect_timeout', 'message': 'Connect ran into timeout!' }));\r\n\t\t\r\n\t\t// error\r\n\t\tthis.socket.on('error', error => this.emit('error', { 'type': 'error', 'event': 'error', 'message': error.message }));\r\n\t\t\r\n\t\t/*\r\n\t\t * ioBroker events\r\n\t\t *\r\n\t\t */\r\n\t\tthis.socket.on('stateChange', (id, state) => setTimeout(() => this.stateChange(id, state), 0));\r\n\t}\r\n\t\r\n\t/**\r\n\t * Subscribes to multiple states by setting a callback.\r\n\t *\r\n\t */\r\n\tsubscribeStates(ids, cb) {\r\n\t\tids = Array.isArray(ids) ? ids : [ids];\r\n\t\tids.forEach(id => this.subscribeState(id, cb));\r\n\t}\r\n\t\r\n\t/**\r\n\t * Subscribes to a state by setting a callback.\r\n\t *\r\n\t */\r\n\tsubscribeState(id, cb) {\r\n\t\t\r\n\t\tif (!this.statesSubscribes[id]) {\r\n\t\t\tlet reg = id\r\n\t\t\t\t.replace(/\\./g, '\\\\.')\r\n\t\t\t\t.replace(/\\*/g, '.*')\r\n\t\t\t\t.replace(/\\(/g, '\\\\(')\r\n\t\t\t\t.replace(/\\)/g, '\\\\)')\r\n\t\t\t\t.replace(/\\+/g, '\\\\+')\r\n\t\t\t\t.replace(/\\[/g, '\\\\[');\r\n\r\n\t\t\tif (reg.indexOf('*') === -1) {\r\n\t\t\t\treg += '$';\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tthis.statesSubscribes[id] = { reg: new RegExp(reg), cbs: [cb] };\r\n\t\t\t\r\n\t\t\tif (this.socket.connected) {\r\n\t\t\t\tthis.socket.emit('subscribe', id);\r\n\t\t\t}\r\n\t\t}\r\n\t\telse {\r\n\t\t\tthis.statesSubscribes[id].cbs.indexOf(cb) === -1 && this.statesSubscribes[id].cbs.push(cb);\r\n\t\t}\r\n\t}\r\n\t\r\n\t/**\r\n\t * Fires pre-registered callbacks (via subscribeState) upon state change.\r\n\t *\r\n\t */\r\n\tstateChange(id, state) {\r\n\t\t\r\n\t\tid = id ? id.replace(/[\\s'\"]/g, '_') : '';\r\n\t\tfor (const task in this.statesSubscribes) {\r\n\t\t\tif (this.statesSubscribes.hasOwnProperty(task) && this.statesSubscribes[task].reg.test(id)) {\r\n\t\t\t\tthis.statesSubscribes[task].cbs.forEach(cb => cb(id, state));\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\t\r\n\t/**\r\n\t * Gets an object view.\r\n\t *\r\n\t */\r\n\tgetAdapterInstances(adapter, cb) {\r\n\t\t\r\n\t\tif (typeof adapter === 'function') {\r\n\t\t\tcb = adapter;\r\n\t\t\tadapter = null;\r\n\t\t}\r\n\t\t\r\n\t\treturn this.getObjectView('system', 'instance', { 'startkey': 'system.adapter.' + (adapter ? adapter + '.' : ''), 'endkey': 'system.adapter.' + (adapter ? adapter + '.999' : 'zzz') }, cb);\r\n\t}\r\n\t\r\n\t/**\r\n\t * Gets an object.\r\n\t *\r\n\t */\r\n\tgetObject(id, cb) {\r\n\t\t\r\n\t\tif (!cb) {\r\n\t\t\treturn new Promise((resolve, reject) => this.getObject(id, (err, obj) => err ? reject(err) : resolve(obj)));\r\n\t\t} else {\r\n\t\t\tthis.socket.emit('getObject', id, cb);\r\n\t\t}\r\n\t}\r\n\t\r\n\t/**\r\n\t * Gets an object view.\r\n\t *\r\n\t */\r\n\tgetObjectView(design, search, params, cb) {\r\n\t\t\r\n\t\tif (!cb) {\r\n\t\t\treturn new Promise((resolve, reject) => this.getObjectView(design, search, params, err => err ? reject(err) : resolve()));\r\n\t\t} else {\r\n\t\t\tthis.socket.emit('getObjectView', design, search, params, cb);\r\n\t\t}\r\n\t}\r\n\t\r\n\t/**\r\n\t * Gets a remote ressource.\r\n\t *\r\n\t */\r\n\tgetRemoteResource(url, cb) {\r\n\t\t\r\n\t\tif (!cb) {\r\n\t\t\treturn new Promise((resolve, reject) => this.getRemoteResource(url, (err, state) => err ? reject(err) : resolve(state)));\r\n\t\t} else {\r\n\t\t\tthis.socket.emit('httpGet', url, cb);\r\n\t\t}\r\n\t}\r\n\t\r\n\t/**\r\n\t * Gets a state.\r\n\t *\r\n\t */\r\n\tgetState(id, cb) {\r\n\t\t\r\n\t\tif (!cb) {\r\n\t\t\treturn new Promise((resolve, reject) => this.getState(id, (err, state) => err ? reject(err) : resolve(state)));\r\n\t\t} else {\r\n\t\t\tthis.socket.emit('getState', id, cb);\r\n\t\t}\r\n\t}\r\n\t\r\n\t/**\r\n\t * Gets multiple states at once.\r\n\t *\r\n\t */\r\n\tgetStates(pattern, cb) {\r\n\t\t\r\n\t\tif (!cb) {\r\n\t\t\treturn new Promise((resolve, reject) => this.getStates(pattern, (err, state) => err ? reject(err) : resolve(state)));\r\n\t\t} else {\r\n\t\t\tthis.socket.emit('getStates', pattern, cb);\r\n\t\t}\r\n\t}\r\n\t\r\n\t/**\r\n\t * Gets the state history.\r\n\t *\r\n\t */\r\n\tgetStateHistory(id, options, cb) {\r\n\t\t\r\n\t\tif (typeof options === 'function') {\r\n\t\t\tcb = options;\r\n\t\t\toptions = {};\r\n\t\t}\r\n\t\t\r\n\t\tif (!cb) {\r\n\t\t\treturn new Promise((resolve, reject) => this.getStateHistory(id, options, (err, state) => err ? reject(err) : resolve(state)));\r\n\t\t} else {\r\n\t\t\tthis.socket.emit('getHistory', id, options, cb);\r\n\t\t}\r\n\t}\r\n\t\r\n\t/**\r\n\t * Sets a state.\r\n\t *\r\n\t */\r\n\tsetState(id, val, cb) {\r\n\t\t\r\n\t\tif (!cb) {\r\n\t\t\treturn new Promise((resolve, reject) => this.setState(id, val, err => err ? reject(err) : resolve()));\r\n\t\t} else {\r\n\t\t\tthis.socket.emit('setState', id, val, cb);\r\n\t\t}\r\n\t}\r\n}\r\n","import Socket from './Socket'\r\n\r\n/**\r\n * Connection\r\n +\r\n *\r\n */\r\nexport default class Connection {\r\n\r\n\t/*\r\n\t * URL\r\n\t */\r\n\tstatic url = window.location.hostname;\r\n\t\r\n\t/*\r\n\t * Connection\r\n\t */\r\n\tstatic connection = null;\r\n\t\r\n\t/**\r\n\t * Connects to the Socket.\r\n\t *\r\n\t * @param\t{String}\turl\r\n\t * @param\t{Array}\t\tlisteners\r\n\t * @return\t{Connection}\r\n\t */\r\n\tstatic connect(url = null, listeners = null) {\r\n\t\t\r\n\t\t// set URL\r\n\t\tif (url) {\r\n\t\t\tConnection.setUrl = url;\r\n\t\t}\r\n\t\t\r\n\t\t// connect\r\n\t\tConnection.connection = new Socket(Connection.url);\r\n\t\t\r\n\t\t// set listeners\r\n\t\tif (listeners) {\r\n\t\t\tConnection.setListeners = listeners;\r\n\t\t}\r\n\t\t\r\n\t\t// return connection\r\n\t\treturn Connection.connection;\r\n\t}\r\n\t\r\n\t/**\r\n\t * Gets the current Connection.\r\n\t *\r\n\t * @param\tvoid\r\n\t * @return\t{Connection}\tCurrent Connection\r\n\t */\r\n\tstatic get getConnection() {\r\n\t\treturn Connection.connection || null;\r\n\t}\r\n\t\r\n\t/**\r\n\t * Get the current URL.\r\n\t *\r\n\t * @param\tvoid\r\n\t * @return\t{String}\tURL\r\n\t */\r\n\tstatic get getUrl() {\r\n\t\treturn Connection.url;\r\n\t}\r\n\t\r\n\t/**\r\n\t * Reconnect to the Socket.\r\n\t *\r\n\t * @param\tvoid\r\n\t * @return\t{String}\tURL\r\n\t */\r\n\tstatic get reconnect() {\r\n\t\treturn Connection.connect;\r\n\t}\r\n\t\r\n\t/**\r\n\t * Sets an event listener.\r\n\t *\r\n\t * @param\t{Object}\t\t\tlistener\r\n\t * @param\t{String}\t\t\tlistener.event\r\n\t * @param\t{Function}\t\t\tlistener.callback\r\n\t * @return\tvoid\r\n\t */\r\n\tstatic set setListener(listener) {\r\n\t\tConnection.connection.on(listener.event, listener.callback);\r\n\t}\r\n\t\r\n\t/**\r\n\t * Set event listeners.\r\n\t *\r\n\t * @param\t{Array<Object>}\t\tlisteners\r\n\t * @return \t{Boolean}\r\n\t */\r\n\tstatic set setListeners(listeners = []) {\r\n\t\t\r\n\t\tif (!listeners || !Array.isArray(listeners)) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\t\r\n\t\tlisteners.forEach(listener => Connection.setListener = listener);\r\n\t\treturn true;\r\n\t}\r\n\t\r\n\t/**\r\n\t * Set a new URL (has to be set before calling connect()).\r\n\t *\r\n\t * @param\t{String}\tURL\r\n\t * @return\tvoid\r\n\t */\r\n\tstatic set setUrl(url) {\r\n\t\tConnection.url = url;\r\n\t}\r\n}\r\n","/**\r\n * Internationalization\r\n * Based on https://raw.githubusercontent.com/ioBroker/adapter-react/master/src/i18n.js.\r\n * Copyright 2018-2019 bluefox <dogafox@gmail.com>\r\n *\r\n * MIT License\r\n *\r\n *\r\n */\r\nexport default class i18n {\r\n\r\n\t/*\r\n\t * holds the translations\r\n\t */\r\n\tstatic translations = {};\r\n\r\n\t/*\r\n\t * default language\r\n\t */\r\n\tstatic language = navigator.language || navigator.userLanguage || 'en';\r\n\r\n\t/**\r\n\t * Override default language.\r\n\t *\r\n\t * @param\t{String}\tlanguage\r\n\t * @return\t{Boolean}\r\n\t */\r\n\tstatic setLanguage(language) {\r\n\t\tif (language) {\r\n\t\t\ti18n.language = language;\r\n\t\t\tconsole.log('i18n: Set language to ' + language + '.');\r\n\t\t\treturn true;\r\n\t\t}\r\n\t\t\r\n\t\treturn false;\r\n\t}\r\n\t\r\n\t/**\r\n\t * Loads multiple translations.\r\n\t *\r\n\t * @param\t{String|Array}\tlanguages\r\n\t * @return\t{Boolean}\r\n\t */\r\n\tstatic loadTranslations(languages) {\r\n\t\t\r\n\t\tif (languages) {\r\n\t\t\tlanguages = Array.isArray(languages) ? languages : [languages];\r\n\t\t\tlanguages.forEach(language => i18n.loadTranslation(language));\r\n\t\t\t\r\n\t\t\treturn true;\r\n\t\t}\r\n\t\t\r\n\t\treturn false;\r\n\t}\r\n\t\r\n\t/**\r\n\t * Loads a translation.\r\n\t *\r\n\t * @param\t{String}\tlanguage\r\n\t * @return\t{Boolean}\r\n\t */\r\n\tstatic loadTranslation(language) {\r\n\t\t\r\n\t\tif (language) {\r\n\t\t\tlet translation;\r\n\t\t\ttry {\r\n\t\t\t\ttranslation = require('./i18n/' + language + '.js').default;\r\n\t\t\t}\r\n\t\t\tcatch(err) {\r\n\t\t\t\tconsole.error(err.message);\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\ti18n.setTranslation(language, translation);\r\n\t\t\treturn true;\r\n\t\t}\r\n\t\t\r\n\t\treturn false;\r\n\t\t\r\n\t}\r\n\t\r\n\t/**\r\n\t * Set a translation for language.\r\n\t *\r\n\t * @param\t{String}\tlanguage\r\n\t * @param\t{Object}\ttranslation\r\n\t * @return\t{Boolean}\r\n\t */\r\n\tstatic setTranslation(language, translation) {\r\n\t\tif (language && translation) {\r\n\t\t\ti18n.translations[language] = { ...i18n.translations[language] || {}, ...translation };\r\n\t\t\tconsole.log('i18n: Set translations for language ' + language + '.');\r\n\t\t\treturn true;\r\n\t\t}\r\n\t\t\r\n\t\treturn false;\r\n\t}\r\n\t\r\n\t/**\r\n\t * Get current set language.\r\n\t *\r\n\t * @param\tvoid\r\n\t * @return\t{String}\r\n\t */\r\n\tstatic getLanguage() {\r\n\t\treturn i18n.lang;\r\n\t}\r\n\t\r\n\t/**\r\n\t * Get current set language.\r\n\t *\r\n\t * @param\t{String}\tword\r\n\t * @param\t{Object}\t[options={}]\r\n\t * @param\t{Boolean}\t[options.ucFirst=false]\r\n\t * @param\t{Object}\t[placeholders={}]\r\n\t * @param\t{String}\t[language=i18n.language]\r\n\t * @return\t{String}\r\n\t */\r\n\tstatic t(word, options = {}, placeholders = {}, language = i18n.language) {\r\n\t\t\r\n\t\tword = word.toString();\r\n\t\tif (i18n.translations[language]) {\r\n\t\t\t\r\n\t\t\t// check if word is concatenated\r\n\t\t\tif (word.indexOf('#') > -1) {\r\n\t\t\t\t\r\n\t\t\t\tlet parts = word.split('#');\r\n\t\t\t\twhile (parts.length > 0 && !i18n.translations[language][parts.join('#')]) {\r\n\t\t\t\t\tparts.shift();\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tword = i18n.translations[language][parts.join('#')] || word;\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tword = i18n.translations[language][word] || word;\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\t// replace placeholders\r\n\t\tfor (let key in placeholders) {\r\n\t\t\tword = word.replace(RegExp('%' + key + '%', 'g'), placeholders[key]);\r\n\t\t}\r\n\t\t\r\n\t\t// options\r\n\t\tif (options.ucFirst) {\r\n\t\t\tword = word.charAt(0).toUpperCase() + word.slice(1);\r\n\t\t}\r\n\t\t\r\n\t\treturn word;\r\n\t}\r\n}\r\n"],"sourceRoot":""}