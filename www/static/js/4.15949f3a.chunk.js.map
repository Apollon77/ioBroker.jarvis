{"version":3,"sources":["pages/ConfigurationPage/DevicesPage/i18n/de.js","pages/ConfigurationPage/DevicesPage/i18n/en.js","pages/ConfigurationPage/LayoutsPage/i18n/de.js","pages/ConfigurationPage/LayoutsPage/i18n/en.js","pages/ConfigurationPage/SettingsPage/i18n/de.js","pages/ConfigurationPage/SettingsPage/i18n/en.js","pages/ConfigurationPage/i18n/de.js","pages/ConfigurationPage/i18n/en.js","pages/DonationPage/i18n/de.js","pages/DonationPage/i18n/en.js","pages/LogsPage/i18n/de.js","pages/LogsPage/i18n/en.js","components/EnhancedTableToolbar.js","components/EnhancedTableHead.js","components/EnhancedTableBody.js","components/EnhancedTable.js","pages/ConfigurationPage/DevicesPage/i18n sync /^/.*$","pages/ConfigurationPage/LayoutsPage/i18n sync /^/.*$","pages/ConfigurationPage/SettingsPage/i18n sync /^/.*$","pages/ConfigurationPage/i18n sync /^/.*$","pages/DonationPage/i18n sync /^/.*$","images/zefau.jpg","images/paypal.webp","pages/LogsPage/LogsPage.js","pages/LogsPage/i18n sync /^/.*$","pages/ConfigurationPage/DevicesPage/Devices.config.js","pages/ConfigurationPage/DevicesPage/DevicesPage.js","pages/ConfigurationPage/DevicesPage/ImportDevicesPage.js","pages/ConfigurationPage/DevicesPage/DevicesListPage.js","pages/ConfigurationPage/LayoutsPage/Layouts.config.js","components/Placeholder.js","pages/ConfigurationPage/LayoutsPage/WidgetPage.js","pages/ConfigurationPage/LayoutsPage/LayoutsPage.js","pages/ConfigurationPage/SettingsPage/SettingsPage.js","pages/ConfigurationPage/ConfigurationPage.js","pages/DonationPage/DonationPage.js","pages/index.js"],"names":["useToolbarStyles","makeStyles","theme","root","paddingLeft","spacing","paddingRight","highlight","palette","type","color","secondary","main","backgroundColor","lighten","light","text","primary","dark","title","flex","EnhancedTableToolbar","props","classes","rowCount","numSelected","rightActionButton","Toolbar","className","clsx","Typography","variant","id","undefined","Tooltip","IconButton","aria-label","EnhancedTableHead","headCells","onSelectAllClick","selectable","sortable","order","orderBy","onRequestSort","TableHead","TableRow","TableCell","padding","Checkbox","indeterminate","checked","onChange","inputProps","map","headCell","key","align","disablePadding","sortDirection","style","width","TableSortLabel","active","direction","onClick","property","event","label","useStyles","noWrap","whiteSpace","nestedObjects","val","seen","indexOf","push","EnhancedTable","columns","sortedRows","emptyRows","rowStyles","selected","row","index","isItemSelected","labelId","styles","columnId","rowStyle","Object","keys","hover","role","aria-checked","tabIndex","column","scope","content","toLowerCase","format","Array","isArray","JSON","stringify","toString","showTableContent","height","colSpan","table","minWidth","descendingComparator","a","b","orderByCase","orderA","orderB","tmpA","tmpB","substr","err","console","error","message","getComparator","stableSort","array","comparator","stabilizedThis","el","sort","size","CustomTableBody","rows","toolbar","pagination","defaultOrder","defaultOrderBy","defaultSelected","defaultPage","defaultRowsPerPage","toolbarRightActionButton","React","useState","setOrder","setOrderBy","setSelected","page","setPage","length","rowsPerPage","setRowsPerPage","useEffect","TableBody","EnhancedTableBody","Fragment","TableContainer","Table","aria-labelledby","stickyHeader","target","newSelecteds","n","slice","Math","min","selectedIndex","newSelected","concat","TablePagination","rowsPerPageOptions","component","count","onChangePage","newPage","onChangeRowsPerPage","parseInt","value","webpackContext","req","webpackContextResolve","__webpack_require__","o","e","Error","code","resolve","module","exports","i18n","t","setTranslations","language","require","LogsPage","this","logs","Log","getLog","CustomDialog","pinToTop","fullWidth","maxWidth","open","onClose","navigate","header","actions","autoFocus","paper","Component","withStyles","position","top","left","DevicesStates","iconContainer","flexDirection","alignItems","alignRight","display","justifyContent","marginLeft","DevicesPage","memo","device","setDevice","errors","setErrors","EDITOR","useRef","_onChange","useCallback","prevErrors","nextErrors","current","name","_addState","newStateKey","states","replace","prevDevice","stateKeys","_","log","Dialog","Grid","container","item","xs","Inputs","Button","onDelete","startIcon","savedDevice","options","attributes","split","base","characteristic","state","_updated","Date","now","onSave","_onSave","disabled","dense","Fieldset","FieldsetItem","Text","required","Select","function","selection","FUNCTIONS","funcKey","func","_any","icon","sortOptionsByKey","forEach","stateKey","DeviceStates","_moveState","action","moveKeyInObject","_deleteState","nextDevice","DeviceOptions","renderedOptions","DevicesConfig","config","DeviceOption","parameter","List","join","Tag","ListItem","divider","ListItemText","ListItemSecondaryAction","AddDeviceState","setNewStateKey","ListItemIcon","disableTypography","input","shrink","renderedStates","DeviceState","s","Input","ucFirst","node","marginTop","paddingBottom","noPadding","heading","ImportDevicesPage","loading","setLoading","importDevices","setImportDevices","componentWillUnmount","search","filter","adapters","Adapters","foundDevicesByManufacturer","categories","_markDeviceToImport","moveDeviceToIgnore","devices","findIndex","d","moveDeviceToNew","ignore","splice","hash","uuid","prevImportDevices","_created","nextImportDevices","_setSearch","attribute","adapter","_setImportDeviceList","foundDevices","_new","_added","_incorrect","_ignored","deviceList","Devices","getDevices","raw","newDevices","res","reason","categoryKey","status","note","manufacturer","namespace","adapterKey","AdapterItem","tick","then","catch","importEnums","onImport","values","RadioGroup","inputs","CircularProgress","Category","Device","category","deviceChecked","setDeviceChecked","markDeviceToImport","prevChecked","button","disableRipple","Chip","stopPropagation","prevProps","nextProps","expanded","Accordion","defaultExpanded","AccordionSummary","expandIcon","AccordionDetails","adapterName","default","setChecked","deleteButton","hr","margin","CustomTextInput","CustomDialogTitle","marginRight","verticalAlign","marginBottom","minHeight","newlyCreatedDevice","DevicesListPage","selectedDevice","setSelectedDevice","setDevices","document","getElementById","scrollTop","offsetTop","_saveDevices","saveDevices","_onDevicesChange","_deleteDeviceInWidgets","deviceId","layout","drawer","tabs","tab","columnIndex","_fullscreen","widget","_onLayoutsChange","Paper","DeviceTable","_selectDevice","saveDevice","nextDevices","CustomTableProps","DeviceList","optionKey","ModuleList","Placeholder","iconCentered","lineHeight","Badge","right","transform","sticky","background","zIndex","_copy","WidgetPage","moduleConfig","_onClose","_validate","ModuleConfigurations","field","SectionWidget","editor","SectionModule","fullscreen","setFullscreen","Switch","LayoutsConfig","widgetFullscreen","widgetTitle","widgetIcon","widgetIconStyle","iconStyle","get","setModule","widgetModule","autoComplete","autoHighlight","ModuleConfig","moduleConfigurations","ModuleDevices","moduleSettings","ModuleSettings","info","description","FieldsetLegend","setError","_addItem","prevDevices","_editItem","_moveItem","moveKeyInArray","_deleteItem","deviceOptions","sortArray","deviceIdList","renderedDevices","i","errorMessage","disableCloseOnSelect","clearOnSelect","clearOnBlur","getOptionLabel","option","renderOption","added","badgeContent","badge","fontSize","devicesStates","requiredStates","some","groupBy","closeIcon","popupIcon","centered","onEnter","clearOnEnter","componentConfig","setComponentConfig","Icon","Actions","DeviceActionsConfiguration","primaryStateKey","secondaryStateKey","lastUpdateOption","lastUpdate","onConfig","elements","ComponentConfig","DeviceBodyConfiguration","createElement","setOpen","componentConfiguration","configKey","configOption","textAlign","columnContainer","borderRight","borderLeft","DialogActions","LayoutsPage","_setLayout","setter","cb","drawers","drawerIndex","Drawer","setDrawer","isFirstRun","prevLayout","nextLayout","newTab","_deleteTab","prevDrawer","nextDrawer","_moveTab","tabsHideLabels","settings","Tab","setTab","_changeTab","prevTab","nextTab","_deleteColumn","_moveColumn","widgetsInFirstColumn","tabColumnsNodes","widgets","Column","tabIcon","onBlur","tabTitle","tabFullscreen","setColumn","selectedWidget","setSelectedWidget","tabColumnWidgetsNodes","_openWidget","_moveWidget","widgetKey","prevColumn","nextColumn","Widget","widgetIndex","typography","pxToRem","flexBasis","flexShrink","secondaryHeading","SettingsPage","SettingsConfig","panel","Panel","_onSettingsChange","Settings","getSettings","setExpanded","_handleSettingsChange","setSetting","items","inputKey","inputSettings","isExpanded","rawEditor","fontFamily","ConfigurationPage","copy","getLayout","expertMode","setExpertMode","saving","setSaving","l","onRawChange","parse","_cancel","SwitchInline","Tabs","indicatorColor","textColor","socket","Connection","getConnection","result","setState","Promise","all","window","location","reload","hidden","ExpertPage","setHeight","scrollHeight","inputId","InputProps","disableUnderline","multiline","Avatar","borderRadius","border","md","DonationPage","zefau","paypal","donationText","dangerouslySetInnerHTML","__html","render","disableBackdropClick","disableEscapeKeyDown","justify","alt","src","Link","href","configuration","donation"],"mappings":"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","file":"static/js/4.15949f3a.chunk.js","sourcesContent":["export default {\r\n\t\r\n\t// Config\r\n\t\"config#Devices#hiddenStates#info\": \"Liste mit States, die von jarvis zwar geladen, aber nicht angezeigt werden\",\r\n\t\"config#Devices#ignoredStates#info\": \"Liste mit States, die von jarvis ignoriert (und damit nicht geladen) werden\",\r\n\t\r\n\t\"config#Devices#state#label\": \"Datenpunkt (Anzeige)\",\r\n\t\"config#Devices#state#info\": \"Datenpunkt dessen State als Wert angezeigt wird\",\r\n\t\"config#Devices#stateStyle#label\": \"Datenpunkt Stil\",\r\n\t\"config#Devices#stateStyle#info\": \"Stil des angezeigten Wertes (im JSON Format)\",\r\n\t\"config#Devices#display#label\": \"Anzeigevariante\",\r\n\t\"config#Devices#display#info\": \"Texte die den angezeigten Wert ersetzen (im JSON Format)\",\r\n\t\"config#Devices#label#label\": \"Label\",\r\n\t\"config#Devices#unit#label\": \"Einheit\",\r\n\t\"config#Devices#unit#info\": \"Einheit des Datenpunkts, z. B. % oder °\",\r\n\t\"config#Devices#action#label\": \"Datenpunkt (Trigger)\",\r\n\t\"config#Devices#action#info\": \"Datenpunkt der zum Schalten getriggert wird\",\r\n\t\"config#Devices#icon#label\": \"Icon\",\r\n\t\"config#Devices#icon#info\": \"Material Icon (klick zur Ansicht aller Icons)\",\r\n\t\"config#Devices#iconStyle#label\": \"Icon Stil\",\r\n\t\"config#Devices#iconStyle#info\": \"Stil des Icons (im JSON Format)\",\r\n\t\r\n\t\r\n\t// Component\r\n\t\"No whitespaces allowed in the state\": \"Keine Leerzeichen im Datenpunkt erlaubt\",\r\n\t\"JSON format\": \"JSON Format\",\r\n\t\"Devices List\": \"Geräteliste\",\r\n\t\"add device\": \"Gerät hinzufügen\",\r\n\t\"import devices\": \"Geräte importieren\",\r\n\t\r\n\t\"Device ID\": \"Geräte ID\",\r\n\t\"Name\": \"Name\",\r\n\t\"Function\": \"Gewerk\",\r\n\t\"States\": \"States\",\r\n\t\"Options\": \"Optionen\",\r\n\t\"adapter\": \"Adapter\",\r\n\t\r\n\t\"add state\": \"Datenpunkt hinzufügen\",\r\n\t\"new state key\": \"Datenpunkt Bezeichner\",\r\n\t\r\n\t\"No input given\": \"Bitte etwas eingeben\",\r\n\t\"Wrong JSON format\": \"Falsches JSON Format\",\r\n\t\"Type in a state key / identifier\": \"State Bezeichnung eingeben\",\r\n\t\"State key already used\": \"State bereits in Benutzung\",\r\n\t\r\n\t\"Device Configuration\": \"Gerätekonfiguration\",\r\n\t\"Delete Device\": \"Gerät löschen\",\r\n\t\"General\": \"Allgemein\",\r\n\t\"Device\": \"Gerät\",\r\n\t\"Displayed Name\": \"Anzeigename\",\r\n\t\r\n\t\"New Devices\": \"neue Geräte\",\r\n\t\"Devices that have been added already\": \"bereits hinzugefügte Geräte\",\r\n\t\"Devices with incorrect configuration (states not found)\": \"Geräte mit inkorrekter Konfiguration (Datenpunkte nicht gefunden)\",\r\n\t\"Devices marked as ignored\": \"ignorierte Geräte\",\r\n\t\"Devices Import\": \"Geräte importieren\",\r\n\t\"Read adapters\": \"Adapter lesen\",\r\n\t\"Import selected devices\": \"ausgewählte Geräte importieren\",\r\n\t\"Adapters\": \"Adapter\",\r\n\t\"Search the adapter structure for all devices or only devices added to enums\": \"Adapter-Struktur entweder nach allen oder nur nach in Enums vorhandenen Geräten durchsuchen\",\r\n\t\"Search adapter structure for all devices\": \"nach allen Geräten durchsuchen\",\r\n\t\"Search only for devices added to enums\": \"nur nach in Enums hinzugefügten Geräten durchsuchen\",\r\n\t\"ignore\": \"ignorieren\",\r\n\t\"move to new devices\": \"zu den neuen Geräten verschieben\"\r\n}","export default {\r\n\t\r\n\t// Config\r\n\t\"config#Devices#hiddenStates#info\": \"List of states which will be retrieved but shall be hidden\",\r\n\t\"config#Devices#ignoredStates#info\": \"List of states which shall be ignored (and will not be retrieved)\",\r\n\t\r\n\t\"config#Devices#state#label\": \"State (to display)\",\r\n\t\"config#Devices#state#info\": \"State which value is shown\",\r\n\t\"config#Devices#stateStyle#label\": \"State Style\",\r\n\t\"config#Devices#stateStyle#info\": \"State Style of the displayed values (in JSON Format)\",\r\n\t\"config#Devices#display#label\": \"Display variant\",\r\n\t\"config#Devices#display#info\": \"Texts replacing the displayed value (in JSON Format)\",\r\n\t\"config#Devices#label#label\": \"Label\",\r\n\t\"config#Devices#unit#label\": \"Unit\",\r\n\t\"config#Devices#action#label\": \"State (to trigger)\",\r\n\t\"config#Devices#action#info\": \"State used to trigger an action\",\r\n\t\"config#Devices#icon#label\": \"Icon\",\r\n\t\"config#Devices#icon#info\": \"Material Icon (click to view icons)\",\r\n\t\"config#Devices#iconStyle#label\": \"Icon Style\",\r\n\t\"config#Devices#iconStyle#info\": \"Icon Style of the icon (in JSON Format)\"\r\n}","export default {\r\n\t\r\n\t// Config\r\n\t\"config#Layout#tabsHideLabels#label\": \"Tab Labels nicht anzeigen (nur Icons)\",\r\n\t\"config#Layout#tabsHideLabels#info\": \"Zeigt nur die Icons im Tab und nicht die Labels\",\r\n\t\"config#Layout#tabIcon#label\": \"Tab Icon\",\r\n\t\"config#Layout#tabTitle#label\": \"Tab Titel\",\r\n\t\"config#Layout#tabFullscreen#label\": \"Tab als Vollbild\",\r\n\t\"config#Layout#tabFullscreen#info\": \"Vollbild kann nur bei einem Tab mit nur einer Spalte und nur einem eingestellten Widget aktiviert werden\",\r\n\t\r\n\t\"config#Layout#widgetModule#label\": \"Modul zur Anzeige der Geräte\",\r\n\t\"config#Layout#widgetFullscreen#label\": \"Inhalte als Vollbild\",\r\n\t\"config#Layout#widgetFullscreen#info\": \"Die Inhalte nehmen die komplette größe des Widgets ein (Titel und Icon wird ausgeblendet)\",\r\n\t\"config#Layout#widgetTitle#label\": \"Titel der Widget-Box\",\r\n\t\"config#Layout#widgetIcon#label\": \"Icon der Widget-Box\",\r\n\t\"config#Layout#widgetIcon#info\": \"Material Icon (klick zur Ansicht aller Icons)\",\r\n\t\"config#Layout#widgetIconStyle#label\": \"Icon style der Widget-Box\",\r\n\t\r\n\t// Component\r\n\t\"Component configuration\": \"Komponenten Konfiguration\",\r\n\t\"Module Configuration\": \"Modul Konfiguration\",\r\n\t\"No configuration available for this module\": \"Keine Konfiguration für dieses Modul vorhanden\",\r\n\t\"Assigned Devices\": \"zugeordnete Geräte\",\r\n\t\"add device\": \"Gerät hinzufügen\",\r\n\t\"add group\": \"Gruppe hinzufügen\",\r\n\t\"add divider\": \"Trennstreifen\",\r\n\t\"add tab\": \"Tab hinzufügen\",\r\n\t\"add column\": \"Spalte hinzufügen\",\r\n\t\"move column\": \"Spalte schieben\",\r\n\t\"delete column\": \"Spalte löschen\",\r\n\t\"add widget\": \"Widget hinzufügen\",\r\n\t\"Widget configuration\": \"Widget Konfiguration\",\r\n\t\"Delete Widget\": \"Widget löschen\",\r\n\t\"Widget-Box\": \"Widget-Box\",\r\n\t\"Module\": \"Modul\",\r\n\t\"Devices\": \"Geräte\",\r\n\t\r\n\t\"Primary State Key\": \"primärer Datenpunkt\",\r\n\t\"Secondary State Key\": \"sekundärer Datenpunkt\",\r\n\t\r\n\t\"or\": \"oder\",\r\n\t\"none\": \"keine\",\r\n\t\"divider\": \"Trennstreifen\",\r\n\t\r\n\t\"No component selected\": \"keine Komponente ausgewählt\",\r\n\t\"No option selected\": \"keine Komponente ausgewählt\",\r\n\t\"Device needs one of the following states\": \"Das Gerät benötigt einen der folgenden Datenpunkte\"\r\n}","export default {\r\n\t\r\n\t// Config\r\n\t\"config#Layout#tabsHideLabels#label\": \"Hide tab labels (only show icons)\",\r\n\t\"config#Layout#tabsHideLabels#info\": \"Show only icons within a tab, not the label\",\r\n\t\"config#Layout#tabIcon#label\": \"Tab Icon\",\r\n\t\"config#Layout#tabTitle#label\": \"Tab Title\",\r\n\t\"config#Layout#tabFullscreen#label\": \"Tab Fullscreen\",\r\n\t\"config#Layout#tabFullscreen#info\": \"Fullscreen can only be enabled on a tab setup with only a single column and only a single widget\",\r\n\t\r\n\t\"config#Layout#widgetModule#label\": \"Modul to display the devices\",\r\n\t\"config#Layout#widgetFullscreen#label\": \"Widget fullscreen\",\r\n\t\"config#Layout#widgetFullscreen#info\": \"The content will fill the whole size of the widget (title and icon will be hidden)\",\r\n\t\"config#Layout#widgetTitle#label\": \"Title of the widget-box\",\r\n\t\"config#Layout#widgetIcon#label\": \"Icon of the widget-box\",\r\n\t\"config#Layout#widgetIcon#info\": \"Material Icon (click to view all icons)\",\r\n\t\"config#Layout#widgetIconStyle#label\": \"Icon style of the widget-box\",\r\n}","export default {\r\n\t\r\n\t// Config\r\n\t\"config#Settings#pageSettings#label\": \"Seiteneinstellungen\",\r\n\t\"config#Settings#pageSettings#settings#language#label\": \"Spracheinstellung von jarvis\",\r\n\t\"config#Settings#pageSettings#settings#pageFavicon#label\": \"Favicon im Browser\",\r\n\t\"config#Settings#pageSettings#settings#pageFavicon#info\": \"base64 Wert der Grafik\",\r\n\t\"config#Settings#pageSettings#settings#pageTitle#label\": \"Titel im Browser\",\r\n\t\r\n\t\"config#Settings#themeSettings#label\": \"Theme Einstellungen\",\r\n\t\"config#Settings#themeSettings#settings#themeDarkMode#label\": \"Dark Mode\",\r\n\t\"config#Settings#themeSettings#settings#themeColorPrimary#label\": \"Primäre Farbe des Themes\",\r\n\t\"config#Settings#themeSettings#settings#themeColorPrimary#info\": \"Der Farbwert kann ein Wert aus der Farbpalette in der Form `HUE|SHADE` (z. B. `blue|700`) sein. Alternativ kann ein Hex oder RGB angegeben werden.\",\r\n\t\"config#Settings#themeSettings#settings#themeColorSecondary#label\": \"Sekundäre Farbe des Themes\",\r\n\t\"config#Settings#themeSettings#settings#themeColorSecondary#info\": \"Der Farbwert kann ein Wert aus der Farbpalette in der Form `HUE|SHADE` (z. B. `pink|500`) sein. Alternativ kann ein Hex oder RGB angegeben werden.\",\r\n\t\"config#Settings#themeSettings#settings#defaultBoxIcon#label\": \"Standard Widget-Box Icon\",\r\n\t\"config#Settings#themeSettings#settings#hideTopBarIconTitle#label\": \"Icon und Titel der TopBar ausblenden\",\r\n\t\r\n\t\"config#Settings#themeSettings#settings#columnsOnSmallScreenSizes#label\": \"Spalten auf kleinem Bildschirm\",\r\n\t\"config#Settings#themeSettings#settings#columnsOnSmallScreenSizes#info\": \"Anzahl der Spalten auf Bildschirmen mit einer Breite zwischen 600-960px.\",\r\n\t\"config#Settings#themeSettings#settings#columnsOnMediumScreenSizes#label\": \"Spalten auf mittleren Bildschirm\",\r\n\t\"config#Settings#themeSettings#settings#columnsOnMediumScreenSizes#info\": \"Anzahl der Spalten auf Bildschirmen mit einer Breite zwischen 960-1280px.\",\r\n\t\"config#Settings#themeSettings#settings#columnsOnLargeScreenSizes#label\": \"Spalten auf großem Bildschirm\",\r\n\t\"config#Settings#themeSettings#settings#columnsOnLargeScreenSizes#info\": \"Anzahl der Spalten auf Bildschirmen mit einer Breite zwischen 1280px-1920px.\",\r\n\t\"config#Settings#themeSettings#settings#columnsOnExtraLargeScreenSizes#label\": \"Spalten auf sehr großem Bildschirm\",\r\n\t\"config#Settings#themeSettings#settings#columnsOnExtraLargeScreenSizes#info\": \"Anzahl der Spalten auf Bildschirmen mit einer Breite über 1920px.\"\r\n}","export default {\r\n\t\r\n\t// Config\r\n\t\"config#Settings#pageSettings#label\": \"Page Settings\",\r\n\t\"config#Settings#pageSettings#settings#language#label\": \"Language settings for jarvis\",\r\n\t\"config#Settings#pageSettings#settings#pageFavicon#label\": \"Browser favicon\",\r\n\t\"config#Settings#pageSettings#settings#pageFavicon#info\": \"base64 value of the image\",\r\n\t\"config#Settings#pageSettings#settings#pageTitle#label\": \"Browser title\",\r\n\t\r\n\t\"config#Settings#themeSettings#label\": \"Theme Settings\",\r\n\t\"config#Settings#themeSettings#settings#themeDarkMode#label\": \"Dark Mode\",\r\n\t\"config#Settings#themeSettings#settings#themeColorPrimary#label\": \"Primary theme color\",\r\n\t\"config#Settings#themeSettings#settings#themeColorPrimary#info\": \"\",\r\n\t\"config#Settings#themeSettings#settings#themeColorSecondary#label\": \"Secondary theme color\",\r\n\t\"config#Settings#themeSettings#settings#themeColorSecondary#info\": \"\",\r\n\t\"config#Settings#themeSettings#settings#defaultBoxIcon#label\": \"Default widget-box icon\",\r\n\t\"config#Settings#themeSettings#settings#hideTopBarIconTitle#label\": \"Hide Icon and Title in TopBar\",\r\n\t\r\n\t\"config#Settings#themeSettings#settings#columnsOnSmallScreenSizes#label\": \"Columns on a small screen\",\r\n\t\"config#Settings#themeSettings#settings#columnsOnSmallScreenSizes#info\": \"Amount of columns on screens with a width between 600-960px.\",\r\n\t\"config#Settings#themeSettings#settings#columnsOnMediumScreenSizes#label\": \"Columns on a medium screen\",\r\n\t\"config#Settings#themeSettings#settings#columnsOnMediumScreenSizes#info\": \"Amount of columns on screens with a width between 960-1280px.\",\r\n\t\"config#Settings#themeSettings#settings#columnsOnLargeScreenSizes#label\": \"Columns on a large screen\",\r\n\t\"config#Settings#themeSettings#settings#columnsOnLargeScreenSizes#info\": \"Amount of columns on screens with a width between 1280px-1920px.\",\r\n\t\"config#Settings#themeSettings#settings#columnsOnExtraLargeScreenSizes#label\": \"Columns on an extra-large screen\",\r\n\t\"config#Settings#themeSettings#settings#columnsOnExtraLargeScreenSizes#info\": \"Amount of columns on screens with a width above 1920px.\"\r\n}","export default {\r\n\t\r\n\t'Invalid JSON format': 'Falsches JSON Format',\r\n\t'Configuration': 'Konfiguration',\r\n\t'Expert mode': 'Expertenmodus',\r\n\t'Devices': 'Geräte',\r\n\t'Settings': 'Einstellungen',\r\n\t'Layout': 'Layout',\r\n\t'JSON Editor': 'JSON Editor',\r\n}","export default {\r\n}","export default {\r\n\t\"Support the development of jarvis\": \"Unterstütze die Weiterentwicklung von jarvis\",\r\n\t\"Overview of my adapters\": \"Übersicht aller meiner Adapter\",\r\n\t\"donation#TextIntro\": \"Ich hoffe, euch gefällt jarvis und der Adapter bereichert euer Smarthome.\",\r\n\t\"donation#TextFeatures\": \"Sofern euch Funktionen fehlen, ihr euch Features wünscht oder auf Bugs gestoßen seid, dann [scheut bitte nicht einen Issue auf Github zu erstellen](https://github.com/Zefau/ioBroker.jarvis/issues). Nur, wenn ich davon erfahre, kann ich es umsetzen.\",\r\n\t\"donation#TextBugs\": \"Sofern ihr Probleme oder Fragestellungen habt, schaut [gerne ins Wiki](https://github.com/Zefau/ioBroker.jarvis/wiki) oder [meldet euch im Forum](https://forum.iobroker.net/topic/30668/jarvis-just-another-remarkable-vis/1).\",\r\n\t\"donation#TextFeedback\": \"Die Entwicklung des Adapters macht mir wirklich Spaß. Vor allem, wenn ich sehe, wie positiv die Resonanz ist.\",\r\n\t\"donation#TextSupport\": \"Ich würde mich sehr freuen, wenn ihr die weitere Entwicklung mit einem Bierchen oder einer Maß unterstützt. ;-)\",\r\n\t\"donation#TextGreetings\": \"Danke und viele Grüße, Zefau\"\r\n}","export default {\r\n\t\"donation#TextIntro\": \"I hope you enjoy jarvis and it enriches your smarthome.\",\r\n\t\"donation#TextFeatures\": \"If you are missing a certain functionality or you found a bug, please [do not hesitate to create an issue on Github](https://github.com/Zefau/ioBroker.jarvis/issues).\",\r\n\t\"donation#TextBugs\": \"If you are facing problems or having questions, [please see the Wiki](https://github.com/Zefau/ioBroker.jarvis/wiki) or [ask in the forum](https://forum.iobroker.net/topic/30668/jarvis-just-another-remarkable-vis/1).\",\r\n\t\"donation#TextFeedback\": \"I'm enjoying the development of the adapter, especially when the feedback is so positive.\",\r\n\t\"donation#TextSupport\": \"I would appreciate if you support the development of the adapter with a beer. ;-)\",\r\n\t\"donation#TextGreetings\": \"Cheers and kind regards, Zefau\"\r\n}","export default {\r\n\t\r\n\t// Component\r\n\t'Time': 'Zeit',\r\n\t'Module': 'Modul',\r\n\t'Criticality': 'Kritikalität',\r\n\t'Message': 'Nachricht',\r\n\t'Stack Trace': 'Stack Trace',\r\n}","export default {\r\n}","/*\r\n * Code by MATERIAL-UI\r\n * @see https://material-ui.com/components/tables/#sorting-amp-selecting\r\n *\r\n */\r\nimport React from 'react'\r\nimport PropTypes from 'prop-types'\r\nimport clsx from 'clsx'\r\n\r\nimport { lighten, makeStyles } from '@material-ui/core/styles'\r\nimport Toolbar from '@material-ui/core/Toolbar'\r\nimport Typography from '@material-ui/core/Typography'\r\nimport IconButton from '@material-ui/core/IconButton'\r\nimport Tooltip from '@material-ui/core/Tooltip'\r\nimport DeleteIcon from '@material-ui/icons/Delete'\r\n\r\n\r\nconst useToolbarStyles = makeStyles(theme => ({\r\n  root: {\r\n    paddingLeft: theme.spacing(2),\r\n    paddingRight: theme.spacing(1),\r\n  },\r\n  highlight:\r\n    theme.palette.type === 'light'\r\n      ? {\r\n          color: theme.palette.secondary.main,\r\n          backgroundColor: lighten(theme.palette.secondary.light, 0.85),\r\n        }\r\n      : {\r\n          color: theme.palette.text.primary,\r\n          backgroundColor: theme.palette.secondary.dark,\r\n        },\r\n  title: {\r\n    flex: '1 1 100%',\r\n  },\r\n}));\r\n\r\nexport default function EnhancedTableToolbar(props) {\r\n  const classes = useToolbarStyles();\r\n  const { title, rowCount, numSelected, rightActionButton } = props;\r\n\r\n  return (\r\n    <Toolbar\r\n      className={clsx(classes.root, {\r\n        [classes.highlight]: numSelected > 0,\r\n      })}\r\n    >\r\n      {numSelected > 0 ? (\r\n        <Typography className={classes.title} color=\"inherit\" variant=\"subtitle1\">\r\n          {numSelected} selected\r\n        </Typography>\r\n      ) : (\r\n        <Typography className={classes.title} variant=\"h6\" id=\"tableTitle\">\r\n\t\t\t{title !== undefined && (title + ' (' + rowCount + ')')}\r\n        </Typography>\r\n      )}\r\n\r\n      {numSelected > 0 ? (\r\n        <Tooltip title=\"Delete\">\r\n          <IconButton aria-label=\"delete\">\r\n            <DeleteIcon />\r\n          </IconButton>\r\n        </Tooltip>\r\n      )\r\n\t  : rightActionButton}\r\n    </Toolbar>\r\n  );\r\n};\r\n\r\nEnhancedTableToolbar.propTypes = {\r\n  numSelected: PropTypes.number.isRequired,\r\n};","/*\r\n * Code by MATERIAL-UI\r\n * @see https://material-ui.com/components/tables/#sorting-amp-selecting\r\n *\r\n */\r\nimport React from 'react'\r\nimport PropTypes from 'prop-types'\r\n\r\nimport TableHead from '@material-ui/core/TableHead'\r\nimport TableRow from '@material-ui/core/TableRow'\r\nimport TableCell from '@material-ui/core/TableCell'\r\nimport TableSortLabel from '@material-ui/core/TableSortLabel'\r\nimport Checkbox from '@material-ui/core/Checkbox'\r\n\r\n\r\nexport default function EnhancedTableHead(props) {\r\n  const { headCells, onSelectAllClick, selectable, sortable, order, orderBy, numSelected, rowCount, onRequestSort } = props;\r\n  const createSortHandler = property => event => {\r\n    onRequestSort(event, property);\r\n  };\r\n\r\n  return (\r\n    <TableHead>\r\n      <TableRow>\r\n\t\t{selectable !== false &&\r\n\t\t\t<TableCell padding=\"checkbox\">\r\n\t\t\t  <Checkbox\r\n\t\t\t\tindeterminate={numSelected > 0 && numSelected < rowCount}\r\n\t\t\t\tchecked={rowCount > 0 && numSelected === rowCount}\r\n\t\t\t\tonChange={onSelectAllClick}\r\n\t\t\t\tinputProps={{ 'aria-label': 'select all' }}\r\n\t\t\t  />\r\n\t\t\t</TableCell>\r\n\t\t}\r\n\t\t\r\n        {headCells.map(headCell => (\r\n          <TableCell\r\n            key={headCell.id}\r\n            align={headCell.align || 'left'}\r\n            padding={headCell.disablePadding ? 'none' : 'default'}\r\n            sortDirection={sortable && (orderBy === headCell.id ? order : false)}\r\n\t\t\tstyle={{ width: headCell.width || 'auto' }}\r\n          >\r\n\t\t  {sortable ?\r\n            <TableSortLabel\r\n              active={orderBy === headCell.id}\r\n              direction={orderBy === headCell.id ? order : 'asc'}\r\n              onClick={createSortHandler(headCell.orderBy || headCell.id)}\r\n            >\r\n              <strong>{headCell.label}</strong>\r\n            </TableSortLabel>\r\n\t\t\t:\r\n\t\t\t <strong>{headCell.label}</strong>\r\n\t\t\t}\r\n          </TableCell>\r\n        ))}\r\n      </TableRow>\r\n    </TableHead>\r\n  );\r\n}\r\n\r\nEnhancedTableHead.propTypes = {\r\n  classes: PropTypes.object.isRequired,\r\n  numSelected: PropTypes.number.isRequired,\r\n  onRequestSort: PropTypes.func.isRequired,\r\n  onSelectAllClick: PropTypes.func.isRequired,\r\n  order: PropTypes.oneOf(['asc', 'desc']).isRequired,\r\n  orderBy: PropTypes.string.isRequired,\r\n  rowCount: PropTypes.number.isRequired,\r\n};","/*\r\n * Code by MATERIAL-UI\r\n * @see https://material-ui.com/components/tables/#sorting-amp-selecting\r\n *\r\n */\r\nimport React from 'react'\r\nimport clsx from 'clsx'\r\nimport { format } from 'date-fns'\r\n\r\nimport TableBody from '@material-ui/core/TableBody'\r\nimport TableCell from '@material-ui/core/TableCell'\r\nimport TableRow from '@material-ui/core/TableRow'\r\nimport Checkbox from '@material-ui/core/Checkbox'\r\n\r\n\r\n/*\r\n * STYLES\r\n */\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nconst useStyles = makeStyles(theme => ({\r\n\tnoWrap: {\r\n\t\twhiteSpace: 'nowrap'\r\n\t}\r\n}));\r\n\r\n\r\n// https://stackoverflow.com/questions/9382167/serializing-object-that-contains-cyclic-object-value\r\nfunction nestedObjects(key, val, seen) {\r\n\t\r\n\tif (val !== null && typeof val === 'object') {\r\n\t\tif (seen.indexOf(val) >= 0) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\t\r\n\t\tseen.push(val);\r\n\t}\r\n\t\r\n\treturn val;\r\n}\r\n\r\nfunction showTableContent(content, type = '') {\r\n\t\r\n\tif (content === undefined || content === null) {\r\n\t\treturn '';\r\n\t}\r\n\t\r\n\tlet seen = [];\r\n\tswitch(type.toLowerCase()) {\r\n\t\tcase 'date':\r\n\t\t\tcontent = format(content, 'yyyy-MM-dd HH:mm:ss');\r\n\t\t\tbreak;\r\n\t\t\r\n\t\tdefault:\r\n\t\t\tcontent = Array.isArray(content) || typeof content === 'object' ? JSON.stringify(content, (key, val) => nestedObjects(key, val, seen)) : content;\r\n\t\t\tcontent = typeof content === 'boolean' ? content.toString() : content;\r\n\t\t\tbreak;\r\n\t}\r\n\t\r\n\treturn content;\r\n}\r\n\r\nexport default function EnhancedTable(props) {\r\n\tconst { columns, sortedRows, emptyRows, rowStyles, selectable, selected, onClick } = props;\r\n\tconst classes = useStyles();\r\n\tconst isSelected = id => selected.indexOf(id) !== -1;\r\n\r\n\treturn (\r\n\r\n<TableBody>\r\n\t{sortedRows.map((row, index) => {\r\n\t\tconst isItemSelected = isSelected(row.id);\r\n\t\tconst labelId = `enhanced-table-checkbox-${index}`;\r\n\t\t\r\n\t\tlet styles = {};\r\n\t\tfor (let columnId in rowStyles) {\r\n\t\t\tlet rowStyle = rowStyles[columnId];\r\n\t\t\t\r\n\t\t\tif (row[columnId] && Object.keys(rowStyle).indexOf(row[columnId]) > -1) {\r\n\t\t\t\tstyles = { ...styles, ...rowStyle[row[columnId]] };\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\treturn (\r\n\r\n\t<TableRow\r\n\t\tkey={'TableRow-' + index}\r\n\t\thover\r\n\t\tonClick={onClick ? (event => onClick(event, row.id)) : undefined}\r\n\t\trole=\"checkbox\"\r\n\t\taria-checked={isItemSelected}\r\n\t\ttabIndex={-1}\r\n\t\tselected={isItemSelected}\r\n\t\t>\r\n\t\t\r\n\t\t{selectable !== false &&\r\n\t\t<TableCell\r\n\t\t\tkey={'TableCell-' + index + '-Checkbox'}\r\n\t\t\tstyle={styles}\r\n\t\t\tpadding=\"checkbox\"\r\n\t\t\t>\r\n\t\t\t\r\n\t\t\t<Checkbox\r\n\t\t\t\tchecked={isItemSelected}\r\n\t\t\t\tinputProps={{ 'aria-labelledby': labelId }}\r\n\t\t\t\t/>\r\n\t\t\t\r\n\t\t</TableCell>\r\n\t\t}\r\n\t\t\r\n\t\t{columns.map(column => (\r\n\t\t<TableCell\r\n\t\t\tkey={'TableCell-' + index + '-' + column.id}\r\n\t\t\tclasses={{ root: clsx(column.noWrap && classes.noWrap) }}\r\n\t\t\tstyle={styles}\r\n\t\t\tscope=\"row\"\r\n\t\t\tpadding={column.disablePadding ? 'none' : 'default'}\r\n\t\t\t>\r\n\r\n\t\t\t{showTableContent(row[column.id], column.type)}\r\n\t\t</TableCell>\r\n\r\n\t\t))}\r\n\r\n\t</TableRow>\r\n\t\t\r\n\t\t);\r\n\t})}\r\n\t\r\n\t{emptyRows > 0 && (\r\n\t<TableRow style={{ height: 53 * emptyRows }}>\r\n\t\t<TableCell colSpan={6} />\r\n\t</TableRow>\r\n\t)}\r\n\t\r\n</TableBody>\r\n\r\n\t);\r\n}","/*\r\n * Code by MATERIAL-UI\r\n * @see https://material-ui.com/components/tables/#sorting-amp-selecting\r\n *\r\n */\r\nimport React, { useEffect } from 'react'\r\n\r\nimport { makeStyles } from '@material-ui/core/styles'\r\nimport Table from '@material-ui/core/Table'\r\nimport TableContainer from '@material-ui/core/TableContainer'\r\nimport TablePagination from '@material-ui/core/TablePagination'\r\n\r\nimport EnhancedTableToolbar from '../components/EnhancedTableToolbar'\r\nimport EnhancedTableHead from '../components/EnhancedTableHead'\r\nimport EnhancedTableBody from '../components/EnhancedTableBody'\r\n\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n  table: {\r\n    minWidth: 750,\r\n  }\r\n}));\r\n\r\n\r\nfunction descendingComparator(a, b, orderBy, orderByCase) {\r\n\t\r\n\tlet orderA, orderB;\r\n\tif (orderBy.indexOf('.') === -1) {\r\n\t\torderA = a[orderBy] || '';\r\n\t\torderB = b[orderBy] || '';\r\n\t}\r\n\telse {\r\n\t\tlet tmpA = { ...a };\r\n\t\tlet tmpB = { ...b };\r\n\t\tlet key = orderBy;\r\n\t\tlet index;\r\n\t\t\r\n\t\twhile (key.indexOf('.') > -1) {\r\n\t\t\t\r\n\t\t\ttry {\r\n\t\t\t\tindex = key.substr(0, key.indexOf('.'));\r\n\t\t\t\tkey = key.substr(key.indexOf('.')+1);\r\n\t\t\t\ttmpA = tmpA[index];\r\n\t\t\t\ttmpB = tmpB[index];\r\n\t\t\t}\r\n\t\t\tcatch(err) {\r\n\t\t\t\tconsole.error(err.message);\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\torderA = tmpA[key] || '';\r\n\t\torderB = tmpB[key] || '';\r\n\t}\r\n\t\r\n\tif (orderByCase !== true) {\r\n\t\torderA = typeof orderA === 'object' ? JSON.stringify(orderA) : orderA.toLowerCase();\r\n\t\torderB = typeof orderB === 'object' ? JSON.stringify(orderB) : orderB.toLowerCase();\r\n\t}\r\n\t\r\n\t\r\n  if (orderB < orderA) {\r\n    return -1;\r\n  }\r\n  if (orderB > orderA) {\r\n    return 1;\r\n  }\r\n  return 0;\r\n}\r\n\r\nfunction getComparator(order, orderBy, orderByCase) {\r\n  return order === 'desc'\r\n    ? (a, b) => descendingComparator(a, b, orderBy, orderByCase)\r\n    : (a, b) => -descendingComparator(a, b, orderBy, orderByCase);\r\n}\r\n\r\nfunction stableSort(array, comparator) {\r\n  const stabilizedThis = array.map((el, index) => [el, index]);\r\n  stabilizedThis.sort((a, b) => {\r\n    const order = comparator(a[0], b[0]);\r\n    if (order !== 0) return order;\r\n    return a[1] - b[1];\r\n  });\r\n  return stabilizedThis.map(el => el[0]);\r\n}\r\n\r\nexport default function EnhancedTable(props) {\r\n  const classes = useStyles();\r\n  \r\n  const { title, headCells, size, CustomTableBody, rows, toolbar, selectable, pagination, defaultOrder, defaultOrderBy, orderByCase, defaultSelected, defaultPage, defaultRowsPerPage, toolbarRightActionButton } = props;\r\n  \r\n  const [order, setOrder] = React.useState(defaultOrder || 'asc');\r\n  const [orderBy, setOrderBy] = React.useState(defaultOrderBy || headCells[0].orderBy || headCells[0].id);\r\n  const [selected, setSelected] = React.useState(defaultSelected || []);\r\n  const [page, setPage] = React.useState(defaultPage || 0);\r\n  const [rowsPerPage, setRowsPerPage] = React.useState(pagination ? (defaultRowsPerPage || 5) : rows.length);\r\n\r\nuseEffect(() => setRowsPerPage(pagination ? (defaultRowsPerPage || 5) : rows.length), [rows.length, pagination, defaultRowsPerPage]);\r\n\r\n\r\n  const handleRequestSort = (event, property) => {\r\n    const isAsc = orderBy === property && order === 'asc';\r\n    setOrder(isAsc ? 'desc' : 'asc');\r\n    setOrderBy(property);\r\n  };\r\n\r\n  const handleSelectAllClick = event => {\r\n    if (event.target.checked) {\r\n      const newSelecteds = rows.map(n => n.id);\r\n      setSelected(newSelecteds);\r\n      return;\r\n    }\r\n    setSelected([]);\r\n  };\r\n\r\n  const handleChangePage = (event, newPage) => {\r\n    setPage(newPage);\r\n  };\r\n\r\n  const handleChangeRowsPerPage = event => {\r\n    setRowsPerPage(parseInt(event.target.value, 10));\r\n    setPage(0);\r\n  };\r\n\r\n  const selectRow = (event, id) => {\r\n    const selectedIndex = selected.indexOf(id);\r\n    let newSelected = [];\r\n\r\n    if (selectedIndex === -1) {\r\n      newSelected = newSelected.concat(selected, id);\r\n    } else if (selectedIndex === 0) {\r\n      newSelected = newSelected.concat(selected.slice(1));\r\n    } else if (selectedIndex === selected.length - 1) {\r\n      newSelected = newSelected.concat(selected.slice(0, -1));\r\n    } else if (selectedIndex > 0) {\r\n      newSelected = newSelected.concat(\r\n        selected.slice(0, selectedIndex),\r\n        selected.slice(selectedIndex + 1),\r\n      );\r\n    }\r\n\r\n    setSelected(newSelected);\r\n  };\r\n\r\n  const TableBody = CustomTableBody || EnhancedTableBody;\r\n  return (\r\n\t<React.Fragment>\r\n\t\t{toolbar !== false &&\r\n        <EnhancedTableToolbar\r\n\t\t  title={title}\r\n          rowCount={rows.length}\r\n\t\t  numSelected={selected.length || 0}\r\n\t\t  rightActionButton={toolbarRightActionButton}\r\n\t\t  />}\r\n\t\t\r\n        <TableContainer>\r\n          <Table\r\n            className={classes.table}\r\n            aria-labelledby=\"tableTitle\"\r\n            aria-label=\"enhanced table\"\r\n\t\t\tsize={size}\r\n\t\t\tstickyHeader={true}\r\n          >\r\n            <EnhancedTableHead\r\n              classes={classes}\r\n              numSelected={selected.length}\r\n              order={order}\r\n              orderBy={orderBy}\r\n              onSelectAllClick={handleSelectAllClick}\r\n              onRequestSort={handleRequestSort}\r\n              rowCount={rows.length}\r\n\t\t\t  {...props}\r\n            />\r\n\t\t\t\r\n\t\t\t<TableBody\r\n\t\t\t\tcolumns={headCells}\r\n\t\t\t\tsortedRows={stableSort(rows, getComparator(order, orderBy, orderByCase)).slice(page * rowsPerPage, page * rowsPerPage + rowsPerPage)}\r\n\t\t\t\temptyRows={rowsPerPage - Math.min(rowsPerPage, rows.length - page * rowsPerPage)}\r\n\t\t\t\tonClick={selectable !== false && selectRow}\r\n\t\t\t\tselected={selected}\r\n\t\t\t\t{...props}\r\n\t\t\t\t/>\r\n\t\t\t\r\n          </Table>\r\n        </TableContainer>\r\n\t\t{pagination && <TablePagination\r\n          rowsPerPageOptions={[5, 10, 25]}\r\n          component=\"div\"\r\n          count={rows.length}\r\n          rowsPerPage={rowsPerPage}\r\n          page={page}\r\n          onChangePage={handleChangePage}\r\n          onChangeRowsPerPage={handleChangeRowsPerPage}\r\n        />}\r\n\t</React.Fragment>\r\n\t\r\n  );\r\n}","var map = {\n\t\"./de\": 2060,\n\t\"./de.js\": 2060,\n\t\"./en\": 2061,\n\t\"./en.js\": 2061\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 2105;","var map = {\n\t\"./de\": 2062,\n\t\"./de.js\": 2062,\n\t\"./en\": 2063,\n\t\"./en.js\": 2063\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 2111;","var map = {\n\t\"./de\": 2064,\n\t\"./de.js\": 2064,\n\t\"./en\": 2065,\n\t\"./en.js\": 2065\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 2116;","var map = {\n\t\"./de\": 2066,\n\t\"./de.js\": 2066,\n\t\"./en\": 2067,\n\t\"./en.js\": 2067\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 2117;","var map = {\n\t\"./de\": 2076,\n\t\"./de.js\": 2076,\n\t\"./en\": 2077,\n\t\"./en.js\": 2077\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 2173;","module.exports = __webpack_public_path__ + \"static/media/zefau.e3988b38.jpg\";","module.exports = __webpack_public_path__ + \"static/media/paypal.f985e03c.webp\";","import React from 'react'\r\n\r\nimport Button from '@material-ui/core/Button'\r\nimport Paper from '@material-ui/core/Paper'\r\n\r\nimport i18n from '../../controller/i18n'\r\nimport Log from '../../controller/Log'\r\n\r\nimport Dialog from '../../components/Dialog'\r\nimport EnhancedTable from '../../components/EnhancedTable'\r\n\r\n\r\n/*\r\n * STYLES\r\n */\r\nimport { withStyles } from '@material-ui/core/styles'\r\nconst styles = theme => ({\r\n\tpinToTop: {\r\n\t\tposition: 'absolute',\r\n\t\ttop: 0,\r\n\t\tleft: 0\r\n\t}\r\n});\r\n\r\n\r\nconst headCells = [\r\n\t{ id: 'time', disablePadding: false, type: 'Date', label: i18n.t('Time'), noWrap: true },\r\n\t{ id: 'module', disablePadding: false, label: i18n.t('Module'), noWrap: true },\r\n\t{ id: 'criticality', disablePadding: false, label: i18n.t('Criticality'), noWrap: true },\r\n\t{ id: 'message', disablePadding: false, label: i18n.t('Message') },\r\n\t{ id: 'stack', disablePadding: false, type: 'Object', label: i18n.t('Stack Trace') },\r\n];\r\n\r\nconst rowStyles = { // https://material-ui.com/components/alert/#simple-alerts\r\n\t'criticality': {\r\n\t\t'debug': {\r\n\t\t\tcolor: 'rgba(0, 0, 0, 0.4)',\r\n\t\t\tbackgroundColor: 'rgba(0, 0, 0, 0.1)'\r\n\t\t},\r\n\t\t'info': {\r\n\t\t\tcolor: 'rgb(13, 60, 97)',\r\n\t\t\tbackgroundColor: 'rgb(232, 244, 253)'\r\n\t\t},\r\n\t\t'warn': {\r\n\t\t\tcolor: 'rgb(102, 60, 0)',\r\n\t\t\tbackgroundColor: 'rgb(255, 244, 229)'\r\n\t\t},\r\n\t\t'error': {\r\n\t\t\tcolor: 'rgb(97, 26, 21)',\r\n\t\t\tbackgroundColor: 'rgb(253, 236, 234)'\r\n\t\t},\r\n\t\t'success': {\r\n\t\t\tcolor: 'rgb(30, 70, 32)',\r\n\t\t\tbackgroundColor: 'rgb(237, 247, 237)'\r\n\t\t\t\r\n\t\t}\r\n\t}\r\n}\r\n\r\n\r\ni18n.setTranslations(language => require('./i18n/' + language));\r\n\r\nclass LogsPage extends React.Component {\r\n\t\r\n\trender() {\r\n\t\tconst { classes } = this.props;\r\n\t\t\r\n\t\tconst logs = Log.getLog();\r\n\t\treturn (\r\n\r\n<Dialog\r\n\tclasses={{ CustomDialog: classes.pinToTop }}\r\n\tfullWidth={true}\r\n\tmaxWidth={'xl'}\r\n\t\r\n\topen={(this.props.page === 'logs')}\r\n\tonClose={() => this.props.navigate('home')}\r\n\t\r\n\theader=\"Logs\"\r\n\tactions={\r\n\t\t<Button autoFocus onClick={() => this.props.navigate('home')} color=\"primary\">\r\n\t\t\t{i18n.t('Close')}\r\n\t\t</Button>\r\n\t}\r\n\t>\r\n\t\r\n\t<Paper className={classes.paper}>\r\n\t\t<EnhancedTable\r\n\t\t\theadCells={headCells}\r\n\t\t\trows={logs}\r\n\t\t\trowStyles={rowStyles}\r\n\t\t\t\r\n\t\t\tselectable={false}\r\n\t\t\tsortable={true}\r\n\t\t\ttoolbar={false}\r\n\t\t\tstickyHeader\r\n\t\t\t/>\r\n\t\t\r\n\t</Paper>\r\n\t\r\n</Dialog>\r\n\r\n\t\t)\r\n\t}\r\n}\r\n\r\nexport default withStyles(styles)(LogsPage);\r\n","var map = {\n\t\"./de\": 2078,\n\t\"./de.js\": 2078,\n\t\"./en\": 2079,\n\t\"./en.js\": 2079\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 2177;","\r\nexport default {\r\n\t\"hiddenStates\": {\r\n\t\t\"info\": \"config#Devices#hiddenStates#info\"\r\n\t},\r\n\t\"ignoredStates\": {\r\n\t\t\"info\": \"config#Devices#ignoredStates#info\"\r\n\t},\r\n\t/*\"defaultValue\": {\r\n\t\t\"info\": {\r\n\t\t\t\"en\": \"\",\r\n\t\t\t\"de\": \"Initialer Standard-Wert, der beim Schalten gesetzt wird.\"\r\n\t\t}\r\n\t},*/\r\n\t/*\"label\": {\r\n\t\t\"info\": {\r\n\t\t\t\"en\": \"\",\r\n\t\t\t\"de\": \"alternativer Bezeichner des Geräts als Anzeige-Name\"\r\n\t\t}\r\n\t},*/\r\n}\r\n\r\nexport const DevicesStates = {\r\n\t\"state\": {\r\n\t\t\"label\": \"config#Devices#state#label\",\r\n\t\t\"info\": \"config#Devices#state#info\",\r\n\t\t\r\n\t\t// white space not allowed\r\n\t\t\"onValidate\": val => {\r\n\t\t\tif (val.indexOf(' ') > -1) {\r\n\t\t\t\tthrow new Error('No whitespaces allowed in the state');\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\treturn val;\r\n\t\t}//ENDFUNC\r\n\t},\r\n\t\"stateStyle\": {\r\n\t\t\"label\": \"config#Devices#stateStyle#label\",\r\n\t\t\"info\": \"config#Devices#stateStyle#info\",\r\n\t\t\"json\": true\r\n\t},\r\n\t\"display\": {\r\n\t\t\"label\": \"config#Devices#display#label\",\r\n\t\t\"info\": \"config#Devices#display#info\",\r\n\t\t\"json\": true\r\n\t},\r\n\t\"label\": {\r\n\t\t\"label\": \"config#Devices#label#label\",\r\n\t\t\"info\": \"config#Devices#label#info\"\r\n\t},\r\n\t\"unit\": {\r\n\t\t\"label\": \"config#Devices#unit#label\",\r\n\t\t\"info\": \"config#Devices#unit#info\",\r\n\t\t\"json\": true,\r\n\t\t\r\n\t\t// if only a single string is given for a unit, convert it to a json compatible format to it will pass validation later\r\n\t\t\"onValidate\": val => val.indexOf(\" \") === -1 && val.indexOf('\"') === -1 && val.indexOf(\"}\") === -1 && val.indexOf(\"{\") === -1 ? '\"' + val + '\"' : val\r\n\t},\r\n\t\"action\": {\r\n\t\t\"label\": \"config#Devices#action#label\",\r\n\t\t\"info\": \"config#Devices#action#info\",\r\n\t\t\r\n\t\t// white space not allowed\r\n\t\t\"onValidate\": val => {\r\n\t\t\tif (val.indexOf(' ') > -1) {\r\n\t\t\t\tthrow new Error('No whitespaces allowed in the state');\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\treturn val;\r\n\t\t}//ENDFUNC\r\n\t},\r\n\t\"icon\": {\r\n\t\t\"label\": \"config#Devices#icon#label\",\r\n\t\t\"info\": \"config#Devices#icon#info\",\r\n\t\t\"link\": \"https://materialdesignicons.com/\",\r\n\t\t\"json\": true,\r\n\t\t\r\n\t\t// if only a single string is given for an icon, convert it to a json compatible format to it will pass validation later\r\n\t\t\"onValidate\": val => val.indexOf(\" \") === -1 && val.indexOf('\"') === -1 && val.indexOf(\"}\") === -1 && val.indexOf(\"{\") === -1 ? '\"' + val + '\"' : val\r\n\t},\r\n\t\"iconStyle\": {\r\n\t\t\"label\": \"config#Devices#iconStyle#label\",\r\n\t\t\"info\": \"config#Devices#iconStyle#info\",\r\n\t\t\"json\": true\r\n\t}\r\n}\r\n","import React, { useState, useEffect, useRef, useCallback } from 'react'\r\n//import clsx from 'clsx'\r\n\r\nimport DevicesConfig, { DevicesStates } from './Devices.config'\r\nimport i18n from '../../../controller/i18n'\r\nimport Log from '../../../controller/Log'\r\nimport FUNCTIONS from '../../../functions'\r\nimport ucFirst, { moveKeyInObject } from '../../../helpers/utils'\r\n\r\nimport Grid from '@material-ui/core/Grid'\r\nimport List from '@material-ui/core/List'\r\nimport ListItem from '@material-ui/core/ListItem'\r\nimport ListItemIcon from '@material-ui/core/ListItemIcon'\r\nimport ListItemText from '@material-ui/core/ListItemText'\r\nimport ListItemSecondaryAction from '@material-ui/core/ListItemSecondaryAction'\r\n\r\nimport IconButton from '@material-ui/core/IconButton'\r\n\r\nimport AddIcon from '@material-ui/icons/Add'\r\nimport ArrowUpIcon from '@material-ui/icons/KeyboardArrowUp'\r\nimport ArrowDownIcon from '@material-ui/icons/KeyboardArrowDown'\r\nimport DeleteIcon from '@material-ui/icons/Delete'\r\n\r\nimport Dialog from '../../../components/Dialog'\r\nimport Inputs from '../../../components/Inputs'\r\n\r\n\r\n/*\r\n * STYLES\r\n */\r\nimport { makeStyles } from '@material-ui/core/styles'\r\nconst useStyles = makeStyles(theme => ({\r\n\tfullWidth: {\r\n\t\twidth: '100%',\r\n\t},\r\n\ticonContainer: {\r\n\t\tflexDirection: 'column',\r\n\t\talignItems: 'center'\r\n\t},\r\n\talignRight: {\r\n\t\tdisplay: 'flex',\r\n\t\tjustifyContent: 'flex-end',\r\n\t\t\r\n\t\t'& > :not(:first-child)': {\r\n\t\t\tmarginLeft: 8,\r\n\t\t}\r\n\t}\r\n}));\r\n\r\n\r\nconst DevicesPage = React.memo(props => {\r\n\tconst classes = useStyles();\r\n\t\r\n\tconst [device,setDevice] = useState(props.device);\r\n\tconst [errors,setErrors] = useState({});\r\n\tconst EDITOR = useRef({});\r\n\t\r\n\t\r\n\t/**\r\n\t *\r\n\t */\r\n\tconst _onChange = useCallback((props, val) => {\r\n\t\t\r\n\t\t// error occured\r\n\t\tif (props.error && props.error !== errors[props.id]) {\r\n\t\t\tsetErrors(prevErrors => ({\r\n\t\t\t\t...prevErrors,\r\n\t\t\t\t[props.id]: props.error\r\n\t\t\t}));\r\n\t\t}\r\n\t\t\r\n\t\t// no error -> remove old error\r\n\t\telse if (!props.error && errors[props.id]) {\r\n\t\t\tsetErrors(prevErrors => {\r\n\t\t\t\tlet nextErrors = { ...prevErrors || {} }\r\n\t\t\t\tdelete nextErrors[props.id];\r\n\t\t\t\treturn nextErrors;\r\n\t\t\t});\r\n\t\t}\r\n\t\t\r\n\t\t// set value\r\n\t\tEDITOR.current[props.id] = val;\r\n\t\t\r\n\t}, [errors]);\r\n\t\r\n\t/*\r\n\t * trigger initial validation\r\n\t */\r\n\tuseEffect(() => {\r\n\t\tif (!props.device.name) {\r\n\t\t\tsetErrors(prevErrors => ({\r\n\t\t\t\t...prevErrors,\r\n\t\t\t\t'device-name': true\r\n\t\t\t}));\r\n\t\t}\r\n\t\t\r\n\t}, [props.device.name]);\r\n\t\r\n\tif (device === null) {\r\n\t\treturn null;\r\n\t}\r\n\t\r\n\t/**\r\n\t *\r\n\t */\r\n\tconst _onSave = () => {\r\n\t\tlet savedDevice = { ...device }\r\n\t\tsavedDevice.options = savedDevice.options || {}\r\n\t\tsavedDevice.attributes = savedDevice.attributes || {}\r\n\t\t\r\n\t\tfor (const key in EDITOR.current) {\r\n\t\t\tconst val = EDITOR.current[key];\r\n\t\t\tconst [ type, base, characteristic ] = key.split('-');\r\n\t\t\t\r\n\t\t\t// states\r\n\t\t\tif (type === 'states') {\r\n\t\t\t\tif (typeof savedDevice[type][base] === 'object') {\r\n\t\t\t\t\tsavedDevice[type][base][characteristic] = val;\r\n\t\t\t\t}\r\n\t\t\t\telse {\r\n\t\t\t\t\tsavedDevice[type][base] = {\r\n\t\t\t\t\t\tstate: savedDevice[type][base],\r\n\t\t\t\t\t\t[characteristic]: val\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\t// options or attributes\r\n\t\t\telse if (type === 'options' || type === 'attributes') {\r\n\t\t\t\tsavedDevice[type][base] = val;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\t// device\r\n\t\t\telse {\r\n\t\t\t\tsavedDevice[base] = val;\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\t// save\r\n\t\tsavedDevice.attributes._updated = Date.now();\r\n\t\tprops.onSave(savedDevice);\r\n\t}\r\n\t\r\n\t/**\r\n\t *\r\n\t */\r\n\tconst _deleteDevice = () => props.onDelete && props.onDelete(device.id);\r\n\t\r\n\t/**\r\n\t *\r\n\t */\r\n\tconst _addState = newStateKey => {\r\n\t\t\r\n\t\t// empty state key\r\n\t\tif (!newStateKey) {\r\n\t\t\tsetErrors(prevErrors => ({\r\n\t\t\t\t...prevErrors,\r\n\t\t\t\t'newStateKey': i18n.t('Type in a state key / identifier')\r\n\t\t\t}));\r\n\t\t}\r\n\r\n\t\t// state key exists already\r\n\t\telse if (Object.keys(device.states || {}).indexOf(newStateKey) > -1) {\r\n\t\t\tsetErrors(prevErrors => ({\r\n\t\t\t\t...prevErrors,\r\n\t\t\t\t'newStateKey': i18n.t('State key already used')\r\n\t\t\t}));\r\n\t\t}\r\n\t\t\r\n\t\t// add state\r\n\t\telse {\r\n\t\t\tconst key = newStateKey.replace(/ /g, '');\r\n\t\t\tsetDevice(prevDevice => ({\r\n\t\t\t\t...prevDevice,\r\n\t\t\t\tstates: {\r\n\t\t\t\t\t[key]: {},\r\n\t\t\t\t\t...prevDevice.states || {}\r\n\t\t\t\t}\r\n\t\t\t}));\r\n\t\t}\r\n\t}\r\n\t\r\n\t/**\r\n\t *\r\n\t */\r\n\tconst _moveState = (action, key) => {\r\n\t\t\r\n\t\tsetDevice(prevDevice => ({\r\n\t\t\t...prevDevice,\r\n\t\t\tstates: moveKeyInObject({ ...prevDevice.states }, key, action)\r\n\t\t}));\r\n\t}\r\n\t\r\n\t/**\r\n\t *\r\n\t */\r\n\tconst _deleteState = key => {\r\n\t\t\r\n\t\tsetDevice(prevDevice => {\r\n\t\t\tlet nextDevice = { ...prevDevice }\r\n\t\t\tdelete nextDevice.states[key];\r\n\t\t\treturn nextDevice;\r\n\t\t});\r\n\t}\r\n\t\r\n\t/*\r\n\t *\r\n\t */\r\n\tconst stateKeys = Object.keys(device.states || {});\r\n\tLog._('DevicesPages', 'RENDER DevicesPage', 'development');\r\n\t\r\n\tconsole.log(errors);\r\n\treturn (\r\n\t\t<Dialog\r\n\t\t\theader={i18n.t('Device Configuration') + ' (' + i18n.t('Device ID') + ': ' + device.id + ')'}\r\n\t\t\tactions={[\r\n\t\t\t\t<Grid key='actions' container>\r\n\t\t\t\t\t<Grid item xs={6}>\r\n\t\t\t\t\t\t{device.name && <Inputs.Button key='action-delete' variant=\"text\" onClick={() => _deleteDevice()} color=\"secondary\" startIcon={<DeleteIcon />} label=\"Delete Device\" />}\r\n\t\t\t\t\t</Grid>\r\n\t\t\t\t\t<Grid item xs={6} className={classes.alignRight}>\r\n\t\t\t\t\t\t<Inputs.Button key='action-cancel' variant=\"text\" onClick={() => props.onClose()} color=\"secondary\" label=\"Cancel\" />\r\n\t\t\t\t\t\t<Inputs.Button key='action-save' variant=\"text\" onClick={() => _onSave()} color=\"primary\" disabled={Object.keys(errors).length > 0} label=\"Apply\" />\r\n\t\t\t\t\t</Grid>\r\n\t\t\t\t</Grid>\r\n\t\t\t]}\r\n\t\t\t\r\n\t\t\tdense\r\n\t\t\tmaxWidth='md'\r\n\t\t\tfullWidth={true}\r\n\t\t\t\r\n\t\t\topen={true}\r\n\t\t\tonClose={() => props.onClose()}\r\n\t\t\t>\r\n\t\t\t\r\n\t\t\t<Inputs.Fieldset label={'General'}>\r\n\t\t\t\t<Inputs.FieldsetItem columns={4}>\r\n\t\t\t\t\t<Inputs.Text\r\n\t\t\t\t\t\tkey=\"device-name\"\r\n\t\t\t\t\t\tid=\"device-name\"\r\n\t\t\t\t\t\tautoFocus\r\n\t\t\t\t\t\trequired\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tlabel='Device'\r\n\t\t\t\t\t\tval={device.name}\r\n\t\t\t\t\t\tonChange={_onChange}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t\r\n\t\t\t\t</Inputs.FieldsetItem>\r\n\t\t\t\t<Inputs.FieldsetItem columns={4}>\r\n\t\t\t\t\t<Inputs.Select\r\n\t\t\t\t\t\tkey=\"device-function\"\r\n\t\t\t\t\t\tid=\"device-function\"\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tlabel='Function'\r\n\t\t\t\t\t\tval={device.function || 'other'}\r\n\t\t\t\t\t\tselection={\r\n\t\t\t\t\t\t\tObject.keys(FUNCTIONS).map(funcKey => {\r\n\t\t\t\t\t\t\t\tconst func = funcKey !== '_defaults' ? funcKey : 'other';\r\n\t\t\t\t\t\t\t\treturn {\r\n\t\t\t\t\t\t\t\t\t[func]: i18n.t(func),\r\n\t\t\t\t\t\t\t\t\t'icon': (FUNCTIONS[funcKey]._any && FUNCTIONS[funcKey]._any.icon) || null,\r\n\t\t\t\t\t\t\t\t\t'_key': func,\r\n\t\t\t\t\t\t\t\t\t'_translated': true,\r\n\t\t\t\t\t\t\t\t\t'_sort': i18n.t(func)\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t})\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\tsortOptionsByKey\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tonChange={(props, val) => {\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t// add default state keys of function (if not added already)\r\n\t\t\t\t\t\t\tif (FUNCTIONS[val] !== undefined) {\r\n\t\t\t\t\t\t\t\tObject.keys(FUNCTIONS[val]).forEach(stateKey => {\r\n\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\tif (stateKeys.indexOf(stateKey) === -1 && stateKey.substr(0,1) !== '_') {\r\n\t\t\t\t\t\t\t\t\t\t_addState(stateKey);\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t});\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t_onChange(props, val);\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t\r\n\t\t\t\t</Inputs.FieldsetItem>\r\n\t\t\t\t<Inputs.FieldsetItem columns={4}>\r\n\t\t\t\t\t<Inputs.Text\r\n\t\t\t\t\t\tkey=\"device-icon\"\r\n\t\t\t\t\t\tid=\"device-icon\"\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tlabel='Icon'\r\n\t\t\t\t\t\tval={device.icon || ''}\r\n\t\t\t\t\t\tonChange={_onChange}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t\r\n\t\t\t\t</Inputs.FieldsetItem>\r\n\t\t\t\t\r\n\t\t\t</Inputs.Fieldset>\r\n\t\t\t\r\n\t\t\t<Inputs.Fieldset label='States'>\r\n\t\t\t\t<DeviceStates\r\n\t\t\t\t\t_onChange={_onChange}\r\n\t\t\t\t\t_addState={_addState}\r\n\t\t\t\t\t_moveState={_moveState}\r\n\t\t\t\t\t_deleteState={_deleteState}\r\n\t\t\t\t\terrors={errors}\r\n\t\t\t\t\tstates={device.states}\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t\r\n\t\t\t</Inputs.Fieldset>\r\n\t\t\t\r\n\t\t\t<Inputs.Fieldset label='Options'>\r\n\t\t\t\t<DeviceOptions\r\n\t\t\t\t\t_onChange={_onChange}\r\n\t\t\t\t\toptions={device.options}\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t\r\n\t\t\t</Inputs.Fieldset>\r\n\t\t</Dialog>\r\n\t)\r\n});\r\n\r\nexport default DevicesPage;\r\n\r\n\r\n/*\r\n *\r\n */\r\nconst DeviceOptions = React.memo(props => {\r\n\tLog._('DevicesPages', 'RENDER DeviceOptions', 'development');\r\n\tconst { options } = props;\r\n\tconst classes = useStyles();\r\n\t\r\n\tconst renderedOptions = Object.keys(DevicesConfig).sort().map(config => {\r\n\t\treturn <DeviceOption key={'DeviceOption-' + config} config={{ ...DevicesConfig[config], parameter: config }} value={options[config] || ''} {...props} />\r\n\t});\r\n\t\r\n\treturn (\r\n\t\t<List classes={{ root: classes.fullWidth }} dense>\r\n\t\t\t{renderedOptions}\r\n\t\t</List>\r\n\t);\r\n});\r\n\r\n/*\r\n *\r\n */\r\nconst DeviceOption = React.memo(props => {\r\n\tLog._('DevicesPages', 'RENDER DeviceOption', 'development');\r\n\tconst { config, value, _onChange } = props;\r\n\t\r\n\tlet val = value;\r\n\tif (Array.isArray(val)) {\r\n\t\tval = val.join(',');\r\n\t}\r\n\telse if (typeof val === 'object') {\r\n\t\tval = JSON.stringify(val);\r\n\t}\r\n\t\r\n\tconst Tag = Inputs[config.type || 'Text'];\r\n\treturn (\r\n\t\t<ListItem key={'StatesListItemLabel-' + config.parameter} divider>\r\n\t\t\t<ListItemText\r\n\t\t\t\tprimary={config.parameter}\r\n\t\t\t\tsecondary={i18n.t(config.label || '')}\r\n\t\t\t\t/>\r\n\t\t\t\t\r\n\t\t\t<ListItemSecondaryAction>\r\n\t\t\t\t<Tag\r\n\t\t\t\t\tkey={'options-' + config.parameter}\r\n\t\t\t\t\tid={'options-' + config.parameter}\r\n\t\t\t\t\t\r\n\t\t\t\t\tval={val}\r\n\t\t\t\t\tonChange={_onChange}\r\n\t\t\t\t\t{...config}\r\n\t\t\t\t\t/>\r\n\t\t\t\t\r\n\t\t\t</ListItemSecondaryAction>\r\n\t\t</ListItem>\r\n\t);\r\n});\r\n\r\n/*\r\n *\r\n */\r\nconst AddDeviceState = React.memo(props => {\r\n\tLog._('DevicesPages', 'RENDER AddDeviceState', 'development');\r\n\tconst { errors, _addState } = props;\r\n\tconst [newStateKey,setNewStateKey] = useState('');\r\n\t\r\n\treturn (\r\n\t\t<ListItem key={'StatesListItemLabel-add'} dense divider>\r\n\t\t\t<ListItemIcon>\r\n\t\t\t\t<IconButton size=\"small\" disabled>\r\n\t\t\t\t\t<AddIcon />\r\n\t\t\t\t</IconButton>\r\n\t\t\t</ListItemIcon>\r\n\t\t\t\r\n\t\t\t<ListItemText disableTypography>\r\n\t\t\t\t<Inputs.Text id={'states-add'} onChange={(props, input) => setNewStateKey(input)} shrink={true} label='new state key' val={newStateKey} />\r\n\t\t\t\t<Inputs.Button\r\n\t\t\t\t\tlabel='add state'\r\n\t\t\t\t\tonClick={() => _addState(newStateKey)}\r\n\t\t\t\t\t/>\r\n\t\t\t\t\r\n\t\t\t\t<span style={{ color: '#900' }}>{errors['newStateKey']}</span>\r\n\t\t\t</ListItemText>\r\n\t\t</ListItem>\r\n\t);\r\n});\r\n\r\n/*\r\n *\r\n */\r\nconst DeviceStates = React.memo(props => {\r\n\tLog._('DevicesPages', 'RENDER DeviceStates', 'development');\r\n\tconst { states } = props;\r\n\tconst classes = useStyles();\r\n\t\r\n\tconst renderedStates = Object.keys(states || {}).map(stateKey => {\r\n\t\tlet state = states[stateKey];\r\n\t\tstate = typeof state === 'string' ? { 'state': state } : state;\r\n\t\treturn <DeviceState key={'DeviceState-' + stateKey} state={{ ...state, key: stateKey }} {...props} />\r\n\t});\r\n\t\r\n\treturn (\r\n\t\t<>\r\n\t\t\t<List classes={{ root: classes.fullWidth }} dense>\r\n\t\t\t\t<AddDeviceState {...props} />\r\n\t\t\t\t{renderedStates}\r\n\t\t\t</List>\r\n\t\t</>\r\n\t);\r\n});\r\n\r\n/*\r\n *\r\n */\r\nconst DeviceState = React.memo(props => {\r\n\tLog._('DevicesPages', 'RENDER DeviceState', 'development');\r\n\tconst { state, _onChange, _moveState, _deleteState } = props;\r\n\tconst classes = useStyles();\r\n\t\r\n\tconst states = Object.keys(DevicesStates).map(key => {\r\n\t\tconst s = DevicesStates[key];\r\n\t\tconst Input = Inputs[s.type || 'Text'];\r\n\t\treturn (\r\n\t\t\t<Inputs.FieldsetItem columns={4} key={'states-' + state.key + '-' + key}>\r\n\t\t\t\t<Input\r\n\t\t\t\t\t{...s}\r\n\t\t\t\t\tid={'states-' + state.key + '-' + key}\r\n\t\t\t\t\tshrink={true}\r\n\t\t\t\t\tlabel={s.label || ucFirst(key)}\r\n\t\t\t\t\t\r\n\t\t\t\t\tval={!state[key] || typeof state[key] === 'string' ? (state[key] || '') : (state[key].node || JSON.stringify(state[key]))}\r\n\t\t\t\t\tonChange={(props, val) => typeof s.onChange === 'function' ? s.onChange(props, val, _onChange) : _onChange(props, val)}\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t\r\n\t\t\t</Inputs.FieldsetItem>\r\n\t\t);\r\n\t});\r\n\t\r\n\treturn (\r\n\t\t<ListItem key={'StatesListItemLabel-' + state.key} dense divider>\r\n\t\t\t{state.key &&\r\n\t\t\t<ListItemIcon classes={{ root: classes.iconContainer }}>\r\n\t\t\t\t<IconButton size=\"small\" onClick={() => _moveState('up', state.key)}>\r\n\t\t\t\t\t<ArrowUpIcon />\r\n\t\t\t\t</IconButton>\r\n\t\t\t\t<IconButton size=\"small\" onClick={() => _moveState('down', state.key)}>\r\n\t\t\t\t\t<ArrowDownIcon />\r\n\t\t\t\t</IconButton>\r\n\t\t\t\t<IconButton size=\"small\" onClick={() => _deleteState(state.key)} style={{ marginTop: 40 }}>\r\n\t\t\t\t\t<DeleteIcon />\r\n\t\t\t\t</IconButton>\r\n\t\t\t</ListItemIcon>}\r\n\t\t\t\r\n\t\t\t<ListItemText disableTypography>\r\n\t\t\t\t<div style={{ paddingBottom: 8 }}><strong>{state.key}</strong></div>\r\n\t\t\t\t<Inputs.Fieldset noPadding>\r\n\t\t\t\t\t{states}\r\n\t\t\t\t</Inputs.Fieldset>\r\n\t\t\t</ListItemText>\r\n\t\t</ListItem>\r\n\t);\r\n});\r\n","import React, { useState, useRef } from 'react'\r\n//import clsx from 'clsx'\r\nimport { v1 as uuid } from 'uuid'\r\n\r\nimport Log from '../../../controller/Log'\r\nimport i18n from '../../../controller/i18n'\r\nimport Devices from '../../../controller/Devices'\r\nimport Adapters from '../../../config/adapters'\r\n\r\nimport Accordion from '@material-ui/core/Accordion'\r\nimport AccordionSummary from '@material-ui/core/AccordionSummary'\r\nimport AccordionDetails from '@material-ui/core/AccordionDetails'\r\nimport Typography from '@material-ui/core/Typography'\r\n\r\nimport Chip from '@material-ui/core/Chip'\r\nimport CircularProgress from '@material-ui/core/CircularProgress'\r\nimport List from '@material-ui/core/List'\r\nimport ListItem from '@material-ui/core/ListItem'\r\nimport ListItemIcon from '@material-ui/core/ListItemIcon'\r\nimport ListItemText from '@material-ui/core/ListItemText'\r\nimport ListItemSecondaryAction from '@material-ui/core/ListItemSecondaryAction'\r\n\r\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore'\r\n\r\nimport Dialog from '../../../components/Dialog'\r\nimport Inputs from '../../../components/Inputs'\r\n\r\n\r\n/*\r\n * STYLES\r\n */\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nconst useStyles = makeStyles(theme => ({\r\n\tfullWidth: {\r\n\t\twidth: '100%',\r\n\t},\r\n\theading: {\r\n\t\tpaddingRight: theme.spacing()\r\n\t},\r\n\tListItem: {\r\n\t\tdisplay: 'flex',\r\n\t}\r\n}));\r\n\r\n\r\nexport default function ImportDevicesPage(props) {\r\n\tconst classes = useStyles();\r\n\t\r\n\tconst [loading,setLoading] = useState(null);\r\n\tconst [importDevices,setImportDevices] = useState({});\r\n\tconst componentWillUnmount = useRef(false);\r\n\t\r\n\tlet search = useRef({\r\n\t\tfilter: 'all',\r\n\t\tadapters: Object.keys(Adapters) || [],\r\n\t});\r\n\t\r\n\tlet foundDevicesByManufacturer = useRef({});\r\n\tlet categories = useRef({\r\n\t\t'_new': {\r\n\t\t\t'hash': '',\r\n\t\t\t'name': i18n.t('New Devices'),\r\n\t\t\t'expanded': true,\r\n\t\t\t'devices': []\r\n\t\t},\r\n\t\t'_added': {\r\n\t\t\t'hash': '',\r\n\t\t\t'name': i18n.t('Devices that have been added already'),\r\n\t\t\t'devices': []\r\n\t\t},\r\n\t\t'_incorrect': {\r\n\t\t\t'hash': '',\r\n\t\t\t'name': i18n.t('Devices with incorrect configuration (states not found)'),\r\n\t\t\t'devices': []\r\n\t\t},\r\n\t\t'_ignored': {\r\n\t\t\t'hash': '',\r\n\t\t\t'name': i18n.t('Devices marked as ignored'),\r\n\t\t\t'devices': []\r\n\t\t},\r\n\t});\r\n\t\r\n\t/**\r\n\t *\r\n\t */\r\n\tconst _onClose = () => {\r\n\t\tcomponentWillUnmount.current = true;\r\n\t\tprops.onClose && props.onClose();\r\n\t}\r\n\t\r\n\t/**\r\n\t *\r\n\t */\r\n\tconst _importDevices = () => props.onImport && props.onImport(importDevices);\r\n\t\r\n\t/**\r\n\t *\r\n\t */\r\n\tconst _markDeviceToImport = device => {\r\n\t\t\r\n\t\t// mark device as ignored\r\n\t\tlet moveDeviceToIgnore = categories.current['_new'].devices.findIndex(d => d.id === device.id);\r\n\t\tlet moveDeviceToNew = categories.current['_ignored'].devices.findIndex(d => d.id === device.id);\r\n\t\tif (device.attributes && device.attributes.ignore === true && moveDeviceToIgnore > -1) {\r\n\t\t\tcategories.current['_new'].devices.splice(moveDeviceToIgnore, 1);\r\n\t\t\tcategories.current['_ignored'].devices.push(device);\r\n\t\t\tcategories.current['_ignored'].hash = uuid();\r\n\t\t\tcategories.current['_new'].hash = uuid();\r\n\t\t}\r\n\t\telse if (device.attributes && device.attributes.ignore === false && moveDeviceToNew > -1) {\r\n\t\t\tcategories.current['_ignored'].devices.splice(moveDeviceToNew, 1);\r\n\t\t\tcategories.current['_new'].devices.push(device);\r\n\t\t\tcategories.current['_ignored'].hash = uuid();\r\n\t\t\tcategories.current['_new'].hash = uuid();\r\n\t\t}\r\n\t\t\r\n\t\t// mark device to import\r\n\t\tsetImportDevices(prevImportDevices => {\r\n\t\t\tdevice.attributes = device.attributes || {}\r\n\t\t\t\r\n\t\t\tlet deviceIds = Object.keys(prevImportDevices);\r\n\t\t\tif (deviceIds.indexOf(device.id) === -1 || device.attributes.ignore === true || device.attributes.ignore === false) {\r\n\t\t\t\tdevice.attributes.ignore = device.attributes.ignore === false ? null : device.attributes.ignore;\r\n\t\t\t\tdevice.attributes._created = Date.now();\r\n\t\t\t\t\r\n\t\t\t\treturn {\r\n\t\t\t\t\t...prevImportDevices,\r\n\t\t\t\t\t[device.id]: device\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\t// unmark device from import\r\n\t\t\telse {\r\n\t\t\t\tlet nextImportDevices = { ...prevImportDevices }\r\n\t\t\t\tdelete nextImportDevices[device.id];\r\n\t\t\t\treturn nextImportDevices;\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\t\r\n\t/**\r\n\t *\r\n\t */\r\n\tconst _setSearch = (attribute, value) => {\r\n\t\t\r\n\t\tif (Array.isArray(search.current[attribute])) {\r\n\t\t\t\r\n\t\t\t// remove from array\r\n\t\t\tif (search.current[attribute].indexOf(value) > -1) {\r\n\t\t\t\tsearch.current[attribute] = search.current[attribute].filter(adapter => adapter !== value);\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\t// add to array\r\n\t\t\telse {\r\n\t\t\t\tsearch.current[attribute].push(value);\r\n\t\t\t}\r\n\t\t}\r\n\t\telse {\r\n\t\t\tsearch.current[attribute] = value;\r\n\t\t}\r\n\t}\r\n\t\r\n\t/**\r\n\t *\r\n\t */\r\n\tconst _setImportDeviceList = foundDevices => {\r\n\t\t\r\n\t\t// only show result list if dialogue has not been closed\r\n\t\tif (componentWillUnmount.current !== false) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\t\r\n\t\t// reset last search\r\n\t\tfoundDevicesByManufacturer.current = {}\r\n\t\tcategories.current._new.devices = [];\r\n\t\tcategories.current._added.devices = [];\r\n\t\tcategories.current._incorrect.devices = [];\r\n\t\tcategories.current._ignored.devices = [];\r\n\t\t\r\n\t\t// add devices\r\n\t\tlet deviceList = Devices.getDevices({ raw: true});\r\n\t\tlet newDevices = {}\r\n\t\t\r\n\t\tfoundDevices.forEach((res, index) => {\r\n\t\t\tlet device = res.value || res.reason.device;\r\n\t\t\tlet categoryKey = '_new';\r\n\t\t\t\r\n\t\t\t// get category\r\n\t\t\tif (res.status === 'fulfilled') {\r\n\t\t\t\t\r\n\t\t\t\t// device added already\r\n\t\t\t\tif (deviceList[device.id] !== undefined) {\r\n\t\t\t\t\tcategoryKey = '_added';\r\n\t\t\t\t\t\r\n\t\t\t\t\t// device has been ignored\r\n\t\t\t\t\tif (deviceList[device.id].attributes && deviceList[device.id].attributes.ignore === true) {\r\n\t\t\t\t\t\tcategoryKey = '_ignored';\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\telse {\r\n\t\t\t\t\tnewDevices[device.id] = device;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tcategoryKey = '_incorrect';\r\n\t\t\t\tdevice.attributes.note = res.reason.error.message\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tcategories.current[categoryKey].devices.push(device);\r\n\t\t\tfoundDevicesByManufacturer.current[device.attributes.manufacturer.namespace] = foundDevicesByManufacturer.current[device.attributes.manufacturer.namespace] || [];\r\n\t\t\tfoundDevicesByManufacturer.current[device.attributes.manufacturer.namespace].push(device.id);\r\n\t\t});\r\n\t\t\r\n\t\tsetImportDevices(newDevices);\r\n\t\tsetLoading('done');\r\n\t}\r\n\t\r\n\t/**\r\n\t *\r\n\t */\r\n\tconst _getDevices = () => {\r\n\t\tsetLoading('loading');\r\n\t\t\r\n\t\t/*\r\n\t\t * retrieve devices\r\n\t\t */\r\n\t\tif (search.current.filter === 'all') {\r\n\t\t\tDevices.importDevices(search.current.adapters)\r\n\t\t\t\t.then(_setImportDeviceList)\r\n\t\t\t\t.catch(err => {\r\n\t\t\t\t\tLog._('ImportDevicesPage', 'IMPORT_DEVICES: ' + err.message, 'error');\r\n\t\t\t\t});\r\n\t\t}\r\n\t\t\r\n\t\t/*\r\n\t\t * retrieve enums\r\n\t\t */\r\n\t\telse {\r\n\t\t\tDevices.importEnums('functions', search.current.adapters)\r\n\t\t\t\t.then(_setImportDeviceList)\r\n\t\t\t\t.catch(err => {\r\n\t\t\t\t\tLog._('ImportDevicesPage', 'IMPORT_ENUMS: ' + err.message, 'error');\r\n\t\t\t\t});\r\n\t\t}\r\n\t}\r\n\t\r\n\t/*\r\n\t *\r\n\t */\r\n\tconst adapters = Object.keys(Adapters).map(adapterKey => {\r\n\t\tlet adapter = { ...Adapters[adapterKey], namespace: adapterKey, devices: foundDevicesByManufacturer.current[adapterKey] || [] }\r\n\t\treturn <AdapterItem key={'AdapterItem-' + adapterKey} adapter={adapter} tick={search.current.adapters.indexOf(adapter) > -1} _setSearch={_setSearch} />\r\n\t});\r\n\t\r\n\treturn (\r\n\t\t<Dialog\r\n\t\t\theader={i18n.t('Devices Import')}\r\n\t\t\tactions={<>\r\n\t\t\t\t<Inputs.Button width=\"auto\" id='action-cancel' onClick={_onClose} label='Cancel' variant=\"text\" color=\"secondary\" />\r\n\t\t\t\t<Inputs.Button width=\"auto\" id='action-read' onClick={_getDevices} label='Read adapters' variant=\"text\" disabled={loading === 'loading'} loading={loading === 'loading'} />\r\n\t\t\t\t{loading === 'done' && <Inputs.Button\r\n\t\t\t\t\t\t\t\t\t\twidth=\"auto\"\r\n\t\t\t\t\t\t\t\t\t\tid='action-import'\r\n\t\t\t\t\t\t\t\t\t\tonClick={() => _importDevices()}\r\n\t\t\t\t\t\t\t\t\t\tlabel={i18n.t('Import selected devices') + ' (' + Object.values(importDevices).filter(device => !device.attributes || device.attributes.ignore !== true).length + ')'}\r\n\t\t\t\t\t\t\t\t\t\tdisabled={Object.keys(importDevices).length === 0}\r\n\t\t\t\t\t\t\t\t\t\tvariant=\"text\"\r\n\t\t\t\t\t\t\t\t\t\t/>}\r\n\t\t\t</>}\r\n\t\t\t\r\n\t\t\tdense\r\n\t\t\tmaxWidth='md'\r\n\t\t\tfullWidth={true}\r\n\t\t\t\r\n\t\t\topen={true}\r\n\t\t\tonClose={() => props.onClose()}\r\n\t\t\t>\r\n\t\t\t\r\n\t\t\t<Inputs.Fieldset label='Adapters'>\r\n\t\t\t\t<Inputs.FieldsetItem>\r\n\t\t\t\t\t<Inputs.RadioGroup\r\n\t\t\t\t\t\tonChange={(props, val) => _setSearch('filter', val)}\r\n\t\t\t\t\t\tlabel='Search the adapter structure for all devices or only devices added to enums'\r\n\t\t\t\t\t\tinputs={[\r\n\t\t\t\t\t\t\t{ label: 'Search adapter structure for all devices', value: 'all' },\r\n\t\t\t\t\t\t\t{ label: 'Search only for devices added to enums', value: 'enums' }\r\n\t\t\t\t\t\t]}\r\n\t\t\t\t\t\trequired\r\n\t\t\t\t\t\tval={search.current.filter}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t\r\n\t\t\t\t\t<List classes={{ root: classes.fullWidth }} dense>\r\n\t\t\t\t\t\t{adapters}\r\n\t\t\t\t\t</List>\r\n\t\t\t\t</Inputs.FieldsetItem>\r\n\t\t\t</Inputs.Fieldset>\r\n\t\t\t{loading !== null && <Inputs.Fieldset label='Devices'>\r\n\t\t\t\t<Inputs.FieldsetItem>\r\n\t\t\t\t\t{loading === 'loading' && <CircularProgress />}\r\n\t\t\t\t\t{loading === 'done' && Object.keys(categories.current).map(key => <Category key={'Category-' + key} {...{ id: key, ...categories.current[key] }} _markDeviceToImport={_markDeviceToImport} />)}\r\n\t\t\t\t</Inputs.FieldsetItem>\r\n\t\t\t</Inputs.Fieldset>}\r\n\t\t</Dialog>\r\n\t)\r\n}\r\n\r\n\r\n/*\r\n *\r\n */\r\nconst Device = React.memo(props => {\r\n\tconst classes = useStyles();\r\n\tconst { category, device, _markDeviceToImport } = props;\r\n\t\r\n\tconst [deviceChecked,setDeviceChecked] = useState(category.id === '_new' || (device.attributes && device.attributes.ignore !== undefined) ? true : false);\r\n\tconst markDeviceToImport = () => {\r\n\t\tsetDeviceChecked(prevChecked => prevChecked !== true);\r\n\t\t_markDeviceToImport && _markDeviceToImport(device);\r\n\t}\r\n\t\r\n\treturn (\r\n\t\t<ListItem key={device.id} dense button={category.id !== '_incorrect' && category.id !== '_ignored'} divider onClick={() => category.id !== '_incorrect' && category.id !== '_ignored' && markDeviceToImport(device)}>\r\n\t\t\t<ListItemIcon>\r\n\t\t\t\t<Inputs.Checkbox\r\n\t\t\t\t\tid={device.id}\r\n\t\t\t\t\tchecked={deviceChecked}\r\n\t\t\t\t\tdisabled={category.id === '_incorrect' || category.id === '_ignored'}\r\n\t\t\t\t\ttabIndex={-1}\r\n\t\t\t\t\tdisableRipple\r\n\t\t\t\t\tinputProps={{ 'aria-labelledby': device.id }}\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t\r\n\t\t\t</ListItemIcon>\r\n\t\t\t<ListItemText classes={{ root: classes.ListItem }} disableTypography>\r\n\t\t\t\t<Typography className={classes.heading}>{device.name}</Typography>\r\n\t\t\t\t{device.attributes && device.attributes.manufacturer && <Chip color=\"secondary\" size=\"small\" label={device.attributes.manufacturer.name} />}\r\n\t\t\t</ListItemText>\r\n\t\t\t<ListItemSecondaryAction>\r\n\t\t\t\t{category.id === '_new' && <Inputs.Button\r\n\t\t\t\t\twidth=\"auto\"\r\n\t\t\t\t\tvariant=\"text\"\r\n\t\t\t\t\tlabel='ignore'\r\n\t\t\t\t\tonClick={event => {\r\n\t\t\t\t\t\tevent.stopPropagation();\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tdevice.attributes = {\r\n\t\t\t\t\t\t\t...device.attributes,\r\n\t\t\t\t\t\t\tignore: true\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tmarkDeviceToImport(device);\r\n\t\t\t\t\t}}\r\n\t\t\t\t\t/>}\r\n\t\t\t\t\t\r\n\t\t\t\t{category.id === '_ignored' && <Inputs.Button\r\n\t\t\t\t\twidth=\"auto\"\r\n\t\t\t\t\tvariant=\"text\"\r\n\t\t\t\t\tlabel='move to new devices'\r\n\t\t\t\t\tonClick={event => {\r\n\t\t\t\t\t\tevent.stopPropagation();\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tdevice.attributes = {\r\n\t\t\t\t\t\t\t...device.attributes,\r\n\t\t\t\t\t\t\tignore: false\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tmarkDeviceToImport(device);\r\n\t\t\t\t\t}}\r\n\t\t\t\t\t/>}\r\n\t\t\t\t\t\r\n\t\t\t</ListItemSecondaryAction>\r\n\t\t</ListItem>\r\n\t)\r\n\t\r\n}, (prevProps, nextProps) => prevProps.device.attributes.ignore === nextProps.device.attributes.ignore);\r\n\r\n/*\r\n *\r\n */\r\nconst Category = React.memo(props => {\r\n\tconst classes = useStyles();\r\n\tconst { id, name, expanded, devices, _markDeviceToImport } = props;\r\n\t\r\n\tconst deviceList = devices.map(device => <Device key={'Category-' + id + '-Device-' + device.id} category={props} device={device} _markDeviceToImport={_markDeviceToImport} />);\r\n\t\r\n\treturn (\r\n\t\t<Accordion classes={{ root: classes.fullWidth }} key={id} defaultExpanded={expanded === true}>\r\n\t\t\t<AccordionSummary expandIcon={<ExpandMoreIcon />}>\r\n\t\t\t\t<Typography className={classes.heading}>{name}</Typography>\r\n\t\t\t\t<Chip color=\"primary\" size=\"small\" label={devices.length} />\r\n\t\t\t</AccordionSummary>\r\n\t\t\t<AccordionDetails>\r\n\t\t\t\t<List classes={{ root: classes.fullWidth }} dense>\r\n\t\t\t\t\t{deviceList}\r\n\t\t\t\t</List>\r\n\t\t\t</AccordionDetails>\r\n\t\t</Accordion>\r\n\t)\r\n\t\r\n}, (prevProps, nextProps) => prevProps.hash === nextProps.hash);\r\n\r\n/*\r\n *\r\n */\r\nconst AdapterItem = React.memo(({ adapter, tick, _setSearch }) => {\r\n\tconst adapterName = adapter.default;\r\n\t\r\n\tconst [checked,setChecked] = useState(tick ? tick : true);\r\n\tconst setAdapter = adapterKey => {\r\n\t\tsetChecked(prevChecked => prevChecked !== true);\r\n\t\t_setSearch && _setSearch('adapters', adapterKey);\r\n\t}\r\n\t\r\n\treturn (\r\n\t\t<ListItem key={adapter.namespace} dense button divider onClick={() => setAdapter(adapter.namespace)}>\r\n\t\t\t<ListItemIcon>\r\n\t\t\t\t<Inputs.Checkbox\r\n\t\t\t\t\tid={adapter.namespace}\r\n\t\t\t\t\tchecked={checked}\r\n\t\t\t\t\ttabIndex={-1}\r\n\t\t\t\t\tdisableRipple\r\n\t\t\t\t\tinputProps={{ 'aria-labelledby': adapterName }}\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t\r\n\t\t\t</ListItemIcon>\r\n\t\t\t<ListItemText primary={adapterName + ' ' + i18n.t('adapter')} />\r\n\t\t\t<ListItemSecondaryAction>\r\n\t\t\t\t{adapter.devices && Array.isArray(adapter.devices) && adapter.devices.length > 0 && <Chip color=\"primary\" size=\"small\" label={adapter.devices.length} />}\r\n\t\t\t</ListItemSecondaryAction>\r\n\t\t</ListItem>\r\n\t)\r\n});","import React, { useState, useEffect, useRef } from 'react'\r\n//import clsx from 'clsx'\r\nimport { v4 as uuid } from 'uuid'\r\n\r\nimport i18n from '../../../controller/i18n'\r\nimport Log from '../../../controller/Log'\r\n\r\nimport IconButton from '@material-ui/core/IconButton'\r\nimport Paper from '@material-ui/core/Paper'\r\nimport TableBody from '@material-ui/core/TableBody'\r\nimport TableRow from '@material-ui/core/TableRow'\r\nimport TableCell from '@material-ui/core/TableCell'\r\nimport Tooltip from '@material-ui/core/Tooltip'\r\nimport Typography from '@material-ui/core/Typography'\r\n\r\nimport AddIcon from '@material-ui/icons/AddCircle'\r\nimport EditIcon from '@material-ui/icons/Edit'\r\nimport ImportIcon from '@material-ui/icons/CloudDownload'\r\n\r\nimport EnhancedTable from '../../../components/EnhancedTable'\r\nimport Inputs from '../../../components/Inputs'\r\n\r\nimport DevicesPage from './DevicesPage'\r\nimport ImportDevicesPage from './ImportDevicesPage'\r\n\r\n\r\n/*\r\n * STYLES\r\n */\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nconst useStyles = makeStyles(theme => ({\r\n\tdeleteButton: {\r\n\t\tmarginTop: '25px'\r\n\t},\r\n\thr: {\r\n\t\tmargin: '10px 2px'\r\n\t},\r\n\tCustomTextInput: {\r\n\t\twidth: 150\r\n\t},\r\n\tCustomDialogTitle: {\r\n\t\tpadding: 0,\r\n\t\tmarginRight: '50px'\r\n\t},\r\n\tTableCell: {\r\n\t\tverticalAlign: 'top',\r\n\t\tpadding: '5px 0'\r\n\t},\r\n\ttitle: {\r\n\t\tflex: '1 1 100%',\r\n\t},\r\n\tpaper: {\r\n\t\tpaddingLeft: theme.spacing(2),\r\n\t\tpaddingRight: theme.spacing(1),\r\n\t\tmarginBottom: theme.spacing(1),\r\n\t\tminHeight: '64px',\r\n\t\tdisplay: 'flex',\r\n\t\tposition: 'relative',\r\n\t\talignItems: 'center',\r\n\t},\r\n\tnewlyCreatedDevice: {\r\n\t\tbackgroundColor: 'rgba(99, 233, 30, 0.08) !important'\r\n\t}\r\n}));\r\n\r\n\r\ni18n.setTranslations(language => require('./i18n/' + language));\r\n\r\nconst DevicesListPage = React.memo(props => {\r\n\tLog._('DevicesListPage', 'RENDER DevicesListPage', 'development');\r\n\tconst classes = useStyles();\r\n\t\r\n\tconst [selectedDevice,setSelectedDevice] = useState(null);\r\n\tconst [importDevices,setImportDevices] = useState(null);\r\n\tconst [devices,setDevices] = useState(props.devices);\r\n\tconst [device,setDevice] = useState(null);\r\n\t\r\n\tlet hash = useRef(Date.now());\r\n\t\r\n\tuseEffect(() => {\r\n\t\thash.current = Date.now();\r\n\t\tsetDevices(props.devices);\r\n\t\t\r\n\t}, [props.devices]);\r\n\t\r\n\tuseEffect(() => {\r\n\t\tif (device) {\r\n\t\t\tdocument.getElementById('DialogContent').scrollTop = (document.getElementById('device-' + device.id) && document.getElementById('device-' + device.id).offsetTop) || 0;\r\n\t\t}\r\n\t\t\r\n\t}, [device]);\r\n\t\r\n\t\r\n\t/**\r\n\t *\r\n\t */\r\n\tconst _importDevices = importDevices => _saveDevices({ ...devices, ...importDevices });\r\n\t\r\n\t/**\r\n\t *\r\n\t */\r\n\tconst _saveDevice = saveDevice => {\r\n\t\tsetDevice(saveDevice);\r\n\t\t_saveDevices({ ...devices, [saveDevice.id]: saveDevice });\r\n\t}\r\n\t\r\n\t/**\r\n\t *\r\n\t */\r\n\tconst _saveDevices = saveDevices => {\r\n\t\tsetDevices(saveDevices);\r\n\t\tprops._onDevicesChange && props._onDevicesChange(saveDevices);\r\n\t\t\r\n\t\thash.current = Date.now();\r\n\t\tsetSelectedDevice(null);\r\n\t\tsetImportDevices(null);\r\n\t}\r\n\t\r\n\t/**\r\n\t *\r\n\t */\r\n\tconst _deleteDevice = deviceId => {\r\n\t\tlet nextDevices = { ...devices }\r\n\t\tdelete nextDevices[deviceId];\r\n\t\t\r\n\t\t_deleteDeviceInWidgets(deviceId);\r\n\t\t_saveDevices(nextDevices);\r\n\t}\r\n\t\r\n\t\r\n\t/*\r\n\t *\r\n\t */\r\n\tconst _deleteDeviceInWidgets = deviceId => {\r\n\t\tlet layout = [ ...props.layout ];\r\n\t\t\r\n\t\t// drawer\r\n\t\tfor (let drawerKey of Object.keys(layout)) {\r\n\t\t\tlet drawer = layout[drawerKey];\r\n\t\t\t\r\n\t\t\t// tabs\r\n\t\t\tfor (let tab of drawer.tabs) {\r\n\t\t\t\ttab.columns = tab._fullscreen !== undefined ? [[tab._fullscreen]] : tab.columns;\r\n\t\t\t\t\r\n\t\t\t\t// columns\r\n\t\t\t\tfor (let columnIndex in tab.columns) {\r\n\t\t\t\t\tlet column = tab.columns[columnIndex];\r\n\t\t\t\t\t\r\n\t\t\t\t\t// widgets\r\n\t\t\t\t\tfor (let widget of column) {\r\n\t\t\t\t\t\twidget.devices = widget.devices.filter(device => device.deviceId !== deviceId);\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\tprops._onLayoutsChange(layout);\r\n\t}\r\n\t\r\n\t/*\r\n\t *\r\n\t */\r\n\treturn (\r\n\t\t<>\r\n\t\t\t<Paper className={classes.paper}>\r\n\t\t\t\t<Typography className={classes.title} variant=\"h6\">\r\n\t\t\t\t\t{i18n.t('Devices List') + ' (' + Object.keys(devices).length + ')'}\r\n\t\t\t\t</Typography>\r\n\t\t\t\t\r\n\t\t\t\t<Inputs.Button\r\n\t\t\t\t\tkey=\"device-add\"\r\n\t\t\t\t\twidth={300}\r\n\t\t\t\t\tonClick={() => setSelectedDevice('#new')}\r\n\t\t\t\t\tstartIcon={<AddIcon />}\r\n\t\t\t\t\tdisabled={selectedDevice !== null || importDevices !== null}\r\n\t\t\t\t\tlabel={'add device'}\r\n\t\t\t\t\t/>\r\n\t\t\t\t\r\n\t\t\t\t<Inputs.Button\r\n\t\t\t\t\tkey=\"devices-import\"\r\n\t\t\t\t\twidth={300}\r\n\t\t\t\t\tonClick={() => setImportDevices(true)}\r\n\t\t\t\t\tstartIcon={<ImportIcon />}\r\n\t\t\t\t\tdisabled={selectedDevice !== null || importDevices !== null}\r\n\t\t\t\t\tlabel={'import devices'}\r\n\t\t\t\t\t/>\r\n\t\t\t\t\r\n\t\t\t</Paper>\r\n\t\t\t<Paper>\r\n\t\t\t\t<DeviceTable\r\n\t\t\t\t\t_selectDevice={device => setSelectedDevice(device.id)}\r\n\t\t\t\t\thash={hash.current}\r\n\t\t\t\t\tdevices={devices}\r\n\t\t\t\t\t/>\r\n\t\t\t\t\r\n\t\t\t\t{selectedDevice != null && <DevicesPage\r\n\t\t\t\t\t\t\t\t\t\t\t\tdevice={selectedDevice === '#new' ? { 'id': uuid(), 'function': 'other', 'states': {}, 'options': {}, 'attributes': { '_created': Date.now() }} : devices[selectedDevice]}\r\n\t\t\t\t\t\t\t\t\t\t\t\tonSave={_saveDevice}\r\n\t\t\t\t\t\t\t\t\t\t\t\tonDelete={_deleteDevice}\r\n\t\t\t\t\t\t\t\t\t\t\t\tonClose={() => setSelectedDevice(null)}\r\n\t\t\t\t\t\t\t\t\t\t\t\t/>}\r\n\r\n\t\t\t\t{importDevices !== null && <ImportDevicesPage\r\n\t\t\t\t\t\t\t\t\t\t\t\tonImport={_importDevices}\r\n\t\t\t\t\t\t\t\t\t\t\t\tonClose={() => setImportDevices(null)}\r\n\t\t\t\t\t\t\t\t\t\t\t\t/>}\r\n\t\t\t\t\r\n\t\t\t</Paper>\r\n\t\t</>\r\n\t)\r\n\r\n}, (prevProps, nextProps) => nextProps.selected !== true); // re-render on false (not equal), only render when selected\r\n\r\nexport default DevicesListPage;\r\n\r\n\r\n/*\r\n *\r\n */\r\nconst DeviceTable = React.memo(props => {\r\n\tLog._('DevicesListPage', 'RENDER DeviceTable', 'development');\r\n\tconst { devices } = props;\r\n\t\r\n\treturn (\r\n\t\t<EnhancedTable\r\n\t\t\ttoolbar={false}\r\n\t\t\theadCells={[\r\n\t\t\t\t{ id: 'edit', width: '5%', disablePadding: true, label: '' },\r\n\t\t\t\t{ id: 'name', width: '15%', label: i18n.t('Name') },\r\n\t\t\t\t{ id: 'function', width: '10%', label: i18n.t('Function') },\r\n\t\t\t\t{ id: 'states', width: '50%', disablePadding: false, label: i18n.t('States') },\r\n\t\t\t\t{ id: 'options', width: '20%', disablePadding: false, label: i18n.t('Options') },\r\n\t\t\t\t//{ id: 'attributes', width: '15%', disablePadding: false, label: i18n.t('Attributes') }\r\n\t\t\t]}\r\n\t\t\trows={Object.values(devices)}\r\n\t\t\t\r\n\t\t\tdefaultOrderBy=\"name\"\r\n\t\t\tselectable={false}\r\n\t\t\tsortable={true}\r\n\t\t\tstickyHeader\r\n\t\t\t\r\n\t\t\tCustomTableBody={CustomTableProps => <DeviceList {...props} {...CustomTableProps} />}\r\n\t\t\t/>\r\n\t);\r\n\t\r\n}, (prevProps, nextProps) => prevProps.hash === nextProps.hash);\r\n\r\n/*\r\n *\r\n */\r\nconst DeviceList = props => {\r\n\tLog._('DevicesListPage', 'RENDER DeviceList', 'development');\r\n\tconst classes = useStyles();\r\n\tconst { sortedRows, _selectDevice } = props;\r\n\t\r\n\treturn (\r\n\t\t<TableBody>\r\n\t\t\r\n\t\t{sortedRows.map((device, index) => {\r\n\t\t\tlet options = Object.keys(device.options || {}).filter(optionKey => (device.options[optionKey] === '' || (Array.isArray(device.options[optionKey]) && device.options[optionKey].length === 0) || (typeof device.options[optionKey] === 'object' && Object.keys(device.options[optionKey]).length === 0)) === false).sort().join(', '); \r\n\t\t\t//let attributes = Object.keys(device.attributes || {}).sort().join(', ');\r\n\t\t\t\r\n\t\t\t// skip\r\n\t\t\tif (device.attributes && device.attributes.ignore === true) {\r\n\t\t\t\treturn null;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\treturn (\r\n\t\t\t\t<TableRow\r\n\t\t\t\t\tkey={'TableRow-' + index}\r\n\t\t\t\t\tid={'device-' + device.id}\r\n\t\t\t\t\thover\r\n\t\t\t\t\ttabIndex={-1}\r\n\t\t\t\t\tselected={device.attributes && device.attributes._created > Date.now()-24*60*60*1000}\r\n\t\t\t\t\tclasses={{ selected: classes.newlyCreatedDevice }}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\r\n\t\t\t\t\t<TableCell padding=\"checkbox\" scope=\"row\" align=\"center\">\r\n\t\t\t\t\t\t<IconButton onClick={() => _selectDevice(device)}>\r\n\t\t\t\t\t\t\t<EditIcon />\r\n\t\t\t\t\t\t</IconButton>\r\n\t\t\t\t\t</TableCell>\r\n\t\t\t\t\t<TableCell>{(device.options && device.options.label) || device.name}</TableCell>\r\n\t\t\t\t\t<TableCell>{device.function}</TableCell>\r\n\t\t\t\t\t<TableCell>{Object.keys(device.states || {}).join(', ')}</TableCell>\r\n\t\t\t\t\t<TableCell>{options.length > 35 ? <Tooltip title={options}><span>{options.substr(0,32) + '...'}</span></Tooltip> : options}</TableCell>\r\n\t\t\t\t\t{/*<TableCell>{attributes.length > 35 ? <Tooltip title={attributes}><span>{attributes.substr(0,32) + '...'}</span></Tooltip> : attributes}</TableCell>*/}\r\n\t\t\t\t</TableRow>\r\n\t\t\t\r\n\t\t\t);\r\n\t\t})}\r\n\t\t\r\n\t\t</TableBody>\r\n\t);\r\n\t\r\n}","import { ModuleList } from '../../../modules'\r\n\r\nexport default {\r\n\t'tabsHideLabels': {\r\n\t\t'label': 'config#Layout#tabsHideLabels#label',\r\n\t\t'info': 'config#Layout#tabsHideLabels#info',\r\n\t\t'type': 'Switch',\r\n\t\t'val': false\r\n\t},\r\n\t'tabIcon': {\r\n\t\t'label': 'config#Layout#tabIcon#label',\r\n\t\t'type': 'Text',\r\n\t},\r\n\t'tabTitle': {\r\n\t\t'label': 'config#Layout#tabTitle#label',\r\n\t\t'type': 'Text',\r\n\t},\r\n\t'tabFullscreen': {\r\n\t\t'label': 'config#Layout#tabFullscreen#label',\r\n\t\t'info': 'config#Layout#tabFullscreen#info',\r\n\t\t'type': 'Switch',\r\n\t\t'val': false\r\n\t},\r\n\t\r\n\t'widgetModule': {\r\n\t\t'required': true,\r\n\t\t'label': 'config#Layout#widgetModule#label',\r\n\t\t'type': 'Text',\r\n\t\t//val: 'StateList',\r\n\t\t'options': ModuleList\r\n\t},\r\n\t'widgetFullscreen': {\r\n\t\t'label': 'config#Layout#widgetFullscreen#label',\r\n\t\t'info': 'config#Layout#widgetFullscreen#info',\r\n\t\t'type': 'Switch',\r\n\t\t//val: ''\r\n\t},\r\n\t'widgetTitle': {\r\n\t\t'required': true,\r\n\t\t'label': 'config#Layout#widgetTitle#label',\r\n\t\t'type': 'Text',\r\n\t\t//val: ''\r\n\t},\r\n\t'widgetIcon': {\r\n\t\t'label': 'config#Layout#widgetIcon#label',\r\n\t\t'type': 'Text',\r\n\t\t'placeholder': 'home',\r\n\t\t'info': 'config#Layout#widgetIcon#info',\r\n\t\t'link': 'https://materialdesignicons.com/'\r\n\t},\r\n\t'widgetIconStyle': {\r\n\t\t'label': 'config#Layout#widgetIconStyle#label',\r\n\t\t'type': 'Text',\r\n\t\t'json': true,\r\n\t\t'placeholder': '{ \"color\": \"#fff\", \"fontSize\": \"24px\" }' // backgroundColor: theme.palette.primary.main,\r\n\t}\r\n}\r\n","import React from 'react'\r\n\r\n\r\n/*\r\n *\r\n */\r\nexport default function Placeholder(props) {\r\n\tconst { width, height } = props;\r\n\t\r\n\treturn (\r\n\t\t<div style={{ display: 'inline-flex', width: width + 'px', height: (height || 1) + 'px' }}>\r\n\t\t</div>\r\n\t);\r\n}","import React, { useState, useEffect, useRef, useCallback } from 'react'\r\n\r\nimport config from '../../../config/config'\r\nimport LayoutsConfig from './Layouts.config'\r\nimport { moveKeyInArray, sortArray } from '../../../helpers/utils'\r\n\r\nimport i18n from '../../../controller/i18n'\r\nimport Log from '../../../controller/Log'\r\n//import Devices from '../../../controller/Devices'\r\nimport { ModuleConfigurations, ModuleSettings } from '../../../modules/'\r\n\r\nimport Badge from '@material-ui/core/Badge'\r\nimport Grid from '@material-ui/core/Grid'\r\nimport IconButton from '@material-ui/core/IconButton'\r\nimport List from '@material-ui/core/List'\r\nimport ListItem from '@material-ui/core/ListItem'\r\nimport ListItemText from '@material-ui/core/ListItemText'\r\nimport ListItemSecondaryAction from '@material-ui/core/ListItemSecondaryAction'\r\nimport Typography from '@material-ui/core/Typography'\r\n\r\nimport ArrowUpIcon from '@material-ui/icons/KeyboardArrowUp'\r\nimport ArrowDownIcon from '@material-ui/icons/KeyboardArrowDown'\r\nimport DeleteIcon from '@material-ui/icons/Delete'\r\nimport DevicesIcon from '@material-ui/icons/Devices'\r\n//import DragIcon from '@material-ui/icons/DragIndicator'\r\nimport DividerIcon from '@material-ui/icons/Remove'\r\nimport GroupIcon from '@material-ui/icons/FormatListBulleted'\r\n\r\n//import DragDrop from '../../../components/DragDrop'\r\nimport Dialog from '../../../components/Dialog'\r\nimport Inputs from '../../../components/Inputs'\r\nimport Placeholder from '../../../components/Placeholder'\r\n\r\n\r\n/*\r\n * STYLES\r\n */\r\nimport { makeStyles } from '@material-ui/core/styles'\r\nconst useStyles = makeStyles(theme => ({\r\n\ticonContainer: {\r\n\t\tdisplay: 'flex',\r\n\t\tflexDirection: 'column',\r\n\t\talignItems: 'center'\r\n\t},\r\n\ticonCentered: {\r\n\t\tverticalAlign: 'middle',\r\n\t\tmarginRight: theme.spacing(2)\r\n\t},\r\n\tnoPadding: {\r\n\t\tpadding: 0,\r\n\t},\r\n\talignRight: {\r\n\t\tdisplay: 'flex',\r\n\t\tjustifyContent: 'flex-end',\r\n\t\t\r\n\t\t'& > :not(:first-child)': {\r\n\t\t\tmarginLeft: 8,\r\n\t\t}\r\n\t},\r\n\theight: {\r\n\t\tlineHeight: '45px'\r\n\t},\r\n\ttitle: {\r\n\t\tlineHeight: '25px'\r\n\t},\r\n\tBadge: {\r\n\t\tright: 'unset',\r\n\t\ttransform: 'none',\r\n\t},\r\n\tsticky: {\r\n\t\tposition: 'sticky',\r\n\t\tbackgroundColor: theme.palette.background.default,\r\n\t\ttop: -16,\r\n\t\tzIndex: 1\r\n\t}\r\n}));\r\n\r\n\r\nconst _copy = require('rfdc')();\r\nconst WidgetPage = React.memo(props => {\r\n\tconst classes = useStyles();\r\n\t\r\n\tconst [errors,setErrors] = useState({});\r\n\tconst EDITOR = useRef({ moduleConfig: {}, ..._copy(props.widget) });\r\n\tconsole.log({ ...EDITOR.current }, { ..._copy(props.widget) });\r\n\t\r\n\t/*\r\n\t *\r\n\t */\r\n\tif (props.widget === null) {\r\n\t\treturn null;\r\n\t}\r\n\t\r\n\t/**\r\n\t *\r\n\t */\r\n\tconst _onClose = () => {\r\n\t\tEDITOR.current = null;\r\n\t\tprops.onClose();\r\n\t}\r\n\t\r\n\t/**\r\n\t *\r\n\t */\r\n\tconst _onSave = action => {\r\n\t\t\r\n\t\t// errors\r\n\t\tconst requiredFields = [{ parameter: 'title', required: true }, { parameter: 'module', required: true }];\r\n\t\tlet err = {};\r\n\t\t\r\n\t\t[ ...requiredFields, ...(ModuleConfigurations[props.widget.module] || []) ].forEach(field => {\r\n\t\t\tif (field.required === true && !EDITOR.current[field.parameter] && !EDITOR.current.moduleConfig[field.parameter]) {\r\n\t\t\t\terr[field.parameter] = true;\r\n\t\t\t}\r\n\t\t});\r\n\t\t\r\n\t\tif (Object.values(err).indexOf(true) > -1) {\r\n\t\t\tsetErrors(prevErrors => ({ ...prevErrors, ...err }));\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\t\r\n\t\t// attach devices\r\n\t\tprops.onSave(EDITOR.current);\r\n\t}\r\n\t\r\n\t/**\r\n\t *\r\n\t */\r\n\tconst _onChange = useCallback((props, val, device) => {\r\n\t\t\r\n\t\t// error occured\r\n\t\tif (props.error && props.error !== errors[props.id]) {\r\n\t\t\tsetErrors(prevErrors => ({\r\n\t\t\t\t...prevErrors,\r\n\t\t\t\t[props.id]: props.error\r\n\t\t\t}));\r\n\t\t}\r\n\t\t\r\n\t\t// no error -> remove old error\r\n\t\telse if (!props.error && errors[props.id]) {\r\n\t\t\tsetErrors(prevErrors => {\r\n\t\t\t\tlet nextErrors = { ...prevErrors }\r\n\t\t\t\tdelete nextErrors[props.id];\r\n\t\t\t\treturn nextErrors;\r\n\t\t\t});\r\n\t\t}\r\n\t\t\r\n\t\t// device\r\n\t\tif (device !== undefined) {\r\n\t\t\tif (props.id.indexOf('componentConfig.') > -1) {\r\n\t\t\t\tconst [,key,id] = props.id.split('.');\r\n\t\t\t\t\r\n\t\t\t\tEDITOR.current.devices[device][key] = EDITOR.current.devices[device][key] || {}\r\n\t\t\t\tEDITOR.current.devices[device][key][id] = val;\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tEDITOR.current.devices[device][props.id] = val;\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\t// converted nested IDs to object\r\n\t\telse if (props.id.indexOf('moduleConfig.') > -1) {\r\n\t\t\tEDITOR.current.moduleConfig[props.id.replace('moduleConfig.', '')] = val;\r\n\t\t}\r\n\t\t\r\n\t\t// set value\r\n\t\telse {\r\n\t\t\tEDITOR.current[props.id] = val;\r\n\t\t}\r\n\t\t\r\n\t}, [errors]);\r\n\t\r\n\t/**\r\n\t *\r\n\t */\r\n\tconst _validate = useCallback((key, val) => {\r\n\t\t_onChange({ error: !val, id: key }, val || '');\r\n\t}, [_onChange]);\r\n\t\r\n\t/*\r\n\t *\r\n\t */\r\n\tconst mount = () => _validate('title', props.widget.title); // trigger initial validation\r\n\tuseEffect(mount, []);\r\n\t\r\n\treturn (\r\n\t\t<>\r\n\r\n\t\t\t<Dialog\r\n\t\t\t\theader={i18n.t('Widget configuration')}\r\n\t\t\t\tactions={\r\n\t\t\t\t\t<Grid container>\r\n\t\t\t\t\t\t<Grid item xs={6}>\r\n\t\t\t\t\t\t\t{props.widget.index !== undefined && <Inputs.Button key='action-delete' variant=\"text\" onClick={() => props.onDelete(props.widget.index)} color=\"secondary\" startIcon={<DeleteIcon />} label=\"Delete Widget\" />}\r\n\t\t\t\t\t\t\t&nbsp;\r\n\t\t\t\t\t\t</Grid>\r\n\t\t\t\t\t\t<Grid item xs={6} className={classes.alignRight}>\r\n\t\t\t\t\t\t\t<Inputs.Button key=\"action-cancel\" variant=\"text\" onClick={_onClose} color=\"secondary\" label=\"Cancel\" />\r\n\t\t\t\t\t\t\t<Inputs.Button key=\"action-save\" variant=\"text\" onClick={_onSave} color=\"primary\" disabled={Object.keys(errors).length > 0} label=\"Apply\" />\r\n\t\t\t\t\t\t</Grid>\r\n\t\t\t\t\t</Grid>\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tdense\r\n\t\t\t\tmaxWidth='lg'\r\n\t\t\t\tfullWidth={true}\r\n\t\t\t\topen={true}\r\n\t\t\t\tonClose={_onClose}\r\n\t\t\t\t>\r\n\t\t\t\t\r\n\t\t\t\t<SectionWidget\r\n\t\t\t\t\t{...props}\r\n\t\t\t\t\t_onChange={_onChange}\r\n\t\t\t\t\t_validate={_validate}\r\n\t\t\t\t\teditor={EDITOR.current}\r\n\t\t\t\t\terrors={errors}\r\n\t\t\t\t\t/>\r\n\t\t\t\t\r\n\t\t\t\t<SectionModule\r\n\t\t\t\t\t{...props}\r\n\t\t\t\t\t_onChange={_onChange}\r\n\t\t\t\t\teditor={EDITOR.current}\r\n\t\t\t\t\terrors={errors}\r\n\t\t\t\t\t/>\r\n\t\t\t\t\r\n\t\t\t</Dialog>\r\n\t\t</>\r\n\t)\r\n});\r\n\r\nexport default WidgetPage;\r\n\r\n\r\n/*\r\n *\r\n */\r\nconst SectionWidget = React.memo(props => {\r\n\tLog._('WidgetPage', 'RENDER SectionWidget', 'development');\r\n\t//const classes = useStyles();\r\n\tconst { _onChange, _validate, editor, widget } = props;\r\n\t\r\n\tconst [fullscreen,setFullscreen] = useState(props.widget.fullscreen !== undefined ? widget.fullscreen : false);\r\n\t\r\n\treturn (\r\n\t\t<Inputs.Fieldset label='Widget-Box'>\r\n\t\t\t<Inputs.FieldsetItem columns={12}>\r\n\t\t\t\t<Inputs.Switch\r\n\t\t\t\t\tkey='fullscreen'\r\n\t\t\t\t\tid='fullscreen'\r\n\t\t\t\t\t{...LayoutsConfig.widgetFullscreen}\r\n\t\t\t\t\t\r\n\t\t\t\t\tonChange={(props, val) => {\r\n\t\t\t\t\t\t_onChange(props, val);\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tconst title = '(' + i18n.t('fullscreen') + ')';\r\n\t\t\t\t\t\tif (!editor.title && val === true) {\r\n\t\t\t\t\t\t\t_onChange({ 'id': 'title'}, title);\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse if (editor.title === title && val === false) {\r\n\t\t\t\t\t\t\t_validate('title', '');\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tsetFullscreen(val);\r\n\t\t\t\t\t}}\r\n\t\t\t\t\tval={fullscreen}\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t\r\n\t\t\t</Inputs.FieldsetItem>\r\n\t\t\t\r\n\t\t\t{fullscreen !== true && <>\r\n\t\t\t<Inputs.FieldsetItem columns={4}>\r\n\t\t\t\t<Inputs.Text\r\n\t\t\t\t\tkey='title'\r\n\t\t\t\t\tid='title'\r\n\t\t\t\t\t{...LayoutsConfig.widgetTitle}\r\n\t\t\t\t\t\r\n\t\t\t\t\tautoFocus\r\n\t\t\t\t\tonChange={_onChange}\r\n\t\t\t\t\tval={editor.title || ''}\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t\r\n\t\t\t</Inputs.FieldsetItem>\r\n\t\t\t<Inputs.FieldsetItem columns={4}>\r\n\t\t\t\t<Inputs.Text\r\n\t\t\t\t\tkey='icon'\r\n\t\t\t\t\tid='icon'\r\n\t\t\t\t\t{...LayoutsConfig.widgetIcon}\r\n\t\t\t\t\t\r\n\t\t\t\t\tonChange={_onChange}\r\n\t\t\t\t\tval={editor.icon || ''}\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t\r\n\t\t\t</Inputs.FieldsetItem>\r\n\t\t\t<Inputs.FieldsetItem columns={4}>\r\n\t\t\t\t<Inputs.Text\r\n\t\t\t\t\tkey='iconStyle'\r\n\t\t\t\t\tid='iconStyle'\r\n\t\t\t\t\t{...LayoutsConfig.widgetIconStyle}\r\n\t\t\t\t\t\r\n\t\t\t\t\tonChange={_onChange}\r\n\t\t\t\t\tval={editor.iconStyle ? JSON.stringify(editor.iconStyle) : ''}\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t\r\n\t\t\t</Inputs.FieldsetItem>\r\n\t\t\t</>}\r\n\t\t</Inputs.Fieldset>\r\n\t);\r\n});\r\n\r\n/*\r\n *\r\n */\r\nconst SectionModule = React.memo(props => {\r\n\tLog._('WidgetPage', 'RENDER SectionModule', 'development');\r\n\t//const classes = useStyles();\r\n\tconst { _onChange } = props;\r\n\t\r\n\tconst [module,setModule] = useState(props.widget.module || config.get('DEFAULT_MODULE'));\r\n\t\r\n\treturn (\r\n\t\t<Inputs.Fieldset label='Module'>\r\n\t\t\t<Inputs.FieldsetItem>\r\n\t\t\t\t<Inputs.Text\r\n\t\t\t\t\tkey='module'\r\n\t\t\t\t\tid='module'\r\n\t\t\t\t\t{...LayoutsConfig.widgetModule}\r\n\t\t\t\t\t\r\n\t\t\t\t\tautoComplete\r\n\t\t\t\t\tautoHighlight\r\n\t\t\t\t\t\r\n\t\t\t\t\tval={module}\r\n\t\t\t\t\tonChange={(props, val) => {\r\n\t\t\t\t\t\t_onChange(props, val);\r\n\t\t\t\t\t\tsetModule(val);\r\n\t\t\t\t\t}}\r\n\t\t\t\t\t/>\r\n\t\t\t\t\r\n\t\t\t</Inputs.FieldsetItem>\r\n\t\t\t\r\n\t\t\t<ModuleConfig\r\n\t\t\t\t{...props}\r\n\t\t\t\tmoduleConfigurations={(module && ModuleConfigurations[module]) || []}\r\n\t\t\t\t/>\r\n\t\t\t\r\n\t\t\t<ModuleDevices\r\n\t\t\t\t{...props}\r\n\t\t\t\tmoduleSettings={(module && ModuleSettings[module]) || {}}\r\n\t\t\t\t/>\r\n\t\t\t\r\n\t\t</Inputs.Fieldset>\r\n\t);\r\n});\r\n\r\n/*\r\n *\r\n */\r\nconst ModuleConfig = React.memo(props => {\r\n\tLog._('WidgetPage', 'RENDER ModuleConfig', 'development');\r\n\t//const classes = useStyles();\r\n\tconst { _onChange, moduleConfigurations, errors, editor } = props;\r\n\t\r\n\t// get module configuration options\r\n\tconst moduleConfig = moduleConfigurations.map(config => {\r\n\t\r\n\t\t// consider required fields\r\n\t\tif (!errors['moduleConfig.' + config.parameter] && config.required === true && !(editor.moduleConfig[config.parameter] || config.val)) {\r\n\t\t\t_onChange({ error: true, id: 'moduleConfig.' + config.parameter }, (editor.moduleConfig[config.parameter] || config.val) || ''); // trigger initial validation\r\n\t\t}\r\n\t\t\r\n\t\t// render config option\r\n\t\tconst Input = Inputs[config.type || 'Text'];\r\n\t\treturn (\r\n\t\t\t<Inputs.FieldsetItem columns={4} key={'FieldsetItem-' + config.parameter}>\r\n\t\t\t\t<Input\r\n\t\t\t\t\t{...config}\r\n\t\t\t\t\tkey={'moduleConfig-' + config.parameter}\r\n\t\t\t\t\tid={'moduleConfig.' + config.parameter}\r\n\t\t\t\t\tlabel={config.label || config.parameter}\r\n\t\t\t\t\tinfo={config.description}\r\n\t\t\t\t\t\r\n\t\t\t\t\tonChange={_onChange}\r\n\t\t\t\t\tval={editor.moduleConfig[config.parameter] !== undefined ? editor.moduleConfig[config.parameter] : config.val}\r\n\t\t\t\t\t/>\r\n\t\t\t\t\r\n\t\t\t</Inputs.FieldsetItem>\r\n\t\t);\r\n\t});\r\n\t\r\n\treturn (\r\n\t\t<>\r\n\t\t\t<Inputs.FieldsetItem noPadding>\r\n\t\t\t\t<Inputs.FieldsetLegend label='Module Configuration' variant=\"h4\" divider={false} />\r\n\t\t\t</Inputs.FieldsetItem>\r\n\t\t\t\r\n\t\t\t{moduleConfigurations.length > 0 ? moduleConfig : <>\r\n\t\t\t\t<Inputs.FieldsetItem noPadding>\r\n\t\t\t\t\t<Typography>{i18n.t('No configuration available for this module')}.</Typography>\r\n\t\t\t\t</Inputs.FieldsetItem>\r\n\t\t\t</>}\r\n\t\t\t\r\n\t\t</>\r\n\t);\r\n});\r\n\r\n/*\r\n *\r\n */\r\nconst ModuleDevices = React.memo(props => {\r\n\tLog._('WidgetPage', 'RENDER SectionDevices', 'development');\r\n\tconst classes = useStyles();\r\n\tconst { _onChange, moduleSettings } = props;\r\n\t\r\n\tconst [devices,setDevices] = useState(props.widget.devices || []);\r\n\tconst [error,setError] = useState('');\r\n\tuseEffect(() => {\r\n\t\t_onChange({ id: 'devices' }, devices);\r\n\t\t\r\n\t}, [_onChange, devices]);\r\n\t\r\n\tif (!moduleSettings.devices) {\r\n\t\treturn null;\r\n\t}\r\n\t\r\n\t/**\r\n\t *\r\n\t */\r\n\tconst _addItem = (type, val) => {\r\n\t\tlet device = { type: type }\r\n\t\t\r\n\t\t// add device\r\n\t\tif (type === 'device') {\r\n\t\t\tdevice.deviceId = val.id;\r\n\t\t}\r\n\t\t\r\n\t\t// add group\r\n\t\telse if (type === 'group') {\r\n\t\t\tdevice.name = val;\r\n\t\t}\r\n\t\t\r\n\t\tsetError('');\r\n\t\t//editor.devices.push(device);\r\n\t\tsetDevices(prevDevices => ([\r\n\t\t\t...prevDevices,\r\n\t\t\tdevice\r\n\t\t]));\r\n\t}\r\n\t\r\n\t/**\r\n\t *\r\n\t */\r\n\tconst _editItem = (index, props, val) => _onChange(props, val, index);\r\n\t\r\n\t/**\r\n\t *\r\n\t */\r\n\tconst _moveItem = (action, index) => {\r\n\t\t\r\n\t\t//editor.devices = moveKeyInArray([ ...editor.devices || [] ], index, action);\r\n\t\tsetDevices(prevDevices => moveKeyInArray([ ...prevDevices ], index, action));\r\n\t}\r\n\t\r\n\t/**\r\n\t *\r\n\t */\r\n\tconst _deleteItem = index => {\r\n\t\t\r\n\t\t//editor.devices.splice(index, 1);\r\n\t\tsetDevices(prevDevices => {\r\n\t\t\tlet nextDevices = [ ...prevDevices ];\r\n\t\t\tnextDevices.splice(index, 1);\r\n\t\t\treturn nextDevices;\r\n\t\t});\r\n\t}\r\n\t\r\n\tconst deviceOptions = sortArray(Object.values(props.devices), 'function');\r\n\tconst deviceIdList = devices.map(device => device.deviceId);\r\n\t\r\n\tconst renderedDevices = devices.map((device, i) => {\r\n\t\treturn <Device\r\n\t\t\t\t{...props}\r\n\t\t\t\tkey={device.type + '- ' + (device.deviceId || device.name) + '-' + i}\r\n\t\t\t\t_addItem={_addItem}\r\n\t\t\t\t_editItem={_editItem}\r\n\t\t\t\t_moveItem={_moveItem}\r\n\t\t\t\t_deleteItem={_deleteItem}\r\n\t\t\t\tdevice={props.devices[device.deviceId] || null}\r\n\t\t\t\toptions={{ ...device, index: i }}\r\n\t\t\t\tdevices={devices}\r\n\t\t\t\t/>\r\n\t});\r\n\t\r\n\treturn (\r\n\t\t<>\r\n\t\t\t<Inputs.FieldsetItem noPadding>\r\n\t\t\t\t<Inputs.FieldsetLegend label='Assigned Devices' variant=\"h4\" divider={false} />\r\n\t\t\t</Inputs.FieldsetItem>\r\n\t\t\t\r\n\t\t\t<Inputs.Fieldset noPadding>\t\r\n\t\t\t\t<Inputs.Fieldset noPadding className={classes.sticky}>\t\r\n\t\t\t\t\t<Inputs.FieldsetItem columns={3}>\r\n\t\t\t\t\t\t<Inputs.Text\r\n\t\t\t\t\t\t\twidth=\"90%\"\r\n\t\t\t\t\t\t\tkey='addDevice'\r\n\t\t\t\t\t\t\tid='addDevice'\r\n\t\t\t\t\t\t\tlabel='Add device'\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\terror={error !== ''}\r\n\t\t\t\t\t\t\terrorMessage={error}\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tautoComplete\r\n\t\t\t\t\t\t\tautoHighlight\r\n\t\t\t\t\t\t\tdisableCloseOnSelect\r\n\t\t\t\t\t\t\tclearOnSelect\r\n\t\t\t\t\t\t\tclearOnBlur\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\toptions={deviceOptions}\r\n\t\t\t\t\t\t\tgetOptionLabel={option => i18n.t(option.function) + ' ' + option.name + (!option.attributes || !option.attributes.manufacturer ? '' : ' (' + option.attributes.manufacturer.name + ')')}\r\n\t\t\t\t\t\t\trenderOption={(option, state) => {\r\n\t\t\t\t\t\t\t\tconst added = deviceIdList.indexOf(option.id) > -1 ? deviceIdList.filter(device => device === option.id).length : 0;\r\n\t\t\t\t\t\t\t\treturn <>\r\n\t\t\t\t\t\t\t\t\t<Badge badgeContent={added} classes={{ badge: classes.Badge }} color=\"primary\">\r\n\t\t\t\t\t\t\t\t\t\t<span style={{ fontSize: '0.8rem', paddingLeft: '24px' }}>{added > 0 ? <strong>{option.name}</strong> : option.name}</span>\r\n\t\t\t\t\t\t\t\t\t</Badge>\r\n\t\t\t\t\t\t\t\t</>\r\n\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tonChange={(props, device) => {\r\n\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t// check if an item has been selected\r\n\t\t\t\t\t\t\t\tif (device) {\r\n\t\t\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t\t\t// verify if device has certain state, if required by the module\r\n\t\t\t\t\t\t\t\t\tconst states = Object.keys(device.states || {});\r\n\t\t\t\t\t\t\t\t\tif (moduleSettings.devicesStates && moduleSettings.devicesStates.requiredStates && Array.isArray(moduleSettings.devicesStates.requiredStates) && moduleSettings.devicesStates.requiredStates.some(state => states.indexOf(state) === -1)) {\r\n\t\t\t\t\t\t\t\t\t\tsetError(i18n.t('Device needs one of the following states') + ': ' + moduleSettings.devicesStates.requiredStates.join(', '));\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t\telse {\r\n\t\t\t\t\t\t\t\t\t\t_addItem('device', device);\r\n\t\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t}}\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tgroupBy={option => i18n.t(option.function)}\r\n\t\t\t\t\t\t\tcloseIcon={null}\r\n\t\t\t\t\t\t\tpopupIcon={null}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t</Inputs.FieldsetItem>\r\n\t\t\t\t\t{Array.isArray(moduleSettings['devices']) && moduleSettings['devices'].indexOf('group') > -1 && <><Inputs.FieldsetItem columns={1} centered>\r\n\t\t\t\t\t\t<em>{i18n.t('or')}</em>\r\n\t\t\t\t\t</Inputs.FieldsetItem>\r\n\t\t\t\t\t<Inputs.FieldsetItem columns={3}>\r\n\t\t\t\t\t\t<Inputs.Text\r\n\t\t\t\t\t\t\twidth=\"90%\"\r\n\t\t\t\t\t\t\tkey='addGroup'\r\n\t\t\t\t\t\t\tid='addGroup'\r\n\t\t\t\t\t\t\tlabel='Add group'\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tonEnter={(props, val) => val && _addItem('group', val)}\r\n\t\t\t\t\t\t\tclearOnEnter\r\n\t\t\t\t\t\t\tclearOnBlur\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t</Inputs.FieldsetItem></>}\r\n\t\t\t\t\t{Array.isArray(moduleSettings['devices']) && moduleSettings['devices'].indexOf('divider') > -1 && <><Inputs.FieldsetItem columns={1} centered>\r\n\t\t\t\t\t\t<em>{i18n.t('or')}</em>\r\n\t\t\t\t\t</Inputs.FieldsetItem>\r\n\t\t\t\t\t<Inputs.FieldsetItem columns={3}>\r\n\t\t\t\t\t\t<Inputs.Button\r\n\t\t\t\t\t\t\tkey='addDivider'\r\n\t\t\t\t\t\t\tid='addDivider'\r\n\t\t\t\t\t\t\tlabel='Add divider'\r\n\t\t\t\t\t\t\tonClick={() => _addItem('divider')}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t</Inputs.FieldsetItem></>}\r\n\t\t\t\t</Inputs.Fieldset>\r\n\t\t\t\t<Inputs.FieldsetItem>\r\n\t\t\t\t\t<List classes={{ root: classes.fullWidth }} dense disablePadding>\r\n\t\t\t\t\t\t{renderedDevices}\r\n\t\t\t\t\t</List>\r\n\t\t\t\t</Inputs.FieldsetItem>\r\n\t\t\t\t\r\n\t\t\t</Inputs.Fieldset>\r\n\t\t</>\r\n\t);\r\n});\r\n\r\n/*\r\n *\r\n */\r\nconst Device = React.memo(props => {\r\n\tLog._('WidgetPage', 'RENDER Device', 'development');\r\n\tconst classes = useStyles();\r\n\tconst { _editItem, _moveItem, _deleteItem, devices, device, options, moduleSettings } = props;\r\n\t\r\n\tconst [componentConfig,setComponentConfig] = useState(null);\r\n\t\r\n\tlet Device = options.deviceId;\r\n\tlet Icon = <DevicesIcon classes={{ root: classes.iconCentered }} />\r\n\tlet Actions = null;\r\n\t\r\n\tif (options.type === 'device' && device !== null) {\r\n\t\tDevice = <span className={classes.title}>{device.name + ' (' + i18n.t(device.function) + ', #' + device.id + ')'}</span>\r\n\t\t\r\n\t\tif (!moduleSettings.DeviceActionsConfiguration) {\r\n\t\t\tconst states = Object.keys(device.states || {}).map(state => ({ [state]: device.states[state].label || state }));\r\n\t\t\t\r\n\t\t\tActions = (!moduleSettings.devicesStates || (moduleSettings.devicesStates && moduleSettings.devicesStates.selectable !== false)) && <Grid container spacing={1}>\r\n\t\t\t\t\t<Grid item xs={6}>\r\n\t\t\t\t\t{(!moduleSettings.devicesStates || !moduleSettings.devicesStates.selectable || (moduleSettings.devicesStates.selectable && moduleSettings.devicesStates.selectable.indexOf('primaryStateKey') > -1)) &&\r\n\t\t\t\t\t\t<Inputs.Select\r\n\t\t\t\t\t\t\tid=\"primaryStateKey\"\r\n\t\t\t\t\t\t\twidth={150}\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tlabel='Primary State Key'\r\n\t\t\t\t\t\t\tselection={states}\r\n\t\t\t\t\t\t\tval={options.primaryStateKey !== undefined ? options.primaryStateKey : device.primaryStateKey}\r\n\t\t\t\t\t\t\tonChange={(props, val) => _editItem(options.index, props, val)}\r\n\t\t\t\t\t\t\tdisabled={moduleSettings.devicesStates && moduleSettings.devicesStates.disabled && moduleSettings.devicesStates.disabled.indexOf('primaryStateKey') > -1}\r\n\t\t\t\t\t\t\t/>}\r\n\t\t\t\t\t\r\n\t\t\t\t\t</Grid>\r\n\t\t\t\t\t<Grid item xs={6}>\r\n\t\t\t\t\t{(!moduleSettings.devicesStates || !moduleSettings.devicesStates.selectable || (moduleSettings.devicesStates.selectable && moduleSettings.devicesStates.selectable.indexOf('secondaryStateKey') > -1)) ?\r\n\t\t\t\t\t\t<Inputs.Select\r\n\t\t\t\t\t\t\tid=\"secondaryStateKey\"\r\n\t\t\t\t\t\t\twidth={150}\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tlabel='Secondary State Key'\r\n\t\t\t\t\t\t\tselection={[ { '': i18n.t('none') }, ...states ]}\r\n\t\t\t\t\t\t\tval={options.secondaryStateKey !== undefined ? options.secondaryStateKey : device.secondaryStateKey}\r\n\t\t\t\t\t\t\tonChange={(props, val) => _editItem(options.index, props, val)}\r\n\t\t\t\t\t\t\tdisabled={moduleSettings.devicesStates && moduleSettings.devicesStates.disabled && moduleSettings.devicesStates.disabled.indexOf('secondaryStateKey') > -1}\r\n\t\t\t\t\t\t\t/> :\r\n\t\t\t\t\t\t<Placeholder width={150} />}\r\n\t\t\t\t\t</Grid>\r\n\t\t\t\t\t{moduleSettings.devicesStates && moduleSettings.devicesStates.lastUpdateOption === true &&\r\n\t\t\t\t\t<Grid item xs={12}>\r\n\t\t\t\t\t\t<Inputs.Switch\r\n\t\t\t\t\t\t\tid=\"lastUpdate\"\r\n\t\t\t\t\t\t\tlabel='Display Last Update'\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tval={options.lastUpdate !== undefined ? options.lastUpdate : true}\r\n\t\t\t\t\t\t\tonChange={(props, val) => _editItem(options.index, props, val)}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t</Grid>}\r\n\t\t\t\t</Grid>\r\n\t\t}\r\n\t}\r\n\telse if (options.type === 'group') {\r\n\t\tIcon = <GroupIcon classes={{ root: classes.iconCentered }} />\r\n\t\tDevice = <span className={classes.title}>{options.name}</span>\r\n\t}\r\n\telse if (options.type === 'divider') {\r\n\t\tIcon = <DividerIcon classes={{ root: classes.iconCentered }} />\r\n\t\tDevice = <em className={classes.title}>{'(' + i18n.t('divider') + ')'}</em>\r\n\t}\r\n\t\r\n\tconst deviceOptions = {\r\n\t\tdevice: device || {},\r\n\t\toptions: devices[options.index] || options,\r\n\t\tonChange: (props, val) => _editItem(options.index, props, val),\r\n\t\tonConfig: (id, config) => setComponentConfig({ id, config }),\r\n\t\telements: { Icon, Device, Actions }\r\n\t}\r\n\t\r\n\treturn (\r\n\t\t<>\r\n\t\t\t<ComponentConfig\r\n\t\t\t\t_onChange={(props, val) => _editItem(options.index, props, val)}\r\n\t\t\t\tid={(componentConfig && componentConfig.id) || null}\r\n\t\t\t\tconfig={(componentConfig && componentConfig.config) || {}}\r\n\t\t\t\t/>\r\n\t\t\t\r\n\t\t\t<ListItem key={'Device-' + (options.deviceId || options.type) + '-' + options.index} divider classes={{ container: classes.height }}>\r\n\t\t\t\t<Grid container item xs={1}>\r\n\t\t\t\t\t<div className={classes.iconContainer}>\r\n\t\t\t\t\t\t<IconButton size=\"small\" onClick={() => _moveItem('up', options.index)}>\r\n\t\t\t\t\t\t\t<ArrowUpIcon />\r\n\t\t\t\t\t\t</IconButton>\r\n\t\t\t\t\t\t{/*<IconButton size=\"small\">\r\n\t\t\t\t\t\t\t<DragIcon />\r\n\t\t\t\t\t\t</IconButton>*/}\r\n\t\t\t\t\t\t<IconButton size=\"small\" onClick={() => _moveItem('down', options.index)}>\r\n\t\t\t\t\t\t\t<ArrowDownIcon />\r\n\t\t\t\t\t\t</IconButton>\r\n\t\t\t\t\t</div>\r\n\t\t\t\t\t<IconButton size=\"small\" onClick={() => _deleteItem(options.index)} style={{ height: '30px', margin: 'auto 0 auto 8px' }}>\r\n\t\t\t\t\t\t<DeleteIcon />\r\n\t\t\t\t\t</IconButton>\r\n\t\t\t\t</Grid>\r\n\t\t\t\t<Grid item xs={6}>\r\n\t\t\t\t\t{moduleSettings.DeviceBodyConfiguration ? React.createElement(moduleSettings.DeviceBodyConfiguration, deviceOptions) : <>{Icon} {Device}</>}\r\n\t\t\t\t</Grid>\r\n\t\t\t\t<Grid item xs={5}>\r\n\t\t\t\t\t{moduleSettings.DeviceActionsConfiguration ? React.createElement(moduleSettings.DeviceActionsConfiguration, deviceOptions) : Actions}\r\n\t\t\t\t</Grid>\r\n\t\t\t</ListItem>\r\n\t\t</>\r\n\t);\r\n});\r\n\r\n/*\r\n *\r\n */\r\nconst ComponentConfig = React.memo(props => {\r\n\tLog._('WidgetPage', 'RENDER ComponentConfig', 'development');\r\n\t//const classes = useStyles();\r\n\tconst { _onChange, id, config } = props;\r\n\t\r\n\tconst [open,setOpen] = useState(false);\r\n\tuseEffect(() => {\r\n\t\tsetOpen(config !== null);\r\n\t}, [config]);\r\n\t\r\n\tif (id === null || config === null) {\r\n\t\treturn null;\r\n\t}\r\n\t\r\n\t// component configuration\r\n\tconst componentConfiguration = Object.keys(config).map(configKey => {\r\n\t\tconst configOption = config[configKey];\r\n\t\t\r\n\t\treturn (\r\n\t\t\t<ListItem key={'Config-' + configKey} divider>\r\n\t\t\t\t<ListItemText primary={configOption.label || configKey} />\r\n\t\t\t\t<ListItemSecondaryAction>\r\n\t\t\t\t\t<Inputs.Text\r\n\t\t\t\t\t\tkey={'componentConfig.' + id + '.' + configKey}\r\n\t\t\t\t\t\tid={'componentConfig.' + id + '.' + configKey}\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\twidth={100}\r\n\t\t\t\t\t\tinputProps={{\r\n\t\t\t\t\t\t\tstyle: { textAlign: 'right' }\r\n\t\t\t\t\t\t}} \r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tonChange={(props, val) => _onChange(props, val)}\r\n\t\t\t\t\t\tval={configOption.value !== undefined ? configOption.value : configOption}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t\r\n\t\t\t\t</ListItemSecondaryAction>\r\n\t\t\t</ListItem>\r\n\t\t);\r\n\t});\r\n\t\r\n\treturn (\r\n\t\t<Dialog\r\n\t\t\theader={i18n.t('Component configuration')}\r\n\t\t\tactions={\r\n\t\t\t\t<Inputs.Button key=\"action-save\" variant=\"text\" onClick={() => setOpen(false)} color=\"primary\" label=\"Apply\" />\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tdense\r\n\t\t\tmaxWidth='xs'\r\n\t\t\tfullWidth={true}\r\n\t\t\topen={open}\r\n\t\t\tonClose={() => setOpen(false)}\r\n\t\t\t>\r\n\t\t\t\r\n\t\t\t<List dense disablePadding>\r\n\t\t\t\t{componentConfiguration}\r\n\t\t\t</List>\r\n\t\t</Dialog>\r\n\t);\r\n});\r\n","import React, { useState, useEffect, useRef } from 'react'\r\nimport { v4 as uuid } from 'uuid'\r\n\r\nimport config from '../../../config/config'\r\nimport LayoutsConfig from './Layouts.config'\r\n\r\nimport i18n from '../../../controller/i18n'\r\nimport Log from '../../../controller/Log'\r\nimport { moveKeyInArray } from '../../../helpers/utils'\r\n\r\nimport Grid from '@material-ui/core/Grid'\r\nimport IconButton from '@material-ui/core/IconButton'\r\nimport List from '@material-ui/core/List'\r\nimport ListItem from '@material-ui/core/ListItem'\r\nimport ListItemIcon from '@material-ui/core/ListItemIcon'\r\nimport ListItemText from '@material-ui/core/ListItemText'\r\nimport ListItemSecondaryAction from '@material-ui/core/ListItemSecondaryAction'\r\nimport Paper from '@material-ui/core/Paper'\r\nimport Typography from '@material-ui/core/Typography'\r\n\r\nimport AddIcon from '@material-ui/icons/AddCircle'\r\nimport TabIcon from '@material-ui/icons/Tab'\r\nimport ArrowUpIcon from '@material-ui/icons/KeyboardArrowUp'\r\nimport ArrowDownIcon from '@material-ui/icons/KeyboardArrowDown'\r\nimport ArrowLeftIcon from '@material-ui/icons/KeyboardArrowLeft'\r\nimport ArrowRightIcon from '@material-ui/icons/KeyboardArrowRight'\r\nimport FullscreenIcon from '@material-ui/icons/Fullscreen'\r\nimport DeleteIcon from '@material-ui/icons/Delete'\r\n\r\nimport Inputs from '../../../components/Inputs'\r\nimport WidgetPage from './WidgetPage'\r\n\r\n\r\n/*\r\n * STYLES\r\n */\r\nimport { makeStyles } from '@material-ui/core/styles'\r\nconst useStyles = makeStyles(theme => ({\r\n\tdeleteButton: {\r\n\t\tmarginTop: '20px'\r\n\t},\r\n\ttabs: {\r\n\t\tmarginBottom: '10px'\r\n\t},\r\n\ttab: {\r\n\t\tpadding: theme.spacing(3, 2),\r\n\t},\r\n\ticonContainer: {\r\n\t\tflexDirection: 'column',\r\n\t\talignItems: 'center'\r\n\t},\r\n\tcolumnContainer: {\r\n\t\tmarginTop: theme.spacing(2),\r\n\t},\r\n\tcolumn: {\r\n\t\twidth: 250,\r\n\t\tmargin: theme.spacing(1, 1),\r\n\t\tborderRight: '1px solid rgba(0, 0, 0, 0.12)',\r\n\t\tborderLeft: '1px solid rgba(0, 0, 0, 0.12)',\r\n\t},\r\n\tDialogActions: {\r\n\t\tjustifyContent: 'initial'\r\n\t},\r\n\talignRight: {\r\n\t\tdisplay: 'flex',\r\n\t\tjustifyContent: 'flex-end',\r\n\t\t\r\n\t\t'& > :not(:first-child)': {\r\n\t\t\tmarginLeft: 8,\r\n\t\t}\r\n\t}\r\n}));\r\n\r\n\r\ni18n.setTranslations(language => require('./i18n/' + language));\r\n\r\nconst LayoutsPage = React.memo(props => {\r\n\tLog._('LayoutsPage', 'RENDER LayoutsPage', 'development');\r\n\t\r\n\tconst layout = useRef((Array.isArray(props.layout) && props.layout.length > 0 && props.layout) || [{ title: '', tabs: [] }]);\r\n\t\r\n\t/**\r\n\t *\r\n\t */\r\n\tconst _setLayout = (setter, cb = null) => {\r\n\t\tsetter(layout.current);\r\n\t\tcb && cb();\r\n\t\t\r\n\t\tconsole.log(layout.current);\r\n\t\tprops._onLayoutsChange(layout.current);\r\n\t}\r\n\t\r\n\t/*\r\n\t *\r\n\t */\r\n\tconst drawers = layout.current.map((drawer, drawerIndex) => {\r\n\t\t\r\n\t\tif (!drawer) {\r\n\t\t\treturn null;\r\n\t\t}\r\n\t\t\r\n\t\tdrawer.id = drawer.title.toLowerCase().replace(/ /g, '') + drawerIndex;\r\n\t\treturn <Drawer\r\n\t\t\t\t\t{...props}\r\n\t\t\t\t\tkey={'Drawer-' + drawer.id} \r\n\t\t\t\t\t_setLayout={_setLayout}\r\n\t\t\t\t\tlayout={layout.current}\r\n\t\t\t\t\tdrawer={{ ...drawer, index: drawerIndex, id: drawer.id }}\r\n\t\t\t\t\t/>\r\n\t});\r\n\t\t\r\n\treturn (\r\n\t\t<Paper>\r\n\t\t\t{drawers}\r\n\t\t</Paper>\r\n\t)\r\n\t\r\n}, (prevProps, nextProps) => nextProps.selected !== true); // re-render on false (not equal), only render when selected\r\n\r\nexport default LayoutsPage;\r\n\r\n\r\n/*\r\n * DRAWER\r\n */\r\nconst Drawer = React.memo(props => {\r\n\tLog._('LayoutsPage', 'RENDER Drawer ' + props.drawer.id, 'development');\r\n\tconst classes = useStyles();\r\n\tconst { _setLayout } = props;\r\n\t\r\n\tconst [drawer,setDrawer] = useState(props.drawer || {});\r\n\t\r\n\t/*\r\n\t * apply changes to layout\r\n\t */\r\n\tconst isFirstRun = useRef(true);\r\n\tuseEffect(() => {\r\n\t\tisFirstRun.current === false && _setLayout(prevLayout => {\r\n\t\t\tlet nextLayout = [ ...prevLayout || [] ];\r\n\t\t\tnextLayout[drawer.index] = drawer;\r\n\t\t\treturn nextLayout;\r\n\t\t});\r\n\t\t\r\n\t\tisFirstRun.current = false;\r\n\t\t\r\n\t\t// new tab\r\n\t\tconst newTab = document.getElementById('Drawer-' + drawer.id + '-Tab-' + i18n.t('add tab').toLowerCase().replace(/ /g, '') + (drawer.tabs.length-1));\r\n\t\t\r\n\t\tif (newTab) {\r\n\t\t\tdocument.getElementById('DialogContent').scrollTop = newTab.offsetTop;\r\n\t\t}\r\n\t\t\r\n\t}, [_setLayout, drawer]);\r\n\t\r\n\t/**\r\n\t *\r\n\t */\r\n\tconst _addTab = d => {\r\n\t\t\r\n\t\tsetDrawer(prevDrawer => {\r\n\t\t\tlet nextDrawer = { ...prevDrawer };\r\n\t\t\tnextDrawer.tabs.push({\r\n\t\t\t\ttitle: i18n.t('add tab'),\r\n\t\t\t\ticon: 'home',\r\n\t\t\t\tcolumns: [[]]\r\n\t\t\t});\r\n\t\t\t\r\n\t\t\treturn nextDrawer;\r\n\t\t});\r\n\t}\r\n\t\r\n\t/**\r\n\t *\r\n\t */\r\n\tconst _deleteTab = tabIndex => {\r\n\t\t\r\n\t\tsetDrawer(prevDrawer => {\r\n\t\t\tlet nextDrawer = { ...prevDrawer };\r\n\t\t\tnextDrawer.tabs.splice(tabIndex, 1);\r\n\t\t\treturn nextDrawer;\r\n\t\t});\r\n\t}\r\n\t\r\n\t/**\r\n\t *\r\n\t */\r\n\tconst _moveTab = (action, tabIndex) => event => {\r\n\t\tevent.stopPropagation();\r\n\t\t\r\n\t\tsetDrawer(prevDrawer => {\r\n\t\t\tlet nextDrawer = { ...prevDrawer };\r\n\t\t\tnextDrawer.tabs = moveKeyInArray([ ...nextDrawer.tabs || [] ], tabIndex, action);\r\n\t\t\treturn nextDrawer;\r\n\t\t});\r\n\t}\r\n\t\r\n\t// tabs per drawer\r\n\tconst tabs = drawer.tabs.map((tab, tabIndex) => {\r\n\t\t\r\n\t\tif (!tab) {\r\n\t\t\treturn null;\r\n\t\t}\r\n\t\t\r\n\t\ttab.id = uuid();\r\n\t\treturn <Tab\r\n\t\t\t\t{...props}\r\n\t\t\t\tkey={'Tab-' + tab.id} \r\n\t\t\t\ttab={{ ...tab, index: tabIndex, id: tab.title.toLowerCase().replace(/ /g, '') + tabIndex }}\r\n\t\t\t\t_moveTab={_moveTab}\r\n\t\t\t\t_deleteTab={_deleteTab}\r\n\t\t\t\t/>\r\n\t});\r\n\t\r\n\treturn (\r\n\t\t<List className={classes.tabs} key={'Drawer-' + drawer.id} id={'Drawer-' + drawer.id}>\r\n\t\t\t<ListItem divider classes={{ root: classes.tab }}>\r\n\t\t\t\t<ListItemIcon classes={{ root: classes.iconContainer }}>\r\n\t\t\t\t\t<TabIcon />\r\n\t\t\t\t</ListItemIcon>\r\n\t\t\t\t<ListItemText\r\n\t\t\t\t\tdisableTypography={true}\r\n\t\t\t\t\tprimary={[\r\n\t\t\t\t\t\t<Inputs.Button key='Input-addTabs' id='Input-addTabs' label='add tab' onClick={() => _addTab(drawer)} />,\r\n\t\t\t\t\t\t<Inputs.Switch\r\n\t\t\t\t\t\t\tkey='Input-tabsHideLabels'\r\n\t\t\t\t\t\t\tid='tabsHideLabels'\r\n\t\t\t\t\t\t\t{...LayoutsConfig.tabsHideLabels}\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tonChange={({ id }, val) => props.onChange(null, { [id]: val })}\r\n\t\t\t\t\t\t\tval={props.settings['tabsHideLabels']}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t]}\r\n\t\t\t\t\t/>\r\n\t\t\t\t\r\n\t\t\t</ListItem>\r\n\t\t\t{tabs}\r\n\t\t\t\r\n\t\t</List>\r\n\t)\r\n\r\n});\r\n\r\n/*\r\n *\r\n */\r\nconst Tab = React.memo(props => {\r\n\tLog._('LayoutsPage', 'RENDER Tab ' + props.tab.id, 'development');\r\n\tconst classes = useStyles();\r\n\tconst { _setLayout, drawer } = props;\r\n\t\r\n\tconst [tab,setTab] = useState(props.tab || {});\r\n\t\r\n\t/*\r\n\t * apply changes to layout\r\n\t */\r\n\tconst isFirstRun = useRef(true);\r\n\tuseEffect(() => {\r\n\t\tisFirstRun.current === false && _setLayout(prevLayout => {\r\n\t\t\tlet nextLayout = [ ...prevLayout || [] ];\r\n\t\t\tnextLayout[drawer.index].tabs[tab.index] = tab;\r\n\t\t\treturn nextLayout;\r\n\t\t});\r\n\t\t\r\n\t\tisFirstRun.current = false;\r\n\t}, [_setLayout, drawer.index, tab]);\r\n\t\r\n\t/**\r\n\t *\r\n\t */\r\n\tconst _changeTab = (drawerIndex, tabIndex) => ({ id }, val) => {\r\n\t\tid = id.substr(0, id.indexOf('-'));\r\n\t\t\r\n\t\t// edit tab icon / label\r\n\t\tif ((id === 'icon' || id === 'title') && tab[id] !== val) {\r\n\t\t\t\r\n\t\t\tsetTab(prevTab => ({\r\n\t\t\t\t...prevTab,\r\n\t\t\t\t[id]: val\r\n\t\t\t}));\r\n\t\t}\r\n\t\t\r\n\t\t// edit tab fullscreen option\r\n\t\telse if (id === 'fullscreen') {\r\n\t\t\t\r\n\t\t\tsetTab(prevTab => {\r\n\t\t\t\tlet nextTab = { ...prevTab }\r\n\t\t\t\t\r\n\t\t\t\tif (nextTab._fullscreen !== undefined) {\r\n\t\t\t\t\tnextTab.columns = [\r\n\t\t\t\t\t\t[ nextTab._fullscreen ]\r\n\t\t\t\t\t];\r\n\t\t\t\t\t\r\n\t\t\t\t\tdelete nextTab._fullscreen;\r\n\t\t\t\t}\r\n\t\t\t\telse {\r\n\t\t\t\t\tnextTab._fullscreen = (nextTab.columns && nextTab.columns[0] && nextTab.columns[0][0]) || null;\r\n\t\t\t\t\tdelete nextTab.columns;\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\treturn nextTab;\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\t\r\n\t/**\r\n\t *\r\n\t */\r\n\tconst _addColumn = () => {\r\n\t\t\r\n\t\tsetTab(prevTab => {\r\n\t\t\tlet nextTab = { ...prevTab || {} }\r\n\t\t\tnextTab.columns.push([]);\r\n\t\t\treturn nextTab;\r\n\t\t});\r\n\t}\r\n\t\r\n\t/**\r\n\t * \r\n\t */\r\n\tconst _deleteColumn = columnIndex => {\r\n\t\t\r\n\t\tsetTab(prevTab => {\r\n\t\t\tlet nextTab = { ...prevTab || {} }\r\n\t\t\tnextTab.columns.splice(columnIndex, 1);\r\n\t\t\treturn nextTab;\r\n\t\t});\r\n\t}\r\n\t\r\n\t/**\r\n\t * \r\n\t */\r\n\tconst _moveColumn = (action, columnIndex) => {\r\n\t\t\r\n\t\tsetTab(prevTab => {\r\n\t\t\tlet nextTab = { ...prevTab || {} }\r\n\t\t\tnextTab.columns = moveKeyInArray([ ...nextTab.columns || [] ], columnIndex, action);\r\n\t\t\treturn nextTab;\r\n\t\t});\r\n\t}\r\n\t\r\n\t// columns per tab\r\n\tlet columns = 1;\r\n\tlet widgetsInFirstColumn = (tab.columns && tab.columns[1] && tab.columns[1].length) || 0;\r\n\tlet tabColumnsNodes = [];\r\n\t\r\n\t// tab is fullscreen\r\n\tif (tab._fullscreen !== undefined) {\r\n\t\tconst column = {\r\n\t\t\tid: uuid(),\r\n\t\t\tindex: 'fullscreen',\r\n\t\t\twidgets: tab._fullscreen ? [ tab._fullscreen ] : []\r\n\t\t}\r\n\t\t\r\n\t\ttabColumnsNodes.push(\r\n\t\t\t<Column\r\n\t\t\t\t{...props}\r\n\t\t\t\tkey={'Column-' + column.id}\r\n\t\t\t\tcolumn={column}\r\n\t\t\t\ttab={tab}\r\n\t\t\t\t/>\r\n\t\t);\r\n\t}\r\n\t\r\n\t// tab divided in columns\r\n\telse {\r\n\t\tcolumns = tab.columns.length;\r\n\t\ttabColumnsNodes = tab.columns.map((widgets, columnIndex) => {\r\n\t\t\tconst column = {\r\n\t\t\t\tid: uuid(),\r\n\t\t\t\tindex: columnIndex,\r\n\t\t\t\twidgets\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\treturn <Column\r\n\t\t\t\t\t\t{...props}\r\n\t\t\t\t\t\tkey={'Column-' + column.id}\r\n\t\t\t\t\t\t_moveColumn={_moveColumn}\r\n\t\t\t\t\t\t_deleteColumn={_deleteColumn}\r\n\t\t\t\t\t\tcolumn={column}\r\n\t\t\t\t\t\ttab={tab}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t\r\n\t\t});\r\n\t}\r\n\t\r\n\treturn (\r\n\t\t<ListItem\r\n\t\t\tid={'Drawer-' + drawer.id + '-Tab-' + tab.id}\r\n\t\t\tdivider={tab.index !== (props.layout[drawer.index].tabs.length-1)}\r\n\t\t\tclasses={{ root: classes.tab }}\r\n\t\t\t>\r\n\t\t\t\r\n\t\t\t<ListItemIcon classes={{ root: classes.iconContainer }}>\r\n\t\t\t\t<React.Fragment>\r\n\t\t\t\t\t<IconButton size=\"small\" onClick={props._moveTab('up', tab.index)}>\r\n\t\t\t\t\t\t<ArrowUpIcon />\r\n\t\t\t\t\t</IconButton>\r\n\t\t\t\t\t<IconButton size=\"small\" onClick={props._moveTab('down', tab.index)}>\r\n\t\t\t\t\t\t<ArrowDownIcon />\r\n\t\t\t\t\t</IconButton>\r\n\t\t\t\t\t<IconButton size=\"small\" onClick={() => props._deleteTab(tab.index)} classes={{ root: classes.deleteButton }}>\r\n\t\t\t\t\t\t<DeleteIcon />\r\n\t\t\t\t\t</IconButton>\r\n\t\t\t\t</React.Fragment>\r\n\t\t\t</ListItemIcon>\r\n\t\t\t<ListItemText\r\n\t\t\t\tdisableTypography={true}\r\n\t\t\t\tprimary={[\r\n\t\t\t\t\t<Inputs.Text\r\n\t\t\t\t\t\tkey={'Input-tabIcon-' + tab.id}\r\n\t\t\t\t\t\tid={'icon-' + tab.index}\r\n\t\t\t\t\t\t{...LayoutsConfig.tabIcon}\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tonBlur={_changeTab(drawer.index, tab.index)}\r\n\t\t\t\t\t\tval={tab.icon || ''}\r\n\t\t\t\t\t\ticon={tab.icon ? tab.icon.replace('mdi-', '') : ''}\r\n\t\t\t\t\t\t/>,\r\n\t\t\t\t\t\r\n\t\t\t\t\t<Inputs.Text\r\n\t\t\t\t\t\tkey={'Input-tabTitle-' + tab.id}\r\n\t\t\t\t\t\tid={'title-' + tab.index}\r\n\t\t\t\t\t\t{...LayoutsConfig.tabTitle}\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tonBlur={_changeTab(drawer.index, tab.index)}\r\n\t\t\t\t\t\tval={tab.title || ''}\r\n\t\t\t\t\t\t/>,\r\n\t\t\t\t\t\r\n\t\t\t\t\t<Inputs.Button\r\n\t\t\t\t\t\tkey={'Input-tabAddColumn-' + tab.id}\r\n\t\t\t\t\t\tid={'tabAddColumn-' + tab.index}\r\n\t\t\t\t\t\tlabel='add column'\r\n\t\t\t\t\t\tdisabled={tab._fullscreen !== undefined}\r\n\t\t\t\t\t\tonClick={_addColumn}\r\n\t\t\t\t\t\t/>,\r\n\t\t\t\t\t\r\n\t\t\t\t\t<Inputs.Switch\r\n\t\t\t\t\t\tkey={'Input-tabFullscreen-' + tab.id}\r\n\t\t\t\t\t\tid={'fullscreen-' + tab.index}\r\n\t\t\t\t\t\t{...LayoutsConfig.tabFullscreen}\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tdisabled={(columns > 1 || widgetsInFirstColumn > 1)}\r\n\t\t\t\t\t\tonChange={_changeTab(drawer.index, tab.index)}\r\n\t\t\t\t\t\tval={tab._fullscreen !== undefined}\r\n\t\t\t\t\t\t/>,\r\n\t\t\t\t\t\r\n\t\t\t\t\t<Grid\r\n\t\t\t\t\t\tkey={'Tab-' + tab.id + '-ColumnContainer'}\r\n\t\t\t\t\t\tclasses={{ root: classes.columnContainer }}\r\n\t\t\t\t\t\tcontainer\r\n\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t{tabColumnsNodes}\r\n\t\t\t\t\t</Grid>\r\n\t\t\t\t]}\r\n\t\t\t\t/>\r\n\t\t\t\r\n\t\t</ListItem>\r\n\t);\r\n\r\n});\r\n\r\n/*\r\n *\r\n */\r\nconst Column = React.memo(props => {\r\n\tLog._('LayoutsPage', 'RENDER Column ' + props.column.index, 'development');\r\n\tconst classes = useStyles();\r\n\tconst { _setLayout, drawer, tab } = props;\r\n\t\r\n\tconst [column,setColumn] = useState(props.column);\r\n\tconst [selectedWidget,setSelectedWidget] = useState(null);\r\n\t\r\n\t/*\r\n\t * apply changes to layout\r\n\t */\r\n\tconst isFirstRun = useRef(true);\r\n\tuseEffect(() => {\r\n\t\tisFirstRun.current === false && _setLayout(prevLayout => {\r\n\t\t\tlet nextLayout = [ ...prevLayout || [] ];\r\n\t\t\t\r\n\t\t\t// fullscreen\r\n\t\t\tif (column.index === 'fullscreen') {\r\n\t\t\t\tnextLayout[drawer.index].tabs[tab.index]._fullscreen = column.widgets[0];\r\n\t\t\t\tdelete nextLayout[drawer.index].tabs[tab.index].columns;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\t// column\r\n\t\t\telse {\r\n\t\t\t\tnextLayout[drawer.index].tabs[tab.index].columns[column.index] = column.widgets;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\treturn nextLayout;\r\n\t\t});\r\n\t\t\r\n\t\tisFirstRun.current = false;\r\n\t}, [_setLayout, drawer.index, tab.index, column]);\r\n\t\r\n\t/**\r\n\t *\r\n\t */\r\n\tconst _openWidget = widget => setSelectedWidget(widget);\r\n\t\r\n\t/**\r\n\t * \r\n\t */\r\n\tconst _saveWidget = widget => {\r\n\t\tconst widgetIndex = widget.index;\r\n\t\tdelete widget.index;\r\n\t\t\r\n\t\tsetSelectedWidget(null);\r\n\t\tsetColumn(prevColumn => {\r\n\t\t\tlet nextColumn = { ...prevColumn || {} }\r\n\t\t\t\r\n\t\t\t// fullscreen\r\n\t\t\tif (column.index === 'fullscreen') {\r\n\t\t\t\tnextColumn.widgets[0] = widget;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\t// column\r\n\t\t\telse {\r\n\t\t\t\t// modify existing\r\n\t\t\t\tif (widgetIndex >= 0) {\r\n\t\t\t\t\tnextColumn.widgets[widgetIndex] = widget;\r\n\t\t\t\t}\r\n\t\t\t\t// add new\r\n\t\t\t\telse {\r\n\t\t\t\t\tnextColumn.widgets.push(widget);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\treturn nextColumn;\r\n\t\t});\r\n\t}\r\n\t\r\n\t/**\r\n\t * \r\n\t */\r\n\tconst _deleteWidget = widgetIndex => {\r\n\t\tsetSelectedWidget(null);\r\n\t\tsetColumn(prevColumn => {\r\n\t\t\tlet nextColumn = { ...prevColumn || {} }\r\n\t\t\tnextColumn.widgets.splice(widgetIndex, 1);\r\n\t\t\treturn nextColumn;\r\n\t\t});\r\n\t}\r\n\t\r\n\t/**\r\n\t * \r\n\t */\r\n\tconst _moveWidget = (action, widgetKey) => event => {\r\n\t\tevent.stopPropagation();\r\n\t\t\r\n\t\tsetColumn(prevColumn => {\r\n\t\t\tlet nextColumn = { ...prevColumn || {} }\r\n\t\t\tnextColumn.widgets = moveKeyInArray([ ...nextColumn.widgets || [] ], widgetKey, action);\r\n\t\t\treturn nextColumn;\r\n\t\t});\r\n\t}\r\n\t\r\n\t// components per tab\r\n\tlet tabColumnWidgetsNodes = [];\r\n\ttabColumnWidgetsNodes = column.widgets.map((widget, index) => {\r\n\t\t\r\n\t\tif (widget !== null) {\r\n\t\t\twidget.id = uuid();\r\n\t\t\twidget.index = index;\r\n\t\t\twidget.module = widget.module || config.get('DEFAULT_MODULE');\r\n\t\t\t\r\n\t\t\treturn <Widget\r\n\t\t\t\t\t{...props}\r\n\t\t\t\t\tkey={'Widget-' + widget.id}\r\n\t\t\t\t\twidget={widget}\r\n\t\t\t\t\t_moveWidget={_moveWidget}\r\n\t\t\t\t\t_openWidget={_openWidget}\r\n\t\t\t\t\t/>\r\n\t\t}\r\n\t\t\r\n\t\treturn null;\r\n\t});\r\n\t\r\n\treturn (\r\n\t\t<>\r\n\t\t\t{selectedWidget !== null && <WidgetPage\r\n\t\t\t\t\t\t\t\t\t\t\tdevices={props.devices}\r\n\t\t\t\t\t\t\t\t\t\t\twidget={selectedWidget}\r\n\t\t\t\t\t\t\t\t\t\t\tonSave={_saveWidget}\r\n\t\t\t\t\t\t\t\t\t\t\tonDelete={_deleteWidget}\r\n\t\t\t\t\t\t\t\t\t\t\tonClose={() => setSelectedWidget(null)}\r\n\t\t\t\t\t\t\t\t\t\t\t/>}\r\n\t\t\t\r\n\t\t\t<Grid className={classes.column} item>\r\n\t\t\t\t<List>\r\n\t\t\t\t\t{tab._fullscreen === undefined && <>\r\n\t\t\t\t\t<ListItem divider dense>\r\n\t\t\t\t\t\t<ListItemIcon classes={{ root: classes.iconContainer }}>\r\n\t\t\t\t\t\t\t<IconButton size=\"small\" onClick={() => props._moveColumn('up', column.index)}>\r\n\t\t\t\t\t\t\t\t<ArrowLeftIcon />\r\n\t\t\t\t\t\t\t</IconButton>\r\n\t\t\t\t\t\t</ListItemIcon>\r\n\t\t\t\t\t\t<ListItemText primary={i18n.t('move column')} />\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t<ListItemSecondaryAction>\r\n\t\t\t\t\t\t\t<IconButton size=\"small\" onClick={() => props._moveColumn('down', column.index)}>\r\n\t\t\t\t\t\t\t\t<ArrowRightIcon />\r\n\t\t\t\t\t\t\t</IconButton>\r\n\t\t\t\t\t\t</ListItemSecondaryAction>\r\n\t\t\t\t\t</ListItem>\r\n\t\t\t\t\t<ListItem onClick={() => props._deleteColumn(column.index)} button divider dense>\r\n\t\t\t\t\t\t<ListItemIcon classes={{ root: classes.iconContainer }}>\r\n\t\t\t\t\t\t\t<IconButton size=\"small\">\r\n\t\t\t\t\t\t\t\t<DeleteIcon />\r\n\t\t\t\t\t\t\t</IconButton>\r\n\t\t\t\t\t\t</ListItemIcon>\r\n\t\t\t\t\t\t<ListItemText primary={i18n.t('delete column')} />\r\n\t\t\t\t\t</ListItem></>}\r\n\t\t\t\t\t\r\n\t\t\t\t\t{(tab._fullscreen === undefined || (tab._fullscreen !== undefined && column.widgets.length < 1)) && <ListItem onClick={() => _openWidget({ module: config.get('DEFAULT_MODULE') })} button divider dense>\r\n\t\t\t\t\t\t<ListItemIcon classes={{ root: classes.iconContainer }}>\r\n\t\t\t\t\t\t\t<IconButton size=\"small\">\r\n\t\t\t\t\t\t\t\t<AddIcon />\r\n\t\t\t\t\t\t\t</IconButton>\r\n\t\t\t\t\t\t</ListItemIcon>\r\n\t\t\t\t\t\t<ListItemText primary={i18n.t('add widget')} />\r\n\t\t\t\t\t</ListItem>}\r\n\t\t\t\t\t\r\n\t\t\t\t\t{tabColumnWidgetsNodes}\r\n\t\t\t\t\t\r\n\t\t\t\t</List>\r\n\t\t\t</Grid>\r\n\t\t</>\r\n\t);\r\n\r\n});\r\n\r\n/*\r\n *\r\n */\r\nconst Widget = React.memo(props => {\r\n\tLog._('LayoutsPage', 'RENDER Widget ' + props.widget.index, 'development');\r\n\tconst classes = useStyles();\r\n\tconst { widget } = props;\r\n\t\r\n\treturn (\r\n\t\t<ListItem\r\n\t\t\tonClick={() => props._openWidget(widget)}\r\n\t\t\tbutton\r\n\t\t\tdivider\r\n\t\t\t>\r\n\t\t\t\r\n\t\t\t{props.tab._fullscreen ?\r\n\t\t\t<ListItemIcon classes={{ root: classes.iconContainer }}>\r\n\t\t\t\t<FullscreenIcon />\r\n\t\t\t</ListItemIcon>\r\n\t\t\t\t:\r\n\t\t\t<ListItemIcon classes={{ root: classes.iconContainer }}>\r\n\t\t\t\t<>\r\n\t\t\t\t\t<IconButton size=\"small\" onClick={props._moveWidget('up', widget.index)}>\r\n\t\t\t\t\t\t<ArrowUpIcon />\r\n\t\t\t\t\t</IconButton>\r\n\t\t\t\t\t<IconButton size=\"small\" onClick={props._moveWidget('down', widget.index)}>\r\n\t\t\t\t\t\t<ArrowDownIcon />\r\n\t\t\t\t\t</IconButton>\r\n\t\t\t\t</>\r\n\t\t\t</ListItemIcon>}\r\n\t\t\t\r\n\t\t\t<ListItemText primary={\r\n\t\t\t\t<React.Fragment>\r\n\t\t\t\t\t<Typography display=\"block\">{widget.title}</Typography>\r\n\t\t\t\t\t<Typography variant=\"subtitle2\">({widget.module})</Typography>\r\n\t\t\t\t</React.Fragment>\r\n\t\t\t} />\r\n\t\t\t\r\n\t\t</ListItem>\r\n\t);\r\n\r\n}, (prevProps, nextProps) => {\r\n\t//console.log('Widget', prevProps, nextProps);\r\n\treturn prevProps.widget.index === nextProps.widget.index && prevProps.widget.title === nextProps.widget.title && prevProps.widget.module === nextProps.widget.module;\r\n});\r\n","import React, { useState } from 'react'\r\n\r\nimport Accordion from '@material-ui/core/Accordion'\r\nimport AccordionDetails from '@material-ui/core/AccordionDetails'\r\nimport AccordionSummary from '@material-ui/core/AccordionSummary'\r\nimport Grid from '@material-ui/core/Grid'\r\nimport Typography from '@material-ui/core/Typography'\r\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore'\r\n\r\nimport SettingsConfig from './Settings.config'\r\nimport i18n from '../../../controller/i18n'\r\nimport Log from '../../../controller/Log'\r\nimport Settings from '../../../controller/Settings'\r\nimport Inputs from '../../../components/Inputs'\r\n\r\n\r\n/*\r\n * STYLES\r\n */\r\nimport { makeStyles } from '@material-ui/core/styles'\r\nconst useStyles = makeStyles(theme => ({\r\n\theading: {\r\n\t\tfontSize: theme.typography.pxToRem(15),\r\n\t\tflexBasis: '33.33%',\r\n\t\tflexShrink: 0,\r\n\t},\r\n\tsecondaryHeading: {\r\n\t\tfontSize: theme.typography.pxToRem(15),\r\n\t\tcolor: theme.palette.text.secondary,\r\n\t},\r\n}));\r\n\r\n\r\ni18n.setTranslations(language => require('./i18n/' + language));\r\n\r\nconst SettingsPage = React.memo(props => {\r\n\tLog._('SettingsPage', 'RENDER SettingsPage', 'development');\r\n\treturn Object.keys(SettingsConfig).map(panel => <Panel key={'Panel-' + panel} panel={{ key: panel, ...SettingsConfig[panel] }} {...props} /> );\r\n\t\r\n}, (prevProps, nextProps) => nextProps.selected !== true); // re-render on false (not equal), only render when selected\r\n\r\nexport default SettingsPage;\r\n\r\n\r\n/*\r\n *\r\n */\r\nconst Panel = React.memo(props => {\r\n\tLog._('SettingsPage', 'RENDER Panel', 'development');\r\n\tconst { panel, _onSettingsChange } = props;\r\n\tconst classes = useStyles();\r\n\t\r\n\t\r\n\tconst settings = Settings.getSettings();\r\n\tconst [expanded,setExpanded] = useState(false);\r\n\t\r\n\t/**\r\n\t *\r\n\t */\r\n\tconst _handleSettingsChange = (props, val) => {\r\n\t\tSettings.setSetting(props.id, val);\r\n\t\t_onSettingsChange && _onSettingsChange(Settings.getSettings());\r\n\t}\r\n\t\r\n\t/*\r\n\t *\r\n\t */\r\n\tconst items = Object.keys(panel.settings).map(inputKey => {\r\n\t\tconst inputSettings = panel.settings[inputKey];\r\n\t\tconst Tag = Inputs[inputSettings.type || 'Text'];\r\n\t\t\r\n\t\treturn (\r\n\t\t\t<Grid item key={'Input-' + panel.key + '-' + inputKey}>\r\n\t\t\t\t<Tag\r\n\t\t\t\t\t{...inputSettings}\r\n\t\t\t\t\tid={inputKey}\r\n\t\t\t\t\tonChange={_handleSettingsChange}\r\n\t\t\t\t\tval={props.settings[inputKey] !== undefined ? props.settings[inputKey] : (settings[inputKey] !== undefined ? settings[inputKey] : inputSettings.val)}\r\n\t\t\t\t\t/>\r\n\t\t\t\t\r\n\t\t\t</Grid>\r\n\t\t);\r\n\t});\r\n\t\r\n\treturn (\r\n\t\t<Accordion\r\n\t\t\tkey={'Accordion-' + panel.key}\r\n\t\t\texpanded={expanded}\r\n\t\t\tonChange={(event, isExpanded) => setExpanded(isExpanded)}\r\n\t\t\t>\r\n\t\t\t\r\n\t\t\t<AccordionSummary\r\n\t\t\t\texpandIcon={<ExpandMoreIcon />}\r\n\t\t\t\tid={'panel-header-' + panel.key}\r\n\t\t\t\t>\r\n\t\t\t\t\r\n\t\t\t\t<Typography className={classes.heading}>{i18n.t(panel.label)}</Typography>\r\n\t\t\t\t{panel.description && <Typography className={classes.secondaryHeading}>{i18n.t(panel.description)}</Typography>}\r\n\t\t\t\t\r\n\t\t\t</AccordionSummary>\r\n\t\t\t<AccordionDetails>\r\n\t\t\t\t<Grid container spacing={2}>\r\n\t\t\t\t\t{items}\r\n\t\t\t\t</Grid>\r\n\t\t\t</AccordionDetails>\r\n\t\t</Accordion>\r\n\t)\r\n});\r\n","import React, { useState, useRef, useEffect } from 'react'\r\n\r\nimport Paper from '@material-ui/core/Paper'\r\nimport Tabs from '@material-ui/core/Tabs'\r\nimport Tab from '@material-ui/core/Tab'\r\nimport Typography from '@material-ui/core/Typography'\r\n\r\nimport config from '../../config/config'\r\nimport Connection from '../../controller/Connection'\r\nimport Devices from '../../controller/Devices'\r\nimport i18n from '../../controller/i18n'\r\nimport Log from '../../controller/Log'\r\nimport Settings from '../../controller/Settings'\r\n\r\nimport Dialog from '../../components/Dialog'\r\nimport Inputs from '../../components/Inputs'\r\n\r\nimport ucFirst from '../../helpers/utils'\r\nimport DevicesListPage from './DevicesPage/DevicesListPage'\r\nimport LayoutsPage from './LayoutsPage/LayoutsPage'\r\nimport SettingsPage from './SettingsPage/SettingsPage'\r\n\r\n\r\n/*\r\n * STYLES\r\n */\r\nimport { makeStyles } from '@material-ui/core/styles'\r\nconst useStyles = makeStyles(theme => ({\r\n\tpaper: {\r\n\t\tmarginBottom: '10px',\r\n\t},\r\n\tpinToTop: {\r\n\t\tposition: 'absolute',\r\n\t\ttop: 0,\r\n\t\tleft: 0\r\n\t},\r\n\ttitle: {\r\n\t\tpaddingLeft: theme.spacing(2),\r\n\t\tpaddingRight: theme.spacing(1),\r\n\t\tmarginBottom: theme.spacing(1),\r\n\t\tminHeight: '64px',\r\n\t\tdisplay: 'flex',\r\n\t\tposition: 'relative',\r\n\t\talignItems: 'center'\r\n\t},\r\n\trawEditor: {\r\n\t\tfontFamily: 'Roboto Mono,Consolas,Courier New,monospace !important'\r\n\t}\r\n}));\r\n\r\n\r\ni18n.setTranslations(language => require('./i18n/' + language));\r\n\r\nconst ConfigurationPage = React.memo(props => {\r\n\tLog._('ConfigurationPage', 'RENDER ConfigurationPage', 'development');\r\n\t\r\n\tconst devices = useRef(Devices.getDevices({ raw: true, copy: true }));\r\n\tconst settings = useRef(Settings.getSettings(['iobroker']));\r\n\tconst layout = useRef(Settings.getLayout());\r\n\t\r\n\tconst [errors,setErrors] = useState({});\r\n\tconst [expertMode,setExpertMode] = useState(false);\r\n\tconst [tab,setTab] = useState('devices');\r\n\tconst [saving,setSaving] = useState(false);\r\n\t\r\n\t/*\r\n\t * \r\n\t */\r\n\tconst _onDevicesChange = d => devices.current = d;\r\n\tconst _onSettingsChange = s => settings.current = s;\r\n\tconst _onLayoutsChange = (l = null, s = {}) => {\r\n\t\tif (l) {\r\n\t\t\tlayout.current = l\r\n\t\t}\r\n\t\t\r\n\t\tsettings.current = { ...settings.current, ...s }\r\n\t}\r\n\t\r\n\t/*\r\n\t *\r\n\t */\r\n\tconst onRawChange = (props, val) => {\r\n\t\t\r\n\t\ttry {\r\n\t\t\tsetErrors(prevErrors => {\r\n\t\t\t\tlet nextErrors = { ...prevErrors }\r\n\t\t\t\tdelete nextErrors[props.id];\r\n\t\t\t\treturn nextErrors;\r\n\t\t\t});\r\n\t\t\t\r\n\t\t\tval = JSON.parse(val);\r\n\t\t\tif (props.type === 'devices') {\r\n\t\t\t\t_onDevicesChange(val);\r\n\t\t\t}\r\n\t\t\telse if (props.type === 'layout') {\r\n\t\t\t\t_onLayoutsChange(val);\r\n\t\t\t}\r\n\t\t\telse if (props.type === 'settings') {\r\n\t\t\t\t_onSettingsChange(val);\r\n\t\t\t}\r\n\t\t}\r\n\t\tcatch(err) {\r\n\t\t\tsetErrors(prevErrors => ({\r\n\t\t\t\t...prevErrors,\r\n\t\t\t\t[props.id]: i18n.t('Invalid JSON format')\r\n\t\t\t}));\r\n\t\t}\r\n\t}\r\n\t\r\n\t/**\r\n\t * \r\n\t */\r\n\tconst _handleTabChange = (event, tab) => setTab(tab);\r\n\t\r\n\t/**\r\n\t *\r\n\t */\r\n\tconst _cancel = () => props.navigate('home');\r\n\t\r\n\t/**\r\n\t *\r\n\t */\r\n\tconst _save = () => {\r\n\t\tsetSaving(true);\r\n\t\t\r\n\t\tconst socket = Connection.getConnection;\r\n\t\tconst result = [\r\n\t\t\tsocket.setState(config.get('NODE_SETTINGS'), JSON.stringify(settings.current)),\r\n\t\t\tsocket.setState(config.get('NODE_LAYOUT'), JSON.stringify(layout.current)),\r\n\t\t\tsocket.setState(config.get('NODE_DEVICES'), JSON.stringify(devices.current))\r\n\t\t];\r\n\t\t\r\n\t\tPromise.all(result)\r\n\t\t\t.then(() => window.location.reload())\r\n\t\t\t.catch(err => console.error(err));\r\n\t}\r\n\t\r\n\t/*\r\n\t *\r\n\t */\r\n\tconst classes = useStyles();\r\n\t\r\n\treturn (\r\n\t\t<Dialog\r\n\t\t\tclasses={{ CustomDialog: classes.pinToTop }}\r\n\t\t\tfullWidth={true}\r\n\t\t\tmaxWidth={false}\r\n\t\t\t\r\n\t\t\topen={(props.page === 'configuration')}\r\n\t\t\tonClose={_cancel}\r\n\t\t\t\r\n\t\t\theader={[\r\n\t\t\t\t<Typography key=\"header\" variant=\"h6\">\r\n\t\t\t\t\t{i18n.t('Configuration')}\r\n\t\t\t\t\t<Inputs.SwitchInline\r\n\t\t\t\t\t\tkey=\"Input-expertMode\"\r\n\t\t\t\t\t\tid=\"expertMode\"\r\n\t\t\t\t\t\tsize=\"small\"\r\n\t\t\t\t\t\tlabel='Expert mode'\r\n\t\t\t\t\t\tonChange={(key, val) => {\r\n\t\t\t\t\t\t\tsetExpertMode(val);\r\n\t\t\t\t\t\t\tsetTab(prevTab => val ? prevTab + 'Raw' : prevTab.substr(0, prevTab.length-3));\r\n\t\t\t\t\t\t}}\r\n\t\t\t\t\t\tval={expertMode}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t</Typography>,\r\n\t\t\t\t\r\n\t\t\t\t<Tabs\r\n\t\t\t\t\tkey=\"tabs\"\r\n\t\t\t\t\tvalue={tab}\r\n\t\t\t\t\tindicatorColor=\"primary\"\r\n\t\t\t\t\ttextColor=\"primary\"\r\n\t\t\t\t\tonChange={_handleTabChange}\r\n\t\t\t\t\t>\r\n\t\t\t\t\t\r\n\t\t\t\t\t{expertMode === true && <Tab value=\"devicesRaw\" label={i18n.t('Devices')} />}\r\n\t\t\t\t\t{expertMode === true && <Tab value=\"layoutRaw\" label={i18n.t('Layout')} />}\r\n\t\t\t\t\t{expertMode === true && <Tab value=\"settingsRaw\" label={i18n.t('Settings')} />}\r\n\t\t\t\t\t{expertMode !== true && <Tab value=\"devices\" label={i18n.t('Devices')} />}\r\n\t\t\t\t\t{expertMode !== true && <Tab value=\"layout\" label={i18n.t('Layout')} />}\r\n\t\t\t\t\t{expertMode !== true && <Tab value=\"settings\" label={i18n.t('Settings')} />}\r\n\t\t\t\t</Tabs>\r\n\t\t\t]}\r\n\t\t\tactions={[\r\n\t\t\t\t<Inputs.Button key='action-cancel' variant=\"text\" onClick={_cancel} color=\"secondary\" label=\"Cancel\" />,\r\n\t\t\t\t<Inputs.Button key='action-save' width=\"auto\" variant=\"contained\" onClick={_save} color=\"primary\" startIcon={null} disabled={saving === true || Object.keys(errors).length > 0} label=\"Save\" />\r\n\t\t\t]}\r\n\t\t\t>\r\n\t\t\t\r\n\t\t\t{/* DEVICES */}\r\n\t\t\t<div hidden={tab !== 'devices'} style={{ width: '100%' }}>\r\n\t\t\t\t{tab === 'devices' && <DevicesListPage\r\n\t\t\t\t\tselected={tab === 'devices'}\r\n\t\t\t\t\t_onLayoutsChange={_onLayoutsChange}\r\n\t\t\t\t\t_onDevicesChange={_onDevicesChange}\r\n\t\t\t\t\tlayout={layout}\r\n\t\t\t\t\tdevices={devices.current}\r\n\t\t\t\t\t/>}\r\n\t\t\t\t\r\n\t\t\t</div>\r\n\t\t\t<ExpertPage\r\n\t\t\t\texpertMode={expertMode}\r\n\t\t\t\ttab={tab}\r\n\t\t\t\terrors={errors}\r\n\t\t\t\ttype='devices'\r\n\t\t\t\tonRawChange={onRawChange}\r\n\t\t\t\tval={devices.current}\r\n\t\t\t\t/>\r\n\t\t\t\r\n\t\t\t\r\n\t\t\t{/* LAYOUT */}\r\n\t\t\t<div hidden={tab !== 'layout'} style={{ width: '100%' }}>\r\n\t\t\t\t<Paper>\r\n\t\t\t\t\t<Typography className={classes.title} variant=\"h6\">\r\n\t\t\t\t\t\t{i18n.t('Layout')}\r\n\t\t\t\t\t</Typography>\r\n\t\t\t\t</Paper>\r\n\t\t\t\t{tab === 'layout' && <LayoutsPage\r\n\t\t\t\t\tselected={tab === 'layout'}\r\n\t\t\t\t\t_onLayoutsChange={_onLayoutsChange}\r\n\t\t\t\t\tlayout={layout.current}\r\n\t\t\t\t\tdevices={devices.current}\r\n\t\t\t\t\tsettings={settings.current}\r\n\t\t\t\t\t/>}\r\n\t\t\t\t\r\n\t\t\t</div>\r\n\t\t\t<ExpertPage\r\n\t\t\t\texpertMode={expertMode}\r\n\t\t\t\ttab={tab}\r\n\t\t\t\terrors={errors}\r\n\t\t\t\ttype='layout'\r\n\t\t\t\tonRawChange={onRawChange}\r\n\t\t\t\tval={layout.current}\r\n\t\t\t\t/>\r\n\t\t\t\r\n\t\t\t\r\n\t\t\t{/* SETTINGS */}\r\n\t\t\t<div hidden={tab !== 'settings'} style={{ width: '100%' }}>\r\n\t\t\t\t<Paper className={classes.title}>\r\n\t\t\t\t\t<Typography variant=\"h6\">\r\n\t\t\t\t\t\t{i18n.t('Settings')}\r\n\t\t\t\t\t</Typography>\r\n\t\t\t\t</Paper>\r\n\t\t\t\t{tab === 'settings' && <SettingsPage\r\n\t\t\t\t\tselected={tab === 'settings'}\r\n\t\t\t\t\t_onSettingsChange={_onSettingsChange}\r\n\t\t\t\t\tsettings={settings.current}\r\n\t\t\t\t\t/>}\r\n\t\t\t\t\r\n\t\t\t</div>\r\n\t\t\t<ExpertPage\r\n\t\t\t\texpertMode={expertMode}\r\n\t\t\t\ttab={tab}\r\n\t\t\t\terrors={errors}\r\n\t\t\t\ttype='settings'\r\n\t\t\t\tonRawChange={onRawChange}\r\n\t\t\t\tval={settings.current}\r\n\t\t\t\t/>\r\n\t\t\t\r\n\t\t</Dialog>\r\n\t)\r\n});\r\n\r\nexport default ConfigurationPage;\r\n\r\n\r\n/*\r\n *\r\n */\r\nconst ExpertPage = React.memo(props => {\r\n\tconst classes = useStyles();\r\n\tconst { expertMode, tab, errors, type, onRawChange, val } = props;\r\n\t\r\n\tconst [height,setHeight] = useState(200);\r\n\tuseEffect(() => {\r\n\t\tconst rawEditor = document.getElementById(tab) || { scrollHeight: 200 };\r\n\t\tsetHeight(rawEditor.scrollHeight);\r\n\t}, [tab]);\r\n\t\r\n\tif (expertMode !== true) {\r\n\t\treturn null;\r\n\t}\r\n\t\r\n\treturn (\r\n\t\t<div hidden={tab !== (type + 'Raw')} style={{ width: '100%' }}>\r\n\t\t\t<Paper className={classes.paper}>\r\n\t\t\t\t<Typography className={classes.title} variant=\"h6\">\r\n\t\t\t\t\t{i18n.t('JSON Editor') + ' ' + i18n.t(ucFirst(type))}\r\n\t\t\t\t</Typography>\r\n\t\t\t\t<Inputs.Text\r\n\t\t\t\t\tinputId={type + 'Raw'}\r\n\t\t\t\t\tlabel={['JSON Editor', (errors[type + 'Raw'] !== undefined ? ' (' + errors[type + 'Raw'] + ')' : '')]}\r\n\t\t\t\t\tInputProps={{ disableUnderline: true, className: classes.rawEditor }}\r\n\t\t\t\t\tinputProps={{ style: { height: height } }}\r\n\t\t\t\t\tmultiline\r\n\t\t\t\t\twidth=\"99%\"\r\n\t\t\t\t\terror={errors[type + 'Raw'] !== undefined}\r\n\t\t\t\t\tonChange={(props, val) => onRawChange({ ...props, type: type }, val)}\r\n\t\t\t\t\tval={JSON.stringify(val || {}, null, 3)}\r\n\t\t\t\t\t/>\r\n\t\t\t\t\r\n\t\t\t</Paper>\r\n\t\t</div>\r\n\t);\r\n});","import React from 'react'\r\n//import clsx from 'clsx'\r\n\r\nimport i18n from '../../controller/i18n'\r\n\r\nimport Dialog from '../../components/Dialog'\r\n\r\nimport Button from '@material-ui/core/Button'\r\nimport Paper from '@material-ui/core/Paper'\r\nimport Grid from '@material-ui/core/Grid'\r\nimport Link from '@material-ui/core/Link'\r\nimport Typography from '@material-ui/core/Typography'\r\n\r\n\r\n/*\r\n * STYLES\r\n */\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nconst useStyles = makeStyles(theme => ({\r\n\tPaper: {\r\n\t\tpadding: theme.spacing(2)\r\n\t},\r\n\tAvatar: {\r\n\t\tborderRadius: '50%',\r\n\t\tborder: '3px solid #eee'\r\n\t}\r\n}));\r\n\r\n\r\nconst md = require('markdown-it')();\r\ni18n.setTranslations(language => require('./i18n/' + language));\r\n\r\nexport default function DonationPage(props) {\r\n\tconst classes = useStyles();\r\n\t\r\n\tconst zefau = require('../../images/zefau.jpg');\r\n\tconst paypal = require('../../images/paypal.webp');\r\n\t\r\n\tconst donationText = ['donation#TextFeatures', 'donation#TextBugs', 'donation#TextFeedback', 'donation#TextSupport', 'donation#TextGreetings'].map(text => <div dangerouslySetInnerHTML={{ __html: md.render(i18n.t(text)) }} />);\r\n\t\r\n\treturn (\r\n\t\r\n<Dialog\r\n\tfullWidth\r\n\tmaxWidth=\"md\"\r\n\topen={(props.page === 'donation')}\r\n\tonClose={() => props.navigate('home')}\r\n\t\r\n\tdisableBackdropClick={false}\r\n\tdisableEscapeKeyDown={false}\r\n\t\r\n\theader={i18n.t('Support the development of jarvis')}\r\n\tactions={\r\n\t\t<Button onClick={() => props.navigate('home')} color=\"primary\">\r\n\t\t\t{i18n.t('Close')}\r\n\t\t</Button>\r\n\t}\r\n\t>\r\n\t\r\n\t<Paper classes={{ root: classes.Paper }}>\r\n\t\t<Grid container>\r\n\t\t\t<Grid container item xs={3} justify=\"center\">\r\n\t\t\t\t<img alt=\"Zefau\" src={zefau} className={classes.Avatar} width=\"126\" height=\"126\" />\r\n\t\t\t</Grid>\r\n\t\t\t<Grid item xs={9}>\r\n\t\t\t\t<Typography>\r\n\t\t\t\t\t<Link target=\"_blank\" href=\"https://forum.iobroker.net/user/zefau\">@Zefau (Profil)</Link> | <Link target=\"_blank\" href=\"https://zefau.github.io/iobroker/\">{i18n.t('Overview of my adapters')}</Link><br />\r\n\t\t\t\t\t<br />\r\n\t\t\t\t\t\r\n\t\t\t\t\t<strong>{i18n.t('donation#TextIntro')}</strong><br />\r\n\t\t\t\t\t{donationText}\r\n\t\t\t\t\t\r\n\t\t\t\t</Typography>\r\n\t\t\t\t\r\n\t\t\t\t<Link target=\"_blank\" href=\"https://paypal.me/chvoelkel\">\r\n\t\t\t\t\t<img alt=\"Paypal\" src={paypal} />\r\n\t\t\t\t</Link>\r\n\t\t\t</Grid>\r\n\t\t</Grid>\r\n\t</Paper>\r\n\t\r\n</Dialog>\r\n\r\n\t);\r\n}\r\n","\r\nexport default {\r\n\tconfiguration: require('./ConfigurationPage').default,\r\n\tdonation: require('./DonationPage').default,\r\n\tlogs: require('./LogsPage/LogsPage').default,\r\n}"],"sourceRoot":""}