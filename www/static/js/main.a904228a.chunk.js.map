{"version":3,"sources":["Log.js","helpers/timeConverter.js","modules/StateListItem.js","modules/StateList.js","components/EnhancedTableToolbar.js","components/EnhancedTableHead.js","components/EnhancedTableBody.js","components/EnhancedTable.js","functions/door/door.js","functions/heating/heating.js","functions/location/location.js","functions/user/user.js","functions/window/window.js","helpers/colorConverter.js","functions/light/light.js","functions/blind/blind.js","functions/blind/blind-manufacturers.js","functions/blind/index.js","functions/blind/blind.de.js","functions/blind/blind.en.js","functions/door/door.de.js","functions/door/door.en.js","functions/heating/heating.de.js","functions/heating/heating.en.js","Settings.js","functions/light/light.de.js","functions/light/light.en.js","functions/location/location.de.js","functions/location/location.en.js","functions/user/user.de.js","functions/user/user.en.js","functions/window/window.de.js","functions/window/window.en.js","modules/AdapterStatus.js","modules/Chart.js","modules/DateTime.js","modules/Map.js","modules/StateListHorizontal.js","modules/Weather.js","modules/MultimediaItem.js","modules/Multimedia.js","i18n sync /^/.*/.js$","i18n/de.js","i18n/en.js","functions/blind sync /^/blind/..*$","functions/door/index.js","functions/door sync /^/door/..*$","functions/heating/index.js","functions/heating sync /^/heating/..*$","functions/light/index.js","functions/defaults.js","Socket.js","Connection.js","functions/light sync /^/light/..*$","functions/location/index.js","functions/location sync /^/location/..*$","functions/user/index.js","functions/user sync /^/user/..*$","functions/window/index.js","functions/window sync /^/window/..*$","pages/SettingsPage.js","pages/LogsPage.js","i18n.js","components/GridContainer.js","components/StatusSnackbar.js","config/config.dev.js","functions/index.js","Function.js","config/adapters.js","Device.js","pages/index.js","components/TopBar.js","helpers/useWindowDimensions.js","components/TabBar.js","components/Notifications.js","modules/index.js","components/Popup.js","components/Widget.js","Jarvis.js","App.js","serviceWorker.js","index.js","config/config.js"],"names":["Log","module","message","criticality","printToConsole","stack","Array","isArray","forEach","entry","log","push","time","Date","console","timeToSeconds","toString","indexOf","split","length","hours","minutes","seconds","parseInt","timeToHoursMinutesSeconds","withHours","Number","isNaN","Math","floor","substr","join","secondsToDateTime","dateTimeFormat","format","locale","locales","i18n","getLanguage","styles","theme","defaultListDivider","margin","defaultListIcon","props","components","icon","horizontalListItem","display","textAlign","paddingRight","width","marginTop","horizontalListItemIcon","minWidth","horizontalListItemAction","top","right","position","transform","verticalListItemAction","ListItemIconElement","withStyles","customClassNames","children","classes","classNames","map","className","clsx","StateListItem","stateChange","stateKey","state","device","primaryStateKey","secondaryStateKey","setState","ListItemTextWidth","getDeviceState","ListItemText","React","createRef","ListItemSecondaryAction","this","current","offsetWidth","resizeComponent","listen","unlisten","ListItemSecondaryActionWidth","openDialog","horizontal","component","action","options","get","getIcon","val","value","primaryComponent","getComponent","primaryAction","getAction","secondaryAction","Fragment","divider","ListItem","finger","button","onClick","bind","ListItemIcon","getStyle","ref","disableTypography","primary","getOption","secondary","subtitle","timeChanged","style","flex","key","id","Component","defaultListSectionDivider","defaultListSectionDividerItem","padding","defaultListSectionText","breakpoints","down","horizontalList","flexDirection","flexWrap","ListDivider","getDevicesBySubgroup","subgroup","title","subgroupActions","handleChange","targetStatus","status","setDeviceState","ButtonGroup","color","size","Button","t","StateList","devices","settings","List","dense","i","listSection","listItem","useToolbarStyles","makeStyles","root","paddingLeft","spacing","highlight","palette","type","main","backgroundColor","lighten","light","text","dark","EnhancedTableToolbar","numSelected","Toolbar","Typography","variant","undefined","Tooltip","IconButton","aria-label","EnhancedTableHead","headCells","onSelectAllClick","selectable","order","orderBy","rowCount","onRequestSort","TableHead","TableRow","TableCell","Checkbox","indeterminate","checked","onChange","inputProps","headCell","align","disablePadding","sortDirection","TableSortLabel","active","direction","property","event","label","visuallyHidden","useStyles","noWrap","whiteSpace","nestedObjects","seen","EnhancedTable","columns","pageRows","emptyRows","rowStyles","selected","row","index","isItemSelected","labelId","columnId","rowStyle","Object","keys","hover","role","aria-checked","tabIndex","column","scope","content","toLowerCase","JSON","stringify","showTableContent","height","colSpan","paper","marginBottom","table","border","clip","overflow","descendingComparator","a","b","getComparator","stableSort","array","comparator","stabilizedThis","el","sort","CustomTableBody","rows","pagination","defaultOrder","defaultOrderBy","defaultSelected","defaultPage","defaultRowsPerPage","useState","setOrder","setOrderBy","setSelected","page","setPage","rowsPerPage","setRowsPerPage","TableBody","EnhancedTableBody","TableContainer","Table","aria-labelledby","target","newSelecteds","n","slice","min","selectedIndex","newSelected","concat","TablePagination","rowsPerPageOptions","count","onChangePage","newPage","onChangeRowsPerPage","translations","require","default","setTranslation","configurations","open","true","false","lock","actions","temperature","toFixed","unit","setTemperature","humidity","boost","Level","defaults","LevelComponent","max","PowerAction","presence","users","location","battery","HsvToRgb","h","r","g","f","p","q","s","v","round","RgbToHex","LightColorAction","stateVal","colorSpace","setColorSpace","useEffect","colors","labels","Red","Green","Blue","Hue","Saturation","Brightness","Label","br","LightColorComponent","initialColor","helpers","onChangeComplete","e","catch","err","_","power","level","colorTemperature","hue","rgb","hsv","hex","step","setHue","hsl","setChecked","parent","states","Action","_any","float","lineHeight","marginRight","borderLeftTransparent","borderLeftColor","alpha","borderRightTransparent","borderRightColor","borderRightColorSecondary","level2","activity","manufacturer","getActivityType","setLevel","sKey","d","setActivity","requestDeviceState","disabled","Settings","setting","language","setLanguage","loadTranslation","pageTitle","document","pageFavicon","getElementById","href","AdapterStatus","adapterInformation","adapterAliveStatus","newUpdates","updatesJson","lastUpdateCheck","socket","Connection","getConnection","list","blacklist","updateStates","adapterStates","updates","getStates","subscribeStates","update","lastIndexOf","getAdapterInstances","instances","adapters","instance","common","name","replace","item1","item2","aliveStatus","prevState","unsubscribeStates","updateList","parse","adapterList","loading","adapter","enabled","alive","connected","connection","tooltip","alt","src","extIcon","small","version","availableVersion","UpdateAvailable","runAsCompactMode","compactGroup","StatusIndicator","notAlive","noUpdates","container","UpdatesListItem","UpdatesIndicator","ModuleSettings","noDevicesAllowed","fontStyle","borderRadius","fontSize","Chart","historyChange","history","addChartGraph","axis","getAxis","start","end","updateChartGraph","chartFilter","chartConfig","yAxes","unshift","ticks","callback","yLeftAxisUnitBefore","parseFloat","yLeftAxisUnitAfter","errors","datePicker","selectedTimeRangeValue","selectedTimeRangeUnit","selectedDateTime","dateNow","chartLabels","chartData","datasets","chartPan","chartZoom","timer","timeRangeRef","chartRef","chartUpdates","chartOptions","maintainAspectRatio","spanGaps","legend","legendClickHandler","tooltips","callbacks","item","data","datasetIndex","scales","plugins","colorschemes","scheme","zoom","pan","mode","getTimeRange","requestDeviceStateHistory","liveUpdates","prevProps","clearTimeout","setTimeout","getTime","timeRange","axisTimeFormat","prevMarker","markers","marker","ts","reduce","chartIndex","findIndex","groupChartData","chartInstance","values","error","prevStates","dataSet","fill","graphConfig","legendItem","ci","meta","getDatasetMeta","hidden","resetZoom","inputRef","input","displayEmpty","disableUnderline","select","utils","DateFnsUtils","onOpen","onClose","ampm","InputProps","iconButton","dividerVertical","orientation","placement","buttonDisabled","toolbar","errorMessage","severity","createElement","toolbarButtons","disableElevation","chartHeight","alignItems","justifyContent","marginLeft","DateTime","refTimer","useRef","setDateTime","city","setCity","sunrise","setSunrise","sunset","setSunset","refresh","getSetting","latitude","longitude","getSunrise","getSunset","sun","mapOverview","left","bottom","zIndex","cursor","mapIconContainer","mapIconParent","boxShadow","mapIcon","mapTooltip","Map","defaultZoom","defaultPosition","setMarkers","memoizedMapInitialised","useCallback","memoizedHandleClick","flyTo","prevMarkers","mapMarkers","Marker","attributes","avatar","arrow","useFlyTo","center","whenReady","attribution","url","markerIcon","offset","function","L","divIcon","html","iconSize","memoizedHandleMouseEvent","closeTooltip","openTooltip","riseOnHover","onMouseOver","tooltipDirection","permanent","tooltipPermanent","StateListHorizontal","Weather","setData","getRemoteResource","then","response","statusCode","body","weatherForecast","day","forecast","dailyForecast","date","justify","Multimedia","progress","progressTimeout","isRunning","duration","noHeader","styleImage","styleLengthBar","background","backgroundImage","backgroundUrlPrepend","playIconElements","Divider","image","noImage","information","informationLeft","grandParent","informationRight","lengthBar","controls","controlsBox","controlsBoxLeft","controlsBoxCenter","Fab","controlButton","controlsBoxRight","backgroundPosition","minHeight","paddingTop","controlButtonSmall","MultimediaItem","webpackContext","req","webpackContextResolve","__webpack_require__","o","Error","code","resolve","exports","sliderMarkLabel","parentOnChange","TriggerAction","startIcon","linebreak","markSteps","markStep","markLabel","onChangeCommitted","valueLabelDisplay","marks","number","door","trigger","wind","Socket","io","timeout","query","statesSubscribes","on","emit","attempts","reason","pattern","ids","cb","subscribeState","cbs","reg","_getPatternFromId","RegExp","task","hasOwnProperty","test","getObjectView","Promise","reject","getObject","obj","design","search","params","getState","getStateHistory","unsubscribeState","EventEmitter","listeners","setUrl","setListeners","connect","listener","setListener","window","hostname","SettingsPage","handleTabChange","tab","handlePanelChange","panel","isExpanded","handleSwitchChange","userInput","handleTextChange","save","setSettings","NODES","SETTINGS","reload","renderTableForDevices","iobroker","deviceId","option","formControl","helperText","textField","placeholder","control","renderSettingForText","renderSettingForSwitch","renderSettingForSelect","renderSetting","expanded","expandIcon","heading","description","secondaryHeading","panels","config","renderPanel","closeButton","dialogContent","square","tabs","indicatorColor","textColor","rawEditor","multiline","fullWidth","autoFocus","typography","pxToRem","flexBasis","flexShrink","grey","fontFamily","LogsPage","logs","getLog","de","languages","translation","isoLong","word","placeholders","parts","shift","ucFirst","charAt","toUpperCase","navigator","userLanguage","gridContainer","GridContainer","contents","grid","Grid","xs","sm","md","lg","xl","success","green","info","warning","amber","iconVariant","opacity","variantIcon","CheckCircleIcon","WarningIcon","ErrorIcon","InfoIcon","StatusSnackbar","autoHideDuration","other","Icon","Snackbar","anchorOrigin","vertical","SnackbarContent","blind","heating","jalousie","user","Function","functionType","functionId","functions","defaultStyles","_isFunction","defaultValue","Device","deviceProperties","room","_setProperties","stateSubscriptions","stateType","node","attribute","stateValKeys","stateValKey","stateValValue","tmp","ignoredStates","ignoredState","hiddenStates","hideStates","hideState","stateOrAttribute","_getStateFromKey","Adapters","groups","group","formatDistanceToNow","lc","includeSeconds","addSuffix","_getConfigurationSetting","pair","_getUserSetting","forceDefault","stateProperty","deviceState","defaultIcon","eventName","subscribe","responses","_updateDeviceState","subscribeDeviceState","historyCache","res","child","off","appBar","flexGrow","menuButton","transition","userSelect","TopBar","connectionStatus","navigate","toggleDrawer","notifications","connectionStatusIcon","connectionStatusTooltip","AppBar","getWindowDimensions","innerWidth","innerHeight","paddingBottom","borderBottom","fixed","indicator","fullscreen","TabBar","selectTab","tabBarProps","setTab","setFixed","handleScroll","threshold","scrollY","prevFixed","offsetTop","offsetHeight","addEventListener","removeEventListener","renderedTabs","Tab","Tabs","selectedTab","TabPanel","renderedTab","windowDimensions","setWindowDimensions","handleResize","useWindowDimensions","mapHeight","setMapHeight","topBarHeight","setHidden","Box","Notifications","Drawer","anchor","drawer","DialogTitle","DialogContent","MuiDialogContent","DialogActions","MuiDialogActions","Popup","forceUpdate","allSettled","nextProps","nextState","closeDialog","Dialog","maxWidth","dividers","card","cardHeaderNoContents","cardAvatar","cardContent","Widget","iconStyle","Card","CardHeader","Avatar","CardContent","getGroup","groupId","Tag","Modules","getGridContents","gridContents","columnContents","Jarvis","tabTitle","notificationDrawer","notificationsUnread","dialog","dialogContents","layout","tabsEnabled","widgetProps","filter","notification","unread","tabPanels","tabLabel","tabPanel","now","Page","Pages","topBarTitle","getTabPanels","App","loaded","errorHandler","reconnect","port","protocol","applySettings","DEVICES","processDevices","promises","results","result","deviceList","groupedDevices","jarvis","processDevice","groupDevice","CircularProgress","topBar","tabBar","gridColumns","SkeletonLoader","Skeleton","animation","gridItem","loaders","random","loader","renderError","renderLoadingProgress","renderLoadingSkeleton","ThemeProvider","Boolean","match","ReactDOM","render","serviceWorker","ready","registration","unregister","pageSettings","en","tabSettings","tabsHideLabels","themeSettings","themeColorPrimary","themeColorSecondary"],"mappings":"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","file":"static/js/main.a904228a.chunk.js","sourcesContent":["/**\r\n * Settings\r\n *\r\n *\r\n */\r\nexport default class Log {\r\n\r\n\t/*\r\n\t * holds the log\r\n\t */\r\n\tstatic log = [];\r\n\r\n\t/**\r\n\t * Add a message to the log\r\n\t *\r\n\t * @param\t{String}\t\tmodule\t\t\t\t\t\tModule (origin) of log message\r\n\t * @param\t{String|Array}\tmessage\t\t\t\t\t\tLog message\r\n\t * @param\t{String}\t\t[criticality=info]\t\t\tCriticality, one of 'debug', 'info', 'warn' or 'error'\r\n\t * @param\t{Boolean}\t\t[printToConsole=false]\t\tPrint log message to console\r\n\t * @param\t{Object}\t\t[stack={}]\t\t\t\t\tStack trace of error message\r\n\t * @return\t{Log}\r\n\t */\r\n\tstatic _(module, message, criticality = 'info', printToConsole = true, stack = {}) {\r\n\t\tmessage = Array.isArray(message) ? message : [message];\r\n\t\t\r\n\t\tmessage.forEach(entry => {\r\n\t\t\tLog.log.push({\r\n\t\t\t\ttime: new Date(),\r\n\t\t\t\tmodule,\r\n\t\t\t\tcriticality,\r\n\t\t\t\tmessage: entry,\r\n\t\t\t\tstack\r\n\t\t\t});\r\n\t\t});\r\n\t\t\r\n\t\tif (printToConsole) {\r\n\t\t\tmessage[0] = module + ' # ' + message[0];\r\n\t\t\tconsole[criticality](...message); // https://nodejs.org/docs/latest/api/console.html\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * Gets the log\r\n\t *\r\n\t * @param\tvoid\r\n\t * @return\t{Array}\r\n\t */\r\n\tstatic getLog() {\r\n\t\treturn Log.log;\r\n\t}\r\n}\r\n","import { format } from 'date-fns'\r\nimport i18n, { locales } from '../i18n'\r\n\r\n/**\r\n *\r\n *\r\n */\r\nfunction timeToSeconds(time) {\r\n\t\r\n\tif (time.toString().indexOf(':') > -1) {\r\n\t\ttime = time.toString();\r\n\t\tlet format = time.split(':').length-1;\r\n\t\tlet [ hours, minutes, seconds ] = format > 1 ? time.split(':') : ('0:' + time).split(':');\r\n\t\ttime = parseInt(hours) * 3600 + parseInt(minutes) * 60 + parseInt(seconds);\r\n\t}\r\n\t\r\n\treturn parseInt(time);\r\n}\r\n\r\n/**\r\n *\r\n *\r\n */\r\nfunction timeToHoursMinutesSeconds(time, withHours = false) {\r\n\t\r\n\tif (time.toString().indexOf(':') > -1) {\r\n\t\treturn time;\r\n\t}\r\n\t\r\n\ttime = parseInt(time);\r\n\twithHours = withHours || (time > 3600);\r\n\t\r\n\tif (Number.isNaN(time)) {\r\n\t\treturn withHours ? '00:00:00' : '00:00';\r\n\t}\r\n\t\r\n\tlet hours = '0' + Math.floor(time/3600);\r\n\tlet minutes = '0' + Math.floor(time/60);\r\n\tlet seconds = '0' + (time % 60);\r\n\t\r\n\treturn withHours ? [ hours.substr(-2), minutes.substr(-2), seconds.substr(-2) ].join(':') : [ minutes.substr(-2), seconds.substr(-2) ].join(':');\r\n}\r\n\r\n/**\r\n *\r\n *\r\n */\r\nfunction secondsToDateTime(seconds, dateTimeFormat = 'dd. MMM yyyy, HH:mm') {\r\n\treturn format(new Date(seconds*1000), dateTimeFormat, { locale: locales[i18n.getLanguage()] });\r\n}\r\n\r\n\r\nexport default {\r\n\ttimeToSeconds,\r\n\ttimeToHoursMinutesSeconds,\r\n\tsecondsToDateTime\r\n}","import React from 'react'\r\nimport clsx from 'clsx'\r\n\r\nimport ListItem from '@material-ui/core/ListItem'\r\nimport ListItemIcon from '@material-ui/core/ListItemIcon'\r\nimport ListItemSecondaryAction from '@material-ui/core/ListItemSecondaryAction'\r\nimport ListItemText from '@material-ui/core/ListItemText'\r\n\r\n\r\n/*\r\n * STYLES\r\n */\r\nimport { withStyles } from '@material-ui/core/styles';\r\nconst styles = theme => ({\r\n\tdefaultListDivider: {\r\n\t\tmargin: '0 0 5px 0'\r\n\t},\r\n\tdefaultListIcon: props => ({\r\n\t\t...theme.components.icon,\r\n\t\t...props.styles\r\n\t}),\r\n\thorizontalListItem: {\r\n\t\tdisplay: 'inline-block',\r\n\t\ttextAlign: 'center',\r\n\t\tpaddingRight: '16px',\r\n\t\twidth: '140px',\r\n\t\tmarginTop: '10px'\r\n\t},\r\n\thorizontalListItemIcon: {\r\n\t\tminWidth: 'auto'\r\n\t},\r\n\thorizontalListItemAction: {\r\n\t\ttextAlign: 'center',\r\n\t\ttop: 0,\r\n\t\tright: 0,\r\n\t\tposition: 'static',\r\n\t\ttransform: 'none',\r\n\t},\r\n\tverticalListItemAction: {\r\n\t\ttextAlign: 'right'\r\n\t},\r\n});\r\n\r\n\r\nconst ListItemIconElement = withStyles(styles)(props => {\r\n\tconst { customClassNames, children, classes } = props;\r\n\t\r\n\tlet classNames = Array.isArray(customClassNames) ? customClassNames : [customClassNames];\r\n\tclassNames = classNames.map(className => (classes[className] ? classes[className] : className));\r\n\t\r\n\treturn <span className={clsx(classNames)}>{children}</span>\r\n});\r\n\r\n\r\nclass StateListItem extends React.Component {\r\n\t\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\t\r\n\t\tthis.state = {\r\n\t\t\tListItemTextWidth: '100%'\r\n\t\t}\r\n\t\t\r\n\t\tthis.state[this.props.device.primaryStateKey] = this.props.device.getDeviceState() || {}\r\n\t\t\r\n\t\tif (this.props.device.secondaryStateKey) {\r\n\t\t\tthis.state[this.props.device.secondaryStateKey] = this.props.device.getDeviceState(this.props.device.secondaryStateKey) || {}\r\n\t\t}\r\n\t\t\r\n\t\tthis.ListItemText = React.createRef();\r\n\t\tthis.ListItemSecondaryAction = React.createRef();\r\n\t}\r\n\t\r\n\tcomponentDidMount() {\r\n\t\tthis.ListItemTextWidth = Math.floor(this.ListItemText.current.offsetWidth);\r\n\t\tthis.resizeComponent();\r\n\t\t\r\n\t\t// get state changes\r\n\t\tthis.props.device.listen(this.stateChange);\r\n\t}\r\n\t\r\n\tcomponentWillUnmount() {\r\n\t\tthis.props.device.unlisten(this.stateChange);\r\n\t}\r\n\t\r\n\tcomponentDidUpdate() {\r\n\t\tthis.resizeComponent();\r\n\t}\r\n\t\r\n\tstateChange = (stateKey, state) => {\r\n\t\tif (stateKey === this.props.device.primaryStateKey || stateKey === this.props.device.secondaryStateKey) {\r\n\t\t\tthis.setState({ [stateKey]: state });\r\n\t\t}\r\n\t}\r\n\t\r\n\tresizeComponent() {\r\n\t\tconst ListItemSecondaryActionWidth = Math.floor(this.ListItemSecondaryAction.current.offsetWidth*1.08);\r\n\t\t\r\n\t\tif (this.state.ListItemSecondaryActionWidth !== ListItemSecondaryActionWidth) {\r\n\t\t\tthis.setState({\r\n\t\t\t\tListItemSecondaryActionWidth: ListItemSecondaryActionWidth,\r\n\t\t\t\tListItemTextWidth: this.ListItemTextWidth-ListItemSecondaryActionWidth + 'px'\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\t\r\n\topenDialog() {\r\n\t\tthis.props.openDialog(this.props.device);\r\n\t}\r\n\t\r\n\trender() {\r\n\t\tconst { classes, horizontal, device, component, action } = this.props;\r\n\t\t\r\n\t\tconst state = this.state[device.primaryStateKey];\r\n\t\tconst options = device.get('options');\r\n\t\t\r\n\t\tconst icon = device.getIcon(device.primaryStateKey, state.val) || device.getIcon(device.primaryStateKey, state.value);\r\n\t\tconst primaryComponent = component && device.getComponent();\r\n\t\tconst primaryAction = device.getAction(device.primaryStateKey, device.options.primaryAction === false);\r\n\t\tconst secondaryAction = action && this.state[device.secondaryStateKey] ? device.getAction(device.secondaryStateKey) : null;\r\n\t\t\r\n\t\treturn (\r\n\r\n<React.Fragment>\r\n\t\r\n\t{options.divider && options.divider !== 'after' && <ListItem divider className={classes.defaultListDivider} />}\r\n\t\r\n\t<ListItem\r\n\t\tclassName={clsx(this.props.openDialog && classes.finger, horizontal && classes.horizontalListItem)}\r\n\t\tbutton={this.props.openDialog !== null}\r\n\t\tonClick={this.props.openDialog && this.openDialog.bind(this)}\r\n\t\t>\r\n\t\t\r\n\t\t<ListItemIcon className={clsx(horizontal && classes.horizontalListItemIcon)}>\r\n\t\t{icon === null ? <React.Fragment /> :\r\n\t\t\t<ListItemIconElement customClassNames={['defaultListIcon','mdi mdi-' + icon]} styles={device.getStyle('icon', device.primaryStateKey, state.val)} />\r\n\t\t}\r\n\t\t</ListItemIcon>\r\n\t\t\r\n\t\t<ListItemText\r\n\t\t\tref={this.ListItemText}\r\n\t\t\tdisableTypography={primaryComponent !== false}\r\n\t\t\tprimary={primaryComponent || device.getOption('label')}\r\n\t\t\tsecondary={(options.subtitle !== null ? (options.subtitle || (state && state.timeChanged) || null) : null)}\r\n\t\t\tstyle={{ flex: 'initial', width: this.state.ListItemTextWidth }}\r\n\t\t\t/>\r\n\t\t\r\n\t\t<ListItemSecondaryAction\r\n\t\t\tref={this.ListItemSecondaryAction}\r\n\t\t\tclassName={ horizontal ? classes.horizontalListItemAction : classes.verticalListItemAction }\r\n\t\t\t>\r\n\t\t\t\r\n\t\t\t{!secondaryAction ? primaryAction : [ primaryAction, <br key={'br_' + device.id} />, secondaryAction ]}\r\n\t\t</ListItemSecondaryAction>\r\n\t</ListItem>\r\n\t\r\n\t{options.divider && options.divider === 'after' && <ListItem divider style={{margin: '5px 0'}} />}\r\n\t\r\n</React.Fragment>\r\n\r\n\t\t);\r\n\t}\r\n}\r\n\r\nexport default withStyles(styles)(StateListItem);\r\n","import React from 'react'\r\nimport i18n from '../i18n'\r\n\r\nimport List from '@material-ui/core/List'\r\nimport ListItem from '@material-ui/core/ListItem'\r\nimport ListItemSecondaryAction from '@material-ui/core/ListItemSecondaryAction'\r\nimport ListItemText from '@material-ui/core/ListItemText'\r\nimport StateListItem from './StateListItem'\r\nimport Button from '@material-ui/core/Button'\r\nimport ButtonGroup from '@material-ui/core/ButtonGroup'\r\n\r\n\r\n/*\r\n * STYLES\r\n */\r\nimport { withStyles } from '@material-ui/core/styles';\r\nconst styles = theme => ({\r\n\tdefaultListSectionDivider: {\r\n\t\tmargin: '5px 0 0 0'\r\n\t},\r\n\tdefaultListSectionDividerItem: {\r\n\t\tmargin: '6px 0 7px 0',\r\n\t\tpadding: '0 16px !important'\r\n\t},\r\n\tdefaultListSectionText: {\r\n\t\tmargin: 0,\r\n\t\t[theme.breakpoints.down('md')]: {\r\n\t\t\tmargin: '0 0 0 10px',\r\n\t\t}\r\n\t},\r\n\thorizontalList: {\r\n\t\tdisplay: 'flex',\r\n\t\tflexDirection: 'row',\r\n\t\tflexWrap: 'wrap'\r\n\t}\r\n});\r\n\r\n\r\nconst ListDivider = withStyles(styles)(props => {\r\n\tconst { classes, getDevicesBySubgroup, subgroup, title, subgroupActions } = props;\r\n\t\r\n\tconst handleChangeOn = () => handleChange(true);\r\n\tconst handleChangeOff = () => handleChange(false);\r\n\tconst handleChange = targetStatus => {\r\n\t\t\r\n\t\tconst devices = getDevicesBySubgroup(subgroup);\r\n\t\tdevices.forEach(device => {\r\n\t\t\t\r\n\t\t\tlet status = targetStatus;\r\n\t\t\tif (device.primaryStateKey === 'level') {\r\n\t\t\t\tstatus = status ? 100 : 0;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tdevice.setDeviceState(null, status);\r\n\t\t});\r\n\t}\r\n\t\r\n\treturn (\r\n\t\r\n<React.Fragment>\r\n\t<ListItem divider className={classes.defaultListSectionDivider} />\r\n\t<ListItem className={classes.defaultListSectionDividerItem}>\r\n\t\t<ListItemText\r\n\t\t\tclassName={classes.defaultListSectionText}\r\n\t\t\tprimary={title}\r\n\t\t\t/>\r\n\t\t\r\n\t\t<ListItemSecondaryAction>\r\n\t\t{subgroupActions === null || subgroupActions === false ? null :\r\n\t\t\t<ButtonGroup color=\"primary\" size=\"small\">\r\n\t\t\t\t<Button onClick={handleChangeOn}>{i18n.t('on')}</Button>\r\n\t\t\t\t<Button onClick={handleChangeOff}>{i18n.t('off')}</Button>\r\n\t\t\t</ButtonGroup>\r\n\t\t}\r\n\t\t\r\n\t\t</ListItemSecondaryAction>\r\n\t</ListItem>\r\n</React.Fragment>\r\n\t\r\n\t);\r\n});\r\n\r\nclass StateList extends React.Component {\r\n\t\r\n\tgetDevicesBySubgroup(subgroup) {\r\n\t\t\r\n\t\tlet devices = [];\r\n\t\tthis.props.devices.forEach(device => {\r\n\t\t\t\r\n\t\t\tif (subgroup === device.getOption('subgroup')) {\r\n\t\t\t\tdevices.push(device);\r\n\t\t\t}\r\n\t\t});\r\n\t\t\r\n\t\treturn devices;\r\n\t}\r\n\t\r\n\trender() {\r\n\t\tconst { classes, horizontal, devices, settings, component, action, ...props } = this.props;\r\n\t\tlet subgroup;\r\n\t\t\r\n\t\treturn (\r\n\r\n<List dense={true} className={horizontal && classes.horizontalList}>\r\n\t{devices.map((device, i) => {\r\n\t\t\r\n\t\tconst listSection = subgroup !== null && device.options.subgroup !== null && device.options.subgroup !== subgroup && <ListDivider\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tkey={'ListDivider-' + device.get('id')}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tgetDevicesBySubgroup={this.getDevicesBySubgroup.bind(this)}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tsubgroup={device.getOption('subgroup')}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ttitle={device.options.subgroup}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tsubgroupActions={settings.subgroupActions || device.options.subgroupActions}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\r\n\t\tconst listItem = <StateListItem\r\n\t\t\t\t\t\t\t{...props}\r\n\t\t\t\t\t\t\tkey={'StateListItem-' + device.get('id')}\r\n\t\t\t\t\t\t\thorizontal={horizontal}\r\n\t\t\t\t\t\t\tdevice={device}\r\n\t\t\t\t\t\t\tcomponent={component || false}\r\n\t\t\t\t\t\t\taction={action || true}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\r\n\t\tsubgroup = device.getOption('subgroup');\r\n\t\treturn [ listSection, listItem ];\r\n\t})}\r\n</List>\r\n\r\n\t\t);\r\n\t}\r\n}\r\n\r\nexport default withStyles(styles)(StateList);\r\n","/*\r\n * Code by MATERIAL-UI\r\n * @see https://material-ui.com/components/tables/#sorting-amp-selecting\r\n *\r\n */\r\nimport React from 'react'\r\nimport PropTypes from 'prop-types'\r\nimport clsx from 'clsx'\r\n\r\nimport { lighten, makeStyles } from '@material-ui/core/styles'\r\nimport Toolbar from '@material-ui/core/Toolbar'\r\nimport Typography from '@material-ui/core/Typography'\r\nimport IconButton from '@material-ui/core/IconButton'\r\nimport Tooltip from '@material-ui/core/Tooltip'\r\nimport DeleteIcon from '@material-ui/icons/Delete'\r\n\r\n\r\nconst useToolbarStyles = makeStyles(theme => ({\r\n  root: {\r\n    paddingLeft: theme.spacing(2),\r\n    paddingRight: theme.spacing(1),\r\n  },\r\n  highlight:\r\n    theme.palette.type === 'light'\r\n      ? {\r\n          color: theme.palette.secondary.main,\r\n          backgroundColor: lighten(theme.palette.secondary.light, 0.85),\r\n        }\r\n      : {\r\n          color: theme.palette.text.primary,\r\n          backgroundColor: theme.palette.secondary.dark,\r\n        },\r\n  title: {\r\n    flex: '1 1 100%',\r\n  },\r\n}));\r\n\r\nexport default function EnhancedTableToolbar(props) {\r\n  const classes = useToolbarStyles();\r\n  const { title, numSelected } = props;\r\n\r\n  return (\r\n    <Toolbar\r\n      className={clsx(classes.root, {\r\n        [classes.highlight]: numSelected > 0,\r\n      })}\r\n    >\r\n      {numSelected > 0 ? (\r\n        <Typography className={classes.title} color=\"inherit\" variant=\"subtitle1\">\r\n          {numSelected} selected\r\n        </Typography>\r\n      ) : (\r\n        <Typography className={classes.title} variant=\"h6\" id=\"tableTitle\">\r\n\t\t\t{title !== undefined && title}\r\n        </Typography>\r\n      )}\r\n\r\n      {numSelected > 0 && (\r\n        <Tooltip title=\"Delete\">\r\n          <IconButton aria-label=\"delete\">\r\n            <DeleteIcon />\r\n          </IconButton>\r\n        </Tooltip>\r\n      )}\r\n    </Toolbar>\r\n  );\r\n};\r\n\r\nEnhancedTableToolbar.propTypes = {\r\n  numSelected: PropTypes.number.isRequired,\r\n};","/*\r\n * Code by MATERIAL-UI\r\n * @see https://material-ui.com/components/tables/#sorting-amp-selecting\r\n *\r\n */\r\nimport React from 'react'\r\nimport PropTypes from 'prop-types'\r\n\r\nimport TableHead from '@material-ui/core/TableHead'\r\nimport TableRow from '@material-ui/core/TableRow'\r\nimport TableCell from '@material-ui/core/TableCell'\r\nimport TableSortLabel from '@material-ui/core/TableSortLabel'\r\nimport Checkbox from '@material-ui/core/Checkbox'\r\n\r\n\r\nexport default function EnhancedTableHead(props) {\r\n  const { classes, headCells, onSelectAllClick, selectable, order, orderBy, numSelected, rowCount, onRequestSort } = props;\r\n  const createSortHandler = property => event => {\r\n    onRequestSort(event, property);\r\n  };\r\n\r\n  return (\r\n    <TableHead>\r\n      <TableRow>\r\n\t\t{selectable !== false &&\r\n\t\t\t<TableCell padding=\"checkbox\">\r\n\t\t\t  <Checkbox\r\n\t\t\t\tindeterminate={numSelected > 0 && numSelected < rowCount}\r\n\t\t\t\tchecked={rowCount > 0 && numSelected === rowCount}\r\n\t\t\t\tonChange={onSelectAllClick}\r\n\t\t\t\tinputProps={{ 'aria-label': 'select all' }}\r\n\t\t\t  />\r\n\t\t\t</TableCell>\r\n\t\t}\r\n\t\t\r\n        {headCells.map(headCell => (\r\n          <TableCell\r\n            key={headCell.id}\r\n            align={headCell.align || 'left'}\r\n            padding={headCell.disablePadding ? 'none' : 'default'}\r\n            sortDirection={orderBy === headCell.id ? order : false}\r\n          >\r\n            <TableSortLabel\r\n              active={orderBy === headCell.id}\r\n              direction={orderBy === headCell.id ? order : 'asc'}\r\n              onClick={createSortHandler(headCell.id)}\r\n            >\r\n              <strong>{headCell.label}</strong>\r\n              {orderBy === headCell.id ? (\r\n                <span className={classes.visuallyHidden}>\r\n                  {order === 'desc' ? 'sorted descending' : 'sorted ascending'}\r\n                </span>\r\n              ) : null}\r\n            </TableSortLabel>\r\n          </TableCell>\r\n        ))}\r\n      </TableRow>\r\n    </TableHead>\r\n  );\r\n}\r\n\r\nEnhancedTableHead.propTypes = {\r\n  classes: PropTypes.object.isRequired,\r\n  numSelected: PropTypes.number.isRequired,\r\n  onRequestSort: PropTypes.func.isRequired,\r\n  onSelectAllClick: PropTypes.func.isRequired,\r\n  order: PropTypes.oneOf(['asc', 'desc']).isRequired,\r\n  orderBy: PropTypes.string.isRequired,\r\n  rowCount: PropTypes.number.isRequired,\r\n};","/*\r\n * Code by MATERIAL-UI\r\n * @see https://material-ui.com/components/tables/#sorting-amp-selecting\r\n *\r\n */\r\nimport React from 'react'\r\nimport clsx from 'clsx'\r\nimport { format } from 'date-fns'\r\n\r\nimport TableBody from '@material-ui/core/TableBody'\r\nimport TableCell from '@material-ui/core/TableCell'\r\nimport TableRow from '@material-ui/core/TableRow'\r\nimport Checkbox from '@material-ui/core/Checkbox'\r\n\r\n\r\n/*\r\n * STYLES\r\n */\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nconst useStyles = makeStyles(theme => ({\r\n\tnoWrap: {\r\n\t\twhiteSpace: 'nowrap'\r\n\t}\r\n}));\r\n\r\n\r\n// https://stackoverflow.com/questions/9382167/serializing-object-that-contains-cyclic-object-value\r\nfunction nestedObjects(key, val, seen) {\r\n\t\r\n\tif (val !== null && typeof val === 'object') {\r\n\t\tif (seen.indexOf(val) >= 0) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\t\r\n\t\tseen.push(val);\r\n\t}\r\n\t\r\n\treturn val;\r\n}\r\n\r\nfunction showTableContent(content, type = '') {\r\n\t\r\n\tif (content === undefined || content === null) {\r\n\t\treturn '';\r\n\t}\r\n\t\r\n\tlet seen = [];\r\n\tswitch(type.toLowerCase()) {\r\n\t\tcase 'date':\r\n\t\t\tcontent = format(content, 'yyyy-MM-dd HH:mm:ss');\r\n\t\t\tbreak;\r\n\t\t\r\n\t\tdefault:\r\n\t\t\tcontent = Array.isArray(content) || typeof content === 'object' ? JSON.stringify(content, (key, val) => nestedObjects(key, val, seen)) : content;\r\n\t\t\tcontent = typeof content === 'boolean' ? content.toString() : content;\r\n\t\t\tbreak;\r\n\t}\r\n\t\r\n\treturn content;\r\n}\r\n\r\nexport default function EnhancedTable(props) {\r\n\tconst { columns, pageRows, emptyRows, rowStyles, selectable, selected, onClick } = props;\r\n\tconst classes = useStyles();\r\n\tconst isSelected = id => selected.indexOf(id) !== -1;\r\n\r\n\treturn (\r\n\r\n<TableBody>\r\n\t{pageRows.map((row, index) => {\r\n\t\tconst isItemSelected = isSelected(row.id);\r\n\t\tconst labelId = `enhanced-table-checkbox-${index}`;\r\n\t\t\r\n\t\tlet styles = {};\r\n\t\tfor (let columnId in rowStyles) {\r\n\t\t\tlet rowStyle = rowStyles[columnId];\r\n\t\t\t\r\n\t\t\tif (row[columnId] && Object.keys(rowStyle).indexOf(row[columnId]) > -1) {\r\n\t\t\t\tstyles = { ...styles, ...rowStyle[row[columnId]] };\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\treturn (\r\n\r\n\t<TableRow\r\n\t\tkey={'TableRow-' + index}\r\n\t\thover\r\n\t\tonClick={onClick ? (event => onClick(event, row.id)) : undefined}\r\n\t\trole=\"checkbox\"\r\n\t\taria-checked={isItemSelected}\r\n\t\ttabIndex={-1}\r\n\t\tselected={isItemSelected}\r\n\t\t>\r\n\t\t\r\n\t\t{selectable !== false &&\r\n\t\t<TableCell\r\n\t\t\tkey={'TableCell-' + index + '-Checkbox'}\r\n\t\t\tstyle={styles}\r\n\t\t\tpadding=\"checkbox\"\r\n\t\t\t>\r\n\t\t\t\r\n\t\t\t<Checkbox\r\n\t\t\t\tchecked={isItemSelected}\r\n\t\t\t\tinputProps={{ 'aria-labelledby': labelId }}\r\n\t\t\t\t/>\r\n\t\t\t\r\n\t\t</TableCell>\r\n\t\t}\r\n\t\t\r\n\t\t{columns.map(column => (\r\n\t\t<TableCell\r\n\t\t\tkey={'TableCell-' + index + '-' + column.id}\r\n\t\t\tclasses={{ root: clsx(column.noWrap && classes.noWrap) }}\r\n\t\t\tstyle={styles}\r\n\t\t\tscope=\"row\"\r\n\t\t\tpadding={column.disablePadding ? 'none' : 'default'}\r\n\t\t\t>\r\n\r\n\t\t\t{showTableContent(row[column.id], column.type)}\r\n\t\t</TableCell>\r\n\r\n\t\t))}\r\n\r\n\t</TableRow>\r\n\t\t\r\n\t\t);\r\n\t})}\r\n\t\r\n\t{emptyRows > 0 && (\r\n\t<TableRow style={{ height: 53 * emptyRows }}>\r\n\t\t<TableCell colSpan={6} />\r\n\t</TableRow>\r\n\t)}\r\n\t\r\n</TableBody>\r\n\r\n\t);\r\n}","/*\r\n * Code by MATERIAL-UI\r\n * @see https://material-ui.com/components/tables/#sorting-amp-selecting\r\n *\r\n */\r\nimport React from 'react'\r\n\r\nimport { makeStyles } from '@material-ui/core/styles'\r\nimport Table from '@material-ui/core/Table'\r\nimport TableContainer from '@material-ui/core/TableContainer'\r\nimport TablePagination from '@material-ui/core/TablePagination'\r\n\r\nimport EnhancedTableToolbar from '../components/EnhancedTableToolbar'\r\nimport EnhancedTableHead from '../components/EnhancedTableHead'\r\nimport EnhancedTableBody from '../components/EnhancedTableBody'\r\n\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n  root: {\r\n    width: '100%',\r\n  },\r\n  paper: {\r\n    width: '100%',\r\n    marginBottom: theme.spacing(2),\r\n  },\r\n  table: {\r\n    minWidth: 750,\r\n  },\r\n  visuallyHidden: {\r\n    border: 0,\r\n    clip: 'rect(0 0 0 0)',\r\n    height: 1,\r\n    margin: -1,\r\n    overflow: 'hidden',\r\n    padding: 0,\r\n    position: 'absolute',\r\n    top: 20,\r\n    width: 1,\r\n  },\r\n}));\r\n\r\n\r\nfunction descendingComparator(a, b, orderBy) {\r\n  if (b[orderBy] < a[orderBy]) {\r\n    return -1;\r\n  }\r\n  if (b[orderBy] > a[orderBy]) {\r\n    return 1;\r\n  }\r\n  return 0;\r\n}\r\n\r\nfunction getComparator(order, orderBy) {\r\n  return order === 'desc'\r\n    ? (a, b) => descendingComparator(a, b, orderBy)\r\n    : (a, b) => -descendingComparator(a, b, orderBy);\r\n}\r\n\r\nfunction stableSort(array, comparator) {\r\n  const stabilizedThis = array.map((el, index) => [el, index]);\r\n  stabilizedThis.sort((a, b) => {\r\n    const order = comparator(a[0], b[0]);\r\n    if (order !== 0) return order;\r\n    return a[1] - b[1];\r\n  });\r\n  return stabilizedThis.map(el => el[0]);\r\n}\r\n\r\nexport default function EnhancedTable(props) {\r\n  const classes = useStyles();\r\n  \r\n  const { title, headCells, CustomTableBody, rows, selectable, pagination, defaultOrder, defaultOrderBy, defaultSelected, defaultPage, defaultRowsPerPage } = props;\r\n  \r\n  const [order, setOrder] = React.useState(defaultOrder || 'asc');\r\n  const [orderBy, setOrderBy] = React.useState(defaultOrderBy || headCells[0].id);\r\n  const [selected, setSelected] = React.useState(defaultSelected || []);\r\n  const [page, setPage] = React.useState(defaultPage || 0);\r\n  const [rowsPerPage, setRowsPerPage] = React.useState(pagination ? (defaultRowsPerPage || 5) : rows.length);\r\n\r\n  const handleRequestSort = (event, property) => {\r\n    const isAsc = orderBy === property && order === 'asc';\r\n    setOrder(isAsc ? 'desc' : 'asc');\r\n    setOrderBy(property);\r\n  };\r\n\r\n  const handleSelectAllClick = event => {\r\n    if (event.target.checked) {\r\n      const newSelecteds = rows.map(n => n.id);\r\n      setSelected(newSelecteds);\r\n      return;\r\n    }\r\n    setSelected([]);\r\n  };\r\n\r\n  const handleChangePage = (event, newPage) => {\r\n    setPage(newPage);\r\n  };\r\n\r\n  const handleChangeRowsPerPage = event => {\r\n    setRowsPerPage(parseInt(event.target.value, 10));\r\n    setPage(0);\r\n  };\r\n\r\n  const selectRow = (event, id) => {\r\n    const selectedIndex = selected.indexOf(id);\r\n    let newSelected = [];\r\n\r\n    if (selectedIndex === -1) {\r\n      newSelected = newSelected.concat(selected, id);\r\n    } else if (selectedIndex === 0) {\r\n      newSelected = newSelected.concat(selected.slice(1));\r\n    } else if (selectedIndex === selected.length - 1) {\r\n      newSelected = newSelected.concat(selected.slice(0, -1));\r\n    } else if (selectedIndex > 0) {\r\n      newSelected = newSelected.concat(\r\n        selected.slice(0, selectedIndex),\r\n        selected.slice(selectedIndex + 1),\r\n      );\r\n    }\r\n\r\n    setSelected(newSelected);\r\n  };\r\n\r\n  const TableBody = CustomTableBody || EnhancedTableBody;\r\n  return (\r\n\t<React.Fragment>\r\n        <EnhancedTableToolbar title={title} numSelected={selected.length} />\r\n        <TableContainer>\r\n          <Table\r\n            className={classes.table}\r\n            aria-labelledby=\"tableTitle\"\r\n            aria-label=\"enhanced table\"\r\n          >\r\n            <EnhancedTableHead\r\n              classes={classes}\r\n              numSelected={selected.length}\r\n              order={order}\r\n              orderBy={orderBy}\r\n              onSelectAllClick={handleSelectAllClick}\r\n              onRequestSort={handleRequestSort}\r\n              rowCount={rows.length}\r\n\t\t\t  {...props}\r\n            />\r\n\t\t\t\r\n\t\t\t<TableBody\r\n\t\t\t\tcolumns={headCells}\r\n\t\t\t\tpageRows={stableSort(rows, getComparator(order, orderBy)).slice(page * rowsPerPage, page * rowsPerPage + rowsPerPage)}\r\n\t\t\t\temptyRows={rowsPerPage - Math.min(rowsPerPage, rows.length - page * rowsPerPage)}\r\n\t\t\t\tonClick={selectable !== false && selectRow}\r\n\t\t\t\tselected={selected}\r\n\t\t\t\t{...props}\r\n\t\t\t\t/>\r\n\t\t\t\r\n          </Table>\r\n        </TableContainer>\r\n\t\t{pagination && <TablePagination\r\n          rowsPerPageOptions={[5, 10, 25]}\r\n          component=\"div\"\r\n          count={rows.length}\r\n          rowsPerPage={rowsPerPage}\r\n          page={page}\r\n          onChangePage={handleChangePage}\r\n          onChangeRowsPerPage={handleChangeRowsPerPage}\r\n        />}\r\n\t</React.Fragment>\r\n\t\r\n  );\r\n}","import i18n from '../../i18n'\r\n\r\n/*\r\n * i18n\r\n */\r\nlet translations = require('./door.' + i18n.getLanguage()).default\r\ni18n.setTranslation(i18n.getLanguage(), translations);\r\n\r\n\r\nexport default {\r\n\tconfigurations: {\r\n\t\topen: {\r\n\t\t\ticon: {\r\n\t\t\t\ttrue: 'door-open',\r\n\t\t\t\tfalse: 'door-closed'\r\n\t\t\t},\r\n\t\t\tstate: {\r\n\t\t\t\ttrue: i18n.t('door#open#true'),\r\n\t\t\t\tfalse: i18n.t('door#open#false')\r\n\t\t\t},\r\n\t\t},\r\n\t\tlock: {\r\n\t\t}\r\n\t},\r\n\tcomponents: {\r\n\t},\r\n\tactions: {\r\n\t},\r\n\tstyles: {\r\n\t}\r\n}","import React from 'react'\r\n\r\nimport i18n from '../../i18n'\r\nimport defaults from '../defaults'\r\n\r\n\r\n/*\r\n * i18n\r\n */\r\nlet translations = require('./heating.' + i18n.getLanguage()).default\r\ni18n.setTranslation(i18n.getLanguage(), translations);\r\n\r\n\r\n/*\r\n * COMPONENTS\r\n *\r\n */\r\nfunction HeatingSetTemperatureComponent(props) {\r\n\tconst Level = defaults.components.LevelComponent;\r\n\treturn (\r\n\t\t<Level min={0} max={35} {...props} />\r\n\t);\r\n}\r\n\r\n\r\n\r\nexport default {\r\n\tconfigurations: {\r\n\t\ttemperature: {\r\n\t\t\tvalue: val => val.toFixed(1),\r\n\t\t\tunit: ' °C'\r\n\t\t},\r\n\t\tsetTemperature: {\r\n\t\t\tunit: ' °C',\r\n\t\t\ticon: 'thermometer-chevron-up'\r\n\t\t},\r\n\t\thumidity: {\r\n\t\t\tunit: ' %'\r\n\t\t},\r\n\t\tboost: {\r\n\t\t\ticon: 'radiator'\r\n\t\t}\r\n\t},\r\n\tcomponents: {\r\n\t\tsetTemperature: HeatingSetTemperatureComponent\r\n\t},\r\n\tactions: {\r\n\t\tboost: defaults.actions.PowerAction\r\n\t},\r\n\tstyles: {\r\n\t}\r\n}","import i18n from '../../i18n'\r\n\r\n\r\n/*\r\n * i18n\r\n */\r\nlet translations = require('./location.' + i18n.getLanguage()).default\r\ni18n.setTranslation(i18n.getLanguage(), translations);\r\n\r\n\r\nexport default {\r\n\tconfigurations: {\r\n\t\tposition: {\r\n\t\t\ticon: 'map-marker'\r\n\t\t},\r\n\t\tpresence: {\r\n\t\t\ticon: {\r\n\t\t\t\ttrue: 'map-marker-radius',\r\n\t\t\t\tfalse: 'map-marker-remove-outline'\r\n\t\t\t},\r\n\t\t\tstate: {\r\n\t\t\t\ttrue: i18n.t('location#presence#true'),\r\n\t\t\t\tfalse: i18n.t('location#presence#false'),\r\n\t\t\t},\r\n\t\t},\r\n\t\tusers: {\r\n\t\t\ticon: {\r\n\t\t\t\t'': 'account-group-outline',\r\n\t\t\t\t'default': 'account-group'\r\n\t\t\t},\r\n\t\t\tstate: {\r\n\t\t\t\t'': i18n.t('location#users#empty')\r\n\t\t\t},\r\n\t\t},\r\n\t},\r\n\tcomponents: {\r\n\t},\r\n\tactions: {\r\n\t},\r\n\tstyles: {\r\n\t}\r\n}","import i18n from '../../i18n'\r\n\r\n\r\n/*\r\n * i18n\r\n */\r\nlet translations = require('./user.' + i18n.getLanguage()).default\r\ni18n.setTranslation(i18n.getLanguage(), translations);\r\n\r\n\r\nexport default {\r\n\tconfigurations: {\r\n\t\tposition: {\r\n\t\t\ticon: 'map-marker'\r\n\t\t},\r\n\t\tlocation: {\r\n\t\t\ticon: 'account'\r\n\t\t},\r\n\t\tbattery: {\r\n\t\t}\r\n\t},\r\n\tcomponents: {\r\n\t},\r\n\tactions: {\r\n\t},\r\n\tstyles: {\r\n\t}\r\n}","import i18n from '../../i18n'\r\n\r\n\r\n/*\r\n * i18n\r\n */\r\nlet translations = require('./window.' + i18n.getLanguage()).default\r\ni18n.setTranslation(i18n.getLanguage(), translations);\r\n\r\n\r\nexport default {\r\n\tconfigurations: {\r\n\t\topen: {\r\n\t\t\ticon: {\r\n\t\t\t\ttrue: 'window-open-variant',\r\n\t\t\t\tfalse: 'window-closed-variant'\r\n\t\t\t},\r\n\t\t\tstate: {\r\n\t\t\t\ttrue: i18n.t('window#open#true'),\r\n\t\t\t\tfalse: i18n.t('window#open#false')\r\n\t\t\t},\r\n\t\t}\r\n\t},\r\n\tcomponents: {\r\n\t},\r\n\tactions: {\r\n\t},\r\n\tstyles: {\r\n\t}\r\n}","/**\r\n *\r\n *\r\n */\r\nfunction HsvToRgb(h, s = 1, v = 1) {\r\n\tif (Array.isArray(h)) {\r\n\t\tv = h[2];\r\n\t\ts = h[1];\r\n\t\th = h[0];\r\n\t}\r\n\telse if (typeof h === 'string' && h.indexOf(',')) {\r\n\t\t[h, s, v] = h.split(',');\r\n\t}\r\n\t\r\n\tif (h > 1) {\r\n\t\th = h/360;\r\n\t}\r\n\t\r\n\tlet r, g, b, i, f, p, q, t;\r\n\t\r\n\ti = Math.floor(h * 6);\r\n\tf = h * 6 - i;\r\n\tp = v * (1 - s);\r\n\tq = v * (1 - f * s);\r\n\tt = v * (1 - (1 - f) * s);\r\n\t\r\n\tswitch (i % 6) {\r\n\t\tcase 0:\r\n\t\t\tr = v;\r\n\t\t\tg = t;\r\n\t\t\tb = p;\r\n\t\t\tbreak;\r\n\t\t\t\r\n\t\tcase 1:\r\n\t\t\tr = q;\r\n\t\t\tg = v;\r\n\t\t\tb = p;\r\n\t\t\tbreak;\r\n\t\t\r\n\t\tcase 2:\r\n\t\t\tr = p;\r\n\t\t\tg = v;\r\n\t\t\tb = t;\r\n\t\t\tbreak;\r\n\t\t\r\n\t\tcase 3:\r\n\t\t\tr = p;\r\n\t\t\tg = q;\r\n\t\t\tb = v;\r\n\t\t\tbreak;\r\n\t\t\r\n\t\tcase 4:\r\n\t\t\tr = t;\r\n\t\t\tg = p;\r\n\t\t\tb = v;\r\n\t\t\tbreak;\r\n\t\t\r\n\t\tcase 5:\r\n\t\t\tr = v;\r\n\t\t\tg = p;\r\n\t\t\tb = q;\r\n\t\t\tbreak;\r\n\t\t\r\n\t\tdefault: // for webpack\r\n\t\t\tbreak;\r\n\t}\r\n\t\r\n\treturn [\r\n\t\tMath.round(r * 255),\r\n\t\tMath.round(g * 255),\r\n\t\tMath.round(b * 255)\r\n\t];\r\n}\r\n\r\n\r\n/**\r\n *\r\n *\r\n */\r\nfunction RgbToHex(r, g, b) {\r\n\tif (Array.isArray(r)) {\r\n\t\tb = r[2];\r\n\t\tg = r[1];\r\n\t\tr = r[0];\r\n\t}\r\n\telse if (typeof r === 'string' && r.indexOf(',')) {\r\n\t\t[r, g, b] = r.split(',');\r\n\t}\r\n\t\r\n\tr = parseInt(r).toString(16);\r\n\tg = parseInt(g).toString(16);\r\n\tb = parseInt(b).toString(16);\r\n\t\r\n\tif (r.length === 1) r = '0' + r;\r\n\tif (g.length === 1) g = '0' + g;\r\n\tif (b.length === 1) b = '0' + b;\r\n\t\r\n\treturn \"#\" + r + g + b;\r\n}\r\n\r\n\r\nexport default {\r\n\tHsvToRgb,\r\n\tRgbToHex\r\n}","import React, { useState, useEffect } from 'react'\r\nimport { HuePicker, SketchPicker as ColorPicker } from 'react-color'\r\n\r\nimport Log from '../../Log'\r\nimport i18n from '../../i18n'\r\nimport helpers from '../../helpers/colorConverter'\r\nimport defaults from '../defaults'\r\n\r\n\r\n/*\r\n * i18n\r\n */\r\nlet translations = require('./light.' + i18n.getLanguage()).default\r\ni18n.setTranslation(i18n.getLanguage(), translations);\r\n\r\n\r\n/*\r\n * ACTIONS\r\n *\r\n */\r\nfunction LightLevelAction(props) {\r\n\tconst { device, stateKey, stateVal } = props;\r\n\t\r\n\tconst onChange = (e) => {\r\n\t\tsetChecked(e.target.checked);\r\n\t\tdevice.setDeviceState(stateKey, e.target.checked ? 100 : 0).catch(err => Log._('Function (light)', err.message, 'error', true, err.stack));\r\n\t}\r\n\t\r\n\tconst [checked, setChecked] = useState(stateVal > 0);\r\n\tuseEffect(() => setChecked(stateVal > 0), [stateVal]);\r\n\t\r\n\t// only show percentage if device has a switch itself\r\n\tif (device.parent && device.parent.states.power) {\r\n\t\treturn <defaults.actions.Action {...props} stateVal={checked} onChange={onChange} />;\r\n\t}\r\n\t\r\n\treturn <defaults.actions.PowerAction {...props} stateVal={checked} onChange={onChange} />\r\n}\r\n\r\nfunction LightColorAction(props) {\r\n\tconst { stateKey, stateVal } = props;\r\n\t\r\n\tconst [colorSpace, setColorSpace] = useState(stateVal);\r\n\tuseEffect(() => setColorSpace(stateVal), [stateVal]);\r\n\t\r\n\tlet colors, labels = {};\r\n\tif (stateKey === 'rgb' && colorSpace) {\r\n\t\tcolors = colorSpace.split(',');\r\n\t\tlabels = { Red: colors[0], Green: colors[1], Blue: colors[2] };\r\n\t\t\r\n\t}\r\n\telse if (stateKey === 'hsv' && colorSpace) {\r\n\t\tcolors = colorSpace.split(',');\r\n\t\tlabels = { Hue: colors[0], Saturation: colors[1], Brightness: colors[2] };\r\n\t}\r\n\t\r\n\tconst Label = defaults.components.Label;\r\n\tlet label = [];\r\n\tfor (let key in labels) {\r\n\t\tlabel.push(<Label key={key} label={key + ' ' + labels[key]} br={true} />);\r\n\t}\r\n\t\r\n\treturn label;\r\n}\r\n\r\n\r\n/*\r\n * COMPONENTS\r\n *\r\n */\r\nfunction LightColorTemperatureComponent(props) {\r\n\tconst Level = defaults.components.LevelComponent;\r\n\treturn (\r\n\t\t<Level min={2000} max={6500} step={10} {...props} />\r\n\t);\r\n}\r\n\r\nfunction LightHueComponent(props) {\r\n\tconst { device, stateKey, stateVal, title } = props;\r\n\t\r\n\tconst onChangeComplete = (color, e) => {\r\n\t\tsetHue(Math.round(color.hsl.h));\r\n\t\tdevice.setDeviceState(stateKey, Math.round(color.hsl.h)).catch(err => Log._('Function (light)', err.message, 'error', true, err.stack));\r\n\t}\r\n\t\r\n\tconst [hue, setHue] = useState(stateVal);\r\n\tuseEffect(() => setHue(stateVal), [stateVal]);\r\n\t\r\n\tconst Component = defaults.components.Component;\r\n\tconst color = helpers.RgbToHex(helpers.HsvToRgb(hue));\r\n\treturn (\r\n\r\n<Component title={title || stateKey }>\r\n\t<HuePicker\r\n\t\tcolor={color}\r\n\t\twidth={'100%'}\r\n\t\tonChangeComplete={onChangeComplete}\r\n\t\t/>\r\n\t\t\r\n</Component>\r\n\r\n\t);\r\n}\r\n\r\nfunction LightColorComponent(props) {\r\n\tconst { device, stateKey, stateVal, title } = props;\r\n\t\r\n\tconst onChangeComplete = (color, e) => {\r\n\t\tcolor = color[stateKey];\r\n\t\t\r\n\t\t// RGB\r\n\t\tif (stateKey === 'rgb') {\r\n\t\t\tcolor = [color.r, color.g, color.b].join(',');\r\n\t\t}\r\n\t\t// HSV\r\n\t\telse if (stateKey === 'hsv') {\r\n\t\t\tcolor = [color.h, color.s, color.v].join(',');\r\n\t\t}\r\n\t\t\r\n\t\tdevice.setDeviceState(stateKey, color).catch(err => Log._('Function (light)', err.message, 'error', true, err.stack));\r\n\t};\r\n\t\r\n\tlet initialColor = stateVal || '#ffffff';\r\n\t\r\n\t// RGB\r\n\tif (stateKey === 'rgb') {\r\n\t\tinitialColor = helpers.RgbToHex(initialColor);\r\n\t}\r\n\t// HSV\r\n\telse if (stateKey === 'hsv') {\r\n\t\tinitialColor = helpers.RgbToHex(helpers.HsvToRgb(initialColor));\r\n\t}\r\n\t\r\n\tconst [colorSpace, setColorSpace] = useState(initialColor);\r\n\tuseEffect(() => {\r\n\t\t// RGB\r\n\t\tif (stateKey === 'rgb') {\r\n\t\t\tsetColorSpace(helpers.RgbToHex(stateVal));\r\n\t\t}\r\n\t\t// HSV\r\n\t\telse if (stateKey === 'hsv') {\r\n\t\t\tsetColorSpace(helpers.RgbToHex(helpers.HsvToRgb(stateVal)));\r\n\t\t}\r\n\t\t// HEX\r\n\t\telse if (stateKey === 'hex') {\r\n\t\t\tsetColorSpace(stateVal);\r\n\t\t}\r\n\t}, [stateKey, stateVal]);\r\n\t\r\n\tconst Component = defaults.components.Component;\r\n\treturn (\r\n\r\n<Component title={title || stateKey }>\r\n\t<ColorPicker\r\n\t\tcolor={colorSpace}\r\n\t\twidth={'100%'}\r\n\t\tonChangeComplete={onChangeComplete}\r\n\t\t/>\r\n\t\t\r\n</Component>\r\n\r\n\t);\r\n}\r\n\r\n\r\nconst color = {\r\n\ticon: {\r\n\t\t'default': 'palette',\r\n\t},\r\n\tunit: ' °'\r\n}\r\n\r\nexport default {\r\n\tconfigurations: {\r\n\t\tpower: {\r\n\t\t\ticon: {\r\n\t\t\t\t'true': 'lightbulb-on',\r\n\t\t\t\t'false': 'lightbulb-off-outline'\r\n\t\t\t},\r\n\t\t},\r\n\t\tlevel: {\r\n\t\t\tvalue: val => val > 0 && val <= 1 ? val * 100 : val,\r\n\t\t\tunit: val => val > 0 ? ' %' : null,\r\n\t\t\ticon: {\r\n\t\t\t\t'default': 'lightbulb-on',\r\n\t\t\t\t'0': 'lightbulb-off-outline'\r\n\t\t\t},\r\n\t\t\tstate: {\r\n\t\t\t\t'0': i18n.t('light#level#off')\r\n\t\t\t},\r\n\t\t},\r\n\t\tcolorTemperature: {\r\n\t\t\ticon: {\r\n\t\t\t\t'default': 'thermometer',\r\n\t\t\t},\r\n\t\t\tunit: ' °K'\r\n\t\t},\r\n\t\thue: color,\r\n\t\trgb: color,\r\n\t\thsv: color,\r\n\t\thex: color\r\n\t},\r\n\tcomponents: {\r\n\t\tlevel: defaults.components.LevelComponent,\r\n\t\tcolorTemperature: LightColorTemperatureComponent,\r\n\t\trgb: LightColorComponent,\r\n\t\thsv: LightColorComponent,\r\n\t\thex: LightColorComponent,\r\n\t\thue: LightHueComponent\r\n\t},\r\n\tactions: {\r\n\t\tpower: defaults.actions.PowerAction,\r\n\t\tlevel: LightLevelAction,\r\n\t\trgb: LightColorAction,\r\n\t\thsv: LightColorAction,\r\n\t\thex: LightColorAction\r\n\t},\r\n\tstyles: {\r\n\t\t_any: {\r\n\t\t\t//icon: {},\r\n\t\t\tstate: {\r\n\t\t\t\t'0': {\r\n\t\t\t\t\t'color': '#999'\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n}","import React, { useState, useEffect } from 'react'\r\nimport clsx from 'clsx'\r\nimport color from 'color'\r\n\r\nimport Button from '@material-ui/core/Button'\r\nimport ButtonGroup from '@material-ui/core/ButtonGroup'\r\nimport ExpandLessIcon from '@material-ui/icons/ExpandLess'\r\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore'\r\nimport StopIcon from '@material-ui/icons/Stop'\r\n\r\nimport Log from '../../Log'\r\nimport i18n from '../../i18n'\r\nimport defaults from '../defaults'\r\nimport getActivityType from './blind-manufacturers'\r\n\r\n/*\r\n * STYLES\r\n */\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nconst useStyles = makeStyles(theme => ({\r\n\tvalue: props => ({\r\n\t\tfloat: 'left',\r\n\t\tlineHeight: '32px',\r\n\t\tmarginRight: '10px'\r\n\t}),\r\n\tborderLeftTransparent: {\r\n\t\tborderLeftColor: 'transparent !important'\r\n\t},\r\n\tborderLeftColor: {\r\n\t\tborderLeftColor: color(theme.palette.primary.main).alpha(0.5).rgb().toString() +  '!important'\r\n\t},\r\n\tborderRightTransparent: {\r\n\t\tborderRightColor: 'transparent !important'\r\n\t},\r\n\tborderRightColor: {\r\n\t\tborderRightColor: color(theme.palette.primary.main).alpha(0.5).rgb().toString() +  '!important'\r\n\t},\r\n\tborderRightColorSecondary: {\r\n\t\tborderRightColor: color(theme.palette.secondary.main).alpha(0.5).rgb().toString() +  '!important'\r\n\t}\r\n}));\r\n\r\n\r\n/*\r\n * i18n\r\n */\r\nlet translations = require('./blind.' + i18n.getLanguage()).default\r\ni18n.setTranslation(i18n.getLanguage(), translations);\r\n\r\n\r\n/*\r\n * ACTIONS\r\n *\r\n */\r\nfunction BlindLevelAction(props) {\r\n\tconst { device, state, stateKey } = props;\r\n\tconst classes = useStyles();\r\n\t\r\n\tconst onGoUp = () => {\r\n\t\tsetLevel(100);\r\n\t\tsetActivity(true);\r\n\t\tdevice.setDeviceState(stateKey, 100).catch(err => Log._('Function (blind)', err.message, 'error', true, err.stack));\r\n\t}\r\n\t\r\n\tconst onGoDown = () => {\r\n\t\tsetLevel(0);\r\n\t\tsetActivity(true);\r\n\t\tdevice.setDeviceState(stateKey, 0).catch(err => Log._('Function (blind)', err.message, 'error', true, err.stack));\r\n\t}\r\n\t\r\n\tconst onStop = () => {\r\n\t\tsetActivity(false);\r\n\t\tdevice.setDeviceState('activity', true).catch(err => Log._('Function (blind)', err.message, 'error', true, err.stack));\r\n\t}\r\n\t\r\n\t// level\r\n\tconst [level, setLevel] = useState(state.value);\r\n\tuseEffect(() => setLevel(state.value), [state]);\r\n\t\r\n\t// state change\r\n\tconst stateChange = (sKey, s, d) => {\r\n\t\t\r\n\t\tif (sKey === 'activity') {\r\n\t\t\tsetActivity(s.val);\r\n\t\t}\r\n\t}\r\n\t\r\n\t// activity\r\n\tconst [activity, setActivity] = useState(false);\r\n\tuseEffect(() => {\r\n\t\t\r\n\t\tif (device.states.activity && device.states.activity.state) {\r\n\t\t\tdevice.states.activity.state = typeof device.states.activity.state === 'string' ? { 'node': device.states.activity.state } : device.states.activity.state;\r\n\t\t\t\r\n\t\t\t// request device state\r\n\t\t\tdevice.requestDeviceState('activity', true).catch(err => Log._('Function (blind)', err.message, 'error', true, err.stack));\r\n\t\t\t\r\n\t\t\t// listen for updates\r\n\t\t\tdevice.listen(stateChange)\r\n\t\t}\r\n\t\t\r\n\t\t// componentWillUnmount\r\n\t\treturn () => device.unlisten(stateChange);\r\n\t\t\r\n\t}, [device, state]);\r\n\t\r\n\treturn (\r\n\r\n<React.Fragment>\r\n\t\r\n\t<div className={classes.value}>\r\n\t\t{level + state.unit}\r\n\t</div>\r\n\t\r\n\t<ButtonGroup size=\"small\">\r\n\t\t<Button color=\"primary\" className={clsx(activity !== null && (!activity ? classes.borderRightColor : classes.borderRightTransparent))} onClick={onGoUp}><ExpandLessIcon /></Button>\r\n\t\t{activity !== null && <Button color=\"secondary\" className={clsx(!activity ? [ classes.borderLeftTransparent, classes.borderRightTransparent ] : classes.borderRightColorSecondary)} onClick={onStop} disabled={!activity}><StopIcon /></Button>}\r\n\t\t<Button color=\"primary\" className={clsx(activity !== null && (!activity ? classes.borderLeftColor : classes.borderLeftTransparent))} onClick={onGoDown}><ExpandMoreIcon /></Button>\r\n\t</ButtonGroup>\r\n</React.Fragment>\r\n\r\n\t);\r\n}\r\n\r\n\r\nexport default {\r\n\tconfigurations: {\r\n\t\tlevel: {\r\n\t\t\tvalue: val => Math.round(val),\r\n\t\t\ticon: {\r\n\t\t\t\t'default': 'window-shutter-open',\r\n\t\t\t\t'>90': 'window-shutter-open',\r\n\t\t\t\t'<=90': 'window-shutter'\r\n\t\t\t}\r\n\t\t},\r\n\t\tlevel2: {\r\n\t\t\tvalue: val => Math.round(val),\r\n\t\t\tunit: ' %',\r\n\t\t\ticon: {\r\n\t\t\t\t'default': 'window-shutter-open',\r\n\t\t\t\t'>90': 'window-shutter-open',\r\n\t\t\t\t'<=90': 'window-shutter'\r\n\t\t\t}\r\n\t\t},\r\n\t\tactivity: {\r\n\t\t\tval: (val, stateKey, device) => getActivityType(device.options.manufacturer, val),\r\n\t\t\ticon: {\r\n\t\t\t\ttrue: 'pan-vertical',\r\n\t\t\t\tfalse: 'dots-vertical',\r\n\t\t\t},\r\n\t\t\tstate: {\r\n\t\t\t\ttrue: i18n.t('blind#activity#true'),\r\n\t\t\t\tfalse: i18n.t('blind#activity#false'),\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\tcomponents: {\r\n\t\tlevel2: defaults.components.LevelComponent\r\n\t},\r\n\tactions: {\r\n\t\tlevel: BlindLevelAction\r\n\t},\r\n\tstyles: {\r\n\t}\r\n}","export default function getActivityType(manufacturer, val) {\r\n\t\r\n\t// HomeMatic\r\n\tif (manufacturer === 'HomeMatic') {\r\n\t\t\r\n\t\tswitch(val) {\r\n\t\t\tcase 1: // UP\r\n\t\t\tcase 2: // DOWN\r\n\t\t\t\tval = true;\r\n\t\t\t\tbreak;\r\n\t\t\t\t\r\n\t\t\tcase 3: // STABLE\r\n\t\t\t\tval = false;\r\n\t\t\t\tbreak;\r\n\t\t\t\t\r\n\t\t\tdefault: // UNKNOWN\r\n\t\t\t\tval = null;\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\t}\r\n\t\r\n\t// Shelly\r\n\telse if (manufacturer === 'Shelly') {\r\n\t\t\r\n\t\tswitch(val) {\r\n\t\t\tcase 'open': // MOVING\r\n\t\t\tcase 'close': // MOVING\r\n\t\t\t\tval = true;\r\n\t\t\t\tbreak;\r\n\t\t\t\t\r\n\t\t\tcase 'stop': // MOVING\r\n\t\t\t\tval = false;\r\n\t\t\t\tbreak;\r\n\t\t\t\t\r\n\t\t\tdefault: // UNKNOWN\r\n\t\t\t\tval = null;\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\t}\r\n\t\r\n\treturn val;\r\n}","export { default } from './blind'\r\n","export default {\r\n\t// States\r\n\t\"blind#activity\": \"Aktivität\",\r\n\t\"blind#level\": \"Behanghöhe\",\r\n\t\"blind#level2\": \"Lamellenposition\",\r\n\t\r\n\t// State values\r\n\t\"blind#activity#true\": \"in Bewegung\",\r\n\t\"blind#activity#false\": \"keine\",\r\n}","export default {\r\n\t// States\r\n\t\"blind#activity\": \"Activity\",\r\n\t\"blind#level\": \"Level\",\r\n\t\"blind#level2\": \"Lamella\",\r\n\t\r\n\t// State values\r\n\t\"blind#activity#true\": \"moving\",\r\n\t\"blind#activity#false\": \"none\",\r\n}","export default {\r\n\t// States\r\n\t\"door#bell\": \"Klingel\",\r\n\t\"door#lock\": \"Schloß\",\r\n\t\"door#open\": \"Tür\",\r\n\t\r\n\t// State values\r\n\t\"door#open#true\": \"offen\",\r\n\t\"door#open#false\": \"geschlossen\",\r\n}","export default {\r\n\t// States\r\n\t\"door#bell\": \"Bell\",\r\n\t\"door#lock\": \"Lock\",\r\n\t\"door#open\": \"Door\",\r\n\t\r\n\t// State values\r\n\t\"door#open#true\": \"open\",\r\n\t\"door#open#false\": \"closed\",\r\n}","export default {\r\n\t\"heating#boost\": \"Boost\",\r\n\t\"heating#humidity\": \"Luftfeuchtigkeit\",\r\n\t\"heating#setTemperature\": \"eingestellte Temperatur\",\r\n\t\"heating#temperature\": \"Temperatur\",\r\n}","export default {\r\n\t\"heating#boost\": \"Boost\",\r\n\t\"heating#humidity\": \"Humidity\",\r\n\t\"heating#setTemperature\": \"Set Temperature\",\r\n\t\"heating#temperature\": \"Temperature\",\r\n}","import Log from './Log'\r\nimport i18n from './i18n'\r\n\r\n\r\n/**\r\n * Settings\r\n *\r\n *\r\n */\r\nexport default class Settings {\r\n\r\n\t/*\r\n\t * holds the settings\r\n\t */\r\n\tstatic settings = {};\r\n\r\n\t/**\r\n\t * Set settings.\r\n\t *\r\n\t * @param\t{Object}\tsettings\r\n\t * @return\t{Boolean}\r\n\t */\r\n\tstatic setSettings(settings) {\r\n\t\tif (settings) {\r\n\t\t\tSettings.settings = { ...Settings.settings, ...settings || {} };\r\n\t\t\tLog._('Settings', [ 'Set settings', Settings.settings ]);\r\n\t\t\treturn true;\r\n\t\t}\r\n\t\t\r\n\t\treturn false;\r\n\t}\r\n\t\r\n\t/**\r\n\t * Gets a setting.\r\n\t *\r\n\t * @param\t{String}\tsettings\r\n\t * @return\t{Mixed|null}\r\n\t */\r\n\tstatic getSetting(setting) {\r\n\t\treturn Settings.settings[setting] || '';\r\n\t}\r\n\t\r\n\t/**\r\n\t * Apply settings.\r\n\t *\r\n\t * @param\tvoid\r\n\t * @return\tvoid\r\n\t */\r\n\tstatic applySettings() {\r\n\t\t\r\n\t\t// language\r\n\t\tif (Settings.settings.language) {\r\n\t\t\ti18n.setLanguage(Settings.settings.language);\r\n\t\t\ti18n.loadTranslation(Settings.settings.language);\r\n\t\t}\r\n\t\telse {\r\n\t\t\ti18n.loadTranslation();\r\n\t\t}\r\n\t\t\r\n\t\t// page title\r\n\t\tif (Settings.settings.pageTitle) {\r\n\t\t\tdocument.title = Settings.settings.pageTitle;\r\n\t\t}\r\n\t\t\r\n\t\t// favicon\r\n\t\tif (Settings.settings.pageFavicon && Settings.settings.pageFavicon.substr(0, 5) === 'data:') {\r\n\t\t\tdocument.getElementById('favicon').href = Settings.settings.pageFavicon;\r\n\t\t}\r\n\t\t\r\n\t\t// translations\r\n\t\tif (Settings.settings.translations) {\r\n\t\t\t\r\n\t\t\tlet translations = Settings.settings.translations;\r\n\t\t\tfor (let language in translations) {\r\n\t\t\t\ti18n.setTranslation(language, translations[language]);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n}\r\n","export default {\r\n\t// States\r\n\t\"light#colorTemperature\": \"Farbtemperatur\",\r\n\t\"light#hex\": \"Farbe (Hex)\",\r\n\t\"light#hsv\": \"Farbraum Hue-Saturation-Value (HSV)\",\r\n\t\"light#hue\": \"Farbe (Hue)\",\r\n\t\"light#level\": \"Helligkeit\",\r\n\t\"light#power\": \"Licht\",\r\n\t\"light#rgb\": \"Farbraum Rot-Grün-Blau (RGB)\",\r\n\t\r\n\t// State values\r\n\t\"light#level#off\": \"ausgeschaltet\",\r\n}","export default {\r\n\t// States\r\n\t\"light#colorTemperature\": \"Color Temperature\",\r\n\t\"light#hex\": \"Color (Hex)\",\r\n\t\"light#hsv\": \"Colorspace Hue-Saturation-Value (HSV)\",\r\n\t\"light#hue\": \"Color (Hue)\",\r\n\t\"light#level\": \"Brightness\",\r\n\t\"light#power\": \"Power\",\r\n\t\"light#rgb\": \"Colorspace Red-Green-Blue (RGB)\",\r\n\t\r\n\t// State values\r\n\t\"light#level#off\": \"off\",\r\n}","export default {\r\n\t// States\r\n\t\"location#position\": \"Position\",\r\n\t\"location#presence\": \"Anwesenheit\",\r\n\t\"location#users\": \"Benutzer\",\r\n\t\r\n\t// State values\r\n\t\"location#presence#true\": \"anwesend\",\r\n\t\"location#presence#false\": \"abwesend\",\r\n\t\"location#users#empty\": \"niemand anwesend\",\r\n}","export default {\r\n\t// States\r\n\t\"location#position\": \"Position\",\r\n\t\"location#presence\": \"Presence\",\r\n\t\"location#users\": \"Users\",\r\n\t\r\n\t// State values\r\n\t\"location#presence#true\": \"present\",\r\n\t\"location#presence#false\": \"absent\",\r\n\t\"location#users#empty\": \"nobody present\",\r\n}","export default {\r\n\t\"user#location\": \"Standort\",\r\n\t\"user#position\": \"Position\",\r\n}","export default {\r\n\t\"user#location\": \"Location\",\r\n\t\"user#position\": \"Position\",\r\n}","export default {\r\n\t// States\r\n\t\"window#open\": \"Fenster\",\r\n\t\r\n\t// State values\r\n\t\"window#open#true\": \"offen\",\r\n\t\"window#open#false\": \"geschlossen\",\r\n}","export default {\r\n\t// States\r\n\t\"window#open\": \"Window\",\r\n\t\r\n\t// State values\r\n\t\"window#open#true\": \"open\",\r\n\t\"window#open#false\": \"closed\",\r\n}","import React from 'react'\r\nimport clsx from 'clsx'\r\n\r\nimport { format } from 'date-fns'\r\n\r\nimport Connection from '../Connection'\r\nimport i18n, { locales } from '../i18n'\r\n\r\nimport CircularProgress from '@material-ui/core/CircularProgress'\r\nimport Tooltip from '@material-ui/core/Tooltip'\r\nimport Avatar from '@material-ui/core/Avatar'\r\nimport List from '@material-ui/core/List'\r\nimport ListItemAvatar from '@material-ui/core/ListItemAvatar'\r\nimport ListItem from '@material-ui/core/ListItem'\r\nimport ListItemText from '@material-ui/core/ListItemText'\r\nimport ListItemSecondaryAction from '@material-ui/core/ListItemSecondaryAction'\r\nimport StarIcon from '@material-ui/icons/Star';\r\n\r\n\r\n/*\r\n * STYLES\r\n */\r\nimport { withStyles } from '@material-ui/core/styles';\r\nconst styles = theme => ({\r\n\tnoUpdates: {\r\n\t\tfontStyle: 'italic',\r\n\t\ttextAlign: 'right',\r\n\t\tcolor: 'rgba(0, 0, 0, 0.54)'\r\n\t},\r\n\tUpdateAvailable: {\r\n\t\tcolor: '#CCAA00',\r\n\t},\r\n\tUpdatesListItem: {\r\n\t\tbackgroundColor: '#ffd700',\r\n\t\tcolor: '#fff',\r\n\t\tmargin: theme.spacing(0, -2),\r\n\t\tpaddingLeft: theme.spacing(2)\r\n\t},\r\n\tUpdatesIndicator: {\r\n\t\tright: theme.spacing(3.75),\r\n\t\tbackgroundColor: '#CCAA00',\r\n\t\tborderRadius: '50%',\r\n\t\twidth: theme.spacing(3),\r\n\t\theight: theme.spacing(3),\r\n\t\tcolor: '#fff',\r\n\t\ttextAlign: 'center',\r\n\t\tfontSize: '1rem !important'\r\n\t},\r\n\tStatusIndicator: {\r\n\t\tfontSize: '1.4rem'\r\n\t},\r\n\tloading: {\r\n\t\ttextAlign: 'center',\r\n\t\tmarginTop: '5px'\r\n\t},\r\n\tsmall: {\r\n\t\twidth: theme.spacing(3),\r\n\t\theight: theme.spacing(3),\r\n\t},\r\n\talive: {\r\n\t\tcolor: '#86d686'\r\n\t},\r\n\tnotAlive: {\r\n\t\tcolor: '#f7e43b'\r\n\t},\r\n\tdisabled: {\r\n\t\tcolor: '#bababa'\r\n\t}\r\n});\r\n\r\n\r\nclass AdapterStatus extends React.Component {\r\n\t\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\t\r\n\t\tthis.state = {\r\n\t\t\tadapterInformation: [],\r\n\t\t\tadapterAliveStatus: {},\r\n\t\t\tnewUpdates: false,\r\n\t\t\tupdatesJson: '',\r\n\t\t\tlastUpdateCheck: ''\r\n\t\t}\r\n\t\t\r\n\t\tthis.socket = Connection.getConnection;\r\n\t\tthis.list = this.props.settings.list ? (Array.isArray(this.props.settings.list) ? this.props.settings.list : this.props.settings.list.split(',')) : null;\r\n\t\tthis.blacklist = this.props.settings.blacklist ? (Array.isArray(this.props.settings.blacklist) ? this.props.settings.blacklist : this.props.settings.blacklist.split(',')) : null;\r\n\t\t\r\n\t\tthis.updateStates = ['admin.0.info.newUpdates', 'admin.0.info.lastUpdateCheck', 'admin.0.info.updatesJson'];\r\n\t\tthis.adapterStates = [];\r\n\t}\r\n\t\r\n\tcomponentDidMount() {\r\n\t\t\r\n\t\t// retrieve updates\r\n\t\tif (this.props.settings.updates !== false) {\r\n\t\t\t\r\n\t\t\tthis.socket.getStates(this.updateStates, (err, states) => {\r\n\t\t\t\t\r\n\t\t\t\tthis.setState({\r\n\t\t\t\t\tnewUpdates: states['admin.0.info.newUpdates'].val,\r\n\t\t\t\t\tlastUpdateCheck: states['admin.0.info.lastUpdateCheck'].val,\r\n\t\t\t\t\tupdatesJson: states['admin.0.info.updatesJson'].val\r\n\t\t\t\t});\r\n\t\t\t\t\r\n\t\t\t\t// get state updates\r\n\t\t\t\tthis.socket.subscribeStates(this.updateStates, (id, update) => {\r\n\t\t\t\t\t\r\n\t\t\t\t\tid = id.substr(id.lastIndexOf('.')+1);\r\n\t\t\t\t\tif (this.state[id] !== update.val) {\r\n\t\t\t\t\t\tthis.setState({ [id]: update.val });\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t});\r\n\t\t}\r\n\t\t\r\n\t\t// get adapter instances\r\n\t\tthis.socket.getAdapterInstances((err, instances) => {\r\n\t\t\t\r\n\t\t\tif (instances && instances.rows) {\r\n\t\t\t\tlet adapters = [];\r\n\t\t\t\t\r\n\t\t\t\t// states per instance to retrieve\r\n\t\t\t\tinstances.rows.forEach((instance, i) => {\r\n\t\t\t\t\t\r\n\t\t\t\t\t// get alive / connected states\r\n\t\t\t\t\tif ((!this.list || (this.list && this.list.indexOf(instance.value.common.name) > -1)) && (!this.blacklist || (this.blacklist && this.blacklist.indexOf(instance.value.common.name) === -1))) {\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tadapters.push(instance);\r\n\t\t\t\t\t\tthis.adapterStates = this.adapterStates.concat([\r\n\t\t\t\t\t\t\tinstance.id + '.alive',\r\n\t\t\t\t\t\t\tinstance.id + '.connected',\r\n\t\t\t\t\t\t\tinstance.id.replace('system.adapter.', '') + '.info.connection'\r\n\t\t\t\t\t\t]);\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t\t\r\n\t\t\t\t// sort instances\r\n\t\t\t\tthis.setState({ adapterInformation: adapters.sort((item1, item2) => {\r\n\t\t\t\t\t\tif (item1.id > item2.id) return 1;\r\n\t\t\t\t\t\telse if (item2.id > item1.id) return -1;\r\n\t\t\t\t\t\telse return 0;\r\n\t\t\t\t\t})\r\n\t\t\t\t});\r\n\t\t\t\t\r\n\t\t\t\t// retrieve intial states\r\n\t\t\t\tthis.socket.getStates(this.adapterStates, (err, adapterAliveStatus) => {\r\n\t\t\t\t\tthis.setState({ adapterAliveStatus });\r\n\t\t\t\t\t\r\n\t\t\t\t\t// get state updates\r\n\t\t\t\t\tthis.socket.subscribeStates(this.adapterStates, (id, aliveStatus) => {\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tif (aliveStatus && (!this.state.adapterAliveStatus[id] || (aliveStatus.val !== this.state.adapterAliveStatus[id].val))) {\r\n\t\t\t\t\t\t\tthis.setState(prevState => ({ adapterAliveStatus: { ...prevState.adapterAliveStatus, [id]: aliveStatus } }));\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\t\r\n\tcomponentWillUnmount() {\r\n\t\tthis.socket.unsubscribeStates([ ...this.updateStates, ...this.adapterStates ]);\r\n\t}\r\n\t\r\n\trender() {\r\n\t\tconst { classes } = this.props;\r\n\t\t\r\n\t\t// adapter updates\r\n\t\tconst updateList = (this.state.updatesJson && JSON.parse(this.state.updatesJson)) || {};\r\n\t\tconst updates = Object.keys(updateList).length\r\n\t\t\r\n\t\t// adapter instances\r\n\t\tlet adapterList = <ListItem key='loading' className={classes.loading}><CircularProgress size={20} /></ListItem>\r\n\t\t\r\n\t\tif (this.state.adapterInformation.length > 0) {\r\n\t\t\t\r\n\t\t\tadapterList = this.state.adapterInformation.map(adapter => {\r\n\t\t\t\tadapter.update = updateList[adapter.value.common.name] || false;\r\n\t\t\t\t\r\n\t\t\t\tconst enabled = adapter.value.common.enabled;\r\n\t\t\t\tconst alive = (this.state.adapterAliveStatus[adapter.id + '.alive'] && this.state.adapterAliveStatus[adapter.id + '.alive'].val) || false;\r\n\t\t\t\tconst connected = (this.state.adapterAliveStatus[adapter.id + '.connected'] && this.state.adapterAliveStatus[adapter.id + '.connected'].val) || false;\r\n\t\t\t\tconst connection = this.state.adapterAliveStatus[adapter.id.replace('system.adapter.', '') + '.info.connection'] ? this.state.adapterAliveStatus[adapter.id.replace('system.adapter.', '') + '.info.connection'].val : true;\r\n\t\t\t\t\r\n\t\t\t\tconst tooltip = i18n.t('Adapter') + ' ' + (enabled ? (alive && connected && connection ? i18n.t('alive') : i18n.t('not alive')) : i18n.t('disabled'));\r\n\t\t\t\t\r\n\t\t\t\treturn (\r\n\t\t\t\t\r\n\t\t\t\t\t<ListItem key={'adapter-' + adapter.id}>\r\n\t\t\t\t\t\t<ListItemAvatar>\r\n\t\t\t\t\t\t\t<Avatar alt={adapter.value.common.name} src={adapter.value.common.extIcon} className={classes.small} />\r\n\t\t\t\t\t\t</ListItemAvatar>\r\n\t\t\t\t\t\t<ListItemText\r\n\t\t\t\t\t\t\tprimary={adapter.value.common.title}\r\n\t\t\t\t\t\t\tsecondary={[\r\n\t\t\t\t\t\t\t\t'v' + adapter.value.common.version,\r\n\t\t\t\t\t\t\t\t(adapter.update && adapter.value.common.version !== adapter.update.availableVersion && (<span key={'updates-' + adapter.id}>, <span className={classes.UpdateAvailable}>{i18n.t('Update available') + ' v' + adapter.update.availableVersion}</span></span>)),\r\n\t\t\t\t\t\t\t\t(adapter.value.common.runAsCompactMode && ', ' + i18n.t('Compact Mode') + ' ' + i18n.t('on') + ' (' + i18n.t('Group') + ' ' + adapter.value.common.compactGroup + ')')\r\n\t\t\t\t\t\t\t]}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t<ListItemSecondaryAction className={clsx(classes.StatusIndicator, enabled ? (alive && connected && connection ? classes.alive : classes.notAlive) : classes.disabled)}>\r\n\t\t\t\t\t\t\t<Tooltip title={tooltip}>\r\n\t\t\t\t\t\t\t\t<span className={enabled ? (alive && connected && connection ? 'mdi mdi-check-circle' : 'mdi mdi-alert') : 'mdi mdi-close'}></span>\r\n\t\t\t\t\t\t\t</Tooltip>\r\n\t\t\t\t\t\t</ListItemSecondaryAction>\r\n\t\t\t\t\t</ListItem>\r\n\t\t\t\t\r\n\t\t\t\t)\r\n\t\t\t});\r\n\t\t}\r\n\t\t\r\n\t\treturn (\r\n\r\n<List dense>\r\n\t{this.state.newUpdates === false ? (this.state.lastUpdateCheck && \r\n\t<ListItem key=\"updates\" classes={{ root: classes.noUpdates }}>\r\n\t\t<ListItemText\r\n\t\t\tprimary={i18n.t('last update') + ': ' + format(new Date(this.state.lastUpdateCheck), 'dd.MM.yyyy HH:mm:ss', { locale: locales[i18n.getLanguage()] })}\r\n\t\t\t/>\r\n\t\t\r\n\t</ListItem>)\r\n\t:\r\n\t<ListItem key=\"updates\" classes={{ container: classes.UpdatesListItem }}>\r\n\t\t<ListItemAvatar>\r\n\t\t\t<StarIcon />\r\n\t\t</ListItemAvatar>\r\n\t\t<ListItemText\r\n\t\t\tprimary={i18n.t('Updates available') + '!'}\r\n\t\t\t/>\r\n\t\t\r\n\t\t<ListItemSecondaryAction className={clsx(classes.StatusIndicator, classes.UpdatesIndicator)}>\r\n\t\t\t{updates}\r\n\t\t</ListItemSecondaryAction>\r\n\t</ListItem>\r\n\t}\r\n\t\r\n\t{adapterList}\r\n</List>\r\n\r\n\t\t);\r\n\t}\r\n}\r\n\r\nexport const ModuleSettings = {\r\n\tnoDevicesAllowed: true,\r\n\ttitle: i18n.t('Adapter Status'),\r\n\ticon: 'traffic-light'\r\n}\r\n\r\nexport default withStyles(styles)(AdapterStatus);\r\n","import React from 'react'\r\nimport clsx from 'clsx'\r\n\r\nimport { Line } from 'react-chartjs-2'\r\n// eslint-disable-next-line\r\nimport chartjs_colorschemes from 'chartjs-plugin-colorschemes'\r\n// eslint-disable-next-line\r\nimport chartjs_zoom from 'chartjs-plugin-zoom'\r\n\r\nimport DateFnsUtils from '@date-io/date-fns'\r\n\r\nimport Log from '../Log'\r\nimport i18n, { locales } from '../i18n'\r\nimport helpers from '../helpers/timeConverter'\r\n\r\nimport CircularProgress from '@material-ui/core/CircularProgress'\r\nimport Button from '@material-ui/core/Button'\r\nimport ButtonGroup from '@material-ui/core/ButtonGroup'\r\nimport Alert from '@material-ui/lab/Alert'\r\nimport Tooltip from '@material-ui/core/Tooltip'\r\nimport Paper from '@material-ui/core/Paper'\r\nimport Divider from '@material-ui/core/Divider'\r\nimport { MuiPickersUtilsProvider, DateTimePicker } from '@material-ui/pickers'\r\nimport InputBase from '@material-ui/core/InputBase'\r\nimport Select from '@material-ui/core/Select'\r\nimport MenuItem from '@material-ui/core/MenuItem'\r\nimport IconButton from '@material-ui/core/IconButton'\r\nimport CalendarIcon from '@material-ui/icons/Event'\r\nimport CalendarTodayIcon from '@material-ui/icons/EventAvailable'\r\nimport HistoryIcon from '@material-ui/icons/History'\r\nimport FastRewindIcon from '@material-ui/icons/FastRewind'\r\n//import DisablePan from '@material-ui/icons/SelectAll'\r\n//import DisableZoom from '@material-ui/icons/LocationDisabled'\r\nimport ResetZoom from '@material-ui/icons/ZoomOutMap'\r\nimport LiveUpdates from '@material-ui/icons/Update'\r\n\r\n\r\n\r\n/*\r\n * STYLES\r\n */\r\nimport { withStyles } from '@material-ui/core/styles';\r\nconst styles = theme => ({\r\n\tloading: {\r\n\t\tposition: 'absolute',\r\n\t\tbackgroundColor: 'rgba(0, 0, 0, 0.3)',\r\n\t\twidth: '100%',\r\n\t\theight: '100%',\r\n\t\tdisplay: 'flex',\r\n\t\talignItems: 'center',\r\n\t\tjustifyContent: 'center',\r\n\t},\r\n\terrorMessage: {\r\n\t\tmarginBottom: 5,\r\n\t\tmarginRight: 15,\r\n\t\twidth: '100%'\r\n\t},\r\n\ttoolbar: {\r\n\t\tdisplay: 'flex'\r\n\t},\r\n\ttoolbarButtons: {\r\n\t\tdisplay: 'initial',\r\n\t\twhiteSpace: 'nowrap'\r\n\t},\r\n\toptions: {\r\n\t\tdisplay: 'flex',\r\n\t\tjustifyContent: 'center',\r\n\t},\r\n\tdatePicker: {\r\n\t\tpadding: '2px 4px',\r\n\t\tdisplay: 'flex',\r\n\t\talignItems: 'center',\r\n\t\tmargin: 2\r\n\t},\r\n\tinput: {\r\n\t\tmarginLeft: theme.spacing(1),\r\n\t\tflex: 1,\r\n\t},\r\n\tselect: {\r\n\t\twidth: 100\r\n\t},\r\n\ticon: {\r\n\t\tmargin: 10,\r\n\t},\r\n\ticonButton: {\r\n\t\tpadding: 10,\r\n\t},\r\n\tdivider: {\r\n\t\tmargin: '15px 0',\r\n\t},\r\n\tdividerVertical: {\r\n\t\theight: 28,\r\n\t\tmargin: 4,\r\n\t},\r\n\tbutton: {\r\n\t\tbackgroundColor: theme.palette.primary.main,\r\n\t\tcolor: '#fff !important',\r\n\t\tmargin: '4px'\r\n\t},\r\n\tbuttonDisabled: {\r\n\t\tbackgroundColor: '#eee',\r\n\t\tmargin: '4px'\r\n\t}\r\n});\r\n\r\n\r\nclass Chart extends React.Component {\r\n\t\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\t\r\n\t\t// chart settings\r\n\t\tthis.chartFilter = this.props.settings.chartFilter || {};\r\n\t\tthis.chartConfig = this.props.settings.chartConfig || {};\r\n\t\t\r\n\t\tthis.chartConfig.yAxes = this.chartConfig.yAxes || [];\r\n\t\tthis.chartConfig.yAxes.unshift({\r\n\t\t\tid: 'left',\r\n\t\t\ttype: 'linear',\r\n\t\t\tposition: 'left',\r\n\t\t\tticks: {\r\n\t\t\t\tcallback: value => (this.chartConfig.yLeftAxisUnitBefore || '') + Number.parseFloat(value).toFixed(1) + (this.chartConfig.yLeftAxisUnitAfter || '')\r\n\t\t\t}\r\n\t\t});\r\n\t\t\r\n\t\t// states\r\n\t\tthis.state = {\r\n\t\t\tloading: true,\r\n\t\t\terrors: [],\r\n\t\t\t\r\n\t\t\tdatePicker: false,\r\n\t\t\tselectedTimeRangeValue: (this.chartFilter && this.chartFilter.selectedTimeRangeValue) || 1,\r\n\t\t\tselectedTimeRangeUnit: (this.chartFilter && this.chartFilter.selectedTimeRangeUnit) || 'days',\r\n\t\t\tselectedDateTime: (this.chartFilter && this.chartFilter.selectedDateTime && new Date(this.chartFilter.selectedDateTime)) || new Date(),\r\n\t\t\tdateNow: this.chartFilter && this.chartFilter.selectedDateTime ? false : true,\r\n\t\t\t\r\n\t\t\tchartLabels: [],\r\n\t\t\tchartData: {\r\n\t\t\t\tlabels: [],\r\n\t\t\t\tdatasets: []\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\tchartPan: true,\r\n\t\t\tchartZoom: true\r\n\t\t}\r\n\t\t\r\n\t\t//\r\n\t\tthis.timer = null;\r\n\t\tthis.timeRangeRef = React.createRef();\r\n\t\t\r\n\t\t// chart instance options\r\n\t\tthis.chartRef = React.createRef();\r\n\t\tthis.chartUpdates = {};\r\n\t\tthis.chartOptions = {\r\n\t\t\tmaintainAspectRatio: false,\r\n\t\t\tspanGaps: true,\r\n\t\t\tlegend: {\r\n\t\t\t\tonClick: this.legendClickHandler.bind(this)\r\n\t\t\t},\r\n\t\t\ttooltips: {\r\n\t\t\t\tcallbacks: {\r\n\t\t\t\t\tlabel: (item, data) => data.datasets[item.datasetIndex].label + ': ' + item.value + data.datasets[item.datasetIndex].unit\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tscales: {\r\n\t\t\t\tyAxes: this.chartConfig.yAxes\r\n\t\t\t},\r\n\r\n\t\t\tplugins: {\r\n\t\t\t\tcolorschemes: {\r\n\t\t\t\t\tscheme: 'brewer.SetOne9'\r\n\t\t\t\t},\r\n\t\t\t\tzoom: {\r\n\t\t\t\t\t// Container for pan options\r\n\t\t\t\t\tpan: {\r\n\t\t\t\t\t\t// Boolean to enable panning\r\n\t\t\t\t\t\tenabled: true,\r\n\r\n\t\t\t\t\t\t// Panning directions\r\n\t\t\t\t\t\tmode: 'xy'\r\n\t\t\t\t\t},\r\n\t\t\t\t\t\r\n\t\t\t\t\t// Container for zoom options\r\n\t\t\t\t\tzoom: {\r\n\t\t\t\t\t\t// Boolean to enable zooming\r\n\t\t\t\t\t\tenabled: true,\r\n\r\n\t\t\t\t\t\t// Zooming directions.\r\n\t\t\t\t\t\tmode: 'xy'\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t};\r\n\t}\r\n\t\r\n\tcomponentDidMount() {\r\n\t\t\r\n\t\t// request initial history data\r\n\t\tlet options = { ...this.getTimeRange(), axis: this.getAxis() };\r\n\t\t\r\n\t\tthis.props.devices.forEach(device => {\r\n\t\t\tdevice.label = device.name + ' (' + i18n.t(device.primaryStateKey) + ')';\r\n\t\t\tdevice.requestDeviceStateHistory(device.options.history || null, true, { 'start': options.start, 'end': options.end, 'step': options.step, 'aggregate': 'average', 'ignoreNull': true }).catch(err => Log._('Modules (Chart)', err.message, 'error', true, err.stack));\r\n\t\t\t\r\n\t\t\t// add listeners for newly requested data\r\n\t\t\tdevice.listen('historyChange', (options) => this.historyChange);\r\n\t\t\t\r\n\t\t\t// add listeners for data updates\r\n\t\t\tif (this.props.settings.liveUpdates !== null && this.props.settings.liveUpdates !== false && this.state.dateNow) {\r\n\t\t\t\tdevice.listen((options) => this.stateChange);\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\t\r\n\tcomponentWillUnmount() {\r\n\t\tthis.props.devices.forEach(device => {\r\n\t\t\tdevice.unlisten(this.stateChange);\r\n\t\t});\r\n\t}\r\n\t\r\n\tcomponentDidUpdate(prevProps, prevState) {\r\n\t\t\r\n\t\tif (this.state.selectedTimeRangeValue &&\r\n\t\t\t\t(prevState.selectedDateTime !== this.state.selectedDateTime || prevState.selectedTimeRangeValue !== this.state.selectedTimeRangeValue || prevState.selectedTimeRangeUnit !== this.state.selectedTimeRangeUnit)\r\n\t\t\t) {\r\n\t\t\t\r\n\t\t\t// request updated history data\r\n\t\t\tthis.setState({ loading: true, errors: [] });\r\n\t\t\t\r\n\t\t\tclearTimeout(this.timer);\r\n\t\t\tthis.timer = setTimeout(() => {\r\n\t\t\t\t\r\n\t\t\t\tconst options = this.getTimeRange();\r\n\t\t\t\tthis.props.devices.forEach(device => {\r\n\t\t\t\t\tdevice.requestDeviceStateHistory(device.options.history || null, true, { 'start': options.start, 'end': options.end, 'step': options.step, 'aggregate': 'average', 'ignoreNull': true }).catch(err => Log._('Modules (Chart)', err.message, 'error', true, err.stack));\r\n\t\t\t\t});\r\n\t\t\t\t\r\n\t\t\t}, 500);\r\n\t\t}\r\n\t}\r\n\t\r\n\thistoryChange = options => (stateKey, history, state, device) => {\r\n\t\tthis.addChartGraph(device, history, { ...options, axis: this.getAxis(options.start, options.end) } );\r\n\t\tthis.setState({ loading: false });\r\n\t}\r\n\t\r\n\tstateChange = options => (stateKey, val, state, device) => this.updateChartGraph(device, val, { ...options, axis: this.getAxis(options.end, new Date()) } )\r\n\t\r\n\tgetTimeRange() {\r\n\t\t\r\n\t\tconst end = this.state.selectedDateTime.getTime();\r\n\t\tlet timeRange = this.state.selectedTimeRangeValue;\r\n\t\tlet step = 1;\r\n\t\tlet axisTimeFormat = 'dd. MMM yyyy, HH:mm';\r\n\t\t\r\n\t\tswitch(this.state.selectedTimeRangeUnit) {\r\n\t\t\tdefault:\r\n\t\t\t\tbreak;\r\n\t\t\t\r\n\t\t\tcase 'seconds':\r\n\t\t\t\taxisTimeFormat = 'dd. MMM yyyy, HH:mm:ss';\r\n\t\t\t\tbreak;\r\n\t\t\t\t\r\n\t\t\tcase 'minutes':\r\n\t\t\t\taxisTimeFormat = 'dd. MMM yyyy, HH:mm:ss';\r\n\t\t\t\ttimeRange = timeRange*60;\r\n\t\t\t\t//step = step;\r\n\t\t\t\tbreak;\r\n\t\t\t\t\r\n\t\t\tcase 'hours':\r\n\t\t\t\taxisTimeFormat = 'dd. MMM yyyy, HH:mm';\r\n\t\t\t\ttimeRange = timeRange*60*60;\r\n\t\t\t\tstep = step*60;\r\n\t\t\t\tbreak;\r\n\t\t\t\t\r\n\t\t\tcase 'days':\r\n\t\t\t\taxisTimeFormat = 'dd. MMM yyyy, HH:mm';\r\n\t\t\t\ttimeRange = timeRange*60*60*24;\r\n\t\t\t\tstep = step*60*60;\r\n\t\t\t\tbreak;\r\n\t\t\t\t\r\n\t\t\tcase 'months':\r\n\t\t\t\taxisTimeFormat = 'dd. MMM yyyy';\r\n\t\t\t\ttimeRange = timeRange*60*60*24*31;\r\n\t\t\t\tstep = step*60*60*24;\r\n\t\t\t\tbreak;\r\n\t\t\t\t\r\n\t\t\tcase 'years':\r\n\t\t\t\taxisTimeFormat = 'dd. MMM yyyy';\r\n\t\t\t\ttimeRange = timeRange*60*60*24*365;\r\n\t\t\t\tstep = step*60*60*24*31;\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\t\t\r\n\t\treturn {\r\n\t\t\t'axisTimeFormat': axisTimeFormat,\r\n\t\t\t'start': end-timeRange*1000,\r\n\t\t\t'end': end,\r\n\t\t\t'timeRange': timeRange*1000,\r\n\t\t\t'step': step*1000\r\n\t\t};\r\n\t}\r\n\t\r\n\tgetAxis(start, end) {\r\n\t\t\r\n\t\tconst { step, axisTimeFormat } = this.getTimeRange();\r\n\t\tlet axis = {};\r\n\t\t\r\n\t\tfor (let time = start; time <= end; time += step) {\r\n\t\t\taxis[time] = helpers.secondsToDateTime(time/1000, axisTimeFormat);\r\n\t\t}\r\n\t\t\r\n\t\treturn axis;\r\n\t}\r\n\t\r\n\tgroupChartData(chartData, axis) {\r\n\t\t\r\n\t\tlet prevMarker;\r\n\t\tlet data = [];\r\n\t\t\r\n\t\tlet markers = Object.keys(axis);\r\n\t\tmarkers.forEach((marker, i) => {\r\n\t\t\tprevMarker = markers[(i-1 > 0 ? i-1 : 0)];\r\n\t\t\t\r\n\t\t\tfor (let index in chartData) {\r\n\t\t\t\tlet entry = chartData[index];\r\n\t\t\t\tentry.val = parseFloat(entry.val);\r\n\t\t\t\t\r\n\t\t\t\t// \r\n\t\t\t\tif (!entry.ts || entry.val === null) {\r\n\t\t\t\t\tcontinue;\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\t// before range, continue\r\n\t\t\t\tif (prevMarker > entry.ts) {\r\n\t\t\t\t\tcontinue;\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\t// in range\r\n\t\t\t\telse if (prevMarker < entry.ts && entry.ts <= marker) {\r\n\t\t\t\t\tdata[i] = !data[i] ? [ entry.val ] : [ ...data[i], entry.val ]; // parseFloat((data[i] ? ((data[i]+entry.val)/2) : entry.val).toFixed(2));\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\t// beyond range, so next marker\r\n\t\t\t\telse if (entry.ts > marker) {\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\t//\r\n\t\t\tif (!data[i]) {\r\n\t\t\t\t// \r\n\t\t\t}\r\n\t\t\telse if (data[i].length === 1) {\r\n\t\t\t\tdata[i] = data[i][0];\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tdata[i] = data[i].reduce((a,b) => a + b, 0) / data[i].length;\r\n\t\t\t}\r\n\t\t});\r\n\t\t\r\n\t\treturn data;\r\n\t}\r\n\t\r\n\tupdateChartGraph(device, value, options) {\r\n\t\t\r\n\t\tconst chartIndex = this.state.chartLabels.findIndex(entry => entry === device.label);\r\n\t\tif (chartIndex === -1) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\t\r\n\t\tthis.chartUpdates[chartIndex] = this.chartUpdates[chartIndex] || [];\r\n\t\tthis.chartUpdates[chartIndex].push({\r\n\t\t\t'ts': value.ts,\r\n\t\t\t'val': value.val\r\n\t\t});\r\n\t\t\r\n\t\t// process data\r\n\t\tconst data = this.groupChartData(this.chartUpdates[chartIndex], options.axis);\r\n\t\t\r\n\t\t//console.log(value);\r\n\t\t//console.log(options, options.axis, data);\r\n\t\t\r\n\t\t// update chart\r\n\t\tthis.chartRef.current.chartInstance.data.labels = [ ...this.state.chartData.labels, ...Object.values(options.axis) ];\r\n\t\tthis.chartRef.current.chartInstance.data.datasets[chartIndex].data = [ ...this.state.chartData.datasets[chartIndex].data, ...data ];\r\n\t\tthis.chartRef.current.chartInstance.update();\r\n\t}\r\n\t\r\n\taddChartGraph(device, history, options) {\r\n\t\t\r\n\t\t// only add chart if data is given\r\n\t\tif (!history || !history.length) {\r\n\t\t\tlet error = i18n.t('No history data given for %s').replace('%s', device.label) + '!';\r\n\t\t\tthis.setState(prevStates => ({ errors: [ ...prevStates.errors, error ] }));\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\t\r\n\t\t// process data\r\n\t\tconst data = this.groupChartData(history, options.axis);\r\n\t\t\r\n\t\t// update chart\r\n\t\tconst chartIndex = this.state.chartLabels.findIndex(entry => entry === device.label);\r\n\t\tif (chartIndex > -1) {\r\n\t\t\tthis.chartRef.current.chartInstance.data.labels = Object.values(options.axis);\r\n\t\t\tthis.chartRef.current.chartInstance.data.datasets[chartIndex].data = data;\r\n\t\t\tthis.chartRef.current.chartInstance.update();\r\n\t\t}\r\n\t\t\r\n\t\t// index chart\r\n\t\telse {\r\n\t\t\tthis.setState(prevStates => ({ chartLabels: [ ...prevStates.chartLabels, device.label ] }));\r\n\t\t\t\r\n\t\t\t// chart dataset\r\n\t\t\tlet dataSet = {\r\n\t\t\t\tlabel: device.label,\r\n\t\t\t\tunit: device.states[device.primaryStateKey].state.value.unit || '',\r\n\t\t\t\tfill: false,\r\n\t\t\t\t...device.options.graphConfig || {},\r\n\t\t\t\tdata: data\r\n\t\t\t};\r\n\t\t\t\r\n\t\t\t// add data to chart\r\n\t\t\tthis.setState(prevStates => ({\r\n\t\t\t\taxisTimeFormat: options.axisTimeFormat,\r\n\t\t\t\tchartData: {\r\n\t\t\t\t\tlabels: Object.values(options.axis),\r\n\t\t\t\t\tdatasets: [ ...prevStates.chartData.datasets, dataSet ],\r\n\t\t\t\t}\r\n\t\t\t}));\r\n\t\t}\r\n\t}\r\n\t\r\n\tlegendClickHandler(e, legendItem) {\r\n\t\t\r\n\t\tlet index = legendItem.datasetIndex;\r\n\t\tlet ci = this.chartRef.current.chartInstance;\r\n\t\tlet meta = ci.getDatasetMeta(index);\r\n\r\n\t\tmeta.hidden = meta.hidden === null ? !ci.data.datasets[index].hidden : null;\r\n\t\tci.update();\r\n\t\tci.resetZoom();\r\n\t}\r\n\t\r\n\tdisablePan() {\r\n\t\tlet pan = this.chartRef.current.chartInstance.options.plugins.zoom.pan.enabled;\r\n\t\tthis.chartRef.current.chartInstance.options.plugins.zoom.pan.enabled = (pan === false);\r\n\t\tthis.setState({ chartPan: (pan === false) });\r\n\t}\r\n\t\r\n\tdisableZoom() {\r\n\t\tlet zoom = this.chartRef.current.chartInstance.options.plugins.zoom.zoom.enabled;\r\n\t\tthis.chartRef.current.chartInstance.options.plugins.zoom.zoom.enabled = (zoom === false);\r\n\t\tthis.setState({ chartZoom: (zoom === false) });\r\n\t}\r\n\t\r\n\trender() {\r\n\t\tconst { classes, settings } = this.props;\r\n\t\treturn (\r\n\r\n<div>\r\n\t<div className={classes.options}>\r\n\t\r\n\t\t<Paper className={classes.datePicker}>\r\n\t\t\t<Tooltip title={i18n.t('Period shown in Chart')}>\r\n\t\t\t\t<HistoryIcon className={classes.icon} />\r\n\t\t\t</Tooltip>\r\n\t\t\t\r\n\t\t\t<InputBase\r\n\t\t\t\tinputRef={this.timeRangeRef}\r\n\t\t\t\tclassName={classes.input}\r\n\t\t\t\tvalue={this.state.selectedTimeRangeValue}\r\n\t\t\t\tonChange={event => this.setState({ selectedTimeRangeValue: event.target.value })}\r\n\t\t\t\t/>\r\n\t\t\t\r\n\t\t\t<Select\r\n\t\t\t\tvalue={this.state.selectedTimeRangeUnit}\r\n\t\t\t\tonChange={event => this.setState({ selectedTimeRangeUnit: event.target.value })}\r\n\t\t\t\tdisplayEmpty\r\n\t\t\t\tdisableUnderline\r\n\t\t\t\tclassName={classes.select}\r\n\t\t\t\t>\r\n\t\t\t\t\r\n\t\t\t\t<MenuItem value=\"seconds\">{i18n.t('Seconds')}</MenuItem>\r\n\t\t\t\t<MenuItem value=\"minutes\">{i18n.t('Minutes')}</MenuItem>\r\n\t\t\t\t<MenuItem value=\"hours\">{i18n.t('Hours')}</MenuItem>\r\n\t\t\t\t<MenuItem value=\"days\">{i18n.t('Days')}</MenuItem>\r\n\t\t\t\t<MenuItem value=\"months\">{i18n.t('Months')}</MenuItem>\r\n\t\t\t\t<MenuItem value=\"years\">{i18n.t('Years')}</MenuItem>\r\n\t\t\t</Select>\r\n\t\t\t\r\n\t\t\t{/*\r\n\t\t\t<IconButton className={classes.iconButton} onClick={() => this.timeRangeRef.current.focus()}>\r\n\t\t\t\t<CalendarIcon />\r\n\t\t\t</IconButton>\r\n\t\t\t*/}\r\n\t\t</Paper>\r\n\r\n\t\t<Paper className={classes.datePicker}>\r\n\t\t\t<Tooltip title={i18n.t('End date')}>\r\n\t\t\t\t<FastRewindIcon className={classes.icon} />\r\n\t\t\t</Tooltip>\r\n\t\t\t\r\n\t\t\t<MuiPickersUtilsProvider locale={locales[i18n.getLanguage()]} utils={DateFnsUtils}>\r\n\t\t\t\t<DateTimePicker\r\n\t\t\t\t\tclassName={classes.input}\r\n\t\t\t\t\tvalue={this.state.selectedDateTime}\r\n\t\t\t\t\tonChange={selectedDateTime => this.setState({ selectedDateTime: selectedDateTime, dateNow: false })}\r\n\t\t\t\t\t\r\n\t\t\t\t\topen={this.state.datePicker}\r\n\t\t\t\t\tonOpen={() => this.setState({ datePicker: true })}\r\n\t\t\t\t\tonClose={() => this.setState({ datePicker: false })}\r\n\t\t\t\t\t\r\n\t\t\t\t\tvariant=\"inline\"\r\n\t\t\t\t\tampm={false}\r\n\t\t\t\t\tformat='dd.MM.yyyy HH:mm'\r\n\t\t\t\t\tInputProps={{\r\n\t\t\t\t\t\tdisableUnderline: true,\r\n\t\t\t\t\t}}\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t\r\n\t\t\t</MuiPickersUtilsProvider>\r\n\t\t\t\r\n\t\t\t<Tooltip title={i18n.t('Select end date')}>\r\n\t\t\t\t<IconButton color=\"primary\" className={classes.iconButton} onClick={() => this.setState({ datePicker: true })}>\r\n\t\t\t\t\t<CalendarIcon />\r\n\t\t\t\t</IconButton>\r\n\t\t\t</Tooltip>\r\n\t\t\t<Divider className={classes.dividerVertical} orientation=\"vertical\" />\r\n\t\t\t<Tooltip title={i18n.t('Select today as end date')}>\r\n\t\t\t\t<IconButton className={classes.iconButton} onClick={() => this.setState({ selectedDateTime: new Date(), dateNow: true })}>\r\n\t\t\t\t\t<CalendarTodayIcon />\r\n\t\t\t\t</IconButton>\r\n\t\t\t</Tooltip>\r\n\t\t</Paper>\r\n\t\t\r\n\t\t<Tooltip title={i18n.t('Live updates are ' + (this.props.settings.liveUpdates !== null && this.props.settings.liveUpdates !== false && this.state.dateNow ? 'on' : 'off'))} placement=\"top\" style={{ display: 'flex' }}>\r\n\t\t\t<span>\r\n\t\t\t\t<Button disabled={true} className={clsx(classes.datePicker, this.props.settings.liveUpdates !== null && this.props.settings.liveUpdates !== false && this.state.dateNow ? classes.button : classes.buttonDisabled)}>\r\n\t\t\t\t\t<LiveUpdates />\r\n\t\t\t\t</Button>\r\n\t\t\t</span>\r\n\t\t</Tooltip>\r\n\t\t\r\n\t</div>\r\n\t<Divider className={classes.divider} />\r\n\t\r\n\t<div className={classes.toolbar}>\r\n\t\t<div className={classes.errorMessage}>\r\n\t\t\t{this.state.errors.length > 0 && <Alert severity=\"error\">{this.state.errors.map((error, i) => [ error, React.createElement('br', { key: 'br-error-' + i }) ])}</Alert>}\r\n\t\t</div>\r\n\t\t\r\n\t\t<ButtonGroup className={classes.toolbarButtons} color=\"primary\">\r\n\t\t{/*\r\n\t\t\t<Button disableElevation={true} variant={this.state.chartPan ? 'contained' : 'outlined'} onClick={this.disablePan.bind(this)}>\r\n\t\t\t\t<Tooltip title={i18n.t(this.state.chartPan ? 'Disable panning' : 'Enable panning')}>\r\n\t\t\t\t\t<DisablePan />\r\n\t\t\t\t</Tooltip>\r\n\t\t\t</Button>\r\n\t\t\t<Button disableElevation={true} variant={this.state.chartZoom ? 'contained' : 'outlined'} onClick={this.disableZoom.bind(this)}>\r\n\t\t\t\t<Tooltip title={i18n.t(this.state.chartZoom ? 'Disable Zoom' : 'Enable Zoom')}>\r\n\t\t\t\t\t<DisableZoom />\r\n\t\t\t\t</Tooltip>\r\n\t\t\t</Button>\r\n\t\t*/}\r\n\t\t\t<Button disableElevation={true} variant=\"contained\" onClick={() => this.chartRef.current.chartInstance.resetZoom()}>\r\n\t\t\t\t<Tooltip title={i18n.t('Reset Zoom')}>\r\n\t\t\t\t\t<ResetZoom />\r\n\t\t\t\t</Tooltip>\r\n\t\t\t</Button>\r\n\t\t</ButtonGroup>\r\n\t</div>\r\n\t\r\n\t<div className={'chart-container'} style={{ position: 'relative', height: settings.chartHeight || '500px' }}>\r\n\t\t{this.state.loading && <div className={classes.loading}>\r\n\t\t\t<CircularProgress />\r\n\t\t</div>}\r\n\t\t\r\n\t\t<Line\r\n\t\t\tref={this.chartRef}\r\n\t\t\tdata={this.state.chartData}\r\n\t\t\toptions={this.chartOptions}\r\n\t\t\t/>\r\n\t\t\t\r\n\t</div>\r\n</div>\r\n\r\n\t\t);\r\n\t}\r\n}\r\n\r\nexport default withStyles(styles)(Chart);\r\n","import React, { useState, useEffect, useRef } from 'react'\r\n\r\nimport { format } from 'date-fns'\r\nimport { getSunrise, getSunset } from 'sunrise-sunset-js'\r\n\r\nimport Settings from '../Settings'\r\nimport i18n, { locales } from '../i18n'\r\nimport CircularProgress from '@material-ui/core/CircularProgress'\r\n\r\n\r\nexport default function DateTime(props) {\r\n\tconst { settings } = props;\r\n\t\r\n\tconst refTimer = useRef();\r\n\tconst [DateTime, setDateTime] = useState(format(new Date(), settings.format, { locale: locales[i18n.getLanguage()] }));\r\n\tconst [city, setCity] = useState('');\r\n\tconst [sunrise, setSunrise] = useState('');\r\n\tconst [sunset, setSunset] = useState('');\r\n\t\r\n\t// https://date-fns.org/v2.9.0/docs/format\r\n\tsettings.style = { fontSize: '1.5rem', textAlign: 'center', ...settings.style };\r\n\tsettings.format = settings.format || 'dd.MM.yyyy HH:mm:ss';\r\n\tsettings.refresh = settings.format.indexOf('s') > -1 ? 1000 : (settings.format.indexOf('i') > -1 ? 60*1000 : 60*60*1000);\r\n\t\r\n\tuseEffect(() => {\r\n\t\tclearTimeout(refTimer.current);\r\n\t\trefTimer.current = setTimeout(() => setDateTime(format(new Date(), settings.format, { locale: locales[i18n.getLanguage()] })), settings.refresh);\r\n\t\t\r\n\t\t//\r\n\t\tif (Settings.getSetting('iobroker').latitude && Settings.getSetting('iobroker').longitude) {\r\n\t\t\tsetSunrise(getSunrise(Settings.getSetting('iobroker').latitude, Settings.getSetting('iobroker').longitude));\r\n\t\t\tsetSunset(getSunset(Settings.getSetting('iobroker').latitude, Settings.getSetting('iobroker').longitude));\r\n\t\t}\r\n\t\t\r\n\t\tif (Settings.getSetting('iobroker').city) {\r\n\t\t\tsetCity(Settings.getSetting('iobroker').city);\r\n\t\t}\r\n\t\t\r\n\t}, [settings]);\r\n\t\r\n\treturn (\r\n\r\n<div style={settings.style}>\r\n\t{i18n.t('%DateTime').replace(/%DateTime/, DateTime)}\r\n\t\r\n\t{settings.sun !== false && <div style={{ margin: '5px 0', fontSize: '1.2rem' }}>\r\n\t\t\r\n\t\t<span className=\"mdi mdi-city-variant-outline\"></span> {city ? city : <CircularProgress size=\"1.2rem\" />}\r\n\t\t<span style={{ margin: '0 10px' }}></span>\r\n\t\t\r\n\t\t<span className=\"mdi mdi-weather-sunset-up\"></span> {sunrise ? format(sunrise, 'HH:mm') : <CircularProgress size=\"1.2rem\" />}\r\n\t\t<span style={{ margin: '0 10px' }}></span>\r\n\t\t\r\n\t\t<span className=\"mdi mdi-weather-sunset-down\"></span> {sunset ? format(sunset, 'HH:mm') : <CircularProgress size=\"1.2rem\" />}\r\n\t</div>\r\n\t}\r\n\t\r\n</div>\r\n\r\n\t);\r\n}\r\n\r\nexport const ModuleSettings = {\r\n\tnoDevicesAllowed: true,\r\n\ttitle: i18n.t('Time'),\r\n\ticon: 'clock-outline'\r\n}\r\n","import React, { useState, useEffect, useRef, useCallback } from 'react'\r\nimport clsx from 'clsx'\r\n\r\nimport L from 'leaflet'\r\nimport { Map as LeafletMap, TileLayer, Marker as LeafletMarker, Tooltip as LeafletTooltip } from 'react-leaflet'\r\n\r\nimport Log from '../Log'\r\nimport Settings from '../Settings'\r\nimport i18n from '../i18n'\r\n\r\nimport Box from '@material-ui/core/Box'\r\nimport Typography from '@material-ui/core/Typography'\r\nimport Tooltip from '@material-ui/core/Tooltip'\r\nimport Avatar from '@material-ui/core/Avatar'\r\n\r\n\r\n/*\r\n * STYLES\r\n */\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nconst useStyles = makeStyles(theme => ({\r\n\tmap: {\r\n\t\twidth: '100%',\r\n\t\theight: '100%'\r\n\t},\r\n\tmapOverview: {\r\n\t\tcolor: '#666',\r\n\t\tposition: 'absolute',\r\n\t\tleft: 0,\r\n\t\tbottom: 0,\r\n\t\twidth: '100%',\r\n\t\theight: '60px',\r\n\t\tzIndex: 999,\r\n\t\tdisplay: 'flex',\r\n\t\talignItems: 'center',\r\n\t\t\r\n\t\t'& > *': {\r\n\t\t\tmargin: theme.spacing(1),\r\n\t\t\tcursor: 'pointer',\r\n\t\t},\r\n\t},\r\n\tmapIconContainer: {\r\n\t},\r\n\tmapIconParent: {\r\n\t\tbackgroundColor: '#fff',\r\n\t\tboxShadow: '0 0 0 8px rgba(255, 255, 255, 0.3)',\r\n\t\tborderRadius: '50%',\r\n\t\twidth: '100%',\r\n\t\theight: '100%'\r\n\t},\r\n\tmapIcon: {\r\n\t\tfontSize: '2rem',\r\n\t\tcolor: theme.palette.primary.main,\r\n\t\ttransform: 'translate3d(4px, -4px,0)', /* for fontSize: '2.3rem' -> 'translate3d(2px, -8px,0)', */\r\n\t\tdisplay: 'block',\r\n\t\t\r\n\t\t'&:after': {\r\n\t\t\tcontent: '\"\"',\r\n\t\t\tdisplay: 'block',\r\n\t\t\tpadding: '50% 0%'\r\n\t\t}\r\n\t},\r\n\tmapTooltip: {\r\n\t}\r\n}));\r\n\r\n\r\nexport default function Map(props) {\r\n\tconst { settings, devices } = props;\r\n\tconst classes = useStyles();\r\n\t\r\n\tconst [zoom,] = useState(settings.component.defaultZoom);\r\n\tconst [position,] = useState(settings.component.defaultPosition ? (Array.isArray(settings.component.defaultPosition) ? settings.component.defaultPosition : settings.component.defaultPosition.split(',')) : [ Settings.getSetting('iobroker').latitude, Settings.getSetting('iobroker').longitude ]);\r\n\tconst [markers, setMarkers] = useState({});\r\n\t\r\n\t// map instance\r\n\tconst map = useRef();\r\n\tconst memoizedMapInitialised = useCallback(function() {map.current = this}, [],);\r\n\t\r\n\t// Marker click in overview\r\n\tconst memoizedHandleClick = useCallback(flyTo => map.current.flyTo(flyTo.split(',')), [],);\r\n\t\r\n\t// state change\r\n\tconst stateChange = (stateKey, state, device) => {\r\n\t\t\r\n\t\tif (stateKey === 'position') {\r\n\t\t\t\r\n\t\t\tsetMarkers(prevMarkers => {\r\n\t\t\t\tif (!prevMarkers[device.id] || prevMarkers[device.id].position !== state.val) {\r\n\t\t\t\t\tdevice.options.position = state.val;\r\n\t\t\t\t\treturn { ...prevMarkers, [device.id]: device };\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\treturn prevMarkers;\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\t\r\n\t// get gps position coordinates\r\n\tuseEffect(() => {\r\n\t\tdevices.forEach(device => {\r\n\t\t\t\r\n\t\t\t// request device state\r\n\t\t\tdevice.requestDeviceState('position').catch(err => {\r\n\t\t\t\tLog._('Modules (Map)', err.message, 'error', true, err.stack)\r\n\t\t\t\t\r\n\t\t\t\tsetMarkers(prevMarkers => {\r\n\t\t\t\t\tif (!prevMarkers[device.id]) {\r\n\t\t\t\t\t\treturn { ...prevMarkers, [device.id]: null };\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t\treturn prevMarkers;\r\n\t\t\t\t});\r\n\t\t\t});\r\n\t\t\t\r\n\t\t\t// listen for updates\r\n\t\t\tdevice.listen(stateChange);\r\n\t\t});\r\n\t\t\r\n\t\t// componentWillUnmount\r\n\t\treturn () => devices.forEach(device => device.unlisten(stateChange));\r\n\t\t\r\n\t}, [devices]);\r\n\t\r\n\t// add markers\r\n\tlet mapMarkers = [], mapOverview = [];\r\n\tif (devices.length > 0 && devices.length === Object.keys(markers).length) {\r\n\t\t\r\n\t\tfor (let key in markers) {\r\n\t\t\tlet device = markers[key];\r\n\t\t\tif (device !== null) {\r\n\t\t\t\tlet marker = <Marker key={'marker-' + device.id} position={device.options.position} device={device} settings={settings.component} />\r\n\t\t\t\tmapMarkers.push(marker);\r\n\t\t\t\t\r\n\t\t\t\tlet item = null;\r\n\t\t\t\tif (device.attributes.avatar) {\r\n\t\t\t\t\titem = <Avatar key={'overview-' + device.id} alt={device.name} src={device.attributes.avatar} onClick={() => memoizedHandleClick(device.options.position)} />\r\n\t\t\t\t}\r\n\t\t\t\telse {\r\n\t\t\t\t\tlet state = device.getDeviceState();\r\n\t\t\t\t\tconst icon = device.getIcon(null, state && state.val !== undefined ? state.val : null);\r\n\t\t\t\t\tconst styles = device.getStyle('icon', null, state && state.val !== undefined ? state.val : null);\r\n\t\t\t\t\t\r\n\t\t\t\t\tconsole.log(state && state.val !== undefined ? state.val : null);\r\n\t\t\t\t\tconsole.log(styles);\r\n\t\t\t\t\t\r\n\t\t\t\t\titem = <Avatar style={styles} key={'overview-' + device.id} alt={device.name} onClick={() => memoizedHandleClick(device.options.position)}><span className={clsx('mdi mdi-' + icon)}></span></Avatar>\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tmapOverview.push(<Tooltip key={'tooltip-' + device.id} title={device.name} aria-label={device.name} arrow>{item}</Tooltip>);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\t\r\n\treturn (\r\n\r\n<React.Fragment>\r\n\t<Box className={classes.mapOverview}>\r\n\t\t<Typography>{i18n.t('Jump to')}:</Typography>\r\n\t\t{mapOverview}\r\n\t</Box>\r\n\t<LeafletMap useFlyTo={true} center={position} zoom={zoom} className={classes.map} whenReady={memoizedMapInitialised}>\r\n\t\t<TileLayer\r\n\t\t\tattribution='&amp;copy <a href=\"http://osm.org/copyright\">OpenStreetMap</a> contributors'\r\n\t\t\turl='https://{s}.tile.osm.org/{z}/{x}/{y}.png'\r\n\t\t\t/>\r\n\t\t\r\n\t\t{mapMarkers}\r\n\t</LeafletMap>\r\n</React.Fragment>\r\n\r\n\t);\r\n}\r\n\r\n\r\nfunction Marker(props) {\r\n\tconst { position, device, settings } = props;\r\n\tconst classes = useStyles();\r\n\t\r\n\tlet markerIcon = null, offset = 40;\r\n\tLog._('Modules (Map)', 'Marker for ' + device.function + ' ' + device.name + ' added to map.');\r\n\t\r\n\t// Marker with avatar / picture\r\n\tif (device.attributes && device.attributes.avatar && device.attributes.avatar.substr(0, 11) === 'data:image/') {\r\n\t\tmarkerIcon = L.divIcon({\r\n\t\t\tclassName: classes.mapIconContainer,\r\n\t\t\thtml: '<img src=\"' + device.attributes.avatar + '\" class=\"' + classes.mapIconParent + '\" />',\r\n\t\t\ticonSize: [ 64, 64 ]\r\n\t\t});\r\n\t}\r\n\t\r\n\t// Marker with Icon\r\n\telse {\r\n\t\toffset = 30;\r\n\t\tlet state = device.getDeviceState();\r\n\t\tconst icon = device.getIcon(null, state && state.val !== undefined ? state.val : null);\r\n\t\tconst styles = device.getStyle('icon', null, state && state.val !== undefined ? state.val : null);\r\n\t\t\r\n\t\tconsole.log(styles); \r\n\t\tconst useStyles = makeStyles({root: styles}, {name:'testi'});\r\n\t\tconsole.log(useStyles.root); \r\n\t\t\r\n\t\tmarkerIcon = L.divIcon({\r\n\t\t\tclassName: classes.mapIconContainer,\r\n\t\t\thtml: '<div class=\"' + clsx(classes.mapIconParent) + '\"><span class=\"' + clsx(classes.mapIcon, 'mdi mdi-' + icon) + '\"></span></div>',\r\n\t\t\ticonSize: [ 40, 40 ]\r\n\t\t});\r\n\t}\r\n\t\r\n\t// Marker MouseOver / MouseOut (bring tooltip to front if markers overlay)\r\n\tconst memoizedHandleMouseEvent = useCallback(function() {this.closeTooltip().openTooltip()}, [],);\r\n\r\n\treturn (\r\n\r\n<LeafletMarker riseOnHover={true} position={Array.isArray(position) ? position : position.split(',')} icon={markerIcon} onMouseOver={memoizedHandleMouseEvent}>\r\n\t<LeafletTooltip className={classes.mapTooltip} direction={settings.tooltipDirection || 'bottom'} permanent={settings.tooltipPermanent || true} offset={[0,offset]}>\r\n\t\t{device.name}\r\n\t</LeafletTooltip>\r\n</LeafletMarker>\r\n\r\n\t);\r\n}","import React from 'react'\r\n\r\nimport StateList from './StateList'\r\n\r\n\r\nexport default function StateListHorizontal(props) {\r\n\treturn (<StateList horizontal={true} {...props} />);\r\n}\r\n","import React, { useState, useEffect } from 'react'\r\n\r\nimport Log from '../Log'\r\nimport Connection from '../Connection'\r\nimport i18n from '../i18n'\r\n\r\nimport Grid from '@material-ui/core/Grid'\r\nimport Paper from '@material-ui/core/Paper'\r\nimport Typography from '@material-ui/core/Typography'\r\n\r\n\r\n/*\r\n * STYLES\r\n */\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nconst useStyles = makeStyles(theme => ({\r\n\tpaper: {\r\n\t\twidth: 100,\r\n\t\theight: 160,\r\n\t\tpadding: 5,\r\n\t\ttextAlign: 'center',\r\n\t}\r\n}));\r\n\r\n\r\nexport default function Weather(props) {\r\n\tconst { settings } = props;\r\n\tconst classes = useStyles();\r\n\t\r\n\tconst [data,setData] = useState(null);\r\n\tuseEffect(() => {\r\n\t\t\r\n\t\tConnection.getConnection.getRemoteResource(settings.url).then(\r\n\t\t\tresponse => {\r\n\t\t\t\t\r\n\t\t\t\tif (response.statusCode === 200) {\r\n\t\t\t\t\tsetData(JSON.parse(response.body));\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\terr => Log._('Modules (Weather)', err.message, 'error', true, err.stack)\r\n\t\t);\r\n\t\t\r\n\t}, [settings.url]);\r\n\t\r\n\tlet weatherForecast = [];\r\n\t//console.log(data);\r\n\t\r\n\tif (!data) {\r\n\t\treturn null;\r\n\t}\r\n\telse {\r\n\t\tfor (let day in data.day) {\r\n\t\t\tlet forecast = data.day[day];\r\n\t\t\tforecast.title = day === 1 ? i18n.t('today') : (day === 2 ? i18n.t('tomorrow') : forecast.name);\r\n\t\t\t\r\n\t\t\tconst dailyForecast = (\r\n\r\n<Grid key={'day-' + day} item>\r\n\t<Paper className={classes.paper}>\r\n\t\t<Typography variant=\"body1\">\r\n\t\t\t{forecast.title}\r\n\t\t</Typography>\r\n\t\t<Typography variant=\"caption\">\r\n\t\t\t{forecast.date}\r\n\t\t</Typography>\r\n\r\n\r\n\t</Paper>\r\n</Grid>\r\n\r\n\t\t\t);\r\n\t\t\t\r\n\t\t\tweatherForecast.push(dailyForecast);\r\n\t\t}\r\n\t}\r\n\t\r\n\treturn (\r\n\r\n<Grid container justify=\"space-between\" spacing={1}>\r\n\t{weatherForecast}\r\n\t\r\n</Grid>\r\n\r\n\t);\r\n}\r\n\r\nexport const ModuleSettings = {\r\n\tnoDevicesAllowed: true,\r\n\ttitle: i18n.t('Weather'),\r\n\ticon: 'weather-partly-cloudy'\r\n}\r\n","import React from 'react'\r\nimport clsx from 'clsx'\r\n\r\nimport Log from '../Log'\r\n\r\nimport helpers from '../helpers/timeConverter'\r\n\r\nimport Divider from '@material-ui/core/Divider'\r\n//import IconButton from '@material-ui/core/IconButton'\r\nimport Fab from '@material-ui/core/Fab'\r\nimport PlayIcon from '@material-ui/icons/PlayArrow'\r\nimport PauseIcon from '@material-ui/icons/Pause'\r\nimport StopIcon from '@material-ui/icons/Stop'\r\nimport SkipPreviousIcon from '@material-ui/icons/SkipPrevious'\r\nimport SkipNextIcon from '@material-ui/icons/SkipNext'\r\n\r\n\r\n/*\r\n * STYLES\r\n */\r\nimport { withStyles } from '@material-ui/core/styles';\r\nconst styles = theme => ({\r\n\tdivider: {\r\n\t\tmargin: '15px -16px'\r\n\t},\r\n\tcontainer: {\r\n\t\tmargin: theme.spacing(0, -2),\r\n\t},\r\n\tnoHeader: {\r\n\t\tmarginTop: theme.spacing(-4),\r\n\t},\r\n\timage: {\r\n\t\theight: '200px',\r\n\t\tdisplay: 'flex',\r\n\t\talignItems: 'flex-end',\r\n\t\tbackgroundPosition: 'center',\r\n\t\tcursor: 'pointer'\r\n\t},\r\n\tnoImage: {\r\n\t\tbackgroundColor: theme.palette.primary.main,\r\n\t\tdisplay: 'flex',\r\n\t\tcursor: 'pointer'\r\n\t},\r\n\tinformation: {\r\n\t\tbackgroundColor: theme.palette.primary.main + '66',\r\n\t\tcolor: '#fff',\r\n\t\tpadding: '10px',\r\n\t\tmargin: 0,\r\n\t\twidth: '100%',\r\n\t\tminHeight: '45px'\r\n\t},\r\n\tinformationLeft: {\r\n\t\twidth: '80%',\r\n\t\tfloat: 'left',\r\n\t\tmargin: 0\r\n\t},\r\n\tinformationRight: {\r\n\t\twidth: '19%',\r\n\t\tfloat: 'right',\r\n\t\tmargin: 0,\r\n\t\ttextAlign: 'right'\r\n\t},\r\n\tlength: {\r\n\t\tbackgroundColor: theme.palette.primary.main,\r\n\t\twidth: '100%',\r\n\t\theight: '7px',\r\n\t},\r\n\tlengthBar: {\r\n\t\tbackgroundColor: theme.palette.secondary.main,\r\n\t\theight: '100%',\r\n\t},\r\n\tcontrols: {\r\n\t\tdisplay: 'flex',\r\n\t\talignItems: 'stretch'\r\n\t},\r\n\tcontrolsBox: {\r\n\t\tdisplay: 'flex',\r\n\t\tjustifyContent: 'center',\r\n\t\talignItems: 'center',\r\n\t\tpaddingTop: '30px'\r\n\t},\r\n\tcontrolsBoxLeft: {\r\n\t\tflex: 1,\r\n\t\tflexDirection: 'column',\r\n\t\talignItems: 'baseline'\r\n\t},\r\n\tcontrolsBoxCenter: {\r\n\t\tflex: 3\r\n\t},\r\n\tcontrolsBoxRight: {\r\n\t\tflex: 1,\r\n\t\tjustifyContent: 'end'\r\n\t},\r\n\tcontrolButton: {\r\n\t\tmargin: '0 5px'\r\n\t},\r\n\tcontrolButtonSmall: {\r\n\t\tmargin: '0 10px',\r\n\t\tfontSize: '1.2rem',\r\n\t\theight: '32px',\r\n\t\twidth: '32px'\r\n\t}\r\n});\r\n\r\n\r\nclass Multimedia extends React.Component {\r\n\t\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\t\r\n\t\tthis.state = {}\r\n\t}\r\n\t\r\n\tcomponentDidMount() {\r\n\t\t\r\n\t\t// get initial states\r\n\t\tfor (let stateKey in this.props.device.states) {\r\n\t\t\tthis.props.device.requestDeviceState(stateKey, true).catch(err => Log._('Modules (MultimediaItem)', err.message, 'error', true, err.stack));\r\n\t\t}\r\n\t\t\r\n\t\t// receive updates\r\n\t\tthis.props.device.listen(this.stateChange);\r\n\t}\r\n\t\r\n\tcomponentWillUnmount() {\r\n\t\tthis.props.device.unlisten(this.stateChange);\r\n\t}\r\n\t\r\n\tstateChange = (stateKey, state) => {\r\n\t\t\r\n\t\t// duration\r\n\t\tif (stateKey === 'duration' && state && state.val.indexOf(':') === -1) {\r\n\t\t\tstate.val = helpers.timeToHoursMinutesSeconds(state.val);\r\n\t\t}\r\n\t\t\r\n\t\t// isRunning\r\n\t\tif (stateKey === 'isRunning' && state && typeof state.val === 'string') {\r\n\t\t\tstate.val = state.val.indexOf('play') > -1;\r\n\t\t}\r\n\t\t\r\n\t\tthis.setState({ [stateKey]: state }, () => {\r\n\t\t\tthis.progress();\r\n\t\t});\r\n\t}\r\n\t\r\n\tprogress() {\r\n\t\tclearTimeout(this.progressTimeout);\r\n\t\t\r\n\t\tif (this.state.isRunning && this.state.isRunning.val === true && this.state.progress && this.state.progress.val && this.state.duration && this.state.duration.val) {\r\n\t\t\tthis.progressTimeout = setTimeout(() => {\r\n\t\t\t\tthis.setState(prevState => ({ progress: { ...prevState.progress, val: helpers.timeToSeconds(prevState.progress.val) + 1 }}), () => this.progress());\r\n\t\t\t}, 1000);\r\n\t\t}\r\n\t}\r\n\t\r\n\topenDialog() {\r\n\t\tthis.props.openDialog(this.props.device);\r\n\t}\r\n\t\r\n\tsetDeviceState(stateKey, value) {\r\n\t\tthis.props.device.setDeviceState(stateKey, value).catch(err => Log._('Modules (MultimediaItem)', err.message, 'error', true, err.stack));\r\n\t}\r\n\t\r\n\trender() {\r\n\t\tconst { classes, noHeader, index, device } = this.props;\r\n\t\tlet styleImage = {}, styleLength = {}, styleLengthBar = {};\r\n\t\t\r\n\t\t// background\r\n\t\tif (this.state.background && this.state.background.val !== '') {\r\n\t\t\tstyleImage.backgroundImage = 'url(' + ((device.options.backgroundUrlPrepend || '') + this.state.background.val) + ')';\r\n\t\t}\r\n\t\t\r\n\t\t// duration\r\n\t\tif (this.state.duration && this.state.duration.val) {\r\n\t\t\tstyleLengthBar.width = ((this.state.progress && this.state.progress.val) || 0) + 'px';\r\n\t\t}\r\n\t\t\r\n\t\tconst playIconElements = this.state.isRunning && this.state.isRunning.val ? [<PauseIcon onClick={this.setDeviceState.bind(this, 'pause', true)} />, <StopIcon />] : [<PlayIcon onClick={this.setDeviceState.bind(this, 'play', true)} />];\r\n\t\t//const repeatIcon = 'repeat'; // repeat, repeat-off, repeat-once\r\n\t\t//const shuffleIcon = 'shuffle-variant'; // shuffle-variant, shuffle-disabled\r\n\t\t//const volumeIcon = 'volume-high'; // volume-variant-off\r\n\t\t\r\n\t\treturn (\r\n\r\n<React.Fragment>\r\n\t\r\n\t{index > 0 && <Divider className={classes.divider} />}\r\n\t<div className={clsx(classes.container, noHeader && classes.noHeader)}>\r\n\t\t\r\n\t\t<div className={clsx(this.state.background && this.state.background.val !== '' ? classes.image : classes.noImage)} style={ styleImage } onClick={this.openDialog.bind(this)}>\r\n\t\t\t\r\n\t\t\t<div className={classes.information}>\r\n\t\t\t\t<p className={classes.informationLeft}>\r\n\t\t\t\t\t{this.state.grandParent && this.state.grandParent.val && [this.state.grandParent.val, <br key={'br-' + device.id} />]}\r\n\t\t\t\t\t{this.state.parent && this.state.parent.val && this.state.parent.val + ' - '}{this.state.title && this.state.title.val}\r\n\t\t\t\t</p>\r\n\t\t\t\t<p className={classes.informationRight}>\r\n\t\t\t\t\t{this.state.progress && helpers.timeToHoursMinutesSeconds(this.state.progress.val)} / {this.state.duration && this.state.duration.val}\r\n\t\t\t\t</p>\r\n\t\t\t</div>\r\n\t\t\t\r\n\t\t</div>\r\n\t\t<div className={classes.length} style={ styleLength }>\r\n\t\t\t<div className={classes.lengthBar} style={ styleLengthBar }></div>\r\n\t\t</div>\r\n\t\t\r\n\t\t<div className={classes.controls}>\r\n\t\t\t<div className={clsx(classes.controlsBox, classes.controlsBoxLeft)}>\r\n\t\t\t\t{/*\r\n\t\t\t\t<IconButton size=\"small\" className={classes.controlButtonSmall}>\r\n\t\t\t\t\t<span className={'mdi mdi-' + repeatIcon}></span>\r\n\t\t\t\t</IconButton>\r\n\t\t\t\t<IconButton size=\"small\" className={classes.controlButtonSmall}>\r\n\t\t\t\t\t<span className={'mdi mdi-' + shuffleIcon}></span>\r\n\t\t\t\t</IconButton>\r\n\t\t\t\t*/}\r\n\t\t\t\t\r\n\t\t\t</div>\r\n\t\t\t<div className={clsx(classes.controlsBox, classes.controlsBoxCenter)}>\r\n\t\t\t\t\r\n\t\t\t\t<Fab className={classes.controlButton} size=\"small\" color=\"secondary\">\r\n\t\t\t\t\t<SkipPreviousIcon onClick={this.setDeviceState.bind(this, 'previous', true)} />\r\n\t\t\t\t</Fab>\r\n\t\t\t\t\r\n\t\t\t\t{playIconElements.map((icon, i) => \r\n\t\t\t\t<Fab key={'icon-' + i} className={classes.controlButton} size=\"large\" color=\"primary\">\r\n\t\t\t\t\t{icon}\r\n\t\t\t\t</Fab>\r\n\t\t\t\t)}\r\n\t\t\t\t\r\n\t\t\t\t<Fab className={classes.controlButton} size=\"small\" color=\"secondary\">\r\n\t\t\t\t\t<SkipNextIcon onClick={this.setDeviceState.bind(this, 'next', true)} />\r\n\t\t\t\t</Fab>\r\n\t\t\t\t\r\n\t\t\t</div>\r\n\t\t\t<div className={clsx(classes.controlsBox, classes.controlsBoxRight)}>\r\n\t\t\t\t{/*\r\n\t\t\t\t<IconButton size=\"small\" className={classes.controlButtonSmall}>\r\n\t\t\t\t\t<span className={'mdi mdi-' + volumeIcon}></span>\r\n\t\t\t\t</IconButton>\r\n\t\t\t\t*/}\r\n\t\t\t\t\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t\t\r\n\t</div>\r\n\r\n</React.Fragment>\r\n\r\n\t\t);\r\n\t}\r\n}\r\n\r\nexport default withStyles(styles)(Multimedia);\r\n","import React from 'react'\r\n\r\nimport MultimediaItem from './MultimediaItem'\r\n\r\n\r\nexport default function StateList(props) {\r\n\tconst { devices, settings } = props;\r\n\treturn devices.map((device, i) => <MultimediaItem key={'MultimediaItem-' + device.id} {...props} index={i} noHeader={i === 0 && settings.icon === null && settings.title === null} device={device} />)\r\n}\r\n","var map = {\n\t\"./de.js\": 380,\n\t\"./en.js\": 381\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 379;","export default {\r\n\t/*\r\n\t * LOADING SCREEN\r\n\t */\r\n\t\"Retrieving settings\": \"Einstellungen werden geladen\",\r\n\t\r\n\t/*\r\n\t * GENERAL\r\n\t */\r\n\t\"last update\": \"letzte Aktualisierung\",\r\n\t\"Updates available\": \"Aktualisierung verfügbar\",\r\n\t\r\n\t/*\r\n\t * STATES\r\n\t */\r\n\t\"on\": \"an\",\r\n\t\"off\": \"aus\",\r\n\t\r\n\t\"user\": \"User\",\r\n\t\"users\": \"Users\",\r\n\t\r\n\t\"door\": \"Tür\",\r\n\t\"window\": \"Fenster\",\r\n\t\r\n\t\"open\": \"offen\",\r\n\t\"closed\": \"geschlossen\",\r\n\t\r\n\t\"turn on\": \"anschalten\",\r\n\t\"power\": \"Geräte Status\",\r\n\t\"trigger\": \"Geräte Status\",\r\n\t\r\n\t\"brightness\": \"Helligkeit\",\r\n\t\"wind\": \"Wind\",\r\n\t\"battery\": \"Batterie\",\r\n\t\r\n\t\"%DateTime\": \"%DateTime Uhr\",\r\n\t\r\n\t/*\r\n\t * HOUSEHOLD\r\n\t */\r\n\t\"running\": \"Gerät läuft\",\r\n\t\"consumption\": \"Verbrauch\"\r\n}","export default {\r\n}","var map = {\n\t\"./blind.de\": 265,\n\t\"./blind.de.js\": 265,\n\t\"./blind.en\": 266,\n\t\"./blind.en.js\": 266,\n\t\"./blind.js\": 222\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 421;","export { default } from './door'\r\n","var map = {\n\t\"./door.de\": 267,\n\t\"./door.de.js\": 267,\n\t\"./door.en\": 268,\n\t\"./door.en.js\": 268,\n\t\"./door.js\": 198\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 423;","export { default } from './heating'\r\n","var map = {\n\t\"./heating.de\": 269,\n\t\"./heating.de.js\": 269,\n\t\"./heating.en\": 270,\n\t\"./heating.en.js\": 270,\n\t\"./heating.js\": 199\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 425;","export { default } from './light'\r\n","import React, { useState, useEffect } from 'react'\r\nimport clsx from 'clsx'\r\n\r\nimport Log from '../Log'\r\nimport i18n from '../i18n'\r\n\r\nimport Slider from '@material-ui/core/Slider'\r\nimport Switch from '@material-ui/core/Switch'\r\nimport Button from '@material-ui/core/Button'\r\n\r\n\r\n/*\r\n * STYLES\r\n */\r\nimport { makeStyles, withStyles } from '@material-ui/core/styles';\r\nconst styles = theme => ({\r\n\tprimaryAction: props => ({\r\n\t\t...props.styles\r\n\t}),\r\n\tsecondaryAction: props => ({\r\n\t\tcolor: '#999',\r\n\t\tfontSize: '14px',\r\n\t\t...props.styles\r\n\t}),\r\n});\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n\tcomponent: {\r\n\t\tpadding: theme.spacing(2, 0, 2, 0)\r\n\t},\r\n\tsliderMarkLabel: {\r\n\t\t[theme.breakpoints.down('md')]: {\r\n\t\t\tdisplay: 'none',\r\n\t\t\t'&:nth-child(5)': { display: 'block' },\r\n\t\t\t'&:nth-child(15)': { display: 'block' },\r\n\t\t\t'&:nth-child(25)': { display: 'block' }\r\n\t\t}\r\n\t}\r\n}));\r\n\r\n\r\n/*\r\n * ACTIONS\r\n *\r\n */\r\nconst Action = withStyles(styles)(props => {\r\n\tconst { classes, device, state, stateKey } = props;\r\n\treturn (\r\n\r\n<span className={clsx((stateKey === device.primaryStateKey && classes.primaryAction) || (stateKey === device.secondaryStateKey && classes.secondaryAction))}>\r\n\t{state && state.value} {state && state.unit}\r\n</span>\r\n\r\n\t);\r\n});\r\n\r\nfunction PowerAction(props) {\r\n\tconst { device, stateKey, stateVal, onChange: parentOnChange } = props;\r\n\t\r\n\tconst onChange = (e) => {\r\n\t\tsetChecked(e.target.checked);\r\n\t\tdevice.setDeviceState(stateKey, e.target.checked).catch(err => Log._('Function (defaults)', err.message, 'error', true, err.stack));\r\n\t}\r\n\t\r\n\tconst [checked, setChecked] = useState(stateVal);\r\n\tuseEffect(() => setChecked(stateVal), [stateVal]);\r\n\t\r\n\treturn (\r\n\r\n<Switch\r\n\tchecked={checked}\r\n\tonChange={parentOnChange || onChange}\r\n\tvalue={checked !== true}\r\n\tcolor=\"primary\"\r\n\t/>\r\n\r\n\t);\r\n}\r\n\r\nfunction TriggerAction(props) {\r\n\tconst { device, stateKey, stateVal } = props;\r\n\t\r\n\tconst onClick = () => {\r\n\t\tdevice.setDeviceState(stateKey, true).catch(err => Log._('Function (defaults)', err.message, 'error', true, err.stack));\r\n\t}\r\n\t\r\n\t//\r\n\tif (stateVal === true || stateVal > 0) {\r\n\t\treturn <Action {...props} onChange={null} />;\r\n\t}\r\n\t\r\n\tconst icon = 'power';\r\n\treturn (\r\n\r\n<Button\r\n\tvariant=\"outlined\"\r\n\tcolor=\"primary\"\r\n\tsize=\"small\"\r\n\tstartIcon={<span className={'mdi mdi-' + icon}></span>}\r\n\tonClick={onClick}\r\n\t>\r\n\t\r\n\t{i18n.t('turn on')}\r\n</Button>\r\n\r\n\t);\r\n}\r\n\r\n\r\n/*\r\n * COMPONENTS\r\n *\r\n */\r\nfunction Label(props) {\r\n\tconst { label, br } = props;\r\n\tconst linebreak = br || false;\r\n\t\r\n\treturn (\r\n\t\r\n<React.Fragment>\r\n\t{label}\r\n\t{linebreak && <br />}\r\n</React.Fragment>\r\n\t\r\n\t);\r\n}\r\n\r\nfunction Component(props) {\r\n\tconst { title, children } = props;\r\n\tconst classes = useStyles();\r\n\t\r\n\treturn (\r\n\r\n<React.Fragment>\r\n\t<Label label={title} />\r\n\t<div className={classes.component}>\r\n\t\t{children}\r\n\t\r\n\t</div>\r\n</React.Fragment>\r\n\r\n\t);\r\n}\r\n\r\nfunction LevelComponent(props) {\r\n\tlet { device, stateKey, stateVal, title, min, max, step, markSteps } = props;\r\n\tconst classes = useStyles();\r\n\t\r\n\tconst onChange = (e, val) => setLevel(val)\r\n\tconst onChangeCommitted = (e, val) => {\r\n\t\tsetLevel(val);\r\n\t\tdevice.setDeviceState(stateKey, val).catch(err => Log._('Function (defaults)', err.message, 'error', true, err.stack));\r\n\t}\r\n\t\r\n\tconst [level, setLevel] = useState(stateVal);\r\n\tuseEffect(() => setLevel(stateVal), [stateVal]);\r\n\t\r\n\t// default settings\r\n\tmin = min || 0;\r\n\tmax = max || 100;\r\n\tstep = step || 1;\r\n\tmarkSteps = markSteps || 11; // 0 to 10\r\n\tlet markStep = ((max-min)/(markSteps-1)) || 10;\r\n\treturn (\r\n\r\n<Component title={title || stateKey }>\r\n\t<Slider\r\n\t\tclasses={{ markLabel: classes.sliderMarkLabel }}\r\n\t\tonChange={onChange}\r\n\t\tonChangeCommitted={onChangeCommitted}\r\n\t\tvalue={level}\r\n\t\tvalueLabelDisplay=\"auto\"\r\n\t\tmarks={[...Array(markSteps).keys()].map(number => ({ 'value': min+number*markStep, 'label': min+number*markStep }))}\r\n\t\tmin={min}\r\n\t\tmax={max}\r\n\t\tstep={step}\r\n\t/>\r\n\r\n</Component>\r\n\r\n\t);\r\n}\r\n\r\n\r\n\r\nexport default {\r\n\tconfigurations: {\r\n\t\t_any: {\r\n\t\t\tvalue: (val) => val.toString(),\r\n\t\t\t//unit\r\n\t\t\t//icon\r\n\t\t\t//state\r\n\t\t},\r\n\t\tbattery: {\r\n\t\t\tunit: ' %',\r\n\t\t\ticon: 'battery-medium'\r\n\t\t},\r\n\t\tdoor: {\r\n\t\t\ticon: {\r\n\t\t\t\t'true': 'door-open',\r\n\t\t\t\t'false': 'door-closed'\r\n\t\t\t},\r\n\t\t\tstate: {\r\n\t\t\t\t'true': 'open',\r\n\t\t\t\t'false': 'closed'\r\n\t\t\t},\r\n\t\t},\r\n\t\thumidity: {\r\n\t\t\tunit: ' %',\r\n\t\t\ticon: 'water-percent'\r\n\t\t},\r\n\t\tlevel: {\r\n\t\t\tunit: ' %'\r\n\t\t},\r\n\t\tposition: {\r\n\t\t\ticon: 'map-marker'\r\n\t\t},\r\n\t\tpower: {\r\n\t\t\tstate: {\r\n\t\t\t\t'true': 'on',\r\n\t\t\t\t'false': 'off'\r\n\t\t\t},\r\n\t\t\ticon: 'power'\r\n\t\t},\r\n\t\ttemperature: {\r\n\t\t\tunit: ' °C',\r\n\t\t\ticon: 'thermometer'\r\n\t\t},\r\n\t\ttrigger: {\r\n\t\t\tstate: {\r\n\t\t\t\t'true': 'on',\r\n\t\t\t\t'false': 'off'\r\n\t\t\t},\r\n\t\t\ticon: 'power'\r\n\t\t},\r\n\t\twind: {\r\n\t\t\tunit: ' km/h',\r\n\t\t\ticon: 'weather-windy'\r\n\t\t}\r\n\t},\r\n\tcomponents: {\r\n\t\tLabel,\r\n\t\tComponent,\r\n\t\tLevelComponent,\r\n\t\t\r\n\t\tlevel: LevelComponent\r\n\t},\r\n\tactions: {\r\n\t\tAction,\r\n\t\tPowerAction,\r\n\t\tTriggerAction,\r\n\t\t\r\n\t\tpower: PowerAction,\r\n\t\ttrigger: TriggerAction\r\n\t},\r\n\tstyles: {\r\n\t\t_any: {\r\n\t\t\t//icon: {},\r\n\t\t\tstate: {\r\n\t\t\t\ttrue: {\r\n\t\t\t\t\t'color': '#090',\r\n\t\t\t\t\t'fontWeight': 'bold'\r\n\t\t\t\t},\r\n\t\t\t\tfalse: {\r\n\t\t\t\t\t'color': '#999'\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n}","import EventEmitter from 'events'\r\nimport io from 'socket.io-client'\r\n\r\nimport Log from './Log'\r\n\r\n\r\n/**\r\n * Class for Socket.io conncetion handling.\r\n *\r\n * @description This is based on an implementation @GermanBluefox (https://github.com/GermanBluefox), see https://github.com/ioBroker/adapter-react/blob/master/src/Connection.js\r\n *\t\t\t\tOnly required functions are taken from source class. Major change is that all events are emitted, so proper error handling is possible in the App.\r\n *\r\n *\r\n * @param\t{String}\t\turl\r\n * @param\t{Object}\t\toptions\r\n * @return\t{Socket}\r\n * @see https://github.com/ioBroker/ioBroker.socketio/blob/master/lib/socket.js https://github.com/ioBroker/ioBroker.js-controller/blob/master/lib/adapter.js#L635\r\n *\r\n */\r\nexport default class Socket extends EventEmitter {\r\n\t\r\n\tconstructor(url = null, options = {}) {\r\n\t\tsuper();\r\n\t\t\r\n\t\t// socket connection\r\n\t\tthis.socket = io(url, { timeout: 10000, ...options, query: 'ws=true' });\r\n\t\tthis.statesSubscribes = {}; // subscribed states\r\n\t\t\r\n\t\t/*\r\n\t\t * API events\r\n\t\t * @see https://github.com/socketio/socket.io-client/blob/HEAD/docs/API.md#socket\r\n\t\t *\r\n\t\t */\r\n\t\t// connect\r\n\t\tthis.socket.on('connect', () => this.emit('connect'));\r\n\t\t\r\n\t\t// reconnect: Fired upon a successful reconnection.\r\n\t\tthis.socket.on('reconnect', attempts => this.emit('reconnect', attempts));\r\n\t\t\r\n\t\t// reconnect_error: Fired upon a reconnection attempt error.\r\n\t\tthis.socket.on('reconnect_error', error => this.emit('error', { 'type': 'reconnect', 'event': 'reconnect_error', 'message': error.message }));\r\n\t\t\r\n\t\t// reconnect_failed: Fired upon a reconnection attempt error.\r\n\t\tthis.socket.on('reconnect_failed', () => this.emit('error', { 'type': 'reconnect', 'event': 'reconnect_failed', 'message': 'Reconnection failed!' }));\r\n\t\t\r\n\t\t// discconect\r\n\t\tthis.socket.on('disconnect', reason => this.emit('disconnect', reason));\r\n\t\t\r\n\t\t// connect_error\r\n\t\tthis.socket.on('connect_error', error => this.emit('error', { 'type': 'connect', 'event': 'connect_error', 'message': error.message }));\r\n\t\t\r\n\t\t// connect_timeout\r\n\t\tthis.socket.on('connect_timeout', () => this.emit('error', { 'type': 'connect', 'event': 'connect_timeout', 'message': 'Connect ran into timeout!' }));\r\n\t\t\r\n\t\t// error\r\n\t\tthis.socket.on('error', error => this.emit('error', { 'type': 'error', 'event': 'error', 'message': error.message }));\r\n\t\t\r\n\t\t/*\r\n\t\t * ioBroker events\r\n\t\t *\r\n\t\t */\r\n\t\tthis.socket.on('stateChange', (id, state) => setTimeout(() => this.stateChange(id, state), 0));\r\n\t}\r\n\t\r\n\t/**\r\n\t * Subscribes to multiple states by setting a callback.\r\n\t *\r\n\t */\r\n\t_getPatternFromId(id) {\r\n\t\tlet pattern = id\r\n\t\t\t.replace(/\\./g, '\\\\.')\r\n\t\t\t.replace(/\\*/g, '.*')\r\n\t\t\t.replace(/\\(/g, '\\\\(')\r\n\t\t\t.replace(/\\)/g, '\\\\)')\r\n\t\t\t.replace(/\\+/g, '\\\\+')\r\n\t\t\t.replace(/\\[/g, '\\\\[');\r\n\r\n\t\tif (pattern.indexOf('*') === -1) {\r\n\t\t\tpattern += '$';\r\n\t\t}\r\n\t\t\r\n\t\treturn pattern;\r\n\t}\r\n\t\r\n\t/**\r\n\t * Subscribes to multiple states by setting a callback.\r\n\t *\r\n\t */\r\n\tsubscribeStates(ids, cb) {\r\n\t\tids = Array.isArray(ids) ? ids : [ids];\r\n\t\tids.forEach(id => this.subscribeState(id, cb));\r\n\t}\r\n\t\r\n\t/**\r\n\t * Subscribes to a state by setting a callback.\r\n\t *\r\n\t */\r\n\tsubscribeState(id, cb) {\r\n\t\t\r\n\t\tif (!this.statesSubscribes[id]) {\r\n\t\t\tlet reg = this._getPatternFromId(id);\r\n\t\t\tthis.statesSubscribes[id] = { reg: new RegExp(reg), cbs: [cb] };\r\n\t\t\t\r\n\t\t\tif (this.socket.connected) {\r\n\t\t\t\tthis.socket.emit('subscribe', id);\r\n\t\t\t}\r\n\t\t}\r\n\t\telse {\r\n\t\t\tthis.statesSubscribes[id].cbs.indexOf(cb) === -1 && this.statesSubscribes[id].cbs.push(cb);\r\n\t\t}\r\n\t}\r\n\t\r\n\t/**\r\n\t * Fires pre-registered callbacks (via subscribeState) upon state change.\r\n\t *\r\n\t */\r\n\tstateChange(id, state) {\r\n\t\t\r\n\t\tid = id ? id.replace(/[\\s'\"]/g, '_') : '';\r\n\t\tfor (const task in this.statesSubscribes) {\r\n\t\t\tif (this.statesSubscribes.hasOwnProperty(task) && this.statesSubscribes[task].reg.test(id)) {\r\n\t\t\t\tthis.statesSubscribes[task].cbs.forEach(cb => cb(id, state));\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\t\r\n\t/**\r\n\t * Gets an object view.\r\n\t *\r\n\t */\r\n\tgetAdapterInstances(adapter, cb) {\r\n\t\t\r\n\t\tif (typeof adapter === 'function') {\r\n\t\t\tcb = adapter;\r\n\t\t\tadapter = null;\r\n\t\t}\r\n\t\t\r\n\t\treturn this.getObjectView('system', 'instance', { 'startkey': 'system.adapter.' + (adapter ? adapter + '.' : ''), 'endkey': 'system.adapter.' + (adapter ? adapter + '.999' : 'zzz') }, cb);\r\n\t}\r\n\t\r\n\t/**\r\n\t * Gets an object.\r\n\t *\r\n\t */\r\n\tgetObject(id, cb) {\r\n\t\t\r\n\t\tif (!cb) {\r\n\t\t\treturn new Promise((resolve, reject) => this.getObject(id, (err, obj) => err ? reject(err) : resolve(obj)));\r\n\t\t} else {\r\n\t\t\tthis.socket.emit('getObject', id, cb);\r\n\t\t}\r\n\t}\r\n\t\r\n\t/**\r\n\t * Gets an object view.\r\n\t *\r\n\t */\r\n\tgetObjectView(design, search, params, cb) {\r\n\t\t\r\n\t\tif (!cb) {\r\n\t\t\treturn new Promise((resolve, reject) => this.getObjectView(design, search, params, err => err ? reject(err) : resolve()));\r\n\t\t} else {\r\n\t\t\tthis.socket.emit('getObjectView', design, search, params, cb);\r\n\t\t}\r\n\t}\r\n\t\r\n\t/**\r\n\t * Gets a remote ressource.\r\n\t *\r\n\t */\r\n\tgetRemoteResource(url, cb) {\r\n\t\t\r\n\t\tif (!cb) {\r\n\t\t\treturn new Promise((resolve, reject) => this.getRemoteResource(url, (err, state) => err ? reject(err) : resolve(state)));\r\n\t\t} else {\r\n\t\t\tthis.socket.emit('httpGet', url, cb);\r\n\t\t}\r\n\t}\r\n\t\r\n\t/**\r\n\t * Gets a state.\r\n\t *\r\n\t */\r\n\tgetState(id, cb) {\r\n\t\t\r\n\t\tif (!cb) {\r\n\t\t\treturn new Promise((resolve, reject) => this.getState(id, (err, state) => err ? reject(err) : resolve(state)));\r\n\t\t} else {\r\n\t\t\tthis.socket.emit('getState', id, cb);\r\n\t\t}\r\n\t}\r\n\t\r\n\t/**\r\n\t * Gets multiple states at once.\r\n\t *\r\n\t */\r\n\tgetStates(pattern, cb) {\r\n\t\t\r\n\t\tif (!cb) {\r\n\t\t\treturn new Promise((resolve, reject) => this.getStates(pattern, (err, state) => err ? reject(err) : resolve(state)));\r\n\t\t} else {\r\n\t\t\tthis.socket.emit('getStates', pattern, cb);\r\n\t\t}\r\n\t}\r\n\t\r\n\t/**\r\n\t * Gets the state history.\r\n\t *\r\n\t */\r\n\tgetStateHistory(id, options, cb) {\r\n\t\t\r\n\t\tif (typeof options === 'function') {\r\n\t\t\tcb = options;\r\n\t\t\toptions = {};\r\n\t\t}\r\n\t\t\r\n\t\tif (!cb) {\r\n\t\t\treturn new Promise((resolve, reject) => this.getStateHistory(id, options, (err, state) => err ? reject(err) : resolve(state)));\r\n\t\t} else {\r\n\t\t\tthis.socket.emit('getHistory', id, options, cb);\r\n\t\t}\r\n\t}\r\n\t\r\n\t/**\r\n\t * Sets a state.\r\n\t *\r\n\t */\r\n\tsetState(id, val, cb) {\r\n\t\t\r\n\t\tif (!cb) {\r\n\t\t\treturn new Promise((resolve, reject) => this.setState(id, val, err => err ? reject(err) : resolve()));\r\n\t\t} else {\r\n\t\t\tthis.socket.emit('setState', id, val, cb);\r\n\t\t}\r\n\t}\r\n\t\r\n\t/**\r\n\t * Unsubscribe from multiple states.\r\n\t *\r\n\t */\r\n\tunsubscribeStates(ids) {\r\n\t\tids = Array.isArray(ids) ? ids : [ids];\r\n\t\tids.forEach(id => this.unsubscribeState(id));\r\n\t}\r\n\t\r\n\t/**\r\n\t * Unsubscribe a state.\r\n\t *\r\n\t */\r\n\tunsubscribeState(id) {\r\n\t\t\r\n\t\tif (this.statesSubscribes[id] && this.socket.connected) {\r\n\t\t\tthis.socket.emit('unsubscribe', id);\r\n\t\t\tdelete this.statesSubscribes[id];\r\n\t\t}\r\n\t}\r\n}\r\n","import Socket from './Socket'\r\n\r\n/**\r\n * Connection\r\n +\r\n *\r\n */\r\nexport default class Connection {\r\n\r\n\t/*\r\n\t * URL\r\n\t */\r\n\tstatic url = window.location.hostname;\r\n\t\r\n\t/*\r\n\t * Connection\r\n\t */\r\n\tstatic connection = null;\r\n\t\r\n\t/**\r\n\t * Connects to the Socket.\r\n\t *\r\n\t * @param\t{String}\turl\r\n\t * @param\t{Array}\t\tlisteners\r\n\t * @return\t{Connection}\r\n\t */\r\n\tstatic connect(url = null, listeners = null) {\r\n\t\t\r\n\t\t// set URL\r\n\t\tif (url) {\r\n\t\t\tConnection.setUrl = url;\r\n\t\t}\r\n\t\t\r\n\t\t// connect\r\n\t\tConnection.connection = new Socket(Connection.url);\r\n\t\t\r\n\t\t// set listeners\r\n\t\tif (listeners) {\r\n\t\t\tConnection.setListeners = listeners;\r\n\t\t}\r\n\t\t\r\n\t\t// return connection\r\n\t\treturn Connection.connection;\r\n\t}\r\n\t\r\n\t/**\r\n\t * Gets the current Connection.\r\n\t *\r\n\t * @param\tvoid\r\n\t * @return\t{Connection}\tCurrent Connection\r\n\t */\r\n\tstatic get getConnection() {\r\n\t\treturn Connection.connection || null;\r\n\t}\r\n\t\r\n\t/**\r\n\t * Get the current URL.\r\n\t *\r\n\t * @param\tvoid\r\n\t * @return\t{String}\tURL\r\n\t */\r\n\tstatic get getUrl() {\r\n\t\treturn Connection.url;\r\n\t}\r\n\t\r\n\t/**\r\n\t * Reconnect to the Socket.\r\n\t *\r\n\t * @param\tvoid\r\n\t * @return\t{String}\tURL\r\n\t */\r\n\tstatic get reconnect() {\r\n\t\treturn Connection.connect;\r\n\t}\r\n\t\r\n\t/**\r\n\t * Sets an event listener.\r\n\t *\r\n\t * @param\t{Object}\t\t\tlistener\r\n\t * @param\t{String}\t\t\tlistener.event\r\n\t * @param\t{Function}\t\t\tlistener.callback\r\n\t * @return\tvoid\r\n\t */\r\n\tstatic set setListener(listener) {\r\n\t\tConnection.connection.on(listener.event, listener.callback);\r\n\t}\r\n\t\r\n\t/**\r\n\t * Set event listeners.\r\n\t *\r\n\t * @param\t{Array<Object>}\t\tlisteners\r\n\t * @return \t{Boolean}\r\n\t */\r\n\tstatic set setListeners(listeners = []) {\r\n\t\t\r\n\t\tif (!listeners || !Array.isArray(listeners)) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\t\r\n\t\tlisteners.forEach(listener => Connection.setListener = listener);\r\n\t\treturn true;\r\n\t}\r\n\t\r\n\t/**\r\n\t * Set a new URL (has to be set before calling connect()).\r\n\t *\r\n\t * @param\t{String}\tURL\r\n\t * @return\tvoid\r\n\t */\r\n\tstatic set setUrl(url) {\r\n\t\tConnection.url = url;\r\n\t}\r\n}\r\n","var map = {\n\t\"./light.de\": 304,\n\t\"./light.de.js\": 304,\n\t\"./light.en\": 305,\n\t\"./light.en.js\": 305,\n\t\"./light.js\": 221\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 588;","export { default } from './location'\r\n","var map = {\n\t\"./location.de\": 306,\n\t\"./location.de.js\": 306,\n\t\"./location.en\": 307,\n\t\"./location.en.js\": 307,\n\t\"./location.js\": 218\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 590;","export { default } from './user'\r\n","var map = {\n\t\"./user.de\": 308,\n\t\"./user.de.js\": 308,\n\t\"./user.en\": 309,\n\t\"./user.en.js\": 309,\n\t\"./user.js\": 219\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 592;","export { default } from './window'\r\n","var map = {\n\t\"./window.de\": 310,\n\t\"./window.de.js\": 310,\n\t\"./window.en\": 311,\n\t\"./window.en.js\": 311,\n\t\"./window.js\": 220\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 594;","import React from 'react'\r\nimport clsx from 'clsx'\r\n\r\nimport config, { NODES } from '../config/config'\r\nimport Connection from '../Connection'\r\nimport Settings from '../Settings'\r\nimport i18n from '../i18n'\r\n\r\nimport DialogTitle from '@material-ui/core/DialogTitle'\r\nimport DialogContent from '@material-ui/core/DialogContent'\r\nimport DialogActions from '@material-ui/core/DialogActions'\r\nimport Button from '@material-ui/core/Button'\r\nimport Paper from '@material-ui/core/Paper'\r\nimport Tabs from '@material-ui/core/Tabs'\r\nimport Tab from '@material-ui/core/Tab'\r\n\r\nimport IconButton from '@material-ui/core/IconButton'\r\nimport CloseIcon from '@material-ui/icons/Close'\r\n\r\nimport TableBody from '@material-ui/core/TableBody'\r\nimport TableRow from '@material-ui/core/TableRow'\r\nimport TableCell from '@material-ui/core/TableCell'\r\n\r\nimport ExpansionPanel from '@material-ui/core/ExpansionPanel'\r\nimport ExpansionPanelDetails from '@material-ui/core/ExpansionPanelDetails'\r\nimport ExpansionPanelSummary from '@material-ui/core/ExpansionPanelSummary'\r\nimport Typography from '@material-ui/core/Typography'\r\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore'\r\n\r\nimport TextField from '@material-ui/core/TextField'\r\nimport FormControl from '@material-ui/core/FormControl'\r\nimport FormControlLabel from '@material-ui/core/FormControlLabel'\r\nimport FormHelperText from '@material-ui/core/FormHelperText'\r\nimport Switch from '@material-ui/core/Switch'\r\nimport Select from '@material-ui/core/Select'\r\nimport Checkbox from '@material-ui/core/Checkbox'\r\nimport InputLabel from '@material-ui/core/InputLabel'\r\nimport MenuItem from '@material-ui/core/MenuItem'\r\n\r\nimport EnhancedTable from '../components/EnhancedTable'\r\n\r\n\r\n/*\r\n * STYLES\r\n */\r\nimport { withStyles } from '@material-ui/core/styles'\r\nconst styles = theme => ({\r\n\ttabs: {\r\n\t\tmarginBottom: '10px'\r\n\t},\r\n\theading: {\r\n\t\tfontSize: theme.typography.pxToRem(15),\r\n\t\tflexBasis: '33.33%',\r\n\t\tflexShrink: 0,\r\n\t},\r\n\tsecondaryHeading: {\r\n\t\tfontSize: theme.typography.pxToRem(15),\r\n\t\tcolor: theme.palette.text.secondary,\r\n\t},\r\n\tcloseButton: {\r\n\t\tposition: 'absolute',\r\n\t\tright: theme.spacing(1),\r\n\t\ttop: theme.spacing(1),\r\n\t\tcolor: theme.palette.grey[500],\r\n\t},\r\n\tdialogContent: {\r\n\t\tbackgroundColor: '#fafafa'\r\n\t},\r\n\ttitle: {\r\n\t\tpaddingLeft: theme.spacing(2),\r\n\t\tpaddingRight: theme.spacing(1),\r\n\t\tminHeight: '64px',\r\n\t\tdisplay: 'flex',\r\n\t\tposition: 'relative',\r\n\t\talignItems: 'center'\r\n\t},\r\n\tinput: {\r\n\t\twidth: 300\r\n\t},\r\n\ttextField: {\r\n\t\tmarginLeft: theme.spacing(1),\r\n\t\tmarginRight: theme.spacing(1)\r\n\t},\r\n\trawEditor: {\r\n\t\tfontFamily: 'Roboto Mono,Consolas,Courier New,monospace !important'\r\n\t}\r\n});\r\n\r\n\r\nconst headCells = [\r\n  { id: 'name', disablePadding: true, label: i18n.t('Name') },\r\n  { id: 'function', disablePadding: false, label: i18n.t('Function') },\r\n  { id: 'states', disablePadding: false, label: i18n.t('States') },\r\n  { id: 'jarvis', disablePadding: false, label: i18n.t('Jarvis') },\r\n  { id: 'attributes', disablePadding: false, label: i18n.t('Attributes') },\r\n];\r\n\r\nclass SettingsPage extends React.Component {\r\n\t\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\t\r\n\t\tdelete Settings.settings.iobroker;\r\n\t\tthis.state = {\r\n\t\t\ttab: 0,\r\n\t\t\tpanel: false,\r\n\t\t\tsettings: Settings.settings || {}\r\n\t\t}\r\n\t\t\r\n\t\tthis.rows = Object.keys(this.props.devices).map(deviceId => ({ id: deviceId, ...this.props.devices[deviceId] }));\r\n\t}\r\n\t\r\n\t/*\r\n\t *\r\n\t */\r\n\thandleTabChange = (event, tab) => this.setState({ tab });\r\n\thandlePanelChange = panel => (event, isExpanded) => this.setState({ panel: isExpanded ? panel : false });\r\n\thandleSwitchChange = key => event => {\r\n\t\tlet userInput = (event && event.target && event.target.checked) || false;\r\n\t\tthis.setState(prevState => ({ settings: { ...prevState.settings, [key]: userInput } }));\r\n\t}\r\n\t\r\n\thandleTextChange = key => event => {\r\n\t\tlet userInput = (event && event.target && event.target.value) || '';\r\n\t\t\r\n\t\tif (key) {\r\n\t\t\tthis.setState(prevState => ({ settings: { ...prevState.settings, [key]: userInput } }));\r\n\t\t}\r\n\t\telse {\r\n\t\t\tthis.setState({ settings: JSON.parse(userInput) });\r\n\t\t}\r\n\t}\r\n\t\r\n\t/*\r\n\t *\r\n\t */\r\n\tsave = () => {\r\n\t\t\r\n\t\tSettings.setSettings(this.state.settings);\r\n\t\tConnection.getConnection.setState(NODES.SETTINGS, JSON.stringify(Settings.settings))\r\n\t\t\t.then(() => window.location.reload())\r\n\t\t\t.catch(err => console.error(err));\r\n\t}\r\n\t\r\n\t/*\r\n\t *\r\n\t */\r\n\trenderSettingForSelect(key, setting) {\r\n\t\tconst { classes } = this.props;\r\n\t\t\r\n\t\tsetting.options = setting.options || {};\r\n\t\tconst options = Object.keys(setting.options).map(option => <MenuItem key={'MenuItem-' + key + '-' + option} value={option}>{setting.options[option]}</MenuItem>);\r\n\t\treturn (\r\n\r\n<FormControl key={'FormControl-' + key} className={classes.formControl}>\r\n\t<InputLabel>{setting.label}</InputLabel>\r\n\t<Select\r\n\t\tkey={'Select-' + key}\r\n\t\tclassName={classes.input}\r\n\t\tvalue={this.state.settings[key] || setting.default || ''}\r\n\t\tonChange={this.handleTextChange(key)}\r\n\t\t>\r\n\t\t\r\n\t\t{options}\r\n\t</Select>\r\n\t<FormHelperText>{setting.helperText || ''}</FormHelperText>\r\n</FormControl>\r\n\r\n\t\t)\r\n\t}\r\n\t\r\n\t/*\r\n\t *\r\n\t */\r\n\trenderSettingForText(key, setting) {\r\n\t\tconst { classes } = this.props;\r\n\t\t\r\n\t\treturn (\r\n\r\n<TextField\r\n\tkey={'TextField-' + key}\r\n\tclassName={clsx(classes.input, classes.textField)}\r\n\tlabel={setting.label}\r\n\tplaceholder={setting.default || ''}\r\n\thelperText={setting.helperText || ''}\r\n\tonChange={this.handleTextChange(key)}\r\n\tvalue={this.state.settings[key] || ''}\r\n\t/>\r\n\r\n\t\t)\r\n\t}\r\n\t\r\n\t/*\r\n\t *\r\n\t */\r\n\trenderSettingForSwitch(key, setting) {\r\n\t\t\r\n\t\treturn (\r\n\r\n<FormControlLabel\r\n\tkey={'FormControlLabel-' + key}\r\n\tcontrol={<Switch checked={this.state.settings[key] !== undefined ? this.state.settings[key] : (setting.default || false)} onChange={this.handleSwitchChange(key)} />}\r\n\tlabel={setting.label}\r\n\t/>\r\n\r\n\t\t)\r\n\t}\r\n\t\r\n\t/*\r\n\t *\r\n\t */\r\n\trenderSetting(key, setting) {\r\n\t\t\r\n\t\tswitch(setting.type) {\r\n\t\t\tcase 'text':\r\n\t\t\t\treturn this.renderSettingForText(key, setting);\r\n\t\t\t\r\n\t\t\tcase 'switch':\r\n\t\t\t\treturn this.renderSettingForSwitch(key, setting);\r\n\t\t\t\r\n\t\t\tcase 'select':\r\n\t\t\t\treturn this.renderSettingForSelect(key, setting);\r\n\t\t\t\t\r\n\t\t\tdefault:\r\n\t\t\t\treturn null;\r\n\t\t}\r\n\t}\r\n\t\r\n\t/*\r\n\t *\r\n\t */\r\n\trenderPanel(key, panel) {\r\n\t\tconst { classes } = this.props;\r\n\t\t\r\n\t\tconst settings = Object.keys(panel.settings).map(setting => this.renderSetting(setting, panel.settings[setting]));\r\n\t\treturn (\r\n\r\n<ExpansionPanel\r\n\tkey={'ExpansionPanel-' + key}\r\n\texpanded={this.state.panel === key}\r\n\tonChange={this.handlePanelChange(key)}\r\n\t>\r\n\t\r\n\t<ExpansionPanelSummary\r\n\t\texpandIcon={<ExpandMoreIcon />}\r\n\t\tid={'panel-header-' + key}\r\n\t\t>\r\n\t\t\r\n\t\t<Typography className={classes.heading}>{panel.label}</Typography>\r\n\t\t{panel.description && <Typography className={classes.secondaryHeading}>{panel.description}</Typography>}\r\n\t</ExpansionPanelSummary>\r\n\t<ExpansionPanelDetails>\r\n\t\t{settings}\r\n\t</ExpansionPanelDetails>\r\n</ExpansionPanel>\r\n\r\n\t\t)\r\n\t}\r\n\t\r\n\trenderTableForDevices = (props) => {\r\n\t\tconst { columns, pageRows, emptyRows, selected, onClick } = props;\r\n\t\tconst isSelected = id => selected.indexOf(id) !== -1;\r\n\t\t\r\n\t\treturn (\r\n\r\n<TableBody>\r\n\t{this.rows.map((device, index) => {\r\n\t\tconst isItemSelected = isSelected(device.id);\r\n\t\tconst labelId = `device-${index}`;\r\n\t\t\r\n\t\treturn (\r\n\t\t\t<TableRow\r\n\t\t\t\thover\r\n\t\t\t\tonClick={event => props.onClick(event, device.id)}\r\n\t\t\t\trole=\"checkbox\"\r\n\t\t\t\taria-checked={isItemSelected}\r\n\t\t\t\ttabIndex={-1}\r\n\t\t\t\tkey={device.id}\r\n\t\t\t\tselected={isItemSelected}\r\n\t\t\t\t>\r\n\t\t\t\t\r\n\t\t\t\t<TableCell padding=\"checkbox\"><Checkbox checked={isItemSelected} inputProps={{ 'aria-labelledby': labelId }} /></TableCell>\r\n\t\t\t\t<TableCell id={labelId} scope=\"row\"><TextField InputProps={{ disableUnderline: true }} style={{ width: 400 }} value={device.name} /></TableCell>\r\n\t\t\t\t<TableCell id={labelId} scope=\"row\"><TextField InputProps={{ disableUnderline: true }} style={{ width: 400 }} value={device.function} /></TableCell>\r\n\t\t\t\t\r\n\t\t\t\t<TableCell id={labelId} scope=\"row\"><TextField /></TableCell>\r\n\t\t\t\t\r\n\t\t\t\t<TableCell id={labelId} scope=\"row\"><TextField /></TableCell>\r\n\t\t\t\t\r\n\t\t\t\t<TableCell id={labelId} scope=\"row\"><TextField /></TableCell>\r\n\t\t\t\t\r\n\t\t\t</TableRow>\r\n\t\t)\r\n\t})}\r\n</TableBody>\r\n\r\n\t\t)\r\n\t}\r\n\t\r\n\t/*\r\n\t *\r\n\t */\r\n\trender() {\r\n\t\tconst { classes } = this.props;\r\n\t\t\r\n\t\tconst panels = Object.keys(config).map(panel => this.renderPanel(panel, config[panel]));\r\n\t\treturn (\r\n\r\n<React.Fragment>\r\n\t<DialogTitle disableTypography>\r\n\t\t<Typography variant=\"h6\">Configuration</Typography>\r\n\t\t<IconButton aria-label=\"close\" className={classes.closeButton} onClick={() => this.props.onClose()}>\r\n\t\t\t<CloseIcon />\r\n\t\t</IconButton>\r\n\t</DialogTitle>\r\n\t<DialogContent className={classes.dialogContent}>\r\n\t\t\r\n\t\t<Paper square>\r\n\t\t\t<Tabs\r\n\t\t\t\tclassName={classes.tabs}\r\n\t\t\t\tvalue={this.state.tab}\r\n\t\t\t\tindicatorColor=\"primary\"\r\n\t\t\t\ttextColor=\"primary\"\r\n\t\t\t\tonChange={this.handleTabChange}\r\n\t\t\t\t>\r\n\t\t\t\t\r\n\t\t\t\t<Tab label=\"Devices\" />\r\n\t\t\t\t<Tab label=\"Settings\" />\r\n\t\t\t\t<Tab label=\"Layout\" />\r\n\t\t\t\t<Tab label={[\"Settings & Layout\", <br key='tab' />, \"Raw Editor\"]} />\r\n\t\t\t</Tabs>\r\n\t\t</Paper>\r\n\t\t<div hidden={this.state.tab !== 0}>\r\n\t\t\t<Paper className={classes.paper}>\r\n\t\t\t\t<EnhancedTable\r\n\t\t\t\t\ttitle=\"Devices\"\r\n\t\t\t\t\theadCells={headCells}\r\n\t\t\t\t\trows={this.rows}\r\n\t\t\t\t\tCustomTableBody={this.renderTableForDevices}\r\n\t\t\t\t\t/>\r\n\t\t\t</Paper>\r\n\t\t\t\r\n\t\t</div>\r\n\t\t<div hidden={this.state.tab !== 1} style={{ width: '100%' }}>\r\n\t\t\t<Paper className={classes.title}>\r\n\t\t\t\t<Typography variant=\"h6\" id=\"tableTitle\">\r\n\t\t\t\t\t{i18n.t('Settings')}\r\n\t\t\t\t</Typography>\r\n\t\t\t</Paper>\r\n\t\t\t{panels}\r\n\t\t\t\r\n\t\t</div>\r\n\t\t<div hidden={this.state.tab !== 2}>\r\n\t\t\tLayout\r\n\t\t\t\r\n\t\t</div>\r\n\t\t<div hidden={this.state.tab !== 3} style={{ width: '100%' }}>\r\n\t\t\t<Paper className={classes.paper}>\r\n\t\t\t\t<Typography className={classes.title} variant=\"h6\" id=\"tableTitle\">\r\n\t\t\t\t\t{i18n.t('Raw Editor')}\r\n\t\t\t\t</Typography>\r\n\t\t\t\t<TextField\r\n\t\t\t\t\tInputProps={{ className: classes.rawEditor }}\r\n\t\t\t\t\tkey={'TextField-Raw'}\r\n\t\t\t\t\tmultiline\r\n\t\t\t\t\tfullWidth\r\n\t\t\t\t\tonChange={this.handleTextChange(null)}\r\n\t\t\t\t\tvalue={JSON.stringify(this.state.settings, null, 3)}\r\n\t\t\t\t\t/>\r\n\t\t\t</Paper>\r\n\t\t\t\r\n\t\t</div>\r\n\t\t\r\n\t</DialogContent>\r\n\t<DialogActions>\r\n\t\t<Button autoFocus onClick={() => this.props.onClose()} color=\"secondary\">\r\n\t\t\t{i18n.t('Cancel')}\r\n\t\t</Button>\r\n\t\t<Button onClick={this.save} color=\"primary\">\r\n\t\t\t{i18n.t('Save')}\r\n\t\t</Button>\r\n\t</DialogActions>\r\n</React.Fragment>\r\n\r\n\t\t)\r\n\t}\r\n}\r\n\r\nexport default withStyles(styles)(SettingsPage);\r\n","import React from 'react'\r\n\r\nimport Log from '../Log'\r\nimport i18n from '../i18n'\r\n\r\nimport DialogTitle from '@material-ui/core/DialogTitle'\r\nimport DialogContent from '@material-ui/core/DialogContent'\r\nimport DialogActions from '@material-ui/core/DialogActions'\r\nimport Paper from '@material-ui/core/Paper'\r\n\r\nimport Typography from '@material-ui/core/Typography'\r\nimport Button from '@material-ui/core/Button'\r\nimport IconButton from '@material-ui/core/IconButton'\r\nimport CloseIcon from '@material-ui/icons/Close'\r\n\r\nimport EnhancedTable from '../components/EnhancedTable'\r\n\r\n\r\n/*\r\n * STYLES\r\n */\r\nimport { withStyles } from '@material-ui/core/styles'\r\nconst styles = theme => ({\r\n\tcloseButton: {\r\n\t\tposition: 'absolute',\r\n\t\tright: theme.spacing(1),\r\n\t\ttop: theme.spacing(1),\r\n\t\tcolor: theme.palette.grey[500],\r\n\t},\r\n\tdialogContent: {\r\n\t\tbackgroundColor: '#fafafa'\r\n\t},\r\n});\r\n\r\n\r\nconst headCells = [\r\n\t{ id: 'time', type: 'Date', label: i18n.t('Time'), noWrap: true },\r\n\t{ id: 'module', label: i18n.t('Module'), noWrap: true },\r\n\t{ id: 'criticality', label: i18n.t('Criticality'), noWrap: true },\r\n\t{ id: 'message', label: i18n.t('Message') },\r\n\t{ id: 'stack', type: 'Object', label: i18n.t('Stack Trace') },\r\n];\r\n\r\nconst rowStyles = { // https://material-ui.com/components/alert/#simple-alerts\r\n\t'criticality': {\r\n\t\t'debug': {\r\n\t\t\tcolor: 'rgba(0, 0, 0, 0.4)',\r\n\t\t\tbackgroundColor: 'rgba(0, 0, 0, 0.1)'\r\n\t\t},\r\n\t\t'info': {\r\n\t\t\tcolor: 'rgb(13, 60, 97)',\r\n\t\t\tbackgroundColor: 'rgb(232, 244, 253)'\r\n\t\t},\r\n\t\t'warn': {\r\n\t\t\tcolor: 'rgb(102, 60, 0)',\r\n\t\t\tbackgroundColor: 'rgb(255, 244, 229)'\r\n\t\t},\r\n\t\t'error': {\r\n\t\t\tcolor: 'rgb(97, 26, 21)',\r\n\t\t\tbackgroundColor: 'rgb(253, 236, 234)'\r\n\t\t},\r\n\t\t'success': {\r\n\t\t\tcolor: 'rgb(30, 70, 32)',\r\n\t\t\tbackgroundColor: 'rgb(237, 247, 237)'\r\n\t\t\t\r\n\t\t}\r\n\t}\r\n}\r\n\r\nclass LogsPage extends React.Component {\r\n\t\r\n\trender() {\r\n\t\tconst { classes } = this.props;\r\n\t\t\r\n\t\tconst logs = Log.getLog();\r\n\t\treturn (\r\n\r\n\r\n<React.Fragment>\r\n\t<DialogTitle disableTypography>\r\n\t\t<Typography variant=\"h6\">Logs</Typography>\r\n\t\t<IconButton aria-label=\"close\" className={classes.closeButton} onClick={() => this.props.onClose()}>\r\n\t\t\t<CloseIcon />\r\n\t\t</IconButton>\r\n\t</DialogTitle>\r\n\t<DialogContent className={classes.dialogContent}>\r\n\t\t\r\n\t\t<Paper className={classes.paper}>\r\n\t\t\t<EnhancedTable\r\n\t\t\t\tselectable={false}\r\n\t\t\t\theadCells={headCells}\r\n\t\t\t\trows={logs}\r\n\t\t\t\trowStyles={rowStyles}\r\n\t\t\t\t/>\r\n\t\t</Paper>\r\n\t\t\r\n\t</DialogContent>\r\n\t<DialogActions>\r\n\t\t<Button autoFocus onClick={() => this.props.onClose()} color=\"primary\">\r\n\t\t\t{i18n.t('Close')}\r\n\t\t</Button>\r\n\t</DialogActions>\r\n</React.Fragment>\r\n\r\n\t\t)\r\n\t}\r\n}\r\n\r\nexport default withStyles(styles)(LogsPage);\r\n","import Log from './Log'\r\nimport { de } from 'date-fns/locale'\r\nexport const locales = { de }\r\n\r\n\r\n/**\r\n * Internationalization\r\n * Based on https://raw.githubusercontent.com/ioBroker/adapter-react/master/src/i18n.js.\r\n * Copyright 2018-2019 bluefox <dogafox@gmaiLog.com>\r\n *\r\n * MIT License\r\n *\r\n *\r\n */\r\nexport default class i18n {\r\n\r\n\t/*\r\n\t * holds the translations\r\n\t */\r\n\tstatic translations = {};\r\n\r\n\t/*\r\n\t * default language\r\n\t */\r\n\tstatic language = (navigator.language || navigator.userLanguage || 'en-EN');\r\n\r\n\t/**\r\n\t * Override default language.\r\n\t *\r\n\t * @param\t{String}\tlanguage\r\n\t * @return\t{Boolean}\r\n\t */\r\n\tstatic setLanguage(language) {\r\n\t\tif (language) {\r\n\t\t\ti18n.language = language;\r\n\t\t\tLog._('i18n', 'Set language to ' + language + '.');\r\n\t\t\treturn true;\r\n\t\t}\r\n\t\t\r\n\t\treturn false;\r\n\t}\r\n\t\r\n\t/**\r\n\t * Loads multiple translations.\r\n\t *\r\n\t * @param\t{String|Array}\tlanguages\r\n\t * @return\t{Boolean}\r\n\t */\r\n\tstatic loadTranslations(languages) {\r\n\t\t\r\n\t\tif (languages) {\r\n\t\t\tlanguages = Array.isArray(languages) ? languages : [languages];\r\n\t\t\tlanguages.forEach(language => i18n.loadTranslation(language));\r\n\t\t\t\r\n\t\t\treturn true;\r\n\t\t}\r\n\t\t\r\n\t\treturn false;\r\n\t}\r\n\t\r\n\t/**\r\n\t * Loads a translation.\r\n\t *\r\n\t * @param\t{String}\tlanguage\r\n\t * @return\t{Boolean}\r\n\t */\r\n\tstatic loadTranslation(language = i18n.getLanguage()) {\r\n\t\t\r\n\t\tif (language) {\r\n\t\t\tlet translation;\r\n\t\t\ttry {\r\n\t\t\t\ttranslation = require('./i18n/' + language + '.js').default;\r\n\t\t\t\ti18n.setTranslation(language, translation);\r\n\t\t\t}\r\n\t\t\tcatch(err) {\r\n\t\t\t\tLog._('i18n', err.message, 'error', false, err.stack);\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\treturn true;\r\n\t\t}\r\n\t\t\r\n\t\treturn false;\r\n\t\t\r\n\t}\r\n\t\r\n\t/**\r\n\t * Set a translation for language.\r\n\t *\r\n\t * @param\t{String}\tlanguage\r\n\t * @param\t{Object}\ttranslation\r\n\t * @return\t{Boolean}\r\n\t */\r\n\tstatic setTranslation(language, translation) {\r\n\t\tif (language && translation) {\r\n\t\t\ti18n.translations[language] = { ...i18n.translations[language] || {}, ...translation };\r\n\t\t\tLog._('i18n', 'Set translations for language ' + language + '.', 'debug');\r\n\t\t\treturn true;\r\n\t\t}\r\n\t\t\r\n\t\treturn false;\r\n\t}\r\n\t\r\n\t/**\r\n\t * Get current set language.\r\n\t *\r\n\t * @param\tvoid\r\n\t * @return\t{String}\r\n\t */\r\n\tstatic getLanguage(isoLong = false) {\r\n\t\treturn i18n.language.substr(0, isoLong ? 5 : 2);\r\n\t}\r\n\t\r\n\t/**\r\n\t * Get current set language.\r\n\t *\r\n\t * @param\t{String}\tword\r\n\t * @param\t{Object}\t[options={}]\r\n\t * @param\t{Boolean}\t[options.ucFirst=false]\r\n\t * @param\t{Object}\t[placeholders={}]\r\n\t * @param\t{String}\t[language=i18n.language]\r\n\t * @return\t{String}\r\n\t */\r\n\tstatic t(word = '', options = {}, placeholders = {}, language = i18n.getLanguage()) {\r\n\t\t\r\n\t\tword = word.toString();\r\n\t\tif (i18n.translations[language]) {\r\n\t\t\t\r\n\t\t\t// check if word is concatenated\r\n\t\t\tif (word.indexOf('#') > -1) {\r\n\t\t\t\t\r\n\t\t\t\tlet parts = word.split('#');\r\n\t\t\t\twhile (parts.length > 0 && !i18n.translations[language][parts.join('#')]) {\r\n\t\t\t\t\tparts.shift();\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tword = parts.join('#');\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tif (i18n.translations[language][word]) {\r\n\t\t\t\tword = i18n.translations[language][word];\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tLog._('i18n', 'Word \"' + word + '\" not found in language ' + language + '!', 'debug', false);\r\n\t\t\t}\r\n\t\t}\r\n\t\telse {\r\n\t\t\tLog._('i18n', 'Language ' + language + ' not loaded for word ' + word + '!', 'error');\r\n\t\t}\r\n\t\t\r\n\t\t// replace placeholders\r\n\t\tfor (let key in placeholders) {\r\n\t\t\tword = word.replace(RegExp('%' + key + '%', 'g'), placeholders[key]);\r\n\t\t}\r\n\t\t\r\n\t\t// options\r\n\t\tif (options.ucFirst) {\r\n\t\t\tword = word.charAt(0).toUpperCase() + word.slice(1);\r\n\t\t}\r\n\t\t\r\n\t\treturn word;\r\n\t}\r\n}\r\n","import React from 'react'\r\n\r\nimport Log from '../Log'\r\nimport Grid from '@material-ui/core/Grid'\r\n\r\n\r\n/*\r\n * STYLES\r\n */\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nconst useStyles = makeStyles(theme => ({\r\n\tgridContainer: {\r\n\t\tpaddingLeft: theme.spacing(1),\r\n\t\t[theme.breakpoints.down('md')]: {\r\n\t\t\tpaddingLeft: theme.spacing(0.4)\r\n\t\t}\r\n\t}\r\n}));\r\n\r\n\r\nexport default function GridContainer(props) {\r\n\tconst { contents = {} } = props;\r\n\t\r\n\tconst classes = useStyles();\r\n\tconst columns = Object.keys(contents).length;\r\n\t\r\n\tlet grid = [];\r\n\tfor (let column = 1; column <= columns; column++) {\r\n\t\t\r\n\t\tif (!contents[column]) {\r\n\t\t\tLog._('GridContainer', 'No content for column #' + column + '!', 'warn');\r\n\t\t\tcontinue;\r\n\t\t}\r\n\t\t\r\n\t\tgrid.push(\r\n\t\t\t<Grid key={column} item\t\t\t\t// @see https://material-ui.com/customization/breakpoints/\r\n\t\t\t\txs={12}\t\t\t\t\t\t\t//    0 -  600px\r\n\t\t\t\tsm={6}\t\t\t\t\t\t\t//  600 -  960px\r\n\t\t\t\tmd={6}\t\t\t\t\t\t\t//  960 - 1280px\r\n\t\t\t\tlg={Math.round(12/columns)}\t\t// 1280 - 1920px\r\n\t\t\t\txl={Math.round(12/columns)}\t\t// \t\t> 1920px\r\n\t\t\t\t>\r\n\t\t\t\t\r\n\t\t\t\t{contents[column]}\r\n\t\t\t</Grid>\r\n\t\t);\r\n\t}\r\n\t\r\n\treturn (\r\n\r\n<Grid container spacing={0} className={classes.gridContainer}>\r\n\t{grid}\r\n</Grid>\r\n\r\n\t);\r\n}\r\n","import React from 'react';\r\nimport clsx from 'clsx';\r\n\r\nimport Snackbar from '@material-ui/core/Snackbar';\r\nimport SnackbarContent from '@material-ui/core/SnackbarContent';\r\nimport IconButton from '@material-ui/core/IconButton';\r\n\r\nimport CloseIcon from '@material-ui/icons/Close';\r\nimport CheckCircleIcon from '@material-ui/icons/CheckCircle';\r\nimport WarningIcon from '@material-ui/icons/Warning';\r\nimport ErrorIcon from '@material-ui/icons/Error';\r\nimport InfoIcon from '@material-ui/icons/Info';\r\n\r\n\r\n\r\n\r\n/*\r\n * STYLES\r\n */\r\nimport { amber, green } from '@material-ui/core/colors';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nconst useStyles = makeStyles(theme => ({\r\n\tsuccess: {\r\n\t\tbackgroundColor: green[600],\r\n\t},\r\n\terror: {\r\n\t\tbackgroundColor: theme.palette.error.dark,\r\n\t},\r\n\tinfo: {\r\n\t\tbackgroundColor: theme.palette.primary.main,\r\n\t},\r\n\twarning: {\r\n\t\tbackgroundColor: amber[700],\r\n\t},\r\n\ticon: {\r\n\t\tfontSize: 20,\r\n\t},\r\n\ticonVariant: {\r\n\t\topacity: 0.9,\r\n\t\tmarginRight: theme.spacing(1),\r\n\t},\r\n\tmessage: {\r\n\t\tdisplay: 'flex',\r\n\t\talignItems: 'center',\r\n\t},\r\n}));\r\n\r\n\r\nconst variantIcon = {\r\n\tsuccess: CheckCircleIcon,\r\n\twarning: WarningIcon,\r\n\terror: ErrorIcon,\r\n\tinfo: InfoIcon,\r\n};\r\n\r\n\r\nexport default function StatusSnackbar(props) {\r\n\tconst classes = useStyles();\r\n\tlet { className, open, autoHideDuration, message, closeButton, onClose, variant, ...other } = props;\r\n\tconst Icon = variantIcon[variant];\r\n\t\r\n\topen = open || true;\r\n\tautoHideDuration = autoHideDuration || null;\r\n\treturn (\r\n\r\n<Snackbar\r\n\tanchorOrigin={{\r\n\t\tvertical: 'bottom',\r\n\t\thorizontal: 'center',\r\n\t}}\r\n\topen={open}\r\n\tautoHideDuration={autoHideDuration}\r\n\tonClose={onClose}\r\n\t>\r\n\t<SnackbarContent\r\n\t\tclassName={clsx(classes[variant], className)}\r\n\t\tmessage={\r\n\t\t\t<span id=\"client-snackbar\" className={classes.message}>\r\n\t\t\t\t<Icon className={clsx(classes.icon, classes.iconVariant)} />\r\n\t\t\t\t{message}\r\n\t\t\t</span>\r\n\t\t}\r\n\t\taction={closeButton && [\r\n\t\t\t<IconButton key=\"close\" aria-label=\"close\" color=\"inherit\" onClick={onClose}>\r\n\t\t\t\t<CloseIcon className={classes.icon} />\r\n\t\t\t</IconButton>,\r\n\t\t]}\r\n\t\t{...other}\r\n\t\t/>\r\n\t\t\r\n</Snackbar>\r\n\r\n\t);\r\n}","export default {\r\n\t\"iobrokerWebAdapterUrl\": \"https://192.168.178.29:8082\"\r\n}","\r\nexport default {\r\n\tdefaults: require('./defaults').default,\r\n\t\r\n\tblind: require('./blind/').default,\r\n\tdoor: require('./door/').default,\r\n\theating: require('./heating/').default,\r\n\tjalousie: require('./blind/').default,\r\n\tlight: require('./light/').default,\r\n\tlocation: require('./location/').default,\r\n\tuser: require('./user/').default,\r\n\twindow: require('./window/').default\r\n}","import EventEmitter from 'events'\r\nimport functions from './functions'\r\n\r\n\r\n/**\r\n * Function\r\n *\r\n * @param\t{String}\t\tfunctionType\r\n * @return\t{Function}\r\n *\r\n */\r\nexport default class Function extends EventEmitter {\r\n\t\r\n\tconstructor(functionType) {\r\n\t\tsuper();\r\n\t\t\r\n\t\tthis.function = functionType;\r\n\t\t\r\n\t\tif (!this.function) {\t\r\n\t\t\tthrow new Error('No function given!');\r\n\t\t}\r\n\t\t\r\n\t\tthis.functionId = this.function.toLowerCase();\r\n\t\t\r\n\t\t// configuration\r\n\t\tthis.defaults = functions['defaults'].configurations;\r\n\t\tthis.configurations = (functions[this.functionId] && functions[this.functionId].configurations) || {};\r\n\t\t\r\n\t\t// styles\r\n\t\tthis.defaultStyles = functions['defaults'].styles;\r\n\t\tthis.styles = (functions[this.functionId] && functions[this.functionId].styles) || {};\r\n\t\t\r\n\t\t// components and actions\r\n\t\tthis.components = { ...functions['defaults'].components, ...(functions[this.functionId] && functions[this.functionId].components) || {} };\r\n\t\tthis.actions = { ...functions['defaults'].actions, ...(functions[this.functionId] && functions[this.functionId].actions) || {} };\r\n\t}\r\n\t\r\n\t/**\r\n\t *\r\n\t *\r\n\t * @return\t{Mixed}\r\n\t * @private\r\n\t */\r\n\t_applyFunction(key, val) {\r\n\t\treturn this._isFunction(key) ? key(val) : val;\r\n\t}\r\n\t\r\n\t/**\r\n\t *\r\n\t *\r\n\t * @return\t{String}\r\n\t * @private\r\n\t */\r\n\t_getValueFromSettings(settings, defaults = '') {\r\n\t\t\r\n\t\tfor (let key in settings) {\r\n\t\t\tif (settings[key] !== undefined) {\r\n\t\t\t\treturn settings[key];\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\treturn defaults;\r\n\t}\r\n\t\r\n\t/**\r\n\t *\r\n\t *\r\n\t * @return\t{Boolean}\r\n\t * @private\r\n\t */\r\n\t_isFunction(key) {\r\n\t\treturn key && typeof key === 'function';\r\n\t}\r\n\t\r\n\t/**\r\n\t *\r\n\t *\r\n\t * @return\t{Boolean}\r\n\t * @private\r\n\t */\r\n\t_isValue(val) {\r\n\t\treturn val !== undefined; // || val === null || val === false; // null is considered a value, so it can be used to actually null the output\r\n\t}\r\n\t\r\n\t/**\r\n\t *\r\n\t *\r\n\t * @return\t{Object}\r\n\t * @private\r\n\t */\r\n\t_setObjectStructure(obj, defaultValue = undefined) {\r\n\t\t\r\n\t\tif (!obj || typeof obj != 'object') {\r\n\t\t\tobj = { 'default': obj || defaultValue };\r\n\t\t}\r\n\t\telse if (typeof obj == 'object' && !obj.default) {\r\n\t\t\tobj.default = defaultValue;\r\n\t\t}\r\n\t\t\r\n\t\treturn obj;\r\n\t}\r\n}\r\n","export default {\r\n\t\"hm-rpc\": \"HomeMatic\",\r\n\t\"shelly\": \"Shelly\",\r\n\t\"sonoff\": \"Sonoff\"\r\n}","import React from 'react'\r\n\r\nimport Log from './Log'\r\nimport i18n, { locales } from './i18n'\r\nimport Function from './Function'\r\nimport Adapters from './config/adapters'\r\n\r\nimport { formatDistanceToNow } from 'date-fns'\r\n\r\n\r\n/**\r\n * Device\r\n *\r\n * @param\t{Object}\tdeviceProperties\r\n * @param\t{String}\tdeviceProperties.id\r\n * @param\t{String}\tdeviceProperties.name\r\n * @param\t{String}\t[deviceProperties.room=null]\r\n * @param\t{String}\tdeviceProperties.function\r\n * @param\t{Object}\tdeviceProperties.states\r\n * @param\t{Object}\t[deviceProperties.attributes={}]\r\n * @param\t{Object}\tdeviceProperties.options\r\n * @param\t{Object}\tsocket\r\n * @return\t{Device}\r\n *\r\n */\r\nexport default class Device extends Function {\r\n\t\r\n\tconstructor(deviceProperties, socket) {\r\n\t\ttry {\r\n\t\t\tsuper(deviceProperties.function);\r\n\t\t}\r\n\t\tcatch(err) {\r\n\t\t\tthrow new Error('No function given for device ' + deviceProperties.name + '!');\r\n\t\t}\r\n\t\t\r\n\t\t// initialise class data\r\n\t\tthis.id = deviceProperties.id;\r\n\t\tthis.name = deviceProperties.name;\r\n\t\t\r\n\t\tthis.room = deviceProperties.room || null;\r\n\t\t\r\n\t\tthis.states = deviceProperties.states;\r\n\t\tthis.options = deviceProperties.options;\r\n\t\tthis.attributes = deviceProperties.attributes || {};\r\n\t\t\r\n\t\tthis.socket = socket;\r\n\t\t\r\n\t\t// verify data\r\n\t\tif (!this.options || typeof this.options !== 'object' || Object.keys(this.options).length === 0) {\r\n\t\t\tthrow new Error('Device' + (deviceProperties.id || deviceProperties.name ? ' ' + (deviceProperties.name || deviceProperties.id) : '') + ' not defined for jarvis!');\r\n\t\t}\r\n\t\telse if (!this.states || typeof this.states !== 'object' || Object.keys(this.states).length === 0) {\r\n\t\t\tthrow new Error('Insufficent properties provided' + (deviceProperties.id || deviceProperties.name ? ' for device ' + (deviceProperties.name || deviceProperties.id) : '') + ' (no states defined)!');\r\n\t\t}\r\n\t\telse if (!this.id || !this.name || !this.function) {\r\n\t\t\tthrow new Error('Insufficent properties provided' + (deviceProperties.id || deviceProperties.name ? ' for device ' + (deviceProperties.name || deviceProperties.id) : '') + ' (no id, name or function defined)!');\r\n\t\t}\r\n\t\telse if (!this.socket) {\t\r\n\t\t\tthrow new Error('No socket given!');\r\n\t\t}\r\n\t\t\r\n\t\t// hierarchy\r\n\t\tthis.children = deviceProperties.children || [];\r\n\t\tthis.parent = deviceProperties.parent || null;\r\n\t\t\r\n\t\t// do some stuff\r\n\t\tthis._setProperties();\r\n\t\tthis.stateSubscriptions = [];\r\n\t\t\r\n\t\t// listen for errors of the device\r\n\t\tthis.on('error', err => Log._('Device', [ 'Device error occured!', err.message ], 'error', false, err.stack));\r\n\t}\r\n\t\r\n\t/**\r\n\t *\r\n\t *\r\n\t * @return\t{Object|String}\r\n\t * @private\r\n\t */\r\n\t_getStateFromKey(stateKey = null, stateType = 'state') {\r\n\t\t\r\n\t\t// already a state object\r\n\t\tif (stateKey && typeof stateKey === 'object') {\r\n\t\t\treturn stateKey;\r\n\t\t}\r\n\t\t\r\n\t\t// get state object\r\n\t\tlet s = this.states[stateKey || this.primaryStateKey];\r\n\t\t\r\n\t\t// state does not exist\r\n\t\tif (s === undefined) {\r\n\t\t\treturn i18n.t('State does not exist in device %device%').replace(/%device%/g, this.name) + '!';\r\n\t\t}\r\n\t\t\r\n\t\t// state not an object so far\r\n\t\telse if (typeof s === 'string') {\r\n\t\t\tthis.states[stateKey || this.primaryStateKey] = { [stateType]: { 'node': s }};\r\n\t\t\ts = this.states[stateKey || this.primaryStateKey];\r\n\t\t}\r\n\t\telse if (typeof s[stateType] === 'string') {\r\n\t\t\tthis.states[stateKey || this.primaryStateKey][stateType] = { 'node': s[stateType] };\r\n\t\t\ts = this.states[stateKey || this.primaryStateKey];\r\n\t\t}\r\n\t\t\r\n\t\t// state not valid\r\n\t\tif (!s || !s[stateType]) {\r\n\t\t\treturn i18n.t('Incorrect or non-defined state key for device %device%').replace(/%device%/g, this.name).replace(/%stateType%/g, stateType) + '!';\r\n\t\t}\r\n\t\telse if (typeof s[stateType] == 'object' && !s[stateType].node) {\r\n\t\t\treturn i18n.t('No %stateType% specified for device %device%').replace(/%device%/g, this.name).replace(/%stateType%/g, stateType) + '!';\r\n\t\t}\r\n\t\t\r\n\t\treturn s;\r\n\t}\r\n\t\r\n\t/**\r\n\t *\r\n\t *\r\n\t * @private\r\n\t */\r\n\t_getConfigurationSetting(config, stateKey, attribute, stateVal) {\r\n\t\t\r\n\t\tif (this[config][stateKey]) {\r\n\t\t\t\r\n\t\t\t// 1. if stateKey (e.g. level, power) is available, try to replace an attribute (e.g. icon, unit or for styles state, icon) based on current state (e.g. true, false)\r\n\t\t\tif (typeof this[config][stateKey][attribute] === 'object') {\r\n\t\t\t\t\r\n\t\t\t\tconst stateValKeys = Object.keys(this[config][stateKey][attribute]);\r\n\t\t\t\tif (stateValKeys.toString().indexOf('<') > -1 || stateValKeys.toString().indexOf('>') > -1 || stateValKeys.toString().indexOf('!=') > -1) { // !=, >, >=, <, <=\r\n\t\t\t\t\t\r\n\t\t\t\t\tlet val = this[config][stateKey][attribute]['default'];\r\n\t\t\t\t\tstateValKeys.forEach(stateValKey => {\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tlet stateValValue = stateValKey.replace('<=', '').replace('<', '').replace('>=', '').replace('>', '').replace('!=', '');\r\n\t\t\t\t\t\tif (stateValKey.indexOf('<=') > -1 && stateVal <= stateValValue) {\r\n\t\t\t\t\t\t\tval = this[config][stateKey][attribute][stateValKey];\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse if (stateValKey.indexOf('<') > -1 && stateVal < stateValValue) {\r\n\t\t\t\t\t\t\tval = this[config][stateKey][attribute][stateValKey];\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse if (stateValKey.indexOf('>=') > -1 && stateVal >= stateValValue) {\r\n\t\t\t\t\t\t\tval = this[config][stateKey][attribute][stateValKey];\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse if (stateValKey.indexOf('>') > -1 && stateVal > stateValValue) {\r\n\t\t\t\t\t\t\tval = this[config][stateKey][attribute][stateValKey];\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse if (stateValKeys.toString().indexOf('!=') > -1 && stateVal != stateValValue) {  // eslint-disable-line eqeqeq\r\n\t\t\t\t\t\t\tval = this[config][stateKey][attribute][stateValKey];\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t\t\r\n\t\t\t\t\treturn val;\r\n\t\t\t\t}\r\n\t\t\t\telse {\r\n\t\t\t\t\treturn super._isValue(this[config][stateKey][attribute][stateVal]) ? this[config][stateKey][attribute][stateVal] : this[config][stateKey][attribute]['default'];\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\t// 2. if #1 is a function, apply it\r\n\t\t\telse if (super._isFunction(this[config][stateKey][attribute])) {\r\n\t\t\t\treturn this[config][stateKey][attribute](stateVal, stateKey, this);\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\t// 3. fallback to stateKey with attribute, if defined but neither an object (thus stateless) nor a function\r\n\t\t\telse if (typeof this[config][stateKey][attribute] === 'string') {\r\n\t\t\t\treturn this[config][stateKey][attribute];\r\n\t\t\t}\r\n\t\t}\r\n\t\telse if (this[config]['_any']) {\r\n\t\t\t\r\n\t\t\t// 4. fallback to _any if no stateKey (e.g. level, power) is given, but consider attribute to be stateful (e.g. true, false)\r\n\t\t\tif (typeof this[config]['_any'][attribute] === 'object') {\r\n\t\t\t\treturn super._isValue(this[config]['_any'][attribute][stateVal]) ? this[config]['_any'][attribute][stateVal] : this[config]['_any'][attribute]['default'];\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\t// 5. if #4 is a function, apply it\r\n\t\t\telse if (super._isFunction(this[config]['_any'][attribute])) {\r\n\t\t\t\treturn this[config]['_any'][attribute](stateVal, stateKey, this);\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\t// nothing, return undefined (not null, because this would mean take an empty value)\r\n\t\treturn undefined;\r\n\t}\r\n\t\r\n\t/**\r\n\t *\r\n\t *\r\n\t * @private\r\n\t */\r\n\t_getUserSetting(stateKey, attribute, stateVal, styles = false) {\r\n\t\t\r\n\t\tlet options = this.options;\r\n\t\t\r\n\t\tif (styles) {\r\n\t\t\toptions = this.options['styles'];\r\n\t\t\tlet tmp = attribute;\r\n\t\t\tattribute = stateKey;\r\n\t\t\tstateKey = tmp;\r\n\t\t}\r\n\t\t\r\n\t\tif (options[attribute] && options[attribute][stateKey]) {\r\n\t\t\tif (typeof options[attribute][stateKey] === 'object') {\r\n\t\t\t\treturn super._isValue(options[attribute][stateKey][stateVal]) ? options[attribute][stateKey][stateVal] : options[attribute][stateKey]['default'];\r\n\t\t\t}\r\n\t\t\telse if (super._isFunction(options[attribute][stateKey])) {\r\n\t\t\t\treturn options[attribute][stateKey](stateVal, stateKey, this);\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\treturn options[attribute][stateKey];\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\treturn undefined;\r\n\t}\r\n\t\r\n\t/**\r\n\t *\r\n\t *\r\n\t *\r\n\t * @return void\r\n\t * @private\r\n\t *\r\n\t */\r\n\t_setProperties() {\r\n\t\t\r\n\t\tlet states = Object.keys(this.states);\r\n\t\t\r\n\t\t// delete ignored states\r\n\t\tif (this.options.ignoredStates) {\r\n\t\t\tthis.options.ignoredStates = Array.isArray(this.options.ignoredStates) ? this.options.ignoredStates : [this.options.ignoredStates];\r\n\t\t\t\r\n\t\t\tthis.options.ignoredStates.forEach(ignoredState => {\r\n\t\t\t\tif (this.states[ignoredState]) {\r\n\t\t\t\t\tdelete this.states[ignoredState];\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\t\t\r\n\t\t// get hidden states\r\n\t\tthis.options.hiddenStates = [];\r\n\t\tif (this.options.hideStates) {\r\n\t\t\tthis.options.hideStates = Array.isArray(this.options.hideStates) ? this.options.hideStates : [this.options.hideStates];\r\n\t\t\t\r\n\t\t\tthis.options.hideStates.forEach(hideState => {\r\n\t\t\t\tif (this.states[hideState]) {\r\n\t\t\t\t\tthis.options.hiddenStates.push(hideState);\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\t\t\r\n\t\t// properties\r\n\t\tthis.primaryStateKey = this.options.primary || states[0];\r\n\t\tthis.secondaryStateKey = this.options.secondary || null;\r\n\t\t\r\n\t\t// bring user settings for value, state, unit, icon and styles in structure\r\n\t\t['value', 'state', 'unit', 'icon', 'styles'].forEach(key => {\r\n\t\t\t\r\n\t\t\tlet stateOrAttribute = this.options[key] && Object.keys(this.options[key])[0];\r\n\t\t\tthis.options[key] = !this.options[key] ? {} : super._setObjectStructure(stateOrAttribute && states.indexOf(stateOrAttribute) > -1 ? this.options[key] : { [this.primaryStateKey]: this.options[key] });\r\n\t\t});\r\n\t\t\r\n\t\t// manufacturer\r\n\t\tthis.states[this.primaryStateKey] = this._getStateFromKey(this.primaryStateKey);\r\n\t\tthis.options.manufacturer = (this.primaryStateKey && Adapters[this.states[this.primaryStateKey].state.node.substr(0, this.states[this.primaryStateKey].state.node.indexOf('.'))]) || 'unknown';\r\n\t\t\r\n\t\t// all options\r\n\t\tthis.options.groups = Array.isArray(this.options.group) ? this.options.group : [this.options.group];\r\n\t\tthis.options.sort = this.options.sort || 999;\r\n\t\t\r\n\t\tthis.options.label = (this.options.label && (typeof this.options.label === 'string' && this.options.label.replace(/%name%/g, this.name))) || this.options.label || this.name;\r\n\t\t//this.options.subtitle = this.options.subtitle;\r\n\t\tthis.options.divider = this.options.divider || false;\r\n\t}\r\n\t\r\n\t/**\r\n\t *\r\n\t *\r\n\t *\r\n\t * @return\t{Object}\r\n\t * @private\r\n\t */\r\n\t_updateDeviceState(stateKey, state) {\r\n\t\t\r\n\t\t// add time changed\r\n\t\tstate.timeChanged = formatDistanceToNow(new Date(state.lc-5*1000), { locale: locales[i18n.getLanguage()], includeSeconds: true, addSuffix: true })\r\n\t\t\r\n\t\t// add unit\r\n\t\tstate.unit = '';\r\n\t\t\r\n\t\t// change val\r\n\t\tlet val = this._getConfigurationSetting('configurations', stateKey, 'val', state.val);\r\n\t\tstate.val = val !== undefined ? val : state.val;\r\n\t\t\r\n\t\t// assign value\r\n\t\tstate.value = state.val;\r\n\t\t\r\n\t\t// mapping of value to state values\r\n\t\t[{ 'value': 'value' }, { 'state': 'value' }, { 'unit': 'unit' }].forEach(pair => {\r\n\t\t\tlet attribute = Object.keys(pair).toString();\r\n\t\t\tlet option = Object.values(pair).toString();\r\n\t\t\tlet settings = {};\r\n\t\t\t\r\n\t\t\t// get user setting\r\n\t\t\tsettings['options'] = this._getUserSetting(stateKey, attribute, state.val);\r\n\t\t\t\r\n\t\t\t// get function setting or fallback to defaults\r\n\t\t\t['configurations', 'defaults'].forEach(config => {\r\n\t\t\t\tsettings[config] = this._getConfigurationSetting(config, stateKey, attribute, state.val);\r\n\t\t\t});\r\n\t\t\t\r\n\t\t\tstate[option] = super._getValueFromSettings(settings, state[option]);\r\n\t\t});\r\n\t\t\r\n\t\tstate.value = i18n.t(state.value);\r\n\t\treturn state;\r\n\t}\r\n\t\r\n\t/**\r\n\t *\r\n\t *\r\n\t */\r\n\tget(property) {\r\n\t\treturn this[property] || null;\r\n\t}\r\n\t\r\n\t/**\r\n\t *\r\n\t *\r\n\t * @param\t{String}\t[stateKey=this.primaryStateKey]\r\n\t * @return\t{React.Component}\r\n\t */\r\n\tgetAction(stateKey = null, forceDefault = false) {\r\n\t\tstateKey = stateKey || this.primaryStateKey;\r\n\t\t\r\n\t\tconst state = this.states[stateKey].state.value;\r\n\t\tconst stateVal = state ? state.val : null;\r\n\t\t\r\n\t\tconst Action = (!forceDefault && this.actions[stateKey]) || this.actions.Action;\r\n\t\treturn <Action key={'action-' + this.id + '-' + stateKey} device={this} state={state} stateKey={stateKey} stateVal={stateVal} styles={this.getStyle('state', stateKey, stateVal)} />\r\n\t}\r\n\t\r\n\t/**\r\n\t *\r\n\t *\r\n\t * @param\t{String}\t[stateKey=this.primaryStateKey]\r\n\t * @return\t{React.Component}\r\n\t */\r\n\tgetComponent(stateKey) {\r\n\t\tstateKey = stateKey || this.primaryStateKey;\r\n\t\t\r\n\t\tconst state = this.states[stateKey].state.value;\r\n\t\tconst stateVal = state ? state.val : null;\r\n\t\t\r\n\t\tconst Component = this.components[stateKey];\r\n\t\treturn (Component && <Component title={this.states[stateKey].label || i18n.t(this.function + '#' + stateKey)} device={this} stateKey={stateKey} stateVal={stateVal} />) || this.states[stateKey].label || i18n.t(this.function + '#' + stateKey);\r\n\t}\r\n\t\r\n\t/**\r\n\t *\r\n\t *\r\n\t * @param\t{String}\t[stateKey=this.primaryStateKey]\r\n\t * @param\t{String}\t[stateProperty=null]\r\n\t * @return\t{String}\r\n\t */\r\n\tgetDeviceState(stateKey = null, stateProperty = null) {\r\n\t\tconst s = this.states[stateKey || this.primaryStateKey];\r\n\t\t\r\n\t\tlet deviceState = null;\r\n\t\t\r\n\t\tif (s && s.state && stateProperty !== null && s.state.value !== undefined && s.state.value[stateProperty] !== undefined) {\r\n\t\t\tdeviceState = s.state.value[stateProperty];\r\n\t\t}\r\n\t\telse if (s && s.state && stateProperty === null && s.state.value !== undefined) {\r\n\t\t\tdeviceState = s.state.value;\r\n\t\t}\r\n\t\t\r\n\t\treturn deviceState;\r\n\t}\r\n\t\r\n\t/**\r\n\t * Get an icon based on the current device state (or falls back to a default).\r\n\t *\r\n\t * @param\t{String}\t[stateKey=this.primaryStateKey]\r\n\t * @param\t{String}\t[stateVal=default]\r\n\t * @param\t{String}\t[defaultIcon=null]\r\n\t * @return\t{String}\r\n\t */\r\n\tgetIcon(stateKey, stateVal = '', defaultIcon = undefined) {\r\n\t\t\r\n\t\tstateKey = stateKey || this.primaryStateKey;\r\n\t\t\r\n\t\tlet settings = {};\r\n\t\t\r\n\t\t// get user setting\r\n\t\tsettings['options'] = this._getUserSetting(stateKey, 'icon', stateVal);\r\n\t\t\r\n\t\t// get function setting or fallback to defaults\r\n\t\t['configurations', 'defaults'].forEach(config => {\r\n\t\t\tsettings[config] = this._getConfigurationSetting(config, stateKey, 'icon', stateVal);\r\n\t\t});\r\n\t\t\r\n\t\treturn super._getValueFromSettings(settings, defaultIcon);\r\n\t}\r\n\t\r\n\t/**\r\n\t *\r\n\t *\r\n\t */\r\n\tgetOption(option, stateVal = 'default') {\r\n\t\treturn (this.options[option] && (this.options[option][stateVal] || this.options[option]['default'])) || this.options[option] || null;\r\n\t}\r\n\t\r\n\t/**\r\n\t *\r\n\t *\r\n\t */\r\n\tgetStyle(attribute, stateKey = null, stateVal = 'default') {\r\n\t\tlet settings = {};\r\n\t\tstateKey = stateKey || this.primaryStateKey;\r\n\t\t\r\n\t\t// get user setting\r\n\t\tsettings['options'] = this._getUserSetting(stateKey, attribute, stateVal, true);\r\n\t\t\r\n\t\t// get function setting or fallback to defaults\r\n\t\t['styles', 'defaultStyles'].forEach(config => {\r\n\t\t\tsettings[config] = this._getConfigurationSetting(config, stateKey, attribute, stateVal);\r\n\t\t});\r\n\t\t\r\n\t\treturn super._getValueFromSettings(settings, {});\r\n\t}\r\n\t\r\n\t/**\r\n\t *\r\n\t *\r\n\t */\r\n\tlisten(eventName, callback) {\r\n\t\t\r\n\t\tif (typeof eventName === 'function') {\r\n\t\t\tcallback = eventName;\r\n\t\t\teventName = 'stateChange';\r\n\t\t}\r\n\t\t\r\n\t\t// check for duplicates\r\n\t\tlet duplicate = this.listeners(eventName).findIndex(listener => listener.toString() == callback.toString()) > -1; // eslint-disable-line eqeqeq\r\n\t\t\r\n\t\t// attach callback\r\n\t\tif (!duplicate) {\r\n\t\t\tthis.on(eventName, callback);\r\n\t\t}\r\n\t}\r\n\t\r\n\t/**\r\n\t * Requests all state values from the backend.\r\n\t *\r\n\t * @param\t{Boolean}\t[subscribe=false]\r\n\t * @return\t{Array<Promises>}\r\n\t *\r\n\t */\r\n\trequestDeviceStates(subscribe = false) {\r\n\t\t\r\n\t\tlet responses = [];\r\n\t\tfor (let stateKey in this.states) {\r\n\t\t\tresponses.push(this.requestDeviceState(stateKey, subscribe));\r\n\t\t}\r\n\t\t\r\n\t\treturn responses;\r\n\t}\r\n\t\r\n\t/**\r\n\t * Requests a state value from the backend.\r\n\t *\r\n\t * @param\t{String}\t[stateKey=this.primaryStateKey]\r\n\t * @param\t{Boolean}\t[subscribe=false]\r\n\t * @return\t{Promise}\r\n\t *\r\n\t */\r\n\trequestDeviceState(stateKey = null, subscribe = false) {\r\n\t\t\r\n\t\tstateKey = stateKey || this.primaryStateKey;\r\n\t\tlet s = this._getStateFromKey(stateKey);\r\n\t\tif (typeof s == 'string') {\r\n\t\t\treturn Promise.reject({ 'success': false, 'stateKey': stateKey, 'error': s });\r\n\t\t}\r\n\t\t\r\n\t\treturn new Promise((resolve, reject) => {\r\n\t\t\t\r\n\t\t\t// send cached value if present and subscrbe (means always updated)\r\n\t\t\tif (s.state.value !== undefined && this.stateSubscriptions.indexOf(stateKey) > -1) {\r\n\t\t\t\t\r\n\t\t\t\t// publish state\r\n\t\t\t\tthis.emit('stateChange', stateKey, s.state.value, this);\r\n\t\t\t\t\r\n\t\t\t\t// resolve\r\n\t\t\t\tresolve({ 'success': true, 'stateKey': stateKey, 'cached': true });\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\t// request from backend\r\n\t\t\telse {\r\n\t\t\t\tthis.socket.getState(s.state.node)\r\n\t\t\t\t\t.then(state => {\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t// state does not exist\r\n\t\t\t\t\t\tif (state === null) {\r\n\t\t\t\t\t\t\treject({ 'success': false, 'stateKey': stateKey, 'error': 'State ' + s.state.node + ' not found!' });\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t// set result\r\n\t\t\t\t\t\ts.state.value = this._updateDeviceState(stateKey, state);\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t// publish state change\r\n\t\t\t\t\t\tthis.emit('stateChange', stateKey, s.state.value, this);\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t// subscribe to state\r\n\t\t\t\t\t\tif (subscribe) {\r\n\t\t\t\t\t\t\tthis.subscribeDeviceState(stateKey).catch(err => reject(err));\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t// resolve\r\n\t\t\t\t\t\tresolve({ 'success': true, 'stateKey': stateKey, 'cached': false });\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.catch(err => reject({ 'success': false, 'stateKey': stateKey, 'error': err }));\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\t\r\n\t/**\r\n\t * Requests a state value from the backend.\r\n\t *\r\n\t * @param\t{String}\t[stateKey=this.primaryStateKey]\r\n\t * @param\t{Boolean}\t[subscribe=false]\r\n\t * @param\t{Object}\t[options={}]\r\n\t * @return\t{Promise}\r\n\t * @see https://github.com/ioBroker/ioBroker.history#access-values-from-javascript-adapter\r\n\t *\r\n\t */\r\n\trequestDeviceStateHistory(stateKey = null, subscribe = false, options = {}) {\r\n\t\t\r\n\t\tstateKey = stateKey || this.primaryStateKey;\r\n\t\tlet s = this._getStateFromKey(stateKey);\r\n\t\tif (typeof s == 'string') {\r\n\t\t\treturn Promise.reject({ 'success': false, 'stateKey': stateKey, 'error': s });\r\n\t\t}\r\n\t\t\r\n\t\treturn new Promise((resolve, reject) => {\r\n\t\t\ts.state.historyCache = s.state.historyCache || {};\r\n\t\t\t\r\n\t\t\t// send cached value if present and subscrbe (means always updated)\r\n\t\t\tif (options.start && options.end && options.step && s.state.historyCache[options.start + '#' + options.end + '#' + options.step] !== undefined) {\r\n\t\t\t\t\r\n\t\t\t\t// publish state\r\n\t\t\t\tthis.emit('historyChange', stateKey, s.state.historyCache[options.start + '#' + options.end + '#' + options.step], s.state, this);\r\n\t\t\t\t\r\n\t\t\t\t// resolve\r\n\t\t\t\tresolve({ 'success': true, 'stateKey': stateKey, 'cached': true });\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\t// request from backend\r\n\t\t\telse {\r\n\t\t\t\tthis.socket.getStateHistory(s.state.node, options)\r\n\t\t\t\t\t.then(history => {\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t// state does not exist\r\n\t\t\t\t\t\tif (history === null) {\r\n\t\t\t\t\t\t\treject({ 'success': false, 'stateKey': stateKey, 'error': 'State ' + s.state.node + ' not found!' });\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t// cache result\r\n\t\t\t\t\t\tif (options.start && options.end && options.step) {\r\n\t\t\t\t\t\t\ts.state.historyCache[options.start + '#' + options.end + '#' + options.step] = history;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t// set result\r\n\t\t\t\t\t\ts.state.history = history;\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t// publish state change\r\n\t\t\t\t\t\tthis.emit('historyChange', stateKey, s.state.history, s.state, this);\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t// subscribe to state\r\n\t\t\t\t\t\tif (subscribe) {\r\n\t\t\t\t\t\t\tthis.subscribeDeviceState(stateKey).catch(err => reject(err));\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t// resolve\r\n\t\t\t\t\t\tresolve({ 'success': true, 'stateKey': stateKey, 'cached': false });\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.catch(err => reject({ 'success': false, 'stateKey': stateKey, 'error': err }));\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\t\r\n\t/**\r\n\t *\r\n\t *\r\n\t */\r\n\tsetAction(action) {\r\n\t\tthis.options.action = action;\r\n\t}\r\n\t\r\n\t/**\r\n\t *\r\n\t *\r\n\t */\r\n\tsetComponent(component) {\r\n\t\tthis.options.label = component;\r\n\t}\r\n\t\r\n\t/**\r\n\t *\r\n\t *\r\n\t * @param\t{String}\tvalue\r\n\t * @param\t{String}\t[stateKey=this.primaryStateKey]\r\n\t * @return\tvoid\r\n\t */\r\n\tsetDeviceState(stateKey = null, value) {\r\n\t\t\r\n\t\tstateKey = stateKey || this.primaryStateKey;\r\n\t\tlet s = this._getStateFromKey(stateKey, 'action');\r\n\t\tif (typeof s == 'string') {\r\n\t\t\treturn Promise.reject({ 'success': false, 'stateKey': stateKey, 'error': s });\r\n\t\t}\r\n\t\t\r\n\t\treturn new Promise((resolve, reject) => {\r\n\t\t\tthis.socket.setState(s.action.node, value)\r\n\t\t\t\t.then(res => {\r\n\t\t\t\t\r\n\t\t\t\t\t// get state value if not subscribed\r\n\t\t\t\t\tif (this.stateSubscriptions.indexOf(stateKey) === -1) {\r\n\t\t\t\t\t\tthis.requestDeviceState(stateKey);\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t\t// resolve\r\n\t\t\t\t\tresolve({ 'success': true, 'stateKey': stateKey });\r\n\t\t\t\t})\r\n\t\t\t\t.catch(err => reject({ 'success': false, 'stateKey': stateKey, 'error': err }));\r\n\t\t});\r\n\t}\r\n\t\r\n\t/**\r\n\t *\r\n\t *\r\n\t * @param\t{String}\t[stateKey=this.primaryStateKey]\r\n\t * @return\tvoid\r\n\t */\r\n\tsubscribeDeviceState(stateKey = null) {\r\n\t\t\r\n\t\tstateKey = stateKey || this.primaryStateKey;\r\n\t\tlet s = this._getStateFromKey(stateKey);\r\n\t\tif (typeof s == 'string') {\r\n\t\t\treturn Promise.reject({ 'success': false, 'stateKey': stateKey, 'error': s });\r\n\t\t}\r\n\t\t\r\n\t\t// add subscription\t\r\n\t\tif (this.stateSubscriptions.indexOf(stateKey) === -1) {\r\n\t\t\tthis.stateSubscriptions.push(stateKey);\r\n\t\t\r\n\t\t\t// subscribe\r\n\t\t\treturn new Promise(resolve => {\r\n\t\t\t\tthis.socket.subscribeState(s.state.node, (id, state, params) => {\r\n\t\t\t\t\t\r\n\t\t\t\t\tif (state && state.val !== this.getDeviceState(stateKey, 'val')) {\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t// format value\r\n\t\t\t\t\t\ts.state.value = this._updateDeviceState(stateKey, state);\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t// publish state change\r\n\t\t\t\t\t\tthis.emit('stateChange', stateKey, s.state.value, this);\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t// publish to children as well\r\n\t\t\t\t\t\tthis.children.forEach(child => child.emit('stateChange', stateKey, s.state.value, this));\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t\t\r\n\t\t\t\tresolve({ 'success': true, 'stateKey': stateKey });\r\n\t\t\t});\r\n\t\t}\r\n\t\telse {\r\n\t\t\treturn Promise.reject({ 'success': false, 'stateKey': stateKey, 'error': 'State already subscribed!' });\r\n\t\t}\r\n\t}\r\n\t\r\n\t/**\r\n\t *\r\n\t *\r\n\t */\r\n\tunlisten(eventName, callback) {\r\n\t\t\r\n\t\tif (typeof eventName === 'function') {\r\n\t\t\tcallback = eventName;\r\n\t\t\teventName = 'stateChange';\r\n\t\t}\r\n\t\t\r\n\t\tthis.off(eventName, callback);\r\n\t}\r\n}\r\n","\r\nexport default {\r\n\tsettings: require('./SettingsPage').default,\r\n\tlogs: require('./LogsPage').default,\r\n}","import React from 'react'\r\nimport clsx from 'clsx'\r\n\r\nimport i18n from '../i18n'\r\n\r\nimport AppBar from '@material-ui/core/AppBar'\r\nimport Toolbar from '@material-ui/core/Toolbar'\r\nimport Typography from '@material-ui/core/Typography'\r\nimport IconButton from '@material-ui/core/IconButton'\r\nimport Tooltip from '@material-ui/core/tooltip'\r\nimport Badge from '@material-ui/core/Badge'\r\nimport NotificationsIcon from '@material-ui/icons/Notifications'\r\nimport MenuIcon from '@material-ui/icons/Menu'\r\nimport SettingsIcon from '@material-ui/icons/Settings'\r\n\r\n\r\n/*\r\n * STYLES\r\n */\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nconst useStyles = makeStyles(theme => ({\r\n\tappBar: {\r\n\t\tflexGrow: 1,\r\n\t\tboxShadow: 'none',\r\n\t\ttransform: 'none',\r\n\t},\r\n\ttoolbar: {\r\n\t\tbackgroundColor: theme.palette.primary.main\r\n\t},\r\n\tmenuButton: {\r\n\t\tmarginRight: theme.spacing(2)\r\n\t},\r\n\ttitle: {\r\n\t\tflexGrow: 1,\r\n\t},\r\n\ticon: {\r\n\t\t...theme.components.icon,\r\n\t\tcolor: '#fff',\r\n\t\tpaddingRight: '6px',\r\n\t\twidth: '1em',\r\n\t\theight: '1em',\r\n\t\tdisplay: 'inline-block',\r\n\t\tfontSize: '1.5rem',\r\n\t\ttransition: 'fill 200ms cubic-bezier(0.4, 0, 0.2, 1) 0ms',\r\n\t\tflexShrink: 0,\r\n\t\tuserSelect: 'none'\r\n\t}\r\n}));\r\n\r\n\r\nexport default function TopBar(props) {\r\n\tconst classes = useStyles();\r\n\t\r\n\tconst { children, title, connectionStatus, toggleDrawer, navigate, notifications } = props;\r\n\tconst [ icon, label ] = title.indexOf('|') > -1 ? title.split('|') : [ null, title ];\r\n\t\r\n\tconst connectionStatusIcon = connectionStatus ? 'lan-connect' : (connectionStatus === 'pending' ? 'lan-pending' : 'lan-disconnect');\r\n\tconst connectionStatusTooltip = connectionStatus ? i18n.t('Connected to ioBroker') : (connectionStatus === 'pending' ? i18n.t('Not connected to ioBroker! Reconnecting..') : i18n.t('Not connected to ioBroker! Connection failed!'));\r\n\t\r\n\treturn (\r\n\r\n<AppBar id=\"appBar\" position=\"static\" className={classes.appBar}>\r\n\r\n\t<Toolbar className={classes.toolbar}>\r\n\t\t\r\n\t\t<Typography variant=\"h6\" className={classes.title}>\r\n\t\t\t{icon && <span className={clsx(classes.icon, 'mdi mdi-' + icon)}></span>}\r\n\t\t\t{label !== 'null' && label}\r\n\t\t</Typography>\r\n\t\t<IconButton color=\"inherit\" onClick={() => navigate('logs')}>\r\n\t\t\t<Tooltip title={i18n.t(connectionStatusTooltip)}>\r\n\t\t\t\t<span className={\"mdi mdi-\" + connectionStatusIcon}></span>\r\n\t\t\t</Tooltip>\r\n\t\t</IconButton>\r\n\t\t\r\n\t\t{/*\r\n\t\t<IconButton color=\"inherit\" onClick={() => navigate('settings')}>\r\n\t\t\t<SettingsIcon />\r\n\t\t</IconButton>\r\n\t\t<IconButton color=\"inherit\" onClick={() => toggleDrawer('notificationDrawer', true)}>\r\n\t\t\t<Badge badgeContent={notifications} color=\"secondary\">\r\n\t\t\t\t<NotificationsIcon />\r\n\t\t\t</Badge>\r\n\t\t</IconButton>\r\n\t\t*/}\r\n\t\t\r\n\t</Toolbar>\r\n\t\r\n\t{children}\r\n</AppBar>\r\n\r\n\t);\r\n}\r\n","/*\r\n * by QoP <https://stackoverflow.com/users/4484822/qop>\r\n * @see https://stackoverflow.com/questions/36862334/get-viewport-window-height-in-reactjs\r\n */\r\nimport { useState, useEffect } from 'react';\r\n\r\nfunction getWindowDimensions() {\r\n  const { innerWidth: width, innerHeight: height } = window;\r\n  return {\r\n    width,\r\n    height\r\n  };\r\n}\r\n\r\nexport default function useWindowDimensions() {\r\n  const [windowDimensions, setWindowDimensions] = useState(getWindowDimensions());\r\n\r\n  useEffect(() => {\r\n    function handleResize() {\r\n      setWindowDimensions(getWindowDimensions());\r\n    }\r\n\r\n    window.addEventListener('resize', handleResize);\r\n    return () => window.removeEventListener('resize', handleResize);\r\n  }, []);\r\n\r\n  return windowDimensions;\r\n}\r\n","import React, { useState, useEffect, useRef, useCallback } from 'react'\r\nimport clsx from 'clsx'\r\n\r\nimport Settings from '../Settings'\r\nimport useWindowDimensions from '../helpers/useWindowDimensions'\r\n\r\nimport Tabs from '@material-ui/core/Tabs'\r\nimport Tab from '@material-ui/core/Tab'\r\nimport Box from '@material-ui/core/Box'\r\n\r\n\r\n/*\r\n * STYLES\r\n */\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nconst useStyles = makeStyles(theme => ({\r\n\ticon: {\r\n\t\t...theme.components.icon,\r\n\t\tcolor: '#fff',\r\n\t\tpaddingBottom: '6px',\r\n\t\twidth: '1em',\r\n\t\theight: '1em',\r\n\t\tdisplay: 'inline-block',\r\n\t\tfontSize: '1.5rem',\r\n\t\ttransition: 'fill 200ms cubic-bezier(0.4, 0, 0.2, 1) 0ms',\r\n\t\tflexShrink: 0,\r\n\t\tuserSelect: 'none'\r\n\t},\r\n\ttabs: {\r\n\t\tbackgroundColor: theme.palette.primary.main,\r\n\t\tpaddingLeft: theme.spacing(),\r\n\t\tcolor: '#fff',\r\n\t\twidth: 'calc(100% - ' + theme.spacing() + 'px)',\r\n\t\tzIndex: 101,\r\n\t\tborderBottom: '5px solid #eee'\r\n\t},\r\n\tfixed: {\r\n\t\tposition: 'fixed',\r\n\t\ttop: 0\r\n\t},\r\n\tindicator: {\r\n\t\tbackgroundColor: '#fff',\r\n\t},\r\n\tfullscreen: {\r\n\t\tmarginLeft: -theme.spacing(),\r\n\t\tmarginTop: '-5px',\r\n\t},\r\n\tgrid: {\r\n\t\tpaddingBottom: '30px'\r\n\t}\r\n}));\r\n\r\n\r\nexport default function TabBar(props) {\r\n\tlet { tabs, selectTab } = props;\r\n\tconst classes = useStyles();\r\n\tlet tabBarProps = useRef({});\r\n\t\r\n\t// tab\r\n\tconst [tab, setTab] = useState(0);\r\n\tconst handleChange = (event, selectedTab) => {\r\n\t\tselectTab(selectedTab, tabs[selectedTab]);\r\n\t\tsetTab(selectedTab);\r\n\t}\r\n\t\r\n\t// scroll\r\n\tconst [fixed, setFixed] = useState(false);\r\n\tconst handleScroll = useCallback(() => {\r\n\t\tconst threshold = (tabBarProps.current.top + tabBarProps.current.height - 53);\r\n\t\tconst fixed = window.scrollY >= threshold;\r\n\t\t\r\n\t\tsetFixed(prevFixed => {\r\n\t\t\tif (prevFixed !== fixed) {\r\n\t\t\t\tdocument.getElementById('root').style.paddingTop = fixed ? (threshold-5-8) + 'px' : 0;\r\n\t\t\t\treturn fixed;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\treturn prevFixed;\r\n\t\t});\r\n\t\t\r\n\t}, [tabBarProps]);\r\n\r\n\tuseEffect(() => {\r\n\t\ttabBarProps.current = {\r\n\t\t\ttop: document.getElementById('tabBar').offsetTop,\r\n\t\t\theight: document.getElementById('tabBar').offsetHeight\r\n\t\t}\r\n\t\t\r\n\t\twindow.addEventListener('scroll', handleScroll);\r\n\t\treturn () => window.removeEventListener('keydown', handleScroll, 0);\r\n\t\t\r\n\t}, [handleScroll]);\r\n\t\r\n\t// render tabs\r\n\tconst renderedTabs = tabs.map((tab, i) => {\r\n\t\tconst [ icon, label ] = tab.indexOf('|') > -1 ? tab.split('|') : [ null, tab ];\r\n\t\treturn <Tab key={'tab' + i} icon={<span className={clsx(classes.icon, 'mdi mdi-' + icon)}></span>} label={!fixed && Settings.getSetting('tabsHideLabels') !== true && label !== 'null' ? label : null} />\r\n\t});\r\n\t\r\n\treturn (\r\n\r\n<Tabs\r\n\tid=\"tabBar\"\r\n\tvalue={tab}\r\n\tonChange={handleChange}\r\n\tvariant=\"scrollable\"\r\n\tclasses={{\r\n\t\troot: clsx(classes.tabs, fixed && classes.fixed),\r\n\t\tindicator: classes.indicator\r\n\t}}>\r\n\t\r\n\t{renderedTabs}\r\n</Tabs>\r\n\r\n\t);\r\n}\r\n\r\n\r\nexport function TabPanel(props) {\r\n\tconst { children, selectedTab, renderedTab, fullscreen } = props;\r\n\tconst classes = useStyles();\r\n\t\r\n\t\r\n\t// get map height based on viewport\r\n\tconst { height } = useWindowDimensions();\r\n\tconst [mapHeight, setMapHeight] = useState(height);\r\n\tlet topBarHeight = useRef({});\r\n\t\r\n\tuseEffect(() => {\r\n\t\ttopBarHeight.current = document.getElementById('appBar').offsetHeight;\r\n\t\tsetMapHeight(height-topBarHeight.current+5);\r\n\t\t\r\n\t}, [height]);\r\n\t\r\n\t/*\r\n\t * Some components need to be visible upon loading, so proper initialise.\r\n\t * Due to the 'hidden' attribute though, they might be hidden.\r\n\t * This is a workaround to initially show everything for a short period of time and then hide according to tab settings.\r\n\t *\r\n\t */\r\n\tconst [hidden, setHidden] = useState(null);\r\n\tuseEffect(() => {\r\n\t\tsetTimeout(() => setHidden(selectedTab !== renderedTab), 10);\r\n\t\t\r\n\t}, [selectedTab, renderedTab]);\r\n\t\r\n\treturn (\r\n\r\n<Box\r\n\trole=\"tabpanel\"\r\n\thidden={hidden}\r\n\tid={'tabpanel-' + renderedTab}\r\n\tclassName={clsx(fullscreen ? classes.fullscreen : classes.grid)}\r\n\tstyle={{ height: mapHeight + 'px' }}\r\n\t>\r\n\t\r\n\t{children}\r\n</Box>\r\n\r\n\t);\r\n}\r\n","import React from 'react'\r\nimport clsx from 'clsx'\r\n\r\nimport i18n from '../i18n'\r\n\r\nimport Drawer from '@material-ui/core/Drawer'\r\nimport Divider from '@material-ui/core/Divider'\r\nimport List from '@material-ui/core/List'\r\nimport ListItem from '@material-ui/core/ListItem'\r\nimport ListItemIcon from '@material-ui/core/ListItemIcon'\r\nimport ListItemText from '@material-ui/core/ListItemText'\r\n\r\n\r\n/*\r\n * STYLES\r\n */\r\nimport { withStyles } from '@material-ui/core/styles';\r\nconst styles = theme => ({\r\n\tdrawer: {\r\n\t\twidth: 400\r\n\t}\r\n});\r\n\r\n\r\nclass Notifications extends React.Component {\r\n\t\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\t\r\n\t\tthis.state = {\r\n\t\t}\r\n\t}\r\n\t\r\n\trender() {\r\n\t\tconst { classes, notifications } = this.props;\r\n\t\t\r\n\t\treturn (\r\n\r\n<Drawer\r\n\tanchor=\"right\"\r\n\topen={this.props.open}\r\n\tonClose={() => this.props.toggleDrawer('notificationDrawer', false)}\r\n\tclasses={{\r\n\t\tpaper: classes.drawer\r\n\t}}\r\n\t>\r\n\t\r\n</Drawer>\r\n\r\n\t\t);\r\n\t}\r\n}\r\n\r\nexport default withStyles(styles)(Notifications);\r\n","\r\nexport const ModuleSettings = {\r\n\tAdapterStatus: require('./AdapterStatus').ModuleSettings || {},\r\n\tChart: require('./Chart').ModuleSettings || {},\r\n\tDateTime: require('./DateTime').ModuleSettings || {},\r\n\tMap: require('./Map').ModuleSettings || {},\r\n\tMultimedia: require('./Multimedia').ModuleSettings || {},\r\n\tStateList: require('./StateList').ModuleSettings || {},\r\n\tStateListHorizontal: require('./StateListHorizontal').ModuleSettings || {},\r\n\tWeather: require('./Weather').ModuleSettings || {}\r\n}\r\n\r\nexport default {\r\n\tAdapterStatus: require('./AdapterStatus').default,\r\n\tChart: require('./Chart').default,\r\n\tDateTime: require('./DateTime').default,\r\n\tMap: require('./Map').default,\r\n\tMultimedia: require('./Multimedia').default,\r\n\tStateList: require('./StateList').default,\r\n\tStateListHorizontal: require('./StateListHorizontal').default,\r\n\tWeather: require('./Weather').default\r\n}","import React from 'react'\r\n\r\nimport Log from '../Log'\r\nimport Connection from '../Connection'\r\nimport Device from '../Device'\r\n\r\nimport Button from '@material-ui/core/Button'\r\nimport Dialog from '@material-ui/core/Dialog'\r\nimport MuiDialogTitle from '@material-ui/core/DialogTitle'\r\nimport MuiDialogContent from '@material-ui/core/DialogContent'\r\nimport MuiDialogActions from '@material-ui/core/DialogActions'\r\nimport IconButton from '@material-ui/core/IconButton'\r\nimport CloseIcon from '@material-ui/icons/Close'\r\nimport Typography from '@material-ui/core/Typography'\r\n\r\nimport Modules from '../modules'\r\n\r\n\r\n/*\r\n * STYLES\r\n */\r\nimport { withStyles } from '@material-ui/core/styles';\r\nconst styles = theme => ({\r\n\troot: {\r\n\t\tmargin: 0,\r\n\t\tpadding: theme.spacing(2),\r\n\t},\r\n\tcloseButton: {\r\n\t\tposition: 'absolute',\r\n\t\tright: theme.spacing(1),\r\n\t\ttop: theme.spacing(1),\r\n\t\tcolor: theme.palette.grey[500],\r\n\t},\r\n});\r\n\r\n\r\nconst DialogTitle = withStyles(styles)(props => {\r\n\tconst { children, classes, onClose, ...other } = props;\r\n\treturn (\r\n\r\n<MuiDialogTitle disableTypography className={classes.root} {...other}>\r\n\t<Typography variant=\"h6\">{children}</Typography>\r\n\t{onClose ? (\r\n\t<IconButton aria-label=\"close\" className={classes.closeButton} onClick={onClose}>\r\n\t\t<CloseIcon />\r\n\t</IconButton>\r\n\t) : null}\r\n</MuiDialogTitle>\r\n\r\n\t);\r\n});\r\n\r\nconst DialogContent = withStyles(theme => ({\r\n\troot: {\r\n\t\tpadding: theme.spacing(2),\r\n\t\t[theme.breakpoints.down('md')]: {\r\n\t\t\tpaddingLeft: theme.spacing(1)\r\n\t\t}\r\n\t},\r\n}))(MuiDialogContent);\r\n\r\nconst DialogActions = withStyles(theme => ({\r\n\troot: {\r\n\t\tmargin: 0,\r\n\t\tpadding: theme.spacing(1),\r\n\t},\r\n}))(MuiDialogActions);\r\n\r\n\r\nexport default class Popup extends React.Component {\r\n\t\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\t\r\n\t\tthis.state = {\r\n\t\t\tchildren: []\r\n\t\t};\r\n\t}\r\n\t\r\n\tcomponentDidUpdate(prevProps, prevState) {\r\n\t\t\r\n\t\tlet device = this.props.contents && this.props.contents.device;\r\n\t\tif (device.id && this.props.contents.ts !== prevProps.contents.ts) {\r\n\t\t\t\r\n\t\t\t// get from cache\r\n\t\t\tif (device.children.length) {\r\n\t\t\t\tLog._('Popup', [ 'Got ' + Object.keys(device.children).length + ' states for device ' + device.name + ' from cache.', device.children ]);\r\n\t\t\t\tthis.setState({ 'children': device.children }, () => this.forceUpdate());\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\t// retrieve new\r\n\t\t\telse {\r\n\t\t\t\t// loop through states and request status\r\n\t\t\t\tlet responses = [];\r\n\t\t\t\tlet children = [];\r\n\t\t\t\t\r\n\t\t\t\tfor (let stateKey in device.states) {\r\n\t\t\t\t\t\r\n\t\t\t\t\tif (device.states[stateKey].state === undefined || device.options.hiddenStates.indexOf(stateKey) > -1) {\r\n\t\t\t\t\t\tcontinue;\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t\tlet child = new Device({\r\n\t\t\t\t\t\t\t'parent': device,\r\n\t\t\t\t\t\t\t'id': device.id + '#' + stateKey,\r\n\t\t\t\t\t\t\t'name': device.name,\r\n\t\t\t\t\t\t\t'function': device.function,\r\n\t\t\t\t\t\t\t//'states': { [stateKey]: device.states[stateKey] },\r\n\t\t\t\t\t\t\t'states': device.states,\r\n\t\t\t\t\t\t\t'options': {\r\n\t\t\t\t\t\t\t\t...device.options,\r\n\t\t\t\t\t\t\t\t'primary': stateKey,\r\n\t\t\t\t\t\t\t\t'secondary': null,\r\n\t\t\t\t\t\t\t\t'divider': children.length !== 0,\r\n\t\t\t\t\t\t\t\t'subgroup': null,\r\n\t\t\t\t\t\t\t\t'subtitle': null\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tConnection.getConnection,\r\n\t\t\t\t\t\twindow.language\r\n\t\t\t\t\t);\r\n\t\t\t\t\t\r\n\t\t\t\t\t// add child to parent\r\n\t\t\t\t\tdevice.children.push(child);\r\n\t\t\t\t\t\r\n\t\t\t\t\t// retrieve state\r\n\t\t\t\t\tresponses.push(child.requestDeviceState(null, true));\r\n\t\t\t\t\tchildren.push(child);\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tPromise.allSettled(responses).then(() => {\r\n\t\t\t\t\tLog._('Popup', [ 'Retrieved ' + Object.keys(children).length + ' states for device ' + device.name + '.', children ]);\r\n\t\t\t\t\tthis.setState({ 'children': children }, () => this.forceUpdate());\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t}\r\n\t\telse if (!device.id && this.props.contents.ts !== prevProps.contents.ts) {\r\n\t\t\tthis.setState({ 'children': [] }, () => this.forceUpdate());\r\n\t\t}\r\n\t}\r\n\t\r\n\tshouldComponentUpdate(nextProps, nextState) {\r\n\t\treturn !this.props.contents || this.props.contents.ts !== nextProps.contents.ts;\r\n\t}\r\n\t\r\n\trender() {\r\n\t\tconst { open, closeDialog, contents } = this.props;\r\n\t\tconst { device } = contents;\r\n\t\t\r\n\t\treturn (\r\n\r\n<Dialog onClose={closeDialog} open={open || false} maxWidth={'md'} fullWidth={true}>\r\n\t<DialogTitle onClose={closeDialog}>\r\n\t\t{device.name}\r\n\t</DialogTitle>\r\n\t<DialogContent dividers style={{ padding: 0 }}>\r\n\t\t\r\n\t\t<Modules.StateList openDialog={null} devices={this.state.children} component={true} action={true} />\t\r\n\t\t\r\n\t</DialogContent>\r\n\t<DialogActions>\r\n\t\t<Button autoFocus onClick={closeDialog} color=\"primary\">\r\n\t\t\tClose\r\n\t\t</Button>\r\n\t</DialogActions>\r\n</Dialog>\r\n\r\n\t\t);\r\n\t};\r\n}\r\n","import React from 'react'\r\n\r\nimport Card from '@material-ui/core/Card'\r\nimport CardHeader from '@material-ui/core/CardHeader'\r\nimport CardContent from '@material-ui/core/CardContent'\r\nimport Avatar from '@material-ui/core/Avatar'\r\nimport Typography from '@material-ui/core/Typography'\r\n\r\n\r\n/*\r\n * STYLES\r\n */\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nconst useStyles = makeStyles(theme => ({\r\n\tcard: {\r\n\t\tmargin: theme.spacing(1, 1, 0, 0),\r\n\t\t[theme.breakpoints.down('md')]: {\r\n\t\t\tmargin: theme.spacing(0.4, 0.4, 0, 0)\r\n\t\t}\r\n\t},\r\n\tcardHeaderNoContents: {\r\n\t\tpadding: theme.spacing(),\r\n\t},\r\n\tcardAvatar: props => ({\r\n\t\tbackgroundColor: theme.palette.primary.main,\r\n\t\tcolor: '#fff',\r\n\t\tfontSize: '24px',\r\n\t\t...props\r\n\t}),\r\n\tcardContent: {\r\n\t\tpadding: theme.spacing(0, 2),\r\n\t\t[theme.breakpoints.down('md')]: {\r\n\t\t\tpadding: theme.spacing(0)\r\n\t\t}\r\n\t}\r\n}));\r\n\r\n\r\nexport default function Widget(props) {\r\n\tconst { title, icon, iconStyle } = props;\r\n\tconst classes = useStyles(iconStyle);\r\n\t\r\n\treturn (\r\n\r\n<Card className={classes.card}>\r\n\t<CardHeader\r\n\t\tavatar={icon !== null &&\r\n\t\t\t<Avatar variant=\"rounded\" classes={{ root: classes.cardAvatar }}>\r\n\t\t\t\t{React.createElement('span', { 'className': 'mdi mdi-' + (icon || 'home') })}\r\n\t\t\t</Avatar>\r\n\t\t}\r\n\t\ttitle={title &&\r\n\t\t\t<Typography variant=\"h5\" component=\"h2\">\r\n\t\t\t\t{title}\r\n\t\t\t</Typography>\r\n\t\t}\r\n\t/>\r\n\t<CardContent className={classes.cardContent}>\r\n\t\t{props.children}\r\n\t</CardContent>\r\n</Card>\r\n\r\n\t);\r\n}\r\n","import React from 'react'\r\n\r\nimport Log from './Log'\r\nimport Connection from './Connection'\r\nimport Settings from './Settings'\r\n\r\nimport Dialog from '@material-ui/core/Dialog'\r\n\r\nimport Pages from './pages'\r\nimport TopBar from './components/TopBar'\r\nimport TabBar, { TabPanel } from './components/TabBar'\r\nimport Notifications from './components/Notifications'\r\nimport GridContainer from './components/GridContainer'\r\nimport Popup from './components/Popup'\r\nimport Widget from './components/Widget'\r\nimport Modules, { ModuleSettings } from './modules'\r\n\r\n\r\n/*\r\n *\r\n */\r\nconst getGroup = (groupId, group, props = {}) => {\r\n\t\r\n\t// group empty\r\n\tif (!group && ModuleSettings[group.settings.component.module].noDevicesAllowed !== true) {\r\n\t\tLog._('Jarvis', 'Group ' + groupId + ' defined in columns but not assigned to any devices!', 'error');\r\n\t\treturn null;\r\n\t}\r\n\t\r\n\t// get module for component\r\n\tgroup.settings.component = typeof group.settings.component === 'string' ? { 'module': group.settings.component } : (group.settings.component || {});\r\n\tconst Tag = Modules[group.settings.component.module || 'StateList'];\r\n\t\r\n\t// get tag\r\n\tif (Tag === undefined) {\r\n\t\tLog._('Jarvis', 'Undefined component \"' + group.settings.component.module + '\" used!', 'error');\r\n\t\treturn null;\r\n\t}\r\n\t\r\n\treturn <Tag key={'Tag' + groupId} devices={group.devices} openDialog={props.action ? props.action : null} settings={{ ...group.settings, ...props }} />\r\n}\r\n\r\n\r\n/*\r\n *\r\n */\r\nconst getGridContents = (contents, groups, props = {}) => {\r\n\t\r\n\tlet gridContents = {};\r\n\tconst columns = Object.keys(contents).length;\r\n\t\r\n\tfor (let column = 1; column <= columns; column++) {\r\n\t\t\r\n\t\tlet columnContents = contents[column];\r\n\t\tgridContents[column] = gridContents[column] || [];\r\n\t\t\r\n\t\t// no contents, thus add placeholder\r\n\t\tif (!columnContents || !Object.keys(columnContents).length) {\r\n\t\t\tgridContents[column].push(null);\r\n\t\t}\r\n\t\t\r\n\t\t// add contents\r\n\t\telse {\r\n\t\t\tfor (let groupId in columnContents) {\r\n\t\t\t\t\r\n\t\t\t\tlet group = groups[groupId] || {};\r\n\t\t\t\tgroup.devices = group.devices || [];\r\n\t\t\t\tgroup.settings = columnContents[groupId] || {};\r\n\t\t\t\tgroup.settings.component = typeof group.settings.component === 'string' ? { 'module': group.settings.component } : (group.settings.component || {});\r\n\t\t\t\tgroup.settings.module = ModuleSettings[group.settings.component.module] || {};\r\n\t\t\t\t\r\n\t\t\t\tlet content = getGroup(groupId, group, props);\r\n\t\t\t\tif ((group.devices.length > 0 || group.settings.module.noDevicesAllowed) && content) {\r\n\t\t\t\t\tgridContents[column].push(\r\n\t\t\t\t\t\t<Widget key={'Box-' + groupId}\r\n\t\t\t\t\t\t\ttitle={group.settings.title === null ? null : (group.settings.title || group.name || group.settings.module.title)}\r\n\t\t\t\t\t\t\ticon={group.settings.icon === null ? null : (group.settings.icon || group.settings.module.icon)}\r\n\t\t\t\t\t\t\ticonStyle={group.settings.iconStyle}\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t{content}\r\n\t\t\t\t\t\t</Widget>\r\n\t\t\t\t\t);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\t\r\n\treturn gridContents;\r\n}\r\n\r\n\r\nexport default class Jarvis extends React.Component {\r\n\t\r\n    constructor(props) {\r\n\t\tsuper(props);\r\n\t\t\r\n\t\tthis.state = {\r\n\t\t\tconnectionStatus: this.props.connectionStatus || false,\r\n\t\t\t\r\n\t\t\tselectedTab: 0,\r\n\t\t\ttabTitle: '',\r\n\t\t\t\r\n\t\t\tpage: 'home',\r\n\t\t\t\r\n\t\t\tnotificationDrawer: false,\r\n\t\t\tnotifications: [],\r\n\t\t\tnotificationsUnread: 0,\r\n\t\t\t\r\n\t\t\tdialog: false,\r\n\t\t\tdialogContents: {\r\n\t\t\t\t'ts': 0,\r\n\t\t\t\t'device': {}\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\t// bind methods\r\n\t\tthis.closeDialog = this.closeDialog.bind(this);\r\n\t\tthis.openDialog = this.openDialog.bind(this);\r\n\t\tthis.selectTab = this.selectTab.bind(this);\r\n\t\tthis.toggleDrawer = this.toggleDrawer.bind(this);\r\n\t\tthis.navigate = this.navigate.bind(this);\r\n\t\t\r\n\t\t// get connection\r\n\t\tthis.socket = Connection.getConnection;\r\n\t\t\r\n\t\t// initialise\r\n\t\tthis.gridContents = {};\r\n\t\tthis.layout = Settings.getSetting('layout');\r\n\t\tthis.tabs = Object.keys(this.layout);\r\n\t\tthis.tabsEnabled = this.tabs[0] !== 1;\r\n\t\tthis.state.tabTitle = this.tabs[this.state.selectedTab];\r\n\t\t\r\n\t\t// no tabs defined, so layout wrap into default tab\r\n\t\tif (!this.tabsEnabled) {\r\n\t\t\tthis.layout = { 'Home': this.layout };\r\n\t\t\tthis.tabs.push('1');\r\n\t\t}\r\n\t\t\r\n\t\t// widget props\r\n\t\tthis.widgetProps = {}\r\n\t}\r\n\t\r\n\tcomponentDidMount() {\r\n\t\t\r\n\t\t// get notifications\r\n\t\tthis.socket.getState('jarvis.0.notifications').then(notifications => {\r\n\t\t\tnotifications = (notifications && notifications.val && JSON.parse(notifications.val)) || [];\r\n\t\t\t\r\n\t\t\tthis.setState({\r\n\t\t\t\tnotificationsUnread: notifications.filter(notification => !notification.unread || notification.unread !== false).length,\r\n\t\t\t\tnotifications: notifications\r\n\t\t\t});\r\n\t\t});\r\n\t\t\r\n\t\tthis.socket.subscribeState('jarvis.0.notifications', notifications => Log._('Jarvis', notifications));\r\n\t}\r\n\t\r\n\tgetTabPanels() {\r\n\t\t\r\n\t\tlet tab = 0;\r\n\t\tlet tabPanels = [];\r\n\t\tfor (let tabLabel in this.layout) {\r\n\t\t\tconst contents = this.layout[tabLabel];\r\n\t\t\t\r\n\t\t\t// fullscreen in component\r\n\t\t\tlet groupId = Object.keys(contents)[0];\r\n\t\t\tlet fullscreen = Number.isNaN(parseInt(groupId));\r\n\t\t\t\r\n\t\t\tif (!this.gridContents[tabLabel] && fullscreen) {\r\n\t\t\t\tthis.gridContents[tabLabel] = getGroup(contents, { ...this.props.groups[groupId], settings: contents[groupId] }, { action: this.openDialog, ...this.widgetProps });\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\t// grid layout\r\n\t\t\telse if (!this.gridContents[tabLabel]) {\r\n\t\t\t\tthis.gridContents[tabLabel] = <GridContainer contents={getGridContents(contents, this.props.groups, { action: this.openDialog, ...this.widgetProps })} />\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tlet tabPanel = (\r\n\t\t\t\t<TabPanel key={'tabPanel-' + tab} renderedTab={tab} selectedTab={this.state.selectedTab} fullscreen={fullscreen}>\r\n\t\t\t\t\t{this.gridContents[tabLabel]}\r\n\t\t\t\t</TabPanel>\r\n\t\t\t);\r\n\t\t\t\r\n\t\t\ttabPanels.push(tabPanel);\r\n\t\t\ttab++;\r\n\t\t}\r\n\t\t\r\n\t\treturn tabPanels;\r\n\t}\r\n\t\r\n\tcloseDialog() {\r\n\t\tthis.setState({ 'dialog': false, 'dialogContents': { 'ts': Date.now(), 'device': {} } });\r\n\t}\r\n\t\r\n\topenDialog(device) {\r\n\t\tthis.setState({ 'dialog': true, 'dialogContents': { 'ts': Date.now(), 'device': device } });\r\n\t}\r\n\t\r\n\tselectTab(tab, title) {\r\n\t\tthis.setState({ selectedTab: tab, tabTitle: title });\r\n\t}\r\n\t\r\n\ttoggleDrawer(drawer, open) {\r\n\t\tthis.setState({ [drawer]: open });\r\n\t}\r\n\t\r\n\tnavigate(page) {\r\n\t\tthis.setState({ page });\r\n\t}\r\n\t\r\n    render() {\r\n\t\tconst Page = Pages[this.state.page] || null;\r\n        return (\r\n\r\n<React.Fragment>\r\n\t<TopBar\r\n\t\ttitle={Settings.topBarTitle || (this.tabsEnabled && this.state.tabTitle) || 'jarvis'}\r\n\t\tconnectionStatus={this.state.connectionStatus}\r\n\t\ttoggleDrawer={this.toggleDrawer}\r\n\t\tnavigate={this.navigate}\r\n\t\tnotifications={this.state.notificationsUnread}\r\n\t\t>\r\n\t\t\r\n\t\t{this.tabsEnabled && <TabBar tabs={this.tabs} selectTab={this.selectTab} />}\r\n\t</TopBar>\r\n\t\r\n\t\r\n\t{/* DRAWER: NOTIFICATIONS */}\r\n\t<Notifications\r\n\t\topen={this.state.notificationDrawer}\r\n\t\ttoggleDrawer={this.toggleDrawer}\r\n\t\tnotifications={this.state.notifications}\r\n\t\t/>\r\n\t\r\n\t\r\n\t{/* PAGE */}\r\n\t{Page && <Dialog fullWidth={true} maxWidth={'xl'} open={(this.state.page !== 'home')} onClose={() => this.navigate('home')}>\r\n\t\t<Page\r\n\t\t\tdevices={this.props.devices}\r\n\t\t\tonClose={() => this.navigate('home')}\r\n\t\t\t/>\r\n\t\t\r\n\t</Dialog>}\r\n\t\r\n\t\r\n\t{/* POPUP */}\r\n\t<Popup open={this.state.dialog} contents={this.state.dialogContents} closeDialog={this.closeDialog} />\r\n\t{this.getTabPanels()}\r\n\t\r\n</React.Fragment>\r\n\r\n\t\t)\r\n\t}\r\n}\r\n","import React from 'react'\r\n\r\nimport { NODES } from './config/config'\r\n\r\nimport Grid from '@material-ui/core/Grid'\r\nimport CircularProgress from '@material-ui/core/CircularProgress'\r\nimport Typography from '@material-ui/core/Typography'\r\nimport Skeleton from '@material-ui/lab/Skeleton'\r\n\r\nimport GridContainer from './components/GridContainer'\r\nimport StatusSnackbar from './components/StatusSnackbar'\r\n\r\nimport config from './config/config.dev.js'\r\nimport Log from './Log'\r\nimport i18n from './i18n'\r\nimport Connection from './Connection'\r\nimport Settings from './Settings'\r\nimport Device from './Device'\r\nimport Jarvis from './Jarvis'\r\n\r\n\r\n/*\r\n * STYLES\r\n */\r\nimport { ThemeProvider, withStyles } from '@material-ui/core/styles';\r\nconst styles = theme => ({\r\n\tloading: {\r\n\t\tmargin: '10px 0 0 0',\r\n\t\tcolor: '#999'\r\n\t},\r\n\tgridItem: {\r\n\t\tmargin: theme.spacing(1, 1, 0, 0),\r\n\t\t[theme.breakpoints.down('md')]: {\r\n\t\t\tmarginRight: theme.spacing(0.4, 0.4, 0, 0)\r\n\t\t}\r\n\t}\r\n});\r\n\r\n\r\n/*\r\n * CONSTANTS\r\n *\r\n */\r\nclass App extends React.Component {\r\n\t\r\n    constructor(props) {\r\n\t\tsuper(props);\r\n\t\t\r\n\t\tthis.state = {\r\n\t\t\tloaded: [],\r\n\t\t\tconnected: false,\r\n\t\t\terror: false,\r\n\t\t\terrorMessage: '',\r\n\t\t\t\r\n\t\t\ttheme: null\r\n\t\t}\r\n\t}\r\n\t\r\n\tcomponentDidMount() {\r\n\t\t\r\n\t\t// connect and get connection\r\n\t\tconst errorHandler = err => {\r\n\t\t\tLog._('App', i18n.t('Socket disconnected') + '!', 'error', true, err.stack);\r\n\t\t\tthis.setState({ connected: false, error: true, errorMessage: i18n.t(typeof err === 'string' ? err : err.message) + '..' });\r\n\t\t\t\r\n\t\t\tsetTimeout(function reconnect() {\r\n\t\t\t\t\r\n\t\t\t\tLog._('App', i18n.t('Attempting reconnect') + '..');\r\n\t\t\t\tConnection.reconnect();\r\n\t\t\t\tsetTimeout(() => reconnect, 15*1000);\r\n\t\t\t\t\r\n\t\t\t}, 10*1000);\r\n\t\t};\r\n\t\t\r\n\t\tconst url = window.location.port === '3000' ? config.iobrokerWebAdapterUrl :\r\n\t\t\twindow.location.protocol + '//' + window.location.hostname + (window.location.port ? ':' + window.location.port : '');\r\n\t\t\r\n\t\tconst listeners = [\r\n\t\t\t{ 'event': 'connect', 'callback': () => this.setState({ connected: true, error: false, errorMessage: '' }) },\r\n\t\t\t{ 'event': 'reconnect', 'callback': () => this.setState({ connected: 'pending', error: false, errorMessage: '' }) },\r\n\t\t\t{ 'event': 'disconnect', 'callback': errorHandler },\r\n\t\t\t{ 'event': 'error', 'callback': errorHandler }\r\n\t\t];\r\n\t\t\r\n\t\tLog._('App', i18n.t('Connect to') + ' ' + url + '...');\r\n\t\tthis.socket = Connection.connect(url, listeners);\r\n\t\t\r\n\t\t// retrieve settings\r\n\t\tthis.settings = {};\r\n\t\tthis.socket.getState(NODES.SETTINGS)\r\n\t\t\t.then(state => {\r\n\t\t\t\t\r\n\t\t\t\ttry {\r\n\t\t\t\t\tif (state) {\r\n\t\t\t\t\t\tthis.settings = { ...this.settings, ...JSON.parse(state.val) || {} };\r\n\t\t\t\t\t\tSettings.setSettings(this.settings);\r\n\t\t\t\t\t\tSettings.applySettings();\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t// get theme\r\n\t\t\t\t\t\timport('./theme').then(theme => this.setState({ theme: theme.default }));\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t\tconst tab = Object.keys(this.settings.layout)[0];\r\n\t\t\t\t\tif (tab === undefined) {\r\n\t\t\t\t\t\tthis.setState({\r\n\t\t\t\t\t\t\terror: true,\r\n\t\t\t\t\t\t\terrorMessage: i18n.t('Please create the configuration. See documentation.')\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse {\r\n\t\t\t\t\t\tthis.setState({ loaded: [ ...this.state.loaded, 'settings' ] });\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tcatch(err) {\r\n\t\t\t\t\tLog._('App', 'GET_SETTINGS: ' + err.message, 'error');\r\n\t\t\t\t\tthis.setState({\r\n\t\t\t\t\t\terror: true,\r\n\t\t\t\t\t\terrorMessage: i18n.t('Error parsing settings') + '!'\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t})\r\n\t\t\t.catch(err => {\r\n\t\t\t\tLog._('App', 'GET_SETTINGS: ' + err.message, 'error');\r\n\t\t\t\tthis.setState({\r\n\t\t\t\t\terror: true,\r\n\t\t\t\t\terrorMessage: typeof err === 'string' ? i18n.t(err) : i18n.t(err.message)\r\n\t\t\t\t});\r\n\t\t\t});\r\n\t\t\r\n\t\t// retrieve ioBroker config\r\n\t\tthis.settings.iobroker = {};\r\n\t\tthis.socket.getObject('system.config', (err, data) => {\r\n\t\t\tif (data && data.common) {\r\n\t\t\t\tthis.settings.iobroker = data.common;\r\n\t\t\t\tSettings.setSettings({ iobroker: this.settings.iobroker });\r\n\t\t\t}\r\n\t\t});\r\n\t\t\r\n\t\t// retrieve devices\r\n\t\tthis.devices = {};\r\n\t\tthis.groups = {};\r\n\t\t\r\n\t\tthis.socket.getState(NODES.DEVICES)\r\n\t\t\t.then(state => {\r\n\t\t\t\t\r\n\t\t\t\ttry {\r\n\t\t\t\t\tthis.devices = JSON.parse(state.val);\r\n\t\t\t\t\tthis.processDevices(this.devices).then(groups => {\r\n\t\t\t\t\t\tthis.groups = groups;\r\n\t\t\t\t\t\tthis.setState({ loaded: [ ...this.state.loaded, 'groups' ] });\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t\tcatch(err) {\r\n\t\t\t\t\tLog._('App', 'GET_DEVICES: ' + err.message, 'error');\r\n\t\t\t\t\tthis.setState({\r\n\t\t\t\t\t\terror: true,\r\n\t\t\t\t\t\terrorMessage: i18n.t('Error parsing devices') + '!'\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t\t.catch(err => {\r\n\t\t\t\tLog._('App', 'GET_DEVICES: ' + err.message, 'error');\r\n\t\t\t\tthis.setState({\r\n\t\t\t\t\terror: true,\r\n\t\t\t\t\terrorMessage: i18n.t('Socket failed while getting devices') + '!'\r\n\t\t\t\t});\r\n\t\t\t});\r\n\t\t\r\n    }\r\n\t\r\n\t/**\r\n\t *\r\n\t *\r\n\t */\r\n\tgroupDevice(groups, device) {\r\n\t\t\r\n\t\t// add device to group(s)\r\n\t\tlet options = device.get('options');\r\n\t\toptions.groups.forEach(group => {\r\n\t\t\t\r\n\t\t\tlet groupId = group.toLowerCase().replace(/ /g, '');\r\n\t\t\tif (!groups[groupId]) {\r\n\t\t\t\tgroups[groupId] = { 'id': groupId, 'name': group, 'devices': [device] };\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tgroups[groupId].devices.push(device);\r\n\t\t\t}\r\n\t\t});\r\n\t\t\r\n\t\treturn groups;\r\n\t}\r\n\t\r\n\t/**\r\n\t *\r\n\t *\r\n\t */\r\n\tprocessDevice(deviceProperties) {\r\n\t\t\r\n\t\tlet promises = [];\r\n\t\tlet device = null;\r\n\t\ttry {\r\n\t\t\tdevice = new Device(deviceProperties, this.socket);\r\n\t\t\t\r\n\t\t\t// request primary state value\r\n\t\t\tpromises.push(device.requestDeviceState(null, true));\r\n\t\t\t\r\n\t\t\t// request secondary state value\r\n\t\t\tif (device.secondaryStateKey) {\r\n\t\t\t\tpromises.push(device.requestDeviceState(device.secondaryStateKey, true));\r\n\t\t\t}\r\n\t\t\t\r\n\t\t}\r\n\t\tcatch(err) {\r\n\t\t\tLog._('App', err.message, 'warn');\r\n\t\t}\r\n\t\t\r\n\t\treturn new Promise(resolve => {\r\n\t\t\tPromise.allSettled(promises).then(results => {\r\n\t\t\t\t\r\n\t\t\t\tresults.forEach(result => {\r\n\t\t\t\t\tif (result.status === 'rejected') {\r\n\t\t\t\t\t\tLog._('App', result, 'error');\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t\t\r\n\t\t\t\tresolve(device);\r\n\t\t\t});\r\n\t\t});\r\n\t}\r\n\t\r\n\t/**\r\n\t *\r\n\t *\r\n\t */\r\n\tprocessDevices(deviceList) {\r\n\t\t\r\n\t\t// loop through all devices of in the device list\r\n\t\tlet promises = [];\r\n\t\tlet groups = {};\r\n\t\t\r\n\t\tlet devices = 0, groupedDevices = 0;\r\n\t\tfor (let deviceId in deviceList) {\r\n\t\t\tdevices++;\r\n\t\t\t\r\n\t\t\tdeviceList[deviceId].options = deviceList[deviceId].jarvis;\r\n\t\t\tdelete deviceList[deviceId].jarvis;\r\n\t\t\t\r\n\t\t\tlet deviceProperties = { ...deviceList[deviceId], 'id': deviceId };\r\n\t\t\tpromises.push(new Promise((resolve, reject) => {\r\n\t\t\t\t\r\n\t\t\t\tthis.processDevice(deviceProperties).then(device => {\r\n\t\t\t\r\n\t\t\t\t\tif (device !== null) {\r\n\t\t\t\t\t\tgroupedDevices++;\r\n\t\t\t\t\t\tgroups = this.groupDevice(groups, device);\r\n\t\t\t\t\t\tresolve(deviceId);\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t\treject(deviceId);\r\n\t\t\t\t});\r\n\t\t\t}));\r\n\t\t\t\r\n\t\t\t// check states for own device settings\r\n\t\t\tfor (let stateKey in deviceProperties.states) {\r\n\t\t\t\t\r\n\t\t\t\tlet state = deviceProperties.states[stateKey];\r\n\t\t\t\tif (state && state.jarvis !== undefined) {\r\n\t\t\t\t\t\r\n\t\t\t\t\tpromises.push(new Promise((resolve, reject) => {\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tthis.processDevice({ ...deviceProperties, 'id': deviceId + '#' + stateKey, 'states': { [stateKey]: state }, 'options': state.jarvis }).then(device => {\r\n\t\t\t\t\t\r\n\t\t\t\t\t\t\tif (device !== null) {\r\n\t\t\t\t\t\t\t\tgroupedDevices++;\r\n\t\t\t\t\t\t\t\tgroups = this.groupDevice(groups, device);\r\n\t\t\t\t\t\t\t\tresolve(deviceId);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\treject(deviceId);\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}));\r\n\t\t\t\t\t\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\treturn new Promise(resolve => Promise.allSettled(promises).then(res => {\r\n\t\t\t\r\n\t\t\t// sort groups\r\n\t\t\tfor (let groupId in groups) {\r\n\t\t\t\tgroups[groupId].devices.sort((item1, item2) => {\r\n\t\t\t\t\tif (item1.options.sort > item2.options.sort) return 1;\r\n\t\t\t\t\telse if (item2.options.sort > item1.options.sort) return -1;\r\n\t\t\t\t\telse return 0;\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\r\n\t\t\t// return\r\n\t\t\tLog._('App', [ 'Processed ' + devices + ' devices. Added ' + groupedDevices + ' devices in ' + Object.keys(groups).length + ' groups.', res, groups ]);\r\n\t\t\tresolve(groups);\r\n\t\t}));\r\n\t}\r\n\t\r\n\trenderError(error) {\r\n\t\terror = error || this.state.errorMessage;\r\n\t\tLog._('App', error, 'error');\r\n\t\treturn (\r\n\r\n<StatusSnackbar\r\n\tkey={'StatusSnackbar'}\r\n\tvariant=\"error\"\r\n\tcloseButton={false}\r\n\tmessage={error.toString()}\r\n\t/>\r\n\r\n\t\t);\r\n\t}\r\n\t\r\n\trenderLoadingProgress() {\r\n\t\tconst { classes } = this.props;\r\n\t\treturn (\r\n\r\n<Grid\r\n\tkey=\"loadingProcess\"\r\n\tcontainer\r\n\tspacing={0}\r\n\tdirection=\"column\"\r\n\tjustify=\"center\"\r\n\talignItems=\"center\"\r\n\tstyle={{ minHeight: \"100vh\" }}\r\n\t>\r\n\r\n\t<CircularProgress />\r\n\t<Typography className={classes.loading}>{i18n.t('Retrieving settings')}...</Typography>\r\n\r\n</Grid>\r\n\r\n\t\t);\r\n\t}\r\n\t\r\n\trenderLoadingSkeleton(props) {\r\n\t\tconst { classes } = this.props;\r\n\t\tconst { topBar, tabBar, gridColumns } = props;\r\n\t\t\r\n\t\tconst SkeletonLoader = (props) => <Skeleton animation=\"wave\" variant=\"rect\" className={classes.gridItem} height={props.height} />;\r\n\t\t\r\n\t\tlet gridContents = {}\r\n\t\tfor (let column = 1; column <= gridColumns; column++) {\r\n\t\t\tgridContents[column] = gridContents[column] || [];\r\n\t\t\t\r\n\t\t\tlet loaders = Math.random() * (5 - 2) + 2;\r\n\t\t\tfor (let loader = 1; loader <= loaders; loader++) {\r\n\t\t\t\tgridContents[column].push(<SkeletonLoader key={column + '#' + loader} height={(Math.random() * (400 - 100) + 100)} />);\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\treturn (\r\n\r\n<React.Fragment>\r\n\t{topBar && <Skeleton animation=\"wave\" variant=\"rect\" height={64} />}\r\n\t{tabBar && <Skeleton animation=\"wave\" variant=\"rect\" height={48} />}\r\n\t<GridContainer key=\"loadingSkeleton\" contents={gridContents} />\r\n</React.Fragment>\r\n\r\n\t\t);\r\n\t}\r\n\t\r\n    render() {\r\n\t\t\r\n\t\t// error message\r\n\t\tconst error = this.state.error ? this.renderError() : null;\r\n\t\t\r\n\t\t// loading screens\r\n\t\tif (this.state.error && this.state.loaded.length < 2) {\r\n\t\t\treturn error;\r\n\t\t}\r\n\t\telse if (this.state.loaded.indexOf('settings') === -1) {\r\n\t\t\treturn this.renderLoadingProgress();\r\n\t\t}\r\n\t\telse if (this.state.loaded.indexOf('groups') === -1) {\r\n\t\t\tconst tab = Object.keys(this.settings.layout)[0];\r\n\t\t\treturn tab === undefined ? null : this.renderLoadingSkeleton({ topBar: true, tabBar: tab !== 1, gridColumns: (tab !== 1 ? Object.keys(this.settings.layout[tab]).length : tab.length) });\r\n\t\t}\r\n\t\t\r\n\t\t// App\r\n\t\tLog._('App', [ 'Connected:', this.state.connected ])\r\n\t\treturn (\r\n\r\n<ThemeProvider theme={this.state.theme}>\r\n\t{error}\r\n\t<Jarvis key=\"jarvis\" connectionStatus={this.state.connected} devices={this.devices} groups={this.groups} />\r\n</ThemeProvider>\r\n\r\n\t\t)\r\n\t}\r\n}\r\n\r\nexport default withStyles(styles)(App);\r\n","// This optional code is used to register a service worker.\r\n// register() is not called by default.\r\n\r\n// This lets the app load faster on subsequent visits in production, and gives\r\n// it offline capabilities. However, it also means that developers (and users)\r\n// will only see deployed updates on subsequent visits to a page, after all the\r\n// existing tabs open on the page have been closed, since previously cached\r\n// resources are updated in the background.\r\n\r\n// To learn more about the benefits of this model and instructions on how to\r\n// opt-in, read https://bit.ly/CRA-PWA\r\n\r\nconst isLocalhost = Boolean(\r\n  window.location.hostname === 'localhost' ||\r\n    // [::1] is the IPv6 localhost address.\r\n    window.location.hostname === '[::1]' ||\r\n    // 127.0.0.0/8 are considered localhost for IPv4.\r\n    window.location.hostname.match(\r\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\r\n    )\r\n);\r\n\r\nexport function register(config) {\r\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\r\n    // The URL constructor is available in all browsers that support SW.\r\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\r\n    if (publicUrl.origin !== window.location.origin) {\r\n      // Our service worker won't work if PUBLIC_URL is on a different origin\r\n      // from what our page is served on. This might happen if a CDN is used to\r\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\r\n      return;\r\n    }\r\n\r\n    window.addEventListener('load', () => {\r\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\r\n\r\n      if (isLocalhost) {\r\n        // This is running on localhost. Let's check if a service worker still exists or not.\r\n        checkValidServiceWorker(swUrl, config);\r\n\r\n        // Add some additional logging to localhost, pointing developers to the\r\n        // service worker/PWA documentation.\r\n        navigator.serviceWorker.ready.then(() => {\r\n          console.log(\r\n            'This web app is being served cache-first by a service ' +\r\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\r\n          );\r\n        });\r\n      } else {\r\n        // Is not localhost. Just register service worker\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\nfunction registerValidSW(swUrl, config) {\r\n  navigator.serviceWorker\r\n    .register(swUrl)\r\n    .then(registration => {\r\n      registration.onupdatefound = () => {\r\n        const installingWorker = registration.installing;\r\n        if (installingWorker == null) {\r\n          return;\r\n        }\r\n        installingWorker.onstatechange = () => {\r\n          if (installingWorker.state === 'installed') {\r\n            if (navigator.serviceWorker.controller) {\r\n              // At this point, the updated precached content has been fetched,\r\n              // but the previous service worker will still serve the older\r\n              // content until all client tabs are closed.\r\n              console.log(\r\n                'New content is available and will be used when all ' +\r\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\r\n              );\r\n\r\n              // Execute callback\r\n              if (config && config.onUpdate) {\r\n                config.onUpdate(registration);\r\n              }\r\n            } else {\r\n              // At this point, everything has been precached.\r\n              // It's the perfect time to display a\r\n              // \"Content is cached for offline use.\" message.\r\n              console.log('Content is cached for offline use.');\r\n\r\n              // Execute callback\r\n              if (config && config.onSuccess) {\r\n                config.onSuccess(registration);\r\n              }\r\n            }\r\n          }\r\n        };\r\n      };\r\n    })\r\n    .catch(error => {\r\n      console.error('Error during service worker registration:', error);\r\n    });\r\n}\r\n\r\nfunction checkValidServiceWorker(swUrl, config) {\r\n  // Check if the service worker can be found. If it can't reload the page.\r\n  fetch(swUrl, {\r\n    headers: { 'Service-Worker': 'script' }\r\n  })\r\n    .then(response => {\r\n      // Ensure service worker exists, and that we really are getting a JS file.\r\n      const contentType = response.headers.get('content-type');\r\n      if (\r\n        response.status === 404 ||\r\n        (contentType != null && contentType.indexOf('javascript') === -1)\r\n      ) {\r\n        // No service worker found. Probably a different app. Reload the page.\r\n        navigator.serviceWorker.ready.then(registration => {\r\n          registration.unregister().then(() => {\r\n            window.location.reload();\r\n          });\r\n        });\r\n      } else {\r\n        // Service worker found. Proceed as normal.\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    })\r\n    .catch(() => {\r\n      console.log(\r\n        'No internet connection found. App is running in offline mode.'\r\n      );\r\n    });\r\n}\r\n\r\nexport function unregister() {\r\n  if ('serviceWorker' in navigator) {\r\n    navigator.serviceWorker.ready.then(registration => {\r\n      registration.unregister();\r\n    });\r\n  }\r\n}\r\n","import React from 'react'\r\nimport ReactDOM from 'react-dom'\r\n\r\nimport './index.css'\r\nimport App from './App'\r\nimport * as serviceWorker from './serviceWorker'\r\n\r\nReactDOM.render(<App />, document.getElementById('root'));\r\n\r\n// If you want your app to work offline and load faster, you can change\r\n// unregister() to register() below. Note this comes with some pitfalls.\r\n// Learn more about service workers: https://bit.ly/CRA-PWA\r\nserviceWorker.unregister();\r\n","import i18n from '../i18n'\r\n\r\nexport const NODES = {\r\n\t'SETTINGS': 'jarvis.0.settings',\r\n\t'DEVICES': 'jarvis.0.devices'\r\n}\r\n\r\nexport default {\r\n\tpageSettings: {\r\n\t\tlabel: 'Page Settings',\r\n\t\tsettings: {\r\n\t\t\tlanguage: {\r\n\t\t\t\tlabel: 'Spracheinstellung von jarvis',\r\n\t\t\t\ttype: 'select',\r\n\t\t\t\toptions: {\r\n\t\t\t\t\tde: 'Deutsch',\r\n\t\t\t\t\ten: 'English'\r\n\t\t\t\t},\r\n\t\t\t\tdefault: i18n.getLanguage()\r\n\t\t\t},\r\n\t\t\tpageFavicon: {\r\n\t\t\t\tlabel: 'Favicon im Browser',\r\n\t\t\t\tinfo: 'base64 Wert der Grafik',\r\n\t\t\t\ttype: 'text'\r\n\t\t\t},\r\n\t\t\tpageTitle: {\r\n\t\t\t\tlabel: 'Titel im Browser',\r\n\t\t\t\ttype: 'text',\r\n\t\t\t\tdefault: 'jarvis - just another remarkable vis'\r\n\t\t\t},\r\n\t\t}\r\n\t},\r\n\ttabSettings: {\r\n\t\tlabel: 'Tab Settings',\r\n\t\tsettings: {\r\n\t\t\ttabsHideLabels: {\r\n\t\t\t\tlabel: 'Tab Bar Labels nicht anzeigen',\r\n\t\t\t\tinfo: 'Zeigt nur die Icons im Tab und nicht die Labels',\r\n\t\t\t\ttype: 'switch',\r\n\t\t\t\tdefault: false\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\tthemeSettings: {\r\n\t\tlabel: 'Theme Settings',\r\n\t\tsettings: {\r\n\t\t\tthemeColorPrimary: {\r\n\t\t\t\tlabel: 'Primäre Farbe des Themes',\r\n\t\t\t\ttype: 'text',\r\n\t\t\t\tdefault: 'blue|700'\r\n\t\t\t},\r\n\t\t\tthemeColorSecondary: {\r\n\t\t\t\tlabel: 'Sekundäre Farbe des Themes',\r\n\t\t\t\ttype: 'text',\r\n\t\t\t\tdefault: 'pink'\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n}"],"sourceRoot":""}