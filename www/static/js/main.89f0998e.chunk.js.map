{"version":3,"sources":["components/Dialog.js","components/inputs/Field.js","components/inputs/Text.js","modules/StateListItem.js","modules/StateList.js","helpers/timeConverter.js","Log.js","components/EnhancedTableToolbar.js","components/EnhancedTableHead.js","components/EnhancedTableBody.js","components/EnhancedTable.js","modules/AdapterStatus.js","modules/Chart.js","modules/DateTime.js","modules/Map.js","modules/StateListHorizontal.js","modules/Weather.js","functions/door/door.js","functions/heating/heating.js","functions/location/location.js","functions/user/user.js","functions/window/window.js","components/inputs/Chips.js","components/inputs/Fieldset.js","helpers/colorConverter.js","functions/light/light.js","functions/blind/blind.js","functions/blind/blind-manufacturers.js","modules/MultimediaItem.js","modules/Multimedia.js","Settings.js","i18n.js","functions/blind/index.js","config/config.js","functions/blind/blind.de.js","functions/blind/blind.en.js","functions/door/door.de.js","functions/door/door.en.js","functions/heating/heating.de.js","functions/heating/heating.en.js","functions/light/light.de.js","functions/light/light.en.js","functions/location/location.de.js","functions/location/location.en.js","functions/user/user.de.js","functions/user/user.en.js","functions/window/window.de.js","functions/window/window.en.js","components/inputs/Switch.js","i18n sync /^/.*/.js$","i18n/de.js","i18n/en.js","functions/defaults.js","functions/blind sync /^/blind/..*$","functions/door/index.js","functions/door sync /^/door/..*$","functions/heating/index.js","functions/heating sync /^/heating/..*$","functions/light/index.js","Devices.js","functions/light sync /^/light/..*$","functions/location/index.js","functions/location sync /^/location/..*$","functions/user/index.js","functions/user sync /^/user/..*$","functions/window/index.js","functions/window sync /^/window/..*$","components/inputs/Button.js","components/inputs/Number.js","components/inputs/Select.js","pages/LogsPage.js","config/config.dev.js","Function.js","config/adapters.js","Device.js","pages/index.js","components/TopBar.js","helpers/useWindowDimensions.js","components/TabBar.js","components/Notifications.js","components/GridContainer.js","components/Popup.js","components/Widget.js","Jarvis.js","components/StatusSnackbar.js","App.js","serviceWorker.js","index.js","components/Inputs.js","pages/DevicesPage.js","helpers/utils.js","pages/DevicesListPage.js","pages/LayoutsPage.js","pages/SettingsPage.js","pages/ConfigurationPage.js","Socket.js","Connection.js","modules/index.js","functions/index.js"],"names":["useStyles","makeStyles","theme","closeButton","position","right","spacing","top","color","palette","grey","Dialog","DialogDense","padding","CustomDialog","DialogTitle","CustomDialogTitle","DialogTitleTypography","DialogContent","backgroundColor","CustomDialogContent","DialogActions","margin","CustomDialogActions","props","header","onClose","children","actions","dense","disableBackdropClick","disableEscapeKeyDown","classes","paper","clsx","fullWidth","maxWidth","open","root","disableTypography","className","variant","aria-label","onClick","id","dividers","Field","display","marginLeft","marginRight","CustomField","info","link","width","tooltip","target","rel","href","key","style","container","item","title","i18n","t","Text","options","TextAutoComplete","TextInput","onChange","required","label","type","select","shrink","disabled","size","placeholder","errorMessage","autoFocus","multiline","val","onEnter","disableUnderline","icon","InputProps","otherProps","useState","value","setValue","error","setError","useEffect","inputId","toLowerCase","replace","TextField","rows","onKeyPress","e","preventDefault","helperText","Array","isArray","map","lbl","join","startAdornment","InputLabelProps","showMaxResults","filterOptions","createFilterOptions","limit","undefined","objectify","Input","option","AutoCompleteOption","popupIcon","name","getOptionSelected","renderInput","params","styles","defaultListDivider","defaultListIcon","components","horizontalListItem","textAlign","paddingRight","marginTop","horizontalListItemIcon","minWidth","horizontalListItemAction","transform","verticalListItemAction","ListItemIconElement","withStyles","customClassNames","classNames","StateListItem","stateChange","stateKey","state","device","primaryStateKey","secondaryStateKey","setState","ListItemTextWidth","getDeviceState","ListItemText","React","createRef","ListItemSecondaryAction","this","Math","floor","current","offsetWidth","resizeComponent","listen","unlisten","ListItemSecondaryActionWidth","openDialog","horizontal","component","action","get","getIcon","primaryComponent","getComponent","primaryAction","getAction","secondaryAction","Fragment","divider","ListItem","finger","button","bind","ListItemIcon","getStyle","ref","primary","getOption","secondary","subtitle","timeChanged","flex","Component","defaultListSectionDivider","defaultListSectionDividerItem","defaultListSectionText","breakpoints","down","horizontalList","flexDirection","flexWrap","ListDivider","getDevicesBySubgroup","subgroup","subgroupActions","handleChange","targetStatus","forEach","status","setDeviceState","ButtonGroup","Button","StateList","devices","push","settings","List","i","listSection","listItem","ModuleDescription","ModuleScreenshots","ModuleConfig","timeToSeconds","time","toString","indexOf","split","length","hours","minutes","seconds","parseInt","timeToHoursMinutesSeconds","withHours","Number","isNaN","substr","secondsToDateTime","dateTimeFormat","format","Date","locale","locales","getLanguage","Log","module","message","criticality","printToConsole","stack","entry","log","console","useToolbarStyles","paddingLeft","highlight","main","lighten","light","text","dark","EnhancedTableToolbar","rowCount","numSelected","rightActionButton","Toolbar","Typography","Tooltip","IconButton","EnhancedTableHead","headCells","onSelectAllClick","selectable","sortable","order","orderBy","onRequestSort","TableHead","TableRow","TableCell","Checkbox","indeterminate","checked","inputProps","headCell","align","disablePadding","sortDirection","TableSortLabel","active","direction","property","event","noWrap","whiteSpace","nestedObjects","seen","EnhancedTable","columns","sortedRows","emptyRows","rowStyles","selected","row","index","isItemSelected","labelId","columnId","rowStyle","Object","keys","hover","role","aria-checked","tabIndex","column","scope","content","JSON","stringify","showTableContent","height","colSpan","table","descendingComparator","a","b","orderByCase","orderA","orderB","tmpA","tmpB","err","getComparator","stableSort","array","comparator","stabilizedThis","el","sort","CustomTableBody","toolbar","pagination","defaultOrder","defaultOrderBy","defaultSelected","defaultPage","defaultRowsPerPage","toolbarRightActionButton","setOrder","setOrderBy","setSelected","page","setPage","rowsPerPage","setRowsPerPage","TableBody","EnhancedTableBody","TableContainer","Table","aria-labelledby","stickyHeader","newSelecteds","n","slice","min","selectedIndex","newSelected","concat","TablePagination","rowsPerPageOptions","count","onChangePage","newPage","onChangeRowsPerPage","AdapterStatus","adapterInformation","adapterAliveStatus","newUpdates","updatesJson","lastUpdateCheck","socket","Connection","getConnection","list","blacklist","updateStates","adapterStates","updates","getStates","states","subscribeStates","update","lastIndexOf","getAdapterInstances","instances","adapters","instance","common","item1","item2","aliveStatus","prevState","unsubscribeStates","updateList","parse","adapterList","loading","adapter","enabled","alive","connected","connection","alt","src","extIcon","small","version","availableVersion","UpdateAvailable","runAsCompactMode","compactGroup","StatusIndicator","notAlive","noUpdates","UpdatesListItem","UpdatesIndicator","fontStyle","borderRadius","fontSize","ModuleSettings","noDevicesAllowed","Chart","historyChange","history","addChartGraph","axis","getAxis","start","end","updateChartGraph","chartFilter","chartConfig","yAxes","unshift","ticks","callback","yLeftAxisUnitBefore","parseFloat","toFixed","yLeftAxisUnitAfter","errors","datePicker","selectedTimeRangeValue","selectedTimeRangeUnit","selectedDateTime","dateNow","chartLabels","chartData","labels","datasets","chartPan","chartZoom","timer","timeRangeRef","chartRef","chartUpdates","chartOptions","maintainAspectRatio","spanGaps","legend","legendClickHandler","tooltips","callbacks","data","datasetIndex","unit","scales","plugins","colorschemes","scheme","zoom","pan","mode","getTimeRange","requestDeviceStateHistory","step","catch","_","liveUpdates","prevProps","clearTimeout","setTimeout","getTime","timeRange","axisTimeFormat","helpers","prevMarker","markers","marker","ts","reduce","chartIndex","findIndex","groupChartData","chartInstance","values","prevStates","dataSet","fill","graphConfig","legendItem","ci","meta","getDatasetMeta","hidden","resetZoom","inputRef","input","displayEmpty","utils","DateFnsUtils","onOpen","ampm","iconButton","dividerVertical","orientation","placement","buttonDisabled","severity","createElement","toolbarButtons","disableElevation","chartHeight","alignItems","justifyContent","marginBottom","DateTime","refTimer","useRef","setDateTime","city","setCity","sunrise","setSunrise","sunset","setSunset","refresh","Settings","getSetting","latitude","longitude","getSunrise","getSunset","sun","mapOverview","left","bottom","zIndex","cursor","mapIconContainer","mapIconParent","boxShadow","mapIcon","mapTooltip","Map","defaultZoom","defaultPosition","setMarkers","memoizedMapInitialised","useCallback","memoizedHandleClick","flyTo","prevMarkers","requestDeviceState","mapMarkers","Marker","attributes","avatar","arrow","useFlyTo","center","whenReady","attribution","url","markerIcon","offset","function","L","divIcon","html","iconSize","memoizedHandleMouseEvent","closeTooltip","openTooltip","riseOnHover","onMouseOver","tooltipDirection","permanent","tooltipPermanent","StateListHorizontal","StateListConfig","Weather","setData","getRemoteResource","then","response","statusCode","body","weatherForecast","day","forecast","dailyForecast","date","justify","translations","require","default","setTranslation","description","configurations","true","false","lock","temperature","setTemperature","humidity","boost","Level","defaults","LevelComponent","max","PowerAction","presence","users","location","battery","chip","InputChip","onDelete","deleteIcon","InputChips","InputChipsField","optionKey","multiple","freeSolo","getOptionLabel","noPadding","Fieldset","FieldsetItem","Legend","FieldsetLegend","xs","Form","getLocaleDateAdapter","getLocale","HsvToRgb","h","r","g","f","p","q","s","v","round","RgbToHex","LightColorAction","stateVal","colorSpace","setColorSpace","colors","Red","Green","Blue","Hue","Saturation","Brightness","Label","br","LightColorComponent","initialColor","onChangeComplete","power","level","stateStyle","colorTemperature","hue","rgb","hsv","hex","setHue","hsl","setChecked","parent","Action","float","lineHeight","borderLeftTransparent","borderLeftColor","alpha","borderRightTransparent","borderRightColor","borderRightColorSecondary","level2","activity","manufacturer","getActivityType","setLevel","sKey","d","setActivity","Multimedia","progress","progressTimeout","isRunning","duration","noHeader","styleImage","styleLengthBar","background","backgroundImage","backgroundUrlPrepend","playIconElements","Divider","image","noImage","information","informationLeft","grandParent","informationRight","lengthBar","controls","controlsBox","controlsBoxLeft","controlsBoxCenter","Fab","controlButton","controlsBoxRight","backgroundPosition","minHeight","paddingTop","controlButtonSmall","MultimediaItem","language","setLanguage","loadTranslation","pageTitle","document","pageFavicon","getElementById","setting","de","languages","translation","isoLong","word","placeholders","parts","shift","RegExp","ucFirst","charAt","toUpperCase","navigator","userLanguage","DEFAULTS","DEVICES_STATES","DEVICES_CONFIG","LAYOUT_CONFIG","tabsHideLabels","tabIcon","tabLabel","tabFullscreen","deviceKey","groupName","groupModule","ModuleList","groupTitle","groupIcon","groupIconStyle","FormControl","InputLabel","Switch","SwitchSmall","SwitchInline","InputSwitch","userInput","InputSwitchInline","control","webpackContext","req","webpackContextResolve","__webpack_require__","o","Error","code","resolve","exports","sliderMarkLabel","parentOnChange","TriggerAction","startIcon","linebreak","markSteps","markStep","markLabel","onChangeCommitted","valueLabelDisplay","marks","number","_any","door","trigger","wind","_copy","Devices","rawDevices","deviceId","groups","groupId","Groups","addGroupId","GroupIds","GroupList","raw","copy","InputButton","NumberInput","InputSelect","selection","menuOptions","LogsPage","logs","getLog","pinToTop","navigate","Function","functionType","functionId","functions","_isFunction","obj","defaultValue","EventEmitter","Device","deviceProperties","room","group","_setProperties","stateSubscriptions","on","stateType","node","config","attribute","stateValKeys","stateValKey","stateValValue","ignoredStates","ignoredState","hiddenStates","_getStateFromKey","Adapters","formatDistanceToNow","lc","includeSeconds","addSuffix","_getConfigurationSetting","pair","_getUserSetting","forceDefault","stateProperty","deviceState","defaultIcon","eventName","listeners","listener","subscribe","responses","Promise","reject","emit","getState","_updateDeviceState","subscribeDeviceState","historyCache","getStateHistory","res","subscribeState","child","off","configuration","appBar","flexGrow","menuButton","transition","flexShrink","userSelect","notConnected","TopBar","connectionStatus","toggleDrawer","notifications","connectionStatusIcon","connectionStatusTooltip","AppBar","Hidden","smDown","getWindowDimensions","window","innerWidth","innerHeight","paddingBottom","tabs","borderBottom","fixed","indicator","fullscreen","grid","TabBar","selectedTab","onSelectTab","tabBarProps","tab","setTab","setFixed","handleScroll","threshold","scrollY","prevFixed","offsetTop","offsetHeight","addEventListener","removeEventListener","renderedTabs","Tab","Tabs","TabPanel","renderedTab","windowDimensions","setWindowDimensions","handleResize","useWindowDimensions","mapHeight","setMapHeight","topBarHeight","setHidden","Box","Notifications","Drawer","anchor","drawer","gridContainer","GridContainer","contents","Grid","sm","md","lg","xl","other","MuiDialogContent","MuiDialogActions","Popup","forceUpdate","allSettled","nextProps","nextState","closeDialog","card","cardHeaderNoContents","cardAvatar","cardContent","Widget","iconStyle","Card","CardHeader","Avatar","CardContent","getGroup","Tag","Modules","getGridContents","gridContents","columnContents","moduleSettings","Jarvis","tabTitle","notificationDrawer","notificationsUnread","dialog","dialogContents","getDevices","layout","tabsEnabled","widgetProps","filter","notification","unread","NODE_NOTIFICATIONS","getGroups","tabPanels","tabPanel","now","Page","Pages","getTabPanels","topBarTitle","success","green","warning","amber","iconVariant","opacity","variantIcon","CheckCircleIcon","WarningIcon","ErrorIcon","InfoIcon","StatusSnackbar","autoHideDuration","Icon","Snackbar","anchorOrigin","vertical","SnackbarContent","App","loaded","errorHandler","port","protocol","hostname","connect","NODE_SETTINGS","setSettings","applySettings","iobroker","getObject","NODE_DEVICES","processDevices","set","setDevices","setGroups","promises","results","result","deviceList","processedDevices","groupedDevices","jarvis","processDevice","groupDevice","CircularProgress","topBar","tabBar","gridColumns","SkeletonLoader","Skeleton","animation","gridItem","loaders","random","loader","renderError","ThemeProvider","renderLoadingSkeleton","renderLoadingProgress","Boolean","match","ReactDOM","render","serviceWorker","ready","registration","unregister","Chip","Chips","ChipsField","Select","SettingsPage","_save","savedDevice","groupEditor","base","characteristic","_created","onSave","_deleteDevice","_onChange","nextErrors","_addState","newStateKey","_deleteState","nextDevice","str","Inputs","renderedStates","renderDeviceState","parameter","renderedOptions","renderDeviceOption","renderDeviceStates","renderDeviceOptions","alignRight","FUNCTIONS","func","getGroupList","_saveDevices","_saveDevice","selectedDevice","scrollTop","nextDevices","renderDevices","DevicesPage","uuid","deleteButton","hr","CustomTextInput","verticalAlign","LayoutsPage","_addColumn","tabKey","newColumn","_addTab","newTabIndex","1","_changeTab","tKey","prevTab","_closePopup","popup","columnKey","selectedColumn","groupKey","selectedGroup","ModuleConfigurations","field","tabLayout","col","tabColumnGroups","componentKey","_deleteColumn","_deleteGroup","_deleteTab","_moveGroup","stopPropagation","sorted","sortedArray","sortedObject","_moveTab","_openPopup","groupIds","iconContainer","tabColumnComponentsNodes","entries","MODULE","renderTabColumnGroup","groupsInFirstColumn","tabColumnsNodes","renderTabColumns","lastTab","columnContainer","tabsNodes","tabsTotal","renderTab","renderTabs","filtered","Paper","autoComplete","autoHighlight","borderRight","borderLeft","_handleSettingsChange","setSetting","getSettings","_handlePanelChange","panel","isExpanded","inputKey","inputSettings","Accordion","expanded","AccordionSummary","expandIcon","heading","secondaryHeading","AccordionDetails","renderPanel","typography","pxToRem","flexBasis","ConfigurationPage","_onDevicesChange","_onSettingsChange","_onLayoutsChange","onRawChange","_handleTabChange","_cancel","all","reload","expertMode","rawEditor","scrollHeight","rawEditorHeight","indicatorColor","textColor","DevicesListPage","fontFamily","Socket","io","timeout","query","statesSubscribes","attempts","reason","pattern","ids","cb","cbs","reg","_getPatternFromId","task","hasOwnProperty","test","getObjectView","design","search","unsubscribeState","setUrl","setListeners","setListener","blind","heating","jalousie","user"],"mappings":"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","file":"static/js/main.89f0998e.chunk.js","sourcesContent":["import React from 'react'\r\nimport clsx from 'clsx'\r\n\r\nimport Dialog from '@material-ui/core/Dialog'\r\nimport DialogTitle from '@material-ui/core/DialogTitle'\r\nimport DialogContent from '@material-ui/core/DialogContent'\r\nimport DialogActions from '@material-ui/core/DialogActions'\r\n\r\nimport IconButton from '@material-ui/core/IconButton'\r\nimport CloseIcon from '@material-ui/icons/Close'\r\nimport Typography from '@material-ui/core/Typography'\r\n\r\n\r\n/*\r\n * STYLES\r\n */\r\nimport { makeStyles } from '@material-ui/core/styles'\r\nconst useStyles = makeStyles(theme => ({\r\n\tcloseButton: {\r\n\t\tposition: 'absolute',\r\n\t\tright: theme.spacing(1),\r\n\t\ttop: theme.spacing(1),\r\n\t\tcolor: theme.palette.grey[500],\r\n\t},\r\n\tDialog: {\r\n\t},\r\n\tDialogDense: {\r\n\t\tpadding: theme.spacing(2, 0)\r\n\t},\r\n\tCustomDialog: {\r\n\t},\r\n\tDialogTitle: {\r\n\t},\r\n\tCustomDialogTitle: {\r\n\t},\r\n\tDialogTitleTypography: {\r\n\t\t//padding: theme.spacing(2)\r\n\t},\r\n\tDialogContent: {\r\n\t\tbackgroundColor: '#fafafa'\r\n\t},\r\n\tCustomDialogContent: {\r\n\t},\r\n\tDialogActions: {\r\n\t\tmargin: 0,\r\n\t\tpadding: theme.spacing(1),\r\n\t},\r\n\tCustomDialogActions: {\r\n\t}\r\n}));\r\n\r\n\r\nexport default function CustomDialog(props) {\r\n\tconst { header, onClose, children, actions, dense, disableBackdropClick, disableEscapeKeyDown } = props;\r\n\tconst classes = useStyles(props);\r\n\t\r\n\treturn (\r\n\r\n<Dialog\r\n\tclasses={{ paper: clsx(classes.Dialog, classes.CustomDialog) }}\r\n\tfullWidth={props.fullWidth}\r\n\tmaxWidth={props.maxWidth}\r\n\t\r\n\tdisableBackdropClick={disableBackdropClick ? disableBackdropClick : true}\r\n\tdisableEscapeKeyDown={disableEscapeKeyDown ? disableEscapeKeyDown : true}\r\n\t\r\n\topen={props.open}\r\n\tonClose={props.onClose}\r\n\t>\r\n\t\r\n\t<DialogTitle\r\n\t\tclasses={{ root: clsx(classes.DialogTitle, classes.CustomDialogTitle) }}\r\n\t\tdisableTypography\r\n\t\t>\r\n\t\t\r\n\t\t{typeof header !== 'string' ? header : <Typography className={classes.DialogTitleTypography} variant=\"h6\">\r\n\t\t\t{header}\r\n\t\t</Typography>}\r\n\t\t<IconButton aria-label=\"close\" className={classes.closeButton} onClick={onClose}>\r\n\t\t\t<CloseIcon />\r\n\t\t</IconButton>\r\n\t</DialogTitle>\r\n\t\r\n\t<DialogContent id='DialogContent' className={clsx(classes.DialogContent, classes.CustomDialogContent, dense && classes.DialogDense)} dividers>\r\n\t\t{children}\r\n\t</DialogContent>\r\n\t\r\n\t<DialogActions classes={{ root: clsx(classes.DialogActions, classes.CustomDialogActions) }}>\r\n\t\t{actions}\r\n\t</DialogActions>\r\n</Dialog>\r\n\r\n\t);\r\n}\r\n","import React from 'react'\r\nimport clsx from 'clsx'\r\nimport i18n from '../../i18n'\r\n\r\nimport Grid from '@material-ui/core/Grid'\r\nimport Tooltip from '@material-ui/core/Tooltip'\r\nimport InfoIcon from '@material-ui/icons/Info'\r\n\r\n\r\n/*\r\n * STYLES\r\n */\r\nimport { makeStyles } from '@material-ui/core/styles'\r\nconst useStyles = makeStyles((theme) => ({\r\n\tField: {\r\n\t\tdisplay: 'inline-flex',\r\n\t\tmarginLeft: theme.spacing(1),\r\n\t\tmarginRight: theme.spacing(1),\r\n\t\tpadding: '0 !important',\r\n\t},\r\n\tCustomField: {\r\n\t},\r\n}));\r\n\r\n\r\n/*\r\n *\r\n */\r\nexport default function Field(props) {\r\n\tconst { children, id, info, link, width } = props;\r\n\tconst classes = useStyles(props);\r\n\t\r\n\tconst tooltip = link ? <><a target=\"_blank\" rel=\"noopener noreferrer\" href={link}><InfoIcon color=\"primary\" /></a></> : <InfoIcon color=\"primary\" />;\r\n\t\r\n\treturn (\r\n\t\t<Grid\r\n\t\t\tkey={'grid-' + id}\r\n\t\t\tclassName={clsx(classes.Field, classes.CustomField)}\r\n\t\t\tstyle={{ width: width || 250 }}\r\n\t\t\tcontainer\r\n\t\t\titem\r\n\t\t\t>\r\n\t\t\t\r\n\t\t\t{info && <Grid item style={{ width: 30 }}>\r\n\t\t\t\t<Tooltip title={i18n.t(info)}>\r\n\t\t\t\t\t{tooltip}\r\n\t\t\t\t</Tooltip>\r\n\t\t\t</Grid>}\r\n\t\t\t<Grid item style={{ width: info ? 250-30 : '100%' }}>\r\n\t\t\t\t{children}\r\n\t\t\t</Grid>\r\n\t\t</Grid>\r\n\r\n\t);\r\n}","import React, { useState, useEffect } from 'react'\r\nimport i18n from '../../i18n'\r\n\r\nimport Autocomplete, { createFilterOptions } from '@material-ui/lab/Autocomplete'\r\nimport InputAdornment from '@material-ui/core/InputAdornment'\r\nimport TextField from '@material-ui/core/TextField'\r\n\r\nimport Field from './Field'\r\n\r\n\r\n/*\r\n * STYLES\r\n */\r\nimport { makeStyles } from '@material-ui/core/styles'\r\nconst useStyles = makeStyles((theme) => ({\r\n}));\r\n\r\n\r\n/*\r\n *\r\n */\r\nexport default function Text(props) {\r\n\treturn props.options ? TextAutoComplete(props) : TextInput(props);\r\n}\r\n\r\n/*\r\n *\r\n */\r\nexport function TextInput(props) {\r\n\tconst { onChange, id, required, label, type, children, select, shrink, disabled, size, placeholder, errorMessage, autoFocus, multiline, val, onEnter, disableUnderline, icon, InputProps, ...otherProps } = props;\r\n\tconst classes = useStyles();\r\n\t\r\n\tconst [value,setValue] = useState(val || '');\r\n\tconst [error,setError] = useState(props.error ? props.error : (required && !val));\r\n\tuseEffect(() => setError(props.error), [props.error]);\r\n\t\r\n\tconst inputId = id || 'input-' + label.toLowerCase().replace(/ /g, '');\r\n\t\r\n\treturn (\r\n\t\t<Field {...props}>\r\n\t\t\t<TextField\r\n\t\t\t\tclasses={{ root: classes.TextField }}\r\n\t\t\t\t\r\n\t\t\t\tid={inputId}\r\n\t\t\t\ttype={type || 'text'}\r\n\t\t\t\trequired={required}\r\n\t\t\t\tselect={select}\r\n\t\t\t\t\r\n\t\t\t\tmultiline={multiline}\r\n\t\t\t\trows={4}\r\n\t\t\t\tsize={size}\r\n\t\t\t\tdisabled={disabled}\r\n\t\t\t\t\r\n\t\t\t\tfullWidth={true}\r\n\t\t\t\tplaceholder={placeholder || ''}\r\n\t\t\t\tautoFocus={autoFocus ? autoFocus : false}\r\n\t\t\t\t\r\n\t\t\t\tonKeyPress={e => {\r\n\t\t\t\t\tif (e.key === 'Enter' && !multiline) {\r\n\t\t\t\t\t\te.preventDefault();\r\n\t\t\t\t\t\tonEnter && onEnter();\r\n\t\t\t\t\t}\r\n\t\t\t\t}}\r\n\t\t\t\t\r\n\t\t\t\terror={error}\r\n\t\t\t\thelperText={errorMessage ? i18n.t(errorMessage) : (required && error && i18n.t('No input given'))}\r\n\t\t\t\t\r\n\t\t\t\tlabel={Array.isArray(label) ? label.map(lbl => i18n.t(lbl)).join('') : i18n.t(label)}\r\n\t\t\t\tvalue={value}\r\n\t\t\t\tonChange={e => {\r\n\t\t\t\t\tsetError(required && !e.target.value);\r\n\t\t\t\t\tsetValue(e.target.value);\r\n\t\t\t\t\tonChange && onChange(props, e.target.value);\r\n\t\t\t\t}}\r\n\t\t\t\t\r\n\t\t\t\tInputProps={{\r\n\t\t\t\t\tdisableUnderline: disableUnderline,\r\n\t\t\t\t\tstartAdornment: icon && (\r\n\t\t\t\t\t\t<InputAdornment position=\"start\">\r\n\t\t\t\t\t\t\t<span className={'mdi mdi-' + icon}></span>\r\n\t\t\t\t\t\t</InputAdornment>\r\n\t\t\t\t\t),\r\n\t\t\t\t\t...InputProps || {}\r\n\t\t\t\t}}\r\n\t\t\t\t\r\n\t\t\t\tInputLabelProps={{\r\n\t\t\t\t\tshrink: shrink ? shrink : true\r\n\t\t\t\t}}\r\n\t\t\t\t\r\n\t\t\t\t{...otherProps}\r\n\t\t\t\t>\r\n\t\t\t\t\r\n\t\t\t\t{children ? children : null}\r\n\t\t\t</TextField>\r\n\t\t</Field>\r\n\r\n\t)\r\n}\r\n\r\n\r\n/*\r\n *\r\n */\r\nexport function TextAutoComplete(props) {\r\n\tconst classes = useStyles();\r\n\tconst { error, required, autoFocus, placeholder, label,\r\n\t\t\t\tshowMaxResults, onChange, val, ...otherProps } = props;\r\n\t\r\n\tconst [value,setValue] = useState(val || []);\r\n\t//const [inputValue,setInputValue] = useState('');\r\n\tconst filterOptions = showMaxResults && showMaxResults > 0 ? createFilterOptions({ limit: showMaxResults }) : undefined;\r\n\tconst objectify = props.options && props.options[0] && props.options[0].id; // discover whether plain array of array of objects is used\r\n\t\r\n\treturn (\r\n\t\t<Field {...props}>\r\n\t\t\t<Autocomplete\r\n\t\t\t\tclasses={{ root: classes.Input, option: classes.AutoCompleteOption }}\r\n\t\t\t\tpopupIcon={null}\r\n\t\t\t\t\r\n\t\t\t\tvalue={value}\r\n\t\t\t\t//defaultValue={val}\r\n\t\t\t\t//inputValue={inputValue}\r\n\t\t\t\t//onInputChange={(e, text) => setInputValue(text)}\r\n\t\t\t\t\r\n\t\t\t\tonChange={(e, option) => {\r\n\t\t\t\t\toption = option.map(val => typeof val === 'string' && objectify ? { id: val.toLowerCase().replace(/ /g, ''), name: val } : val);\r\n\t\t\t\t\tsetValue(option);\r\n\t\t\t\t\tonChange && onChange(props, option);\r\n\t\t\t\t}}\r\n\t\t\t\t\r\n\t\t\t\tgetOptionSelected={(option, value) => option && value ? (objectify ? option.id === value.id : option === value) : false}\r\n\t\t\t\tfilterOptions={filterOptions}\r\n\t\t\t\t\r\n\t\t\t\trenderInput={params => <TextField\r\n\t\t\t\t\t\t\t\t\t\t{...params}\r\n\t\t\t\t\t\t\t\t\t\terror={error}\r\n\t\t\t\t\t\t\t\t\t\trequired={required}\r\n\t\t\t\t\t\t\t\t\t\tautoFocus={autoFocus ? autoFocus : false}\r\n\t\t\t\t\t\t\t\t\t\tlabel={i18n.t(label) || i18n.t(placeholder)}\r\n\t\t\t\t\t\t\t\t\t\t/>}\r\n\t\t\t\t\r\n\t\t\t\t{...otherProps}\r\n\t\t\t\t/>\r\n\t\t</Field>\r\n\t\r\n\t);\r\n}\r\n","import React from 'react'\r\nimport clsx from 'clsx'\r\n\r\nimport ListItem from '@material-ui/core/ListItem'\r\nimport ListItemIcon from '@material-ui/core/ListItemIcon'\r\nimport ListItemSecondaryAction from '@material-ui/core/ListItemSecondaryAction'\r\nimport ListItemText from '@material-ui/core/ListItemText'\r\n\r\n\r\n/*\r\n * STYLES\r\n */\r\nimport { withStyles } from '@material-ui/core/styles';\r\nconst styles = theme => ({\r\n\tdefaultListDivider: {\r\n\t\tmargin: '0 0 5px 0'\r\n\t},\r\n\tdefaultListIcon: props => ({\r\n\t\t...theme.components.icon,\r\n\t\t...props.styles\r\n\t}),\r\n\thorizontalListItem: {\r\n\t\tdisplay: 'inline-block',\r\n\t\ttextAlign: 'center',\r\n\t\tpaddingRight: '16px',\r\n\t\twidth: '140px',\r\n\t\tmarginTop: '10px'\r\n\t},\r\n\thorizontalListItemIcon: {\r\n\t\tminWidth: 'auto'\r\n\t},\r\n\thorizontalListItemAction: {\r\n\t\ttextAlign: 'center',\r\n\t\ttop: 0,\r\n\t\tright: 0,\r\n\t\tposition: 'static',\r\n\t\ttransform: 'none',\r\n\t},\r\n\tverticalListItemAction: {\r\n\t\ttextAlign: 'right'\r\n\t},\r\n});\r\n\r\n\r\nconst ListItemIconElement = withStyles(styles)(props => {\r\n\tconst { customClassNames, children, classes } = props;\r\n\t\r\n\tlet classNames = Array.isArray(customClassNames) ? customClassNames : [customClassNames];\r\n\tclassNames = classNames.map(className => (classes[className] ? classes[className] : className));\r\n\t\r\n\treturn <span className={clsx(classNames)}>{children}</span>\r\n});\r\n\r\n\r\nclass StateListItem extends React.Component {\r\n\t\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\t\r\n\t\tthis.state = {\r\n\t\t\tListItemTextWidth: '100%'\r\n\t\t}\r\n\t\t\r\n\t\tthis.state[this.props.device.primaryStateKey] = this.props.device.getDeviceState() || {}\r\n\t\t\r\n\t\tif (this.props.device.secondaryStateKey) {\r\n\t\t\tthis.state[this.props.device.secondaryStateKey] = this.props.device.getDeviceState(this.props.device.secondaryStateKey) || {}\r\n\t\t}\r\n\t\t\r\n\t\tthis.ListItemText = React.createRef();\r\n\t\tthis.ListItemSecondaryAction = React.createRef();\r\n\t}\r\n\t\r\n\tcomponentDidMount() {\r\n\t\tthis.ListItemTextWidth = Math.floor(this.ListItemText.current.offsetWidth);\r\n\t\tthis.resizeComponent();\r\n\t\t\r\n\t\t// get state changes\r\n\t\tthis.props.device.listen(this.stateChange);\r\n\t}\r\n\t\r\n\tcomponentWillUnmount() {\r\n\t\tthis.props.device.unlisten(this.stateChange);\r\n\t}\r\n\t\r\n\tcomponentDidUpdate() {\r\n\t\tthis.resizeComponent();\r\n\t}\r\n\t\r\n\tstateChange = (stateKey, state) => {\r\n\t\tif (stateKey === this.props.device.primaryStateKey || stateKey === this.props.device.secondaryStateKey) {\r\n\t\t\tthis.setState({ [stateKey]: state });\r\n\t\t}\r\n\t}\r\n\t\r\n\tresizeComponent() {\r\n\t\tconst ListItemSecondaryActionWidth = Math.floor(this.ListItemSecondaryAction.current.offsetWidth*1.08);\r\n\t\t\r\n\t\tif (this.state.ListItemSecondaryActionWidth !== ListItemSecondaryActionWidth) {\r\n\t\t\tthis.setState({\r\n\t\t\t\tListItemSecondaryActionWidth: ListItemSecondaryActionWidth,\r\n\t\t\t\tListItemTextWidth: this.ListItemTextWidth-ListItemSecondaryActionWidth + 'px'\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\t\r\n\topenDialog() {\r\n\t\tthis.props.openDialog(this.props.device);\r\n\t}\r\n\t\r\n\trender() {\r\n\t\tconst { classes, horizontal, device, component, action } = this.props;\r\n\t\t\r\n\t\tconst state = this.state[device.primaryStateKey];\r\n\t\tconst options = device.get('options');\r\n\t\t\r\n\t\tconst icon = device.getIcon(device.primaryStateKey, state.val) || device.getIcon(device.primaryStateKey, state.value);\r\n\t\tconst primaryComponent = component && device.getComponent();\r\n\t\tconst primaryAction = device.getAction(device.primaryStateKey, device.options.primaryAction === false);\r\n\t\tconst secondaryAction = action && this.state[device.secondaryStateKey] ? device.getAction(device.secondaryStateKey) : null;\r\n\t\t\r\n\t\treturn (\r\n\r\n<React.Fragment>\r\n\t\r\n\t{options.divider && options.divider !== 'after' && <ListItem divider className={classes.defaultListDivider} />}\r\n\t\r\n\t<ListItem\r\n\t\tclassName={clsx(this.props.openDialog && classes.finger, horizontal && classes.horizontalListItem)}\r\n\t\tbutton={this.props.openDialog !== null}\r\n\t\tonClick={this.props.openDialog && this.openDialog.bind(this)}\r\n\t\t>\r\n\t\t\r\n\t\t<ListItemIcon className={clsx(horizontal && classes.horizontalListItemIcon)}>\r\n\t\t{icon === null ? <React.Fragment /> :\r\n\t\t\t<ListItemIconElement customClassNames={['defaultListIcon','mdi mdi-' + icon]} styles={device.getStyle('icon', device.primaryStateKey, state.val)} />\r\n\t\t}\r\n\t\t</ListItemIcon>\r\n\t\t\r\n\t\t<ListItemText\r\n\t\t\tref={this.ListItemText}\r\n\t\t\tdisableTypography={primaryComponent !== false}\r\n\t\t\tprimary={primaryComponent || device.getOption('label')}\r\n\t\t\tsecondary={(options.subtitle !== null ? (options.subtitle || (state && state.timeChanged) || null) : null)}\r\n\t\t\tstyle={{ flex: 'initial', width: this.state.ListItemTextWidth }}\r\n\t\t\t/>\r\n\t\t\r\n\t\t<ListItemSecondaryAction\r\n\t\t\tref={this.ListItemSecondaryAction}\r\n\t\t\tclassName={ horizontal ? classes.horizontalListItemAction : classes.verticalListItemAction }\r\n\t\t\t>\r\n\t\t\t\r\n\t\t\t{!secondaryAction ? primaryAction : [ primaryAction, <br key={'br_' + device.id} />, secondaryAction ]}\r\n\t\t</ListItemSecondaryAction>\r\n\t</ListItem>\r\n\t\r\n\t{options.divider && options.divider === 'after' && <ListItem divider style={{margin: '5px 0'}} />}\r\n\t\r\n</React.Fragment>\r\n\r\n\t\t);\r\n\t}\r\n}\r\n\r\nexport default withStyles(styles)(StateListItem);\r\n","import React from 'react'\r\nimport i18n from '../i18n'\r\n\r\nimport List from '@material-ui/core/List'\r\nimport ListItem from '@material-ui/core/ListItem'\r\nimport ListItemSecondaryAction from '@material-ui/core/ListItemSecondaryAction'\r\nimport ListItemText from '@material-ui/core/ListItemText'\r\nimport StateListItem from './StateListItem'\r\nimport Button from '@material-ui/core/Button'\r\nimport ButtonGroup from '@material-ui/core/ButtonGroup'\r\n\r\n\r\n/*\r\n * STYLES\r\n */\r\nimport { withStyles } from '@material-ui/core/styles';\r\nconst styles = theme => ({\r\n\tdefaultListSectionDivider: {\r\n\t\tmargin: '5px 0 0 0'\r\n\t},\r\n\tdefaultListSectionDividerItem: {\r\n\t\tmargin: '6px 0 7px 0',\r\n\t\tpadding: '0 16px !important'\r\n\t},\r\n\tdefaultListSectionText: {\r\n\t\tmargin: 0,\r\n\t\t[theme.breakpoints.down('md')]: {\r\n\t\t\tmargin: '0 0 0 10px',\r\n\t\t}\r\n\t},\r\n\thorizontalList: {\r\n\t\tdisplay: 'flex',\r\n\t\tflexDirection: 'row',\r\n\t\tflexWrap: 'wrap'\r\n\t}\r\n});\r\n\r\n\r\nconst ListDivider = withStyles(styles)(props => {\r\n\tconst { classes, getDevicesBySubgroup, subgroup, title, subgroupActions } = props;\r\n\t\r\n\tconst handleChangeOn = () => handleChange(true);\r\n\tconst handleChangeOff = () => handleChange(false);\r\n\tconst handleChange = targetStatus => {\r\n\t\t\r\n\t\tconst devices = getDevicesBySubgroup(subgroup);\r\n\t\tdevices.forEach(device => {\r\n\t\t\t\r\n\t\t\tlet status = targetStatus;\r\n\t\t\tif (device.primaryStateKey === 'level') {\r\n\t\t\t\tstatus = status ? (device.getOption('defaultValue') || 100) : 0;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tdevice.setDeviceState(null, status);\r\n\t\t});\r\n\t}\r\n\t\r\n\treturn (\r\n\t\r\n<React.Fragment>\r\n\t<ListItem divider className={classes.defaultListSectionDivider} />\r\n\t<ListItem className={classes.defaultListSectionDividerItem}>\r\n\t\t<ListItemText\r\n\t\t\tclassName={classes.defaultListSectionText}\r\n\t\t\tprimary={title}\r\n\t\t\t/>\r\n\t\t\r\n\t\t<ListItemSecondaryAction>\r\n\t\t{subgroupActions === null || subgroupActions === false ? null :\r\n\t\t\t<ButtonGroup color=\"primary\" size=\"small\">\r\n\t\t\t\t<Button onClick={handleChangeOn}>{i18n.t('on')}</Button>\r\n\t\t\t\t<Button onClick={handleChangeOff}>{i18n.t('off')}</Button>\r\n\t\t\t</ButtonGroup>\r\n\t\t}\r\n\t\t\r\n\t\t</ListItemSecondaryAction>\r\n\t</ListItem>\r\n</React.Fragment>\r\n\t\r\n\t);\r\n});\r\n\r\nclass StateList extends React.Component {\r\n\t\r\n\tgetDevicesBySubgroup(subgroup) {\r\n\t\t\r\n\t\tlet devices = [];\r\n\t\tthis.props.devices.forEach(device => {\r\n\t\t\t\r\n\t\t\tif (subgroup === device.getOption('subgroup')) {\r\n\t\t\t\tdevices.push(device);\r\n\t\t\t}\r\n\t\t});\r\n\t\t\r\n\t\treturn devices;\r\n\t}\r\n\t\r\n\trender() {\r\n\t\tconst { classes, horizontal, devices, settings, component, action, ...props } = this.props;\r\n\t\tlet subgroup;\r\n\t\t\r\n\t\treturn (\r\n\r\n<List dense={true} className={horizontal && classes.horizontalList}>\r\n\t{devices.map((device, i) => {\r\n\t\t\r\n\t\tconst listSection = subgroup !== null && device.options.subgroup !== null && device.options.subgroup !== subgroup && <ListDivider\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tkey={'ListDivider-' + device.get('id')}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tgetDevicesBySubgroup={this.getDevicesBySubgroup.bind(this)}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tsubgroup={device.getOption('subgroup')}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\ttitle={device.options.subgroup}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\tsubgroupActions={settings.subgroupActions || device.options.subgroupActions}\r\n\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t\t/>\r\n\t\t\r\n\t\tconst listItem = <StateListItem\r\n\t\t\t\t\t\t\t{...props}\r\n\t\t\t\t\t\t\tkey={'StateListItem-' + device.get('id')}\r\n\t\t\t\t\t\t\thorizontal={horizontal}\r\n\t\t\t\t\t\t\tdevice={device}\r\n\t\t\t\t\t\t\tcomponent={component || false}\r\n\t\t\t\t\t\t\taction={action || true}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\r\n\t\tsubgroup = device.getOption('subgroup');\r\n\t\treturn [ listSection, listItem ];\r\n\t})}\r\n</List>\r\n\r\n\t\t);\r\n\t}\r\n}\r\n\r\nexport default withStyles(styles)(StateList);\r\n\r\n\r\nexport const ModuleDescription = \"Zeigt eine Liste von States an.\";\r\nexport const ModuleScreenshots = ['StateList1.png', 'StateList2.png', 'StateList3.png', 'StateList4.png'];\r\n\r\nexport const ModuleConfig = [\r\n\t{\r\n\t\t'parameter': 'subgroupActions',\r\n\t\t'label': {\r\n\t\t\t'en': 'Show on/off actions for sugroups',\r\n\t\t\t'de': 'Buttons an/aus für Untergruppen einblenden'\r\n\t\t},\r\n\t\t'type': 'Switch',\r\n\t\t'val': true\r\n\t}\r\n]\r\n","import { format } from 'date-fns'\r\nimport i18n, { locales } from '../i18n'\r\n\r\n/**\r\n *\r\n *\r\n */\r\nfunction timeToSeconds(time) {\r\n\t\r\n\tif (time.toString().indexOf(':') > -1) {\r\n\t\ttime = time.toString();\r\n\t\tlet format = time.split(':').length-1;\r\n\t\tlet [ hours, minutes, seconds ] = format > 1 ? time.split(':') : ('0:' + time).split(':');\r\n\t\ttime = parseInt(hours) * 3600 + parseInt(minutes) * 60 + parseInt(seconds);\r\n\t}\r\n\t\r\n\treturn parseInt(time);\r\n}\r\n\r\n/**\r\n *\r\n *\r\n */\r\nfunction timeToHoursMinutesSeconds(time, withHours = false) {\r\n\t\r\n\tif (time.toString().indexOf(':') > -1) {\r\n\t\treturn time;\r\n\t}\r\n\t\r\n\ttime = parseInt(time);\r\n\twithHours = withHours || (time > 3600);\r\n\t\r\n\tif (Number.isNaN(time)) {\r\n\t\treturn withHours ? '00:00:00' : '00:00';\r\n\t}\r\n\t\r\n\tlet hours = '0' + Math.floor(time/3600);\r\n\tlet minutes = '0' + Math.floor(time/60);\r\n\tlet seconds = '0' + (time % 60);\r\n\t\r\n\treturn withHours ? [ hours.substr(-2), minutes.substr(-2), seconds.substr(-2) ].join(':') : [ minutes.substr(-2), seconds.substr(-2) ].join(':');\r\n}\r\n\r\n/**\r\n *\r\n *\r\n */\r\nfunction secondsToDateTime(seconds, dateTimeFormat = 'dd. MMM yyyy, HH:mm') {\r\n\treturn format(new Date(seconds*1000), dateTimeFormat, { locale: locales[i18n.getLanguage()] });\r\n}\r\n\r\n\r\nexport default {\r\n\ttimeToSeconds,\r\n\ttimeToHoursMinutesSeconds,\r\n\tsecondsToDateTime\r\n}","/**\r\n * Settings\r\n *\r\n *\r\n */\r\nexport default class Log {\r\n\r\n\t/*\r\n\t * holds the log\r\n\t */\r\n\tstatic log = [];\r\n\r\n\t/**\r\n\t * Add a message to the log\r\n\t *\r\n\t * @param\t{String}\t\tmodule\t\t\t\t\t\tModule (origin) of log message\r\n\t * @param\t{String|Array}\tmessage\t\t\t\t\t\tLog message\r\n\t * @param\t{String}\t\t[criticality=info]\t\t\tCriticality, one of 'debug', 'info', 'warn' or 'error'\r\n\t * @param\t{Boolean}\t\t[printToConsole=false]\t\tPrint log message to console\r\n\t * @param\t{Object}\t\t[stack={}]\t\t\t\t\tStack trace of error message\r\n\t * @return\t{Log}\r\n\t */\r\n\tstatic _(module, message, criticality = 'info', printToConsole = true, stack = {}) {\r\n\t\tmessage = Array.isArray(message) ? message : [message];\r\n\t\tmessage.forEach(entry => {\r\n\t\t\tLog.log.push({\r\n\t\t\t\ttime: new Date(),\r\n\t\t\t\tmodule: module,\r\n\t\t\t\tcriticality: criticality,\r\n\t\t\t\tmessage: entry,\r\n\t\t\t\tstack: stack\r\n\t\t\t});\r\n\t\t});\r\n\t\t\r\n\t\tif (printToConsole) {\r\n\t\t\tmessage[0] = module + ' # ' + message[0];\r\n\t\t\tconsole[criticality](...message); // https://nodejs.org/docs/latest/api/console.html\r\n\t\t}\r\n\t}\r\n\r\n\t/**\r\n\t * Gets the log\r\n\t *\r\n\t * @param\tvoid\r\n\t * @return\t{Array}\r\n\t */\r\n\tstatic getLog() {\r\n\t\treturn Log.log;\r\n\t}\r\n}\r\n","/*\r\n * Code by MATERIAL-UI\r\n * @see https://material-ui.com/components/tables/#sorting-amp-selecting\r\n *\r\n */\r\nimport React from 'react'\r\nimport PropTypes from 'prop-types'\r\nimport clsx from 'clsx'\r\n\r\nimport { lighten, makeStyles } from '@material-ui/core/styles'\r\nimport Toolbar from '@material-ui/core/Toolbar'\r\nimport Typography from '@material-ui/core/Typography'\r\nimport IconButton from '@material-ui/core/IconButton'\r\nimport Tooltip from '@material-ui/core/Tooltip'\r\nimport DeleteIcon from '@material-ui/icons/Delete'\r\n\r\n\r\nconst useToolbarStyles = makeStyles(theme => ({\r\n  root: {\r\n    paddingLeft: theme.spacing(2),\r\n    paddingRight: theme.spacing(1),\r\n  },\r\n  highlight:\r\n    theme.palette.type === 'light'\r\n      ? {\r\n          color: theme.palette.secondary.main,\r\n          backgroundColor: lighten(theme.palette.secondary.light, 0.85),\r\n        }\r\n      : {\r\n          color: theme.palette.text.primary,\r\n          backgroundColor: theme.palette.secondary.dark,\r\n        },\r\n  title: {\r\n    flex: '1 1 100%',\r\n  },\r\n}));\r\n\r\nexport default function EnhancedTableToolbar(props) {\r\n  const classes = useToolbarStyles();\r\n  const { title, rowCount, numSelected, rightActionButton } = props;\r\n\r\n  return (\r\n    <Toolbar\r\n      className={clsx(classes.root, {\r\n        [classes.highlight]: numSelected > 0,\r\n      })}\r\n    >\r\n      {numSelected > 0 ? (\r\n        <Typography className={classes.title} color=\"inherit\" variant=\"subtitle1\">\r\n          {numSelected} selected\r\n        </Typography>\r\n      ) : (\r\n        <Typography className={classes.title} variant=\"h6\" id=\"tableTitle\">\r\n\t\t\t{title !== undefined && (title + ' (' + rowCount + ')')}\r\n        </Typography>\r\n      )}\r\n\r\n      {numSelected > 0 ? (\r\n        <Tooltip title=\"Delete\">\r\n          <IconButton aria-label=\"delete\">\r\n            <DeleteIcon />\r\n          </IconButton>\r\n        </Tooltip>\r\n      )\r\n\t  : rightActionButton}\r\n    </Toolbar>\r\n  );\r\n};\r\n\r\nEnhancedTableToolbar.propTypes = {\r\n  numSelected: PropTypes.number.isRequired,\r\n};","/*\r\n * Code by MATERIAL-UI\r\n * @see https://material-ui.com/components/tables/#sorting-amp-selecting\r\n *\r\n */\r\nimport React from 'react'\r\nimport PropTypes from 'prop-types'\r\n\r\nimport TableHead from '@material-ui/core/TableHead'\r\nimport TableRow from '@material-ui/core/TableRow'\r\nimport TableCell from '@material-ui/core/TableCell'\r\nimport TableSortLabel from '@material-ui/core/TableSortLabel'\r\nimport Checkbox from '@material-ui/core/Checkbox'\r\n\r\n\r\nexport default function EnhancedTableHead(props) {\r\n  const { headCells, onSelectAllClick, selectable, sortable, order, orderBy, numSelected, rowCount, onRequestSort } = props;\r\n  const createSortHandler = property => event => {\r\n    onRequestSort(event, property);\r\n  };\r\n\r\n  return (\r\n    <TableHead>\r\n      <TableRow>\r\n\t\t{selectable !== false &&\r\n\t\t\t<TableCell padding=\"checkbox\">\r\n\t\t\t  <Checkbox\r\n\t\t\t\tindeterminate={numSelected > 0 && numSelected < rowCount}\r\n\t\t\t\tchecked={rowCount > 0 && numSelected === rowCount}\r\n\t\t\t\tonChange={onSelectAllClick}\r\n\t\t\t\tinputProps={{ 'aria-label': 'select all' }}\r\n\t\t\t  />\r\n\t\t\t</TableCell>\r\n\t\t}\r\n\t\t\r\n        {headCells.map(headCell => (\r\n          <TableCell\r\n            key={headCell.id}\r\n            align={headCell.align || 'left'}\r\n            padding={headCell.disablePadding ? 'none' : 'default'}\r\n            sortDirection={sortable && (orderBy === headCell.id ? order : false)}\r\n\t\t\tstyle={{ width: headCell.width || 'auto' }}\r\n          >\r\n\t\t  {sortable ?\r\n            <TableSortLabel\r\n              active={orderBy === headCell.id}\r\n              direction={orderBy === headCell.id ? order : 'asc'}\r\n              onClick={createSortHandler(headCell.orderBy || headCell.id)}\r\n            >\r\n              <strong>{headCell.label}</strong>\r\n            </TableSortLabel>\r\n\t\t\t:\r\n\t\t\t <strong>{headCell.label}</strong>\r\n\t\t\t}\r\n          </TableCell>\r\n        ))}\r\n      </TableRow>\r\n    </TableHead>\r\n  );\r\n}\r\n\r\nEnhancedTableHead.propTypes = {\r\n  classes: PropTypes.object.isRequired,\r\n  numSelected: PropTypes.number.isRequired,\r\n  onRequestSort: PropTypes.func.isRequired,\r\n  onSelectAllClick: PropTypes.func.isRequired,\r\n  order: PropTypes.oneOf(['asc', 'desc']).isRequired,\r\n  orderBy: PropTypes.string.isRequired,\r\n  rowCount: PropTypes.number.isRequired,\r\n};","/*\r\n * Code by MATERIAL-UI\r\n * @see https://material-ui.com/components/tables/#sorting-amp-selecting\r\n *\r\n */\r\nimport React from 'react'\r\nimport clsx from 'clsx'\r\nimport { format } from 'date-fns'\r\n\r\nimport TableBody from '@material-ui/core/TableBody'\r\nimport TableCell from '@material-ui/core/TableCell'\r\nimport TableRow from '@material-ui/core/TableRow'\r\nimport Checkbox from '@material-ui/core/Checkbox'\r\n\r\n\r\n/*\r\n * STYLES\r\n */\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nconst useStyles = makeStyles(theme => ({\r\n\tnoWrap: {\r\n\t\twhiteSpace: 'nowrap'\r\n\t}\r\n}));\r\n\r\n\r\n// https://stackoverflow.com/questions/9382167/serializing-object-that-contains-cyclic-object-value\r\nfunction nestedObjects(key, val, seen) {\r\n\t\r\n\tif (val !== null && typeof val === 'object') {\r\n\t\tif (seen.indexOf(val) >= 0) {\r\n\t\t\treturn;\r\n\t\t}\r\n\t\t\r\n\t\tseen.push(val);\r\n\t}\r\n\t\r\n\treturn val;\r\n}\r\n\r\nfunction showTableContent(content, type = '') {\r\n\t\r\n\tif (content === undefined || content === null) {\r\n\t\treturn '';\r\n\t}\r\n\t\r\n\tlet seen = [];\r\n\tswitch(type.toLowerCase()) {\r\n\t\tcase 'date':\r\n\t\t\tcontent = format(content, 'yyyy-MM-dd HH:mm:ss');\r\n\t\t\tbreak;\r\n\t\t\r\n\t\tdefault:\r\n\t\t\tcontent = Array.isArray(content) || typeof content === 'object' ? JSON.stringify(content, (key, val) => nestedObjects(key, val, seen)) : content;\r\n\t\t\tcontent = typeof content === 'boolean' ? content.toString() : content;\r\n\t\t\tbreak;\r\n\t}\r\n\t\r\n\treturn content;\r\n}\r\n\r\nexport default function EnhancedTable(props) {\r\n\tconst { columns, sortedRows, emptyRows, rowStyles, selectable, selected, onClick } = props;\r\n\tconst classes = useStyles();\r\n\tconst isSelected = id => selected.indexOf(id) !== -1;\r\n\r\n\treturn (\r\n\r\n<TableBody>\r\n\t{sortedRows.map((row, index) => {\r\n\t\tconst isItemSelected = isSelected(row.id);\r\n\t\tconst labelId = `enhanced-table-checkbox-${index}`;\r\n\t\t\r\n\t\tlet styles = {};\r\n\t\tfor (let columnId in rowStyles) {\r\n\t\t\tlet rowStyle = rowStyles[columnId];\r\n\t\t\t\r\n\t\t\tif (row[columnId] && Object.keys(rowStyle).indexOf(row[columnId]) > -1) {\r\n\t\t\t\tstyles = { ...styles, ...rowStyle[row[columnId]] };\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\treturn (\r\n\r\n\t<TableRow\r\n\t\tkey={'TableRow-' + index}\r\n\t\thover\r\n\t\tonClick={onClick ? (event => onClick(event, row.id)) : undefined}\r\n\t\trole=\"checkbox\"\r\n\t\taria-checked={isItemSelected}\r\n\t\ttabIndex={-1}\r\n\t\tselected={isItemSelected}\r\n\t\t>\r\n\t\t\r\n\t\t{selectable !== false &&\r\n\t\t<TableCell\r\n\t\t\tkey={'TableCell-' + index + '-Checkbox'}\r\n\t\t\tstyle={styles}\r\n\t\t\tpadding=\"checkbox\"\r\n\t\t\t>\r\n\t\t\t\r\n\t\t\t<Checkbox\r\n\t\t\t\tchecked={isItemSelected}\r\n\t\t\t\tinputProps={{ 'aria-labelledby': labelId }}\r\n\t\t\t\t/>\r\n\t\t\t\r\n\t\t</TableCell>\r\n\t\t}\r\n\t\t\r\n\t\t{columns.map(column => (\r\n\t\t<TableCell\r\n\t\t\tkey={'TableCell-' + index + '-' + column.id}\r\n\t\t\tclasses={{ root: clsx(column.noWrap && classes.noWrap) }}\r\n\t\t\tstyle={styles}\r\n\t\t\tscope=\"row\"\r\n\t\t\tpadding={column.disablePadding ? 'none' : 'default'}\r\n\t\t\t>\r\n\r\n\t\t\t{showTableContent(row[column.id], column.type)}\r\n\t\t</TableCell>\r\n\r\n\t\t))}\r\n\r\n\t</TableRow>\r\n\t\t\r\n\t\t);\r\n\t})}\r\n\t\r\n\t{emptyRows > 0 && (\r\n\t<TableRow style={{ height: 53 * emptyRows }}>\r\n\t\t<TableCell colSpan={6} />\r\n\t</TableRow>\r\n\t)}\r\n\t\r\n</TableBody>\r\n\r\n\t);\r\n}","/*\r\n * Code by MATERIAL-UI\r\n * @see https://material-ui.com/components/tables/#sorting-amp-selecting\r\n *\r\n */\r\nimport React, { useEffect } from 'react'\r\n\r\nimport { makeStyles } from '@material-ui/core/styles'\r\nimport Table from '@material-ui/core/Table'\r\nimport TableContainer from '@material-ui/core/TableContainer'\r\nimport TablePagination from '@material-ui/core/TablePagination'\r\n\r\nimport EnhancedTableToolbar from '../components/EnhancedTableToolbar'\r\nimport EnhancedTableHead from '../components/EnhancedTableHead'\r\nimport EnhancedTableBody from '../components/EnhancedTableBody'\r\n\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n  table: {\r\n    minWidth: 750,\r\n  }\r\n}));\r\n\r\n\r\nfunction descendingComparator(a, b, orderBy, orderByCase) {\r\n\t\r\n\tlet orderA, orderB;\r\n\tif (orderBy.indexOf('.') === -1) {\r\n\t\torderA = a[orderBy] || '';\r\n\t\torderB = b[orderBy] || '';\r\n\t}\r\n\telse {\r\n\t\tlet tmpA = { ...a };\r\n\t\tlet tmpB = { ...b };\r\n\t\tlet key = orderBy;\r\n\t\tlet index;\r\n\t\t\r\n\t\twhile (key.indexOf('.') > -1) {\r\n\t\t\t\r\n\t\t\ttry {\r\n\t\t\t\tindex = key.substr(0, key.indexOf('.'));\r\n\t\t\t\tkey = key.substr(key.indexOf('.')+1);\r\n\t\t\t\ttmpA = tmpA[index];\r\n\t\t\t\ttmpB = tmpB[index];\r\n\t\t\t}\r\n\t\t\tcatch(err) {\r\n\t\t\t\tconsole.error(err.message);\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\torderA = tmpA[key] || '';\r\n\t\torderB = tmpB[key] || '';\r\n\t}\r\n\t\r\n\tif (orderByCase !== true) {\r\n\t\torderA = typeof orderA === 'object' ? JSON.stringify(orderA) : orderA.toLowerCase();\r\n\t\torderB = typeof orderB === 'object' ? JSON.stringify(orderB) : orderB.toLowerCase();\r\n\t}\r\n\t\r\n\t\r\n  if (orderB < orderA) {\r\n    return -1;\r\n  }\r\n  if (orderB > orderA) {\r\n    return 1;\r\n  }\r\n  return 0;\r\n}\r\n\r\nfunction getComparator(order, orderBy, orderByCase) {\r\n  return order === 'desc'\r\n    ? (a, b) => descendingComparator(a, b, orderBy, orderByCase)\r\n    : (a, b) => -descendingComparator(a, b, orderBy, orderByCase);\r\n}\r\n\r\nfunction stableSort(array, comparator) {\r\n  const stabilizedThis = array.map((el, index) => [el, index]);\r\n  stabilizedThis.sort((a, b) => {\r\n    const order = comparator(a[0], b[0]);\r\n    if (order !== 0) return order;\r\n    return a[1] - b[1];\r\n  });\r\n  return stabilizedThis.map(el => el[0]);\r\n}\r\n\r\nexport default function EnhancedTable(props) {\r\n  const classes = useStyles();\r\n  \r\n  const { title, headCells, size, CustomTableBody, rows, toolbar, selectable, pagination, defaultOrder, defaultOrderBy, orderByCase, defaultSelected, defaultPage, defaultRowsPerPage, toolbarRightActionButton } = props;\r\n  \r\n  const [order, setOrder] = React.useState(defaultOrder || 'asc');\r\n  const [orderBy, setOrderBy] = React.useState(defaultOrderBy || headCells[0].orderBy || headCells[0].id);\r\n  const [selected, setSelected] = React.useState(defaultSelected || []);\r\n  const [page, setPage] = React.useState(defaultPage || 0);\r\n  const [rowsPerPage, setRowsPerPage] = React.useState(pagination ? (defaultRowsPerPage || 5) : rows.length);\r\n\r\nuseEffect(() => setRowsPerPage(pagination ? (defaultRowsPerPage || 5) : rows.length), [rows.length, pagination, defaultRowsPerPage]);\r\n\r\n\r\n  const handleRequestSort = (event, property) => {\r\n    const isAsc = orderBy === property && order === 'asc';\r\n    setOrder(isAsc ? 'desc' : 'asc');\r\n    setOrderBy(property);\r\n  };\r\n\r\n  const handleSelectAllClick = event => {\r\n    if (event.target.checked) {\r\n      const newSelecteds = rows.map(n => n.id);\r\n      setSelected(newSelecteds);\r\n      return;\r\n    }\r\n    setSelected([]);\r\n  };\r\n\r\n  const handleChangePage = (event, newPage) => {\r\n    setPage(newPage);\r\n  };\r\n\r\n  const handleChangeRowsPerPage = event => {\r\n    setRowsPerPage(parseInt(event.target.value, 10));\r\n    setPage(0);\r\n  };\r\n\r\n  const selectRow = (event, id) => {\r\n    const selectedIndex = selected.indexOf(id);\r\n    let newSelected = [];\r\n\r\n    if (selectedIndex === -1) {\r\n      newSelected = newSelected.concat(selected, id);\r\n    } else if (selectedIndex === 0) {\r\n      newSelected = newSelected.concat(selected.slice(1));\r\n    } else if (selectedIndex === selected.length - 1) {\r\n      newSelected = newSelected.concat(selected.slice(0, -1));\r\n    } else if (selectedIndex > 0) {\r\n      newSelected = newSelected.concat(\r\n        selected.slice(0, selectedIndex),\r\n        selected.slice(selectedIndex + 1),\r\n      );\r\n    }\r\n\r\n    setSelected(newSelected);\r\n  };\r\n\r\n  const TableBody = CustomTableBody || EnhancedTableBody;\r\n  return (\r\n\t<React.Fragment>\r\n\t\t{toolbar !== false &&\r\n        <EnhancedTableToolbar\r\n\t\t  title={title}\r\n          rowCount={rows.length}\r\n\t\t  numSelected={selected.length || 0}\r\n\t\t  rightActionButton={toolbarRightActionButton}\r\n\t\t  />}\r\n\t\t\r\n        <TableContainer>\r\n          <Table\r\n            className={classes.table}\r\n            aria-labelledby=\"tableTitle\"\r\n            aria-label=\"enhanced table\"\r\n\t\t\tsize={size}\r\n\t\t\tstickyHeader={true}\r\n          >\r\n            <EnhancedTableHead\r\n              classes={classes}\r\n              numSelected={selected.length}\r\n              order={order}\r\n              orderBy={orderBy}\r\n              onSelectAllClick={handleSelectAllClick}\r\n              onRequestSort={handleRequestSort}\r\n              rowCount={rows.length}\r\n\t\t\t  {...props}\r\n            />\r\n\t\t\t\r\n\t\t\t<TableBody\r\n\t\t\t\tcolumns={headCells}\r\n\t\t\t\tsortedRows={stableSort(rows, getComparator(order, orderBy, orderByCase)).slice(page * rowsPerPage, page * rowsPerPage + rowsPerPage)}\r\n\t\t\t\temptyRows={rowsPerPage - Math.min(rowsPerPage, rows.length - page * rowsPerPage)}\r\n\t\t\t\tonClick={selectable !== false && selectRow}\r\n\t\t\t\tselected={selected}\r\n\t\t\t\t{...props}\r\n\t\t\t\t/>\r\n\t\t\t\r\n          </Table>\r\n        </TableContainer>\r\n\t\t{pagination && <TablePagination\r\n          rowsPerPageOptions={[5, 10, 25]}\r\n          component=\"div\"\r\n          count={rows.length}\r\n          rowsPerPage={rowsPerPage}\r\n          page={page}\r\n          onChangePage={handleChangePage}\r\n          onChangeRowsPerPage={handleChangeRowsPerPage}\r\n        />}\r\n\t</React.Fragment>\r\n\t\r\n  );\r\n}","import React from 'react'\r\nimport clsx from 'clsx'\r\n\r\nimport { format } from 'date-fns'\r\n\r\nimport Connection from '../Connection'\r\nimport i18n, { locales } from '../i18n'\r\n\r\nimport CircularProgress from '@material-ui/core/CircularProgress'\r\nimport Tooltip from '@material-ui/core/Tooltip'\r\nimport Avatar from '@material-ui/core/Avatar'\r\nimport List from '@material-ui/core/List'\r\nimport ListItemAvatar from '@material-ui/core/ListItemAvatar'\r\nimport ListItem from '@material-ui/core/ListItem'\r\nimport ListItemText from '@material-ui/core/ListItemText'\r\nimport ListItemSecondaryAction from '@material-ui/core/ListItemSecondaryAction'\r\nimport StarIcon from '@material-ui/icons/Star';\r\n\r\n\r\n/*\r\n * STYLES\r\n */\r\nimport { withStyles } from '@material-ui/core/styles';\r\nconst styles = theme => ({\r\n\tnoUpdates: {\r\n\t\tfontStyle: 'italic',\r\n\t\ttextAlign: 'right',\r\n\t\tcolor: 'rgba(0, 0, 0, 0.54)'\r\n\t},\r\n\tUpdateAvailable: {\r\n\t\tcolor: '#CCAA00',\r\n\t},\r\n\tUpdatesListItem: {\r\n\t\tbackgroundColor: '#ffd700',\r\n\t\tcolor: '#fff',\r\n\t\tmargin: theme.spacing(0, -2),\r\n\t\tpaddingLeft: theme.spacing(2)\r\n\t},\r\n\tUpdatesIndicator: {\r\n\t\tright: theme.spacing(3.75),\r\n\t\tbackgroundColor: '#CCAA00',\r\n\t\tborderRadius: '50%',\r\n\t\twidth: theme.spacing(3),\r\n\t\theight: theme.spacing(3),\r\n\t\tcolor: '#fff',\r\n\t\ttextAlign: 'center',\r\n\t\tfontSize: '1rem !important'\r\n\t},\r\n\tStatusIndicator: {\r\n\t\tfontSize: '1.4rem'\r\n\t},\r\n\tloading: {\r\n\t\ttextAlign: 'center',\r\n\t\tmarginTop: '5px'\r\n\t},\r\n\tsmall: {\r\n\t\twidth: theme.spacing(3),\r\n\t\theight: theme.spacing(3),\r\n\t},\r\n\talive: {\r\n\t\tcolor: '#86d686'\r\n\t},\r\n\tnotAlive: {\r\n\t\tcolor: '#f7e43b'\r\n\t},\r\n\tdisabled: {\r\n\t\tcolor: '#bababa'\r\n\t}\r\n});\r\n\r\n\r\nclass AdapterStatus extends React.Component {\r\n\t\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\t\r\n\t\tthis.state = {\r\n\t\t\tadapterInformation: [],\r\n\t\t\tadapterAliveStatus: {},\r\n\t\t\tnewUpdates: false,\r\n\t\t\tupdatesJson: '',\r\n\t\t\tlastUpdateCheck: ''\r\n\t\t}\r\n\t\t\r\n\t\tthis.socket = Connection.getConnection;\r\n\t\tthis.list = this.props.settings.list ? (Array.isArray(this.props.settings.list) ? this.props.settings.list : this.props.settings.list.split(',')) : null;\r\n\t\tthis.blacklist = this.props.settings.blacklist ? (Array.isArray(this.props.settings.blacklist) ? this.props.settings.blacklist : this.props.settings.blacklist.split(',')) : null;\r\n\t\t\r\n\t\tthis.updateStates = ['admin.0.info.newUpdates', 'admin.0.info.lastUpdateCheck', 'admin.0.info.updatesJson'];\r\n\t\tthis.adapterStates = [];\r\n\t}\r\n\t\r\n\tcomponentDidMount() {\r\n\t\t\r\n\t\t// retrieve updates\r\n\t\tif (this.props.settings.updates !== false) {\r\n\t\t\t\r\n\t\t\tthis.socket.getStates(this.updateStates, (err, states) => {\r\n\t\t\t\t\r\n\t\t\t\tthis.setState({\r\n\t\t\t\t\tnewUpdates: states['admin.0.info.newUpdates'].val,\r\n\t\t\t\t\tlastUpdateCheck: states['admin.0.info.lastUpdateCheck'].val,\r\n\t\t\t\t\tupdatesJson: states['admin.0.info.updatesJson'].val\r\n\t\t\t\t});\r\n\t\t\t\t\r\n\t\t\t\t// get state updates\r\n\t\t\t\tthis.socket.subscribeStates(this.updateStates, (id, update) => {\r\n\t\t\t\t\t\r\n\t\t\t\t\tid = id.substr(id.lastIndexOf('.')+1);\r\n\t\t\t\t\tif (this.state[id] !== update.val) {\r\n\t\t\t\t\t\tthis.setState({ [id]: update.val });\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t});\r\n\t\t}\r\n\t\t\r\n\t\t// get adapter instances\r\n\t\tthis.socket.getAdapterInstances((err, instances) => {\r\n\t\t\t\r\n\t\t\tif (instances && instances.rows) {\r\n\t\t\t\tlet adapters = [];\r\n\t\t\t\t\r\n\t\t\t\t// states per instance to retrieve\r\n\t\t\t\tinstances.rows.forEach((instance, i) => {\r\n\t\t\t\t\t\r\n\t\t\t\t\t// get alive / connected states\r\n\t\t\t\t\tif ((!this.list || (this.list && this.list.indexOf(instance.value.common.name) > -1)) && (!this.blacklist || (this.blacklist && this.blacklist.indexOf(instance.value.common.name) === -1))) {\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tadapters.push(instance);\r\n\t\t\t\t\t\tthis.adapterStates = this.adapterStates.concat([\r\n\t\t\t\t\t\t\tinstance.id + '.alive',\r\n\t\t\t\t\t\t\tinstance.id + '.connected',\r\n\t\t\t\t\t\t\tinstance.id.replace('system.adapter.', '') + '.info.connection'\r\n\t\t\t\t\t\t]);\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t\t\r\n\t\t\t\t// sort instances\r\n\t\t\t\tthis.setState({ adapterInformation: adapters.sort((item1, item2) => {\r\n\t\t\t\t\t\tif (item1.id > item2.id) return 1;\r\n\t\t\t\t\t\telse if (item2.id > item1.id) return -1;\r\n\t\t\t\t\t\telse return 0;\r\n\t\t\t\t\t})\r\n\t\t\t\t});\r\n\t\t\t\t\r\n\t\t\t\t// retrieve intial states\r\n\t\t\t\tthis.socket.getStates(this.adapterStates, (err, adapterAliveStatus) => {\r\n\t\t\t\t\tthis.setState({ adapterAliveStatus });\r\n\t\t\t\t\t\r\n\t\t\t\t\t// get state updates\r\n\t\t\t\t\tthis.socket.subscribeStates(this.adapterStates, (id, aliveStatus) => {\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tif (aliveStatus && (!this.state.adapterAliveStatus[id] || (aliveStatus.val !== this.state.adapterAliveStatus[id].val))) {\r\n\t\t\t\t\t\t\tthis.setState(prevState => ({ adapterAliveStatus: { ...prevState.adapterAliveStatus, [id]: aliveStatus } }));\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\t\r\n\tcomponentWillUnmount() {\r\n\t\tthis.socket.unsubscribeStates([ ...this.updateStates, ...this.adapterStates ]);\r\n\t}\r\n\t\r\n\trender() {\r\n\t\tconst { classes } = this.props;\r\n\t\t\r\n\t\t// adapter updates\r\n\t\tconst updateList = (this.state.updatesJson && JSON.parse(this.state.updatesJson)) || {};\r\n\t\tconst updates = Object.keys(updateList).length\r\n\t\t\r\n\t\t// adapter instances\r\n\t\tlet adapterList = <ListItem key='loading' className={classes.loading}><CircularProgress size={20} /></ListItem>\r\n\t\t\r\n\t\tif (this.state.adapterInformation.length > 0) {\r\n\t\t\t\r\n\t\t\tadapterList = this.state.adapterInformation.map(adapter => {\r\n\t\t\t\tadapter.update = updateList[adapter.value.common.name] || false;\r\n\t\t\t\t\r\n\t\t\t\tconst enabled = adapter.value.common.enabled;\r\n\t\t\t\tconst alive = (this.state.adapterAliveStatus[adapter.id + '.alive'] && this.state.adapterAliveStatus[adapter.id + '.alive'].val) || false;\r\n\t\t\t\tconst connected = (this.state.adapterAliveStatus[adapter.id + '.connected'] && this.state.adapterAliveStatus[adapter.id + '.connected'].val) || false;\r\n\t\t\t\tconst connection = this.state.adapterAliveStatus[adapter.id.replace('system.adapter.', '') + '.info.connection'] ? this.state.adapterAliveStatus[adapter.id.replace('system.adapter.', '') + '.info.connection'].val : true;\r\n\t\t\t\t\r\n\t\t\t\tconst tooltip = i18n.t('Adapter') + ' ' + (enabled ? (alive && connected && connection ? i18n.t('alive') : i18n.t('not alive')) : i18n.t('disabled'));\r\n\t\t\t\t\r\n\t\t\t\treturn (\r\n\t\t\t\t\r\n\t\t\t\t\t<ListItem key={'adapter-' + adapter.id}>\r\n\t\t\t\t\t\t<ListItemAvatar>\r\n\t\t\t\t\t\t\t<Avatar alt={adapter.value.common.name} src={adapter.value.common.extIcon} className={classes.small} />\r\n\t\t\t\t\t\t</ListItemAvatar>\r\n\t\t\t\t\t\t<ListItemText\r\n\t\t\t\t\t\t\tprimary={adapter.value.common.title}\r\n\t\t\t\t\t\t\tsecondary={[\r\n\t\t\t\t\t\t\t\t'v' + adapter.value.common.version,\r\n\t\t\t\t\t\t\t\t(adapter.update && adapter.value.common.version !== adapter.update.availableVersion && (<span key={'updates-' + adapter.id}>, <span className={classes.UpdateAvailable}>{i18n.t('Update available') + ' v' + adapter.update.availableVersion}</span></span>)),\r\n\t\t\t\t\t\t\t\t(adapter.value.common.runAsCompactMode && ', ' + i18n.t('Compact Mode') + ' ' + i18n.t('on') + ' (' + i18n.t('Group') + ' ' + adapter.value.common.compactGroup + ')')\r\n\t\t\t\t\t\t\t]}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t<ListItemSecondaryAction className={clsx(classes.StatusIndicator, enabled ? (alive && connected && connection ? classes.alive : classes.notAlive) : classes.disabled)}>\r\n\t\t\t\t\t\t\t<Tooltip title={tooltip}>\r\n\t\t\t\t\t\t\t\t<span className={enabled ? (alive && connected && connection ? 'mdi mdi-check-circle' : 'mdi mdi-alert') : 'mdi mdi-close'}></span>\r\n\t\t\t\t\t\t\t</Tooltip>\r\n\t\t\t\t\t\t</ListItemSecondaryAction>\r\n\t\t\t\t\t</ListItem>\r\n\t\t\t\t\r\n\t\t\t\t)\r\n\t\t\t});\r\n\t\t}\r\n\t\t\r\n\t\treturn (\r\n\r\n<List dense>\r\n\t{this.state.newUpdates === false ? (this.state.lastUpdateCheck && \r\n\t<ListItem key=\"updates\" classes={{ root: classes.noUpdates }}>\r\n\t\t<ListItemText\r\n\t\t\tprimary={i18n.t('last update') + ': ' + format(new Date(this.state.lastUpdateCheck), 'dd.MM.yyyy HH:mm:ss', { locale: locales[i18n.getLanguage()] })}\r\n\t\t\t/>\r\n\t\t\r\n\t</ListItem>)\r\n\t:\r\n\t<ListItem key=\"updates\" classes={{ container: classes.UpdatesListItem }}>\r\n\t\t<ListItemAvatar>\r\n\t\t\t<StarIcon />\r\n\t\t</ListItemAvatar>\r\n\t\t<ListItemText\r\n\t\t\tprimary={i18n.t('Updates available') + '!'}\r\n\t\t\t/>\r\n\t\t\r\n\t\t<ListItemSecondaryAction className={clsx(classes.StatusIndicator, classes.UpdatesIndicator)}>\r\n\t\t\t{updates}\r\n\t\t</ListItemSecondaryAction>\r\n\t</ListItem>\r\n\t}\r\n\t\r\n\t{adapterList}\r\n</List>\r\n\r\n\t\t);\r\n\t}\r\n}\r\n\r\n\r\nexport default withStyles(styles)(AdapterStatus);\r\n\r\nexport const ModuleSettings = {\r\n\tnoDevicesAllowed: true,\r\n\ttitle: i18n.t('Adapter Status'),\r\n\ticon: 'traffic-light'\r\n}\r\n\r\nexport const ModuleDescription = \"Zeigt alle installierten Adapter mit ihren Instanzen und dem jeweiligen Status (active & alive, active & not connected, inactive) an.\";\r\nexport const ModuleScreenshots = ['AdapterStatus1.png'];\r\n\r\nexport const ModuleConfig = [\r\n\t{\r\n\t\t'parameter': 'updates',\r\n\t\t'label': 'Adapter Updates',\r\n\t\t'description': {\r\n\t\t\t'en': 'Enable to show adapters updates',\r\n\t\t\t'de': 'Aktivieren, um Adapter Updates anzuzeigen'\r\n\t\t},\r\n\t\t'type': 'Switch',\r\n\t\t'val': true\r\n\t},\r\n\t{\r\n\t\t'parameter': 'list',\r\n\t\t'label': {\r\n\t\t\t'en': 'List of Adapter\\'s',\r\n\t\t\t'de': 'Liste angezeigter Adapter'\r\n\t\t},\r\n\t\t'description': {\r\n\t\t\t'en': 'List of adapters to show (empty shows all adapters)',\r\n\t\t\t'de': 'Liste der Adapter, die angezeigt werden (leere Liste zeigt alle Adapter)'\r\n\t\t},\r\n\t\t'values': {\r\n\t\t\t'en': 'Adapter names separated by comma',\r\n\t\t\t'de': 'Namen der Adapter mit Komma separiert'\r\n\t\t}\r\n\t},\r\n\t{\r\n\t\t'parameter': 'blacklist',\r\n\t\t'label': {\r\n\t\t\t'en': 'List of Adapter\\'s to hide',\r\n\t\t\t'de': 'Liste nicht angezeigter Adapter'\r\n\t\t},\r\n\t\t'description': {\r\n\t\t\t'en': 'Shows all adapters except the ones listed here',\r\n\t\t\t'de': 'Zeigt alle Adapter, außer die hier angegebenen'\r\n\t\t},\r\n\t\t'values': {\r\n\t\t\t'en': 'Adapter names separated by comma',\r\n\t\t\t'de': 'Namen der Adapter mit Komma separiert'\r\n\t\t}\r\n\t}\r\n]\r\n","import React from 'react'\r\nimport clsx from 'clsx'\r\n\r\nimport { Line } from 'react-chartjs-2'\r\n// eslint-disable-next-line\r\nimport chartjs_colorschemes from 'chartjs-plugin-colorschemes'\r\n// eslint-disable-next-line\r\nimport chartjs_zoom from 'chartjs-plugin-zoom'\r\n\r\nimport DateFnsUtils from '@date-io/date-fns'\r\n\r\nimport Log from '../Log'\r\nimport i18n, { locales } from '../i18n'\r\nimport helpers from '../helpers/timeConverter'\r\n\r\nimport CircularProgress from '@material-ui/core/CircularProgress'\r\nimport Button from '@material-ui/core/Button'\r\nimport ButtonGroup from '@material-ui/core/ButtonGroup'\r\nimport Alert from '@material-ui/lab/Alert'\r\nimport Tooltip from '@material-ui/core/Tooltip'\r\nimport Paper from '@material-ui/core/Paper'\r\nimport Divider from '@material-ui/core/Divider'\r\nimport { MuiPickersUtilsProvider, DateTimePicker } from '@material-ui/pickers'\r\nimport InputBase from '@material-ui/core/InputBase'\r\nimport Select from '@material-ui/core/Select'\r\nimport MenuItem from '@material-ui/core/MenuItem'\r\nimport IconButton from '@material-ui/core/IconButton'\r\nimport CalendarIcon from '@material-ui/icons/Event'\r\nimport CalendarTodayIcon from '@material-ui/icons/EventAvailable'\r\nimport HistoryIcon from '@material-ui/icons/History'\r\nimport FastRewindIcon from '@material-ui/icons/FastRewind'\r\n//import DisablePan from '@material-ui/icons/SelectAll'\r\n//import DisableZoom from '@material-ui/icons/LocationDisabled'\r\nimport ResetZoom from '@material-ui/icons/ZoomOutMap'\r\nimport LiveUpdates from '@material-ui/icons/Update'\r\n\r\n\r\n\r\n/*\r\n * STYLES\r\n */\r\nimport { withStyles } from '@material-ui/core/styles';\r\nconst styles = theme => ({\r\n\tloading: {\r\n\t\tposition: 'absolute',\r\n\t\tbackgroundColor: 'rgba(0, 0, 0, 0.3)',\r\n\t\twidth: '100%',\r\n\t\theight: '100%',\r\n\t\tdisplay: 'flex',\r\n\t\talignItems: 'center',\r\n\t\tjustifyContent: 'center',\r\n\t},\r\n\terrorMessage: {\r\n\t\tmarginBottom: 5,\r\n\t\tmarginRight: 15,\r\n\t\twidth: '100%'\r\n\t},\r\n\ttoolbar: {\r\n\t\tdisplay: 'flex'\r\n\t},\r\n\ttoolbarButtons: {\r\n\t\tdisplay: 'initial',\r\n\t\twhiteSpace: 'nowrap'\r\n\t},\r\n\toptions: {\r\n\t\tdisplay: 'flex',\r\n\t\tjustifyContent: 'center',\r\n\t},\r\n\tdatePicker: {\r\n\t\tpadding: '2px 4px',\r\n\t\tdisplay: 'flex',\r\n\t\talignItems: 'center',\r\n\t\tmargin: 2\r\n\t},\r\n\tinput: {\r\n\t\tmarginLeft: theme.spacing(1),\r\n\t\tflex: 1,\r\n\t},\r\n\tselect: {\r\n\t\twidth: 100\r\n\t},\r\n\ticon: {\r\n\t\tmargin: 10,\r\n\t},\r\n\ticonButton: {\r\n\t\tpadding: 10,\r\n\t},\r\n\tdivider: {\r\n\t\tmargin: '15px 0',\r\n\t},\r\n\tdividerVertical: {\r\n\t\theight: 28,\r\n\t\tmargin: 4,\r\n\t},\r\n\tbutton: {\r\n\t\tbackgroundColor: theme.palette.primary.main,\r\n\t\tcolor: '#fff !important',\r\n\t\tmargin: '4px'\r\n\t},\r\n\tbuttonDisabled: {\r\n\t\tbackgroundColor: '#eee',\r\n\t\tmargin: '4px'\r\n\t}\r\n});\r\n\r\n\r\nclass Chart extends React.Component {\r\n\t\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\t\r\n\t\t// chart settings\r\n\t\tthis.chartFilter = this.props.settings.chartFilter || {};\r\n\t\tthis.chartConfig = this.props.settings.chartConfig || {};\r\n\t\t\r\n\t\tthis.chartConfig.yAxes = this.chartConfig.yAxes || [];\r\n\t\tthis.chartConfig.yAxes.unshift({\r\n\t\t\tid: 'left',\r\n\t\t\ttype: 'linear',\r\n\t\t\tposition: 'left',\r\n\t\t\tticks: {\r\n\t\t\t\tcallback: value => (this.chartConfig.yLeftAxisUnitBefore || '') + Number.parseFloat(value).toFixed(1) + (this.chartConfig.yLeftAxisUnitAfter || '')\r\n\t\t\t}\r\n\t\t});\r\n\t\t\r\n\t\t// states\r\n\t\tthis.state = {\r\n\t\t\tloading: true,\r\n\t\t\terrors: [],\r\n\t\t\t\r\n\t\t\tdatePicker: false,\r\n\t\t\tselectedTimeRangeValue: (this.chartFilter && this.chartFilter.selectedTimeRangeValue) || 1,\r\n\t\t\tselectedTimeRangeUnit: (this.chartFilter && this.chartFilter.selectedTimeRangeUnit) || 'days',\r\n\t\t\tselectedDateTime: (this.chartFilter && this.chartFilter.selectedDateTime && new Date(this.chartFilter.selectedDateTime)) || new Date(),\r\n\t\t\tdateNow: this.chartFilter && this.chartFilter.selectedDateTime ? false : true,\r\n\t\t\t\r\n\t\t\tchartLabels: [],\r\n\t\t\tchartData: {\r\n\t\t\t\tlabels: [],\r\n\t\t\t\tdatasets: []\r\n\t\t\t},\r\n\t\t\t\r\n\t\t\tchartPan: true,\r\n\t\t\tchartZoom: true\r\n\t\t}\r\n\t\t\r\n\t\t//\r\n\t\tthis.timer = null;\r\n\t\tthis.timeRangeRef = React.createRef();\r\n\t\t\r\n\t\t// chart instance options\r\n\t\tthis.chartRef = React.createRef();\r\n\t\tthis.chartUpdates = {};\r\n\t\tthis.chartOptions = {\r\n\t\t\tmaintainAspectRatio: false,\r\n\t\t\tspanGaps: true,\r\n\t\t\tlegend: {\r\n\t\t\t\tonClick: this.legendClickHandler.bind(this)\r\n\t\t\t},\r\n\t\t\ttooltips: {\r\n\t\t\t\tcallbacks: {\r\n\t\t\t\t\tlabel: (item, data) => data.datasets[item.datasetIndex].label + ': ' + item.value + data.datasets[item.datasetIndex].unit\r\n\t\t\t\t},\r\n\t\t\t},\r\n\t\t\tscales: {\r\n\t\t\t\tyAxes: this.chartConfig.yAxes\r\n\t\t\t},\r\n\r\n\t\t\tplugins: {\r\n\t\t\t\tcolorschemes: {\r\n\t\t\t\t\tscheme: 'brewer.SetOne9'\r\n\t\t\t\t},\r\n\t\t\t\tzoom: {\r\n\t\t\t\t\t// Container for pan options\r\n\t\t\t\t\tpan: {\r\n\t\t\t\t\t\t// Boolean to enable panning\r\n\t\t\t\t\t\tenabled: true,\r\n\r\n\t\t\t\t\t\t// Panning directions\r\n\t\t\t\t\t\tmode: 'xy'\r\n\t\t\t\t\t},\r\n\t\t\t\t\t\r\n\t\t\t\t\t// Container for zoom options\r\n\t\t\t\t\tzoom: {\r\n\t\t\t\t\t\t// Boolean to enable zooming\r\n\t\t\t\t\t\tenabled: true,\r\n\r\n\t\t\t\t\t\t// Zooming directions.\r\n\t\t\t\t\t\tmode: 'xy'\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t};\r\n\t}\r\n\t\r\n\tcomponentDidMount() {\r\n\t\t\r\n\t\t// request initial history data\r\n\t\tlet options = { ...this.getTimeRange(), axis: this.getAxis() };\r\n\t\t\r\n\t\tthis.props.devices.forEach(device => {\r\n\t\t\tdevice.label = device.name + ' (' + i18n.t(device.primaryStateKey) + ')';\r\n\t\t\tdevice.requestDeviceStateHistory(device.options.history || null, true, { 'start': options.start, 'end': options.end, 'step': options.step, 'aggregate': 'average', 'ignoreNull': true }).catch(err => Log._('Modules (Chart)', err.message, 'error', true, err.stack));\r\n\t\t\t\r\n\t\t\t// add listeners for newly requested data\r\n\t\t\tdevice.listen('historyChange', (options) => this.historyChange);\r\n\t\t\t\r\n\t\t\t// add listeners for data updates\r\n\t\t\tif (this.props.settings.liveUpdates !== null && this.props.settings.liveUpdates !== false && this.state.dateNow) {\r\n\t\t\t\tdevice.listen((options) => this.stateChange);\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\t\r\n\tcomponentWillUnmount() {\r\n\t\tthis.props.devices.forEach(device => {\r\n\t\t\tdevice.unlisten(this.stateChange);\r\n\t\t});\r\n\t}\r\n\t\r\n\tcomponentDidUpdate(prevProps, prevState) {\r\n\t\t\r\n\t\tif (this.state.selectedTimeRangeValue &&\r\n\t\t\t\t(prevState.selectedDateTime !== this.state.selectedDateTime || prevState.selectedTimeRangeValue !== this.state.selectedTimeRangeValue || prevState.selectedTimeRangeUnit !== this.state.selectedTimeRangeUnit)\r\n\t\t\t) {\r\n\t\t\t\r\n\t\t\t// request updated history data\r\n\t\t\tthis.setState({ loading: true, errors: [] });\r\n\t\t\t\r\n\t\t\tclearTimeout(this.timer);\r\n\t\t\tthis.timer = setTimeout(() => {\r\n\t\t\t\t\r\n\t\t\t\tconst options = this.getTimeRange();\r\n\t\t\t\tthis.props.devices.forEach(device => {\r\n\t\t\t\t\tdevice.requestDeviceStateHistory(device.options.history || null, true, { 'start': options.start, 'end': options.end, 'step': options.step, 'aggregate': 'average', 'ignoreNull': true }).catch(err => Log._('Modules (Chart)', err.message, 'error', true, err.stack));\r\n\t\t\t\t});\r\n\t\t\t\t\r\n\t\t\t}, 500);\r\n\t\t}\r\n\t}\r\n\t\r\n\thistoryChange = options => (stateKey, history, state, device) => {\r\n\t\tthis.addChartGraph(device, history, { ...options, axis: this.getAxis(options.start, options.end) } );\r\n\t\tthis.setState({ loading: false });\r\n\t}\r\n\t\r\n\tstateChange = options => (stateKey, val, state, device) => this.updateChartGraph(device, val, { ...options, axis: this.getAxis(options.end, new Date()) } )\r\n\t\r\n\tgetTimeRange() {\r\n\t\t\r\n\t\tconst end = this.state.selectedDateTime.getTime();\r\n\t\tlet timeRange = this.state.selectedTimeRangeValue;\r\n\t\tlet step = 1;\r\n\t\tlet axisTimeFormat = 'dd. MMM yyyy, HH:mm';\r\n\t\t\r\n\t\tswitch(this.state.selectedTimeRangeUnit) {\r\n\t\t\tdefault:\r\n\t\t\t\tbreak;\r\n\t\t\t\r\n\t\t\tcase 'seconds':\r\n\t\t\t\taxisTimeFormat = 'dd. MMM yyyy, HH:mm:ss';\r\n\t\t\t\tbreak;\r\n\t\t\t\t\r\n\t\t\tcase 'minutes':\r\n\t\t\t\taxisTimeFormat = 'dd. MMM yyyy, HH:mm:ss';\r\n\t\t\t\ttimeRange = timeRange*60;\r\n\t\t\t\t//step = step;\r\n\t\t\t\tbreak;\r\n\t\t\t\t\r\n\t\t\tcase 'hours':\r\n\t\t\t\taxisTimeFormat = 'dd. MMM yyyy, HH:mm';\r\n\t\t\t\ttimeRange = timeRange*60*60;\r\n\t\t\t\tstep = step*60;\r\n\t\t\t\tbreak;\r\n\t\t\t\t\r\n\t\t\tcase 'days':\r\n\t\t\t\taxisTimeFormat = 'dd. MMM yyyy, HH:mm';\r\n\t\t\t\ttimeRange = timeRange*60*60*24;\r\n\t\t\t\tstep = step*60*60;\r\n\t\t\t\tbreak;\r\n\t\t\t\t\r\n\t\t\tcase 'months':\r\n\t\t\t\taxisTimeFormat = 'dd. MMM yyyy';\r\n\t\t\t\ttimeRange = timeRange*60*60*24*31;\r\n\t\t\t\tstep = step*60*60*24;\r\n\t\t\t\tbreak;\r\n\t\t\t\t\r\n\t\t\tcase 'years':\r\n\t\t\t\taxisTimeFormat = 'dd. MMM yyyy';\r\n\t\t\t\ttimeRange = timeRange*60*60*24*365;\r\n\t\t\t\tstep = step*60*60*24*31;\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\t\t\r\n\t\treturn {\r\n\t\t\t'axisTimeFormat': axisTimeFormat,\r\n\t\t\t'start': end-timeRange*1000,\r\n\t\t\t'end': end,\r\n\t\t\t'timeRange': timeRange*1000,\r\n\t\t\t'step': step*1000\r\n\t\t};\r\n\t}\r\n\t\r\n\tgetAxis(start, end) {\r\n\t\t\r\n\t\tconst { step, axisTimeFormat } = this.getTimeRange();\r\n\t\tlet axis = {};\r\n\t\t\r\n\t\tfor (let time = start; time <= end; time += step) {\r\n\t\t\taxis[time] = helpers.secondsToDateTime(time/1000, axisTimeFormat);\r\n\t\t}\r\n\t\t\r\n\t\treturn axis;\r\n\t}\r\n\t\r\n\tgroupChartData(chartData, axis) {\r\n\t\t\r\n\t\tlet prevMarker;\r\n\t\tlet data = [];\r\n\t\t\r\n\t\tlet markers = Object.keys(axis);\r\n\t\tmarkers.forEach((marker, i) => {\r\n\t\t\tprevMarker = markers[(i-1 > 0 ? i-1 : 0)];\r\n\t\t\t\r\n\t\t\tfor (let index in chartData) {\r\n\t\t\t\tlet entry = chartData[index];\r\n\t\t\t\tentry.val = parseFloat(entry.val);\r\n\t\t\t\t\r\n\t\t\t\t// \r\n\t\t\t\tif (!entry.ts || entry.val === null) {\r\n\t\t\t\t\tcontinue;\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\t// before range, continue\r\n\t\t\t\tif (prevMarker > entry.ts) {\r\n\t\t\t\t\tcontinue;\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\t// in range\r\n\t\t\t\telse if (prevMarker < entry.ts && entry.ts <= marker) {\r\n\t\t\t\t\tdata[i] = !data[i] ? [ entry.val ] : [ ...data[i], entry.val ]; // parseFloat((data[i] ? ((data[i]+entry.val)/2) : entry.val).toFixed(2));\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\t// beyond range, so next marker\r\n\t\t\t\telse if (entry.ts > marker) {\r\n\t\t\t\t\tbreak;\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\t//\r\n\t\t\tif (!data[i]) {\r\n\t\t\t\t// \r\n\t\t\t}\r\n\t\t\telse if (data[i].length === 1) {\r\n\t\t\t\tdata[i] = data[i][0];\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tdata[i] = data[i].reduce((a,b) => a + b, 0) / data[i].length;\r\n\t\t\t}\r\n\t\t});\r\n\t\t\r\n\t\treturn data;\r\n\t}\r\n\t\r\n\tupdateChartGraph(device, value, options) {\r\n\t\t\r\n\t\tconst chartIndex = this.state.chartLabels.findIndex(entry => entry === device.label);\r\n\t\tif (chartIndex === -1) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\t\r\n\t\tthis.chartUpdates[chartIndex] = this.chartUpdates[chartIndex] || [];\r\n\t\tthis.chartUpdates[chartIndex].push({\r\n\t\t\t'ts': value.ts,\r\n\t\t\t'val': value.val\r\n\t\t});\r\n\t\t\r\n\t\t// process data\r\n\t\tconst data = this.groupChartData(this.chartUpdates[chartIndex], options.axis);\r\n\t\t\r\n\t\t//console.log(value);\r\n\t\t//console.log(options, options.axis, data);\r\n\t\t\r\n\t\t// update chart\r\n\t\tthis.chartRef.current.chartInstance.data.labels = [ ...this.state.chartData.labels, ...Object.values(options.axis) ];\r\n\t\tthis.chartRef.current.chartInstance.data.datasets[chartIndex].data = [ ...this.state.chartData.datasets[chartIndex].data, ...data ];\r\n\t\tthis.chartRef.current.chartInstance.update();\r\n\t}\r\n\t\r\n\taddChartGraph(device, history, options) {\r\n\t\t\r\n\t\t// only add chart if data is given\r\n\t\tif (!history || !history.length) {\r\n\t\t\tlet error = i18n.t('No history data given for %s').replace('%s', device.label) + '!';\r\n\t\t\tthis.setState(prevStates => ({ errors: [ ...prevStates.errors, error ] }));\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\t\r\n\t\t// process data\r\n\t\tconst data = this.groupChartData(history, options.axis);\r\n\t\t\r\n\t\t// update chart\r\n\t\tconst chartIndex = this.state.chartLabels.findIndex(entry => entry === device.label);\r\n\t\tif (chartIndex > -1) {\r\n\t\t\tthis.chartRef.current.chartInstance.data.labels = Object.values(options.axis);\r\n\t\t\tthis.chartRef.current.chartInstance.data.datasets[chartIndex].data = data;\r\n\t\t\tthis.chartRef.current.chartInstance.update();\r\n\t\t}\r\n\t\t\r\n\t\t// index chart\r\n\t\telse {\r\n\t\t\tthis.setState(prevStates => ({ chartLabels: [ ...prevStates.chartLabels, device.label ] }));\r\n\t\t\t\r\n\t\t\t// chart dataset\r\n\t\t\tlet dataSet = {\r\n\t\t\t\tlabel: device.label,\r\n\t\t\t\tunit: device.states[device.primaryStateKey].state.value.unit || '',\r\n\t\t\t\tfill: false,\r\n\t\t\t\t...device.options.graphConfig || {},\r\n\t\t\t\tdata: data\r\n\t\t\t};\r\n\t\t\t\r\n\t\t\t// add data to chart\r\n\t\t\tthis.setState(prevStates => ({\r\n\t\t\t\taxisTimeFormat: options.axisTimeFormat,\r\n\t\t\t\tchartData: {\r\n\t\t\t\t\tlabels: Object.values(options.axis),\r\n\t\t\t\t\tdatasets: [ ...prevStates.chartData.datasets, dataSet ],\r\n\t\t\t\t}\r\n\t\t\t}));\r\n\t\t}\r\n\t}\r\n\t\r\n\tlegendClickHandler(e, legendItem) {\r\n\t\t\r\n\t\tlet index = legendItem.datasetIndex;\r\n\t\tlet ci = this.chartRef.current.chartInstance;\r\n\t\tlet meta = ci.getDatasetMeta(index);\r\n\r\n\t\tmeta.hidden = meta.hidden === null ? !ci.data.datasets[index].hidden : null;\r\n\t\tci.update();\r\n\t\tci.resetZoom();\r\n\t}\r\n\t\r\n\tdisablePan() {\r\n\t\tlet pan = this.chartRef.current.chartInstance.options.plugins.zoom.pan.enabled;\r\n\t\tthis.chartRef.current.chartInstance.options.plugins.zoom.pan.enabled = (pan === false);\r\n\t\tthis.setState({ chartPan: (pan === false) });\r\n\t}\r\n\t\r\n\tdisableZoom() {\r\n\t\tlet zoom = this.chartRef.current.chartInstance.options.plugins.zoom.zoom.enabled;\r\n\t\tthis.chartRef.current.chartInstance.options.plugins.zoom.zoom.enabled = (zoom === false);\r\n\t\tthis.setState({ chartZoom: (zoom === false) });\r\n\t}\r\n\t\r\n\trender() {\r\n\t\tconst { classes, settings } = this.props;\r\n\t\treturn (\r\n\r\n<div>\r\n\t<div className={classes.options}>\r\n\t\r\n\t\t<Paper className={classes.datePicker}>\r\n\t\t\t<Tooltip title={i18n.t('Period shown in Chart')}>\r\n\t\t\t\t<HistoryIcon className={classes.icon} />\r\n\t\t\t</Tooltip>\r\n\t\t\t\r\n\t\t\t<InputBase\r\n\t\t\t\tinputRef={this.timeRangeRef}\r\n\t\t\t\tclassName={classes.input}\r\n\t\t\t\tvalue={this.state.selectedTimeRangeValue}\r\n\t\t\t\tonChange={event => this.setState({ selectedTimeRangeValue: event.target.value })}\r\n\t\t\t\t/>\r\n\t\t\t\r\n\t\t\t<Select\r\n\t\t\t\tvalue={this.state.selectedTimeRangeUnit}\r\n\t\t\t\tonChange={event => this.setState({ selectedTimeRangeUnit: event.target.value })}\r\n\t\t\t\tdisplayEmpty\r\n\t\t\t\tdisableUnderline\r\n\t\t\t\tclassName={classes.select}\r\n\t\t\t\t>\r\n\t\t\t\t\r\n\t\t\t\t<MenuItem value=\"seconds\">{i18n.t('Seconds')}</MenuItem>\r\n\t\t\t\t<MenuItem value=\"minutes\">{i18n.t('Minutes')}</MenuItem>\r\n\t\t\t\t<MenuItem value=\"hours\">{i18n.t('Hours')}</MenuItem>\r\n\t\t\t\t<MenuItem value=\"days\">{i18n.t('Days')}</MenuItem>\r\n\t\t\t\t<MenuItem value=\"months\">{i18n.t('Months')}</MenuItem>\r\n\t\t\t\t<MenuItem value=\"years\">{i18n.t('Years')}</MenuItem>\r\n\t\t\t</Select>\r\n\t\t\t\r\n\t\t\t{/*\r\n\t\t\t<IconButton className={classes.iconButton} onClick={() => this.timeRangeRef.current.focus()}>\r\n\t\t\t\t<CalendarIcon />\r\n\t\t\t</IconButton>\r\n\t\t\t*/}\r\n\t\t</Paper>\r\n\r\n\t\t<Paper className={classes.datePicker}>\r\n\t\t\t<Tooltip title={i18n.t('End date')}>\r\n\t\t\t\t<FastRewindIcon className={classes.icon} />\r\n\t\t\t</Tooltip>\r\n\t\t\t\r\n\t\t\t<MuiPickersUtilsProvider locale={locales[i18n.getLanguage()]} utils={DateFnsUtils}>\r\n\t\t\t\t<DateTimePicker\r\n\t\t\t\t\tclassName={classes.input}\r\n\t\t\t\t\tvalue={this.state.selectedDateTime}\r\n\t\t\t\t\tonChange={selectedDateTime => this.setState({ selectedDateTime: selectedDateTime, dateNow: false })}\r\n\t\t\t\t\t\r\n\t\t\t\t\topen={this.state.datePicker}\r\n\t\t\t\t\tonOpen={() => this.setState({ datePicker: true })}\r\n\t\t\t\t\tonClose={() => this.setState({ datePicker: false })}\r\n\t\t\t\t\t\r\n\t\t\t\t\tvariant=\"inline\"\r\n\t\t\t\t\tampm={false}\r\n\t\t\t\t\tformat='dd.MM.yyyy HH:mm'\r\n\t\t\t\t\tInputProps={{\r\n\t\t\t\t\t\tdisableUnderline: true,\r\n\t\t\t\t\t}}\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t\r\n\t\t\t</MuiPickersUtilsProvider>\r\n\t\t\t\r\n\t\t\t<Tooltip title={i18n.t('Select end date')}>\r\n\t\t\t\t<IconButton color=\"primary\" className={classes.iconButton} onClick={() => this.setState({ datePicker: true })}>\r\n\t\t\t\t\t<CalendarIcon />\r\n\t\t\t\t</IconButton>\r\n\t\t\t</Tooltip>\r\n\t\t\t<Divider className={classes.dividerVertical} orientation=\"vertical\" />\r\n\t\t\t<Tooltip title={i18n.t('Select today as end date')}>\r\n\t\t\t\t<IconButton className={classes.iconButton} onClick={() => this.setState({ selectedDateTime: new Date(), dateNow: true })}>\r\n\t\t\t\t\t<CalendarTodayIcon />\r\n\t\t\t\t</IconButton>\r\n\t\t\t</Tooltip>\r\n\t\t</Paper>\r\n\t\t\r\n\t\t<Tooltip title={i18n.t('Live updates are ' + (this.props.settings.liveUpdates !== null && this.props.settings.liveUpdates !== false && this.state.dateNow ? 'on' : 'off'))} placement=\"top\" style={{ display: 'flex' }}>\r\n\t\t\t<span>\r\n\t\t\t\t<Button disabled={true} className={clsx(classes.datePicker, this.props.settings.liveUpdates !== null && this.props.settings.liveUpdates !== false && this.state.dateNow ? classes.button : classes.buttonDisabled)}>\r\n\t\t\t\t\t<LiveUpdates />\r\n\t\t\t\t</Button>\r\n\t\t\t</span>\r\n\t\t</Tooltip>\r\n\t\t\r\n\t</div>\r\n\t<Divider className={classes.divider} />\r\n\t\r\n\t<div className={classes.toolbar}>\r\n\t\t<div className={classes.errorMessage}>\r\n\t\t\t{this.state.errors.length > 0 && <Alert severity=\"error\">{this.state.errors.map((error, i) => [ error, React.createElement('br', { key: 'br-error-' + i }) ])}</Alert>}\r\n\t\t</div>\r\n\t\t\r\n\t\t<ButtonGroup className={classes.toolbarButtons} color=\"primary\">\r\n\t\t{/*\r\n\t\t\t<Button disableElevation={true} variant={this.state.chartPan ? 'contained' : 'outlined'} onClick={this.disablePan.bind(this)}>\r\n\t\t\t\t<Tooltip title={i18n.t(this.state.chartPan ? 'Disable panning' : 'Enable panning')}>\r\n\t\t\t\t\t<DisablePan />\r\n\t\t\t\t</Tooltip>\r\n\t\t\t</Button>\r\n\t\t\t<Button disableElevation={true} variant={this.state.chartZoom ? 'contained' : 'outlined'} onClick={this.disableZoom.bind(this)}>\r\n\t\t\t\t<Tooltip title={i18n.t(this.state.chartZoom ? 'Disable Zoom' : 'Enable Zoom')}>\r\n\t\t\t\t\t<DisableZoom />\r\n\t\t\t\t</Tooltip>\r\n\t\t\t</Button>\r\n\t\t*/}\r\n\t\t\t<Button disableElevation={true} variant=\"contained\" onClick={() => this.chartRef.current.chartInstance.resetZoom()}>\r\n\t\t\t\t<Tooltip title={i18n.t('Reset Zoom')}>\r\n\t\t\t\t\t<ResetZoom />\r\n\t\t\t\t</Tooltip>\r\n\t\t\t</Button>\r\n\t\t</ButtonGroup>\r\n\t</div>\r\n\t\r\n\t<div className={'chart-container'} style={{ position: 'relative', height: settings.chartHeight || '500px' }}>\r\n\t\t{this.state.loading && <div className={classes.loading}>\r\n\t\t\t<CircularProgress />\r\n\t\t</div>}\r\n\t\t\r\n\t\t<Line\r\n\t\t\tref={this.chartRef}\r\n\t\t\tdata={this.state.chartData}\r\n\t\t\toptions={this.chartOptions}\r\n\t\t\t/>\r\n\t\t\t\r\n\t</div>\r\n</div>\r\n\r\n\t\t);\r\n\t}\r\n}\r\n\r\nexport default withStyles(styles)(Chart);\r\n\r\nexport const ModuleSettings = {\r\n\t//noDevicesAllowed: true,\r\n\ttitle: i18n.t('Adapter Status'),\r\n\ticon: 'traffic-light'\r\n}\r\n\r\nexport const ModuleDescription = \"Stellt historische Werte (z.B. aus ioBroker.history) grafisch als Chart mittels Chart.js dar.\";\r\nexport const ModuleScreenshots = ['Chart1.png'];\r\n\r\nexport const ModuleConfig = [\r\n]\r\n","import React, { useState, useEffect, useRef } from 'react'\r\n\r\nimport { format } from 'date-fns'\r\nimport { getSunrise, getSunset } from 'sunrise-sunset-js'\r\n\r\nimport Settings from '../Settings'\r\nimport i18n, { locales } from '../i18n'\r\nimport CircularProgress from '@material-ui/core/CircularProgress'\r\n\r\n\r\nexport default function DateTime(props) {\r\n\tconst { settings } = props;\r\n\t\r\n\tconst refTimer = useRef();\r\n\tconst [DateTime, setDateTime] = useState(format(new Date(), settings.format, { locale: locales[i18n.getLanguage()] }));\r\n\tconst [city, setCity] = useState('');\r\n\tconst [sunrise, setSunrise] = useState('');\r\n\tconst [sunset, setSunset] = useState('');\r\n\t\r\n\t// https://date-fns.org/v2.9.0/docs/format\r\n\tsettings.style = { fontSize: '1.5rem', textAlign: 'center', ...settings.style };\r\n\tsettings.format = settings.format || 'dd.MM.yyyy HH:mm:ss';\r\n\tsettings.refresh = settings.format.indexOf('s') > -1 ? 1000 : (settings.format.indexOf('i') > -1 ? 60*1000 : 60*60*1000);\r\n\t\r\n\tuseEffect(() => {\r\n\t\tclearTimeout(refTimer.current);\r\n\t\trefTimer.current = setTimeout(() => setDateTime(format(new Date(), settings.format, { locale: locales[i18n.getLanguage()] })), settings.refresh);\r\n\t\t\r\n\t\t//\r\n\t\tif (Settings.getSetting('iobroker').latitude && Settings.getSetting('iobroker').longitude) {\r\n\t\t\tsetSunrise(getSunrise(Settings.getSetting('iobroker').latitude, Settings.getSetting('iobroker').longitude));\r\n\t\t\tsetSunset(getSunset(Settings.getSetting('iobroker').latitude, Settings.getSetting('iobroker').longitude));\r\n\t\t}\r\n\t\t\r\n\t\tif (Settings.getSetting('iobroker').city) {\r\n\t\t\tsetCity(Settings.getSetting('iobroker').city);\r\n\t\t}\r\n\t\t\r\n\t}, [settings]);\r\n\t\r\n\treturn (\r\n\r\n<div style={settings.style}>\r\n\t{i18n.t('%DateTime').replace(/%DateTime/, DateTime)}\r\n\t\r\n\t{settings.sun !== false && <div style={{ margin: '5px 0', fontSize: '1.2rem' }}>\r\n\t\t\r\n\t\t<span className=\"mdi mdi-city-variant-outline\"></span> {city ? city : <CircularProgress size=\"1.2rem\" />}\r\n\t\t<span style={{ margin: '0 10px' }}></span>\r\n\t\t\r\n\t\t<span className=\"mdi mdi-weather-sunset-up\"></span> {sunrise ? format(sunrise, 'HH:mm') : <CircularProgress size=\"1.2rem\" />}\r\n\t\t<span style={{ margin: '0 10px' }}></span>\r\n\t\t\r\n\t\t<span className=\"mdi mdi-weather-sunset-down\"></span> {sunset ? format(sunset, 'HH:mm') : <CircularProgress size=\"1.2rem\" />}\r\n\t</div>\r\n\t}\r\n\t\r\n</div>\r\n\r\n\t);\r\n}\r\n\r\nexport const ModuleSettings = {\r\n\tnoDevicesAllowed: true,\r\n\ttitle: i18n.t('Time'),\r\n\ticon: 'clock-outline'\r\n}\r\n\r\nexport const ModuleDescription = \"Das Modul dient der Anzeige des aktuellen Datums und Zeit.\";\r\nexport const ModuleScreenshots = ['DateTime1.png'];\r\n\r\nexport const ModuleConfig = [\r\n\t{\r\n\t\t'parameter': 'style',\r\n\t\t'label': {\r\n\t\t\t'en': 'Style of the text',\r\n\t\t\t'de': 'Style des Textes'\r\n\t\t},\r\n\t\t'description': {\r\n\t\t\t'en': 'CSS statements in javascript notation',\r\n\t\t\t'de': 'CSS-Anweisungen in Javascript Syntax'\r\n\t\t},\r\n\t\t'val': '{ fontSize: \"1.5rem\", textAlign: \"center\" }'\r\n\t},\r\n\t{\r\n\t\t'parameter': 'format',\r\n\t\t'label': {\r\n\t\t\t'en': 'Date/Time format',\r\n\t\t\t'de': 'Format des Datums / Uhrzeit'\r\n\t\t},\r\n\t\t'description': {\r\n\t\t\t'en': 'For possible format values, see date-fns documentation',\r\n\t\t\t'de': 'Für mögliche Werte, siehe date-fns Dokumentation'\r\n\t\t},\r\n\t\t'link': 'https://date-fns.org/v2.9.0/docs/format',\r\n\t\t'val': 'dd.MM.yyyy HH:mm:ss'\r\n\t},\r\n\t{\r\n\t\t'parameter': 'sun',\r\n\t\t'label': {\r\n\t\t\t'en': 'Show times of sunrise and -set',\r\n\t\t\t'de': 'Zeigt Zeiten für Sonnenauf- und -untergang'\r\n\t\t},\r\n\t\t'type': 'Switch',\r\n\t\t'val': true\r\n\t}\r\n]\r\n","import React, { useState, useEffect, useRef, useCallback } from 'react'\r\nimport clsx from 'clsx'\r\n\r\nimport L from 'leaflet'\r\nimport { Map as LeafletMap, TileLayer, Marker as LeafletMarker, Tooltip as LeafletTooltip } from 'react-leaflet'\r\n\r\nimport Log from '../Log'\r\nimport Settings from '../Settings'\r\nimport i18n from '../i18n'\r\n\r\nimport Box from '@material-ui/core/Box'\r\nimport Typography from '@material-ui/core/Typography'\r\nimport Tooltip from '@material-ui/core/Tooltip'\r\nimport Avatar from '@material-ui/core/Avatar'\r\n\r\n\r\n/*\r\n * STYLES\r\n */\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nconst useStyles = makeStyles(theme => ({\r\n\tmap: {\r\n\t\twidth: '100%',\r\n\t\theight: '100%'\r\n\t},\r\n\tmapOverview: {\r\n\t\tcolor: '#666',\r\n\t\tposition: 'absolute',\r\n\t\tleft: 0,\r\n\t\tbottom: 0,\r\n\t\twidth: '100%',\r\n\t\theight: '60px',\r\n\t\tzIndex: 999,\r\n\t\tdisplay: 'flex',\r\n\t\talignItems: 'center',\r\n\t\t\r\n\t\t'& > *': {\r\n\t\t\tmargin: theme.spacing(1),\r\n\t\t\tcursor: 'pointer',\r\n\t\t},\r\n\t},\r\n\tmapIconContainer: {\r\n\t},\r\n\tmapIconParent: {\r\n\t\tbackgroundColor: '#fff',\r\n\t\tboxShadow: '0 0 0 8px rgba(255, 255, 255, 0.3)',\r\n\t\tborderRadius: '50%',\r\n\t\twidth: '100%',\r\n\t\theight: '100%'\r\n\t},\r\n\tmapIcon: {\r\n\t\tfontSize: '2rem',\r\n\t\tcolor: theme.palette.primary.main,\r\n\t\ttransform: 'translate3d(4px, -4px,0)', /* for fontSize: '2.3rem' -> 'translate3d(2px, -8px,0)', */\r\n\t\tdisplay: 'block',\r\n\t\t\r\n\t\t'&:after': {\r\n\t\t\tcontent: '\"\"',\r\n\t\t\tdisplay: 'block',\r\n\t\t\tpadding: '50% 0%'\r\n\t\t}\r\n\t},\r\n\tmapTooltip: {\r\n\t}\r\n}));\r\n\r\n\r\nexport default function Map(props) {\r\n\tconst { settings, devices } = props;\r\n\tconst classes = useStyles();\r\n\t\r\n\tconst [zoom,] = useState(settings.defaultZoom);\r\n\tconst [position,] = useState(settings.defaultPosition ? (Array.isArray(settings.defaultPosition) ? settings.defaultPosition : settings.defaultPosition.split(',')) : [ Settings.getSetting('iobroker').latitude, Settings.getSetting('iobroker').longitude ]);\r\n\tconst [markers, setMarkers] = useState({});\r\n\t\r\n\t// map instance\r\n\tconst map = useRef();\r\n\tconst memoizedMapInitialised = useCallback(function() {map.current = this}, [],);\r\n\t\r\n\t// Marker click in overview\r\n\tconst memoizedHandleClick = useCallback(flyTo => map.current.flyTo(flyTo.split(',')), [],);\r\n\t\r\n\t// state change\r\n\tconst stateChange = (stateKey, state, device) => {\r\n\t\t\r\n\t\tif (stateKey === 'position') {\r\n\t\t\t\r\n\t\t\tsetMarkers(prevMarkers => {\r\n\t\t\t\tif (!prevMarkers[device.id] || prevMarkers[device.id].position !== state.val) {\r\n\t\t\t\t\tdevice.options.position = state.val;\r\n\t\t\t\t\treturn { ...prevMarkers, [device.id]: device };\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\treturn prevMarkers;\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\t\r\n\t// get gps position coordinates\r\n\tuseEffect(() => {\r\n\t\tdevices.forEach(device => {\r\n\t\t\t\r\n\t\t\t// request device state\r\n\t\t\tdevice.requestDeviceState('position').catch(err => {\r\n\t\t\t\tLog._('Modules (Map)', err.message, 'error', true, err.stack)\r\n\t\t\t\t\r\n\t\t\t\tsetMarkers(prevMarkers => {\r\n\t\t\t\t\tif (!prevMarkers[device.id]) {\r\n\t\t\t\t\t\treturn { ...prevMarkers, [device.id]: null };\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t\treturn prevMarkers;\r\n\t\t\t\t});\r\n\t\t\t});\r\n\t\t\t\r\n\t\t\t// listen for updates\r\n\t\t\tdevice.listen(stateChange);\r\n\t\t});\r\n\t\t\r\n\t\t// componentWillUnmount\r\n\t\treturn () => devices.forEach(device => device.unlisten(stateChange));\r\n\t\t\r\n\t}, [devices]);\r\n\t\r\n\t// add markers\r\n\tlet mapMarkers = [], mapOverview = [];\r\n\tif (devices.length > 0 && devices.length === Object.keys(markers).length) {\r\n\t\t\r\n\t\tfor (let key in markers) {\r\n\t\t\tlet device = markers[key];\r\n\t\t\tif (device !== null) {\r\n\t\t\t\tlet marker = <Marker key={'marker-' + device.id} position={device.options.position || ''} device={device} settings={settings.component} />\r\n\t\t\t\tmapMarkers.push(marker);\r\n\t\t\t\t\r\n\t\t\t\tlet item = null;\r\n\t\t\t\tif (device.attributes.avatar) {\r\n\t\t\t\t\titem = <Avatar key={'overview-' + device.id} alt={device.name} src={device.attributes.avatar} onClick={() => memoizedHandleClick(device.options.position)} />\r\n\t\t\t\t}\r\n\t\t\t\telse {\r\n\t\t\t\t\tlet state = device.getDeviceState();\r\n\t\t\t\t\tconst icon = device.getIcon(null, state && state.val !== undefined ? state.val : null);\r\n\t\t\t\t\tconst styles = device.getStyle('icon', null, state && state.val !== undefined ? state.val : null);\r\n\t\t\t\t\t\r\n\t\t\t\t\tconsole.log(state && state.val !== undefined ? state.val : null);\r\n\t\t\t\t\tconsole.log(styles);\r\n\t\t\t\t\t\r\n\t\t\t\t\titem = <Avatar style={styles} key={'overview-' + device.id} alt={device.name} onClick={() => memoizedHandleClick(device.options.position)}><span className={clsx('mdi mdi-' + icon)}></span></Avatar>\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tmapOverview.push(<Tooltip key={'tooltip-' + device.id} title={device.name} aria-label={device.name} arrow>{item}</Tooltip>);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\t\r\n\treturn (\r\n\r\n<React.Fragment>\r\n\t<Box className={classes.mapOverview}>\r\n\t\t<Typography>{i18n.t('Jump to')}:</Typography>\r\n\t\t{mapOverview}\r\n\t</Box>\r\n\t<LeafletMap useFlyTo={true} center={position} zoom={zoom} className={classes.map} whenReady={memoizedMapInitialised}>\r\n\t\t<TileLayer\r\n\t\t\tattribution='&amp;copy <a href=\"http://osm.org/copyright\">OpenStreetMap</a> contributors'\r\n\t\t\turl='https://{s}.tile.osm.org/{z}/{x}/{y}.png'\r\n\t\t\t/>\r\n\t\t\r\n\t\t{mapMarkers}\r\n\t</LeafletMap>\r\n</React.Fragment>\r\n\r\n\t);\r\n}\r\n\r\n\r\nfunction Marker(props) {\r\n\tconst { position, device, settings } = props;\r\n\tconst classes = useStyles();\r\n\t\r\n\tlet markerIcon = null, offset = 40;\r\n\tLog._('Modules (Map)', 'Marker for ' + device.function + ' ' + device.name + ' added to map.');\r\n\t\r\n\t// Marker with avatar / picture\r\n\tif (device.attributes && device.attributes.avatar && device.attributes.avatar.substr(0, 11) === 'data:image/') {\r\n\t\tmarkerIcon = L.divIcon({\r\n\t\t\tclassName: classes.mapIconContainer,\r\n\t\t\thtml: '<img src=\"' + device.attributes.avatar + '\" class=\"' + classes.mapIconParent + '\" />',\r\n\t\t\ticonSize: [ 64, 64 ]\r\n\t\t});\r\n\t}\r\n\t\r\n\t// Marker with Icon\r\n\telse {\r\n\t\toffset = 30;\r\n\t\tlet state = device.getDeviceState();\r\n\t\tconst icon = device.getIcon(null, state && state.val !== undefined ? state.val : null);\r\n\t\tconst styles = device.getStyle('icon', null, state && state.val !== undefined ? state.val : null);\r\n\t\t\r\n\t\tconsole.log(styles); \r\n\t\tconst useStyles = makeStyles({root: styles}, {name:'testi'});\r\n\t\tconsole.log(useStyles.root); \r\n\t\t\r\n\t\tmarkerIcon = L.divIcon({\r\n\t\t\tclassName: classes.mapIconContainer,\r\n\t\t\thtml: '<div class=\"' + clsx(classes.mapIconParent) + '\"><span class=\"' + clsx(classes.mapIcon, 'mdi mdi-' + icon) + '\"></span></div>',\r\n\t\t\ticonSize: [ 40, 40 ]\r\n\t\t});\r\n\t}\r\n\t\r\n\t// Marker MouseOver / MouseOut (bring tooltip to front if markers overlay)\r\n\tconst memoizedHandleMouseEvent = useCallback(function() {this.closeTooltip().openTooltip()}, [],);\r\n\r\n\treturn (\r\n\r\n<LeafletMarker riseOnHover={true} position={Array.isArray(position) ? position : position.split(',')} icon={markerIcon} onMouseOver={memoizedHandleMouseEvent}>\r\n\t<LeafletTooltip className={classes.mapTooltip} direction={settings.tooltipDirection || 'bottom'} permanent={settings.tooltipPermanent || true} offset={[0,offset]}>\r\n\t\t{device.name}\r\n\t</LeafletTooltip>\r\n</LeafletMarker>\r\n\r\n\t);\r\n}\r\n\r\n\r\nexport const ModuleDescription = \"Zeigt eine Karte von OpenStreetMap.\";\r\nexport const ModuleScreenshots = [];\r\n\r\nexport const ModuleConfig = [\r\n\t{\r\n\t\t'parameter': 'defaultZoom',\r\n\t\t'label': {\r\n\t\t\t'en': 'initial map zoom',\r\n\t\t\t'de': 'initialer Zoom der Karte'\r\n\t\t},\r\n\t\t'type': 'Number',\r\n\t\t'val': 10\r\n\t},\r\n\t{\r\n\t\t'parameter': 'defaultPosition',\r\n\t\t'label': {\r\n\t\t\t'en': 'initial map position',\r\n\t\t\t'de': 'initiale Position auf der Karte'\r\n\t\t},\r\n\t\t'description': {\r\n\t\t\t'en': 'Separate latitude and longitude via comma (e.g. 53.550383, 9.992376)',\r\n\t\t\t'de': 'Latitude und Longitude mit Komma separiert (z. B. 53.550383, 9.992376)'\r\n\t\t},\r\n\t\t'val': ''\r\n\t},\r\n\t{\r\n\t\t'parameter': 'tooltipDirection',\r\n\t\t'label': {\r\n\t\t\t'en': 'Direction tooltip will open',\r\n\t\t\t'de': 'Richtung in die der Tooltip öffnet'\r\n\t\t},\r\n\t\t'description': {\r\n\t\t\t'en': 'possible directions to open: auto, center, top, left, right or bottom',\r\n\t\t\t'de': 'mögliche Werte: auto, center, top, left, right or bottom'\r\n\t\t},\r\n\t\t'val': ''\r\n\t},\r\n\t{\r\n\t\t'parameter': 'tooltipPermanent',\r\n\t\t'label': {\r\n\t\t\t'en': 'permanent tooltip',\r\n\t\t\t'de': 'Permanenter Tooltip'\r\n\t\t},\r\n\t\t'description': {\r\n\t\t\t'en': 'Option to keep tooltip permanently open (true) or only open on mouse-over (false)',\r\n\t\t\t'de': 'Angabe ob der Tooltip permanent ist (true) oder nur beim rüberfahren mit der Maus gezeigt wird (false)'\r\n\t\t},\r\n\t\t'type': 'Switch',\r\n\t\t'val': true\r\n\t}\r\n]\r\n","import React from 'react'\r\n\r\nimport StateList, { ModuleConfig as StateListConfig } from './StateList'\r\n\r\n\r\nexport default function StateListHorizontal(props) {\r\n\treturn <StateList horizontal={true} {...props} />\r\n}\r\n\r\n\r\nexport const ModuleDescription = \"Zeigt eine Liste von States horizontal an\";\r\nexport const ModuleScreenshots = ['StateListHorizontal1.png'];\r\n\r\nexport const ModuleConfig = StateListConfig","import React, { useState, useEffect } from 'react'\r\n\r\nimport Log from '../Log'\r\nimport Connection from '../Connection'\r\nimport i18n from '../i18n'\r\n\r\nimport Grid from '@material-ui/core/Grid'\r\nimport Paper from '@material-ui/core/Paper'\r\nimport Typography from '@material-ui/core/Typography'\r\n\r\n\r\n/*\r\n * STYLES\r\n */\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nconst useStyles = makeStyles(theme => ({\r\n\tpaper: {\r\n\t\twidth: 100,\r\n\t\theight: 160,\r\n\t\tpadding: 5,\r\n\t\ttextAlign: 'center',\r\n\t}\r\n}));\r\n\r\n\r\nexport default function Weather(props) {\r\n\tconst { settings } = props;\r\n\tconst classes = useStyles();\r\n\t\r\n\tconst [data,setData] = useState(null);\r\n\tuseEffect(() => {\r\n\t\t\r\n\t\tConnection.getConnection.getRemoteResource(settings.url).then(\r\n\t\t\tresponse => {\r\n\t\t\t\t\r\n\t\t\t\tif (response.statusCode === 200) {\r\n\t\t\t\t\tsetData(JSON.parse(response.body));\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\terr => Log._('Modules (Weather)', err.message, 'error', true, err.stack)\r\n\t\t);\r\n\t\t\r\n\t}, [settings.url]);\r\n\t\r\n\tlet weatherForecast = [];\r\n\t//console.log(data);\r\n\t\r\n\tif (!data) {\r\n\t\treturn null;\r\n\t}\r\n\telse {\r\n\t\tfor (let day in data.day) {\r\n\t\t\tlet forecast = data.day[day];\r\n\t\t\tforecast.title = day === 1 ? i18n.t('today') : (day === 2 ? i18n.t('tomorrow') : forecast.name);\r\n\t\t\t\r\n\t\t\tconst dailyForecast = (\r\n\r\n<Grid key={'day-' + day} item>\r\n\t<Paper className={classes.paper}>\r\n\t\t<Typography variant=\"body1\">\r\n\t\t\t{forecast.title}\r\n\t\t</Typography>\r\n\t\t<Typography variant=\"caption\">\r\n\t\t\t{forecast.date}\r\n\t\t</Typography>\r\n\r\n\r\n\t</Paper>\r\n</Grid>\r\n\r\n\t\t\t);\r\n\t\t\t\r\n\t\t\tweatherForecast.push(dailyForecast);\r\n\t\t}\r\n\t}\r\n\t\r\n\treturn (\r\n\r\n<Grid container justify=\"space-between\" spacing={1}>\r\n\t{weatherForecast}\r\n\t\r\n</Grid>\r\n\r\n\t);\r\n}\r\n\r\nexport const ModuleSettings = {\r\n\tnoDevicesAllowed: true,\r\n\ttitle: i18n.t('Weather'),\r\n\ticon: 'weather-partly-cloudy'\r\n}\r\n\r\n\r\nexport const ModuleDescription = \"Zeigt die Wetter-Vorschau an.\";\r\nexport const ModuleScreenshots = [];\r\n\r\nexport const ModuleConfig = [\r\n]\r\n","import i18n from '../../i18n'\r\n\r\n/*\r\n * i18n\r\n */\r\nlet translations = require('./door.' + i18n.getLanguage()).default\r\ni18n.setTranslation(i18n.getLanguage(), translations);\r\n\r\n\r\nexport default {\r\n\tdescription: {\r\n\t\t'en': 'Doors',\r\n\t\t'de': 'Türen',\r\n\t},\r\n\tconfigurations: {\r\n\t\topen: {\r\n\t\t\ticon: {\r\n\t\t\t\ttrue: 'door-open',\r\n\t\t\t\tfalse: 'door-closed'\r\n\t\t\t},\r\n\t\t\tdisplay: {\r\n\t\t\t\ttrue: i18n.t('door#open#true'),\r\n\t\t\t\tfalse: i18n.t('door#open#false')\r\n\t\t\t},\r\n\t\t},\r\n\t\tlock: {\r\n\t\t}\r\n\t},\r\n\tcomponents: {\r\n\t},\r\n\tactions: {\r\n\t}\r\n}","import React from 'react'\r\n\r\nimport i18n from '../../i18n'\r\nimport defaults from '../defaults'\r\n\r\n\r\n/*\r\n * i18n\r\n */\r\nlet translations = require('./heating.' + i18n.getLanguage()).default\r\ni18n.setTranslation(i18n.getLanguage(), translations);\r\n\r\n\r\n/*\r\n * COMPONENTS\r\n *\r\n */\r\nfunction HeatingSetTemperatureComponent(props) {\r\n\tconst Level = defaults.components.LevelComponent;\r\n\treturn (\r\n\t\t<Level min={0} max={35} {...props} />\r\n\t);\r\n}\r\n\r\n\r\n\r\nexport default {\r\n\tdescription: {\r\n\t\t'en': 'Heating',\r\n\t\t'de': 'Heizung',\r\n\t},\r\n\tconfigurations: {\r\n\t\ttemperature: {\r\n\t\t\tvalue: val => val.toFixed(1),\r\n\t\t\tunit: ' °C',\r\n\t\t\ticon: 'radiator',\r\n\t\t},\r\n\t\tsetTemperature: {\r\n\t\t\tunit: ' °C',\r\n\t\t\ticon: 'thermometer-chevron-up'\r\n\t\t},\r\n\t\thumidity: {\r\n\t\t\tunit: ' %'\r\n\t\t},\r\n\t\tboost: {\r\n\t\t\ticon: 'radiator'\r\n\t\t}\r\n\t},\r\n\tcomponents: {\r\n\t\tsetTemperature: HeatingSetTemperatureComponent\r\n\t},\r\n\tactions: {\r\n\t\tboost: defaults.actions.PowerAction\r\n\t}\r\n}","import i18n from '../../i18n'\r\n\r\n\r\n/*\r\n * i18n\r\n */\r\nlet translations = require('./location.' + i18n.getLanguage()).default\r\ni18n.setTranslation(i18n.getLanguage(), translations);\r\n\r\n\r\nexport default {\r\n\tdescription: {\r\n\t\t'en': 'locations',\r\n\t\t'de': 'Orte',\r\n\t},\r\n\tconfigurations: {\r\n\t\tposition: {\r\n\t\t\ticon: 'map-marker'\r\n\t\t},\r\n\t\tpresence: {\r\n\t\t\ticon: {\r\n\t\t\t\ttrue: 'map-marker-radius',\r\n\t\t\t\tfalse: 'map-marker-remove-outline'\r\n\t\t\t},\r\n\t\t\tdisplay: {\r\n\t\t\t\ttrue: i18n.t('location#presence#true'),\r\n\t\t\t\tfalse: i18n.t('location#presence#false'),\r\n\t\t\t},\r\n\t\t},\r\n\t\tusers: {\r\n\t\t\ticon: {\r\n\t\t\t\t'': 'account-group-outline',\r\n\t\t\t\t'default': 'account-group'\r\n\t\t\t},\r\n\t\t\tdisplay: {\r\n\t\t\t\t'': i18n.t('location#users#empty')\r\n\t\t\t},\r\n\t\t},\r\n\t},\r\n\tcomponents: {\r\n\t},\r\n\tactions: {\r\n\t}\r\n}","import i18n from '../../i18n'\r\n\r\n\r\n/*\r\n * i18n\r\n */\r\nlet translations = require('./user.' + i18n.getLanguage()).default\r\ni18n.setTranslation(i18n.getLanguage(), translations);\r\n\r\n\r\nexport default {\r\n\tdescription: {\r\n\t\t'en': 'users',\r\n\t\t'de': 'Benutzer',\r\n\t},\r\n\tconfigurations: {\r\n\t\tposition: {\r\n\t\t\ticon: 'map-marker'\r\n\t\t},\r\n\t\tlocation: {\r\n\t\t\ticon: 'account'\r\n\t\t},\r\n\t\tbattery: {\r\n\t\t}\r\n\t},\r\n\tcomponents: {\r\n\t},\r\n\tactions: {\r\n\t}\r\n}","import i18n from '../../i18n'\r\n\r\n\r\n/*\r\n * i18n\r\n */\r\nlet translations = require('./window.' + i18n.getLanguage()).default\r\ni18n.setTranslation(i18n.getLanguage(), translations);\r\n\r\n\r\nexport default {\r\n\tdescription: {\r\n\t\t'en': 'windows',\r\n\t\t'de': 'Fenster',\r\n\t},\r\n\tconfigurations: {\r\n\t\topen: {\r\n\t\t\ticon: {\r\n\t\t\t\ttrue: 'window-open-variant',\r\n\t\t\t\tfalse: 'window-closed-variant'\r\n\t\t\t},\r\n\t\t\tdisplay: {\r\n\t\t\t\ttrue: i18n.t('window#open#true'),\r\n\t\t\t\tfalse: i18n.t('window#open#false')\r\n\t\t\t},\r\n\t\t}\r\n\t},\r\n\tcomponents: {\r\n\t},\r\n\tactions: {\r\n\t}\r\n}","import React from 'react'\r\n\r\nimport Chip from '@material-ui/core/Chip'\r\nimport { TextAutoComplete } from './Text'\r\n\r\n\r\n/*\r\n * STYLES\r\n */\r\nimport { makeStyles } from '@material-ui/core/styles'\r\nconst useStyles = makeStyles((theme) => ({\r\n\tchip: {\r\n\t\tmargin: theme.spacing(0.5),\r\n\t},\r\n}));\r\n\r\n\r\n/*\r\n *\r\n */\r\nexport default function InputChip(props) {\r\n\tconst { icon, color, label, onDelete, deleteIcon } = props;\r\n\tconst classes = useStyles(props);\r\n\t\r\n\tconst handleDelete = () => onDelete && onDelete();\r\n\treturn (\r\n\t\t<Chip\r\n\t\t\tclassName={classes.chip}\r\n\t\t\ticon={icon}\r\n\t\t\tcolor={color}\r\n\t\t\tlabel={label}\r\n\t\t\tonDelete={handleDelete}\r\n\t\t\tdeleteIcon={deleteIcon}\r\n\t\t\t/>\r\n\t)\r\n}\r\n\r\n/*\r\n *\r\n */\r\nexport function InputChips(props) {\r\n\tconst { list, ...otherProps } = props;\r\n\t\r\n\tconst chips = Array.isArray(list) ? list : list.split(',');\r\n\treturn chips.map(chip => typeof chip === 'string' ? InputChip({ label: chip, ...otherProps }) : InputChip({ ...chip, ...otherProps }));\r\n}\r\n\r\n/*\r\n *\r\n */\r\nexport function InputChipsField(props) {\r\n\tconst { optionKey, ...otherProps } = props;\r\n\t\r\n\treturn (\r\n\t\t<TextAutoComplete\r\n\t\t\tmultiple\r\n\t\t\tfreeSolo\r\n\t\t\tgetOptionLabel={option => optionKey ? option[optionKey] : option}\r\n\t\t\t{...otherProps}\r\n\t\t\t/>\r\n\t);\r\n}\r\n","import React from 'react'\r\nimport clsx from 'clsx'\r\nimport i18n from '../../i18n'\r\n\r\nimport Divider from '@material-ui/core/Divider'\r\nimport Grid from '@material-ui/core/Grid'\r\nimport { MuiPickersUtilsProvider } from '@material-ui/pickers'\r\nimport Typography from '@material-ui/core/Typography'\r\n\r\n/*\r\n * STYLES\r\n */\r\nimport { makeStyles } from '@material-ui/core/styles'\r\nconst useStyles = makeStyles((theme) => ({\r\n\tnoPadding: {\r\n\t\tpadding: '0 !important'\r\n\t},\r\n\tFieldset: {\r\n\t\tpadding: theme.spacing(0.5, 3, 2, 3)\r\n\t},\r\n\tFieldsetItem: {\r\n\t\tpadding: theme.spacing(2, 0, 1, 0)\r\n\t},\r\n\tLegend: {\r\n\t\tfontSize: '1.2rem',\r\n\t\tcolor: theme.palette.primary.dark,\r\n\t\tpadding: theme.spacing(1, 3),\r\n\t},\r\n}));\r\n\r\n/*\r\n *\r\n */\r\nexport default function Fieldset(props) {\r\n\tconst { children, noPadding, ...otherProps } = props;\r\n\tconst classes = useStyles();\r\n\t\r\n\treturn (\r\n\t\t<>\r\n\t\t\t<FieldsetLegend {...otherProps} />\r\n\t\t\t<Grid container className={clsx(classes.Fieldset, noPadding && classes.noPadding)} {...otherProps}>\r\n\t\t\t\t{children}\r\n\t\t\t</Grid>\r\n\t\t</>\r\n\t);\r\n}\r\n\r\n/*\r\n *\r\n */\r\nexport function FieldsetItem(props) {\r\n\tconst { container, children, columns } = props;\r\n\tconst classes = useStyles();\r\n\t\r\n\treturn (\r\n\t\t<Grid\r\n\t\t\tcontainer={container || false}\r\n\t\t\titem\r\n\t\t\tclassName={classes.FieldsetItem}\r\n\t\t\txs={columns || 12}\r\n\t\t\t{...props}\r\n\t\t\t>\r\n\t\t\t\r\n\t\t\t{children}\r\n\t\t</Grid>\r\n\t);\r\n}\r\n\r\n/*\r\n *\r\n */\r\nexport function FieldsetLegend(props) {\r\n\tconst classes = useStyles();\r\n\treturn !props.label ? null : (\r\n\t\t<>\r\n\t\t\t<Typography className={classes.Legend} variant=\"h3\">{props.label}</Typography>\r\n\t\t\t<Divider />\r\n\t\t</>\r\n\t);\r\n}\r\n\r\n/*\r\n *\r\n */\r\nexport function Form(props) {\r\n\tconst { children } = props;\r\n\t\r\n\treturn (\r\n\t\t<MuiPickersUtilsProvider utils={i18n.getLocaleDateAdapter()} locale={i18n.getLocale()}>\r\n\t\t\t{children}\r\n\t\t</MuiPickersUtilsProvider>\r\n\t);\r\n}","/**\r\n *\r\n *\r\n */\r\nfunction HsvToRgb(h, s = 1, v = 1) {\r\n\tif (Array.isArray(h)) {\r\n\t\tv = h[2];\r\n\t\ts = h[1];\r\n\t\th = h[0];\r\n\t}\r\n\telse if (typeof h === 'string' && h.indexOf(',')) {\r\n\t\t[h, s, v] = h.split(',');\r\n\t}\r\n\t\r\n\tif (h > 1) {\r\n\t\th = h/360;\r\n\t}\r\n\t\r\n\tlet r, g, b, i, f, p, q, t;\r\n\t\r\n\ti = Math.floor(h * 6);\r\n\tf = h * 6 - i;\r\n\tp = v * (1 - s);\r\n\tq = v * (1 - f * s);\r\n\tt = v * (1 - (1 - f) * s);\r\n\t\r\n\tswitch (i % 6) {\r\n\t\tcase 0:\r\n\t\t\tr = v;\r\n\t\t\tg = t;\r\n\t\t\tb = p;\r\n\t\t\tbreak;\r\n\t\t\t\r\n\t\tcase 1:\r\n\t\t\tr = q;\r\n\t\t\tg = v;\r\n\t\t\tb = p;\r\n\t\t\tbreak;\r\n\t\t\r\n\t\tcase 2:\r\n\t\t\tr = p;\r\n\t\t\tg = v;\r\n\t\t\tb = t;\r\n\t\t\tbreak;\r\n\t\t\r\n\t\tcase 3:\r\n\t\t\tr = p;\r\n\t\t\tg = q;\r\n\t\t\tb = v;\r\n\t\t\tbreak;\r\n\t\t\r\n\t\tcase 4:\r\n\t\t\tr = t;\r\n\t\t\tg = p;\r\n\t\t\tb = v;\r\n\t\t\tbreak;\r\n\t\t\r\n\t\tcase 5:\r\n\t\t\tr = v;\r\n\t\t\tg = p;\r\n\t\t\tb = q;\r\n\t\t\tbreak;\r\n\t\t\r\n\t\tdefault: // for webpack\r\n\t\t\tbreak;\r\n\t}\r\n\t\r\n\treturn [\r\n\t\tMath.round(r * 255),\r\n\t\tMath.round(g * 255),\r\n\t\tMath.round(b * 255)\r\n\t];\r\n}\r\n\r\n\r\n/**\r\n *\r\n *\r\n */\r\nfunction RgbToHex(r, g, b) {\r\n\tif (Array.isArray(r)) {\r\n\t\tb = r[2];\r\n\t\tg = r[1];\r\n\t\tr = r[0];\r\n\t}\r\n\telse if (typeof r === 'string' && r.indexOf(',')) {\r\n\t\t[r, g, b] = r.split(',');\r\n\t}\r\n\t\r\n\tr = parseInt(r).toString(16);\r\n\tg = parseInt(g).toString(16);\r\n\tb = parseInt(b).toString(16);\r\n\t\r\n\tif (r.length === 1) r = '0' + r;\r\n\tif (g.length === 1) g = '0' + g;\r\n\tif (b.length === 1) b = '0' + b;\r\n\t\r\n\treturn \"#\" + r + g + b;\r\n}\r\n\r\n\r\nexport default {\r\n\tHsvToRgb,\r\n\tRgbToHex\r\n}","import React, { useState, useEffect } from 'react'\r\nimport { HuePicker, SketchPicker as ColorPicker } from 'react-color'\r\n\r\nimport Log from '../../Log'\r\nimport i18n from '../../i18n'\r\nimport helpers from '../../helpers/colorConverter'\r\nimport defaults from '../defaults'\r\n\r\n\r\n/*\r\n * i18n\r\n */\r\nlet translations = require('./light.' + i18n.getLanguage()).default\r\ni18n.setTranslation(i18n.getLanguage(), translations);\r\n\r\n\r\n/*\r\n * ACTIONS\r\n *\r\n */\r\nfunction LightLevelAction(props) {\r\n\tconst { device, stateKey, stateVal } = props;\r\n\t\r\n\tconst onChange = (e) => {\r\n\t\tsetChecked(e.target.checked);\r\n\t\tdevice.setDeviceState(stateKey, e.target.checked ? ((device.getOption('defaultValue')) || 100) : 0).catch(err => Log._('Function (light)', err.message, 'error', true, err.stack));\r\n\t}\r\n\t\r\n\tconst [checked, setChecked] = useState(stateVal > 0);\r\n\tuseEffect(() => setChecked(stateVal > 0), [stateVal]);\r\n\t\r\n\t// only show percentage if device has a switch itself\r\n\tif (device.parent && device.parent.states.power) {\r\n\t\treturn <defaults.actions.Action {...props} stateVal={checked} onChange={onChange} />;\r\n\t}\r\n\t\r\n\treturn <defaults.actions.PowerAction {...props} stateVal={checked} onChange={onChange} />\r\n}\r\n\r\nfunction LightColorAction(props) {\r\n\tconst { stateKey, stateVal } = props;\r\n\t\r\n\tconst [colorSpace, setColorSpace] = useState(stateVal);\r\n\tuseEffect(() => setColorSpace(stateVal), [stateVal]);\r\n\t\r\n\tlet colors, labels = {};\r\n\tif (stateKey === 'rgb' && colorSpace) {\r\n\t\tcolors = colorSpace.split(',');\r\n\t\tlabels = { Red: colors[0], Green: colors[1], Blue: colors[2] };\r\n\t\t\r\n\t}\r\n\telse if (stateKey === 'hsv' && colorSpace) {\r\n\t\tcolors = colorSpace.split(',');\r\n\t\tlabels = { Hue: colors[0], Saturation: colors[1], Brightness: colors[2] };\r\n\t}\r\n\t\r\n\tconst Label = defaults.components.Label;\r\n\tlet label = [];\r\n\tfor (let key in labels) {\r\n\t\tlabel.push(<Label key={key} label={key + ' ' + labels[key]} br={true} />);\r\n\t}\r\n\t\r\n\treturn label;\r\n}\r\n\r\n\r\n/*\r\n * COMPONENTS\r\n *\r\n */\r\nfunction LightColorTemperatureComponent(props) {\r\n\tconst Level = defaults.components.LevelComponent;\r\n\treturn (\r\n\t\t<Level min={2000} max={6500} step={10} {...props} />\r\n\t);\r\n}\r\n\r\nfunction LightHueComponent(props) {\r\n\tconst { device, stateKey, stateVal, title } = props;\r\n\t\r\n\tconst onChangeComplete = (color, e) => {\r\n\t\tsetHue(Math.round(color.hsl.h));\r\n\t\tdevice.setDeviceState(stateKey, Math.round(color.hsl.h)).catch(err => Log._('Function (light)', err.message, 'error', true, err.stack));\r\n\t}\r\n\t\r\n\tconst [hue, setHue] = useState(stateVal);\r\n\tuseEffect(() => setHue(stateVal), [stateVal]);\r\n\t\r\n\tconst Component = defaults.components.Component;\r\n\tconst color = helpers.RgbToHex(helpers.HsvToRgb(hue));\r\n\treturn (\r\n\r\n<Component title={title || stateKey }>\r\n\t<HuePicker\r\n\t\tcolor={color}\r\n\t\twidth={'100%'}\r\n\t\tonChangeComplete={onChangeComplete}\r\n\t\t/>\r\n\t\t\r\n</Component>\r\n\r\n\t);\r\n}\r\n\r\nfunction LightColorComponent(props) {\r\n\tconst { device, stateKey, stateVal, title } = props;\r\n\t\r\n\tconst onChangeComplete = (color, e) => {\r\n\t\tcolor = color[stateKey];\r\n\t\t\r\n\t\t// RGB\r\n\t\tif (stateKey === 'rgb') {\r\n\t\t\tcolor = [color.r, color.g, color.b].join(',');\r\n\t\t}\r\n\t\t// HSV\r\n\t\telse if (stateKey === 'hsv') {\r\n\t\t\tcolor = [color.h, color.s, color.v].join(',');\r\n\t\t}\r\n\t\t\r\n\t\tdevice.setDeviceState(stateKey, color).catch(err => Log._('Function (light)', err.message, 'error', true, err.stack));\r\n\t};\r\n\t\r\n\tlet initialColor = stateVal || '#ffffff';\r\n\t\r\n\t// RGB\r\n\tif (stateKey === 'rgb') {\r\n\t\tinitialColor = helpers.RgbToHex(initialColor);\r\n\t}\r\n\t// HSV\r\n\telse if (stateKey === 'hsv') {\r\n\t\tinitialColor = helpers.RgbToHex(helpers.HsvToRgb(initialColor));\r\n\t}\r\n\t\r\n\tconst [colorSpace, setColorSpace] = useState(initialColor);\r\n\tuseEffect(() => {\r\n\t\t// RGB\r\n\t\tif (stateKey === 'rgb') {\r\n\t\t\tsetColorSpace(helpers.RgbToHex(stateVal));\r\n\t\t}\r\n\t\t// HSV\r\n\t\telse if (stateKey === 'hsv') {\r\n\t\t\tsetColorSpace(helpers.RgbToHex(helpers.HsvToRgb(stateVal)));\r\n\t\t}\r\n\t\t// HEX\r\n\t\telse if (stateKey === 'hex') {\r\n\t\t\tsetColorSpace(stateVal);\r\n\t\t}\r\n\t}, [stateKey, stateVal]);\r\n\t\r\n\tconst Component = defaults.components.Component;\r\n\treturn (\r\n\r\n<Component title={title || stateKey }>\r\n\t<ColorPicker\r\n\t\tcolor={colorSpace}\r\n\t\twidth={'100%'}\r\n\t\tonChangeComplete={onChangeComplete}\r\n\t\t/>\r\n\t\t\r\n</Component>\r\n\r\n\t);\r\n}\r\n\r\n\r\nconst color = {\r\n\ticon: {\r\n\t\t'default': 'palette',\r\n\t},\r\n\tunit: ' °'\r\n}\r\n\r\nexport default {\r\n\tdescription: {\r\n\t\t'en': 'lights',\r\n\t\t'de': 'Lichter',\r\n\t},\r\n\tconfigurations: {\r\n\t\tpower: {\r\n\t\t\ticon: {\r\n\t\t\t\t'true': 'lightbulb-on',\r\n\t\t\t\t'false': 'lightbulb-off-outline'\r\n\t\t\t},\r\n\t\t},\r\n\t\tlevel: {\r\n\t\t\tvalue: val => val > 0 && val <= 1 ? val * 100 : val,\r\n\t\t\tunit: val => val > 0 ? ' %' : null,\r\n\t\t\tstateStyle: {\r\n\t\t\t\t'0': {\r\n\t\t\t\t\t'color': '#999'\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\ticon: {\r\n\t\t\t\t'default': 'lightbulb-on',\r\n\t\t\t\t'0': 'lightbulb-off-outline'\r\n\t\t\t},\r\n\t\t\tdisplay: {\r\n\t\t\t\t'0': i18n.t('light#level#off')\r\n\t\t\t},\r\n\t\t},\r\n\t\tcolorTemperature: {\r\n\t\t\ticon: {\r\n\t\t\t\t'default': 'thermometer',\r\n\t\t\t},\r\n\t\t\tunit: ' °K'\r\n\t\t},\r\n\t\thue: color,\r\n\t\trgb: color,\r\n\t\thsv: color,\r\n\t\thex: color\r\n\t},\r\n\tcomponents: {\r\n\t\tlevel: defaults.components.LevelComponent,\r\n\t\tcolorTemperature: LightColorTemperatureComponent,\r\n\t\trgb: LightColorComponent,\r\n\t\thsv: LightColorComponent,\r\n\t\thex: LightColorComponent,\r\n\t\thue: LightHueComponent\r\n\t},\r\n\tactions: {\r\n\t\tpower: defaults.actions.PowerAction,\r\n\t\tlevel: LightLevelAction,\r\n\t\trgb: LightColorAction,\r\n\t\thsv: LightColorAction,\r\n\t\thex: LightColorAction\r\n\t}\r\n}","import React, { useState, useEffect } from 'react'\r\nimport clsx from 'clsx'\r\nimport color from 'color'\r\n\r\nimport Button from '@material-ui/core/Button'\r\nimport ButtonGroup from '@material-ui/core/ButtonGroup'\r\nimport ExpandLessIcon from '@material-ui/icons/ExpandLess'\r\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore'\r\nimport StopIcon from '@material-ui/icons/Stop'\r\n\r\nimport Log from '../../Log'\r\nimport i18n from '../../i18n'\r\nimport defaults from '../defaults'\r\nimport getActivityType from './blind-manufacturers'\r\n\r\n/*\r\n * STYLES\r\n */\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nconst useStyles = makeStyles(theme => ({\r\n\tvalue: props => ({\r\n\t\tfloat: 'left',\r\n\t\tlineHeight: '32px',\r\n\t\tmarginRight: '10px'\r\n\t}),\r\n\tborderLeftTransparent: {\r\n\t\tborderLeftColor: 'transparent !important'\r\n\t},\r\n\tborderLeftColor: {\r\n\t\tborderLeftColor: color(theme.palette.primary.main).alpha(0.5).rgb().toString() +  '!important'\r\n\t},\r\n\tborderRightTransparent: {\r\n\t\tborderRightColor: 'transparent !important'\r\n\t},\r\n\tborderRightColor: {\r\n\t\tborderRightColor: color(theme.palette.primary.main).alpha(0.5).rgb().toString() +  '!important'\r\n\t},\r\n\tborderRightColorSecondary: {\r\n\t\tborderRightColor: color(theme.palette.secondary.main).alpha(0.5).rgb().toString() +  '!important'\r\n\t}\r\n}));\r\n\r\n\r\n/*\r\n * i18n\r\n */\r\nlet translations = require('./blind.' + i18n.getLanguage()).default\r\ni18n.setTranslation(i18n.getLanguage(), translations);\r\n\r\n\r\n/*\r\n * ACTIONS\r\n *\r\n */\r\nfunction BlindLevelAction(props) {\r\n\tconst { device, state, stateKey } = props;\r\n\tconst classes = useStyles();\r\n\t\r\n\tconst onGoUp = () => {\r\n\t\tsetLevel(100);\r\n\t\tsetActivity(true);\r\n\t\tdevice.setDeviceState(stateKey, 100).catch(err => Log._('Function (blind)', err.message, 'error', true, err.stack));\r\n\t}\r\n\t\r\n\tconst onGoDown = () => {\r\n\t\tsetLevel(0);\r\n\t\tsetActivity(true);\r\n\t\tdevice.setDeviceState(stateKey, 0).catch(err => Log._('Function (blind)', err.message, 'error', true, err.stack));\r\n\t}\r\n\t\r\n\tconst onStop = () => {\r\n\t\tsetActivity(false);\r\n\t\tdevice.setDeviceState('activity', true).catch(err => Log._('Function (blind)', err.message, 'error', true, err.stack));\r\n\t}\r\n\t\r\n\t// level\r\n\tconst [level, setLevel] = useState(state.value);\r\n\tuseEffect(() => setLevel(state.value), [state]);\r\n\t\r\n\t// state change\r\n\tconst stateChange = (sKey, s, d) => {\r\n\t\t\r\n\t\tif (sKey === 'activity') {\r\n\t\t\tsetActivity(s.val);\r\n\t\t}\r\n\t}\r\n\t\r\n\t// activity\r\n\tconst [activity, setActivity] = useState(false);\r\n\tuseEffect(() => {\r\n\t\t\r\n\t\tif (device.states.activity && device.states.activity.state) {\r\n\t\t\tdevice.states.activity.state = typeof device.states.activity.state === 'string' ? { 'node': device.states.activity.state } : device.states.activity.state;\r\n\t\t\t\r\n\t\t\t// request device state\r\n\t\t\tdevice.requestDeviceState('activity', true).catch(err => Log._('Function (blind)', err.message, 'error', true, err.stack));\r\n\t\t\t\r\n\t\t\t// listen for updates\r\n\t\t\tdevice.listen(stateChange)\r\n\t\t}\r\n\t\t\r\n\t\t// componentWillUnmount\r\n\t\treturn () => device.unlisten(stateChange);\r\n\t\t\r\n\t}, [device, state]);\r\n\t\r\n\treturn (\r\n\r\n<React.Fragment>\r\n\t\r\n\t<div className={classes.value}>\r\n\t\t{level + state.unit}\r\n\t</div>\r\n\t\r\n\t<ButtonGroup size=\"small\">\r\n\t\t<Button color=\"primary\" className={clsx(activity !== null && (!activity ? classes.borderRightColor : classes.borderRightTransparent))} onClick={onGoUp}><ExpandLessIcon /></Button>\r\n\t\t{activity !== null && <Button color=\"secondary\" className={clsx(!activity ? [ classes.borderLeftTransparent, classes.borderRightTransparent ] : classes.borderRightColorSecondary)} onClick={onStop} disabled={!activity}><StopIcon /></Button>}\r\n\t\t<Button color=\"primary\" className={clsx(activity !== null && (!activity ? classes.borderLeftColor : classes.borderLeftTransparent))} onClick={onGoDown}><ExpandMoreIcon /></Button>\r\n\t</ButtonGroup>\r\n</React.Fragment>\r\n\r\n\t);\r\n}\r\n\r\n\r\nexport default {\r\n\tdescription: {\r\n\t\t'en': 'Shutters and Blinds',\r\n\t\t'de': 'Rollos oder Jalousien',\r\n\t},\r\n\tconfigurations: {\r\n\t\tlevel: {\r\n\t\t\tvalue: val => Math.round(val),\r\n\t\t\ticon: {\r\n\t\t\t\t'default': 'window-shutter-open',\r\n\t\t\t\t'>90': 'window-shutter-open',\r\n\t\t\t\t'<=90': 'window-shutter'\r\n\t\t\t}\r\n\t\t},\r\n\t\tlevel2: {\r\n\t\t\tvalue: val => Math.round(val),\r\n\t\t\tunit: ' %',\r\n\t\t\ticon: {\r\n\t\t\t\t'default': 'window-shutter-open',\r\n\t\t\t\t'>90': 'window-shutter-open',\r\n\t\t\t\t'<=90': 'window-shutter'\r\n\t\t\t}\r\n\t\t},\r\n\t\tactivity: {\r\n\t\t\tval: (val, stateKey, device) => getActivityType(device.options.manufacturer, val),\r\n\t\t\ticon: {\r\n\t\t\t\ttrue: 'pan-vertical',\r\n\t\t\t\tfalse: 'dots-vertical',\r\n\t\t\t},\r\n\t\t\tdisplay: {\r\n\t\t\t\ttrue: i18n.t('blind#activity#true'),\r\n\t\t\t\tfalse: i18n.t('blind#activity#false'),\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\tcomponents: {\r\n\t\tlevel2: defaults.components.LevelComponent\r\n\t},\r\n\tactions: {\r\n\t\tlevel: BlindLevelAction\r\n\t}\r\n}","export default function getActivityType(manufacturer, val) {\r\n\t\r\n\t// HomeMatic\r\n\tif (manufacturer === 'HomeMatic') {\r\n\t\t\r\n\t\tswitch(val) {\r\n\t\t\tcase 1: // UP\r\n\t\t\tcase 2: // DOWN\r\n\t\t\t\tval = true;\r\n\t\t\t\tbreak;\r\n\t\t\t\t\r\n\t\t\tcase 3: // STABLE\r\n\t\t\t\tval = false;\r\n\t\t\t\tbreak;\r\n\t\t\t\t\r\n\t\t\tdefault: // UNKNOWN\r\n\t\t\t\tval = null;\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\t}\r\n\t\r\n\t// Shelly\r\n\telse if (manufacturer === 'Shelly') {\r\n\t\t\r\n\t\tswitch(val) {\r\n\t\t\tcase 'open': // MOVING\r\n\t\t\tcase 'close': // MOVING\r\n\t\t\t\tval = true;\r\n\t\t\t\tbreak;\r\n\t\t\t\t\r\n\t\t\tcase 'stop': // MOVING\r\n\t\t\t\tval = false;\r\n\t\t\t\tbreak;\r\n\t\t\t\t\r\n\t\t\tdefault: // UNKNOWN\r\n\t\t\t\tval = null;\r\n\t\t\t\tbreak;\r\n\t\t}\r\n\t}\r\n\t\r\n\treturn val;\r\n}","import React from 'react'\r\nimport clsx from 'clsx'\r\n\r\nimport Log from '../Log'\r\n\r\nimport helpers from '../helpers/timeConverter'\r\n\r\nimport Divider from '@material-ui/core/Divider'\r\n//import IconButton from '@material-ui/core/IconButton'\r\nimport Fab from '@material-ui/core/Fab'\r\nimport PlayIcon from '@material-ui/icons/PlayArrow'\r\nimport PauseIcon from '@material-ui/icons/Pause'\r\nimport StopIcon from '@material-ui/icons/Stop'\r\nimport SkipPreviousIcon from '@material-ui/icons/SkipPrevious'\r\nimport SkipNextIcon from '@material-ui/icons/SkipNext'\r\n\r\n\r\n/*\r\n * STYLES\r\n */\r\nimport { withStyles } from '@material-ui/core/styles';\r\nconst styles = theme => ({\r\n\tdivider: {\r\n\t\tmargin: '15px -16px'\r\n\t},\r\n\tcontainer: {\r\n\t\tmargin: theme.spacing(0, -2),\r\n\t},\r\n\tnoHeader: {\r\n\t\tmarginTop: theme.spacing(-4),\r\n\t},\r\n\timage: {\r\n\t\theight: '200px',\r\n\t\tdisplay: 'flex',\r\n\t\talignItems: 'flex-end',\r\n\t\tbackgroundPosition: 'center',\r\n\t\tcursor: 'pointer'\r\n\t},\r\n\tnoImage: {\r\n\t\tbackgroundColor: theme.palette.primary.main,\r\n\t\tdisplay: 'flex',\r\n\t\tcursor: 'pointer'\r\n\t},\r\n\tinformation: {\r\n\t\tbackgroundColor: theme.palette.primary.main + '66',\r\n\t\tcolor: '#fff',\r\n\t\tpadding: '10px',\r\n\t\tmargin: 0,\r\n\t\twidth: '100%',\r\n\t\tminHeight: '45px'\r\n\t},\r\n\tinformationLeft: {\r\n\t\twidth: '80%',\r\n\t\tfloat: 'left',\r\n\t\tmargin: 0\r\n\t},\r\n\tinformationRight: {\r\n\t\twidth: '19%',\r\n\t\tfloat: 'right',\r\n\t\tmargin: 0,\r\n\t\ttextAlign: 'right'\r\n\t},\r\n\tlength: {\r\n\t\tbackgroundColor: theme.palette.primary.main,\r\n\t\twidth: '100%',\r\n\t\theight: '7px',\r\n\t},\r\n\tlengthBar: {\r\n\t\tbackgroundColor: theme.palette.secondary.main,\r\n\t\theight: '100%',\r\n\t},\r\n\tcontrols: {\r\n\t\tdisplay: 'flex',\r\n\t\talignItems: 'stretch'\r\n\t},\r\n\tcontrolsBox: {\r\n\t\tdisplay: 'flex',\r\n\t\tjustifyContent: 'center',\r\n\t\talignItems: 'center',\r\n\t\tpaddingTop: '30px'\r\n\t},\r\n\tcontrolsBoxLeft: {\r\n\t\tflex: 1,\r\n\t\tflexDirection: 'column',\r\n\t\talignItems: 'baseline'\r\n\t},\r\n\tcontrolsBoxCenter: {\r\n\t\tflex: 3\r\n\t},\r\n\tcontrolsBoxRight: {\r\n\t\tflex: 1,\r\n\t\tjustifyContent: 'end'\r\n\t},\r\n\tcontrolButton: {\r\n\t\tmargin: '0 5px'\r\n\t},\r\n\tcontrolButtonSmall: {\r\n\t\tmargin: '0 10px',\r\n\t\tfontSize: '1.2rem',\r\n\t\theight: '32px',\r\n\t\twidth: '32px'\r\n\t}\r\n});\r\n\r\n\r\nclass Multimedia extends React.Component {\r\n\t\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\t\r\n\t\tthis.state = {}\r\n\t}\r\n\t\r\n\tcomponentDidMount() {\r\n\t\t\r\n\t\t// get initial states\r\n\t\tfor (let stateKey in this.props.device.states) {\r\n\t\t\tthis.props.device.requestDeviceState(stateKey, true).catch(err => Log._('Modules (MultimediaItem)', err.message, 'error', true, err.stack));\r\n\t\t}\r\n\t\t\r\n\t\t// receive updates\r\n\t\tthis.props.device.listen(this.stateChange);\r\n\t}\r\n\t\r\n\tcomponentWillUnmount() {\r\n\t\tthis.props.device.unlisten(this.stateChange);\r\n\t}\r\n\t\r\n\tstateChange = (stateKey, state) => {\r\n\t\t\r\n\t\t// duration\r\n\t\tif (stateKey === 'duration' && state && state.val.indexOf(':') === -1) {\r\n\t\t\tstate.val = helpers.timeToHoursMinutesSeconds(state.val);\r\n\t\t}\r\n\t\t\r\n\t\t// isRunning\r\n\t\tif (stateKey === 'isRunning' && state && typeof state.val === 'string') {\r\n\t\t\tstate.val = state.val.indexOf('play') > -1;\r\n\t\t}\r\n\t\t\r\n\t\tthis.setState({ [stateKey]: state }, () => {\r\n\t\t\tthis.progress();\r\n\t\t});\r\n\t}\r\n\t\r\n\tprogress() {\r\n\t\tclearTimeout(this.progressTimeout);\r\n\t\t\r\n\t\tif (this.state.isRunning && this.state.isRunning.val === true && this.state.progress && this.state.progress.val && this.state.duration && this.state.duration.val) {\r\n\t\t\tthis.progressTimeout = setTimeout(() => {\r\n\t\t\t\tthis.setState(prevState => ({ progress: { ...prevState.progress, val: helpers.timeToSeconds(prevState.progress.val) + 1 }}), () => this.progress());\r\n\t\t\t}, 1000);\r\n\t\t}\r\n\t}\r\n\t\r\n\topenDialog() {\r\n\t\tthis.props.openDialog(this.props.device);\r\n\t}\r\n\t\r\n\tsetDeviceState(stateKey, value) {\r\n\t\tthis.props.device.setDeviceState(stateKey, value).catch(err => Log._('Modules (MultimediaItem)', err.message, 'error', true, err.stack));\r\n\t}\r\n\t\r\n\trender() {\r\n\t\tconst { classes, noHeader, index, device } = this.props;\r\n\t\tlet styleImage = {}, styleLength = {}, styleLengthBar = {};\r\n\t\t\r\n\t\t// background\r\n\t\tif (this.state.background && this.state.background.val !== '') {\r\n\t\t\tstyleImage.backgroundImage = 'url(' + ((device.options.backgroundUrlPrepend || '') + this.state.background.val) + ')';\r\n\t\t}\r\n\t\t\r\n\t\t// duration\r\n\t\tif (this.state.duration && this.state.duration.val) {\r\n\t\t\tstyleLengthBar.width = ((this.state.progress && this.state.progress.val) || 0) + 'px';\r\n\t\t}\r\n\t\t\r\n\t\tconst playIconElements = this.state.isRunning && this.state.isRunning.val ? [<PauseIcon onClick={this.setDeviceState.bind(this, 'pause', true)} />, <StopIcon />] : [<PlayIcon onClick={this.setDeviceState.bind(this, 'play', true)} />];\r\n\t\t//const repeatIcon = 'repeat'; // repeat, repeat-off, repeat-once\r\n\t\t//const shuffleIcon = 'shuffle-variant'; // shuffle-variant, shuffle-disabled\r\n\t\t//const volumeIcon = 'volume-high'; // volume-variant-off\r\n\t\t\r\n\t\treturn (\r\n\r\n<React.Fragment>\r\n\t\r\n\t{index > 0 && <Divider className={classes.divider} />}\r\n\t<div className={clsx(classes.container, noHeader && classes.noHeader)}>\r\n\t\t\r\n\t\t<div className={clsx(this.state.background && this.state.background.val !== '' ? classes.image : classes.noImage)} style={ styleImage } onClick={this.openDialog.bind(this)}>\r\n\t\t\t\r\n\t\t\t<div className={classes.information}>\r\n\t\t\t\t<p className={classes.informationLeft}>\r\n\t\t\t\t\t{this.state.grandParent && this.state.grandParent.val && [this.state.grandParent.val, <br key={'br-' + device.id} />]}\r\n\t\t\t\t\t{this.state.parent && this.state.parent.val && this.state.parent.val + ' - '}{this.state.title && this.state.title.val}\r\n\t\t\t\t</p>\r\n\t\t\t\t<p className={classes.informationRight}>\r\n\t\t\t\t\t{this.state.progress && helpers.timeToHoursMinutesSeconds(this.state.progress.val)} / {this.state.duration && this.state.duration.val}\r\n\t\t\t\t</p>\r\n\t\t\t</div>\r\n\t\t\t\r\n\t\t</div>\r\n\t\t<div className={classes.length} style={ styleLength }>\r\n\t\t\t<div className={classes.lengthBar} style={ styleLengthBar }></div>\r\n\t\t</div>\r\n\t\t\r\n\t\t<div className={classes.controls}>\r\n\t\t\t<div className={clsx(classes.controlsBox, classes.controlsBoxLeft)}>\r\n\t\t\t\t{/*\r\n\t\t\t\t<IconButton size=\"small\" className={classes.controlButtonSmall}>\r\n\t\t\t\t\t<span className={'mdi mdi-' + repeatIcon}></span>\r\n\t\t\t\t</IconButton>\r\n\t\t\t\t<IconButton size=\"small\" className={classes.controlButtonSmall}>\r\n\t\t\t\t\t<span className={'mdi mdi-' + shuffleIcon}></span>\r\n\t\t\t\t</IconButton>\r\n\t\t\t\t*/}\r\n\t\t\t\t\r\n\t\t\t</div>\r\n\t\t\t<div className={clsx(classes.controlsBox, classes.controlsBoxCenter)}>\r\n\t\t\t\t\r\n\t\t\t\t<Fab className={classes.controlButton} size=\"small\" color=\"secondary\">\r\n\t\t\t\t\t<SkipPreviousIcon onClick={this.setDeviceState.bind(this, 'previous', true)} />\r\n\t\t\t\t</Fab>\r\n\t\t\t\t\r\n\t\t\t\t{playIconElements.map((icon, i) => \r\n\t\t\t\t<Fab key={'icon-' + i} className={classes.controlButton} size=\"large\" color=\"primary\">\r\n\t\t\t\t\t{icon}\r\n\t\t\t\t</Fab>\r\n\t\t\t\t)}\r\n\t\t\t\t\r\n\t\t\t\t<Fab className={classes.controlButton} size=\"small\" color=\"secondary\">\r\n\t\t\t\t\t<SkipNextIcon onClick={this.setDeviceState.bind(this, 'next', true)} />\r\n\t\t\t\t</Fab>\r\n\t\t\t\t\r\n\t\t\t</div>\r\n\t\t\t<div className={clsx(classes.controlsBox, classes.controlsBoxRight)}>\r\n\t\t\t\t{/*\r\n\t\t\t\t<IconButton size=\"small\" className={classes.controlButtonSmall}>\r\n\t\t\t\t\t<span className={'mdi mdi-' + volumeIcon}></span>\r\n\t\t\t\t</IconButton>\r\n\t\t\t\t*/}\r\n\t\t\t\t\r\n\t\t\t</div>\r\n\t\t</div>\r\n\t\t\r\n\t</div>\r\n\r\n</React.Fragment>\r\n\r\n\t\t);\r\n\t}\r\n}\r\n\r\nexport default withStyles(styles)(Multimedia);\r\n","import React from 'react'\r\n\r\nimport MultimediaItem from './MultimediaItem'\r\n\r\n\r\nexport default function StateList(props) {\r\n\tconst { devices, settings } = props;\r\n\treturn devices.map((device, i) => <MultimediaItem key={'MultimediaItem-' + device.id} {...props} index={i} noHeader={i === 0 && settings.icon === null && settings.title === null} device={device} />)\r\n}\r\n\r\n\r\nexport const ModuleDescription = \"Zeigt ein Multimedia-Player an (z. B. Spotify)\";\r\nexport const ModuleScreenshots = [];\r\n\r\nexport const ModuleConfig = [\r\n]\r\n","import Log from './Log'\r\nimport i18n from './i18n'\r\n\r\n\r\n/**\r\n * Settings\r\n *\r\n *\r\n */\r\nexport default class Settings {\r\n\r\n\t/*\r\n\t * holds the settings\r\n\t */\r\n\tstatic settings = {};\r\n\t\r\n\t/**\r\n\t * Apply settings.\r\n\t *\r\n\t * @param\tvoid\r\n\t * @return\tvoid\r\n\t */\r\n\tstatic applySettings() {\r\n\t\t\r\n\t\t// language\r\n\t\tif (Settings.settings.language) {\r\n\t\t\ti18n.setLanguage(Settings.settings.language);\r\n\t\t\ti18n.loadTranslation(Settings.settings.language);\r\n\t\t}\r\n\t\telse {\r\n\t\t\ti18n.loadTranslation();\r\n\t\t}\r\n\t\t\r\n\t\t// page title\r\n\t\tif (Settings.settings.pageTitle) {\r\n\t\t\tdocument.title = Settings.settings.pageTitle;\r\n\t\t}\r\n\t\t\r\n\t\t// favicon\r\n\t\tif (Settings.settings.pageFavicon && Settings.settings.pageFavicon.substr(0, 5) === 'data:') {\r\n\t\t\tdocument.getElementById('favicon').href = Settings.settings.pageFavicon;\r\n\t\t}\r\n\t\t\r\n\t\t// translations\r\n\t\tif (Settings.settings.translations) {\r\n\t\t\t\r\n\t\t\tlet translations = Settings.settings.translations;\r\n\t\t\tfor (let language in translations) {\r\n\t\t\t\ti18n.setTranslation(language, translations[language]);\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\t\r\n\t/**\r\n\t * Gets a setting.\r\n\t *\r\n\t * @param\t{String}\tsettings\r\n\t * @return\t{String}\r\n\t */\r\n\tstatic getSetting(setting) {\r\n\t\treturn Settings.settings[setting] || '';\r\n\t}\r\n\t\r\n\t/**\r\n\t * Gets all settings.\r\n\t *\r\n\t * @param\tvoid\r\n\t * @return\t{Object}\r\n\t */\r\n\tstatic getSettings() {\r\n\t\treturn Settings.settings || {};\r\n\t}\r\n\t\r\n\t/**\r\n\t * Sets a setting.\r\n\t *\r\n\t * @param\t{String}\tsetting\r\n\t * @param\t{String}\tvalue\r\n\t * @return\t{Boolean}\r\n\t */\r\n\tstatic setSetting(setting, val) {\r\n\t\t\r\n\t\tif (setting && val !== undefined) {\r\n\t\t\tSettings.settings[setting] = val;\r\n\t\t\treturn true;\r\n\t\t}\r\n\t\t\r\n\t\treturn false;\r\n\t}\r\n\r\n\t/**\r\n\t * Set settings.\r\n\t *\r\n\t * @param\t{Object}\tsettings\r\n\t * @return\t{Boolean}\r\n\t */\r\n\tstatic setSettings(settings) {\r\n\t\tif (settings) {\r\n\t\t\tSettings.settings = { ...Settings.settings, ...settings || {} };\r\n\t\t\tLog._('Settings', [ 'Set settings', Settings.settings ]);\r\n\t\t\treturn true;\r\n\t\t}\r\n\t\t\r\n\t\treturn false;\r\n\t}\r\n}\r\n","import Log from './Log'\r\nimport { de } from 'date-fns/locale'\r\nexport const locales = { de }\r\n\r\n\r\n/**\r\n * Internationalization\r\n * Based on https://raw.githubusercontent.com/ioBroker/adapter-react/master/src/i18n.js.\r\n * Copyright 2018-2019 bluefox <dogafox@gmaiLog.com>\r\n *\r\n * MIT License\r\n *\r\n *\r\n */\r\nexport default class i18n {\r\n\r\n\t/*\r\n\t * holds the translations\r\n\t */\r\n\tstatic translations = {};\r\n\r\n\t/*\r\n\t * default language\r\n\t */\r\n\tstatic language = (navigator.language || navigator.userLanguage || 'en-EN');\r\n\r\n\t/**\r\n\t * Override default language.\r\n\t *\r\n\t * @param\t{String}\tlanguage\r\n\t * @return\t{Boolean}\r\n\t */\r\n\tstatic setLanguage(language) {\r\n\t\tif (language) {\r\n\t\t\ti18n.language = language;\r\n\t\t\tLog._('i18n', 'Set language to ' + language + '.');\r\n\t\t\treturn true;\r\n\t\t}\r\n\t\t\r\n\t\treturn false;\r\n\t}\r\n\t\r\n\t/**\r\n\t * Loads multiple translations.\r\n\t *\r\n\t * @param\t{String|Array}\tlanguages\r\n\t * @return\t{Boolean}\r\n\t */\r\n\tstatic loadTranslations(languages) {\r\n\t\t\r\n\t\tif (languages) {\r\n\t\t\tlanguages = Array.isArray(languages) ? languages : [languages];\r\n\t\t\tlanguages.forEach(language => i18n.loadTranslation(language));\r\n\t\t\t\r\n\t\t\treturn true;\r\n\t\t}\r\n\t\t\r\n\t\treturn false;\r\n\t}\r\n\t\r\n\t/**\r\n\t * Loads a translation.\r\n\t *\r\n\t * @param\t{String}\tlanguage\r\n\t * @return\t{Boolean}\r\n\t */\r\n\tstatic loadTranslation(language = i18n.getLanguage()) {\r\n\t\t\r\n\t\tif (language) {\r\n\t\t\tlet translation;\r\n\t\t\ttry {\r\n\t\t\t\ttranslation = require('./i18n/' + language + '.js').default;\r\n\t\t\t\ti18n.setTranslation(language, translation);\r\n\t\t\t}\r\n\t\t\tcatch(err) {\r\n\t\t\t\tLog._('i18n', err.message, 'error', false, err.stack);\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\treturn true;\r\n\t\t}\r\n\t\t\r\n\t\treturn false;\r\n\t\t\r\n\t}\r\n\t\r\n\t/**\r\n\t * Set a translation for language.\r\n\t *\r\n\t * @param\t{String}\tlanguage\r\n\t * @param\t{Object}\ttranslation\r\n\t * @return\t{Boolean}\r\n\t */\r\n\tstatic setTranslation(language, translation) {\r\n\t\tif (language && translation) {\r\n\t\t\ti18n.translations[language] = { ...i18n.translations[language] || {}, ...translation };\r\n\t\t\tLog._('i18n', 'Set translations for language ' + language + '.', 'debug');\r\n\t\t\treturn true;\r\n\t\t}\r\n\t\t\r\n\t\treturn false;\r\n\t}\r\n\t\r\n\t/**\r\n\t * Get current set language.\r\n\t *\r\n\t * @param\tvoid\r\n\t * @return\t{String}\r\n\t */\r\n\tstatic getLanguage(isoLong = false) {\r\n\t\treturn i18n.language.substr(0, isoLong ? 5 : 2);\r\n\t}\r\n\t\r\n\t/**\r\n\t * Get current set language.\r\n\t *\r\n\t * @param\t{String|Object}\t\tword\r\n\t * @param\t{Object}\t\t\t[options={}]\r\n\t * @param\t{Boolean}\t\t\t[options.ucFirst=false]\r\n\t * @param\t{Object}\t\t\t[placeholders={}]\r\n\t * @param\t{String}\t\t\t[language=i18n.language]\r\n\t * @return\t{String}\r\n\t */\r\n\tstatic t(word = '', options = {}, placeholders = {}, language = i18n.getLanguage()) {\r\n\t\t\r\n\t\t// if object is provided, it might be translated already\r\n\t\tif (typeof word === 'object' && word[language] !== undefined) {\r\n\t\t\tword = word[language];\r\n\t\t}\r\n\t\t\r\n\t\telse if (word) {\r\n\t\t\tword = word.toString();\r\n\t\t\tif (i18n.translations[language]) {\r\n\t\t\t\t\r\n\t\t\t\t// check if word is concatenated\r\n\t\t\t\tif (word.indexOf('#') > -1) {\r\n\t\t\t\t\t\r\n\t\t\t\t\tlet parts = word.split('#');\r\n\t\t\t\t\twhile (parts.length > 0 && !i18n.translations[language][parts.join('#')]) {\r\n\t\t\t\t\t\tparts.shift();\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t\tword = parts.join('#');\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tif (i18n.translations[language][word]) {\r\n\t\t\t\t\tword = i18n.translations[language][word];\r\n\t\t\t\t}\r\n\t\t\t\telse if (i18n.translations[language][word.toLowerCase()]) {\r\n\t\t\t\t\tword = i18n.translations[language][word.toLowerCase()];\r\n\t\t\t\t}\r\n\t\t\t\telse {\r\n\t\t\t\t\tLog._('i18n', 'Word \"' + word + '\" not found in language ' + language + '!', 'debug', false);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tLog._('i18n', 'Language ' + language + ' not loaded for word ' + word + '!', 'error');\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\t// replace placeholders\r\n\t\tfor (let key in placeholders) {\r\n\t\t\tword = word.replace(RegExp('%' + key + '%', 'g'), placeholders[key]);\r\n\t\t}\r\n\t\t\r\n\t\t// options\r\n\t\tif (options.ucFirst) {\r\n\t\t\tword = word.charAt(0).toUpperCase() + word.slice(1);\r\n\t\t}\r\n\t\t\r\n\t\treturn word;\r\n\t}\r\n}\r\n","export { default } from './blind'\r\n","import ModuleList from '../modules'\r\n\r\n\r\nexport const DEFAULTS = {\r\n\t'MODULE': 'StateList',\r\n\t'NODE_SETTINGS': 'jarvis.0.settings',\r\n\t'NODE_DEVICES': 'jarvis.0.devices',\r\n\t'NODE_NOTIFICATIONS': 'jarvis.0.notifications',\r\n}\r\n\r\nexport const DEVICES_STATES = {\r\n\t'state': {\r\n\t\t'description': {\r\n\t\t\t'en': '',\r\n\t\t\t'de': ''\r\n\t\t}\r\n\t},\r\n\t'stateStyle': {\r\n\t\t'description': {\r\n\t\t\t'en': '',\r\n\t\t\t'de': ''\r\n\t\t}\r\n\t},\r\n\t'display': {\r\n\t\t'description': {\r\n\t\t\t'en': '',\r\n\t\t\t'de': ''\r\n\t\t}\r\n\t},\r\n\t'label': {\r\n\t\t'description': {\r\n\t\t\t'en': '',\r\n\t\t\t'de': ''\r\n\t\t}\r\n\t},\r\n\t'type': {\r\n\t\t'description': {\r\n\t\t\t'en': '',\r\n\t\t\t'de': ''\r\n\t\t},\r\n\t\t'type': 'Select',\r\n\t},\r\n\t'action': {\r\n\t\t'description': {\r\n\t\t\t'en': '',\r\n\t\t\t'de': ''\r\n\t\t}\r\n\t},\r\n\t'unit': {\r\n\t\t'description': {\r\n\t\t\t'en': '',\r\n\t\t\t'de': ''\r\n\t\t}\r\n\t},\r\n\t'icon': {\r\n\t\t'description': {\r\n\t\t\t'en': '',\r\n\t\t\t'de': ''\r\n\t\t}\r\n\t},\r\n\t'iconStyle': {\r\n\t\t'description': {\r\n\t\t\t'en': '',\r\n\t\t\t'de': ''\r\n\t\t}\r\n\t}\r\n}\r\n\r\nexport const DEVICES_CONFIG = {\r\n\t'divider': {\r\n\t\t'description': {\r\n\t\t\t'en': '',\r\n\t\t\t'de': 'Fügt einen Trennstrich vor (before) oder nach (after) dem Gerät ein (abhängig des Moduls).'\r\n\t\t},\r\n\t\t'type': 'Select',\r\n\t\t'selection': [\r\n\t\t\t{\r\n\t\t\t\t'': {\r\n\t\t\t\t\t'en': 'no divider',\r\n\t\t\t\t\t'de': 'kein Trennstrich'\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\t'before': {\r\n\t\t\t\t\t'en': 'add Divider before Device',\r\n\t\t\t\t\t'de': 'Trennstrich vor dem Gerät einfügen'\r\n\t\t\t\t}\r\n\t\t\t},\r\n\t\t\t{\r\n\t\t\t\t'after': {\r\n\t\t\t\t\t'en': 'add Divider after Device',\r\n\t\t\t\t\t'de': 'Trennstrich nach dem Gerät einfügen'\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t]\r\n\t},\r\n\t'group': {\r\n\t\t'description': {\r\n\t\t\t'en': '',\r\n\t\t\t'de': 'Mit der Gruppe können mehrere Geräte zusammengefasst / gruppiert angezeigt werden.'\r\n\t\t}\r\n\t},\r\n\t'hiddenStates': {\r\n\t\t'description': {\r\n\t\t\t'en': '',\r\n\t\t\t'de': 'Liste mit States, die von jarvis zwar geladen, aber nicht angezeigt werden.'\r\n\t\t}\r\n\t},\r\n\t'ignoredStates': {\r\n\t\t'description': {\r\n\t\t\t'en': '',\r\n\t\t\t'de': 'Liste mit States, die von jarvis ignoriert (und damit nicht geladen) werden.'\r\n\t\t}\r\n\t},\r\n\t'defaultValue': {\r\n\t\t'description': {\r\n\t\t\t'en': '',\r\n\t\t\t'de': 'Initialer Standard-Wert, der beim Schalten gesetzt wird.'\r\n\t\t}\r\n\t},\r\n\t/*'label': {\r\n\t\t'description': {\r\n\t\t\t'en': '',\r\n\t\t\t'de': 'alternativer Bezeichner des Geräts als Anzeige-Name'\r\n\t\t}\r\n\t},*/\r\n\t'primaryStateKey': {\r\n\t\t'description': {\r\n\t\t\t'en': '',\r\n\t\t\t'de': 'Dieses Feld dient dem Überschreiben des primären States mit einem anderen State.'\r\n\t\t}\r\n\t},\r\n\t'secondaryStateKey': {\r\n\t\t'description': {\r\n\t\t\t'en': '',\r\n\t\t\t'de': 'Dieses Feld dient dem Überschreiben des sekundären States mit einem anderen State.'\r\n\t\t}\r\n\t},\r\n\t'sort': {\r\n\t\t'description': {\r\n\t\t\t'en': '',\r\n\t\t\t'de': 'Sortierung des Geräts bezogen auf die Position innerhalb der Gruppe (group).'\r\n\t\t},\r\n\t\t'type': 'Number',\r\n\t}\r\n}\r\n\r\nexport const LAYOUT_CONFIG = {\r\n\ttabsHideLabels: {\r\n\t\tlabel: {\r\n\t\t\t'de': 'Tab Labels nicht anzeigen (nur Icons)',\r\n\t\t\t'en': 'Hide tab labels (only show icons)'\r\n\t\t},\r\n\t\tinfo: {\r\n\t\t\t'de': 'Zeigt nur die Icons im Tab und nicht die Labels',\r\n\t\t\t'en': 'Show only icons within a tab, not the label'\r\n\t\t},\r\n\t\ttype: 'Switch',\r\n\t\tval: false\r\n\t},\r\n\ttabIcon: {\r\n\t\tlabel: {\r\n\t\t\t'de': 'Tab Icon',\r\n\t\t\t'en': 'Tab Icon'\r\n\t\t},\r\n\t\ttype: 'Text',\r\n\t},\r\n\ttabLabel: {\r\n\t\tlabel: {\r\n\t\t\t'de': 'Tab Label',\r\n\t\t\t'en': 'Tab Label'\r\n\t\t},\r\n\t\ttype: 'Text',\r\n\t},\r\n\ttabFullscreen: {\r\n\t\tlabel: {\r\n\t\t\t'de': 'Tab als Vollbild',\r\n\t\t\t'en': 'Tab Fullscreen'\r\n\t\t},\r\n\t\tinfo: {\r\n\t\t\t'de': 'Vollbild kann nur bei einem Tab mit nur einer Spalte und nur einer eingestellten Gruppe aktiviert werden.',\r\n\t\t\t'en': 'Fullscreen can only be enabled on a tab setup with only a single column and only a single group'\r\n\t\t},\r\n\t\ttype: 'Switch',\r\n\t\tval: false\r\n\t},\r\n\tdeviceKey: {\r\n\t\tlabel: {\r\n\t\t\t'de': 'Identifikation',\r\n\t\t\t'en': 'Identifier of key'\r\n\t\t},\r\n\t\ttype: 'Text',\r\n\t\tval: ''\r\n\t},\r\n\tgroupName: {\r\n\t\tlabel: {\r\n\t\t\t'de': 'Gruppe',\r\n\t\t\t'en': 'Group'\r\n\t\t},\r\n\t\ttype: 'Text',\r\n\t\tval: ''\r\n\t},\r\n\tgroupModule: {\r\n\t\tlabel: {\r\n\t\t\t'de': 'Modul zur Anzeige der Gruppe',\r\n\t\t\t'en': 'Modul to display group'\r\n\t\t},\r\n\t\ttype: 'Text',\r\n\t\tval: 'StateList',\r\n\t\toptions: Object.keys(ModuleList)\r\n\t},\r\n\tgroupTitle: {\r\n\t\tlabel: {\r\n\t\t\t'de': 'Titel der Widget-Box',\r\n\t\t\t'en': 'Title of the widget-box'\r\n\t\t},\r\n\t\ttype: 'Text',\r\n\t\tval: ''\r\n\t},\r\n\tgroupIcon: {\r\n\t\tlabel: {\r\n\t\t\t'de': 'Icon der Widget-Box',\r\n\t\t\t'en': 'Icon of the widget-box'\r\n\t\t},\r\n\t\ttype: 'Text',\r\n\t\tval: 'home'\r\n\t},\r\n\tgroupIconStyle: {\r\n\t\tlabel: {\r\n\t\t\t'de': 'Icon style der Widget-Box',\r\n\t\t\t'en': 'Icon style of the widget-box'\r\n\t\t},\r\n\t\ttype: 'Text',\r\n\t\tval: 'backgroundColor: theme.palette.primary.main, color: \"#fff\", fontSize: \"24px\"'\r\n\t}\r\n}\r\n\r\nexport default {\r\n\t'pageSettings': {\r\n\t\t'label': 'Page Settings',\r\n\t\t'settings': {\r\n\t\t\t'language': {\r\n\t\t\t\t'label': {\r\n\t\t\t\t\t'de': 'Spracheinstellung von jarvis',\r\n\t\t\t\t\t'en': 'Language settings for jarvis'\r\n\t\t\t\t},\r\n\t\t\t\t'type': 'Select',\r\n\t\t\t\t'selection': [\r\n\t\t\t\t\t{ 'de': 'Deutsch' },\r\n\t\t\t\t\t{ 'en': 'English' }\r\n\t\t\t\t]\r\n\t\t\t},\r\n\t\t\t'pageFavicon': {\r\n\t\t\t\t'label': {\r\n\t\t\t\t\t'de': 'Favicon im Browser',\r\n\t\t\t\t\t'en': 'Browser favicon'\r\n\t\t\t\t},\r\n\t\t\t\t'info': {\r\n\t\t\t\t\t'de': 'base64 Wert der Grafik',\r\n\t\t\t\t\t'en': 'base64 value of the image'\r\n\t\t\t\t},\r\n\t\t\t\t'type': 'Text'\r\n\t\t\t},\r\n\t\t\t'pageTitle': {\r\n\t\t\t\t'label': {\r\n\t\t\t\t\t'de': 'Titel im Browser',\r\n\t\t\t\t\t'en': 'Browser title'\r\n\t\t\t\t},\r\n\t\t\t\t'type': 'Text',\r\n\t\t\t\t'placeholder': 'jarvis - just another remarkable vis'\r\n\t\t\t}\r\n\t\t}\r\n\t},\r\n\t'themeSettings': {\r\n\t\t'label': 'Theme Settings',\r\n\t\t'settings': {\r\n\t\t\t'themeColorPrimary': {\r\n\t\t\t\t'label': {\r\n\t\t\t\t\t'de': 'Primäre Farbe des Themes',\r\n\t\t\t\t\t'en': 'Primary theme color'\r\n\t\t\t\t},\r\n\t\t\t\t'info': {\r\n\t\t\t\t\t'de': 'Der Farbwert kann ein Wert aus der Farbpalette in der Form `HUE|SHADE` (z. B. `blue|700`) sein. Alternativ kann ein Hex oder RGB angegeben werden.'\r\n\t\t\t\t},\r\n\t\t\t\t'link': 'https://material-ui.com/customization/color/#color-palette',\r\n\t\t\t\t'type': 'Text',\r\n\t\t\t\t'placeholder': 'blue|700'\r\n\t\t\t},\r\n\t\t\t'themeColorSecondary': {\r\n\t\t\t\t'label': {\r\n\t\t\t\t\t'de': 'Sekundäre Farbe des Themes',\r\n\t\t\t\t\t'en': 'Secondary theme color'\r\n\t\t\t\t},\r\n\t\t\t\t'info': {\r\n\t\t\t\t\t'de': 'Der Farbwert kann ein Wert aus der Farbpalette in der Form `HUE|SHADE` (z. B. `pink`) sein. Alternativ kann ein Hex oder RGB angegeben werden.'\r\n\t\t\t\t},\r\n\t\t\t\t'link': 'https://material-ui.com/customization/color/#color-palette',\r\n\t\t\t\t'type': 'Text',\r\n\t\t\t\t'placeholder': 'pink'\r\n\t\t\t},\r\n\t\t\t'defaultBoxIcon': {\r\n\t\t\t\t'label': {\r\n\t\t\t\t\t'de': 'Standard Widget-Box Icon',\r\n\t\t\t\t\t'en': 'Default widget-box icon'\r\n\t\t\t\t},\r\n\t\t\t\t'type': 'Text',\r\n\t\t\t\t'placeholder': 'home'\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n}","export default {\r\n\t// States\r\n\t\"blind#activity\": \"Aktivität\",\r\n\t\"blind#level\": \"Behanghöhe\",\r\n\t\"blind#level2\": \"Lamellenposition\",\r\n\t\r\n\t// State values\r\n\t\"blind#activity#true\": \"in Bewegung\",\r\n\t\"blind#activity#false\": \"keine\",\r\n}","export default {\r\n\t// States\r\n\t\"blind#activity\": \"Activity\",\r\n\t\"blind#level\": \"Level\",\r\n\t\"blind#level2\": \"Lamella\",\r\n\t\r\n\t// State values\r\n\t\"blind#activity#true\": \"moving\",\r\n\t\"blind#activity#false\": \"none\",\r\n}","export default {\r\n\t// States\r\n\t\"door#bell\": \"Klingel\",\r\n\t\"door#lock\": \"Schloß\",\r\n\t\"door#open\": \"Tür\",\r\n\t\r\n\t// State values\r\n\t\"door#open#true\": \"offen\",\r\n\t\"door#open#false\": \"geschlossen\",\r\n}","export default {\r\n\t// States\r\n\t\"door#bell\": \"Bell\",\r\n\t\"door#lock\": \"Lock\",\r\n\t\"door#open\": \"Door\",\r\n\t\r\n\t// State values\r\n\t\"door#open#true\": \"open\",\r\n\t\"door#open#false\": \"closed\",\r\n}","export default {\r\n\t\"heating#boost\": \"Boost\",\r\n\t\"heating#humidity\": \"Luftfeuchtigkeit\",\r\n\t\"heating#setTemperature\": \"eingestellte Temperatur\",\r\n\t\"heating#temperature\": \"Temperatur\",\r\n}","export default {\r\n\t\"heating#boost\": \"Boost\",\r\n\t\"heating#humidity\": \"Humidity\",\r\n\t\"heating#setTemperature\": \"Set Temperature\",\r\n\t\"heating#temperature\": \"Temperature\",\r\n}","export default {\r\n\t// States\r\n\t\"light#colorTemperature\": \"Farbtemperatur\",\r\n\t\"light#hex\": \"Farbe (Hex)\",\r\n\t\"light#hsv\": \"Farbraum Hue-Saturation-Value (HSV)\",\r\n\t\"light#hue\": \"Farbe (Hue)\",\r\n\t\"light#level\": \"Helligkeit\",\r\n\t\"light#power\": \"Licht\",\r\n\t\"light#rgb\": \"Farbraum Rot-Grün-Blau (RGB)\",\r\n\t\r\n\t// State values\r\n\t\"light#level#off\": \"ausgeschaltet\",\r\n}","export default {\r\n\t// States\r\n\t\"light#colorTemperature\": \"Color Temperature\",\r\n\t\"light#hex\": \"Color (Hex)\",\r\n\t\"light#hsv\": \"Colorspace Hue-Saturation-Value (HSV)\",\r\n\t\"light#hue\": \"Color (Hue)\",\r\n\t\"light#level\": \"Brightness\",\r\n\t\"light#power\": \"Power\",\r\n\t\"light#rgb\": \"Colorspace Red-Green-Blue (RGB)\",\r\n\t\r\n\t// State values\r\n\t\"light#level#off\": \"off\",\r\n}","export default {\r\n\t// States\r\n\t\"location#position\": \"Position\",\r\n\t\"location#presence\": \"Anwesenheit\",\r\n\t\"location#users\": \"Benutzer\",\r\n\t\r\n\t// State values\r\n\t\"location#presence#true\": \"anwesend\",\r\n\t\"location#presence#false\": \"abwesend\",\r\n\t\"location#users#empty\": \"niemand anwesend\",\r\n}","export default {\r\n\t// States\r\n\t\"location#position\": \"Position\",\r\n\t\"location#presence\": \"Presence\",\r\n\t\"location#users\": \"Users\",\r\n\t\r\n\t// State values\r\n\t\"location#presence#true\": \"present\",\r\n\t\"location#presence#false\": \"absent\",\r\n\t\"location#users#empty\": \"nobody present\",\r\n}","export default {\r\n\t\"user#location\": \"Standort\",\r\n\t\"user#position\": \"Position\",\r\n}","export default {\r\n\t\"user#location\": \"Location\",\r\n\t\"user#position\": \"Position\",\r\n}","export default {\r\n\t// States\r\n\t\"window#open\": \"Fenster\",\r\n\t\r\n\t// State values\r\n\t\"window#open#true\": \"offen\",\r\n\t\"window#open#false\": \"geschlossen\",\r\n}","export default {\r\n\t// States\r\n\t\"window#open\": \"Window\",\r\n\t\r\n\t// State values\r\n\t\"window#open#true\": \"open\",\r\n\t\"window#open#false\": \"closed\",\r\n}","import React, { useState } from 'react'\r\nimport i18n from '../../i18n'\r\n\r\nimport FormControl from '@material-ui/core/FormControl'\r\nimport FormControlLabel from '@material-ui/core/FormControlLabel'\r\nimport InputLabel from '@material-ui/core/InputLabel'\r\nimport Switch from '@material-ui/core/Switch'\r\n\r\nimport Field from './Field'\r\n\r\n\r\n/*\r\n * STYLES\r\n */\r\nimport { makeStyles } from '@material-ui/core/styles'\r\nconst useStyles = makeStyles((theme) => ({\r\n\tFormControl: {\r\n\t\twidth: '100%'\r\n\t},\r\n\tInputLabel: {\r\n\t\twidth: '133%'\r\n\t},\r\n\tSwitch: {\r\n\t\tmarginTop: '10px'\r\n\t},\r\n\tSwitchSmall: {\r\n\t\tmarginTop: '2px'\r\n\t},\r\n\tSwitchInline: {\r\n\t\tmarginLeft: '5px'\r\n\t},\r\n}));\r\n\r\n\r\n/*\r\n *\r\n */\r\nexport default function InputSwitch(props) {\r\n\tconst { id, label, val, size, disabled, onChange } = props;\r\n\tconst classes = useStyles(props);\r\n\t\r\n\tconst [checked, setChecked] = useState(val || false);\r\n\tconst handleSwitchChange = event => {\r\n\t\tlet userInput = (event && event.target && event.target.checked) || false;\r\n\t\t\r\n\t\tsetChecked(userInput);\r\n\t\tonChange && onChange(props, userInput);\r\n\t}\r\n\t\r\n\treturn (\r\n\t\t<Field {...props}>\r\n\t\t\t<FormControl\r\n\t\t\t\tkey={'FormControl-' + id}\r\n\t\t\t\tclasses={{ root: classes.FormControl }}\r\n\t\t\t\t>\r\n\t\t\t\t\r\n\t\t\t\t<InputLabel classes={{ root: classes.InputLabel }} shrink={true}>{i18n.t(label)}</InputLabel>\r\n\t\t\t\t<Switch\r\n\t\t\t\t\tclasses={{ root: size === 'small' ? classes.SwitchSmall : classes.Switch }}\r\n\t\t\t\t\tchecked={checked}\r\n\t\t\t\t\tdisabled={disabled}\r\n\t\t\t\t\tonChange={handleSwitchChange}\r\n\t\t\t\t\tsize={size}\r\n\t\t\t\t\t/>\r\n\t\t\t\t\r\n\t\t\t</FormControl>\r\n\t\t</Field>\r\n\r\n\t)\r\n}\r\n\r\n/*\r\n *\r\n */\r\nexport function InputSwitchInline(props) {\r\n\tconst { label, val, size, disabled, onChange } = props;\r\n\tconst classes = useStyles(props);\r\n\t\r\n\tconst [checked, setChecked] = useState(val || false);\r\n\tconst handleSwitchChange = event => {\r\n\t\tlet userInput = (event && event.target && event.target.checked) || false;\r\n\t\t\r\n\t\tsetChecked(userInput);\r\n\t\tonChange && onChange(props, userInput);\r\n\t}\r\n\t\r\n\treturn (\r\n\t\t<Field {...props}>\r\n\t\t\t<FormControlLabel\r\n\t\t\t\tclasses={{ root: classes.SwitchInline }}\r\n\t\t\t\tlabel={i18n.t(label)}\r\n\t\t\t\tcontrol={<Switch\r\n\t\t\t\t\tclasses={{ root: size === 'small' ? classes.SwitchSmall : classes.Switch }}\r\n\t\t\t\t\tchecked={checked}\r\n\t\t\t\t\tdisabled={disabled}\r\n\t\t\t\t\tonChange={handleSwitchChange}\r\n\t\t\t\t\tsize={size} />}\r\n\t\t\t\t/>\r\n\t\t\t\t\r\n\t\t</Field>\r\n\r\n\t)\r\n}","var map = {\n\t\"./de.js\": 437,\n\t\"./en.js\": 438\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 436;","export default {\r\n\t/*\r\n\t * LOADING SCREEN\r\n\t */\r\n\t\"Retrieving settings\": \"Einstellungen werden geladen\",\r\n\t\r\n\t/*\r\n\t * GENERAL\r\n\t */\r\n\t\"last update\": \"letzte Aktualisierung\",\r\n\t\"Updates available\": \"Aktualisierung verfügbar\",\r\n\t\r\n\t/*\r\n\t * STATES\r\n\t */\r\n\t\"on\": \"an\",\r\n\t\"off\": \"aus\",\r\n\t\r\n\t\"user\": \"User\",\r\n\t\"users\": \"Users\",\r\n\t\r\n\t\"door\": \"Tür\",\r\n\t\"window\": \"Fenster\",\r\n\t\r\n\t\"open\": \"offen\",\r\n\t\"closed\": \"geschlossen\",\r\n\t\r\n\t\"turn on\": \"anschalten\",\r\n\t\"power\": \"Geräte Status\",\r\n\t\"trigger\": \"Geräte Status\",\r\n\t\r\n\t\"brightness\": \"Helligkeit\",\r\n\t\"wind\": \"Wind\",\r\n\t\"battery\": \"Batterie\",\r\n\t\r\n\t\"%DateTime\": \"%DateTime Uhr\",\r\n\t\r\n\t/*\r\n\t * HOUSEHOLD\r\n\t */\r\n\t\"running\": \"Gerät läuft\",\r\n\t\"consumption\": \"Verbrauch\"\r\n}","export default {\r\n}","import React, { useState, useEffect } from 'react'\r\nimport clsx from 'clsx'\r\n\r\nimport Log from '../Log'\r\nimport i18n from '../i18n'\r\n\r\nimport Slider from '@material-ui/core/Slider'\r\nimport Switch from '@material-ui/core/Switch'\r\nimport Button from '@material-ui/core/Button'\r\n\r\n\r\n/*\r\n * STYLES\r\n */\r\nimport { makeStyles, withStyles } from '@material-ui/core/styles';\r\nconst styles = theme => ({\r\n\tprimaryAction: props => ({\r\n\t\t...props.styles\r\n\t}),\r\n\tsecondaryAction: props => ({\r\n\t\tcolor: '#999',\r\n\t\tfontSize: '14px',\r\n\t\t...props.styles\r\n\t}),\r\n});\r\n\r\nconst useStyles = makeStyles(theme => ({\r\n\tcomponent: {\r\n\t\tpadding: theme.spacing(2, 0, 2, 0)\r\n\t},\r\n\tsliderMarkLabel: {\r\n\t\t[theme.breakpoints.down('md')]: {\r\n\t\t\tdisplay: 'none',\r\n\t\t\t'&:nth-child(5)': { display: 'block' },\r\n\t\t\t'&:nth-child(15)': { display: 'block' },\r\n\t\t\t'&:nth-child(25)': { display: 'block' }\r\n\t\t}\r\n\t}\r\n}));\r\n\r\n\r\n/*\r\n * ACTIONS\r\n *\r\n */\r\nconst Action = withStyles(styles)(props => {\r\n\tconst { classes, device, state, stateKey } = props;\r\n\treturn (\r\n\r\n<span className={clsx((stateKey === device.primaryStateKey && classes.primaryAction) || (stateKey === device.secondaryStateKey && classes.secondaryAction))}>\r\n\t{state && state.value} {state && state.unit}\r\n</span>\r\n\r\n\t);\r\n});\r\n\r\nfunction PowerAction(props) {\r\n\tconst { device, stateKey, stateVal, onChange: parentOnChange } = props;\r\n\t\r\n\tconst onChange = (e) => {\r\n\t\tsetChecked(e.target.checked);\r\n\t\tdevice.setDeviceState(stateKey, e.target.checked).catch(err => Log._('Function (defaults)', err.message, 'error', true, err.stack));\r\n\t}\r\n\t\r\n\tconst [checked, setChecked] = useState(stateVal);\r\n\tuseEffect(() => setChecked(stateVal), [stateVal]);\r\n\t\r\n\treturn (\r\n\r\n<Switch\r\n\tchecked={checked}\r\n\tonChange={parentOnChange || onChange}\r\n\tvalue={checked !== true}\r\n\tcolor=\"primary\"\r\n\t/>\r\n\r\n\t);\r\n}\r\n\r\nfunction TriggerAction(props) {\r\n\tconst { device, stateKey, stateVal } = props;\r\n\t\r\n\tconst onClick = () => {\r\n\t\tdevice.setDeviceState(stateKey, true).catch(err => Log._('Function (defaults)', err.message, 'error', true, err.stack));\r\n\t}\r\n\t\r\n\t//\r\n\tif (stateVal === true || stateVal > 0) {\r\n\t\treturn <Action {...props} onChange={null} />;\r\n\t}\r\n\t\r\n\tconst icon = 'power';\r\n\treturn (\r\n\r\n<Button\r\n\tvariant=\"outlined\"\r\n\tcolor=\"primary\"\r\n\tsize=\"small\"\r\n\tstartIcon={<span className={'mdi mdi-' + icon}></span>}\r\n\tonClick={onClick}\r\n\t>\r\n\t\r\n\t{i18n.t('turn on')}\r\n</Button>\r\n\r\n\t);\r\n}\r\n\r\n\r\n/*\r\n * COMPONENTS\r\n *\r\n */\r\nfunction Label(props) {\r\n\tconst { label, br } = props;\r\n\tconst linebreak = br || false;\r\n\t\r\n\treturn (\r\n\t\r\n<React.Fragment>\r\n\t{label}\r\n\t{linebreak && <br />}\r\n</React.Fragment>\r\n\t\r\n\t);\r\n}\r\n\r\nfunction Component(props) {\r\n\tconst { title, children } = props;\r\n\tconst classes = useStyles();\r\n\t\r\n\treturn (\r\n\r\n<React.Fragment>\r\n\t<Label label={title} />\r\n\t<div className={classes.component}>\r\n\t\t{children}\r\n\t</div>\r\n</React.Fragment>\r\n\r\n\t);\r\n}\r\n\r\nfunction LevelComponent(props) {\r\n\tlet { device, stateKey, stateVal, title, min, max, step, markSteps } = props;\r\n\tconst classes = useStyles();\r\n\t\r\n\tconst onChange = (e, val) => setLevel(val)\r\n\tconst onChangeCommitted = (e, val) => {\r\n\t\tsetLevel(val);\r\n\t\tdevice.setDeviceState(stateKey, val).catch(err => Log._('Function (defaults)', err.message, 'error', true, err.stack));\r\n\t}\r\n\t\r\n\tconst [level, setLevel] = useState(stateVal);\r\n\tuseEffect(() => setLevel(stateVal), [stateVal]);\r\n\t\r\n\t// default settings\r\n\tmin = min || 0;\r\n\tmax = max || 100;\r\n\tstep = step || 1;\r\n\tmarkSteps = markSteps || 11; // 0 to 10\r\n\tlet markStep = ((max-min)/(markSteps-1)) || 10;\r\n\treturn (\r\n\r\n<Component title={title || stateKey }>\r\n\t<Slider\r\n\t\tclasses={{ markLabel: classes.sliderMarkLabel }}\r\n\t\tonChange={onChange}\r\n\t\tonChangeCommitted={onChangeCommitted}\r\n\t\tvalue={level}\r\n\t\tvalueLabelDisplay=\"auto\"\r\n\t\tmarks={[...Array(markSteps).keys()].map(number => ({ 'value': min+number*markStep, 'label': min+number*markStep }))}\r\n\t\tmin={min}\r\n\t\tmax={max}\r\n\t\tstep={step}\r\n\t/>\r\n\r\n</Component>\r\n\r\n\t);\r\n}\r\n\r\n\r\n\r\nexport default {\r\n\tdescription: {\r\n\t\t'en': 'Default settings for all functions',\r\n\t\t'de': 'Standard-Einstellungen für alle Gewerke',\r\n\t},\r\n\tconfigurations: {\r\n\t\t_any: {\r\n\t\t\tvalue: (val) => val.toString(),\r\n\t\t\t//stateStyle\r\n\t\t\t//unit\r\n\t\t\t//icon\r\n\t\t\t//iconStyle\r\n\t\t\t//display\r\n\t\t\tstateStyle: {\r\n\t\t\t\ttrue: {\r\n\t\t\t\t\t'color': '#090',\r\n\t\t\t\t\t'fontWeight': 'bold'\r\n\t\t\t\t},\r\n\t\t\t\tfalse: {\r\n\t\t\t\t\t'color': '#999'\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t},\r\n\t\tbattery: {\r\n\t\t\tunit: ' %',\r\n\t\t\ticon: 'battery-medium'\r\n\t\t},\r\n\t\tdoor: {\r\n\t\t\ticon: {\r\n\t\t\t\t'true': 'door-open',\r\n\t\t\t\t'false': 'door-closed'\r\n\t\t\t},\r\n\t\t\tdisplay: {\r\n\t\t\t\t'true': 'open',\r\n\t\t\t\t'false': 'closed'\r\n\t\t\t},\r\n\t\t},\r\n\t\thumidity: {\r\n\t\t\tunit: ' %',\r\n\t\t\ticon: 'water-percent'\r\n\t\t},\r\n\t\tlevel: {\r\n\t\t\tunit: ' %'\r\n\t\t},\r\n\t\tposition: {\r\n\t\t\ticon: 'map-marker'\r\n\t\t},\r\n\t\tpower: {\r\n\t\t\tdisplay: {\r\n\t\t\t\t'true': 'on',\r\n\t\t\t\t'false': 'off'\r\n\t\t\t},\r\n\t\t\ticon: 'power'\r\n\t\t},\r\n\t\ttemperature: {\r\n\t\t\tunit: ' °C',\r\n\t\t\ticon: 'thermometer'\r\n\t\t},\r\n\t\ttrigger: {\r\n\t\t\tdisplay: {\r\n\t\t\t\t'true': 'on',\r\n\t\t\t\t'false': 'off'\r\n\t\t\t},\r\n\t\t\ticon: 'power'\r\n\t\t},\r\n\t\twind: {\r\n\t\t\tunit: ' km/h',\r\n\t\t\ticon: 'weather-windy'\r\n\t\t}\r\n\t},\r\n\tcomponents: {\r\n\t\tLabel,\r\n\t\tComponent,\r\n\t\tLevelComponent,\r\n\t\t\r\n\t\tlevel: LevelComponent\r\n\t},\r\n\tactions: {\r\n\t\tAction,\r\n\t\tPowerAction,\r\n\t\tTriggerAction,\r\n\t\t\r\n\t\tpower: PowerAction,\r\n\t\ttrigger: TriggerAction\r\n\t}\r\n}","var map = {\n\t\"./blind.de\": 311,\n\t\"./blind.de.js\": 311,\n\t\"./blind.en\": 312,\n\t\"./blind.en.js\": 312,\n\t\"./blind.js\": 249\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 525;","export { default } from './door'\r\n","var map = {\n\t\"./door.de\": 313,\n\t\"./door.de.js\": 313,\n\t\"./door.en\": 314,\n\t\"./door.en.js\": 314,\n\t\"./door.js\": 237\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 527;","export { default } from './heating'\r\n","var map = {\n\t\"./heating.de\": 315,\n\t\"./heating.de.js\": 315,\n\t\"./heating.en\": 316,\n\t\"./heating.en.js\": 316,\n\t\"./heating.js\": 238\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 529;","export { default } from './light'\r\n","const _copy = require('rfdc')();\r\n\r\n/**\r\n * Devices\r\n *\r\n *\r\n */\r\nexport default class Devices {\r\n\r\n\t/*\r\n\t * holds the raw data\r\n\t */\r\n\tstatic rawDevices = {};\r\n\r\n\t/*\r\n\t * holds the devices\r\n\t */\r\n\tstatic Devices = {};\r\n\r\n\t/*\r\n\t * holds the groups\r\n\t */\r\n\tstatic Groups = {};\r\n\r\n\t/*\r\n\t * holds the groups IDs with its names\r\n\t */\r\n\tstatic GroupList = [];\r\n\t\r\n\t/*\r\n\t * holds the groups IDs\r\n\t */\r\n\tstatic GroupIds = [];\r\n\t\r\n\t/**\r\n\t * Sets the raw data\r\n\t *\r\n\t * @param\t{Object}\trawDevices\r\n\t * @return\tDevices\r\n\t */\r\n\tstatic set(rawDevices) {\r\n\t\t\r\n\t\tfor (let deviceId in rawDevices) {\r\n\t\t\tDevices.rawDevices[deviceId] = { ...rawDevices[deviceId], id: deviceId };\r\n\t\t}\r\n\t\t\r\n\t\treturn Devices;\r\n\t}\r\n\t\r\n\t/**\r\n\t * Set devices\r\n\t *\r\n\t * @param\t{Object}\tdevices\r\n\t * @return\tDevices\r\n\t */\r\n\tstatic setDevices(devices) {\r\n\t\t\r\n\t\tDevices.Devices = devices;\r\n\t\treturn Devices;\r\n\t}\r\n\t\r\n\t/**\r\n\t * Set groups and group IDs\r\n\t *\r\n\t * @param\t{Object}\tgroups\r\n\t * @return\tDevices\r\n\t */\r\n\tstatic setGroups(groups) {\r\n\t\t\r\n\t\t// set groups\r\n\t\tDevices.Groups = groups;\r\n\t\t\r\n\t\t// set group Ids\r\n\t\tfor (let groupId in groups) {\r\n\t\t\tDevices.addGroupId(groupId, groups[groupId].name);\r\n\t\t}\r\n\t\t\r\n\t\treturn Devices;\r\n\t}\r\n\t\r\n\t/**\r\n\t * Adds a group ID\r\n\t *\r\n\t * @param\t{String}\tid of group\r\n\t * @param\t{String}\tname of group\r\n\t * @return\tDevices\r\n\t */\r\n\tstatic addGroupId(id, name) {\r\n\t\t\r\n\t\tif (id && Devices.GroupIds.indexOf(id) === -1) {\r\n\t\t\tDevices.GroupList.push({ id, name });\r\n\t\t\tDevices.GroupIds.push(id);\r\n\t\t}\r\n\t\t\r\n\t\treturn Devices;\r\n\t}\r\n\t\r\n\t/**\r\n\t * Get devices\r\n\t *\r\n\t * @param\tvoid\r\n\t * @return\tObject\r\n\t */\r\n\tstatic getDevices(options = {}) {\r\n\t\t\r\n\t\tif (typeof options === 'boolean') {\r\n\t\t\toptions = { raw: options }\r\n\t\t}\r\n\t\t\r\n\t\tconst devices = options.raw ? Devices.rawDevices : Devices.Devices;\r\n\t\treturn options.copy ? _copy(devices) : devices;\r\n\t}\r\n\t\r\n\t/**\r\n\t * Get groups\r\n\t *\r\n\t * @param\tvoid\r\n\t * @return\tObject\r\n\t */\r\n\tstatic getGroups() {\r\n\t\t\r\n\t\treturn Devices.Groups;\r\n\t}\r\n\t\r\n\t/**\r\n\t * Get group IDs\r\n\t *\r\n\t * @param\tvoid\r\n\t * @return\tArray\r\n\t */\r\n\tstatic getGroupList() {\r\n\t\t\r\n\t\treturn Devices.GroupList;\r\n\t}\r\n}\r\n","var map = {\n\t\"./light.de\": 331,\n\t\"./light.de.js\": 331,\n\t\"./light.en\": 332,\n\t\"./light.en.js\": 332,\n\t\"./light.js\": 248\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 626;","export { default } from './location'\r\n","var map = {\n\t\"./location.de\": 333,\n\t\"./location.de.js\": 333,\n\t\"./location.en\": 334,\n\t\"./location.en.js\": 334,\n\t\"./location.js\": 243\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 628;","export { default } from './user'\r\n","var map = {\n\t\"./user.de\": 335,\n\t\"./user.de.js\": 335,\n\t\"./user.en\": 336,\n\t\"./user.en.js\": 336,\n\t\"./user.js\": 244\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 630;","export { default } from './window'\r\n","var map = {\n\t\"./window.de\": 337,\n\t\"./window.de.js\": 337,\n\t\"./window.en\": 338,\n\t\"./window.en.js\": 338,\n\t\"./window.js\": 245\n};\n\n\nfunction webpackContext(req) {\n\tvar id = webpackContextResolve(req);\n\treturn __webpack_require__(id);\n}\nfunction webpackContextResolve(req) {\n\tif(!__webpack_require__.o(map, req)) {\n\t\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\t\te.code = 'MODULE_NOT_FOUND';\n\t\tthrow e;\n\t}\n\treturn map[req];\n}\nwebpackContext.keys = function webpackContextKeys() {\n\treturn Object.keys(map);\n};\nwebpackContext.resolve = webpackContextResolve;\nmodule.exports = webpackContext;\nwebpackContext.id = 632;","import React from 'react'\r\nimport i18n from '../../i18n'\r\n\r\nimport AddIcon from '@material-ui/icons/AddCircle'\r\nimport InputButton from '@material-ui/core/Button'\r\n\r\nimport Field from './Field'\r\n\r\n\r\n/*\r\n * STYLES\r\n */\r\nimport { makeStyles } from '@material-ui/core/styles'\r\nconst useStyles = makeStyles((theme) => ({\r\n\tInputButton: {\r\n\t\twidth: '100%'\r\n\t}\r\n}));\r\n\r\n\r\n/*\r\n *\r\n */\r\nexport default function Button(props) {\r\n\tconst { id, label, color, variant, disabled, startIcon, onClick } = props;\r\n\tconst classes = useStyles(props);\r\n\t\r\n\treturn (\r\n\t\t<Field {...props}>\r\n\t\t\t<InputButton\r\n\t\t\t\tkey={id}\r\n\t\t\t\tclasses={{ root: classes.InputButton }}\r\n\t\t\t\tvariant={variant || 'contained'}\r\n\t\t\t\tcolor={color || 'primary'}\r\n\t\t\t\tdisabled={disabled}\r\n\t\t\t\tstartIcon={startIcon || <AddIcon />}\r\n\t\t\t\tonClick={onClick}\r\n\t\t\t\t>\r\n\t\t\t\t\r\n\t\t\t\t{i18n.t(label)}\r\n\t\t\t</InputButton>\r\n\t\t</Field>\r\n\r\n\t)\r\n}","import TextInput from './Text'\r\n\r\n\r\n/*\r\n *\r\n */\r\nexport default function NumberInput(props) {\r\n\treturn TextInput({ ...props, type: 'number' });\r\n}","import React from 'react'\r\nimport i18n from '../../i18n'\r\n\r\nimport MenuItem from '@material-ui/core/MenuItem'\r\n\r\nimport Text from './Text'\r\n\r\n\r\n/*\r\n *\r\n */\r\nexport default function InputSelect(props) {\r\n\tconst { id, selection, val } = props;\r\n\t\r\n\tlet value = '';\r\n\tconst menuOptions = selection.map(option => {\r\n\t\tconst key = Object.keys(option).shift();\r\n\t\t\r\n\t\tif (key === val) {\r\n\t\t\tvalue = val;\r\n\t\t}\r\n\t\t\r\n\t\treturn <MenuItem key={'MenuItem-' + id + '-' + key} value={key}>{i18n.t(option[key])}</MenuItem>\r\n\t});\r\n\t\r\n\treturn (\r\n\t\t<Text\r\n\t\t\t{...props}\r\n\t\t\tval={value}\r\n\t\t\tselect={true}\r\n\t\t\t>\r\n\t\t\t\r\n\t\t\t{menuOptions}\r\n\t\t</Text>\r\n\t);\r\n}","import React from 'react'\r\n\r\nimport Log from '../Log'\r\nimport i18n from '../i18n'\r\n\r\nimport Button from '@material-ui/core/Button'\r\nimport Paper from '@material-ui/core/Paper'\r\n\r\nimport Dialog from '../components/Dialog'\r\nimport EnhancedTable from '../components/EnhancedTable'\r\n\r\n\r\n/*\r\n * STYLES\r\n */\r\nimport { withStyles } from '@material-ui/core/styles'\r\nconst styles = theme => ({\r\n\tpinToTop: {\r\n\t\tposition: 'absolute',\r\n\t\ttop: 0,\r\n\t\tleft: 0\r\n\t}\r\n});\r\n\r\n\r\nconst headCells = [\r\n\t{ id: 'time', disablePadding: false, type: 'Date', label: i18n.t('Time'), noWrap: true },\r\n\t{ id: 'module', disablePadding: false, label: i18n.t('Module'), noWrap: true },\r\n\t{ id: 'criticality', disablePadding: false, label: i18n.t('Criticality'), noWrap: true },\r\n\t{ id: 'message', disablePadding: false, label: i18n.t('Message') },\r\n\t{ id: 'stack', disablePadding: false, type: 'Object', label: i18n.t('Stack Trace') },\r\n];\r\n\r\nconst rowStyles = { // https://material-ui.com/components/alert/#simple-alerts\r\n\t'criticality': {\r\n\t\t'debug': {\r\n\t\t\tcolor: 'rgba(0, 0, 0, 0.4)',\r\n\t\t\tbackgroundColor: 'rgba(0, 0, 0, 0.1)'\r\n\t\t},\r\n\t\t'info': {\r\n\t\t\tcolor: 'rgb(13, 60, 97)',\r\n\t\t\tbackgroundColor: 'rgb(232, 244, 253)'\r\n\t\t},\r\n\t\t'warn': {\r\n\t\t\tcolor: 'rgb(102, 60, 0)',\r\n\t\t\tbackgroundColor: 'rgb(255, 244, 229)'\r\n\t\t},\r\n\t\t'error': {\r\n\t\t\tcolor: 'rgb(97, 26, 21)',\r\n\t\t\tbackgroundColor: 'rgb(253, 236, 234)'\r\n\t\t},\r\n\t\t'success': {\r\n\t\t\tcolor: 'rgb(30, 70, 32)',\r\n\t\t\tbackgroundColor: 'rgb(237, 247, 237)'\r\n\t\t\t\r\n\t\t}\r\n\t}\r\n}\r\n\r\nclass LogsPage extends React.Component {\r\n\t\r\n\trender() {\r\n\t\tconst { classes } = this.props;\r\n\t\t\r\n\t\tconst logs = Log.getLog();\r\n\t\treturn (\r\n\r\n<Dialog\r\n\tclasses={{ CustomDialog: classes.pinToTop }}\r\n\tfullWidth={true}\r\n\tmaxWidth={'xl'}\r\n\t\r\n\topen={(this.props.page === 'logs')}\r\n\tonClose={() => this.props.navigate('home')}\r\n\t\r\n\theader=\"Logs\"\r\n\tactions={\r\n\t\t<Button autoFocus onClick={() => this.props.navigate('home')} color=\"primary\">\r\n\t\t\t{i18n.t('Close')}\r\n\t\t</Button>\r\n\t}\r\n\t>\r\n\t\r\n\t<Paper className={classes.paper}>\r\n\t\t<EnhancedTable\r\n\t\t\theadCells={headCells}\r\n\t\t\trows={logs}\r\n\t\t\trowStyles={rowStyles}\r\n\t\t\t\r\n\t\t\tselectable={false}\r\n\t\t\tsortable={true}\r\n\t\t\ttoolbar={false}\r\n\t\t\tstickyHeader\r\n\t\t\t/>\r\n\t\t\r\n\t</Paper>\r\n\t\r\n</Dialog>\r\n\r\n\t\t)\r\n\t}\r\n}\r\n\r\nexport default withStyles(styles)(LogsPage);\r\n","export default {\r\n\t\"iobrokerWebAdapterUrl\": \"https://192.168.178.29:8082\"\r\n}","import EventEmitter from 'events'\r\nimport functions from './functions'\r\n\r\n\r\n/**\r\n * Function\r\n *\r\n * @param\t{String}\t\tfunctionType\r\n * @return\t{Function}\r\n *\r\n */\r\nexport default class Function extends EventEmitter {\r\n\t\r\n\tconstructor(functionType) {\r\n\t\tsuper();\r\n\t\t\r\n\t\tthis.function = functionType;\r\n\t\t\r\n\t\tif (!this.function) {\t\r\n\t\t\tthrow new Error('No function given!');\r\n\t\t}\r\n\t\t\r\n\t\tthis.functionId = this.function.toLowerCase();\r\n\t\t\r\n\t\t// configuration\r\n\t\tthis.defaults = functions['defaults'].configurations;\r\n\t\tthis.configurations = (functions[this.functionId] && functions[this.functionId].configurations) || {};\r\n\t\t\r\n\t\t// components and actions\r\n\t\tthis.components = { ...functions['defaults'].components, ...(functions[this.functionId] && functions[this.functionId].components) || {} };\r\n\t\tthis.actions = { ...functions['defaults'].actions, ...(functions[this.functionId] && functions[this.functionId].actions) || {} };\r\n\t}\r\n\t\r\n\t/**\r\n\t *\r\n\t *\r\n\t * @return\t{Mixed}\r\n\t * @private\r\n\t */\r\n\t_applyFunction(key, val) {\r\n\t\treturn this._isFunction(key) ? key(val) : val;\r\n\t}\r\n\t\r\n\t/**\r\n\t *\r\n\t *\r\n\t * @return\t{String}\r\n\t * @private\r\n\t */\r\n\t_getValueFromSettings(settings, defaults = '') {\r\n\t\t\r\n\t\tfor (let key in settings) {\r\n\t\t\tif (settings[key] !== undefined) {\r\n\t\t\t\treturn settings[key];\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\treturn defaults;\r\n\t}\r\n\t\r\n\t/**\r\n\t *\r\n\t *\r\n\t * @return\t{Boolean}\r\n\t * @private\r\n\t */\r\n\t_isFunction(key) {\r\n\t\treturn key && typeof key === 'function';\r\n\t}\r\n\t\r\n\t/**\r\n\t *\r\n\t *\r\n\t * @return\t{Boolean}\r\n\t * @private\r\n\t */\r\n\t_isValue(val) {\r\n\t\treturn val !== undefined; // || val === null || val === false; // null is considered a value, so it can be used to actually null the output\r\n\t}\r\n\t\r\n\t/**\r\n\t *\r\n\t *\r\n\t * @return\t{Object}\r\n\t * @private\r\n\t */\r\n\t_setObjectStructure(obj, defaultValue = undefined) {\r\n\t\t\r\n\t\tif (!obj || typeof obj != 'object') {\r\n\t\t\tobj = { 'default': obj || defaultValue };\r\n\t\t}\r\n\t\telse if (typeof obj == 'object' && !obj.default) {\r\n\t\t\tobj.default = defaultValue;\r\n\t\t}\r\n\t\t\r\n\t\treturn obj;\r\n\t}\r\n}\r\n","export default {\r\n\t\"hm-rpc\": \"HomeMatic\",\r\n\t\"shelly\": \"Shelly\",\r\n\t\"sonoff\": \"Sonoff\"\r\n}","import React from 'react'\r\n\r\nimport Log from './Log'\r\nimport i18n, { locales } from './i18n'\r\nimport Function from './Function'\r\nimport Adapters from './config/adapters'\r\n\r\nimport { formatDistanceToNow } from 'date-fns'\r\n\r\n\r\n/**\r\n * Device\r\n *\r\n * @param\t{Object}\tdeviceProperties\r\n * @param\t{String}\tdeviceProperties.id\r\n * @param\t{String}\tdeviceProperties.name\r\n * @param\t{String}\t[deviceProperties.room=null]\r\n * @param\t{String}\tdeviceProperties.function\r\n * @param\t{Object}\tdeviceProperties.states\r\n * @param\t{Object}\t[deviceProperties.attributes={}]\r\n * @param\t{Object}\tdeviceProperties.options\r\n * @param\t{Object}\tsocket\r\n * @return\t{Device}\r\n * @see https://github.com/Zefau/ioBroker.jarvis/issues/21\r\n *\r\n */\r\nexport default class Device extends Function {\r\n\t\r\n\tconstructor(deviceProperties, socket) {\r\n\t\ttry {\r\n\t\t\tsuper(deviceProperties.function);\r\n\t\t}\r\n\t\tcatch(err) {\r\n\t\t\tthrow new Error('No function given for device ' + deviceProperties.name + '!');\r\n\t\t}\r\n\t\t\r\n\t\t// initialise class data\r\n\t\tthis.id = deviceProperties.id;\r\n\t\tthis.name = deviceProperties.name;\r\n\t\t\r\n\t\tthis.room = deviceProperties.room || null;\r\n\t\t\r\n\t\tthis.states = deviceProperties.states;\r\n\t\tthis.options = deviceProperties.options;\r\n\t\tthis.attributes = deviceProperties.attributes || {};\r\n\t\t\r\n\t\tthis.socket = socket;\r\n\t\t\r\n\t\t// verify data\r\n\t\tif (!this.options || typeof this.options !== 'object' || Object.keys(this.options).length === 0 || this.options.group === undefined) {\r\n\t\t\tthrow new Error('Device' + (deviceProperties.id || deviceProperties.name ? ' ' + (deviceProperties.name || deviceProperties.id) : '') + ' not defined for jarvis!');\r\n\t\t}\r\n\t\telse if (!this.states || typeof this.states !== 'object' || Object.keys(this.states).length === 0) {\r\n\t\t\tthrow new Error('Insufficent properties provided' + (deviceProperties.id || deviceProperties.name ? ' for device ' + (deviceProperties.name || deviceProperties.id) : '') + ' (no states defined)!');\r\n\t\t}\r\n\t\telse if (!this.id || !this.name || !this.function) {\r\n\t\t\tthrow new Error('Insufficent properties provided' + (deviceProperties.id || deviceProperties.name ? ' for device ' + (deviceProperties.name || deviceProperties.id) : '') + ' (no id, name or function defined)!');\r\n\t\t}\r\n\t\telse if (!this.socket) {\t\r\n\t\t\tthrow new Error('No socket given!');\r\n\t\t}\r\n\t\t\r\n\t\t// hierarchy\r\n\t\tthis.children = deviceProperties.children || [];\r\n\t\tthis.parent = deviceProperties.parent || null;\r\n\t\t\r\n\t\t// do some stuff\r\n\t\tthis._setProperties();\r\n\t\tthis.stateSubscriptions = [];\r\n\t\t\r\n\t\t// listen for errors of the device\r\n\t\tthis.on('error', err => Log._('Device', [ 'Device error occured!', err.message ], 'error', false, err.stack));\r\n\t}\r\n\t\r\n\t/**\r\n\t *\r\n\t *\r\n\t * @return\t{Object|String}\r\n\t * @private\r\n\t */\r\n\t_getStateFromKey(stateKey = null, stateType = 'state') {\r\n\t\t\r\n\t\t// already a state object\r\n\t\tif (stateKey && typeof stateKey === 'object') {\r\n\t\t\treturn stateKey;\r\n\t\t}\r\n\t\t\r\n\t\t// get state object\r\n\t\tlet s = this.states[stateKey || this.primaryStateKey];\r\n\t\t\r\n\t\t// state does not exist\r\n\t\tif (s === undefined) {\r\n\t\t\treturn i18n.t('State does not exist in device %device%').replace(/%device%/g, this.name) + '!';\r\n\t\t}\r\n\t\t\r\n\t\t// state not an object so far\r\n\t\telse if (typeof s === 'string') {\r\n\t\t\tthis.states[stateKey || this.primaryStateKey] = { [stateType]: { 'node': s }};\r\n\t\t\ts = this.states[stateKey || this.primaryStateKey];\r\n\t\t}\r\n\t\telse if (typeof s[stateType] === 'string') {\r\n\t\t\tthis.states[stateKey || this.primaryStateKey][stateType] = { 'node': s[stateType] };\r\n\t\t\ts = this.states[stateKey || this.primaryStateKey];\r\n\t\t}\r\n\t\t\r\n\t\t// state not valid\r\n\t\tif (!s || !s[stateType]) {\r\n\t\t\treturn i18n.t('Incorrect or non-defined state key for device %device%').replace(/%device%/g, this.name).replace(/%stateType%/g, stateType) + '!';\r\n\t\t}\r\n\t\telse if (typeof s[stateType] == 'object' && !s[stateType].node) {\r\n\t\t\treturn i18n.t('No %stateType% specified for device %device%').replace(/%device%/g, this.name).replace(/%stateType%/g, stateType) + '!';\r\n\t\t}\r\n\t\t\r\n\t\treturn s;\r\n\t}\r\n\t\r\n\t/**\r\n\t *\r\n\t *\r\n\t * @private\r\n\t */\r\n\t_getConfigurationSetting(config, stateKey, attribute, stateVal) {\r\n\t\t//console.log(this.name, config, stateKey, attribute, stateVal, this[config], this[config][stateKey], this[config]['_any']);\r\n\t\t\r\n\t\tif (this[config][stateKey] && this[config][stateKey][attribute]) {\r\n\t\t\t\r\n\t\t\t// 1. if stateKey (e.g. level, power) is available, try to replace an attribute (e.g. icon, unit or for styles state, icon) based on current state (e.g. true, false)\r\n\t\t\tif (typeof this[config][stateKey][attribute] === 'object') {\r\n\t\t\t\t\r\n\t\t\t\tconst stateValKeys = Object.keys(this[config][stateKey][attribute]);\r\n\t\t\t\tif (stateValKeys.toString().indexOf('<') > -1 || stateValKeys.toString().indexOf('>') > -1 || stateValKeys.toString().indexOf('!=') > -1) { // !=, >, >=, <, <=\r\n\t\t\t\t\t\r\n\t\t\t\t\tlet val = this[config][stateKey][attribute]['default'];\r\n\t\t\t\t\tstateValKeys.forEach(stateValKey => {\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tlet stateValValue = stateValKey.replace('<=', '').replace('<', '').replace('>=', '').replace('>', '').replace('!=', '');\r\n\t\t\t\t\t\tif (stateValKey.indexOf('<=') > -1 && stateVal <= stateValValue) {\r\n\t\t\t\t\t\t\tval = this[config][stateKey][attribute][stateValKey];\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse if (stateValKey.indexOf('<') > -1 && stateVal < stateValValue) {\r\n\t\t\t\t\t\t\tval = this[config][stateKey][attribute][stateValKey];\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse if (stateValKey.indexOf('>=') > -1 && stateVal >= stateValValue) {\r\n\t\t\t\t\t\t\tval = this[config][stateKey][attribute][stateValKey];\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse if (stateValKey.indexOf('>') > -1 && stateVal > stateValValue) {\r\n\t\t\t\t\t\t\tval = this[config][stateKey][attribute][stateValKey];\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\telse if (stateValKeys.toString().indexOf('!=') > -1 && stateVal != stateValValue) {  // eslint-disable-line eqeqeq\r\n\t\t\t\t\t\t\tval = this[config][stateKey][attribute][stateValKey];\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t});\r\n\t\t\t\t\t\r\n\t\t\t\t\treturn val;\r\n\t\t\t\t}\r\n\t\t\t\telse {\r\n\t\t\t\t\treturn super._isValue(this[config][stateKey][attribute][stateVal]) ? this[config][stateKey][attribute][stateVal] : this[config][stateKey][attribute]['default'];\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\t// 2. if #1 is a function, apply it\r\n\t\t\telse if (super._isFunction(this[config][stateKey][attribute])) {\r\n\t\t\t\treturn this[config][stateKey][attribute](stateVal, stateKey, this);\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\t// 3. fallback to stateKey with attribute, if defined but neither an object (thus stateless) nor a function\r\n\t\t\telse if (typeof this[config][stateKey][attribute] === 'string') {\r\n\t\t\t\treturn this[config][stateKey][attribute];\r\n\t\t\t}\r\n\t\t}\r\n\t\telse if (this[config]['_any'] && this[config]['_any'][attribute]) {\r\n\t\t\t\r\n\t\t\t// 4. fallback to _any if no stateKey (e.g. level, power) is given, but consider attribute to be stateful (e.g. true, false)\r\n\t\t\tif (typeof this[config]['_any'][attribute] === 'object') {\r\n\t\t\t\treturn super._isValue(this[config]['_any'][attribute][stateVal]) ? this[config]['_any'][attribute][stateVal] : this[config]['_any'][attribute]['default'];\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\t// 5. if #4 is a function, apply it\r\n\t\t\telse if (super._isFunction(this[config]['_any'][attribute])) {\r\n\t\t\t\treturn this[config]['_any'][attribute](stateVal, stateKey, this);\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\t// nothing, return undefined (not null, because this would mean take an empty value)\r\n\t\treturn undefined;\r\n\t}\r\n\t\r\n\t/**\r\n\t *\r\n\t *\r\n\t * @private\r\n\t */\r\n\t_getUserSetting(stateKey, attribute, stateVal) {\r\n\t\t\r\n\t\tlet options = this.states;\r\n\t\tif (options[stateKey] && options[stateKey][attribute]) {\r\n\t\t\tif (typeof options[stateKey][attribute] === 'object') {\r\n\t\t\t\treturn super._isValue(options[stateKey][attribute][stateVal]) ? options[stateKey][attribute][stateVal] : options[stateKey][attribute]['default'];\r\n\t\t\t}\r\n\t\t\telse if (super._isFunction(options[stateKey][attribute])) {\r\n\t\t\t\treturn options[stateKey][attribute](stateVal, stateKey, this);\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\treturn options[stateKey][attribute];\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\treturn undefined;\r\n\t}\r\n\t\r\n\t/**\r\n\t *\r\n\t *\r\n\t *\r\n\t * @return void\r\n\t * @private\r\n\t *\r\n\t */\r\n\t_setProperties() {\r\n\t\t\r\n\t\tlet states = Object.keys(this.states);\r\n\t\t\r\n\t\t// delete ignored states\r\n\t\tif (this.options.ignoredStates) {\r\n\t\t\tthis.options.ignoredStates = Array.isArray(this.options.ignoredStates) ? this.options.ignoredStates : [this.options.ignoredStates];\r\n\t\t\t\r\n\t\t\tthis.options.ignoredStates.forEach(ignoredState => {\r\n\t\t\t\tif (this.states[ignoredState]) {\r\n\t\t\t\t\tdelete this.states[ignoredState];\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\t\t\r\n\t\t// get hidden states\r\n\t\tthis.options.hiddenStates = this.options.hiddenStates ? (Array.isArray(this.options.hiddenStates) ? this.options.hiddenStates : [this.options.hiddenStates]) : [];\r\n\t\t\r\n\t\t// properties\r\n\t\tthis.primaryStateKey = this.options.primary || states[0];\r\n\t\tthis.secondaryStateKey = this.options.secondary || null;\r\n\t\t\r\n\t\t// manufacturer\r\n\t\tthis.states[this.primaryStateKey] = this._getStateFromKey(this.primaryStateKey);\r\n\t\tthis.options.manufacturer = (this.primaryStateKey && Adapters[this.states[this.primaryStateKey].state.node.substr(0, this.states[this.primaryStateKey].state.node.indexOf('.'))]) || '';\r\n\t\t\r\n\t\t// all options\r\n\t\tthis.options.group = Array.isArray(this.options.group) ? this.options.group : [this.options.group];\r\n\t\tthis.options.sort = this.options.sort || 999;\r\n\t\t\r\n\t\tthis.options.label = (this.options.label && (typeof this.options.label === 'string' && this.options.label.replace(/%name%/g, this.name))) || this.options.label || this.name;\r\n\t}\r\n\t\r\n\t/**\r\n\t *\r\n\t *\r\n\t *\r\n\t * @return\t{Object}\r\n\t * @private\r\n\t */\r\n\t_updateDeviceState(stateKey, state) {\r\n\t\t\r\n\t\t// add time changed\r\n\t\tstate.timeChanged = formatDistanceToNow(new Date(state.lc-5*1000), { locale: locales[i18n.getLanguage()], includeSeconds: true, addSuffix: true })\r\n\t\t\r\n\t\t// add unit\r\n\t\tstate.unit = '';\r\n\t\t\r\n\t\t// change val\r\n\t\tlet val = this._getConfigurationSetting('configurations', stateKey, 'val', state.val);\r\n\t\tstate.val = val !== undefined ? val : state.val;\r\n\t\t\r\n\t\t// assign value\r\n\t\tstate.value = state.val;\r\n\t\t\r\n\t\t// mapping of value to state values\r\n\t\t[{ 'value': 'value' }, { 'display': 'value' }, { 'unit': 'unit' }].forEach(pair => {\r\n\t\t\tlet attribute = Object.keys(pair).toString();\r\n\t\t\tlet option = Object.values(pair).toString();\r\n\t\t\tlet settings = {};\r\n\t\t\t\r\n\t\t\t// get user setting\r\n\t\t\tsettings['options'] = this._getUserSetting(stateKey, attribute, state.val);\r\n\t\t\t\r\n\t\t\t// get function setting or fallback to defaults\r\n\t\t\t['configurations', 'defaults'].forEach(config => {\r\n\t\t\t\tsettings[config] = this._getConfigurationSetting(config, stateKey, attribute, state.val);\r\n\t\t\t});\r\n\t\t\t\r\n\t\t\tstate[option] = super._getValueFromSettings(settings, state[option]);\r\n\t\t});\r\n\t\t\r\n\t\tstate.value = i18n.t(state.value);\r\n\t\treturn state;\r\n\t}\r\n\t\r\n\t/**\r\n\t *\r\n\t *\r\n\t */\r\n\tget(property) {\r\n\t\treturn this[property] || null;\r\n\t}\r\n\t\r\n\t/**\r\n\t *\r\n\t *\r\n\t * @param\t{String}\t[stateKey=this.primaryStateKey]\r\n\t * @return\t{React.Component}\r\n\t */\r\n\tgetAction(stateKey = null, forceDefault = false) {\r\n\t\tstateKey = stateKey || this.primaryStateKey;\r\n\t\t\r\n\t\tconst state = this.states[stateKey].state.value;\r\n\t\tconst stateVal = state ? state.val : null;\r\n\t\t\r\n\t\tconst Action = (!forceDefault && this.actions[stateKey]) || this.actions.Action;\r\n\t\treturn <Action key={'action-' + this.id + '-' + stateKey} device={this} state={state} stateKey={stateKey} stateVal={stateVal} styles={this.getStyle('state', stateKey, stateVal)} />\r\n\t}\r\n\t\r\n\t/**\r\n\t *\r\n\t *\r\n\t * @param\t{String}\t[stateKey=this.primaryStateKey]\r\n\t * @return\t{React.Component}\r\n\t */\r\n\tgetComponent(stateKey) {\r\n\t\tstateKey = stateKey || this.primaryStateKey;\r\n\t\t\r\n\t\tconst state = this.states[stateKey].state.value;\r\n\t\tconst stateVal = state ? state.val : null;\r\n\t\t\r\n\t\tconst Component = this.components[stateKey];\r\n\t\treturn (Component && <Component title={this.states[stateKey].label || i18n.t(this.function + '#' + stateKey)} device={this} stateKey={stateKey} stateVal={stateVal} />) || this.states[stateKey].label || i18n.t(this.function + '#' + stateKey);\r\n\t}\r\n\t\r\n\t/**\r\n\t *\r\n\t *\r\n\t * @param\t{String}\t[stateKey=this.primaryStateKey]\r\n\t * @param\t{String}\t[stateProperty=null]\r\n\t * @return\t{String}\r\n\t */\r\n\tgetDeviceState(stateKey = null, stateProperty = null) {\r\n\t\tconst s = this.states[stateKey || this.primaryStateKey];\r\n\t\t\r\n\t\tlet deviceState = null;\r\n\t\t\r\n\t\tif (s && s.state && stateProperty !== null && s.state.value !== undefined && s.state.value[stateProperty] !== undefined) {\r\n\t\t\tdeviceState = s.state.value[stateProperty];\r\n\t\t}\r\n\t\telse if (s && s.state && stateProperty === null && s.state.value !== undefined) {\r\n\t\t\tdeviceState = s.state.value;\r\n\t\t}\r\n\t\t\r\n\t\treturn deviceState;\r\n\t}\r\n\t\r\n\t/**\r\n\t * Get an icon based on the current device state (or falls back to a default).\r\n\t *\r\n\t * @param\t{String}\t[stateKey=this.primaryStateKey]\r\n\t * @param\t{String}\t[stateVal=default]\r\n\t * @param\t{String}\t[defaultIcon=null]\r\n\t * @return\t{String}\r\n\t */\r\n\tgetIcon(stateKey, stateVal = '', defaultIcon = undefined) {\r\n\t\t\r\n\t\tlet settings = {};\r\n\t\tstateKey = stateKey || this.primaryStateKey;\r\n\t\t\r\n\t\t// get user setting\r\n\t\tsettings['options'] = this._getUserSetting(stateKey, 'icon', stateVal);\r\n\t\t\r\n\t\t// get function setting or fallback to defaults\r\n\t\t['configurations', 'defaults'].forEach(config => {\r\n\t\t\tsettings[config] = this._getConfigurationSetting(config, stateKey, 'icon', stateVal);\r\n\t\t});\r\n\t\t\r\n\t\treturn super._getValueFromSettings(settings, defaultIcon);\r\n\t}\r\n\t\r\n\t/**\r\n\t *\r\n\t *\r\n\t */\r\n\tgetOption(option, stateVal = 'default') {\r\n\t\treturn (this.options[option] && (this.options[option][stateVal] || this.options[option]['default'])) || this.options[option] || null;\r\n\t}\r\n\t\r\n\t/**\r\n\t *\r\n\t *\r\n\t */\r\n\tgetStyle(attribute, stateKey = null, stateVal = 'default') {\r\n\t\t\r\n\t\tlet settings = {};\r\n\t\tstateKey = stateKey || this.primaryStateKey;\r\n\t\t\r\n\t\t// get user setting\r\n\t\tsettings['options'] = this._getUserSetting(stateKey, attribute + 'Style', stateVal);\r\n\t\t\r\n\t\t// get function setting or fallback to defaults\r\n\t\t['configurations', 'defaults'].forEach(config => {\r\n\t\t\tsettings[config] = this._getConfigurationSetting(config, stateKey, attribute + 'Style', stateVal);\r\n\t\t});\r\n\t\t\r\n\t\treturn super._getValueFromSettings(settings, {});\r\n\t}\r\n\t\r\n\t/**\r\n\t *\r\n\t *\r\n\t */\r\n\tlisten(eventName, callback) {\r\n\t\t\r\n\t\tif (typeof eventName === 'function') {\r\n\t\t\tcallback = eventName;\r\n\t\t\teventName = 'stateChange';\r\n\t\t}\r\n\t\t\r\n\t\t// check for duplicates\r\n\t\tlet duplicate = this.listeners(eventName).findIndex(listener => listener.toString() == callback.toString()) > -1; // eslint-disable-line eqeqeq\r\n\t\t\r\n\t\t// attach callback\r\n\t\tif (!duplicate) {\r\n\t\t\tthis.on(eventName, callback);\r\n\t\t}\r\n\t}\r\n\t\r\n\t/**\r\n\t * Requests all state values from the backend.\r\n\t *\r\n\t * @param\t{Boolean}\t[subscribe=false]\r\n\t * @return\t{Array<Promises>}\r\n\t *\r\n\t */\r\n\trequestDeviceStates(subscribe = false) {\r\n\t\t\r\n\t\tlet responses = [];\r\n\t\tfor (let stateKey in this.states) {\r\n\t\t\tresponses.push(this.requestDeviceState(stateKey, subscribe));\r\n\t\t}\r\n\t\t\r\n\t\treturn responses;\r\n\t}\r\n\t\r\n\t/**\r\n\t * Requests a state value from the backend.\r\n\t *\r\n\t * @param\t{String}\t[stateKey=this.primaryStateKey]\r\n\t * @param\t{Boolean}\t[subscribe=false]\r\n\t * @return\t{Promise}\r\n\t *\r\n\t */\r\n\trequestDeviceState(stateKey = null, subscribe = false) {\r\n\t\t\r\n\t\tstateKey = stateKey || this.primaryStateKey;\r\n\t\tlet s = this._getStateFromKey(stateKey);\r\n\t\tif (typeof s == 'string') {\r\n\t\t\treturn Promise.reject({ 'success': false, 'stateKey': stateKey, 'error': s });\r\n\t\t}\r\n\t\t\r\n\t\treturn new Promise((resolve, reject) => {\r\n\t\t\t\r\n\t\t\t// send cached value if present and subscrbe (means always updated)\r\n\t\t\tif (s.state.value !== undefined && this.stateSubscriptions.indexOf(stateKey) > -1) {\r\n\t\t\t\t\r\n\t\t\t\t// publish state\r\n\t\t\t\tthis.emit('stateChange', stateKey, s.state.value, this);\r\n\t\t\t\t\r\n\t\t\t\t// resolve\r\n\t\t\t\tresolve({ 'success': true, 'stateKey': stateKey, 'cached': true });\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\t// request from backend\r\n\t\t\telse {\r\n\t\t\t\tthis.socket.getState(s.state.node)\r\n\t\t\t\t\t.then(state => {\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t// state does not exist\r\n\t\t\t\t\t\tif (state === null) {\r\n\t\t\t\t\t\t\treject({ 'success': false, 'stateKey': stateKey, 'error': 'State ' + s.state.node + ' not found!' });\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t// set result\r\n\t\t\t\t\t\ts.state.value = this._updateDeviceState(stateKey, state);\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t// publish state change\r\n\t\t\t\t\t\tthis.emit('stateChange', stateKey, s.state.value, this);\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t// subscribe to state\r\n\t\t\t\t\t\tif (subscribe) {\r\n\t\t\t\t\t\t\tthis.subscribeDeviceState(stateKey).catch(err => reject(err));\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t// resolve\r\n\t\t\t\t\t\tresolve({ 'success': true, 'stateKey': stateKey, 'cached': false });\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.catch(err => reject({ 'success': false, 'stateKey': stateKey, 'error': err }));\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\t\r\n\t/**\r\n\t * Requests a state value from the backend.\r\n\t *\r\n\t * @param\t{String}\t[stateKey=this.primaryStateKey]\r\n\t * @param\t{Boolean}\t[subscribe=false]\r\n\t * @param\t{Object}\t[options={}]\r\n\t * @return\t{Promise}\r\n\t * @see https://github.com/ioBroker/ioBroker.history#access-values-from-javascript-adapter\r\n\t *\r\n\t */\r\n\trequestDeviceStateHistory(stateKey = null, subscribe = false, options = {}) {\r\n\t\t\r\n\t\tstateKey = stateKey || this.primaryStateKey;\r\n\t\tlet s = this._getStateFromKey(stateKey);\r\n\t\tif (typeof s == 'string') {\r\n\t\t\treturn Promise.reject({ 'success': false, 'stateKey': stateKey, 'error': s });\r\n\t\t}\r\n\t\t\r\n\t\treturn new Promise((resolve, reject) => {\r\n\t\t\ts.state.historyCache = s.state.historyCache || {};\r\n\t\t\t\r\n\t\t\t// send cached value if present and subscrbe (means always updated)\r\n\t\t\tif (options.start && options.end && options.step && s.state.historyCache[options.start + '#' + options.end + '#' + options.step] !== undefined) {\r\n\t\t\t\t\r\n\t\t\t\t// publish state\r\n\t\t\t\tthis.emit('historyChange', stateKey, s.state.historyCache[options.start + '#' + options.end + '#' + options.step], s.state, this);\r\n\t\t\t\t\r\n\t\t\t\t// resolve\r\n\t\t\t\tresolve({ 'success': true, 'stateKey': stateKey, 'cached': true });\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\t// request from backend\r\n\t\t\telse {\r\n\t\t\t\tthis.socket.getStateHistory(s.state.node, options)\r\n\t\t\t\t\t.then(history => {\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t// state does not exist\r\n\t\t\t\t\t\tif (history === null) {\r\n\t\t\t\t\t\t\treject({ 'success': false, 'stateKey': stateKey, 'error': 'State ' + s.state.node + ' not found!' });\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t// cache result\r\n\t\t\t\t\t\tif (options.start && options.end && options.step) {\r\n\t\t\t\t\t\t\ts.state.historyCache[options.start + '#' + options.end + '#' + options.step] = history;\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t// set result\r\n\t\t\t\t\t\ts.state.history = history;\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t// publish state change\r\n\t\t\t\t\t\tthis.emit('historyChange', stateKey, s.state.history, s.state, this);\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t// subscribe to state\r\n\t\t\t\t\t\tif (subscribe) {\r\n\t\t\t\t\t\t\tthis.subscribeDeviceState(stateKey).catch(err => reject(err));\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t// resolve\r\n\t\t\t\t\t\tresolve({ 'success': true, 'stateKey': stateKey, 'cached': false });\r\n\t\t\t\t\t})\r\n\t\t\t\t\t.catch(err => reject({ 'success': false, 'stateKey': stateKey, 'error': err }));\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\t\r\n\t/**\r\n\t *\r\n\t *\r\n\t */\r\n\tsetAction(action) {\r\n\t\tthis.options.action = action;\r\n\t}\r\n\t\r\n\t/**\r\n\t *\r\n\t *\r\n\t */\r\n\tsetComponent(component) {\r\n\t\tthis.options.label = component;\r\n\t}\r\n\t\r\n\t/**\r\n\t *\r\n\t *\r\n\t * @param\t{String}\tvalue\r\n\t * @param\t{String}\t[stateKey=this.primaryStateKey]\r\n\t * @return\tvoid\r\n\t */\r\n\tsetDeviceState(stateKey = null, value) {\r\n\t\t\r\n\t\tstateKey = stateKey || this.primaryStateKey;\r\n\t\tlet s = this._getStateFromKey(stateKey, 'action');\r\n\t\tif (typeof s == 'string') {\r\n\t\t\treturn Promise.reject({ 'success': false, 'stateKey': stateKey, 'error': s });\r\n\t\t}\r\n\t\t\r\n\t\treturn new Promise((resolve, reject) => {\r\n\t\t\tthis.socket.setState(s.action.node, value)\r\n\t\t\t\t.then(res => {\r\n\t\t\t\t\r\n\t\t\t\t\t// get state value if not subscribed\r\n\t\t\t\t\tif (this.stateSubscriptions.indexOf(stateKey) === -1) {\r\n\t\t\t\t\t\tthis.requestDeviceState(stateKey);\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t\t// resolve\r\n\t\t\t\t\tresolve({ 'success': true, 'stateKey': stateKey });\r\n\t\t\t\t})\r\n\t\t\t\t.catch(err => reject({ 'success': false, 'stateKey': stateKey, 'error': err }));\r\n\t\t});\r\n\t}\r\n\t\r\n\t/**\r\n\t *\r\n\t *\r\n\t * @param\t{String}\t[stateKey=this.primaryStateKey]\r\n\t * @return\tvoid\r\n\t */\r\n\tsubscribeDeviceState(stateKey = null) {\r\n\t\t\r\n\t\tstateKey = stateKey || this.primaryStateKey;\r\n\t\tlet s = this._getStateFromKey(stateKey);\r\n\t\tif (typeof s == 'string') {\r\n\t\t\treturn Promise.reject({ 'success': false, 'stateKey': stateKey, 'error': s });\r\n\t\t}\r\n\t\t\r\n\t\t// add subscription\t\r\n\t\tif (this.stateSubscriptions.indexOf(stateKey) === -1) {\r\n\t\t\tthis.stateSubscriptions.push(stateKey);\r\n\t\t\r\n\t\t\t// subscribe\r\n\t\t\treturn new Promise(resolve => {\r\n\t\t\t\tthis.socket.subscribeState(s.state.node, (id, state, params) => {\r\n\t\t\t\t\t\r\n\t\t\t\t\tif (state && state.val !== this.getDeviceState(stateKey, 'val')) {\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t// format value\r\n\t\t\t\t\t\ts.state.value = this._updateDeviceState(stateKey, state);\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t// publish state change\r\n\t\t\t\t\t\tthis.emit('stateChange', stateKey, s.state.value, this);\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t// publish to children as well\r\n\t\t\t\t\t\tthis.children.forEach(child => child.emit('stateChange', stateKey, s.state.value, this));\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t\t\r\n\t\t\t\tresolve({ 'success': true, 'stateKey': stateKey });\r\n\t\t\t});\r\n\t\t}\r\n\t\telse {\r\n\t\t\treturn Promise.reject({ 'success': false, 'stateKey': stateKey, 'error': 'State already subscribed!' });\r\n\t\t}\r\n\t}\r\n\t\r\n\t/**\r\n\t *\r\n\t *\r\n\t */\r\n\tunlisten(eventName, callback) {\r\n\t\t\r\n\t\tif (typeof eventName === 'function') {\r\n\t\t\tcallback = eventName;\r\n\t\t\teventName = 'stateChange';\r\n\t\t}\r\n\t\t\r\n\t\tthis.off(eventName, callback);\r\n\t}\r\n}\r\n","\r\nexport default {\r\n\tconfiguration: require('./ConfigurationPage').default,\r\n\tlogs: require('./LogsPage').default,\r\n}","import React, { useState, useEffect } from 'react'\r\nimport clsx from 'clsx'\r\n\r\nimport i18n from '../i18n'\r\n\r\nimport AppBar from '@material-ui/core/AppBar'\r\nimport Toolbar from '@material-ui/core/Toolbar'\r\nimport Typography from '@material-ui/core/Typography'\r\nimport Hidden from '@material-ui/core/Hidden'\r\nimport IconButton from '@material-ui/core/IconButton'\r\nimport Tooltip from '@material-ui/core/tooltip'\r\nimport Badge from '@material-ui/core/Badge'\r\nimport NotificationsIcon from '@material-ui/icons/Notifications'\r\nimport MenuIcon from '@material-ui/icons/Menu'\r\nimport DonateIcon from '@material-ui/icons/Favorite'\r\nimport SettingsIcon from '@material-ui/icons/Settings'\r\n\r\n\r\n/*\r\n * STYLES\r\n */\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nconst useStyles = makeStyles(theme => ({\r\n\tappBar: {\r\n\t\tflexGrow: 1,\r\n\t\tboxShadow: 'none',\r\n\t\ttransform: 'none',\r\n\t},\r\n\ttoolbar: {\r\n\t\tbackgroundColor: theme.palette.primary.main\r\n\t},\r\n\tmenuButton: {\r\n\t\tmarginRight: theme.spacing(2)\r\n\t},\r\n\ttitle: {\r\n\t\tflexGrow: 1,\r\n\t},\r\n\ticon: {\r\n\t\t...theme.components.icon,\r\n\t\tcolor: '#fff',\r\n\t\tpaddingRight: '6px',\r\n\t\twidth: '1em',\r\n\t\theight: '1em',\r\n\t\tdisplay: 'inline-block',\r\n\t\tfontSize: '1.5rem',\r\n\t\ttransition: 'fill 200ms cubic-bezier(0.4, 0, 0.2, 1) 0ms',\r\n\t\tflexShrink: 0,\r\n\t\tuserSelect: 'none'\r\n\t},\r\n\tnotConnected: {\r\n\t\tcolor: '#f30'\r\n\t}\r\n}));\r\n\r\n\r\nexport default function TopBar(props) {\r\n\tconst classes = useStyles();\r\n\t\r\n\tconst { children, title, connectionStatus, toggleDrawer, navigate, notifications } = props;\r\n\tconst [ icon, label ] = title.indexOf('|') > -1 ? title.split('|') : [ null, title ];\r\n\t\r\n\tconst connectionStatusIcon = connectionStatus === true ? 'lan-connect' : (connectionStatus === 'pending' ? 'lan-pending' : 'lan-disconnect');\r\n\tconst connectionStatusTooltip = connectionStatus === true ? i18n.t('Connected to ioBroker') : (connectionStatus === 'pending' ? i18n.t('Not connected to ioBroker! Reconnecting..') : i18n.t('Not connected to ioBroker! Connection failed!'));\r\n\t\r\n\treturn (\r\n\r\n<AppBar id=\"appBar\" position=\"static\" className={classes.appBar}>\r\n\r\n\t<Toolbar className={classes.toolbar}>\r\n\t\t\r\n\t\t<Typography variant=\"h6\" className={classes.title}>\r\n\t\t\t{icon && <span className={clsx(classes.icon, 'mdi mdi-' + icon)}></span>}\r\n\t\t\t{label !== 'null' && label}\r\n\t\t</Typography>\r\n\t\t\r\n\t\t<Hidden smDown>\r\n\t\t\t{connectionStatus !== true && <IconButton classes={{ root: classes.notConnected }} color=\"inherit\" onClick={() => navigate('logs')}>\r\n\t\t\t\t<Tooltip title={i18n.t(connectionStatusTooltip)}>\r\n\t\t\t\t\t<span className={\"mdi mdi-\" + connectionStatusIcon}></span>\r\n\t\t\t\t</Tooltip>\r\n\t\t\t</IconButton>}\r\n\t\t\t<IconButton color=\"inherit\" onClick={() => navigate('donate')}>\r\n\t\t\t\t<DonateIcon />\r\n\t\t\t</IconButton>\r\n\t\t\t<IconButton color=\"inherit\" onClick={() => navigate('configuration')}>\r\n\t\t\t\t<SettingsIcon />\r\n\t\t\t</IconButton>\r\n\t\t</Hidden>\r\n\t\t\r\n\t\t{/*\r\n\t\t<IconButton color=\"inherit\" onClick={() => toggleDrawer('notificationDrawer', true)}>\r\n\t\t\t<Badge badgeContent={notifications} color=\"secondary\">\r\n\t\t\t\t<NotificationsIcon />\r\n\t\t\t</Badge>\r\n\t\t</IconButton>\r\n\t\t*/}\r\n\t\t\r\n\t</Toolbar>\r\n\t\r\n\t{children}\r\n</AppBar>\r\n\r\n\t);\r\n}\r\n","/*\r\n * by QoP <https://stackoverflow.com/users/4484822/qop>\r\n * @see https://stackoverflow.com/questions/36862334/get-viewport-window-height-in-reactjs\r\n */\r\nimport { useState, useEffect } from 'react';\r\n\r\nfunction getWindowDimensions() {\r\n  const { innerWidth: width, innerHeight: height } = window;\r\n  return {\r\n    width,\r\n    height\r\n  };\r\n}\r\n\r\nexport default function useWindowDimensions() {\r\n  const [windowDimensions, setWindowDimensions] = useState(getWindowDimensions());\r\n\r\n  useEffect(() => {\r\n    function handleResize() {\r\n      setWindowDimensions(getWindowDimensions());\r\n    }\r\n\r\n    window.addEventListener('resize', handleResize);\r\n    return () => window.removeEventListener('resize', handleResize);\r\n  }, []);\r\n\r\n  return windowDimensions;\r\n}\r\n","import React, { useState, useEffect, useRef, useCallback } from 'react'\r\nimport clsx from 'clsx'\r\n\r\nimport Settings from '../Settings'\r\nimport useWindowDimensions from '../helpers/useWindowDimensions'\r\n\r\nimport Tabs from '@material-ui/core/Tabs'\r\nimport Tab from '@material-ui/core/Tab'\r\nimport Box from '@material-ui/core/Box'\r\n\r\n\r\n/*\r\n * STYLES\r\n */\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nconst useStyles = makeStyles(theme => ({\r\n\ticon: {\r\n\t\t...theme.components.icon,\r\n\t\tcolor: '#fff',\r\n\t\tpaddingBottom: '6px',\r\n\t\twidth: '1em',\r\n\t\theight: '1em',\r\n\t\tdisplay: 'inline-block',\r\n\t\tfontSize: '1.5rem',\r\n\t\ttransition: 'fill 200ms cubic-bezier(0.4, 0, 0.2, 1) 0ms',\r\n\t\tflexShrink: 0,\r\n\t\tuserSelect: 'none'\r\n\t},\r\n\ttabs: {\r\n\t\tbackgroundColor: theme.palette.primary.main,\r\n\t\tpaddingLeft: theme.spacing(),\r\n\t\tcolor: '#fff',\r\n\t\twidth: 'calc(100% - ' + theme.spacing() + 'px)',\r\n\t\tzIndex: 101,\r\n\t\tborderBottom: '5px solid #eee'\r\n\t},\r\n\tfixed: {\r\n\t\tposition: 'fixed',\r\n\t\ttop: 0\r\n\t},\r\n\tindicator: {\r\n\t\tbackgroundColor: '#fff',\r\n\t},\r\n\tfullscreen: {\r\n\t\tmarginLeft: -theme.spacing(),\r\n\t\tmarginTop: '-5px',\r\n\t},\r\n\tgrid: {\r\n\t\tpaddingBottom: '30px'\r\n\t}\r\n}));\r\n\r\n\r\nexport default function TabBar(props) {\r\n\tlet { tabs, selectedTab, onSelectTab } = props;\r\n\tconst classes = useStyles();\r\n\tlet tabBarProps = useRef({});\r\n\t\r\n\t// tab\r\n\tconst [tab, setTab] = useState(selectedTab);\r\n\tconst handleChange = (event, tab) => {\r\n\t\tonSelectTab(tab);\r\n\t\tsetTab(tab);\r\n\t}\r\n\t\r\n\t// scroll\r\n\tconst [fixed, setFixed] = useState(false);\r\n\tconst handleScroll = useCallback(() => {\r\n\t\tconst threshold = (tabBarProps.current.top + tabBarProps.current.height - 53);\r\n\t\tconst fixed = window.scrollY >= threshold;\r\n\t\t\r\n\t\tsetFixed(prevFixed => {\r\n\t\t\tif (prevFixed !== fixed) {\r\n\t\t\t\tdocument.getElementById('root').style.paddingTop = fixed ? (threshold-5-8) + 'px' : 0;\r\n\t\t\t\treturn fixed;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\treturn prevFixed;\r\n\t\t});\r\n\t\t\r\n\t}, [tabBarProps]);\r\n\r\n\tuseEffect(() => {\r\n\t\tsetTab(selectedTab);\r\n\t}, [selectedTab]);\r\n\t\r\n\tuseEffect(() => {\r\n\t\ttabBarProps.current = {\r\n\t\t\ttop: document.getElementById('tabBar').offsetTop,\r\n\t\t\theight: document.getElementById('tabBar').offsetHeight\r\n\t\t}\r\n\t\t\r\n\t\twindow.addEventListener('scroll', handleScroll);\r\n\t\treturn () => window.removeEventListener('scroll', handleScroll, 0);\r\n\t\t\r\n\t}, [handleScroll]);\r\n\t\r\n\t// render tabs\r\n\tconst renderedTabs = tabs.map((tab, i) => {\r\n\t\tconst [ icon, label ] = tab.indexOf('|') > -1 ? tab.split('|') : [ null, tab ];\r\n\t\treturn <Tab key={'tab' + i} icon={<span className={clsx(classes.icon, 'mdi mdi-' + icon)}></span>} label={!fixed && Settings.getSetting('tabsHideLabels') !== true && label !== 'null' ? label : null} />\r\n\t});\r\n\t\r\n\treturn (\r\n\r\n<Tabs\r\n\tid=\"tabBar\"\r\n\tvalue={tab}\r\n\tonChange={handleChange}\r\n\tvariant=\"scrollable\"\r\n\tclasses={{\r\n\t\troot: clsx(classes.tabs, fixed && classes.fixed),\r\n\t\tindicator: classes.indicator\r\n\t}}>\r\n\t\r\n\t{renderedTabs}\r\n</Tabs>\r\n\r\n\t);\r\n}\r\n\r\n\r\nexport function TabPanel(props) {\r\n\tconst { children, selectedTab, renderedTab, fullscreen } = props;\r\n\tconst classes = useStyles();\r\n\t\r\n\t\r\n\t// get map height based on viewport\r\n\tconst { height } = useWindowDimensions();\r\n\tconst [mapHeight, setMapHeight] = useState(height);\r\n\tlet topBarHeight = useRef({});\r\n\t\r\n\tuseEffect(() => {\r\n\t\ttopBarHeight.current = document.getElementById('appBar').offsetHeight;\r\n\t\tsetMapHeight(height-topBarHeight.current+5);\r\n\t\t\r\n\t}, [height]);\r\n\t\r\n\t/*\r\n\t * Some components need to be visible upon loading, so proper initialise.\r\n\t * Due to the 'hidden' attribute though, they might be hidden.\r\n\t * This is a workaround to initially show everything for a short period of time and then hide according to tab settings.\r\n\t *\r\n\t */\r\n\tconst [hidden, setHidden] = useState(null);\r\n\tuseEffect(() => {\r\n\t\tsetTimeout(() => setHidden(selectedTab !== renderedTab), 10);\r\n\t\t\r\n\t}, [selectedTab, renderedTab]);\r\n\t\r\n\treturn (\r\n\r\n<Box\r\n\trole=\"tabpanel\"\r\n\thidden={hidden}\r\n\tid={'tabpanel-' + renderedTab}\r\n\tclassName={clsx(fullscreen ? classes.fullscreen : classes.grid)}\r\n\tstyle={{ height: mapHeight + 'px' }}\r\n\t>\r\n\t\r\n\t{children}\r\n</Box>\r\n\r\n\t);\r\n}\r\n","import React from 'react'\r\nimport clsx from 'clsx'\r\n\r\nimport i18n from '../i18n'\r\n\r\nimport Drawer from '@material-ui/core/Drawer'\r\nimport Divider from '@material-ui/core/Divider'\r\nimport List from '@material-ui/core/List'\r\nimport ListItem from '@material-ui/core/ListItem'\r\nimport ListItemIcon from '@material-ui/core/ListItemIcon'\r\nimport ListItemText from '@material-ui/core/ListItemText'\r\n\r\n\r\n/*\r\n * STYLES\r\n */\r\nimport { withStyles } from '@material-ui/core/styles';\r\nconst styles = theme => ({\r\n\tdrawer: {\r\n\t\twidth: 400\r\n\t}\r\n});\r\n\r\n\r\nclass Notifications extends React.Component {\r\n\t\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\t\r\n\t\tthis.state = {\r\n\t\t}\r\n\t}\r\n\t\r\n\trender() {\r\n\t\tconst { classes, notifications } = this.props;\r\n\t\t\r\n\t\treturn (\r\n\r\n<Drawer\r\n\tanchor=\"right\"\r\n\topen={this.props.open}\r\n\tonClose={() => this.props.toggleDrawer('notificationDrawer', false)}\r\n\tclasses={{\r\n\t\tpaper: classes.drawer\r\n\t}}\r\n\t>\r\n\t\r\n</Drawer>\r\n\r\n\t\t);\r\n\t}\r\n}\r\n\r\nexport default withStyles(styles)(Notifications);\r\n","import React from 'react'\r\n\r\nimport Log from '../Log'\r\nimport Grid from '@material-ui/core/Grid'\r\n\r\n\r\n/*\r\n * STYLES\r\n */\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nconst useStyles = makeStyles(theme => ({\r\n\tgridContainer: {\r\n\t\tpaddingLeft: theme.spacing(1),\r\n\t\t[theme.breakpoints.down('md')]: {\r\n\t\t\tpaddingLeft: theme.spacing(0.4)\r\n\t\t}\r\n\t}\r\n}));\r\n\r\n\r\nexport default function GridContainer(props) {\r\n\tconst { contents = {} } = props;\r\n\t\r\n\tconst classes = useStyles();\r\n\tconst columns = Object.keys(contents).length;\r\n\t\r\n\tlet grid = [];\r\n\tfor (let column = 1; column <= columns; column++) {\r\n\t\t\r\n\t\tif (!contents[column]) {\r\n\t\t\tLog._('GridContainer', 'No content for column #' + column + '!', 'warn');\r\n\t\t\tcontinue;\r\n\t\t}\r\n\t\t\r\n\t\tgrid.push(\r\n\t\t\t<Grid key={column} item\t\t\t\t// @see https://material-ui.com/customization/breakpoints/\r\n\t\t\t\txs={12}\t\t\t\t\t\t\t//    0 -  600px\r\n\t\t\t\tsm={6}\t\t\t\t\t\t\t//  600 -  960px\r\n\t\t\t\tmd={6}\t\t\t\t\t\t\t//  960 - 1280px\r\n\t\t\t\tlg={Math.round(12/columns)}\t\t// 1280 - 1920px\r\n\t\t\t\txl={Math.round(12/columns)}\t\t// \t\t> 1920px\r\n\t\t\t\t>\r\n\t\t\t\t\r\n\t\t\t\t{contents[column]}\r\n\t\t\t</Grid>\r\n\t\t);\r\n\t}\r\n\t\r\n\treturn (\r\n\r\n<Grid container spacing={0} className={classes.gridContainer}>\r\n\t{grid}\r\n</Grid>\r\n\r\n\t);\r\n}\r\n","import React from 'react'\r\n\r\nimport Log from '../Log'\r\nimport Connection from '../Connection'\r\nimport Device from '../Device'\r\n\r\nimport Button from '@material-ui/core/Button'\r\nimport Dialog from '@material-ui/core/Dialog'\r\nimport MuiDialogTitle from '@material-ui/core/DialogTitle'\r\nimport MuiDialogContent from '@material-ui/core/DialogContent'\r\nimport MuiDialogActions from '@material-ui/core/DialogActions'\r\nimport IconButton from '@material-ui/core/IconButton'\r\nimport CloseIcon from '@material-ui/icons/Close'\r\nimport Typography from '@material-ui/core/Typography'\r\n\r\nimport Modules from '../modules'\r\n\r\n\r\n/*\r\n * STYLES\r\n */\r\nimport { withStyles } from '@material-ui/core/styles';\r\nconst styles = theme => ({\r\n\troot: {\r\n\t\tmargin: 0,\r\n\t\tpadding: theme.spacing(2),\r\n\t},\r\n\tcloseButton: {\r\n\t\tposition: 'absolute',\r\n\t\tright: theme.spacing(1),\r\n\t\ttop: theme.spacing(1),\r\n\t\tcolor: theme.palette.grey[500],\r\n\t},\r\n});\r\n\r\n\r\nconst DialogTitle = withStyles(styles)(props => {\r\n\tconst { children, classes, onClose, ...other } = props;\r\n\treturn (\r\n\r\n<MuiDialogTitle disableTypography className={classes.root} {...other}>\r\n\t<Typography variant=\"h6\">{children}</Typography>\r\n\t{onClose ? (\r\n\t<IconButton aria-label=\"close\" className={classes.closeButton} onClick={onClose}>\r\n\t\t<CloseIcon />\r\n\t</IconButton>\r\n\t) : null}\r\n</MuiDialogTitle>\r\n\r\n\t);\r\n});\r\n\r\nconst DialogContent = withStyles(theme => ({\r\n\troot: {\r\n\t\tpadding: theme.spacing(2),\r\n\t\t[theme.breakpoints.down('md')]: {\r\n\t\t\tpaddingLeft: theme.spacing(1)\r\n\t\t}\r\n\t},\r\n}))(MuiDialogContent);\r\n\r\nconst DialogActions = withStyles(theme => ({\r\n\troot: {\r\n\t\tmargin: 0,\r\n\t\tpadding: theme.spacing(1),\r\n\t},\r\n}))(MuiDialogActions);\r\n\r\n\r\nexport default class Popup extends React.Component {\r\n\t\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\t\r\n\t\tthis.state = {\r\n\t\t\tchildren: []\r\n\t\t};\r\n\t}\r\n\t\r\n\tcomponentDidUpdate(prevProps, prevState) {\r\n\t\t\r\n\t\tlet device = this.props.contents && this.props.contents.device;\r\n\t\tif (device.id && this.props.contents.ts !== prevProps.contents.ts) {\r\n\t\t\t\r\n\t\t\t// get from cache\r\n\t\t\tif (device.children.length) {\r\n\t\t\t\tLog._('Popup', [ 'Got ' + Object.keys(device.children).length + ' states for device ' + device.name + ' from cache.', device.children ]);\r\n\t\t\t\tthis.setState({ 'children': device.children }, () => this.forceUpdate());\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\t// retrieve new\r\n\t\t\telse {\r\n\t\t\t\t// loop through states and request status\r\n\t\t\t\tlet responses = [];\r\n\t\t\t\tlet children = [];\r\n\t\t\t\t\r\n\t\t\t\tfor (let stateKey in device.states) {\r\n\t\t\t\t\t\r\n\t\t\t\t\tif (device.states[stateKey].state === undefined || device.options.hiddenStates.indexOf(stateKey) > -1) {\r\n\t\t\t\t\t\tcontinue;\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t\tlet child = new Device({\r\n\t\t\t\t\t\t\t'parent': device,\r\n\t\t\t\t\t\t\t'id': device.id + '#' + stateKey,\r\n\t\t\t\t\t\t\t'name': device.name,\r\n\t\t\t\t\t\t\t'function': device.function,\r\n\t\t\t\t\t\t\t//'states': { [stateKey]: device.states[stateKey] },\r\n\t\t\t\t\t\t\t'states': device.states,\r\n\t\t\t\t\t\t\t'options': {\r\n\t\t\t\t\t\t\t\t...device.options,\r\n\t\t\t\t\t\t\t\t'primary': stateKey,\r\n\t\t\t\t\t\t\t\t'secondary': null,\r\n\t\t\t\t\t\t\t\t'divider': children.length !== 0,\r\n\t\t\t\t\t\t\t\t'subgroup': null,\r\n\t\t\t\t\t\t\t\t'subtitle': null\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t},\r\n\t\t\t\t\t\tConnection.getConnection,\r\n\t\t\t\t\t\twindow.language\r\n\t\t\t\t\t);\r\n\t\t\t\t\t\r\n\t\t\t\t\t// add child to parent\r\n\t\t\t\t\tdevice.children.push(child);\r\n\t\t\t\t\t\r\n\t\t\t\t\t// retrieve state\r\n\t\t\t\t\tresponses.push(child.requestDeviceState(null, true));\r\n\t\t\t\t\tchildren.push(child);\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tPromise.allSettled(responses).then(() => {\r\n\t\t\t\t\tLog._('Popup', [ 'Retrieved ' + Object.keys(children).length + ' states for device ' + device.name + '.', children ]);\r\n\t\t\t\t\tthis.setState({ 'children': children }, () => this.forceUpdate());\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t}\r\n\t\telse if (!device.id && this.props.contents.ts !== prevProps.contents.ts) {\r\n\t\t\tthis.setState({ 'children': [] }, () => this.forceUpdate());\r\n\t\t}\r\n\t}\r\n\t\r\n\tshouldComponentUpdate(nextProps, nextState) {\r\n\t\treturn !this.props.contents || this.props.contents.ts !== nextProps.contents.ts;\r\n\t}\r\n\t\r\n\trender() {\r\n\t\tconst { open, closeDialog, contents } = this.props;\r\n\t\tconst { device } = contents;\r\n\t\t\r\n\t\treturn (\r\n\r\n<Dialog onClose={closeDialog} open={open || false} maxWidth={'md'} fullWidth={true}>\r\n\t<DialogTitle onClose={closeDialog}>\r\n\t\t{device.name}\r\n\t</DialogTitle>\r\n\t<DialogContent dividers style={{ padding: 0 }}>\r\n\t\t\r\n\t\t<Modules.StateList openDialog={null} devices={this.state.children} component={true} action={true} />\t\r\n\t\t\r\n\t</DialogContent>\r\n\t<DialogActions>\r\n\t\t<Button autoFocus onClick={closeDialog} color=\"primary\">\r\n\t\t\tClose\r\n\t\t</Button>\r\n\t</DialogActions>\r\n</Dialog>\r\n\r\n\t\t);\r\n\t};\r\n}\r\n","import React from 'react'\r\n\r\nimport Settings from '../Settings'\r\n\r\nimport Card from '@material-ui/core/Card'\r\nimport CardHeader from '@material-ui/core/CardHeader'\r\nimport CardContent from '@material-ui/core/CardContent'\r\nimport Avatar from '@material-ui/core/Avatar'\r\nimport Typography from '@material-ui/core/Typography'\r\n\r\n\r\n/*\r\n * STYLES\r\n */\r\nimport { makeStyles } from '@material-ui/core/styles'\r\nconst useStyles = makeStyles(theme => ({\r\n\tcard: {\r\n\t\tmargin: theme.spacing(1, 1, 0, 0),\r\n\t\t[theme.breakpoints.down('md')]: {\r\n\t\t\tmargin: theme.spacing(0.4, 0.4, 0, 0)\r\n\t\t}\r\n\t},\r\n\tcardHeaderNoContents: {\r\n\t\tpadding: theme.spacing(),\r\n\t},\r\n\tcardAvatar: props => ({\r\n\t\tbackgroundColor: theme.palette.primary.main,\r\n\t\tcolor: '#fff',\r\n\t\tfontSize: '24px',\r\n\t\t...props\r\n\t}),\r\n\tcardContent: {\r\n\t\tpadding: theme.spacing(0, 2),\r\n\t\t[theme.breakpoints.down('md')]: {\r\n\t\t\tpadding: theme.spacing(0)\r\n\t\t}\r\n\t}\r\n}));\r\n\r\n\r\nexport default function Widget(props) {\r\n\tconst { title, icon, iconStyle } = props;\r\n\tconst classes = useStyles(iconStyle);\r\n\t\r\n\treturn (\r\n\r\n<Card className={classes.card}>\r\n\t<CardHeader\r\n\t\tavatar={icon !== null &&\r\n\t\t\t<Avatar variant=\"rounded\" classes={{ root: classes.cardAvatar }}>\r\n\t\t\t\t{React.createElement('span', { 'className': 'mdi mdi-' + (icon || Settings.getSetting('defaultBoxIcon') || 'home') })}\r\n\t\t\t</Avatar>\r\n\t\t}\r\n\t\ttitle={title &&\r\n\t\t\t<Typography variant=\"h5\" component=\"h2\">\r\n\t\t\t\t{title}\r\n\t\t\t</Typography>\r\n\t\t}\r\n\t/>\r\n\t<CardContent className={classes.cardContent}>\r\n\t\t{props.children}\r\n\t</CardContent>\r\n</Card>\r\n\r\n\t);\r\n}\r\n","import React from 'react'\r\n\r\nimport { DEFAULTS } from './config/config'\r\nimport Log from './Log'\r\nimport Connection from './Connection'\r\nimport Settings from './Settings'\r\nimport Devices from './Devices'\r\n\r\nimport Hidden from '@material-ui/core/Hidden'\r\n//import { SwipeableViews } from '@tarragon/swipeable-tabs'\r\n\r\nimport Pages from './pages'\r\nimport TopBar from './components/TopBar'\r\nimport TabBar, { TabPanel } from './components/TabBar'\r\nimport Notifications from './components/Notifications'\r\nimport GridContainer from './components/GridContainer'\r\nimport Popup from './components/Popup'\r\nimport Widget from './components/Widget'\r\nimport Modules, { ModuleSettings } from './modules'\r\n\r\n\r\n/*\r\n *\r\n */\r\nconst getGroup = (groupId, group, props = {}) => {\r\n\t\r\n\t// group empty\r\n\tif (!group && ModuleSettings[group.settings.component].noDevicesAllowed !== true) {\r\n\t\tLog._('Jarvis', 'Group ' + groupId + ' defined in columns but not assigned to any devices!', 'error');\r\n\t\treturn null;\r\n\t}\r\n\t\r\n\t// get module for component\r\n\tconst Tag = Modules[group.settings.component || 'StateList'];\r\n\t\r\n\t// get tag\r\n\tif (Tag === undefined) {\r\n\t\tLog._('Jarvis', 'Undefined component \"' + group.settings.component + '\" used!', 'error');\r\n\t\treturn null;\r\n\t}\r\n\t\r\n\treturn <Tag key={'Tag' + groupId} devices={group.devices || []} openDialog={props.action ? props.action : null} settings={{ ...group.settings, ...props }} />\r\n}\r\n\r\n\r\n/*\r\n *\r\n */\r\nconst getGridContents = (contents, groups, props = {}) => {\r\n\t\r\n\tlet gridContents = {};\r\n\tconst columns = Object.keys(contents).length;\r\n\t\r\n\tfor (let column = 1; column <= columns; column++) {\r\n\t\tlet columnContents = contents[column];\r\n\t\tgridContents[column] = gridContents[column] || [];\r\n\t\t\r\n\t\t// no contents, thus add placeholder\r\n\t\tif (!columnContents || !Object.keys(columnContents).length) {\r\n\t\t\tgridContents[column].push(null);\r\n\t\t}\r\n\t\t\r\n\t\t// add contents\r\n\t\telse {\r\n\t\t\tfor (let groupId in columnContents) {\r\n\t\t\t\t\r\n\t\t\t\tlet group = groups[groupId] || {};\r\n\t\t\t\tgroup.devices = group.devices || [];\r\n\t\t\t\tgroup.settings = columnContents[groupId] || {};\r\n\t\t\t\tlet moduleSettings = ModuleSettings[group.settings.component] || {};\r\n\t\t\t\t\r\n\t\t\t\tlet content = getGroup(groupId, group, props);\r\n\t\t\t\tif ((group.devices.length > 0 || moduleSettings.noDevicesAllowed) && content) {\r\n\t\t\t\t\tgridContents[column].push(\r\n\t\t\t\t\t\t<Widget\r\n\t\t\t\t\t\t\tkey={'Box-' + groupId}\r\n\t\t\t\t\t\t\ttitle={group.settings.title === null ? null : (group.settings.title || group.name || moduleSettings.title)}\r\n\t\t\t\t\t\t\ticon={group.settings.icon === null ? null : (group.settings.icon || moduleSettings.icon)}\r\n\t\t\t\t\t\t\ticonStyle={group.settings.iconStyle}\r\n\t\t\t\t\t\t\t>\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t{content}\r\n\t\t\t\t\t\t</Widget>\r\n\t\t\t\t\t);\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\t\r\n\treturn gridContents;\r\n}\r\n\r\n\r\nexport default class Jarvis extends React.Component {\r\n\t\r\n    constructor(props) {\r\n\t\tsuper(props);\r\n\t\t\r\n\t\tthis.state = {\r\n\t\t\tselectedTab: 0,\r\n\t\t\ttabTitle: '',\r\n\t\t\t\r\n\t\t\tpage: 'home',\r\n\t\t\t\r\n\t\t\tnotificationDrawer: false,\r\n\t\t\tnotifications: [],\r\n\t\t\tnotificationsUnread: 0,\r\n\t\t\t\r\n\t\t\tdialog: false,\r\n\t\t\tdialogContents: {\r\n\t\t\t\t'ts': 0,\r\n\t\t\t\t'device': {}\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\t// bind methods\r\n\t\tthis.closeDialog = this.closeDialog.bind(this);\r\n\t\tthis.openDialog = this.openDialog.bind(this);\r\n\t\tthis.onSelectTab = this.onSelectTab.bind(this);\r\n\t\tthis.toggleDrawer = this.toggleDrawer.bind(this);\r\n\t\tthis.navigate = this.navigate.bind(this);\r\n\t\t\r\n\t\t// get connection\r\n\t\tthis.socket = Connection.getConnection;\r\n\t\t\r\n\t\t// initialise\r\n\t\tthis.gridContents = {};\r\n\t\tthis.devices = Devices.getDevices();\r\n\t\tthis.layout = Settings.getSetting('layout');\r\n\t\tthis.tabs = Object.keys(this.layout);\r\n\t\tthis.tabsEnabled = Number.isNaN(parseInt(this.tabs[0]));\r\n\t\tthis.state.tabTitle = this.tabs[this.state.selectedTab];\r\n\t\t\r\n\t\t// no tabs defined, so layout wrap into default tab\r\n\t\tif (!this.tabsEnabled) {\r\n\t\t\tthis.layout = { 'Home': this.layout };\r\n\t\t\tthis.tabs.push('1');\r\n\t\t}\r\n\t\t\r\n\t\t// widget props\r\n\t\tthis.widgetProps = {}\r\n\t}\r\n\t\r\n\tcomponentDidMount() {\r\n\t\t\r\n\t\t// check if devices and settings are defined\r\n\t\tif (Object.keys(this.devices).length === 0 || Settings.getSetting('layout') === '') {\r\n\t\t\tthis.navigate('configuration');\r\n\t\t}\r\n\t\t\r\n\t\t// get notifications\r\n\t\tthis.socket.getState('jarvis.0.notifications').then(notifications => {\r\n\t\t\tnotifications = (notifications && notifications.val && JSON.parse(notifications.val)) || [];\r\n\t\t\t\r\n\t\t\tthis.setState({\r\n\t\t\t\tnotificationsUnread: notifications.filter(notification => !notification.unread || notification.unread !== false).length,\r\n\t\t\t\tnotifications: notifications\r\n\t\t\t});\r\n\t\t});\r\n\t\t\r\n\t\tthis.socket.subscribeState(DEFAULTS.NODE_NOTIFICATIONS, notifications => Log._('Jarvis', notifications));\r\n\t}\r\n\t\r\n\tgetTabPanels() {\r\n\t\tconst groups = Devices.getGroups();\r\n\t\t\r\n\t\tlet tabIndex = 0;\r\n\t\tlet tabPanels = [];\r\n\t\t\r\n\t\tfor (let tabLabel in this.layout) {\r\n\t\t\tconst contents = this.layout[tabLabel];\r\n\t\t\t\r\n\t\t\t// fullscreen in component\r\n\t\t\tconst groupId = Object.keys(contents)[0];\r\n\t\t\tconst fullscreen = Number.isNaN(parseInt(groupId));\r\n\t\t\t\r\n\t\t\tif (!this.gridContents[tabLabel] && fullscreen) {\r\n\t\t\t\tthis.gridContents[tabLabel] = getGroup(contents, { ...groups[groupId], settings: contents[groupId] || {} }, { action: this.openDialog, ...this.widgetProps });\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\t// grid layout\r\n\t\t\telse if (!this.gridContents[tabLabel]) {\r\n\t\t\t\tthis.gridContents[tabLabel] = <GridContainer contents={getGridContents(contents, groups, { action: this.openDialog, ...this.widgetProps })} />\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tconst tabPanel = (\r\n\t\t\t\t<TabPanel key={'tabPanel-' + tabIndex} renderedTab={tabIndex} selectedTab={this.state.selectedTab} fullscreen={fullscreen}>\r\n\t\t\t\t\t{this.gridContents[tabLabel]}\r\n\t\t\t\t</TabPanel>\r\n\t\t\t);\r\n\t\t\t\r\n\t\t\ttabPanels.push(tabPanel);\r\n\t\t\ttabIndex++;\r\n\t\t}\r\n\t\t\r\n\t\treturn tabPanels;\r\n\t}\r\n\t\r\n\tcloseDialog() {\r\n\t\tthis.setState({ 'dialog': false, 'dialogContents': { 'ts': Date.now(), 'device': {} } });\r\n\t}\r\n\t\r\n\topenDialog(device) {\r\n\t\tthis.setState({ 'dialog': true, 'dialogContents': { 'ts': Date.now(), 'device': device } });\r\n\t}\r\n\t\r\n\tonSelectTab(tab) {\r\n\t\tthis.setState({ selectedTab: tab, tabTitle: this.tabs[tab] });\r\n\t}\r\n\t\r\n\ttoggleDrawer(drawer, open) {\r\n\t\tthis.setState({ [drawer]: open });\r\n\t}\r\n\t\r\n\tnavigate(page) {\r\n\t\tthis.setState({ page });\r\n\t}\r\n\t\r\n    render() {\r\n\t\tlet Page = Pages[this.state.page] || null;\r\n\t\t\r\n\t\tconst tabPanels = this.getTabPanels();\r\n        return (\r\n\r\n<React.Fragment>\r\n\t<TopBar\r\n\t\ttitle={Settings.topBarTitle || (this.tabsEnabled && this.state.tabTitle) || Settings.getSetting('pageTitle') || 'jarvis - Smart Home Overview'}\r\n\t\tconnectionStatus={this.props.connectionStatus}\r\n\t\ttoggleDrawer={this.toggleDrawer}\r\n\t\tnavigate={this.navigate}\r\n\t\tnotifications={this.state.notificationsUnread}\r\n\t\t>\r\n\t\t\r\n\t\t{this.tabsEnabled && <TabBar tabs={this.tabs} selectedTab={this.state.selectedTab} onSelectTab={this.onSelectTab} />}\r\n\t</TopBar>\r\n\t\r\n\t\r\n\t{/* DRAWER: NOTIFICATIONS */}\r\n\t<Notifications\r\n\t\topen={this.state.notificationDrawer}\r\n\t\ttoggleDrawer={this.toggleDrawer}\r\n\t\tnotifications={this.state.notifications}\r\n\t\t/>\r\n\t\r\n\t\r\n\t{/* PAGE */}\r\n\t{Page && <Page\r\n\t\tpage={this.state.page}\r\n\t\tnavigate={this.navigate}\r\n\t\tdevices={this.devices}\r\n\t\t/>}\r\n\t\r\n\t\r\n\t{/* POPUP */}\r\n\t<Popup\r\n\t\topen={this.state.dialog}\r\n\t\tcontents={this.state.dialogContents}\r\n\t\tcloseDialog={this.closeDialog}\r\n\t\t/>\r\n\t\r\n\t\r\n\t{/* TABS */}\r\n{/*\r\n\t<Hidden smUp>\r\n\t<SwipeableViews\r\n\t\tviews={tabPanels}\r\n\t\tselectedView={this.state.selectedTab}\r\n\t\tonSwipe={this.onSelectTab}\r\n\t\t/>\r\n\t</Hidden>\r\n\t<Hidden smDown>\r\n\t\t{tabPanels}\r\n\t</Hidden>\r\n*/}\r\n\t{tabPanels}\r\n\t\t\r\n</React.Fragment>\r\n\r\n\t\t)\r\n\t}\r\n}\r\n","import React from 'react';\r\nimport clsx from 'clsx';\r\n\r\nimport Snackbar from '@material-ui/core/Snackbar';\r\nimport SnackbarContent from '@material-ui/core/SnackbarContent';\r\nimport IconButton from '@material-ui/core/IconButton';\r\n\r\nimport CloseIcon from '@material-ui/icons/Close';\r\nimport CheckCircleIcon from '@material-ui/icons/CheckCircle';\r\nimport WarningIcon from '@material-ui/icons/Warning';\r\nimport ErrorIcon from '@material-ui/icons/Error';\r\nimport InfoIcon from '@material-ui/icons/Info';\r\n\r\n\r\n\r\n\r\n/*\r\n * STYLES\r\n */\r\nimport { amber, green } from '@material-ui/core/colors';\r\nimport { makeStyles } from '@material-ui/core/styles';\r\nconst useStyles = makeStyles(theme => ({\r\n\tsuccess: {\r\n\t\tbackgroundColor: green[600],\r\n\t},\r\n\terror: {\r\n\t\tbackgroundColor: theme.palette.error.dark,\r\n\t},\r\n\tinfo: {\r\n\t\tbackgroundColor: theme.palette.primary.main,\r\n\t},\r\n\twarning: {\r\n\t\tbackgroundColor: amber[700],\r\n\t},\r\n\ticon: {\r\n\t\tfontSize: 20,\r\n\t},\r\n\ticonVariant: {\r\n\t\topacity: 0.9,\r\n\t\tmarginRight: theme.spacing(1),\r\n\t},\r\n\tmessage: {\r\n\t\tdisplay: 'flex',\r\n\t\talignItems: 'center',\r\n\t},\r\n}));\r\n\r\n\r\nconst variantIcon = {\r\n\tsuccess: CheckCircleIcon,\r\n\twarning: WarningIcon,\r\n\terror: ErrorIcon,\r\n\tinfo: InfoIcon,\r\n};\r\n\r\n\r\nexport default function StatusSnackbar(props) {\r\n\tconst classes = useStyles();\r\n\tlet { className, open, autoHideDuration, message, closeButton, onClose, variant, ...other } = props;\r\n\tconst Icon = variantIcon[variant];\r\n\t\r\n\topen = open || true;\r\n\tautoHideDuration = autoHideDuration || null;\r\n\treturn (\r\n\r\n<Snackbar\r\n\tanchorOrigin={{\r\n\t\tvertical: 'bottom',\r\n\t\thorizontal: 'center',\r\n\t}}\r\n\topen={open}\r\n\tautoHideDuration={autoHideDuration}\r\n\tonClose={onClose}\r\n\t>\r\n\t<SnackbarContent\r\n\t\tclassName={clsx(classes[variant], className)}\r\n\t\tmessage={\r\n\t\t\t<span id=\"client-snackbar\" className={classes.message}>\r\n\t\t\t\t<Icon className={clsx(classes.icon, classes.iconVariant)} />\r\n\t\t\t\t{message}\r\n\t\t\t</span>\r\n\t\t}\r\n\t\taction={closeButton && [\r\n\t\t\t<IconButton key=\"close\" aria-label=\"close\" color=\"inherit\" onClick={onClose}>\r\n\t\t\t\t<CloseIcon className={classes.icon} />\r\n\t\t\t</IconButton>,\r\n\t\t]}\r\n\t\t{...other}\r\n\t\t/>\r\n\t\t\r\n</Snackbar>\r\n\r\n\t);\r\n}","import React from 'react'\r\nimport { DEFAULTS } from './config/config'\r\nimport config from './config/config.dev.js'\r\nimport Log from './Log'\r\nimport i18n from './i18n'\r\n\r\nimport Connection from './Connection'\r\nimport Settings from './Settings'\r\nimport Devices from './Devices'\r\nimport Device from './Device'\r\nimport Jarvis from './Jarvis'\r\n\r\nimport Grid from '@material-ui/core/Grid'\r\nimport CircularProgress from '@material-ui/core/CircularProgress'\r\nimport Typography from '@material-ui/core/Typography'\r\nimport Skeleton from '@material-ui/lab/Skeleton'\r\n\r\nimport GridContainer from './components/GridContainer'\r\nimport StatusSnackbar from './components/StatusSnackbar'\r\n\r\n\r\n/*\r\n * STYLES\r\n */\r\nimport { ThemeProvider, withStyles } from '@material-ui/core/styles';\r\nconst styles = theme => ({\r\n\tloading: {\r\n\t\tmargin: '10px 0 0 0',\r\n\t\tcolor: '#999'\r\n\t},\r\n\tgridItem: {\r\n\t\tmargin: theme.spacing(1, 1, 0, 0),\r\n\t\t[theme.breakpoints.down('md')]: {\r\n\t\t\tmarginRight: theme.spacing(0.4, 0.4, 0, 0)\r\n\t\t}\r\n\t}\r\n});\r\n\r\n\r\n/*\r\n * CONSTANTS\r\n *\r\n */\r\nclass App extends React.Component {\r\n\t\r\n    constructor(props) {\r\n\t\tsuper(props);\r\n\t\t\r\n\t\tthis.state = {\r\n\t\t\tloaded: [],\r\n\t\t\tconnected: false,\r\n\t\t\terror: false,\r\n\t\t\terrorMessage: '',\r\n\t\t\t\r\n\t\t\ttheme: null\r\n\t\t}\r\n\t}\r\n\t\r\n\tcomponentDidMount() {\r\n\t\t\r\n\t\t// connect and get connection\r\n\t\tconst errorHandler = err => {\r\n\t\t\t//Log._('App', i18n.t('Socket disconnected') + '!', 'error') //, true, err.stack);\r\n\t\t\tthis.setState({\r\n\t\t\t\tconnected: false,\r\n\t\t\t\terror: true,\r\n\t\t\t\terrorMessage: i18n.t(typeof err === 'string' ? err : err.message) + '. Reconnecting..'\r\n\t\t\t});\r\n\t\t\t\r\n\t\t\t/*\r\n\t\t\tsetTimeout(function reconnect() {\r\n\t\t\t\t\r\n\t\t\t\tLog._('App', i18n.t('Attempting reconnect') + '..');\r\n\t\t\t\tConnection.reconnect();\r\n\t\t\t\tsetTimeout(() => reconnect, 30*1000);\r\n\t\t\t\t\r\n\t\t\t}, 10*1000);\r\n\t\t\t*/\r\n\t\t};\r\n\t\t\r\n\t\tconst url = window.location.port === '3000' ? config.iobrokerWebAdapterUrl :\r\n\t\t\twindow.location.protocol + '//' + window.location.hostname + (window.location.port ? ':' + window.location.port : '');\r\n\t\t\r\n\t\tconst listeners = [\r\n\t\t\t{ 'event': 'connect', 'callback': () => this.setState({ connected: true, error: false, errorMessage: '' }) },\r\n\t\t\t{ 'event': 'reconnect', 'callback': () => this.setState({ connected: 'pending', error: false, errorMessage: '' }) },\r\n\t\t\t{ 'event': 'disconnect', 'callback': errorHandler },\r\n\t\t\t{ 'event': 'error', 'callback': errorHandler }\r\n\t\t];\r\n\t\t\r\n\t\tLog._('App', i18n.t('Connect to') + ' ' + url + '...');\r\n\t\tthis.socket = Connection.connect(url, listeners);\r\n\t\t\r\n\t\t// retrieve settings\r\n\t\tthis.settings = {};\r\n\t\tthis.socket.getState(DEFAULTS.NODE_SETTINGS)\r\n\t\t\t.then(state => {\r\n\t\t\t\t\r\n\t\t\t\ttry {\r\n\t\t\t\t\tif (state) {\r\n\t\t\t\t\t\tthis.settings = { ...this.settings, ...JSON.parse(state.val || {}) };\r\n\t\t\t\t\t\tSettings.setSettings(this.settings);\r\n\t\t\t\t\t\tSettings.applySettings();\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t\tconst tab = Object.keys(this.settings.layout)[0];\r\n\t\t\t\t\tif (tab === undefined) {\r\n\t\t\t\t\t\tthis.setState(prevState => ({\r\n\t\t\t\t\t\t\tloaded: [ ...prevState.loaded, 'settings' ],\r\n\t\t\t\t\t\t\terror: true,\r\n\t\t\t\t\t\t\terrorMessage: i18n.t('Please create the configuration. See documentation.')\r\n\t\t\t\t\t\t}));\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse {\r\n\t\t\t\t\t\tthis.setState(prevState => ({ loaded: [ ...prevState.loaded, 'settings' ] }));\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t\tcatch(err) {\r\n\t\t\t\t\tLog._('App', 'GET_SETTINGS: ' + err.message, 'error');\r\n\t\t\t\t\tthis.setState(prevState => ({\r\n\t\t\t\t\t\tloaded: [ ...prevState.loaded, 'settings' ],\r\n\t\t\t\t\t\terror: true,\r\n\t\t\t\t\t\terrorMessage: i18n.t('Error parsing settings') + '!'\r\n\t\t\t\t\t}));\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t\t.catch(err => {\r\n\t\t\t\tLog._('App', 'GET_SETTINGS: ' + err.message, 'error');\r\n\t\t\t\tthis.setState(prevState => ({\r\n\t\t\t\t\tloaded: [ ...prevState.loaded, 'settings' ],\r\n\t\t\t\t\terror: true,\r\n\t\t\t\t\terrorMessage: typeof err === 'string' ? i18n.t(err) : i18n.t(err.message)\r\n\t\t\t\t}));\r\n\t\t\t});\r\n\t\t\r\n\t\t// retrieve ioBroker config\r\n\t\tthis.settings.iobroker = {};\r\n\t\tthis.socket.getObject('system.config', (err, data) => {\r\n\t\t\tif (data && data.common) {\r\n\t\t\t\tthis.settings.iobroker = data.common;\r\n\t\t\t\tSettings.setSettings({ iobroker: this.settings.iobroker });\r\n\t\t\t}\r\n\t\t});\r\n\t\t\r\n\t\t// get theme\r\n\t\timport('./theme').then(theme => this.setState({ theme: theme.default }));\r\n\t\t\r\n\t\t// retrieve devices\r\n\t\tthis.socket.getState(DEFAULTS.NODE_DEVICES)\r\n\t\t\t.then(state => {\r\n\t\t\t\tlet rawDevices = null;\r\n\t\t\t\t\r\n\t\t\t\ttry {\r\n\t\t\t\t\trawDevices = JSON.parse(state.val || {});\r\n\t\t\t\t\tthis.processDevices(rawDevices).then(res => {\r\n\t\t\t\t\t\tDevices.set(rawDevices).setDevices(res.devices).setGroups(res.groups);\r\n\t\t\t\t\t\tthis.setState(prevState => ({ loaded: [ ...prevState.loaded, 'groups' ] }));\r\n\t\t\t\t\t});\r\n\t\t\t\t}\r\n\t\t\t\tcatch(err) {\r\n\t\t\t\t\tLog._('App', 'GET_DEVICES: ' + err.message, 'error');\r\n\t\t\t\t\tthis.setState(prevState => ({\r\n\t\t\t\t\t\tloaded: [ ...prevState.loaded, 'groups' ],\r\n\t\t\t\t\t\terror: true,\r\n\t\t\t\t\t\terrorMessage: i18n.t('Error parsing devices') + '!'\r\n\t\t\t\t\t}));\r\n\t\t\t\t}\r\n\t\t\t})\r\n\t\t\t.catch(err => {\r\n\t\t\t\tLog._('App', 'GET_DEVICES: ' + err.message, 'error');\r\n\t\t\t\tthis.setState(prevState => ({\r\n\t\t\t\t\tloaded: [ ...prevState.loaded, 'groups' ],\r\n\t\t\t\t\terror: true,\r\n\t\t\t\t\terrorMessage: i18n.t('Socket failed while getting devices') + '!'\r\n\t\t\t\t}));\r\n\t\t\t});\r\n\t\t\r\n    }\r\n\t\r\n\t/**\r\n\t *\r\n\t *\r\n\t */\r\n\tgroupDevice(groups, device) {\r\n\t\t\r\n\t\t// add device to group(s)\r\n\t\tlet options = device.get('options');\r\n\t\toptions.group.forEach(group => {\r\n\t\t\t\r\n\t\t\tlet groupId = group.toLowerCase().replace(/ /g, '');\r\n\t\t\tif (!groups[groupId]) {\r\n\t\t\t\tgroups[groupId] = { 'id': groupId, 'name': group, 'devices': [device] };\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tgroups[groupId].devices.push(device);\r\n\t\t\t}\r\n\t\t});\r\n\t\t\r\n\t\treturn groups;\r\n\t}\r\n\t\r\n\t/**\r\n\t *\r\n\t *\r\n\t */\r\n\tprocessDevice(deviceProperties) {\r\n\t\t\r\n\t\tlet promises = [];\r\n\t\tlet device = null;\r\n\t\ttry {\r\n\t\t\tdevice = new Device(deviceProperties, this.socket);\r\n\t\t\t\r\n\t\t\t// request primary state value\r\n\t\t\tpromises.push(device.requestDeviceState(null, true));\r\n\t\t\t\r\n\t\t\t// request secondary state value\r\n\t\t\tif (device.secondaryStateKey) {\r\n\t\t\t\tpromises.push(device.requestDeviceState(device.secondaryStateKey, true));\r\n\t\t\t}\r\n\t\t\t\r\n\t\t}\r\n\t\tcatch(err) {\r\n\t\t\tLog._('App', err.message, 'warn');\r\n\t\t}\r\n\t\t\r\n\t\treturn new Promise(resolve => {\r\n\t\t\tPromise.allSettled(promises).then(results => {\r\n\t\t\t\t\r\n\t\t\t\tresults.forEach(result => {\r\n\t\t\t\t\tif (result.status === 'rejected') {\r\n\t\t\t\t\t\tLog._('App', result, 'error');\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t\t\r\n\t\t\t\tresolve(device);\r\n\t\t\t});\r\n\t\t});\r\n\t}\r\n\t\r\n\t/**\r\n\t *\r\n\t *\r\n\t */\r\n\tprocessDevices(deviceList) {\r\n\t\t\r\n\t\t// loop through all devices of in the device list\r\n\t\tlet promises = [];\r\n\t\tlet devices = {};\r\n\t\tlet groups = {};\r\n\t\t\r\n\t\tlet processedDevices = 0, groupedDevices = 0;\r\n\t\tfor (let deviceId in deviceList) {\r\n\t\t\tprocessedDevices++;\r\n\t\t\t\r\n\t\t\tdeviceList[deviceId].options = { ...deviceList[deviceId].options, ...deviceList[deviceId].jarvis }\r\n\t\t\tdelete deviceList[deviceId].jarvis;\r\n\t\t\t\r\n\t\t\tlet deviceProperties = { ...deviceList[deviceId], 'id': deviceId };\r\n\t\t\tpromises.push(new Promise((resolve, reject) => {\r\n\t\t\t\t\r\n\t\t\t\tthis.processDevice(deviceProperties).then(device => {\r\n\t\t\t\r\n\t\t\t\t\tif (device !== null) {\r\n\t\t\t\t\t\tgroupedDevices++;\r\n\t\t\t\t\t\tgroups = this.groupDevice(groups, device);\r\n\t\t\t\t\t\tdevices[device.id] = device;\r\n\t\t\t\t\t\tresolve(deviceId);\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t\treject(deviceId);\r\n\t\t\t\t});\r\n\t\t\t}));\r\n\t\t\t\r\n\t\t\t// check states for own device settings\r\n\t\t\tfor (let stateKey in deviceProperties.states) {\r\n\t\t\t\t\r\n\t\t\t\tlet state = deviceProperties.states[stateKey];\r\n\t\t\t\tif (state && state.jarvis !== undefined) {\r\n\t\t\t\t\t\r\n\t\t\t\t\tpromises.push(new Promise((resolve, reject) => {\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tthis.processDevice({ ...deviceProperties, 'id': deviceId + '#' + stateKey, 'states': { [stateKey]: state }, 'options': state.jarvis }).then(device => {\r\n\t\t\t\t\t\r\n\t\t\t\t\t\t\tif (device !== null) {\r\n\t\t\t\t\t\t\t\tgroupedDevices++;\r\n\t\t\t\t\t\t\t\tgroups = this.groupDevice(groups, device);\r\n\t\t\t\t\t\t\t\tdevices[device.id] = device;\r\n\t\t\t\t\t\t\t\tresolve(deviceId);\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\treject(deviceId);\r\n\t\t\t\t\t\t});\r\n\t\t\t\t\t}));\r\n\t\t\t\t\t\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\treturn new Promise(resolve => Promise.allSettled(promises).then(res => {\r\n\t\t\t\r\n\t\t\t// sort groups\r\n\t\t\tfor (let groupId in groups) {\r\n\t\t\t\tgroups[groupId].devices.sort((item1, item2) => {\r\n\t\t\t\t\tif (item1.options.sort > item2.options.sort) return 1;\r\n\t\t\t\t\telse if (item2.options.sort > item1.options.sort) return -1;\r\n\t\t\t\t\telse return 0;\r\n\t\t\t\t});\r\n\t\t\t}\r\n\t\t\r\n\t\t\t// return\r\n\t\t\tLog._('App', [ 'Processed ' + processedDevices + ' devices. Added ' + groupedDevices + ' devices in ' + Object.keys(groups).length + ' groups.', res, groups ]);\r\n\t\t\tresolve({ devices: devices, groups: groups });\r\n\t\t}));\r\n\t}\r\n\t\r\n\trenderError(error) {\r\n\t\terror = error || this.state.errorMessage;\r\n\t\tLog._('App', 'Render Error: ' + error, 'error');\r\n\t\t\r\n\t\treturn (\r\n\r\n<StatusSnackbar\r\n\tkey={'StatusSnackbar'}\r\n\tvariant=\"error\"\r\n\tcloseButton={false}\r\n\tmessage={error.toString()}\r\n\t/>\r\n\r\n\t\t);\r\n\t}\r\n\t\r\n\trenderLoadingProgress() {\r\n\t\tconst { classes } = this.props;\r\n\t\treturn (\r\n\r\n<Grid\r\n\tkey=\"loadingProcess\"\r\n\tcontainer\r\n\tspacing={0}\r\n\tdirection=\"column\"\r\n\tjustify=\"center\"\r\n\talignItems=\"center\"\r\n\tstyle={{ minHeight: \"100vh\" }}\r\n\t>\r\n\r\n\t<CircularProgress />\r\n\t<Typography className={classes.loading}>{i18n.t('Retrieving settings')}...</Typography>\r\n\r\n</Grid>\r\n\r\n\t\t);\r\n\t}\r\n\t\r\n\trenderLoadingSkeleton(props) {\r\n\t\tconst { classes } = this.props;\r\n\t\tconst { topBar, tabBar, gridColumns } = props;\r\n\t\t\r\n\t\tconst SkeletonLoader = (props) => <Skeleton animation=\"wave\" variant=\"rect\" className={classes.gridItem} height={props.height} />;\r\n\t\t\r\n\t\tlet gridContents = {}\r\n\t\tfor (let column = 1; column <= gridColumns; column++) {\r\n\t\t\tgridContents[column] = gridContents[column] || [];\r\n\t\t\t\r\n\t\t\tlet loaders = Math.random() * (5 - 2) + 2;\r\n\t\t\tfor (let loader = 1; loader <= loaders; loader++) {\r\n\t\t\t\tgridContents[column].push(<SkeletonLoader key={column + '#' + loader} height={(Math.random() * (400 - 100) + 100)} />);\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\treturn (\r\n\r\n<React.Fragment>\r\n\t{topBar && <Skeleton animation=\"wave\" variant=\"rect\" height={64} />}\r\n\t{tabBar && <Skeleton animation=\"wave\" variant=\"rect\" height={48} />}\r\n\t<GridContainer key=\"loadingSkeleton\" contents={gridContents} />\r\n</React.Fragment>\r\n\r\n\t\t);\r\n\t}\r\n\t\r\n    render() {\r\n\t\t\r\n\t\t// error message\r\n\t\tconst error = this.state.error ? this.renderError() : null;\r\n\t\t\r\n\t\t// loading screens\r\n\t\tif (!error && this.state.loaded.indexOf('settings') === -1) {\r\n\t\t\treturn this.renderLoadingProgress();\r\n\t\t}\r\n\t\telse if (!error && this.state.loaded.indexOf('groups') === -1) {\r\n\t\t\tconst tab = Object.keys(this.settings.layout)[0];\r\n\t\t\treturn tab === undefined ? null : this.renderLoadingSkeleton({ topBar: true, tabBar: tab !== 1, gridColumns: (tab !== 1 ? Object.keys(this.settings.layout[tab]).length : tab.length) });\r\n\t\t}\r\n\t\t\r\n\t\t// App\r\n\t\telse {\r\n\t\t\tLog._('App', [ 'Connected:', this.state.connected ]);\r\n\t\t\treturn (\r\n\r\n<ThemeProvider theme={this.state.theme}>\r\n\t{error}\r\n\t{this.state.loaded.length === 2 && <Jarvis key=\"jarvis\" connectionStatus={this.state.connected} />}\r\n</ThemeProvider>\r\n\r\n\t\t\t)\r\n\t\t}\r\n\t}\r\n}\r\n\r\nexport default withStyles(styles)(App);\r\n","// This optional code is used to register a service worker.\r\n// register() is not called by default.\r\n\r\n// This lets the app load faster on subsequent visits in production, and gives\r\n// it offline capabilities. However, it also means that developers (and users)\r\n// will only see deployed updates on subsequent visits to a page, after all the\r\n// existing tabs open on the page have been closed, since previously cached\r\n// resources are updated in the background.\r\n\r\n// To learn more about the benefits of this model and instructions on how to\r\n// opt-in, read https://bit.ly/CRA-PWA\r\n\r\nconst isLocalhost = Boolean(\r\n  window.location.hostname === 'localhost' ||\r\n    // [::1] is the IPv6 localhost address.\r\n    window.location.hostname === '[::1]' ||\r\n    // 127.0.0.0/8 are considered localhost for IPv4.\r\n    window.location.hostname.match(\r\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\r\n    )\r\n);\r\n\r\nexport function register(config) {\r\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\r\n    // The URL constructor is available in all browsers that support SW.\r\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\r\n    if (publicUrl.origin !== window.location.origin) {\r\n      // Our service worker won't work if PUBLIC_URL is on a different origin\r\n      // from what our page is served on. This might happen if a CDN is used to\r\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\r\n      return;\r\n    }\r\n\r\n    window.addEventListener('load', () => {\r\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\r\n\r\n      if (isLocalhost) {\r\n        // This is running on localhost. Let's check if a service worker still exists or not.\r\n        checkValidServiceWorker(swUrl, config);\r\n\r\n        // Add some additional logging to localhost, pointing developers to the\r\n        // service worker/PWA documentation.\r\n        navigator.serviceWorker.ready.then(() => {\r\n          console.log(\r\n            'This web app is being served cache-first by a service ' +\r\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\r\n          );\r\n        });\r\n      } else {\r\n        // Is not localhost. Just register service worker\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\nfunction registerValidSW(swUrl, config) {\r\n  navigator.serviceWorker\r\n    .register(swUrl)\r\n    .then(registration => {\r\n      registration.onupdatefound = () => {\r\n        const installingWorker = registration.installing;\r\n        if (installingWorker == null) {\r\n          return;\r\n        }\r\n        installingWorker.onstatechange = () => {\r\n          if (installingWorker.state === 'installed') {\r\n            if (navigator.serviceWorker.controller) {\r\n              // At this point, the updated precached content has been fetched,\r\n              // but the previous service worker will still serve the older\r\n              // content until all client tabs are closed.\r\n              console.log(\r\n                'New content is available and will be used when all ' +\r\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\r\n              );\r\n\r\n              // Execute callback\r\n              if (config && config.onUpdate) {\r\n                config.onUpdate(registration);\r\n              }\r\n            } else {\r\n              // At this point, everything has been precached.\r\n              // It's the perfect time to display a\r\n              // \"Content is cached for offline use.\" message.\r\n              console.log('Content is cached for offline use.');\r\n\r\n              // Execute callback\r\n              if (config && config.onSuccess) {\r\n                config.onSuccess(registration);\r\n              }\r\n            }\r\n          }\r\n        };\r\n      };\r\n    })\r\n    .catch(error => {\r\n      console.error('Error during service worker registration:', error);\r\n    });\r\n}\r\n\r\nfunction checkValidServiceWorker(swUrl, config) {\r\n  // Check if the service worker can be found. If it can't reload the page.\r\n  fetch(swUrl, {\r\n    headers: { 'Service-Worker': 'script' }\r\n  })\r\n    .then(response => {\r\n      // Ensure service worker exists, and that we really are getting a JS file.\r\n      const contentType = response.headers.get('content-type');\r\n      if (\r\n        response.status === 404 ||\r\n        (contentType != null && contentType.indexOf('javascript') === -1)\r\n      ) {\r\n        // No service worker found. Probably a different app. Reload the page.\r\n        navigator.serviceWorker.ready.then(registration => {\r\n          registration.unregister().then(() => {\r\n            window.location.reload();\r\n          });\r\n        });\r\n      } else {\r\n        // Service worker found. Proceed as normal.\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    })\r\n    .catch(() => {\r\n      console.log(\r\n        'No internet connection found. App is running in offline mode.'\r\n      );\r\n    });\r\n}\r\n\r\nexport function unregister() {\r\n  if ('serviceWorker' in navigator) {\r\n    navigator.serviceWorker.ready.then(registration => {\r\n      registration.unregister();\r\n    });\r\n  }\r\n}\r\n","import React from 'react'\r\nimport ReactDOM from 'react-dom'\r\n\r\nimport './index.css'\r\nimport App from './App'\r\nimport * as serviceWorker from './serviceWorker'\r\n\r\nReactDOM.render(<App />, document.getElementById('root'));\r\n\r\n// If you want your app to work offline and load faster, you can change\r\n// unregister() to register() below. Note this comes with some pitfalls.\r\n// Learn more about service workers: https://bit.ly/CRA-PWA\r\nserviceWorker.unregister();\r\n","\r\nexport default {\r\n\tButton: require('./inputs/Button').default,\r\n\tChip: require('./inputs/Chips').default,\r\n\tChips: require('./inputs/Chips').InputChips,\r\n\tChipsField: require('./inputs/Chips').InputChipsField,\r\n\tFieldset: require('./inputs/Fieldset').default,\r\n\tFieldsetItem: require('./inputs/Fieldset').FieldsetItem,\r\n\tForm: require('./inputs/Fieldset').Form,\r\n\tNumber: require('./inputs/Number').default,\r\n\tSelect: require('./inputs/Select').default,\r\n\tSwitch: require('./inputs/Switch').default,\r\n\tSwitchInline: require('./inputs/Switch').InputSwitchInline,\r\n\tText: require('./inputs/Text').default\r\n}","import React from 'react'\r\n//import clsx from 'clsx'\r\n//import { v4 as uuid } from 'uuid'\r\n\r\nimport { DEVICES_STATES, DEVICES_CONFIG } from '../config/config'\r\nimport i18n from '../i18n'\r\nimport Devices from '../Devices'\r\nimport FUNCTIONS from '../functions'\r\nimport ucFirst from '../helpers/utils'\r\n\r\nimport Button from '@material-ui/core/Button'\r\nimport Grid from '@material-ui/core/Grid'\r\nimport List from '@material-ui/core/List'\r\nimport ListItem from '@material-ui/core/ListItem'\r\nimport ListItemIcon from '@material-ui/core/ListItemIcon'\r\nimport ListItemText from '@material-ui/core/ListItemText'\r\nimport ListItemSecondaryAction from '@material-ui/core/ListItemSecondaryAction'\r\n\r\nimport IconButton from '@material-ui/core/IconButton'\r\nimport Tooltip from '@material-ui/core/Tooltip'\r\n\r\nimport AddIcon from '@material-ui/icons/Add'\r\nimport DeleteIcon from '@material-ui/icons/Delete'\r\nimport InfoIcon from '@material-ui/icons/Info'\r\n\r\nimport Dialog from '../components/Dialog'\r\nimport Inputs from '../components/Inputs'\r\n\r\n\r\n/*\r\n * STYLES\r\n */\r\nimport { withStyles } from '@material-ui/core/styles'\r\nconst styles = theme => ({\r\n\tfullWidth: {\r\n\t\twidth: '100%',\r\n\t},\r\n\talignRight: {\r\n\t\tdisplay: 'flex',\r\n\t\tjustifyContent: 'flex-end',\r\n\t\t\r\n\t\t'& > :not(:first-child)': {\r\n\t\t\tmarginLeft: 8,\r\n\t\t}\r\n\t}\r\n});\r\n\r\n\r\nclass SettingsPage extends React.Component {\r\n\t\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\t\r\n\t\tthis.state = {\r\n\t\t\tdevice: this.props.device,\r\n\t\t\terrors: {}\r\n\t\t}\r\n\t\t\r\n\t\t// required fields\r\n\t\tif (!this.state.device.name) {\r\n\t\t\tthis.state.errors['device-name'] = i18n.t('No input given');\r\n\t\t}\r\n\t\tif (!this.state.device.options.groups || (this.state.device.options.groups && this.state.device.options.groups.length === 0)) {\r\n\t\t\tthis.state.errors['options-group'] = i18n.t('No groups selected');\r\n\t\t}\r\n\t\t\r\n\t\t//\r\n\t\tthis.onChange = this.props.onChange;\r\n\t\tthis.deviceId = this.props.device.id;\r\n\t\tthis.groupEditor = {};\r\n\t\tthis.newStateKey = '';\r\n\t}\r\n\t\r\n\t/*\r\n\t *\r\n\t */\r\n\t_save = () => {\r\n\t\tlet savedDevice = { ...this.state.device }\r\n\t\t\r\n\t\tfor (const key in this.groupEditor) {\r\n\t\t\tconst val = this.groupEditor[key];\r\n\t\t\tconst [ type, base, characteristic ] = key.split('-');\r\n\t\t\t\r\n\t\t\t// states\r\n\t\t\tif (type === 'states') {\r\n\t\t\t\tif (typeof savedDevice[type][base] === 'object') {\r\n\t\t\t\t\tsavedDevice[type][base][characteristic] = val;\r\n\t\t\t\t}\r\n\t\t\t\telse {\r\n\t\t\t\t\tsavedDevice[type][base] = {\r\n\t\t\t\t\t\tstate: savedDevice[type][base],\r\n\t\t\t\t\t\t[characteristic]: val\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\t// options or attributes\r\n\t\t\telse if (type === 'options' || type === 'attributes') {\r\n\t\t\t\tsavedDevice[type][base] = val;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\t// device\r\n\t\t\telse {\r\n\t\t\t\tsavedDevice[base] = val;\r\n\t\t\t}\r\n\t\t}\r\n\t\t\r\n\t\t// add new groups to list\r\n\t\tsavedDevice.options.group.map(group => Devices.addGroupId(group.toLowerCase().replace(/ /, ''), group));\r\n\t\t\r\n\t\t// save\r\n\t\tsavedDevice._created = Date.now();\r\n\t\tthis.props.onSave && this.props.onSave(savedDevice);\r\n\t}\r\n\t\r\n\t/*\r\n\t *\r\n\t */\r\n\t_deleteDevice = () => this.props.onDelete && this.props.onDelete(this.deviceId);\r\n\t\r\n\t/*\r\n\t *\r\n\t */\r\n\t_onChange = (props, val) => {\r\n\t\t\r\n\t\t// data verification and error handler\r\n\t\tif (props.required && ((Array.isArray(val) && val.length === 0) || (typeof val === 'string' && !val))) {\r\n\t\t\tthis.setState(prevStates => ({\r\n\t\t\t\terrors: {\r\n\t\t\t\t\t...prevStates.errors,\r\n\t\t\t\t\t[props.id]: i18n.t('No input given')\r\n\t\t\t\t}\r\n\t\t\t}));\r\n\t\t\t\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\t\r\n\t\t// remove old errors\r\n\t\tif (this.state.errors[props.id]) {\r\n\t\t\tthis.setState(prevStates => {\r\n\t\t\t\tlet nextErrors = { ...prevStates.errors || {} }\r\n\t\t\t\tdelete nextErrors[props.id];\r\n\t\t\t\treturn { errors: nextErrors };\r\n\t\t\t});\r\n\t\t}\r\n\t\t\r\n\t\t// set value\r\n\t\tthis.groupEditor[props.id] = val;\r\n\t}\r\n\t\r\n\t/*\r\n\t *\r\n\t */\r\n\t_addState = () => {\r\n\t\t\r\n\t\t// empty state key\r\n\t\tif (!this.newStateKey) {\r\n\t\t\tthis.setState(prevStates => ({\r\n\t\t\t\terrors: {\r\n\t\t\t\t\t...prevStates.errors,\r\n\t\t\t\t\tnewStateKey: i18n.t('Type in a state key / identifier')\r\n\t\t\t\t}\r\n\t\t\t}));\r\n\t\t}\r\n\t\t\r\n\t\t// state key exists already\r\n\t\telse if (Object.keys(this.state.device.states).indexOf(this.newStateKey) > -1) {\r\n\t\t\tthis.setState(prevStates => ({\r\n\t\t\t\terrors: {\r\n\t\t\t\t\t...prevStates.errors,\r\n\t\t\t\t\tnewStateKey: i18n.t('State key already used')\r\n\t\t\t\t}\r\n\t\t\t}));\r\n\t\t}\r\n\t\t\r\n\t\t// add state key\r\n\t\telse {\r\n\t\t\tlet key = this.newStateKey.replace(/ /g, '');\r\n\t\t\t//this.newStateKey = '';\r\n\t\t\t\r\n\t\t\tthis.setState(prevStates => {\r\n\t\t\t\tlet nextErrors = { ...prevStates.errors }\r\n\t\t\t\tdelete nextErrors['newStateKey'];\r\n\t\t\t\t\r\n\t\t\t\treturn {\r\n\t\t\t\t\terrors: nextErrors,\r\n\t\t\t\t\tdevice: {\r\n\t\t\t\t\t\t...prevStates.device,\r\n\t\t\t\t\t\tstates: {\r\n\t\t\t\t\t\t\t[key]: {},\r\n\t\t\t\t\t\t\t...prevStates.device.states || {}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\t}\r\n\t\r\n\t/*\r\n\t *\r\n\t */\r\n\t_deleteState = key => {\r\n\t\t\r\n\t\tthis.setState(prevStates => {\r\n\t\t\tlet nextDevice = { ...prevStates.device }\r\n\t\t\tdelete nextDevice.states[key];\r\n\t\t\t\r\n\t\t\treturn {\r\n\t\t\t\tdevice: nextDevice\r\n\t\t\t}\r\n\t\t});\r\n\t}\r\n\t\r\n\t/*\r\n\t *\r\n\t */\r\n\trenderDeviceState(state) {\r\n\t\t\r\n\t\tconst states = Object.keys(DEVICES_STATES).map(key => {\r\n\t\t\tconst s = DEVICES_STATES[key];\r\n\t\t\treturn (\r\n\t\t\t\t<Inputs.FieldsetItem columns={4} key={'states-' + state.key + '-' + key}>\r\n\t\t\t\t\t<Inputs.Text\r\n\t\t\t\t\t\tid={'states-' + state.key + '-' + key}\r\n\t\t\t\t\t\tonChange={this._onChange}\r\n\t\t\t\t\t\tshrink={true}\r\n\t\t\t\t\t\tlabel={s.label || ucFirst(key)}\r\n\t\t\t\t\t\tval={!state[key] || typeof state[key] === 'string' ? (state[key] || '') : (state[key].node || JSON.stringify(state[key]))}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\r\n\t\t\t\t</Inputs.FieldsetItem>\r\n\t\t\t);\r\n\t\t});\r\n\t\t\r\n\t\treturn (\r\n\t\t\t<ListItem key={'StatesListItemLabel-' + state.key} dense divider>\r\n\t\t\t\t{state.key &&\r\n\t\t\t\t<ListItemIcon>\r\n\t\t\t\t\t<IconButton onClick={() => this._deleteState(state.key)}>\r\n\t\t\t\t\t\t<DeleteIcon />\r\n\t\t\t\t\t</IconButton>\r\n\t\t\t\t</ListItemIcon>}\r\n\t\t\t\t\r\n\t\t\t\t<ListItemText disableTypography>\r\n\t\t\t\t\t<div style={{ paddingBottom: 8 }}><strong>{state.key}</strong></div>\r\n\t\t\t\t\t<Inputs.Fieldset noPadding>\r\n\t\t\t\t\t\t{states}\r\n\t\t\t\t\t</Inputs.Fieldset>\r\n\t\t\t\t</ListItemText>\r\n\t\t\t</ListItem>\r\n\t\t);\r\n\t}\r\n\t\r\n\t/*\r\n\t *\r\n\t */\r\n\trenderDeviceStates(states) {\r\n\t\tconst { classes } = this.props;\r\n\t\t\r\n\t\tconst renderedStates = Object.keys(states || {}).map(stateKey => {\r\n\t\t\tlet state = states[stateKey];\r\n\t\t\tstate = typeof state === 'string' ? { 'state': state } : state;\r\n\t\t\treturn this.renderDeviceState({ ...state, key: stateKey });\r\n\t\t});\r\n\t\t\r\n\t\treturn (\r\n\t\t\t<>\r\n\t\t\t\t<List classes={{ root: classes.fullWidth }} dense>\r\n\t\t\t\t\t<ListItem key={'StatesListItemLabel-add'} dense divider>\r\n\t\t\t\t\t\t<ListItemIcon>\r\n\t\t\t\t\t\t\t<IconButton disabled>\r\n\t\t\t\t\t\t\t\t<AddIcon />\r\n\t\t\t\t\t\t\t</IconButton>\r\n\t\t\t\t\t\t</ListItemIcon>\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\t<ListItemText disableTypography>\r\n\t\t\t\t\t\t\t<Inputs.Text id={'states-add'} onChange={(props, input) => this.newStateKey = input} shrink={true} label=\"new key\" val={this.newStateKey} />\r\n\t\t\t\t\t\t\t<Inputs.Button\r\n\t\t\t\t\t\t\t\tlabel={i18n.t('add new state')}\r\n\t\t\t\t\t\t\t\tonClick={this._addState}\r\n\t\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\t{this.state.errors['newStateKey'] || ''}\r\n\t\t\t\t\t\t</ListItemText>\r\n\t\t\t\t\t</ListItem>\r\n\t\t\t\t\t\r\n\t\t\t\t\t{renderedStates}\r\n\t\t\t\t\t\r\n\t\t\t\t</List>\r\n\t\t\t</>\r\n\t\t);\r\n\t}\r\n\t\r\n\t/*\r\n\t *\r\n\t */\r\n\trenderDeviceOption(config, value) {\r\n\t\t\r\n\t\tif (Array.isArray(value)) {\r\n\t\t\tvalue = value.join(',');\r\n\t\t}\r\n\t\telse if (typeof value === 'object') {\r\n\t\t\tvalue = JSON.stringify(value);\r\n\t\t}\r\n\t\t\r\n\t\tconst Tag = Inputs[config.type || 'Text'];\r\n\t\treturn (\r\n\t\t\t<ListItem key={'StatesListItemLabel-' + config.parameter} divider>\r\n\t\t\t\t<ListItemIcon>\r\n\t\t\t\t\t<Tooltip title={i18n.t(config.description || 'No description given')} placement=\"left\">\r\n\t\t\t\t\t\t<IconButton size=\"small\">\r\n\t\t\t\t\t\t\t<InfoIcon />\r\n\t\t\t\t\t\t</IconButton>\r\n\t\t\t\t\t</Tooltip>\r\n\t\t\t\t</ListItemIcon>\r\n\t\t\t\t<ListItemText\r\n\t\t\t\t\tprimary={config.parameter}\r\n\t\t\t\t\tsecondary={i18n.t(config.label || '')}\r\n\t\t\t\t\t/>\r\n\t\t\t\t\t\r\n\t\t\t\t<ListItemSecondaryAction>\r\n\t\t\t\t\t<Tag\r\n\t\t\t\t\t\tkey={'options-' + config.parameter}\r\n\t\t\t\t\t\tid={'options-' + config.parameter}\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t\tval={value}\r\n\t\t\t\t\t\tonChange={this._onChange}\r\n\t\t\t\t\t\t{...config}\r\n\t\t\t\t\t\t/>\r\n\t\t\t\t\t\r\n\t\t\t\t</ListItemSecondaryAction>\r\n\t\t\t</ListItem>\r\n\t\t);\r\n\t}\r\n\t\r\n\t/*\r\n\t *\r\n\t */\r\n\trenderDeviceOptions(options) {\r\n\t\tconst { classes } = this.props;\r\n\t\tconst renderedOptions = Object.keys(DEVICES_CONFIG).sort().map(config => {\r\n\t\t\t\r\n\t\t\tif (config === 'group') {\r\n\t\t\t\treturn null;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\treturn this.renderDeviceOption({ ...DEVICES_CONFIG[config], parameter: config }, options[config] || '');\r\n\t\t});\r\n\t\t\r\n\t\treturn (\r\n\t\t\t<List classes={{ root: classes.fullWidth }} dense>\r\n\t\t\t\t{renderedOptions}\r\n\t\t\t</List>\r\n\t\t);\r\n\t}\r\n\t\r\n\t/*\r\n\t *\r\n\t */\r\n\trender() {\r\n\t\tconst { classes } = this.props;\r\n\t\t\r\n\t\tif (this.state.device === null) {\r\n\t\t\treturn null;\r\n\t\t}\r\n\t\t\r\n\t\tconst states = this.renderDeviceStates(this.state.device.states);\r\n\t\tconst options = this.renderDeviceOptions(this.state.device.options);\r\n\t\t\r\n\t\treturn (\r\n\t\t\t<Dialog\r\n\t\t\t\theader={i18n.t('Device Configuration')}\r\n\t\t\t\tactions={[\r\n\t\t\t\t\t<Grid key='actions' container>\r\n\t\t\t\t\t\t<Grid item xs={6}>\r\n\t\t\t\t\t\t\t<Button key='action-delete' onClick={() => this._deleteDevice()} color=\"secondary\" startIcon={<DeleteIcon />}>\r\n\t\t\t\t\t\t\t\t{i18n.t('Delete Device')}\r\n\t\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t</Grid>\r\n\t\t\t\t\t\t<Grid item xs={6} className={classes.alignRight}>\r\n\t\t\t\t\t\t\t<Button key='action-cancel' onClick={() => this.props.onClose()} color=\"secondary\">\r\n\t\t\t\t\t\t\t\t{i18n.t('Cancel')}\r\n\t\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t\t<Button key='action-save' onClick={() => this._save()} color=\"primary\" variant=\"contained\" disabled={Object.keys(this.state.errors).length > 0}>\r\n\t\t\t\t\t\t\t\t{i18n.t('Save')}\r\n\t\t\t\t\t\t\t</Button>\r\n\t\t\t\t\t\t</Grid>\r\n\t\t\t\t\t</Grid>\r\n\t\t\t\t]}\r\n\t\t\t\t\r\n\t\t\t\tdense\r\n\t\t\t\tmaxWidth='md'\r\n\t\t\t\tfullWidth={true}\r\n\t\t\t\t\r\n\t\t\t\topen={this.state.device !== null}\r\n\t\t\t\tonClose={() => this.props.onClose()}\r\n\t\t\t\t>\r\n\t\t\t\t\r\n\t\t\t\t<Inputs.Fieldset label={i18n.t('General')}>\r\n\t\t\t\t\t<Inputs.FieldsetItem columns={4}>\r\n\t\t\t\t\t\t<Inputs.Text\r\n\t\t\t\t\t\t\tkey=\"device-name\"\r\n\t\t\t\t\t\t\tid=\"device-name\"\r\n\t\t\t\t\t\t\tautoFocus\r\n\t\t\t\t\t\t\trequired\r\n\t\t\t\t\t\t\terror={this.state.errors['device-name'] !== undefined}\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tlabel={i18n.t('Device')}\r\n\t\t\t\t\t\t\tval={this.state.device.name}\r\n\t\t\t\t\t\t\tonChange={this._onChange}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t</Inputs.FieldsetItem>\r\n\t\t\t\t\t<Inputs.FieldsetItem columns={4}>\r\n\t\t\t\t\t\t<Inputs.Select\r\n\t\t\t\t\t\t\tkey=\"device-function\"\r\n\t\t\t\t\t\t\tid=\"device-function\"\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tlabel={i18n.t('Function')}\r\n\t\t\t\t\t\t\tval={this.state.device.function}\r\n\t\t\t\t\t\t\tselection={Object.keys(FUNCTIONS).sort().map(func => func !== 'defaults' ? ({ [func]: i18n.t(func) }) : ({ 'other': i18n.t('other') }))}\r\n\t\t\t\t\t\t\tonChange={this._onChange}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t</Inputs.FieldsetItem>\r\n\t\t\t\t\t<Inputs.FieldsetItem>\r\n\t\t\t\t\t\t<Inputs.ChipsField\r\n\t\t\t\t\t\t\twidth=\"100%\"\r\n\t\t\t\t\t\t\tid=\"options-group\"\r\n\t\t\t\t\t\t\trequired\r\n\t\t\t\t\t\t\terror={this.state.errors['options-group'] !== undefined}\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tplaceholder={i18n.t('Groups')}\r\n\t\t\t\t\t\t\tval={(this.state.device.options && this.state.device.options.group && this.state.device.options.group.map(group => ({ id: group.toLowerCase(), name: group }))) || []}\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\toptions={Devices.getGroupList()}\r\n\t\t\t\t\t\t\toptionKey=\"name\"\r\n\t\t\t\t\t\t\t\r\n\t\t\t\t\t\t\tonChange={(props, input) => this._onChange(props, input.map(option => option.name))}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t\t\r\n\t\t\t\t\t</Inputs.FieldsetItem>\r\n\t\t\t\t\t\r\n\t\t\t\t</Inputs.Fieldset>\r\n\t\t\t\t\r\n\t\t\t\t<Inputs.Fieldset label={i18n.t('States')}>\r\n\t\t\t\t\t{states}\r\n\t\t\t\t</Inputs.Fieldset>\r\n\t\t\t\t\r\n\t\t\t\t<Inputs.Fieldset label={i18n.t('Options')}>\r\n\t\t\t\t\t{options}\r\n\t\t\t\t</Inputs.Fieldset>\r\n\t\t\t</Dialog>\r\n\r\n\t\t)\r\n\t}\r\n}\r\n\r\nexport default withStyles(styles)(SettingsPage);\r\n","export default function ucFirst(str) {\r\n\tif (!str) {\r\n\t\treturn '';\r\n\t}\r\n\t\r\n\treturn str.charAt(0).toUpperCase() + str.slice(1);\r\n}\r\n","import React from 'react'\r\n//import clsx from 'clsx'\r\nimport { v4 as uuid } from 'uuid'\r\n\r\nimport Devices from '../Devices'\r\nimport i18n from '../i18n'\r\n\r\nimport IconButton from '@material-ui/core/IconButton'\r\n\r\nimport TableBody from '@material-ui/core/TableBody'\r\nimport TableRow from '@material-ui/core/TableRow'\r\nimport TableCell from '@material-ui/core/TableCell'\r\n\r\nimport AddIcon from '@material-ui/icons/AddCircle'\r\nimport EditIcon from '@material-ui/icons/Edit'\r\n\r\nimport EnhancedTable from '../components/EnhancedTable'\r\nimport Inputs from '../components/Inputs'\r\n\r\nimport DevicesPage from '../pages/DevicesPage'\r\n\r\n\r\n/*\r\n * STYLES\r\n */\r\nimport { withStyles } from '@material-ui/core/styles'\r\nconst styles = theme => ({\r\n\tdeleteButton: {\r\n\t\tmarginTop: '25px'\r\n\t},\r\n\thr: {\r\n\t\tmargin: '10px 2px'\r\n\t},\r\n\tCustomTextInput: {\r\n\t\twidth: 150\r\n\t},\r\n\tCustomDialogTitle: {\r\n\t\tpadding: 0,\r\n\t\tmarginRight: '50px'\r\n\t},\r\n\tTableCell: {\r\n\t\tverticalAlign: 'top',\r\n\t\tpadding: '5px 0'\r\n\t}\r\n});\r\n\r\n\r\nclass SettingsPage extends React.Component {\r\n\t\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\t\r\n\t\tthis.state = {\r\n\t\t\tselectedDevice: null,\r\n\t\t\terrors: {}\r\n\t\t}\r\n\t\t\r\n\t\tthis.devices = Devices.getDevices({ raw: true, copy: true });\r\n\t}\r\n\t\r\n\t/*\r\n\t *\r\n\t */\r\n\t_saveDevices = devices => {\r\n\t\tthis.devices = devices;\r\n\t\tthis.props.onChange && this.props.onChange(devices);\r\n\t}\r\n\t\r\n\t/*\r\n\t *\r\n\t */\r\n\t_saveDevice = device => {\r\n\t\tthis._saveDevices({ ...this.devices, [device.id]: device });\r\n\t\t\r\n\t\tthis.setState({ selectedDevice: null, errors: {} }, () => document.getElementById('DialogContent').scrollTop = (document.getElementById('device-' + device.id) && document.getElementById('device-' + device.id).offsetTop) || 0);\r\n\t}\r\n\t\r\n\t/*\r\n\t *\r\n\t */\r\n\t_deleteDevice = deviceId => {\r\n\t\tlet nextDevices = { ...this.devices }\r\n\t\tdelete nextDevices[deviceId];\r\n\t\tthis._saveDevices(nextDevices);\r\n\t\t\r\n\t\tthis.setState({ selectedDevice: null, errors: {} });\r\n\t}\r\n\t\r\n\t/*\r\n\t *\r\n\t */\r\n\trenderDevices(props) {\r\n\t\tconst { sortedRows } = props;\r\n\t\t\r\n\t\treturn (\r\n\t\t\t<TableBody>\r\n\t\t\t\r\n\t\t\t{sortedRows.map((row, index) => {\r\n\t\t\t\tlet options = Object.keys(row.options || {}).filter(optionKey => (optionKey === 'group' || row.options[optionKey] === '' || (Array.isArray(row.options[optionKey]) && row.options[optionKey].length === 0) || (typeof row.options[optionKey] === 'object' && Object.keys(row.options[optionKey]).length === 0)) === false).sort().join(', '); \r\n\t\t\t\tlet attributes = Object.keys(row.attributes || {}).sort().join(', ');\r\n\t\t\t\tlet group = (row.options && row.options.group && row.options.group.join(', ')) || '';\r\n\t\t\t\t\r\n\t\t\t\treturn (\r\n\t\t\t\t<TableRow key={'TableRow-' + index} id={'device-' + row.id} hover tabIndex={-1}>\r\n\t\t\t\t\t<TableCell padding=\"checkbox\" scope=\"row\" align=\"center\">\r\n\t\t\t\t\t\t<IconButton onClick={() => this.setState({ selectedDevice: row.id })}>\r\n\t\t\t\t\t\t\t<EditIcon />\r\n\t\t\t\t\t\t</IconButton>\r\n\t\t\t\t\t</TableCell>\r\n\t\t\t\t\t<TableCell>{row.name}</TableCell>\r\n\t\t\t\t\t<TableCell>{row.function}</TableCell>\r\n\t\t\t\t\t<TableCell>{group}</TableCell>\r\n\t\t\t\t\t<TableCell>{Object.keys(row.states || {}).join(', ')}</TableCell>\r\n\t\t\t\t\t<TableCell>{options.length > 30 ? options.substr(0,27) + '...' : options}</TableCell>\r\n\t\t\t\t\t<TableCell>{attributes.length > 15 ? attributes.substr(0,12) + '...' : attributes}</TableCell>\r\n\t\t\t\t</TableRow>\r\n\t\t\t\t\r\n\t\t\t\t);\r\n\t\t\t})}\r\n\t\t\t\r\n\t\t\t</TableBody>\r\n\t\t);\r\n\t}\r\n\t\r\n\t/*\r\n\t *\r\n\t */\r\n\trender() {\r\n\t\treturn (\r\n\r\n<React.Fragment>\r\n\t<EnhancedTable\r\n\t\ttitle={i18n.t('Devices List')}\r\n\t\theadCells={[\r\n\t\t\t{ id: 'edit', width: '3%', disablePadding: true, label: '' },\r\n\t\t\t{ id: 'name', width: '13%', label: i18n.t('Name') },\r\n\t\t\t{ id: 'function', width: '8%', label: i18n.t('Function') },\r\n\t\t\t{ id: 'group', orderBy: 'options.group', width: '7%', label: i18n.t('Group') },\r\n\t\t\t{ id: 'states', width: '45%', disablePadding: false, label: i18n.t('States') },\r\n\t\t\t{ id: 'options', width: '14%', disablePadding: false, label: i18n.t('Options') },\r\n\t\t\t{ id: 'attributes', width: '10%', disablePadding: false, label: i18n.t('Attributes') }\r\n\t\t]}\r\n\t\trows={Object.values(this.devices)}\r\n\t\t\r\n\t\tdefaultOrderBy=\"name\"\r\n\t\tselectable={false}\r\n\t\tsortable={true}\r\n\t\tstickyHeader\r\n\t\t\r\n\t\tCustomTableBody={props => this.renderDevices(props)}\r\n\t\ttoolbarRightActionButton={\r\n\t\t\t<Inputs.Button\r\n\t\t\t\tonClick={() => this.setState({ selectedDevice: '#new' })}\r\n\t\t\t\tstartIcon={<AddIcon />}\r\n\t\t\t\tdisabled={this.state.selectedDevice !== null}\r\n\t\t\t\tlabel={i18n.t('add new device')}\r\n\t\t\t\t/>\r\n\t\t}\r\n\t\t/>\r\n\t\r\n\t{this.state.selectedDevice && <DevicesPage\r\n\t\t\t\t\t\t\t\t\tdevice={this.state.selectedDevice === '#new' ? { id: uuid(), states: {}, options: {} } : this.devices[this.state.selectedDevice]}\r\n\t\t\t\t\t\t\t\t\tonSave={this._saveDevice}\r\n\t\t\t\t\t\t\t\t\tonDelete={this._deleteDevice}\r\n\t\t\t\t\t\t\t\t\tonClose={() => this.setState({ selectedDevice: null })}\r\n\t\t\t\t\t\t\t\t\t/>}\r\n\t\r\n</React.Fragment>\r\n\r\n\t\t)\r\n\t}\r\n}\r\n\r\nexport default withStyles(styles)(SettingsPage);\r\n","import React from 'react'\r\n\r\nimport { DEFAULTS, LAYOUT_CONFIG } from '../config/config'\r\nimport i18n from '../i18n'\r\nimport Devices from '../Devices'\r\nimport { ModuleConfigurations, ModuleSettings } from '../modules/'\r\n\r\nimport Button from '@material-ui/core/Button'\r\nimport Grid from '@material-ui/core/Grid'\r\nimport IconButton from '@material-ui/core/IconButton'\r\nimport List from '@material-ui/core/List'\r\nimport ListItem from '@material-ui/core/ListItem'\r\nimport ListItemIcon from '@material-ui/core/ListItemIcon'\r\nimport ListItemText from '@material-ui/core/ListItemText'\r\nimport Paper from '@material-ui/core/Paper'\r\nimport Typography from '@material-ui/core/Typography'\r\n\r\nimport AddIcon from '@material-ui/icons/AddCircle'\r\nimport TabIcon from '@material-ui/icons/Tab'\r\nimport ArrowUpIcon from '@material-ui/icons/KeyboardArrowUp'\r\nimport ArrowDownIcon from '@material-ui/icons/KeyboardArrowDown'\r\nimport FullscreenIcon from '@material-ui/icons/Fullscreen'\r\nimport DeleteIcon from '@material-ui/icons/Delete'\r\n\r\nimport Dialog from '../components/Dialog'\r\nimport Inputs from '../components/Inputs'\r\n\r\n\r\n/*\r\n * STYLES\r\n */\r\nimport { withStyles } from '@material-ui/core/styles'\r\nconst styles = theme => ({\r\n\tdeleteButton: {\r\n\t\tmarginTop: '20px'\r\n\t},\r\n\ttabs: {\r\n\t\tmarginBottom: '10px'\r\n\t},\r\n\ttab: {\r\n\t\tpadding: theme.spacing(3, 2),\r\n\t},\r\n\ticonContainer: {\r\n\t\tflexDirection: 'column',\r\n\t\talignItems: 'center'\r\n\t},\r\n\tcolumnContainer: {\r\n\t\tmarginTop: theme.spacing(2),\r\n\t},\r\n\tcolumn: {\r\n\t\twidth: 250,\r\n\t\tmargin: theme.spacing(1, 1),\r\n\t\tborderRight: '1px solid rgba(0, 0, 0, 0.12)',\r\n\t\tborderLeft: '1px solid rgba(0, 0, 0, 0.12)',\r\n\t},\r\n\tDialogActions: {\r\n\t\tjustifyContent: 'initial'\r\n\t},\r\n\talignRight: {\r\n\t\tdisplay: 'flex',\r\n\t\tjustifyContent: 'flex-end',\r\n\t\t\r\n\t\t'& > :not(:first-child)': {\r\n\t\t\tmarginLeft: 8,\r\n\t\t}\r\n\t}\r\n});\r\n\r\n\r\nclass LayoutsPage extends React.Component {\r\n\t\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\t\r\n\t\tthis.state = {\r\n\t\t\tpopup: false,\r\n\t\t\t\r\n\t\t\tselectedTab: null,\r\n\t\t\tselectedColumn: null,\r\n\t\t\tselectedGroup: {},\r\n\t\t\t\r\n\t\t\tlayout: this.props.layout,\r\n\t\t\tsettings: this.props.settings,\r\n\t\t\terrors: {}\r\n\t\t}\r\n\t\t\r\n\t\tthis.groupIds = Devices.getGroupList();\r\n\t\tthis.groupEditor = {};\r\n\t}\r\n\t\r\n\t/**\r\n\t *\r\n\t */\r\n\t_onChange = (props, val) => {\r\n\t\t\r\n\t\tif (props.required && !val) {\r\n\t\t\tthis.setState(prevStates => ({\r\n\t\t\t\terrors: {\r\n\t\t\t\t\t...prevStates.errors,\r\n\t\t\t\t\t[props.id]: i18n.t('No input given')\r\n\t\t\t\t}\r\n\t\t\t}));\r\n\t\t\t\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\t\r\n\t\tif (this.state.errors[props.id]) {\r\n\t\t\tthis.setState(prevStates => {\r\n\t\t\t\tlet nextErrors = { ...prevStates.errors || {} }\r\n\t\t\t\tdelete nextErrors[props.id];\r\n\t\t\t\treturn { errors: nextErrors };\r\n\t\t\t});\r\n\t\t}\r\n\t\t\r\n\t\tthis.groupEditor[props.id] = val;\r\n\t}\r\n\t\r\n\t/**\r\n\t *\r\n\t */\r\n\t_addColumn = (tabKey, newColumn) => {\r\n\t\t\r\n\t\tthis.setState(prevState => ({\r\n\t\t\tlayout: {\r\n\t\t\t\t...prevState.layout,\r\n\t\t\t\t[tabKey]: {\r\n\t\t\t\t\t...prevState.layout[tabKey],\r\n\t\t\t\t\t[newColumn]: {}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}), () => this.props.onChange(this.state.layout, this.state.settings));\r\n\t}\r\n\t\r\n\t/**\r\n\t *\r\n\t */\r\n\t_addTab = () => {\r\n\t\tconst newTabIndex = Object.keys(this.state.layout).length+1;\r\n\t\tthis.setState(prevState => ({\r\n\t\t\tlayout: {\r\n\t\t\t\t...prevState.layout,\r\n\t\t\t\t['home|' + i18n.t('new tab') + ' ' + newTabIndex]: {\r\n\t\t\t\t\t1: {}\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}), () => this.props.onChange(this.state.layout, this.state.settings));\r\n\t\t\r\n\t\tsetTimeout(() => window.location = '#tab-' + newTabIndex, 100);\r\n\t}\r\n\t\r\n\t/**\r\n\t *\r\n\t */\r\n\t_changeTab = tabKey => ({ id }, userInput) => {\r\n\t\t\r\n\t\t// edit tab icon / label\r\n\t\tif (id === 'tabIcon' || id === 'tabLabel') {\r\n\t\t\t\r\n\t\t\t// icon or label\r\n\t\t\tlet [ icon, label ] = tabKey.split('|');\r\n\t\t\tif (id === 'tabIcon') {\r\n\t\t\t\ticon = userInput;\r\n\t\t\t}\r\n\t\t\telse if (id === 'tabLabel') {\r\n\t\t\t\tlabel = userInput;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tlet layout = {}\r\n\t\t\tObject.keys(this.state.layout).forEach(tKey => {\r\n\t\t\t\tlayout[tKey === tabKey ? icon + '|' + label : tKey] = this.state.layout[tKey];\r\n\t\t\t});\r\n\t\t\t\r\n\t\t\tthis.setState({ layout: layout }, () => this.props.onChange(this.state.layout, this.state.settings));\r\n\t\t}\r\n\t\t\r\n\t\t// edit tab fullscreen option\r\n\t\telse if (id === 'tabFullscreen') {\r\n\t\t\tlet prevTab = { ...this.state.layout[tabKey] }\r\n\t\t\t\r\n\t\t\tif (userInput === true) {\r\n\t\t\t\tthis.setState(prevState => ({\r\n\t\t\t\t\tlayout: {\r\n\t\t\t\t\t\t...prevState.layout,\r\n\t\t\t\t\t\t[tabKey]: prevTab[1]\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t}), () => this.props.onChange(this.state.layout, this.state.settings));\r\n\t\t\t}\r\n\t\t\telse {\r\n\t\t\t\tthis.setState(prevState => ({\r\n\t\t\t\t\tlayout: {\r\n\t\t\t\t\t\t...prevState.layout,\r\n\t\t\t\t\t\t[tabKey]: {\r\n\t\t\t\t\t\t\t1: prevTab\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t}), () => this.props.onChange(this.state.layout, this.state.settings));\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\t\r\n\t/**\r\n\t *\r\n\t */\r\n\t_closePopup = action => {\r\n\t\t\r\n\t\tif (action === 'cancel') {\r\n\t\t\tthis.setState({ popup: false });\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\telse if (action === 'save') {\r\n\t\t\t\r\n\t\t\tlet tabKey = this.state.selectedTab;\r\n\t\t\tlet columnKey = this.state.selectedColumn;\r\n\t\t\tlet groupKey = this.state.selectedGroup.key;\r\n\t\t\t\r\n\t\t\t// errors\r\n\t\t\tconst requiredFields = [{ parameter: 'key', required: true }, { parameter: 'component', required: true }];\r\n\t\t\tlet errors = {};\r\n\t\t\t\r\n\t\t\t[ ...requiredFields, ...(ModuleConfigurations[this.state.selectedGroup.key] || []) ].forEach(field => {\r\n\t\t\t\terrors['input-group-' + field.parameter] = field.required === true && !this.groupEditor['input-group-' + field.parameter];\r\n\t\t\t});\r\n\t\t\t\r\n\t\t\tif (Object.values(errors).indexOf(true) > -1) {\r\n\t\t\t\tthis.setState(prevState => ({ errors: { ...prevState.errors, ...errors }}));\r\n\t\t\t\tconsole.error(errors, this.groupEditor);\r\n\t\t\t\treturn false;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\tlet group = {};\r\n\t\t\tObject.keys(this.groupEditor).forEach(key => group[key.replace('input-group-', '')] = this.groupEditor[key]);\r\n\t\t\tgroup.key = group.key.toLowerCase().replace(/ /g, '');\r\n\t\t\t\r\n\t\t\t// edit group\r\n\t\t\tif (groupKey) {\r\n\t\t\t\t\r\n\t\t\t\tlet tabLayout = {}\r\n\t\t\t\tfor (let col = 1; col < Object.keys(this.state.layout[tabKey]).length; col++) {\r\n\t\t\t\t\ttabLayout[col] = this.state.layout[tabKey][col >= columnKey ? col+1 : col];\r\n\t\t\t\t}\r\n\t\t\t\t\r\n\t\t\t\tlet tabColumnGroups = {};\r\n\t\t\t\tObject.keys(this.state.layout[tabKey][columnKey]).forEach(componentKey => {\r\n\t\t\t\t\t\r\n\t\t\t\t\tif (componentKey === groupKey) {\r\n\t\t\t\t\t\ttabColumnGroups[group.key] = { ...this.state.layout[tabKey][columnKey][componentKey], ...group }\r\n\t\t\t\t\t}\r\n\t\t\t\t\telse {\r\n\t\t\t\t\t\ttabColumnGroups[componentKey] = this.state.layout[tabKey][columnKey][componentKey];\r\n\t\t\t\t\t}\r\n\t\t\t\t});\r\n\t\t\t\t\r\n\t\t\t\tdelete tabColumnGroups[group.key].key;\r\n\t\t\t\tthis.setState(prevState => ({\r\n\t\t\t\t\tpopup: false,\r\n\t\t\t\t\tlayout: {\r\n\t\t\t\t\t\t...prevState.layout,\r\n\t\t\t\t\t\t[tabKey]: {\r\n\t\t\t\t\t\t\t...prevState.layout[tabKey],\r\n\t\t\t\t\t\t\t[columnKey]: tabColumnGroups\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t\t\r\n\t\t\t\t}), () => this.props.onChange(this.state.layout, this.state.settings));\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\t// new group\r\n\t\t\telse {\r\n\t\t\t\t\r\n\t\t\t\tthis.setState(prevState => ({\r\n\t\t\t\t\tpopup: false,\r\n\t\t\t\t\tlayout: {\r\n\t\t\t\t\t\t...prevState.layout,\r\n\t\t\t\t\t\t[tabKey]: {\r\n\t\t\t\t\t\t\t...prevState.layout[tabKey],\r\n\t\t\t\t\t\t\t[columnKey]: {\r\n\t\t\t\t\t\t\t\t...prevState.layout[tabKey][columnKey],\r\n\t\t\t\t\t\t\t\t[group.key]: group\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}\r\n\t\t\t\t\t}\r\n\t\t\t\t}), () => this.props.onChange(this.state.layout, this.state.settings));\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\t\r\n\t/**\r\n\t *\r\n\t */\r\n\t_deleteColumn = (tabKey, columnKey) => {\r\n\t\t\r\n\t\tlet tabLayout = {}\r\n\t\tfor (let col = 1; col < Object.keys(this.state.layout[tabKey]).length; col++) {\r\n\t\t\ttabLayout[col] = this.state.layout[tabKey][col >= columnKey ? col+1 : col];\r\n\t\t}\r\n\t\t\r\n\t\tthis.setState(prevState => ({\r\n\t\t\tlayout: {\r\n\t\t\t\t...prevState.layout,\r\n\t\t\t\t[tabKey]: tabLayout\r\n\t\t\t}\r\n\t\t}));\r\n\t}\r\n\t\r\n\t/**\r\n\t *\r\n\t */\r\n\t_deleteGroup = (tabKey, columnKey, groupKey) => {\r\n\t\t\r\n\t\tlet layout = { ...this.state.layout[tabKey][columnKey] }\r\n\t\tdelete layout[groupKey];\r\n\t\t\r\n\t\tthis.setState(prevState => ({\r\n\t\t\tpopup: false,\r\n\t\t\tlayout: {\r\n\t\t\t\t...prevState.layout,\r\n\t\t\t\t[tabKey]: {\r\n\t\t\t\t\t...prevState.layout[tabKey],\r\n\t\t\t\t\t[columnKey]: layout\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}), () => this.props.onChange(this.state.layout, this.state.settings));\r\n\t}\r\n\t\r\n\t/**\r\n\t *\r\n\t */\r\n\t_deleteTab = tabKey => {\r\n\t\t\r\n\t\tlet layout = { ...this.state.layout }\r\n\t\tdelete layout[tabKey];\r\n\t\t\r\n\t\tthis.setState({ layout: layout }, () => this.props.onChange(this.state.layout, this.state.settings));\r\n\t}\r\n\t\r\n\t/**\r\n\t *\r\n\t */\r\n\t_moveGroup = (action, tabKey, columnKey, componentKey) => event => {\r\n\t\tevent.stopPropagation();\r\n\t\t\r\n\t\tlet order = { ...this.state.layout[tabKey][columnKey] }\r\n\t\tlet sorted = false;\r\n\t\tlet sortedArray = Object.keys(order).sort((a, b) => {\r\n\t\t\t\r\n\t\t\tif (!sorted && ((action === 'up' && b === componentKey) || (action === 'down' && a === componentKey))) {\r\n\t\t\t\tsorted = true;\r\n\t\t\t\treturn 1;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\treturn 0;\r\n\t\t});\r\n\t\t\r\n\t\tlet sortedObject = {}\r\n\t\tsortedArray.map(key => sortedObject[key] = order[key]);\r\n\t\t\r\n\t\tthis.setState(prevState => ({\r\n\t\t\tlayout: {\r\n\t\t\t\t...prevState.layout,\r\n\t\t\t\t[tabKey]: {\r\n\t\t\t\t\t...prevState.layout[tabKey],\r\n\t\t\t\t\t[columnKey]: sortedObject\r\n\t\t\t\t}\r\n\t\t\t}\r\n\t\t}), () => this.props.onChange(this.state.layout, this.state.settings));\r\n\t}\r\n\t\r\n\t/**\r\n\t *\r\n\t */\r\n\t_moveTab = (action, tabKey) => event => {\r\n\t\tevent.stopPropagation();\r\n\t\t\r\n\t\tlet order = { ...this.state.layout }\r\n\t\tlet sorted = false;\r\n\t\tlet sortedArray = Object.keys(order).sort((a, b) => {\r\n\t\t\t\r\n\t\t\tif (!sorted && ((action === 'up' && b === tabKey) || (action === 'down' && a === tabKey))) {\r\n\t\t\t\tsorted = true;\r\n\t\t\t\treturn 1;\r\n\t\t\t}\r\n\t\t\t\r\n\t\t\treturn 0;\r\n\t\t});\r\n\t\t\r\n\t\tlet sortedObject = {}\r\n\t\tsortedArray.map(key => sortedObject[key] = order[key]);\r\n\t\tthis.setState(prevState => ({ layout: sortedObject }), () => this.props.onChange(this.state.layout, this.state.settings));\r\n\t}\r\n\t\r\n\t/**\r\n\t *\r\n\t */\r\n\t_openPopup = (tabKey, columnKey, group) => {\r\n\t\t\r\n\t\tlet states = {};\r\n\t\tObject.keys(group || {}).map(key => states['input-group-' + key] = group[key] || '');\r\n\t\tthis.groupEditor = states;\r\n\t\t\r\n\t\tthis.setState({\r\n\t\t\t...states,\r\n\t\t\tpopup: true,\r\n\t\t\terrors: {},\r\n\t\t\t\r\n\t\t\tselectedTab: tabKey,\r\n\t\t\tselectedColumn: columnKey,\r\n\t\t\tselectedGroup: group || {}\r\n\t\t});\r\n\t}\r\n\t\r\n\t/*\r\n\t *\r\n\t */\r\n\trenderTabColumnGroup(tab, column, group) {\r\n\t\tconst { classes } = this.props;\r\n\t\t\r\n\t\treturn (\r\n\r\n<ListItem\r\n\tkey={'Tab-' + tab.key + '_Column-' + column.key + '_Component-' + group.key}\r\n\tonClick={() => this._openPopup(tab.key, column.key, group)}\r\n\tbutton\r\n\tdivider\r\n\t>\r\n\t\r\n\t{tab.fullscreen ?\r\n\t<ListItemIcon classes={{ root: classes.iconContainer }}>\r\n\t\t<FullscreenIcon />\r\n\t</ListItemIcon>\r\n\t\t:\r\n\t<ListItemIcon classes={{ root: classes.iconContainer }}>\r\n\t\t<React.Fragment>\r\n\t\t\t<IconButton size=\"small\" onClick={this._moveGroup('up', tab.key, column.key, group.key)}>\r\n\t\t\t\t<ArrowUpIcon />\r\n\t\t\t</IconButton>\r\n\t\t\t<IconButton size=\"small\" onClick={this._moveGroup('down', tab.key, column.key, group.key)}>\r\n\t\t\t\t<ArrowDownIcon />\r\n\t\t\t</IconButton>\r\n\t\t</React.Fragment>\r\n\t</ListItemIcon>\r\n\t}\r\n\t<ListItemText primary={\r\n\t\t<React.Fragment>\r\n\t\t\t<Typography display=\"block\">{group.key}</Typography>\r\n\t\t\t<Typography variant=\"subtitle2\">({group.name})</Typography>\r\n\t\t</React.Fragment>\r\n\t} />\r\n\t\r\n</ListItem>\r\n\r\n\t\t);\r\n\t}\r\n\t\r\n\t/*\r\n\t *\r\n\t */\r\n\trenderTabColumns(tab, column) {\r\n\t\tconst { classes } = this.props;\r\n\t\t\r\n\t\t// components per tab\r\n\t\tlet tabColumnComponentsNodes = [];\r\n\t\t\r\n\t\tfor (let componentKey in column.entries) {\r\n\t\t\tlet component = { ...column.entries[componentKey], key: componentKey, name: (column.entries[componentKey] && column.entries[componentKey].component) || DEFAULTS.MODULE };\r\n\t\t\ttabColumnComponentsNodes.push(this.renderTabColumnGroup(tab, column, component));\r\n\t\t}\r\n\t\t\r\n\t\treturn (\r\n\r\n<Grid className={classes.column} key={'Tab-' + tab.key + '_Column-' + column.key} item>\r\n\t<List>\r\n\t\t<ListItem onClick={() => this._deleteColumn(tab.key, column.key)} button divider dense>\r\n\t\t\t<ListItemIcon classes={{ root: classes.iconContainer }}>\r\n\t\t\t\t<IconButton size=\"small\">\r\n\t\t\t\t\t<DeleteIcon />\r\n\t\t\t\t</IconButton>\r\n\t\t\t</ListItemIcon>\r\n\t\t\t<ListItemText primary={i18n.t('delete column')} />\r\n\t\t</ListItem>\r\n\t\t{(!tab.fullscreen || (tab.fullscreen && column.entries.length < 1))&& <ListItem onClick={() => this._openPopup(tab.key, column.key, null)} button divider dense>\r\n\t\t\t<ListItemIcon classes={{ root: classes.iconContainer }}>\r\n\t\t\t\t<IconButton size=\"small\">\r\n\t\t\t\t\t<AddIcon />\r\n\t\t\t\t</IconButton>\r\n\t\t\t</ListItemIcon>\r\n\t\t\t<ListItemText primary={i18n.t('add new group')} />\r\n\t\t</ListItem>}\r\n\t\t\r\n\t\t{tabColumnComponentsNodes}\r\n\t\t\r\n\t</List>\r\n</Grid>\r\n\r\n\t\t);\r\n\t}\r\n\t\r\n\t/*\r\n\t *\r\n\t */\r\n\trenderTab(tab) {\r\n\t\tconst { classes } = this.props;\r\n\t\tconst [ tabIcon, tabLabel ] = tab.key.split('|');\r\n\t\ttab.fullscreen = Number.isNaN(parseInt(Object.keys(tab.entries)[0]));\r\n\t\t\r\n\t\t// columns per tab\r\n\t\tlet columns = Object.keys(tab.entries).length;\r\n\t\tlet groupsInFirstColumn = (tab.entries && tab.entries[1] && Object.keys(tab.entries[1]).length) || 0;\r\n\t\tlet tabColumnsNodes = [];\r\n\t\t\r\n\t\tfor (let columnKey = 1; columnKey < columns+1; columnKey++) {\r\n\t\t\tlet column = { entries: (tab.entries[columnKey] !== undefined ? tab.entries[columnKey] : tab.entries), key: columnKey }\r\n\t\t\ttabColumnsNodes.push(this.renderTabColumns(tab, column));\r\n\t\t}\r\n\t\t\r\n\t\treturn (\r\n\r\n<ListItem\r\n\tid={'tab-' + tab.index}\r\n\tdivider={tab.lastTab !== true} key={'Tab-' + tab.key}\r\n\tclasses={{ root: classes.tab }}\r\n\t>\r\n\t\r\n\t<ListItemIcon key={'Tab-' + tab.key + '-ListItemIcon'} classes={{ root: classes.iconContainer }}>\r\n\t\t<React.Fragment>\r\n\t\t\t<IconButton size=\"small\" onClick={this._moveTab('up', tab.key)}>\r\n\t\t\t\t<ArrowUpIcon />\r\n\t\t\t</IconButton>\r\n\t\t\t<IconButton size=\"small\" onClick={this._moveTab('down', tab.key)}>\r\n\t\t\t\t<ArrowDownIcon />\r\n\t\t\t</IconButton>\r\n\t\t\t<IconButton size=\"small\" onClick={() => this._deleteTab(tab.key)} classes={{ root: classes.deleteButton }}>\r\n\t\t\t\t<DeleteIcon />\r\n\t\t\t</IconButton>\r\n\t\t</React.Fragment>\r\n\t</ListItemIcon>\r\n\t<ListItemText\r\n\t\tdisableTypography={true}\r\n\t\tprimary={[\r\n\t\t\t<Inputs.Text\r\n\t\t\t\tkey='Input-tabIcon'\r\n\t\t\t\tid='tabIcon'\r\n\t\t\t\t{...LAYOUT_CONFIG.tabIcon}\r\n\t\t\t\tonChange={this._changeTab(tab.key)}\r\n\t\t\t\tval={tabIcon || ''}\r\n\t\t\t\ticon={tabIcon || ''}\r\n\t\t\t\t/>,\r\n\t\t\t\r\n\t\t\t<Inputs.Text\r\n\t\t\t\tkey='Input-tabLabel'\r\n\t\t\t\tid='tabLabel'\r\n\t\t\t\t{...LAYOUT_CONFIG.tabLabel}\r\n\t\t\t\tonChange={this._changeTab(tab.key)}\r\n\t\t\t\tval={tabLabel || ''}\r\n\t\t\t\t/>,\r\n\t\t\t\r\n\t\t\t<Inputs.Button\r\n\t\t\t\tkey='Input-addColumnToTab'\r\n\t\t\t\tid='Input-addColumnToTab'\r\n\t\t\t\tlabel='add new column'\r\n\t\t\t\tdisabled={tab.fullscreen}\r\n\t\t\t\tonClick={() => this._addColumn(tab.key, columns+1)}\r\n\t\t\t\t/>,\r\n\t\t\t\r\n\t\t\t<Inputs.Switch\r\n\t\t\t\tkey='Input-tabFullscreen'\r\n\t\t\t\tid='tabFullscreen'\r\n\t\t\t\t{...LAYOUT_CONFIG.tabFullscreen}\r\n\t\t\t\tdisabled={(columns > 1 || groupsInFirstColumn > 1)}\r\n\t\t\t\tonChange={this._changeTab(tab.key)}\r\n\t\t\t\tval={tab.fullscreen}\r\n\t\t\t\t/>,\r\n\t\t\t\r\n\t\t\t<Grid\r\n\t\t\t\tkey={'Tab-' + tab.key + '-ColumnContainer'}\r\n\t\t\t\tclasses={{ root: classes.columnContainer }}\r\n\t\t\t\tcontainer\r\n\t\t\t\t>\r\n\t\t\t\t\r\n\t\t\t\t{tabColumnsNodes}\r\n\t\t\t</Grid>\r\n\t\t]}\r\n\t\t/>\r\n\t\r\n</ListItem>\r\n\r\n\t\t);\r\n\t}\r\n\t\r\n\t/*\r\n\t *\r\n\t */\r\n\trenderTabs(tabs) {\r\n\t\tlet tab = 0;\r\n\t\tlet tabsNodes = [];\r\n\t\t\r\n\t\tconst tabsTotal = Object.keys(tabs).length;\r\n\t\tfor (let tabKey in tabs) {\r\n\t\t\ttab++;\r\n\t\t\ttabsNodes.push(this.renderTab({ entries: tabs[tabKey], key: tabKey, index: tab, lastTab: tab === tabsTotal }));\r\n\t\t}\r\n\t\t\r\n\t\treturn tabsNodes;\r\n\t}\r\n\t\r\n\t/*\r\n\t *\r\n\t */\r\n\trender() {\r\n\t\tconst { classes } = this.props;\r\n\t\t\r\n\t\tconst tabs = this.renderTabs(this.state.layout);\r\n\t\tlet config = ModuleConfigurations[this.state.selectedGroup.component || DEFAULTS.MODULE].map(config => {\r\n\t\t\tconst Input = Inputs[config.type || 'Text'];\r\n\t\t\treturn (\r\n\t\t\t\t<Inputs.FieldsetItem columns={4} key={'FieldsetItem-' + config.parameter}>\r\n\t\t\t\t\t<Input\r\n\t\t\t\t\t\tkey={'input-group-' + config.parameter}\r\n\t\t\t\t\t\tid={'input-group-' + config.parameter}\r\n\t\t\t\t\t\tlabel={i18n.t(config.label || config.parameter)}\r\n\t\t\t\t\t\tinfo={config.description}\r\n\t\t\t\t\t\t{...config}\r\n\t\t\t\t\t\tonChange={this._onChange}\r\n\t\t\t\t\t\tval={this.state.selectedGroup[config.parameter] || config.val}\r\n\t\t\t\t\t\t/>\r\n\t\t\r\n\t\t\t\t</Inputs.FieldsetItem>\r\n\t\t\t);\r\n\t\t});\r\n\t\t\r\n\t\tconst filtered = this.groupIds.filter(group => group.id === this.state.selectedGroup.key);\r\n\t\tconst groupName = filtered && filtered[0] && filtered[0].name;\r\n\t\t\r\n\t\treturn (\r\n\r\n<React.Fragment>\r\n\t<Paper>\r\n\t\t<List className={classes.tabs}>\r\n\t\t\t<ListItem divider classes={{ root: classes.tab }}>\r\n\t\t\t\t<ListItemIcon classes={{ root: classes.iconContainer }}>\r\n\t\t\t\t\t<TabIcon />\r\n\t\t\t\t</ListItemIcon>\r\n\t\t\t\t<ListItemText\r\n\t\t\t\t\tdisableTypography={true}\r\n\t\t\t\t\tprimary={[\r\n\t\t\t\t\t\t<Inputs.Button key='Input-addTabs' id='Input-addTabs' label='add new tab' onClick={() => this._addTab()} />,\r\n\t\t\t\t\t\t<Inputs.Switch\r\n\t\t\t\t\t\t\tkey='Input-tabsHideLabels'\r\n\t\t\t\t\t\t\tid='tabsHideLabels'\r\n\t\t\t\t\t\t\t{...LAYOUT_CONFIG.tabsHideLabels}\r\n\t\t\t\t\t\t\tonChange={(id, userInput) => this.props.onChange(this.state.layout, { [id]: userInput })}\r\n\t\t\t\t\t\t\tval={this.state.settings['tabsHideLabels']}\r\n\t\t\t\t\t\t\t/>\r\n\t\t\t\t\t]}\r\n\t\t\t\t\t/>\r\n\t\t\t\t\r\n\t\t\t</ListItem>\r\n\t\t\t\r\n\t\t\t{tabs}\r\n\t\t\t\r\n\t\t</List>\r\n\t</Paper>\r\n\t\r\n\t<Dialog\r\n\t\theader={i18n.t('Group configuration')}\r\n\t\tclasses={{ CustomDialogActions: classes.DialogActions }}\r\n\t\tactions={\r\n\t\t\t<Grid container>\r\n\t\t\t\t<Grid item xs={6}>\r\n\t\t\t\t\t{this.state.selectedGroup.key && \r\n\t\t\t\t\t<Button key='action-delete' onClick={() => this._deleteGroup(this.state.selectedTab, this.state.selectedColumn, this.state.selectedGroup.key)} color=\"secondary\" startIcon={<DeleteIcon />}>\r\n\t\t\t\t\t\t{i18n.t('Delete Group')}\r\n\t\t\t\t\t</Button>}\r\n\t\t\t\t</Grid>\r\n\t\t\t\t<Grid item xs={6} className={classes.alignRight}>\r\n\t\t\t\t\t<Button key='action-cancel' onClick={() => this._closePopup('cancel')} color=\"secondary\">\r\n\t\t\t\t\t\t{i18n.t('Cancel')}\r\n\t\t\t\t\t</Button>\r\n\t\t\t\t\t<Button key='action-save' onClick={() => this._closePopup('save')} color=\"primary\" variant=\"contained\" disabled={Object.keys(this.state.errors).length > 0}>\r\n\t\t\t\t\t\t{i18n.t('Ok')}\r\n\t\t\t\t\t</Button>\r\n\t\t\t\t</Grid>\r\n\t\t\t</Grid>\r\n\t\t}\r\n\t\t\r\n\t\tdense\r\n\t\tmaxWidth={'md'}\r\n\t\topen={this.state.popup}\r\n\t\tonClose={() => this._closePopup('cancel')}\r\n\t\t>\r\n\t\t\r\n\t\t<Inputs.Fieldset label={i18n.t('Widget-Box')}>\r\n\t\t\t{ModuleSettings[this.state.selectedGroup.component || DEFAULTS.MODULE].noDevicesAllowed !== true && <Inputs.FieldsetItem>\r\n\t\t\t\t<Inputs.Text\r\n\t\t\t\t\tkey='input-group-key'\r\n\t\t\t\t\tid='input-group-key'\r\n\t\t\t\t\t{...LAYOUT_CONFIG.groupName}\r\n\t\t\t\t\t\r\n\t\t\t\t\tautoComplete\r\n\t\t\t\t\tautoHighlight\r\n\t\t\t\t\t\r\n\t\t\t\t\tval={this.state.selectedGroup.key ? ({ id: this.state.selectedGroup.key, name: groupName || this.state.selectedGroup.key }) : null}\r\n\t\t\t\t\tonChange={(props, group) => this._onChange(props, (group && group.id) || '')}\r\n\t\t\t\t\toptions={this.groupIds}\r\n\t\t\t\t\tgetOptionLabel={option => option['name']}\r\n\t\t\t\t\t//getOptionSelected={}\r\n\t\t\t\t\t\r\n\t\t\t\t\trequired\r\n\t\t\t\t\terror={this.state.errors['input-group-key'] !== undefined}\r\n\t\t\t\t\t/>\r\n\t\t\t\t\r\n\t\t\t</Inputs.FieldsetItem>}\r\n\t\t\t<Inputs.FieldsetItem columns={4}>\r\n\t\t\t\t<Inputs.Text key='input-group-title' id='input-group-title' {...LAYOUT_CONFIG.groupTitle} onChange={this._onChange} val={this.state.selectedGroup.title || ''} />\r\n\t\t\t</Inputs.FieldsetItem>\r\n\t\t\t<Inputs.FieldsetItem columns={4}>\r\n\t\t\t\t<Inputs.Text key='input-group-icon' id='input-group-icon' {...LAYOUT_CONFIG.groupIcon} onChange={this._onChange} val={this.state.selectedGroup.icon || ''} />\r\n\t\t\t</Inputs.FieldsetItem>\r\n\t\t\t<Inputs.FieldsetItem columns={4}>\r\n\t\t\t\t<Inputs.Text key='input-group-iconStyle' id='input-group-iconStyle' {...LAYOUT_CONFIG.groupIconStyle} onChange={this._onChange} val={this.state.selectedGroup.iconStyle || ''} />\r\n\t\t\t</Inputs.FieldsetItem>\r\n\t\t</Inputs.Fieldset>\r\n\t\t\r\n\t\t<Inputs.Fieldset label={i18n.t('Module')}>\r\n\t\t\t<Inputs.FieldsetItem>\r\n\t\t\t\t<Inputs.Text\r\n\t\t\t\t\tkey='input-group-component'\r\n\t\t\t\t\tid='input-group-component'\r\n\t\t\t\t\t{...LAYOUT_CONFIG.groupModule}\r\n\t\t\t\t\t\r\n\t\t\t\t\tautoComplete\r\n\t\t\t\t\tautoHighlight\r\n\t\t\t\t\t\r\n\t\t\t\t\tval={this.state.selectedGroup.component || DEFAULTS.MODULE}\r\n\t\t\t\t\tonChange={(props, val) => {\r\n\t\t\t\t\t\tthis._onChange(props, val);\r\n\t\t\t\t\t\tthis.setState(prevState => ({\r\n\t\t\t\t\t\t\tselectedGroup: {\r\n\t\t\t\t\t\t\t\t...prevState.selectedGroup,\r\n\t\t\t\t\t\t\t\tcomponent: val\r\n\t\t\t\t\t\t\t}\r\n\t\t\t\t\t\t}));\r\n\t\t\t\t\t}}\r\n\t\t\t\t\t\r\n\t\t\t\t\trequired\r\n\t\t\t\t\terror={this.state.errors['input-group-component'] !== undefined}\r\n\t\t\t\t\t/>\r\n\t\t\t\t\r\n\t\t\t</Inputs.FieldsetItem>\r\n\t\t\t{config}\r\n\t\t</Inputs.Fieldset>\r\n\t</Dialog>\r\n\t\r\n</React.Fragment>\r\n\r\n\t\t)\r\n\t}\r\n}\r\n\r\nexport default withStyles(styles)(LayoutsPage);\r\n","import React from 'react'\r\n\r\nimport config from '../config/config'\r\nimport Settings from '../Settings'\r\n\r\nimport Accordion from '@material-ui/core/Accordion'\r\nimport AccordionDetails from '@material-ui/core/AccordionDetails'\r\nimport AccordionSummary from '@material-ui/core/AccordionSummary'\r\nimport Typography from '@material-ui/core/Typography'\r\nimport ExpandMoreIcon from '@material-ui/icons/ExpandMore'\r\n\r\nimport Inputs from '../components/Inputs'\r\n\r\n\r\n/*\r\n * STYLES\r\n */\r\nimport { withStyles } from '@material-ui/core/styles'\r\nconst styles = theme => ({\r\n\theading: {\r\n\t\tfontSize: theme.typography.pxToRem(15),\r\n\t\tflexBasis: '33.33%',\r\n\t\tflexShrink: 0,\r\n\t},\r\n\tsecondaryHeading: {\r\n\t\tfontSize: theme.typography.pxToRem(15),\r\n\t\tcolor: theme.palette.text.secondary,\r\n\t},\r\n});\r\n\r\n\r\nclass SettingsPage extends React.Component {\r\n\t\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\t\r\n\t\tdelete Settings.settings.iobroker;\r\n\t\tthis.state = {\r\n\t\t\tpanel: false\r\n\t\t}\r\n\t\t\r\n\t\tthis.onChange = this.props.onChange;\r\n\t\tthis.settings = Settings.getSettings();\r\n\t}\r\n\t\r\n\t/**\r\n\t *\r\n\t */\r\n\t_handleSettingsChange = (key, val) => {\r\n\t\tSettings.setSetting(key, val);\r\n\t\t\r\n\t\tif (this.onChange) {\r\n\t\t\tthis.onChange(Settings.getSettings());\r\n\t\t}\r\n\t}\r\n\t\r\n\t/**\r\n\t *\r\n\t */\r\n\t_handlePanelChange = panel => (event, isExpanded) => this.setState({ panel: isExpanded ? panel : false });\r\n\t\r\n\t/*\r\n\t *\r\n\t */\r\n\trenderPanel(key, panel) {\r\n\t\tconst { classes } = this.props;\r\n\t\t\r\n\t\tconst settings = Object.keys(panel.settings).map(inputKey => {\r\n\t\t\tconst inputSettings = panel.settings[inputKey];\r\n\t\t\tconst Tag = Inputs[inputSettings.type || 'Text'];\r\n\t\t\t\r\n\t\t\treturn <Tag\r\n\t\t\t\t\t\tkey={'Input-' + key + '-' + inputKey}\r\n\t\t\t\t\t\tid={inputKey}\r\n\t\t\t\t\t\tonChange={this._handleSettingsChange}\r\n\t\t\t\t\t\tval={this.props.settings[inputKey] || this.settings[inputKey]}\r\n\t\t\t\t\t\t{...inputSettings}\r\n\t\t\t\t\t\t/>\r\n\t\t});\r\n\t\t\r\n\t\treturn (\r\n\r\n<Accordion\r\n\tkey={'Accordion-' + key}\r\n\texpanded={this.state.panel === key}\r\n\tonChange={this._handlePanelChange(key)}\r\n\t>\r\n\t\r\n\t<AccordionSummary\r\n\t\texpandIcon={<ExpandMoreIcon />}\r\n\t\tid={'panel-header-' + key}\r\n\t\t>\r\n\t\t\r\n\t\t<Typography className={classes.heading}>{panel.label}</Typography>\r\n\t\t{panel.description && <Typography className={classes.secondaryHeading}>{panel.description}</Typography>}\r\n\t\t\r\n\t</AccordionSummary>\r\n\t<AccordionDetails>\r\n\t\t{settings}\r\n\t</AccordionDetails>\r\n</Accordion>\r\n\r\n\t\t)\r\n\t}\r\n\t\r\n\t/*\r\n\t *\r\n\t */\r\n\trender() {\r\n\t\treturn Object.keys(config).map(panel => this.renderPanel(panel, config[panel]))\r\n\t}\r\n}\r\n\r\nexport default withStyles(styles)(SettingsPage);\r\n","import React from 'react'\r\n\r\nimport { DEFAULTS } from '../config/config'\r\nimport Devices from '../Devices'\r\nimport Settings from '../Settings'\r\nimport Connection from '../Connection'\r\nimport i18n from '../i18n'\r\n\r\nimport Button from '@material-ui/core/Button'\r\nimport Paper from '@material-ui/core/Paper'\r\nimport Tabs from '@material-ui/core/Tabs'\r\nimport Tab from '@material-ui/core/Tab'\r\nimport TextField from '@material-ui/core/TextField'\r\nimport Typography from '@material-ui/core/Typography'\r\n\r\nimport Dialog from '../components/Dialog'\r\nimport Inputs from '../components/Inputs'\r\n\r\nimport DevicesListPage from '../pages/DevicesListPage'\r\nimport LayoutsPage from '../pages/LayoutsPage'\r\nimport SettingsPage from '../pages/SettingsPage'\r\n\r\n\r\n/*\r\n * STYLES\r\n */\r\nimport { withStyles } from '@material-ui/core/styles'\r\nconst styles = theme => ({\r\n\tpaper: {\r\n\t\tmarginBottom: '10px'\r\n\t},\r\n\tpinToTop: {\r\n\t\tposition: 'absolute',\r\n\t\ttop: 0,\r\n\t\tleft: 0\r\n\t},\r\n\ttitle: {\r\n\t\tpaddingLeft: theme.spacing(2),\r\n\t\tpaddingRight: theme.spacing(1),\r\n\t\tmarginBottom: theme.spacing(1),\r\n\t\tminHeight: '64px',\r\n\t\tdisplay: 'flex',\r\n\t\tposition: 'relative',\r\n\t\talignItems: 'center'\r\n\t},\r\n\trawEditor: {\r\n\t\tfontFamily: 'Roboto Mono,Consolas,Courier New,monospace !important'\r\n\t}\r\n});\r\n\r\n\r\nclass ConfigurationPage extends React.Component {\r\n\t\r\n\tconstructor(props) {\r\n\t\tsuper(props);\r\n\t\t\r\n\t\tlet settings = { ...Settings.getSettings() };\r\n\t\tlet layout = settings.layout;\r\n\t\tdelete settings.layout;\r\n\t\tdelete settings.iobroker;\r\n\t\t\r\n\t\tthis.state = {\r\n\t\t\texpertMode: false,\r\n\t\t\ttab: 'devices',\r\n\t\t\terrors: {},\r\n\t\t\t\r\n\t\t\tsettings: settings || {},\r\n\t\t\tlayout: layout || {},\r\n\t\t\tdevices: Devices.getDevices({ raw: true, copy: true })\r\n\t\t}\r\n\t\t\r\n\t\tthis.socket = Connection.getConnection;\r\n\t\t\r\n\t\tthis._onDevicesChange.bind(this);\r\n\t\tthis._onSettingsChange.bind(this);\r\n\t\tthis._onLayoutsChange.bind(this);\r\n\t}\r\n\t\r\n\t/*\r\n\t *\r\n\t *\r\n\t */\r\n\tcomponentDidUpdate(prevProps, prevState) {\r\n\t\t\r\n\t\tif (this.state.expertMode) {\r\n\t\t\tlet rawEditor = document.getElementById(this.state.tab);\r\n\t\t\t\r\n\t\t\tif (rawEditor.scrollHeight !== prevState.rawEditorHeight) {\r\n\t\t\t\tthis.setState({ rawEditorHeight: rawEditor.scrollHeight });\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\t\r\n\t/*\r\n\t * \r\n\t */\r\n\t_onDevicesChange = devices => this.setState({ devices: devices });\r\n\t_onSettingsChange = settings => this.setState({ settings: settings });\r\n\t_onLayoutsChange = (layout, settings) => this.setState(prevState => ({ settings: { ...prevState.settings, ...settings || {} }, layout: layout }));\r\n\t\r\n\t/*\r\n\t *\r\n\t */\r\n\tonRawChange = (props, val) => {\r\n\t\t\r\n\t\ttry {\r\n\t\t\tlet res = JSON.parse(val);\r\n\t\t\t\r\n\t\t\tthis.setState(prevStates => {\r\n\t\t\t\tlet nextErrors = { ...prevStates.errors }\r\n\t\t\t\tdelete nextErrors[props.id];\r\n\t\t\t\t\r\n\t\t\t\treturn {\r\n\t\t\t\t\terrors: nextErrors,\r\n\t\t\t\t\t[props.type]: res\r\n\t\t\t\t}\r\n\t\t\t});\r\n\t\t}\r\n\t\tcatch(err) {\r\n\t\t\tthis.setState(prevStates => ({\r\n\t\t\t\terrors: {\r\n\t\t\t\t\t...prevStates.errors,\r\n\t\t\t\t\t[props.id]: i18n.t('Invalid JSON format')\r\n\t\t\t\t}\r\n\t\t\t}));\r\n\t\t}\r\n\t}\r\n\t\r\n\t/**\r\n\t * \r\n\t */\r\n\t_handleTabChange = (event, tab) => this.setState({ tab });\r\n\t\r\n\t/**\r\n\t *\r\n\t */\r\n\t_cancel = () => this.props.navigate('home');\r\n\t\r\n\t/**\r\n\t *\r\n\t */\r\n\t_save = () => {\r\n\t\tlet result = [\r\n\t\t\tthis.socket.setState(DEFAULTS.NODE_SETTINGS, JSON.stringify({ ...this.state.settings, layout: this.state.layout })),\r\n\t\t\tthis.socket.setState(DEFAULTS.NODE_DEVICES, JSON.stringify(this.state.devices))\r\n\t\t];\r\n\t\t\r\n\t\tPromise.all(result)\r\n\t\t\t.then(() => window.location.reload())\r\n\t\t\t.catch(err => console.error(err));\r\n\t}\r\n\t\r\n\t/*\r\n\t *\r\n\t */\r\n\trender() {\r\n\t\tconst { classes } = this.props;\r\n\t\t\r\n\t\treturn (\r\n\r\n<Dialog\r\n\tclasses={{ CustomDialog: classes.pinToTop }}\r\n\tfullWidth={true}\r\n\tmaxWidth={false}\r\n\t\r\n\topen={(this.props.page === 'configuration')}\r\n\tonClose={this._cancel}\r\n\t\r\n\theader={[\r\n\t\t<Typography key=\"header\" variant=\"h6\">\r\n\t\t\t{i18n.t('Configuration')}\r\n\t\t\t<Inputs.SwitchInline\r\n\t\t\t\tkey=\"Input-expertMode\"\r\n\t\t\t\tid=\"expertMode\"\r\n\t\t\t\tsize=\"small\"\r\n\t\t\t\tlabel={i18n.t('Expert mode')}\r\n\t\t\t\tonChange={(key, val) => this.setState(prevState => ({ expertMode: val, tab: prevState.expertMode ? prevState.tab.substr(0, prevState.tab.length-3) : prevState.tab + 'Raw' }))}\r\n\t\t\t\tval={this.state.expertMode}\r\n\t\t\t\t/>\r\n\t\t</Typography>,\r\n\t\t\r\n\t\t<Tabs\r\n\t\t\tkey=\"tabs\"\r\n\t\t\tvalue={this.state.tab}\r\n\t\t\tindicatorColor=\"primary\"\r\n\t\t\ttextColor=\"primary\"\r\n\t\t\tonChange={this._handleTabChange}\r\n\t\t\t>\r\n\t\t\t\r\n\t\t\t{this.state.expertMode === true && <Tab value=\"devicesRaw\" label={i18n.t('Devices')} />}\r\n\t\t\t{this.state.expertMode === true && <Tab value=\"layoutRaw\" label={i18n.t('Layout')} />}\r\n\t\t\t{this.state.expertMode === true && <Tab value=\"settingsRaw\" label={i18n.t('Settings')} />}\r\n\t\t\t{this.state.expertMode !== true && <Tab value=\"devices\" label={i18n.t('Devices')} />}\r\n\t\t\t{this.state.expertMode !== true && <Tab value=\"layout\" label={i18n.t('Layout')} />}\r\n\t\t\t{this.state.expertMode !== true && <Tab value=\"settings\" label={i18n.t('Settings')} />}\r\n\t\t</Tabs>\r\n\t]}\r\n\tactions={[\r\n\t\t<Button key='action-cancel' autoFocus onClick={this._cancel} color=\"secondary\">\r\n\t\t\t{i18n.t('Cancel')}\r\n\t\t</Button>,\r\n\t\t<Button key='action-save' onClick={this._save} color=\"primary\" variant=\"contained\" disabled={Object.keys(this.state.errors).length > 0}>\r\n\t\t\t{i18n.t('Save')}\r\n\t\t</Button>\r\n\t]}\r\n\t>\r\n\t\r\n\t<div hidden={this.state.tab !== 'devices'}>\r\n\t\t<Paper className={classes.paper}>\r\n\t\t\t{this.state.tab === 'devices' && <DevicesListPage onChange={this._onDevicesChange} />}\r\n\t\t</Paper>\r\n\t</div>\r\n\t{this.state.expertMode === true && \r\n\t<div hidden={this.state.tab !== 'devicesRaw'}>\r\n\t\t<Paper className={classes.paper}>\r\n\t\t\t<Typography className={classes.title} variant=\"h6\">\r\n\t\t\t\t{i18n.t('Raw Editor') + ' ' + i18n.t('Devices')}\r\n\t\t\t</Typography>\r\n\t\t\t<Inputs.Text\r\n\t\t\t\tid=\"devicesRaw\"\r\n\t\t\t\tlabel={['JSON Editor', (this.state.errors['devicesRaw'] !== undefined ? ' (' + this.state.errors['devicesRaw'] + ')' : '')]}\r\n\t\t\t\tInputProps={{ disableUnderline: true, className: classes.rawEditor }}\r\n\t\t\t\tinputProps={{ style: { height: this.state.rawEditorHeight } }}\r\n\t\t\t\tmultiline\r\n\t\t\t\twidth=\"99%\"\r\n\t\t\t\terror={this.state.errors['devicesRaw'] !== undefined}\r\n\t\t\t\tonChange={(props, val) => this.onRawChange({ ...props, type: 'devices' }, val)}\r\n\t\t\t\tval={JSON.stringify(this.state.devices, null, 3)}\r\n\t\t\t\t/>\r\n\t\t\t\r\n\t\t</Paper>\r\n\t</div>}\r\n\t<div hidden={this.state.tab !== 'settings'} style={{ width: '100%' }}>\r\n\t\t<Paper className={classes.title}>\r\n\t\t\t<Typography variant=\"h6\">\r\n\t\t\t\t{i18n.t('Settings')}\r\n\t\t\t</Typography>\r\n\t\t</Paper>\r\n\t\t{this.state.tab === 'settings' && <SettingsPage settings={this.state.settings} onChange={this._onSettingsChange} />}\r\n\t\t\r\n\t</div>\r\n\t{this.state.expertMode === true && \r\n\t<div hidden={this.state.tab !== 'settingsRaw'} style={{ width: '100%' }}>\r\n\t\t<Paper className={classes.paper}>\r\n\t\t\t<Typography className={classes.title} variant=\"h6\">\r\n\t\t\t\t{i18n.t('Raw Editor') + ' ' + i18n.t('Settings')}\r\n\t\t\t</Typography>\r\n\t\t\t<Inputs.Text\r\n\t\t\t\tid=\"settingsRaw\"\r\n\t\t\t\tlabel={['JSON Editor', (this.state.errors['settingsRaw'] !== undefined ? ' (' + this.state.errors['settingsRaw'] + ')' : '')]}\r\n\t\t\t\tInputProps={{ disableUnderline: true, className: classes.rawEditor }}\r\n\t\t\t\tinputProps={{ style: { height: this.state.rawEditorHeight } }}\r\n\t\t\t\tmultiline\r\n\t\t\t\twidth=\"99%\"\r\n\t\t\t\terror={this.state.errors['settingsRaw'] !== undefined}\r\n\t\t\t\tonChange={(props, val) => this.onRawChange({ ...props, type: 'settings' }, val)}\r\n\t\t\t\tval={JSON.stringify(this.state.settings, null, 3)}\r\n\t\t\t\t/>\r\n\t\t\t\r\n\t\t</Paper>\r\n\t</div>}\r\n\t<div hidden={this.state.tab !== 'layout'}>\r\n\t\t<Paper>\r\n\t\t\t<Typography className={classes.title} variant=\"h6\">\r\n\t\t\t\t{i18n.t('Layout')}\r\n\t\t\t</Typography>\r\n\t\t</Paper>\r\n\t\t{this.state.tab === 'layout' && <LayoutsPage settings={this.state.settings} layout={this.state.layout} onChange={this._onLayoutsChange} />}\r\n\t\t\r\n\t</div>\r\n\t{this.state.expertMode === true && \r\n\t<div hidden={this.state.tab !== 'layoutRaw'} style={{ width: '100%' }}>\r\n\t\t<Paper className={classes.paper}>\r\n\t\t\t<Typography className={classes.title} variant=\"h6\">\r\n\t\t\t\t{i18n.t('Raw Editor') + ' ' + i18n.t('Layout')}\r\n\t\t\t</Typography>\r\n\t\t\t<Inputs.Text\r\n\t\t\t\tid=\"layoutRaw\"\r\n\t\t\t\tlabel={['JSON Editor', (this.state.errors['layoutRaw'] !== undefined ? ' (' + this.state.errors['layoutRaw'] + ')' : '')]}\r\n\t\t\t\tInputProps={{ disableUnderline: true, className: classes.rawEditor }}\r\n\t\t\t\tinputProps={{ style: { height: this.state.rawEditorHeight } }}\r\n\t\t\t\tmultiline\r\n\t\t\t\twidth=\"99%\"\r\n\t\t\t\terror={this.state.errors['layoutRaw'] !== undefined}\r\n\t\t\t\tonChange={(props, val) => this.onRawChange({ ...props, type: 'layout' }, val)}\r\n\t\t\t\tval={JSON.stringify(this.state.layout || {}, null, 3)}\r\n\t\t\t\t/>\r\n\t\t\t\r\n\t\t</Paper>\r\n\t</div>}\r\n\t\r\n</Dialog>\r\n\r\n\t\t)\r\n\t}\r\n}\r\n\r\nexport default withStyles(styles)(ConfigurationPage);\r\n","import EventEmitter from 'events'\r\nimport io from 'socket.io-client'\r\n\r\n\r\n/**\r\n * Class for Socket.io conncetion handling.\r\n *\r\n * @description This is based on an implementation @GermanBluefox (https://github.com/GermanBluefox), see https://github.com/ioBroker/adapter-react/blob/master/src/Connection.js\r\n *\t\t\t\tOnly required functions are taken from source class. Major change is that all events are emitted, so proper error handling is possible in the App.\r\n *\r\n *\r\n * @param\t{String}\t\turl\r\n * @param\t{Object}\t\toptions\r\n * @return\t{Socket}\r\n * @see https://github.com/ioBroker/ioBroker.socketio/blob/master/lib/socket.js https://github.com/ioBroker/ioBroker.js-controller/blob/master/lib/adapter.js#L635\r\n *\r\n */\r\nexport default class Socket extends EventEmitter {\r\n\t\r\n\tconstructor(url = null, options = {}) {\r\n\t\tsuper();\r\n\t\t\r\n\t\t// socket connection\r\n\t\tthis.socket = io(url, { timeout: 10000, ...options, query: 'ws=true' });\r\n\t\tthis.statesSubscribes = {}; // subscribed states\r\n\t\t\r\n\t\t/*\r\n\t\t * API events\r\n\t\t * @see https://github.com/socketio/socket.io-client/blob/HEAD/docs/API.md#socket\r\n\t\t *\r\n\t\t */\r\n\t\t// connect\r\n\t\tthis.socket.on('connect', () => this.emit('connect'));\r\n\t\t\r\n\t\t// reconnect: Fired upon a successful reconnection.\r\n\t\tthis.socket.on('reconnect', attempts => this.emit('reconnect', attempts));\r\n\t\t\r\n\t\t// reconnect_error: Fired upon a reconnection attempt error.\r\n\t\tthis.socket.on('reconnect_error', error => this.emit('error', { 'type': 'reconnect', 'event': 'reconnect_error', 'message': (error && error.message) || 'Reconnection error' }));\r\n\t\t\r\n\t\t// reconnect_failed: Fired upon a reconnection attempt error.\r\n\t\tthis.socket.on('reconnect_failed', () => this.emit('error', { 'type': 'reconnect', 'event': 'reconnect_failed', 'message': 'Reconnection failed' }));\r\n\t\t\r\n\t\t// discconect\r\n\t\tthis.socket.on('disconnect', reason => this.emit('disconnect', reason));\r\n\t\t\r\n\t\t// error\r\n\t\tthis.socket.on('error', error => this.emit('error', { 'type': 'error', 'event': 'error', 'message': (error && error.message) || 'Unknown error' }));\r\n\t\t\r\n\t\t// connect_failed\r\n\t\tthis.socket.on('connect_failed', error => this.emit('error', { 'type': 'connect', 'event': 'connect_error', 'message': (error && error.message) || 'Connection error' }));\r\n\t\t\r\n\t\t// connect_error\r\n\t\tthis.socket.on('connect_error', error => this.emit('error', { 'type': 'connect', 'event': 'connect_error', 'message': (error && error.message) || 'Connection error' }));\r\n\t\t\r\n\t\t// connect_timeout\r\n\t\tthis.socket.on('connect_timeout', () => this.emit('error', { 'type': 'connect', 'event': 'connect_timeout', 'message': 'Connect ran into timeout' }));\r\n\t\t\r\n\t\t/*\r\n\t\t * ioBroker events\r\n\t\t *\r\n\t\t */\r\n\t\tthis.socket.on('stateChange', (id, state) => setTimeout(() => this.stateChange(id, state), 0));\r\n\t}\r\n\t\r\n\t/**\r\n\t * Subscribes to multiple states by setting a callback.\r\n\t *\r\n\t */\r\n\t_getPatternFromId(id) {\r\n\t\tlet pattern = id\r\n\t\t\t.replace(/\\./g, '\\\\.')\r\n\t\t\t.replace(/\\*/g, '.*')\r\n\t\t\t.replace(/\\(/g, '\\\\(')\r\n\t\t\t.replace(/\\)/g, '\\\\)')\r\n\t\t\t.replace(/\\+/g, '\\\\+')\r\n\t\t\t.replace(/\\[/g, '\\\\[');\r\n\r\n\t\tif (pattern.indexOf('*') === -1) {\r\n\t\t\tpattern += '$';\r\n\t\t}\r\n\t\t\r\n\t\treturn pattern;\r\n\t}\r\n\t\r\n\t/**\r\n\t * Subscribes to multiple states by setting a callback.\r\n\t *\r\n\t */\r\n\tsubscribeStates(ids, cb) {\r\n\t\tids = Array.isArray(ids) ? ids : [ids];\r\n\t\tids.forEach(id => this.subscribeState(id, cb));\r\n\t}\r\n\t\r\n\t/**\r\n\t * Subscribes to a state by setting a callback.\r\n\t *\r\n\t */\r\n\tsubscribeState(id, cb) {\r\n\t\t\r\n\t\tif (!this.statesSubscribes[id]) {\r\n\t\t\tlet reg = this._getPatternFromId(id);\r\n\t\t\tthis.statesSubscribes[id] = { reg: new RegExp(reg), cbs: [cb] };\r\n\t\t\t\r\n\t\t\tif (this.socket.connected) {\r\n\t\t\t\tthis.socket.emit('subscribe', id);\r\n\t\t\t}\r\n\t\t}\r\n\t\telse {\r\n\t\t\tthis.statesSubscribes[id].cbs.indexOf(cb) === -1 && this.statesSubscribes[id].cbs.push(cb);\r\n\t\t}\r\n\t}\r\n\t\r\n\t/**\r\n\t * Fires pre-registered callbacks (via subscribeState) upon state change.\r\n\t *\r\n\t */\r\n\tstateChange(id, state) {\r\n\t\t\r\n\t\tid = id ? id.replace(/[\\s'\"]/g, '_') : '';\r\n\t\tfor (const task in this.statesSubscribes) {\r\n\t\t\tif (this.statesSubscribes.hasOwnProperty(task) && this.statesSubscribes[task].reg.test(id)) {\r\n\t\t\t\tthis.statesSubscribes[task].cbs.forEach(cb => cb(id, state));\r\n\t\t\t}\r\n\t\t}\r\n\t}\r\n\t\r\n\t/**\r\n\t * Gets an object view.\r\n\t *\r\n\t */\r\n\tgetAdapterInstances(adapter, cb) {\r\n\t\t\r\n\t\tif (typeof adapter === 'function') {\r\n\t\t\tcb = adapter;\r\n\t\t\tadapter = null;\r\n\t\t}\r\n\t\t\r\n\t\treturn this.getObjectView('system', 'instance', { 'startkey': 'system.adapter.' + (adapter ? adapter + '.' : ''), 'endkey': 'system.adapter.' + (adapter ? adapter + '.999' : 'zzz') }, cb);\r\n\t}\r\n\t\r\n\t/**\r\n\t * Gets an object.\r\n\t *\r\n\t */\r\n\tgetObject(id, cb) {\r\n\t\t\r\n\t\tif (!cb) {\r\n\t\t\treturn new Promise((resolve, reject) => this.getObject(id, (err, obj) => err ? reject(err) : resolve(obj)));\r\n\t\t} else {\r\n\t\t\tthis.socket.emit('getObject', id, cb);\r\n\t\t}\r\n\t}\r\n\t\r\n\t/**\r\n\t * Gets an object view.\r\n\t *\r\n\t */\r\n\tgetObjectView(design, search, params, cb) {\r\n\t\t\r\n\t\tif (!cb) {\r\n\t\t\treturn new Promise((resolve, reject) => this.getObjectView(design, search, params, err => err ? reject(err) : resolve()));\r\n\t\t} else {\r\n\t\t\tthis.socket.emit('getObjectView', design, search, params, cb);\r\n\t\t}\r\n\t}\r\n\t\r\n\t/**\r\n\t * Gets a remote ressource.\r\n\t *\r\n\t */\r\n\tgetRemoteResource(url, cb) {\r\n\t\t\r\n\t\tif (!cb) {\r\n\t\t\treturn new Promise((resolve, reject) => this.getRemoteResource(url, (err, state) => err ? reject(err) : resolve(state)));\r\n\t\t} else {\r\n\t\t\tthis.socket.emit('httpGet', url, cb);\r\n\t\t}\r\n\t}\r\n\t\r\n\t/**\r\n\t * Gets a state.\r\n\t *\r\n\t */\r\n\tgetState(id, cb) {\r\n\t\t\r\n\t\tif (!cb) {\r\n\t\t\treturn new Promise((resolve, reject) => this.getState(id, (err, state) => err ? reject(err) : resolve(state)));\r\n\t\t} else {\r\n\t\t\tthis.socket.emit('getState', id, cb);\r\n\t\t}\r\n\t}\r\n\t\r\n\t/**\r\n\t * Gets multiple states at once.\r\n\t *\r\n\t */\r\n\tgetStates(pattern, cb) {\r\n\t\t\r\n\t\tif (!cb) {\r\n\t\t\treturn new Promise((resolve, reject) => this.getStates(pattern, (err, state) => err ? reject(err) : resolve(state)));\r\n\t\t} else {\r\n\t\t\tthis.socket.emit('getStates', pattern, cb);\r\n\t\t}\r\n\t}\r\n\t\r\n\t/**\r\n\t * Gets the state history.\r\n\t *\r\n\t */\r\n\tgetStateHistory(id, options, cb) {\r\n\t\t\r\n\t\tif (typeof options === 'function') {\r\n\t\t\tcb = options;\r\n\t\t\toptions = {};\r\n\t\t}\r\n\t\t\r\n\t\tif (!cb) {\r\n\t\t\treturn new Promise((resolve, reject) => this.getStateHistory(id, options, (err, state) => err ? reject(err) : resolve(state)));\r\n\t\t} else {\r\n\t\t\tthis.socket.emit('getHistory', id, options, cb);\r\n\t\t}\r\n\t}\r\n\t\r\n\t/**\r\n\t * Sets a state.\r\n\t *\r\n\t */\r\n\tsetState(id, val, cb) {\r\n\t\t\r\n\t\tif (!cb) {\r\n\t\t\treturn new Promise((resolve, reject) => this.setState(id, val, err => err ? reject(err) : resolve()));\r\n\t\t} else {\r\n\t\t\tthis.socket.emit('setState', id, val, cb);\r\n\t\t}\r\n\t}\r\n\t\r\n\t/**\r\n\t * Unsubscribe from multiple states.\r\n\t *\r\n\t */\r\n\tunsubscribeStates(ids) {\r\n\t\tids = Array.isArray(ids) ? ids : [ids];\r\n\t\tids.forEach(id => this.unsubscribeState(id));\r\n\t}\r\n\t\r\n\t/**\r\n\t * Unsubscribe a state.\r\n\t *\r\n\t */\r\n\tunsubscribeState(id) {\r\n\t\t\r\n\t\tif (this.statesSubscribes[id] && this.socket.connected) {\r\n\t\t\tthis.socket.emit('unsubscribe', id);\r\n\t\t\tdelete this.statesSubscribes[id];\r\n\t\t}\r\n\t}\r\n}\r\n","import Socket from './Socket'\r\n\r\n/**\r\n * Connection\r\n +\r\n *\r\n */\r\nexport default class Connection {\r\n\r\n\t/*\r\n\t * URL\r\n\t */\r\n\tstatic url = window.location.hostname;\r\n\t\r\n\t/*\r\n\t * Connection\r\n\t */\r\n\tstatic connection = null;\r\n\t\r\n\t/**\r\n\t * Connects to the Socket.\r\n\t *\r\n\t * @param\t{String}\turl\r\n\t * @param\t{Array}\t\tlisteners\r\n\t * @return\t{Connection}\r\n\t */\r\n\tstatic connect(url = null, listeners = null) {\r\n\t\t\r\n\t\t// set URL\r\n\t\tif (url) {\r\n\t\t\tConnection.setUrl = url;\r\n\t\t}\r\n\t\t\r\n\t\t// connect\r\n\t\tConnection.connection = new Socket(Connection.url);\r\n\t\t\r\n\t\t// set listeners\r\n\t\tif (listeners) {\r\n\t\t\tConnection.setListeners = listeners;\r\n\t\t}\r\n\t\t\r\n\t\t// return connection\r\n\t\treturn Connection.connection;\r\n\t}\r\n\t\r\n\t/**\r\n\t * Gets the current Connection.\r\n\t *\r\n\t * @param\tvoid\r\n\t * @return\t{Connection}\tCurrent Connection\r\n\t */\r\n\tstatic get getConnection() {\r\n\t\treturn Connection.connection || null;\r\n\t}\r\n\t\r\n\t/**\r\n\t * Get the current URL.\r\n\t *\r\n\t * @param\tvoid\r\n\t * @return\t{String}\tURL\r\n\t */\r\n\tstatic get getUrl() {\r\n\t\treturn Connection.url;\r\n\t}\r\n\t\r\n\t/**\r\n\t * Reconnect to the Socket.\r\n\t *\r\n\t * @param\tvoid\r\n\t * @return\t{String}\tURL\r\n\t */\r\n\tstatic get reconnect() {\r\n\t\treturn Connection.connect;\r\n\t}\r\n\t\r\n\t/**\r\n\t * Sets an event listener.\r\n\t *\r\n\t * @param\t{Object}\t\t\tlistener\r\n\t * @param\t{String}\t\t\tlistener.event\r\n\t * @param\t{Function}\t\t\tlistener.callback\r\n\t * @return\tvoid\r\n\t */\r\n\tstatic set setListener(listener) {\r\n\t\tConnection.connection.on(listener.event, listener.callback);\r\n\t}\r\n\t\r\n\t/**\r\n\t * Set event listeners.\r\n\t *\r\n\t * @param\t{Array<Object>}\t\tlisteners\r\n\t * @return \t{Boolean}\r\n\t */\r\n\tstatic set setListeners(listeners = []) {\r\n\t\t\r\n\t\tif (!listeners || !Array.isArray(listeners)) {\r\n\t\t\treturn false;\r\n\t\t}\r\n\t\t\r\n\t\tlisteners.forEach(listener => Connection.setListener = listener);\r\n\t\treturn true;\r\n\t}\r\n\t\r\n\t/**\r\n\t * Set a new URL (has to be set before calling connect()).\r\n\t *\r\n\t * @param\t{String}\tURL\r\n\t * @return\tvoid\r\n\t */\r\n\tstatic set setUrl(url) {\r\n\t\tConnection.url = url;\r\n\t}\r\n}\r\n","\r\nexport const ModuleSettings = {\r\n\tAdapterStatus: require('./AdapterStatus').ModuleSettings || {},\r\n\tChart: require('./Chart').ModuleSettings || {},\r\n\tDateTime: require('./DateTime').ModuleSettings || {},\r\n\tMap: require('./Map').ModuleSettings || {},\r\n\tMultimedia: require('./Multimedia').ModuleSettings || {},\r\n\tStateList: require('./StateList').ModuleSettings || {},\r\n\tStateListHorizontal: require('./StateListHorizontal').ModuleSettings || {},\r\n\tWeather: require('./Weather').ModuleSettings || {}\r\n}\r\n\r\nexport const ModuleConfigurations = {\r\n\tAdapterStatus: require('./AdapterStatus').ModuleConfig || [],\r\n\tChart: require('./Chart').ModuleConfig || [],\r\n\tDateTime: require('./DateTime').ModuleConfig || [],\r\n\tMap: require('./Map').ModuleConfig || [],\r\n\tMultimedia: require('./Multimedia').ModuleConfig || [],\r\n\tStateList: require('./StateList').ModuleConfig || [],\r\n\tStateListHorizontal: require('./StateListHorizontal').ModuleConfig || [],\r\n\tWeather: require('./Weather').ModuleConfig || []\r\n}\r\n\r\nexport default {\r\n\tAdapterStatus: require('./AdapterStatus').default,\r\n\tChart: require('./Chart').default,\r\n\tDateTime: require('./DateTime').default,\r\n\tMap: require('./Map').default,\r\n\tMultimedia: require('./Multimedia').default,\r\n\tStateList: require('./StateList').default,\r\n\tStateListHorizontal: require('./StateListHorizontal').default,\r\n\tWeather: require('./Weather').default\r\n}","\r\nexport default {\r\n\tdefaults: require('./defaults').default,\r\n\t\r\n\tblind: require('./blind/').default,\r\n\tdoor: require('./door/').default,\r\n\theating: require('./heating/').default,\r\n\tjalousie: require('./blind/').default,\r\n\tlight: require('./light/').default,\r\n\tlocation: require('./location/').default,\r\n\tuser: require('./user/').default,\r\n\twindow: require('./window/').default\r\n}"],"sourceRoot":""}