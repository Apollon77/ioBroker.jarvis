(this.webpackJsonpjarvis=this.webpackJsonpjarvis||[]).push([[0],{112:function(e,t,a){"use strict";a.r(t),a.d(t,"ModuleDescription",(function(){return D})),a.d(t,"ModuleScreenshots",(function(){return I})),a.d(t,"ModuleConfig",(function(){return L}));var n=a(118),r=a(19),i=a(20),o=a(23),s=a(24),c=a(14),l=a(0),u=a.n(l),d=a(5),p=a(628),m=a(137),g=a(364),f=a(247),h=a(9),b=a(2),v=a(708),y=a(6),k=function(e){return{defaultListDivider:{margin:"0 0 5px 0"},defaultListIcon:function(t){return Object(h.a)({},e.components.icon,{},t.styles)},horizontalListItem:{display:"inline-block",textAlign:"center",paddingRight:"16px",width:"140px",marginTop:"10px"},horizontalListItemIcon:{minWidth:"auto"},horizontalListItemAction:{textAlign:"center",top:0,right:0,position:"static",transform:"none"},verticalListItemAction:{textAlign:"right"}}},E=Object(y.a)(k)((function(e){var t=e.customClassNames,a=e.children,n=e.classes,r=Array.isArray(t)?t:[t];return r=r.map((function(e){return n[e]?n[e]:e})),u.a.createElement("span",{className:Object(b.a)(r)},a)})),S=function(e){Object(s.a)(a,e);var t=Object(o.a)(a);function a(e){var n;return Object(r.a)(this,a),(n=t.call(this,e)).stateChange=function(e,t){e!==n.props.device.primaryStateKey&&e!==n.props.device.secondaryStateKey||n.setState(Object(c.a)({},e,t))},n.state={ListItemTextWidth:"100%"},n.state[n.props.device.primaryStateKey]=n.props.device.getDeviceState()||{},n.props.device.secondaryStateKey&&(n.state[n.props.device.secondaryStateKey]=n.props.device.getDeviceState(n.props.device.secondaryStateKey)||{}),n.ListItemText=u.a.createRef(),n.ListItemSecondaryAction=u.a.createRef(),n}return Object(i.a)(a,[{key:"componentDidMount",value:function(){this.ListItemTextWidth=Math.floor(this.ListItemText.current.offsetWidth),this.resizeComponent(),this.props.device.listen(this.stateChange)}},{key:"componentWillUnmount",value:function(){this.props.device.unlisten(this.stateChange)}},{key:"componentDidUpdate",value:function(){this.resizeComponent()}},{key:"resizeComponent",value:function(){var e=Math.floor(1.08*this.ListItemSecondaryAction.current.offsetWidth);this.state.ListItemSecondaryActionWidth!==e&&this.setState({ListItemSecondaryActionWidth:e,ListItemTextWidth:this.ListItemTextWidth-e+"px"})}},{key:"openDialog",value:function(){this.props.openDialog(this.props.device)}},{key:"render",value:function(){var e=this.props,t=e.classes,a=e.horizontal,n=e.device,r=e.component,i=e.action,o=this.state[n.primaryStateKey],s=n.get("options"),c=n.getIcon(n.primaryStateKey,o.val)||n.getIcon(n.primaryStateKey,o.value),l=r&&n.getComponent(),d=n.getAction(n.primaryStateKey,!1===n.options.primaryAction),p=i&&this.state[n.secondaryStateKey]?n.getAction(n.secondaryStateKey):null;return u.a.createElement(u.a.Fragment,null,s.divider&&"after"!==s.divider&&u.a.createElement(m.a,{divider:!0,className:t.defaultListDivider}),u.a.createElement(m.a,{className:Object(b.a)(this.props.openDialog&&t.finger,a&&t.horizontalListItem),button:null!==this.props.openDialog,onClick:this.props.openDialog&&this.openDialog.bind(this)},u.a.createElement(v.a,{className:Object(b.a)(a&&t.horizontalListItemIcon)},null===c?u.a.createElement(u.a.Fragment,null):u.a.createElement(E,{customClassNames:["defaultListIcon","mdi mdi-"+c],styles:n.getStyle("icon",n.primaryStateKey,o.val)})),u.a.createElement(f.a,{ref:this.ListItemText,disableTypography:!1!==l,primary:l||n.getOption("label"),secondary:null!==s.subtitle&&(s.subtitle||o&&o.timeChanged)||null,style:{flex:"initial",width:this.state.ListItemTextWidth}}),u.a.createElement(g.a,{ref:this.ListItemSecondaryAction,className:a?t.horizontalListItemAction:t.verticalListItemAction},p?[d,u.a.createElement("br",{key:"br_"+n.id}),p]:d)),s.divider&&"after"===s.divider&&u.a.createElement(m.a,{divider:!0,style:{margin:"5px 0"}}))}}]),a}(u.a.Component),O=Object(y.a)(k)(S),j=a(140),C=a(637),w=function(e){return{defaultListSectionDivider:{margin:"5px 0 0 0"},defaultListSectionDividerItem:{margin:"6px 0 7px 0",padding:"0 16px !important"},defaultListSectionText:Object(c.a)({margin:0},e.breakpoints.down("md"),{margin:"0 0 0 10px"}),horizontalList:{display:"flex",flexDirection:"row",flexWrap:"wrap"}}},x=Object(y.a)(w)((function(e){var t=e.classes,a=e.getDevicesBySubgroup,n=e.subgroup,r=e.title,i=e.subgroupActions,o=function(e){a(n).forEach((function(t){var a=e;"level"===t.primaryStateKey&&(a=a?100:0),t.setDeviceState(null,a)}))};return u.a.createElement(u.a.Fragment,null,u.a.createElement(m.a,{divider:!0,className:t.defaultListSectionDivider}),u.a.createElement(m.a,{className:t.defaultListSectionDividerItem},u.a.createElement(f.a,{className:t.defaultListSectionText,primary:r}),u.a.createElement(g.a,null,null===i||!1===i?null:u.a.createElement(C.a,{color:"primary",size:"small"},u.a.createElement(j.a,{onClick:function(){return o(!0)}},d.a.t("on")),u.a.createElement(j.a,{onClick:function(){return o(!1)}},d.a.t("off"))))))})),T=function(e){Object(s.a)(a,e);var t=Object(o.a)(a);function a(){return Object(r.a)(this,a),t.apply(this,arguments)}return Object(i.a)(a,[{key:"getDevicesBySubgroup",value:function(e){var t=[];return this.props.devices.forEach((function(a){e===a.getOption("subgroup")&&t.push(a)})),t}},{key:"render",value:function(){var e,t=this,a=this.props,r=a.classes,i=a.horizontal,o=a.devices,s=a.settings,c=a.component,l=a.action,d=Object(n.a)(a,["classes","horizontal","devices","settings","component","action"]);return u.a.createElement(p.a,{dense:!0,className:i&&r.horizontalList},o.map((function(a,n){var r=null!==e&&null!==a.options.subgroup&&a.options.subgroup!==e&&u.a.createElement(x,{key:"ListDivider-"+a.get("id"),getDevicesBySubgroup:t.getDevicesBySubgroup.bind(t),subgroup:a.getOption("subgroup"),title:a.options.subgroup,subgroupActions:s.subgroupActions||a.options.subgroupActions}),o=u.a.createElement(O,Object.assign({},d,{key:"StateListItem-"+a.get("id"),horizontal:i,device:a,component:c||!1,action:l||!0}));return e=a.getOption("subgroup"),[r,o]})))}}]),a}(u.a.Component),D=(t.default=Object(y.a)(w)(T),"Zeigt eine Liste von States an."),I=["StateList1.png","StateList2.png","StateList3.png","StateList4.png"],L=[{parameter:"subgroupActions",label:{en:"Show on/off actions for sugroups",de:"Buttons an/aus f\xfcr Untergruppen einblenden"},type:"SwitchInput",val:!0}]},121:function(e,t,a){"use strict";var n=a(16),r=a(99),i=a(5);t.a={timeToSeconds:function(e){if(e.toString().indexOf(":")>-1){var t=(e=e.toString()).split(":").length-1>1?e.split(":"):("0:"+e).split(":"),a=Object(n.a)(t,3),r=a[0],i=a[1],o=a[2];e=3600*parseInt(r)+60*parseInt(i)+parseInt(o)}return parseInt(e)},timeToHoursMinutesSeconds:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(e.toString().indexOf(":")>-1)return e;if(e=parseInt(e),t=t||e>3600,Number.isNaN(e))return t?"00:00:00":"00:00";var a="0"+Math.floor(e/3600),n="0"+Math.floor(e/60),r="0"+e%60;return t?[a.substr(-2),n.substr(-2),r.substr(-2)].join(":"):[n.substr(-2),r.substr(-2)].join(":")},secondsToDateTime:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"dd. MMM yyyy, HH:mm";return Object(r.a)(new Date(1e3*e),t,{locale:i.b[i.a.getLanguage()]})}}},13:function(e,t,a){"use strict";a.d(t,"a",(function(){return o}));var n=a(31),r=a(19),i=a(20),o=function(){function e(){Object(r.a)(this,e)}return Object(i.a)(e,null,[{key:"_",value:function(t,a){var r,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"info",o=!(arguments.length>3&&void 0!==arguments[3])||arguments[3],s=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};((a=Array.isArray(a)?a:[a]).forEach((function(a){e.log.push({time:new Date,module:t,criticality:i,message:a,stack:s})})),o)&&(a[0]=t+" # "+a[0],(r=console)[i].apply(r,Object(n.a)(a)))}},{key:"getLog",value:function(){return e.log}}]),e}();o.log=[]},189:function(e,t,a){"use strict";a.d(t,"a",(function(){return P}));var n=a(16),r=a(0),i=a.n(r),o=a(139),s=a(717),c=a(716),l=a(737),u=a(14),d=a(2),p=a(12),m=a(704),g=a(49),f=a(141),h=a(100),b=a(74),v=a.n(b),y=Object(o.a)((function(e){return{root:{paddingLeft:e.spacing(2),paddingRight:e.spacing(1)},highlight:"light"===e.palette.type?{color:e.palette.secondary.main,backgroundColor:Object(p.e)(e.palette.secondary.light,.85)}:{color:e.palette.text.primary,backgroundColor:e.palette.secondary.dark},title:{flex:"1 1 100%"}}}));function k(e){var t=y(),a=e.title,n=e.rowCount,r=e.numSelected,o=e.rightActionButton;return i.a.createElement(m.a,{className:Object(d.a)(t.root,Object(u.a)({},t.highlight,r>0))},r>0?i.a.createElement(g.a,{className:t.title,color:"inherit",variant:"subtitle1"},r," selected"):i.a.createElement(g.a,{className:t.title,variant:"h6",id:"tableTitle"},void 0!==a&&a+" ("+n+")"),r>0?i.a.createElement(h.a,{title:"Delete"},i.a.createElement(f.a,{"aria-label":"delete"},i.a.createElement(v.a,null))):o)}var E=a(712),S=a(713),O=a(714),j=a(738),C=a(730);function w(e){var t=e.headCells,a=e.onSelectAllClick,n=e.selectable,r=e.sortable,o=e.order,s=e.orderBy,c=e.numSelected,l=e.rowCount,u=e.onRequestSort;return i.a.createElement(E.a,null,i.a.createElement(S.a,null,!1!==n&&i.a.createElement(O.a,{padding:"checkbox"},i.a.createElement(C.a,{indeterminate:c>0&&c<l,checked:l>0&&c===l,onChange:a,inputProps:{"aria-label":"select all"}})),t.map((function(e){return i.a.createElement(O.a,{key:e.id,align:e.align||"left",padding:e.disablePadding?"none":"default",sortDirection:r&&s===e.id&&o,style:{width:e.width||"auto"}},r?i.a.createElement(j.a,{active:s===e.id,direction:s===e.id?o:"asc",onClick:(t=e.id,function(e){u(e,t)})},i.a.createElement("strong",null,e.label)):i.a.createElement("strong",null,e.label));var t}))))}var x=a(9),T=a(99),D=a(715),I=Object(o.a)((function(e){return{noWrap:{whiteSpace:"nowrap"}}}));function L(e,t,a){if(null!==t&&"object"===typeof t){if(a.indexOf(t)>=0)return;a.push(t)}return t}function A(e){var t=e.columns,a=e.pageRows,n=e.emptyRows,r=e.rowStyles,o=e.selectable,s=e.selected,c=e.onClick,l=I();return i.a.createElement(D.a,null,a.map((function(e,a){var n,u=(n=e.id,-1!==s.indexOf(n)),p="enhanced-table-checkbox-".concat(a),m={};for(var g in r){var f=r[g];e[g]&&Object.keys(f).indexOf(e[g])>-1&&(m=Object(x.a)({},m,{},f[e[g]]))}return i.a.createElement(S.a,{key:"TableRow-"+a,hover:!0,onClick:c?function(t){return c(t,e.id)}:void 0,role:"checkbox","aria-checked":u,tabIndex:-1,selected:u},!1!==o&&i.a.createElement(O.a,{key:"TableCell-"+a+"-Checkbox",style:m,padding:"checkbox"},i.a.createElement(C.a,{checked:u,inputProps:{"aria-labelledby":p}})),t.map((function(t){return i.a.createElement(O.a,{key:"TableCell-"+a+"-"+t.id,classes:{root:Object(d.a)(t.noWrap&&l.noWrap)},style:m,scope:"row",padding:t.disablePadding?"none":"default"},function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";if(void 0===e||null===e)return"";var a=[];switch(t.toLowerCase()){case"date":e=Object(T.a)(e,"yyyy-MM-dd HH:mm:ss");break;default:e="boolean"===typeof(e=Array.isArray(e)||"object"===typeof e?JSON.stringify(e,(function(e,t){return L(0,t,a)})):e)?e.toString():e}return e}(e[t.id],t.type))})))})),n>0&&i.a.createElement(S.a,{style:{height:53*n}},i.a.createElement(O.a,{colSpan:6})))}var N=Object(o.a)((function(e){return{table:{minWidth:750}}}));function _(e,t,a){return t[a]<e[a]?-1:t[a]>e[a]?1:0}function M(e,t){return"desc"===e?function(e,a){return _(e,a,t)}:function(e,a){return-_(e,a,t)}}function R(e,t){var a=e.map((function(e,t){return[e,t]}));return a.sort((function(e,a){var n=t(e[0],a[0]);return 0!==n?n:e[1]-a[1]})),a.map((function(e){return e[0]}))}function P(e){var t=N(),a=e.title,r=e.headCells,o=e.size,u=e.CustomTableBody,d=e.rows,p=e.toolbar,m=e.selectable,g=e.pagination,f=e.defaultOrder,h=e.defaultOrderBy,b=e.defaultSelected,v=e.defaultPage,y=e.defaultRowsPerPage,E=e.toolbarRightActionButton,S=i.a.useState(f||"asc"),O=Object(n.a)(S,2),j=O[0],C=O[1],x=i.a.useState(h||r[0].id),T=Object(n.a)(x,2),D=T[0],I=T[1],L=i.a.useState(b||[]),_=Object(n.a)(L,2),P=_[0],F=_[1],z=i.a.useState(v||0),B=Object(n.a)(z,2),H=B[0],U=B[1],K=i.a.useState(g?y||5:d.length),G=Object(n.a)(K,2),W=G[0],V=G[1],J=u||A;return i.a.createElement(i.a.Fragment,null,!1!==p&&i.a.createElement(k,{title:a,rowCount:d.length,numSelected:P.length||0,rightActionButton:E}),i.a.createElement(c.a,null,i.a.createElement(s.a,{className:t.table,"aria-labelledby":"tableTitle","aria-label":"enhanced table",size:o,stickyHeader:!0},i.a.createElement(w,Object.assign({classes:t,numSelected:P.length,order:j,orderBy:D,onSelectAllClick:function(e){if(e.target.checked){var t=d.map((function(e){return e.id}));F(t)}else F([])},onRequestSort:function(e,t){C(D===t&&"asc"===j?"desc":"asc"),I(t)},rowCount:d.length},e)),i.a.createElement(J,Object.assign({columns:r,pageRows:R(d,M(j,D)).slice(H*W,H*W+W),emptyRows:W-Math.min(W,d.length-H*W),onClick:!1!==m&&function(e,t){var a=P.indexOf(t),n=[];-1===a?n=n.concat(P,t):0===a?n=n.concat(P.slice(1)):a===P.length-1?n=n.concat(P.slice(0,-1)):a>0&&(n=n.concat(P.slice(0,a),P.slice(a+1))),F(n)},selected:P},e)))),g&&i.a.createElement(l.a,{rowsPerPageOptions:[5,10,25],component:"div",count:d.length,rowsPerPage:W,page:H,onChangePage:function(e,t){U(t)},onChangeRowsPerPage:function(e){V(parseInt(e.target.value,10)),U(0)}}))}},205:function(e,t,a){"use strict";a.r(t),a.d(t,"ModuleSettings",(function(){return T})),a.d(t,"ModuleDescription",(function(){return D})),a.d(t,"ModuleScreenshots",(function(){return I})),a.d(t,"ModuleConfig",(function(){return L}));var n=a(31),r=a(9),i=a(14),o=a(19),s=a(20),c=a(23),l=a(24),u=a(0),d=a.n(u),p=a(2),m=a(99),g=a(58),f=a(5),h=a(138),b=a(100),v=a(248),y=a(628),k=a(363),E=a(137),S=a(247),O=a(364),j=a(333),C=a.n(j),w=a(6),x=function(e){Object(l.a)(a,e);var t=Object(c.a)(a);function a(e){var n;return Object(o.a)(this,a),(n=t.call(this,e)).state={adapterInformation:[],adapterAliveStatus:{},newUpdates:!1,updatesJson:"",lastUpdateCheck:""},n.socket=g.a.getConnection,n.list=n.props.settings.list?Array.isArray(n.props.settings.list)?n.props.settings.list:n.props.settings.list.split(","):null,n.blacklist=n.props.settings.blacklist?Array.isArray(n.props.settings.blacklist)?n.props.settings.blacklist:n.props.settings.blacklist.split(","):null,n.updateStates=["admin.0.info.newUpdates","admin.0.info.lastUpdateCheck","admin.0.info.updatesJson"],n.adapterStates=[],n}return Object(s.a)(a,[{key:"componentDidMount",value:function(){var e=this;!1!==this.props.settings.updates&&this.socket.getStates(this.updateStates,(function(t,a){e.setState({newUpdates:a["admin.0.info.newUpdates"].val,lastUpdateCheck:a["admin.0.info.lastUpdateCheck"].val,updatesJson:a["admin.0.info.updatesJson"].val}),e.socket.subscribeStates(e.updateStates,(function(t,a){t=t.substr(t.lastIndexOf(".")+1),e.state[t]!==a.val&&e.setState(Object(i.a)({},t,a.val))}))})),this.socket.getAdapterInstances((function(t,a){if(a&&a.rows){var n=[];a.rows.forEach((function(t,a){(!e.list||e.list&&e.list.indexOf(t.value.common.name)>-1)&&(!e.blacklist||e.blacklist&&-1===e.blacklist.indexOf(t.value.common.name))&&(n.push(t),e.adapterStates=e.adapterStates.concat([t.id+".alive",t.id+".connected",t.id.replace("system.adapter.","")+".info.connection"]))})),e.setState({adapterInformation:n.sort((function(e,t){return e.id>t.id?1:t.id>e.id?-1:0}))}),e.socket.getStates(e.adapterStates,(function(t,a){e.setState({adapterAliveStatus:a}),e.socket.subscribeStates(e.adapterStates,(function(t,a){!a||e.state.adapterAliveStatus[t]&&a.val===e.state.adapterAliveStatus[t].val||e.setState((function(e){return{adapterAliveStatus:Object(r.a)({},e.adapterAliveStatus,Object(i.a)({},t,a))}}))}))}))}}))}},{key:"componentWillUnmount",value:function(){this.socket.unsubscribeStates([].concat(Object(n.a)(this.updateStates),Object(n.a)(this.adapterStates)))}},{key:"render",value:function(){var e=this,t=this.props.classes,a=this.state.updatesJson&&JSON.parse(this.state.updatesJson)||{},n=Object.keys(a).length,r=d.a.createElement(E.a,{key:"loading",className:t.loading},d.a.createElement(h.a,{size:20}));return this.state.adapterInformation.length>0&&(r=this.state.adapterInformation.map((function(n){n.update=a[n.value.common.name]||!1;var r=n.value.common.enabled,i=e.state.adapterAliveStatus[n.id+".alive"]&&e.state.adapterAliveStatus[n.id+".alive"].val||!1,o=e.state.adapterAliveStatus[n.id+".connected"]&&e.state.adapterAliveStatus[n.id+".connected"].val||!1,s=!e.state.adapterAliveStatus[n.id.replace("system.adapter.","")+".info.connection"]||e.state.adapterAliveStatus[n.id.replace("system.adapter.","")+".info.connection"].val,c=f.a.t("Adapter")+" "+(r?i&&o&&s?f.a.t("alive"):f.a.t("not alive"):f.a.t("disabled"));return d.a.createElement(E.a,{key:"adapter-"+n.id},d.a.createElement(k.a,null,d.a.createElement(v.a,{alt:n.value.common.name,src:n.value.common.extIcon,className:t.small})),d.a.createElement(S.a,{primary:n.value.common.title,secondary:["v"+n.value.common.version,n.update&&n.value.common.version!==n.update.availableVersion&&d.a.createElement("span",{key:"updates-"+n.id},", ",d.a.createElement("span",{className:t.UpdateAvailable},f.a.t("Update available")+" v"+n.update.availableVersion)),n.value.common.runAsCompactMode&&", "+f.a.t("Compact Mode")+" "+f.a.t("on")+" ("+f.a.t("Group")+" "+n.value.common.compactGroup+")"]}),d.a.createElement(O.a,{className:Object(p.a)(t.StatusIndicator,r?i&&o&&s?t.alive:t.notAlive:t.disabled)},d.a.createElement(b.a,{title:c},d.a.createElement("span",{className:r?i&&o&&s?"mdi mdi-check-circle":"mdi mdi-alert":"mdi mdi-close"}))))}))),d.a.createElement(y.a,{dense:!0},!1===this.state.newUpdates?this.state.lastUpdateCheck&&d.a.createElement(E.a,{key:"updates",classes:{root:t.noUpdates}},d.a.createElement(S.a,{primary:f.a.t("last update")+": "+Object(m.a)(new Date(this.state.lastUpdateCheck),"dd.MM.yyyy HH:mm:ss",{locale:f.b[f.a.getLanguage()]})})):d.a.createElement(E.a,{key:"updates",classes:{container:t.UpdatesListItem}},d.a.createElement(k.a,null,d.a.createElement(C.a,null)),d.a.createElement(S.a,{primary:f.a.t("Updates available")+"!"}),d.a.createElement(O.a,{className:Object(p.a)(t.StatusIndicator,t.UpdatesIndicator)},n)),r)}}]),a}(d.a.Component);t.default=Object(w.a)((function(e){return{noUpdates:{fontStyle:"italic",textAlign:"right",color:"rgba(0, 0, 0, 0.54)"},UpdateAvailable:{color:"#CCAA00"},UpdatesListItem:{backgroundColor:"#ffd700",color:"#fff",margin:e.spacing(0,-2),paddingLeft:e.spacing(2)},UpdatesIndicator:{right:e.spacing(3.75),backgroundColor:"#CCAA00",borderRadius:"50%",width:e.spacing(3),height:e.spacing(3),color:"#fff",textAlign:"center",fontSize:"1rem !important"},StatusIndicator:{fontSize:"1.4rem"},loading:{textAlign:"center",marginTop:"5px"},small:{width:e.spacing(3),height:e.spacing(3)},alive:{color:"#86d686"},notAlive:{color:"#f7e43b"},disabled:{color:"#bababa"}}}))(x);var T={noDevicesAllowed:!0,title:f.a.t("Adapter Status"),icon:"traffic-light"},D="Zeigt alle installierten Adapter mit ihren Instanzen und dem jeweiligen Status (active & alive, active & not connected, inactive) an.",I=["AdapterStatus1.png"],L=[{parameter:"updates",label:"Adapter Updates",description:{en:"Enable to show adapters updates",de:"Aktivieren, um Adapter Updates anzuzeigen"},type:"SwitchInput",val:!0},{parameter:"list",label:{en:"List of Adapter's",de:"Liste angezeigter Adapter"},description:{en:"List of adapters to show (empty shows all adapters)",de:"Liste der Adapter, die angezeigt werden (leere Liste zeigt alle Adapter)"},values:{en:"Adapter names separated by comma",de:"Namen der Adapter mit Komma separiert"}},{parameter:"blacklist",label:{en:"List of Adapter's to hide",de:"Liste nicht angezeigter Adapter"},description:{en:"Shows all adapters except the ones listed here",de:"Zeigt alle Adapter, au\xdfer die hier angegebenen"},values:{en:"Adapter names separated by comma",de:"Namen der Adapter mit Komma separiert"}}]},211:function(e,t,a){"use strict";a.r(t),a.d(t,"ModuleSettings",(function(){return W})),a.d(t,"ModuleDescription",(function(){return V})),a.d(t,"ModuleScreenshots",(function(){return J})),a.d(t,"ModuleConfig",(function(){return q}));var n=a(31),r=a(9),i=a(19),o=a(20),s=a(53),c=a(23),l=a(24),u=a(0),d=a.n(u),p=a(2),m=a(334),g=(a(507),a(508),a(360)),f=a(13),h=a(5),b=a(121),v=a(138),y=a(140),k=a(637),E=a(645),S=a(100),O=a(87),j=a(368),C=a(40),w=a(642),x=a(249),T=a(369),D=a(123),I=a(141),L=a(338),A=a.n(L),N=a(339),_=a.n(N),M=a(336),R=a.n(M),P=a(337),F=a.n(P),z=a(341),B=a.n(z),H=a(340),U=a.n(H),K=a(6),G=function(e){Object(l.a)(a,e);var t=Object(c.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e)).historyChange=function(e){return function(t,a,i,o){n.addChartGraph(o,a,Object(r.a)({},e,{axis:n.getAxis(e.start,e.end)})),n.setState({loading:!1})}},n.stateChange=function(e){return function(t,a,i,o){return n.updateChartGraph(o,a,Object(r.a)({},e,{axis:n.getAxis(e.end,new Date)}))}},n.chartFilter=n.props.settings.chartFilter||{},n.chartConfig=n.props.settings.chartConfig||{},n.chartConfig.yAxes=n.chartConfig.yAxes||[],n.chartConfig.yAxes.unshift({id:"left",type:"linear",position:"left",ticks:{callback:function(e){return(n.chartConfig.yLeftAxisUnitBefore||"")+Number.parseFloat(e).toFixed(1)+(n.chartConfig.yLeftAxisUnitAfter||"")}}}),n.state={loading:!0,errors:[],datePicker:!1,selectedTimeRangeValue:n.chartFilter&&n.chartFilter.selectedTimeRangeValue||1,selectedTimeRangeUnit:n.chartFilter&&n.chartFilter.selectedTimeRangeUnit||"days",selectedDateTime:n.chartFilter&&n.chartFilter.selectedDateTime&&new Date(n.chartFilter.selectedDateTime)||new Date,dateNow:!n.chartFilter||!n.chartFilter.selectedDateTime,chartLabels:[],chartData:{labels:[],datasets:[]},chartPan:!0,chartZoom:!0},n.timer=null,n.timeRangeRef=d.a.createRef(),n.chartRef=d.a.createRef(),n.chartUpdates={},n.chartOptions={maintainAspectRatio:!1,spanGaps:!0,legend:{onClick:n.legendClickHandler.bind(Object(s.a)(n))},tooltips:{callbacks:{label:function(e,t){return t.datasets[e.datasetIndex].label+": "+e.value+t.datasets[e.datasetIndex].unit}}},scales:{yAxes:n.chartConfig.yAxes},plugins:{colorschemes:{scheme:"brewer.SetOne9"},zoom:{pan:{enabled:!0,mode:"xy"},zoom:{enabled:!0,mode:"xy"}}}},n}return Object(o.a)(a,[{key:"componentDidMount",value:function(){var e=this,t=Object(r.a)({},this.getTimeRange(),{axis:this.getAxis()});this.props.devices.forEach((function(a){a.label=a.name+" ("+h.a.t(a.primaryStateKey)+")",a.requestDeviceStateHistory(a.options.history||null,!0,{start:t.start,end:t.end,step:t.step,aggregate:"average",ignoreNull:!0}).catch((function(e){return f.a._("Modules (Chart)",e.message,"error",!0,e.stack)})),a.listen("historyChange",(function(t){return e.historyChange})),null!==e.props.settings.liveUpdates&&!1!==e.props.settings.liveUpdates&&e.state.dateNow&&a.listen((function(t){return e.stateChange}))}))}},{key:"componentWillUnmount",value:function(){var e=this;this.props.devices.forEach((function(t){t.unlisten(e.stateChange)}))}},{key:"componentDidUpdate",value:function(e,t){var a=this;!this.state.selectedTimeRangeValue||t.selectedDateTime===this.state.selectedDateTime&&t.selectedTimeRangeValue===this.state.selectedTimeRangeValue&&t.selectedTimeRangeUnit===this.state.selectedTimeRangeUnit||(this.setState({loading:!0,errors:[]}),clearTimeout(this.timer),this.timer=setTimeout((function(){var e=a.getTimeRange();a.props.devices.forEach((function(t){t.requestDeviceStateHistory(t.options.history||null,!0,{start:e.start,end:e.end,step:e.step,aggregate:"average",ignoreNull:!0}).catch((function(e){return f.a._("Modules (Chart)",e.message,"error",!0,e.stack)}))}))}),500))}},{key:"getTimeRange",value:function(){var e=this.state.selectedDateTime.getTime(),t=this.state.selectedTimeRangeValue,a=1,n="dd. MMM yyyy, HH:mm";switch(this.state.selectedTimeRangeUnit){default:break;case"seconds":n="dd. MMM yyyy, HH:mm:ss";break;case"minutes":n="dd. MMM yyyy, HH:mm:ss",t*=60;break;case"hours":n="dd. MMM yyyy, HH:mm",t=60*t*60,a*=60;break;case"days":n="dd. MMM yyyy, HH:mm",t=60*t*60*24,a=60*a*60;break;case"months":n="dd. MMM yyyy",t=60*t*60*24*31,a=60*a*60*24;break;case"years":n="dd. MMM yyyy",t=60*t*60*24*365,a=60*a*60*24*31}return{axisTimeFormat:n,start:e-1e3*t,end:e,timeRange:1e3*t,step:1e3*a}}},{key:"getAxis",value:function(e,t){for(var a=this.getTimeRange(),n=a.step,r=a.axisTimeFormat,i={},o=e;o<=t;o+=n)i[o]=b.a.secondsToDateTime(o/1e3,r);return i}},{key:"groupChartData",value:function(e,t){var a,r=[],i=Object.keys(t);return i.forEach((function(t,o){for(var s in a=i[o-1>0?o-1:0],e){var c=e[s];if(c.val=parseFloat(c.val),c.ts&&null!==c.val&&!(a>c.ts))if(a<c.ts&&c.ts<=t)r[o]=r[o]?[].concat(Object(n.a)(r[o]),[c.val]):[c.val];else if(c.ts>t)break}r[o]&&(1===r[o].length?r[o]=r[o][0]:r[o]=r[o].reduce((function(e,t){return e+t}),0)/r[o].length)})),r}},{key:"updateChartGraph",value:function(e,t,a){var r=this.state.chartLabels.findIndex((function(t){return t===e.label}));if(-1===r)return!1;this.chartUpdates[r]=this.chartUpdates[r]||[],this.chartUpdates[r].push({ts:t.ts,val:t.val});var i=this.groupChartData(this.chartUpdates[r],a.axis);this.chartRef.current.chartInstance.data.labels=[].concat(Object(n.a)(this.state.chartData.labels),Object(n.a)(Object.values(a.axis))),this.chartRef.current.chartInstance.data.datasets[r].data=[].concat(Object(n.a)(this.state.chartData.datasets[r].data),Object(n.a)(i)),this.chartRef.current.chartInstance.update()}},{key:"addChartGraph",value:function(e,t,a){if(!t||!t.length){var i=h.a.t("No history data given for %s").replace("%s",e.label)+"!";return this.setState((function(e){return{errors:[].concat(Object(n.a)(e.errors),[i])}})),!1}var o=this.groupChartData(t,a.axis),s=this.state.chartLabels.findIndex((function(t){return t===e.label}));if(s>-1)this.chartRef.current.chartInstance.data.labels=Object.values(a.axis),this.chartRef.current.chartInstance.data.datasets[s].data=o,this.chartRef.current.chartInstance.update();else{this.setState((function(t){return{chartLabels:[].concat(Object(n.a)(t.chartLabels),[e.label])}}));var c=Object(r.a)({label:e.label,unit:e.states[e.primaryStateKey].state.value.unit||"",fill:!1},e.options.graphConfig||{},{data:o});this.setState((function(e){return{axisTimeFormat:a.axisTimeFormat,chartData:{labels:Object.values(a.axis),datasets:[].concat(Object(n.a)(e.chartData.datasets),[c])}}}))}}},{key:"legendClickHandler",value:function(e,t){var a=t.datasetIndex,n=this.chartRef.current.chartInstance,r=n.getDatasetMeta(a);r.hidden=null===r.hidden?!n.data.datasets[a].hidden:null,n.update(),n.resetZoom()}},{key:"disablePan",value:function(){var e=this.chartRef.current.chartInstance.options.plugins.zoom.pan.enabled;this.chartRef.current.chartInstance.options.plugins.zoom.pan.enabled=!1===e,this.setState({chartPan:!1===e})}},{key:"disableZoom",value:function(){var e=this.chartRef.current.chartInstance.options.plugins.zoom.zoom.enabled;this.chartRef.current.chartInstance.options.plugins.zoom.zoom.enabled=!1===e,this.setState({chartZoom:!1===e})}},{key:"render",value:function(){var e=this,t=this.props,a=t.classes,n=t.settings;return d.a.createElement("div",null,d.a.createElement("div",{className:a.options},d.a.createElement(O.a,{className:a.datePicker},d.a.createElement(S.a,{title:h.a.t("Period shown in Chart")},d.a.createElement(R.a,{className:a.icon})),d.a.createElement(x.a,{inputRef:this.timeRangeRef,className:a.input,value:this.state.selectedTimeRangeValue,onChange:function(t){return e.setState({selectedTimeRangeValue:t.target.value})}}),d.a.createElement(T.a,{value:this.state.selectedTimeRangeUnit,onChange:function(t){return e.setState({selectedTimeRangeUnit:t.target.value})},displayEmpty:!0,disableUnderline:!0,className:a.select},d.a.createElement(D.a,{value:"seconds"},h.a.t("Seconds")),d.a.createElement(D.a,{value:"minutes"},h.a.t("Minutes")),d.a.createElement(D.a,{value:"hours"},h.a.t("Hours")),d.a.createElement(D.a,{value:"days"},h.a.t("Days")),d.a.createElement(D.a,{value:"months"},h.a.t("Months")),d.a.createElement(D.a,{value:"years"},h.a.t("Years")))),d.a.createElement(O.a,{className:a.datePicker},d.a.createElement(S.a,{title:h.a.t("End date")},d.a.createElement(F.a,{className:a.icon})),d.a.createElement(C.a,{locale:h.b[h.a.getLanguage()],utils:g.a},d.a.createElement(w.a,{className:a.input,value:this.state.selectedDateTime,onChange:function(t){return e.setState({selectedDateTime:t,dateNow:!1})},open:this.state.datePicker,onOpen:function(){return e.setState({datePicker:!0})},onClose:function(){return e.setState({datePicker:!1})},variant:"inline",ampm:!1,format:"dd.MM.yyyy HH:mm",InputProps:{disableUnderline:!0}})),d.a.createElement(S.a,{title:h.a.t("Select end date")},d.a.createElement(I.a,{color:"primary",className:a.iconButton,onClick:function(){return e.setState({datePicker:!0})}},d.a.createElement(A.a,null))),d.a.createElement(j.a,{className:a.dividerVertical,orientation:"vertical"}),d.a.createElement(S.a,{title:h.a.t("Select today as end date")},d.a.createElement(I.a,{className:a.iconButton,onClick:function(){return e.setState({selectedDateTime:new Date,dateNow:!0})}},d.a.createElement(_.a,null)))),d.a.createElement(S.a,{title:h.a.t("Live updates are "+(null!==this.props.settings.liveUpdates&&!1!==this.props.settings.liveUpdates&&this.state.dateNow?"on":"off")),placement:"top",style:{display:"flex"}},d.a.createElement("span",null,d.a.createElement(y.a,{disabled:!0,className:Object(p.a)(a.datePicker,null!==this.props.settings.liveUpdates&&!1!==this.props.settings.liveUpdates&&this.state.dateNow?a.button:a.buttonDisabled)},d.a.createElement(U.a,null))))),d.a.createElement(j.a,{className:a.divider}),d.a.createElement("div",{className:a.toolbar},d.a.createElement("div",{className:a.errorMessage},this.state.errors.length>0&&d.a.createElement(E.a,{severity:"error"},this.state.errors.map((function(e,t){return[e,d.a.createElement("br",{key:"br-error-"+t})]})))),d.a.createElement(k.a,{className:a.toolbarButtons,color:"primary"},d.a.createElement(y.a,{disableElevation:!0,variant:"contained",onClick:function(){return e.chartRef.current.chartInstance.resetZoom()}},d.a.createElement(S.a,{title:h.a.t("Reset Zoom")},d.a.createElement(B.a,null))))),d.a.createElement("div",{className:"chart-container",style:{position:"relative",height:n.chartHeight||"500px"}},this.state.loading&&d.a.createElement("div",{className:a.loading},d.a.createElement(v.a,null)),d.a.createElement(m.a,{ref:this.chartRef,data:this.state.chartData,options:this.chartOptions})))}}]),a}(d.a.Component);t.default=Object(K.a)((function(e){return{loading:{position:"absolute",backgroundColor:"rgba(0, 0, 0, 0.3)",width:"100%",height:"100%",display:"flex",alignItems:"center",justifyContent:"center"},errorMessage:{marginBottom:5,marginRight:15,width:"100%"},toolbar:{display:"flex"},toolbarButtons:{display:"initial",whiteSpace:"nowrap"},options:{display:"flex",justifyContent:"center"},datePicker:{padding:"2px 4px",display:"flex",alignItems:"center",margin:2},input:{marginLeft:e.spacing(1),flex:1},select:{width:100},icon:{margin:10},iconButton:{padding:10},divider:{margin:"15px 0"},dividerVertical:{height:28,margin:4},button:{backgroundColor:e.palette.primary.main,color:"#fff !important",margin:"4px"},buttonDisabled:{backgroundColor:"#eee",margin:"4px"}}}))(G);var W={noDevicesAllowed:!0,title:h.a.t("Adapter Status"),icon:"traffic-light"},V="Stellt historische Werte (z.B. aus ioBroker.history) grafisch als Chart mittels Chart.js dar.",J=["Chart1.png"],q=[]},226:function(e,t,a){"use strict";a.r(t),a.d(t,"default",(function(){return p})),a.d(t,"ModuleSettings",(function(){return m})),a.d(t,"ModuleDescription",(function(){return g})),a.d(t,"ModuleScreenshots",(function(){return f})),a.d(t,"ModuleConfig",(function(){return h}));var n=a(9),r=a(16),i=a(0),o=a.n(i),s=a(99),c=a(242),l=a(25),u=a(5),d=a(138);function p(e){var t=e.settings,a=Object(i.useRef)(),p=Object(i.useState)(Object(s.a)(new Date,t.format,{locale:u.b[u.a.getLanguage()]})),m=Object(r.a)(p,2),g=m[0],f=m[1],h=Object(i.useState)(""),b=Object(r.a)(h,2),v=b[0],y=b[1],k=Object(i.useState)(""),E=Object(r.a)(k,2),S=E[0],O=E[1],j=Object(i.useState)(""),C=Object(r.a)(j,2),w=C[0],x=C[1];return t.style=Object(n.a)({fontSize:"1.5rem",textAlign:"center"},t.style),t.format=t.format||"dd.MM.yyyy HH:mm:ss",t.refresh=t.format.indexOf("s")>-1?1e3:t.format.indexOf("i")>-1?6e4:36e5,Object(i.useEffect)((function(){clearTimeout(a.current),a.current=setTimeout((function(){return f(Object(s.a)(new Date,t.format,{locale:u.b[u.a.getLanguage()]}))}),t.refresh),l.a.getSetting("iobroker").latitude&&l.a.getSetting("iobroker").longitude&&(O(Object(c.getSunrise)(l.a.getSetting("iobroker").latitude,l.a.getSetting("iobroker").longitude)),x(Object(c.getSunset)(l.a.getSetting("iobroker").latitude,l.a.getSetting("iobroker").longitude))),l.a.getSetting("iobroker").city&&y(l.a.getSetting("iobroker").city)}),[t]),o.a.createElement("div",{style:t.style},u.a.t("%DateTime").replace(/%DateTime/,g),!1!==t.sun&&o.a.createElement("div",{style:{margin:"5px 0",fontSize:"1.2rem"}},o.a.createElement("span",{className:"mdi mdi-city-variant-outline"})," ",v||o.a.createElement(d.a,{size:"1.2rem"}),o.a.createElement("span",{style:{margin:"0 10px"}}),o.a.createElement("span",{className:"mdi mdi-weather-sunset-up"})," ",S?Object(s.a)(S,"HH:mm"):o.a.createElement(d.a,{size:"1.2rem"}),o.a.createElement("span",{style:{margin:"0 10px"}}),o.a.createElement("span",{className:"mdi mdi-weather-sunset-down"})," ",w?Object(s.a)(w,"HH:mm"):o.a.createElement(d.a,{size:"1.2rem"})))}var m={noDevicesAllowed:!0,title:u.a.t("Time"),icon:"clock-outline"},g="Das Modul dient der Anzeige des aktuellen Datums und Zeit.",f=["DateTime1.png"],h=[{parameter:"style",label:{en:"Style of the text",de:"Style des Textes"},description:{en:"CSS statements in javascript notation",de:"CSS-Anweisungen in Javascript Syntax"},val:'{ fontSize: "1.5rem", textAlign: "center" }'},{parameter:"format",label:{en:"Date/Time format",de:"Format des Datums / Uhrzeit"},description:{en:"For possible format values, see date-fns documentation",de:"F\xfcr m\xf6gliche Werte, siehe date-fns Dokumentation"},link:"https://date-fns.org/v2.9.0/docs/format",val:"dd.MM.yyyy HH:mm:ss"},{parameter:"sun",label:{en:"Show times of sunrise and -set",de:"Zeigt Zeiten f\xfcr Sonnenauf- und -untergang"},type:"SwitchInput",val:!0}]},227:function(e,t,a){"use strict";a.r(t),a.d(t,"default",(function(){return j})),a.d(t,"ModuleDescription",(function(){return w})),a.d(t,"ModuleScreenshots",(function(){return x})),a.d(t,"ModuleConfig",(function(){return T}));var n=a(14),r=a(9),i=a(16),o=a(0),s=a.n(o),c=a(2),l=a(44),u=a.n(l),d=a(646),p=a(648),m=a(638),g=a(647),f=a(13),h=a(25),b=a(5),v=a(643),y=a(49),k=a(100),E=a(248),S=a(139),O=Object(S.a)((function(e){return{map:{width:"100%",height:"100%"},mapOverview:{color:"#666",position:"absolute",left:0,bottom:0,width:"100%",height:"60px",zIndex:999,display:"flex",alignItems:"center","& > *":{margin:e.spacing(1),cursor:"pointer"}},mapIconContainer:{},mapIconParent:{backgroundColor:"#fff",boxShadow:"0 0 0 8px rgba(255, 255, 255, 0.3)",borderRadius:"50%",width:"100%",height:"100%"},mapIcon:{fontSize:"2rem",color:e.palette.primary.main,transform:"translate3d(4px, -4px,0)",display:"block","&:after":{content:'""',display:"block",padding:"50% 0%"}},mapTooltip:{}}}));function j(e){var t=e.settings,a=e.devices,l=O(),u=Object(o.useState)(t.defaultZoom),m=Object(i.a)(u,1)[0],g=Object(o.useState)(t.defaultPosition?Array.isArray(t.defaultPosition)?t.defaultPosition:t.defaultPosition.split(","):[h.a.getSetting("iobroker").latitude,h.a.getSetting("iobroker").longitude]),S=Object(i.a)(g,1)[0],j=Object(o.useState)({}),w=Object(i.a)(j,2),x=w[0],T=w[1],D=Object(o.useRef)(),I=Object(o.useCallback)((function(){D.current=this}),[]),L=Object(o.useCallback)((function(e){return D.current.flyTo(e.split(","))}),[]),A=function(e,t,a){"position"===e&&T((function(e){return e[a.id]&&e[a.id].position===t.val?e:(a.options.position=t.val,Object(r.a)({},e,Object(n.a)({},a.id,a)))}))};Object(o.useEffect)((function(){return a.forEach((function(e){e.requestDeviceState("position").catch((function(t){f.a._("Modules (Map)",t.message,"error",!0,t.stack),T((function(t){return t[e.id]?t:Object(r.a)({},t,Object(n.a)({},e.id,null))}))})),e.listen(A)})),function(){return a.forEach((function(e){return e.unlisten(A)}))}}),[a]);var N=[],_=[];if(a.length>0&&a.length===Object.keys(x).length){var M=function(e){var a=x[e];if(null!==a){var n=s.a.createElement(C,{key:"marker-"+a.id,position:a.options.position||"",device:a,settings:t.component});N.push(n);var r=null;if(a.attributes.avatar)r=s.a.createElement(E.a,{key:"overview-"+a.id,alt:a.name,src:a.attributes.avatar,onClick:function(){return L(a.options.position)}});else{var i=a.getDeviceState(),o=a.getIcon(null,i&&void 0!==i.val?i.val:null),l=a.getStyle("icon",null,i&&void 0!==i.val?i.val:null);console.log(i&&void 0!==i.val?i.val:null),console.log(l),r=s.a.createElement(E.a,{style:l,key:"overview-"+a.id,alt:a.name,onClick:function(){return L(a.options.position)}},s.a.createElement("span",{className:Object(c.a)("mdi mdi-"+o)}))}_.push(s.a.createElement(k.a,{key:"tooltip-"+a.id,title:a.name,"aria-label":a.name,arrow:!0},r))}};for(var R in x)M(R)}return s.a.createElement(s.a.Fragment,null,s.a.createElement(v.a,{className:l.mapOverview},s.a.createElement(y.a,null,b.a.t("Jump to"),":"),_),s.a.createElement(d.a,{useFlyTo:!0,center:S,zoom:m,className:l.map,whenReady:I},s.a.createElement(p.a,{attribution:'&copy <a href="http://osm.org/copyright">OpenStreetMap</a> contributors',url:"https://{s}.tile.osm.org/{z}/{x}/{y}.png"}),N))}function C(e){var t=e.position,a=e.device,n=e.settings,r=O(),i=null,l=40;if(f.a._("Modules (Map)","Marker for "+a.function+" "+a.name+" added to map."),a.attributes&&a.attributes.avatar&&"data:image/"===a.attributes.avatar.substr(0,11))i=u.a.divIcon({className:r.mapIconContainer,html:'<img src="'+a.attributes.avatar+'" class="'+r.mapIconParent+'" />',iconSize:[64,64]});else{l=30;var d=a.getDeviceState(),p=a.getIcon(null,d&&void 0!==d.val?d.val:null),h=a.getStyle("icon",null,d&&void 0!==d.val?d.val:null);console.log(h);var b=Object(S.a)({root:h},{name:"testi"});console.log(b.root),i=u.a.divIcon({className:r.mapIconContainer,html:'<div class="'+Object(c.a)(r.mapIconParent)+'"><span class="'+Object(c.a)(r.mapIcon,"mdi mdi-"+p)+'"></span></div>',iconSize:[40,40]})}var v=Object(o.useCallback)((function(){this.closeTooltip().openTooltip()}),[]);return s.a.createElement(m.a,{riseOnHover:!0,position:Array.isArray(t)?t:t.split(","),icon:i,onMouseOver:v},s.a.createElement(g.a,{className:r.mapTooltip,direction:n.tooltipDirection||"bottom",permanent:n.tooltipPermanent||!0,offset:[0,l]},a.name))}var w="Zeigt eine Karte von OpenStreetMap.",x=[],T=[{parameter:"defaultZoom",label:{en:"initial map zoom",de:"initialer Zoom der Karte"},type:"NumberInput",val:10},{parameter:"defaultPosition",label:{en:"initial map position",de:"initiale Position auf der Karte"},description:{en:"Separate latitude and longitude via comma (e.g. 53.550383, 9.992376)",de:"Latitude und Longitude mit Komma separiert (z. B. 53.550383, 9.992376)"},val:""},{parameter:"tooltipDirection",label:{en:"Direction tooltip will open",de:"Richtung in die der Tooltip \xf6ffnet"},description:{en:"possible directions to open: auto, center, top, left, right or bottom",de:"m\xf6gliche Werte: auto, center, top, left, right or bottom"},val:""},{parameter:"tooltipPermanent",label:{en:"permanent tooltip",de:"Permanenter Tooltip"},description:{en:"Option to keep tooltip permanently open (true) or only open on mouse-over (false)",de:"Angabe ob der Tooltip permanent ist (true) oder nur beim r\xfcberfahren mit der Maus gezeigt wird (false)"},type:"SwitchInput",val:!0}]},228:function(e,t,a){"use strict";a.r(t),a.d(t,"default",(function(){return o})),a.d(t,"ModuleDescription",(function(){return s})),a.d(t,"ModuleScreenshots",(function(){return c})),a.d(t,"ModuleConfig",(function(){return l}));var n=a(0),r=a.n(n),i=a(112);function o(e){return r.a.createElement(i.default,Object.assign({horizontal:!0},e))}var s="Zeigt eine Liste von States horizontal an",c=["StateListHorizontal1.png"],l=i.ModuleConfig},229:function(e,t,a){"use strict";a.r(t),a.d(t,"default",(function(){return g})),a.d(t,"ModuleSettings",(function(){return f})),a.d(t,"ModuleDescription",(function(){return h})),a.d(t,"ModuleScreenshots",(function(){return b})),a.d(t,"ModuleConfig",(function(){return v}));var n=a(16),r=a(0),i=a.n(r),o=a(13),s=a(58),c=a(5),l=a(367),u=a(87),d=a(49),p=a(139),m=Object(p.a)((function(e){return{paper:{width:100,height:160,padding:5,textAlign:"center"}}}));function g(e){var t=e.settings,a=m(),p=Object(r.useState)(null),g=Object(n.a)(p,2),f=g[0],h=g[1];Object(r.useEffect)((function(){s.a.getConnection.getRemoteResource(t.url).then((function(e){200===e.statusCode&&h(JSON.parse(e.body))}),(function(e){return o.a._("Modules (Weather)",e.message,"error",!0,e.stack)}))}),[t.url]);var b=[];if(!f)return null;for(var v in f.day){var y=f.day[v];y.title=1===v?c.a.t("today"):2===v?c.a.t("tomorrow"):y.name;var k=i.a.createElement(l.a,{key:"day-"+v,item:!0},i.a.createElement(u.a,{className:a.paper},i.a.createElement(d.a,{variant:"body1"},y.title),i.a.createElement(d.a,{variant:"caption"},y.date)));b.push(k)}return i.a.createElement(l.a,{container:!0,justify:"space-between",spacing:1},b)}var f={noDevicesAllowed:!0,title:c.a.t("Weather"),icon:"weather-partly-cloudy"},h="Zeigt die Wetter-Vorschau an.",b=[],v=[]},230:function(e,t,a){"use strict";a.r(t);var n=a(5),r=a(517)("./door."+n.a.getLanguage()).default;n.a.setTranslation(n.a.getLanguage(),r),t.default={description:{en:"Doors",de:"T\xfcren"},configurations:{open:{icon:{true:"door-open",false:"door-closed"},state:{true:n.a.t("door#open#true"),false:n.a.t("door#open#false")}},lock:{}},components:{},actions:{},styles:{}}},231:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),i=a(5),o=a(48),s=a(519)("./heating."+i.a.getLanguage()).default;i.a.setTranslation(i.a.getLanguage(),s),t.default={description:{en:"Heating",de:"Heizung"},configurations:{temperature:{value:function(e){return e.toFixed(1)},unit:" \xb0C"},setTemperature:{unit:" \xb0C",icon:"thermometer-chevron-up"},humidity:{unit:" %"},boost:{icon:"radiator"}},components:{setTemperature:function(e){var t=o.default.components.LevelComponent;return r.a.createElement(t,Object.assign({min:0,max:35},e))}},actions:{boost:o.default.actions.PowerAction},styles:{}}},236:function(e,t,a){"use strict";a.r(t);var n=a(5),r=a(617)("./location."+n.a.getLanguage()).default;n.a.setTranslation(n.a.getLanguage(),r),t.default={description:{en:"locations",de:"Orte"},configurations:{position:{icon:"map-marker"},presence:{icon:{true:"map-marker-radius",false:"map-marker-remove-outline"},state:{true:n.a.t("location#presence#true"),false:n.a.t("location#presence#false")}},users:{icon:{"":"account-group-outline",default:"account-group"},state:{"":n.a.t("location#users#empty")}}},components:{},actions:{},styles:{}}},237:function(e,t,a){"use strict";a.r(t);var n=a(5),r=a(619)("./user."+n.a.getLanguage()).default;n.a.setTranslation(n.a.getLanguage(),r),t.default={description:{en:"users",de:"Benutzer"},configurations:{position:{icon:"map-marker"},location:{icon:"account"},battery:{}},components:{},actions:{},styles:{}}},238:function(e,t,a){"use strict";a.r(t);var n=a(5),r=a(621)("./window."+n.a.getLanguage()).default;n.a.setTranslation(n.a.getLanguage(),r),t.default={description:{en:"windows",de:"Fenster"},configurations:{open:{icon:{true:"window-open-variant",false:"window-closed-variant"},state:{true:n.a.t("window#open#true"),false:n.a.t("window#open#false")}}},components:{},actions:{},styles:{}}},239:function(e,t,a){"use strict";a.r(t);var n=a(16),r=a(0),i=a.n(r),o=a(243),s=a(13),c=a(5);var l={HsvToRgb:function(e){var t,a,r,i,o,s,c,l,u=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,d=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1;if(Array.isArray(e))d=e[2],u=e[1],e=e[0];else if("string"===typeof e&&e.indexOf(",")){var p=e.split(","),m=Object(n.a)(p,3);e=m[0],u=m[1],d=m[2]}switch(e>1&&(e/=360),s=d*(1-u),c=d*(1-(o=6*e-(i=Math.floor(6*e)))*u),l=d*(1-(1-o)*u),i%6){case 0:t=d,a=l,r=s;break;case 1:t=c,a=d,r=s;break;case 2:t=s,a=d,r=l;break;case 3:t=s,a=c,r=d;break;case 4:t=l,a=s,r=d;break;case 5:t=d,a=s,r=c}return[Math.round(255*t),Math.round(255*a),Math.round(255*r)]},RgbToHex:function(e,t,a){if(Array.isArray(e))a=e[2],t=e[1],e=e[0];else if("string"===typeof e&&e.indexOf(",")){var r=e.split(","),i=Object(n.a)(r,3);e=i[0],t=i[1],a=i[2]}return e=parseInt(e).toString(16),t=parseInt(t).toString(16),a=parseInt(a).toString(16),1===e.length&&(e="0"+e),1===t.length&&(t="0"+t),1===a.length&&(a="0"+a),"#"+e+t+a}},u=a(48),d=a(615)("./light."+c.a.getLanguage()).default;function p(e){var t=e.stateKey,a=e.stateVal,o=Object(r.useState)(a),s=Object(n.a)(o,2),c=s[0],l=s[1];Object(r.useEffect)((function(){return l(a)}),[a]);var d,p={};"rgb"===t&&c?p={Red:(d=c.split(","))[0],Green:d[1],Blue:d[2]}:"hsv"===t&&c&&(p={Hue:(d=c.split(","))[0],Saturation:d[1],Brightness:d[2]});var m=u.default.components.Label,g=[];for(var f in p)g.push(i.a.createElement(m,{key:f,label:f+" "+p[f],br:!0}));return g}function m(e){var t=e.device,a=e.stateKey,c=e.stateVal,d=e.title,p=c||"#ffffff";"rgb"===a?p=l.RgbToHex(p):"hsv"===a&&(p=l.RgbToHex(l.HsvToRgb(p)));var m=Object(r.useState)(p),g=Object(n.a)(m,2),f=g[0],h=g[1];Object(r.useEffect)((function(){"rgb"===a?h(l.RgbToHex(c)):"hsv"===a?h(l.RgbToHex(l.HsvToRgb(c))):"hex"===a&&h(c)}),[a,c]);var b=u.default.components.Component;return i.a.createElement(b,{title:d||a},i.a.createElement(o.SketchPicker,{color:f,width:"100%",onChangeComplete:function(e,n){e=e[a],"rgb"===a?e=[e.r,e.g,e.b].join(","):"hsv"===a&&(e=[e.h,e.s,e.v].join(",")),t.setDeviceState(a,e).catch((function(e){return s.a._("Function (light)",e.message,"error",!0,e.stack)}))}}))}c.a.setTranslation(c.a.getLanguage(),d);var g={icon:{default:"palette"},unit:" \xb0"};t.default={description:{en:"lights",de:"Lichter"},configurations:{power:{icon:{true:"lightbulb-on",false:"lightbulb-off-outline"}},level:{value:function(e){return e>0&&e<=1?100*e:e},unit:function(e){return e>0?" %":null},icon:{default:"lightbulb-on",0:"lightbulb-off-outline"},state:{0:c.a.t("light#level#off")}},colorTemperature:{icon:{default:"thermometer"},unit:" \xb0K"},hue:g,rgb:g,hsv:g,hex:g},components:{level:u.default.components.LevelComponent,colorTemperature:function(e){var t=u.default.components.LevelComponent;return i.a.createElement(t,Object.assign({min:2e3,max:6500,step:10},e))},rgb:m,hsv:m,hex:m,hue:function(e){var t=e.device,a=e.stateKey,c=e.stateVal,d=e.title,p=Object(r.useState)(c),m=Object(n.a)(p,2),g=m[0],f=m[1];Object(r.useEffect)((function(){return f(c)}),[c]);var h=u.default.components.Component,b=l.RgbToHex(l.HsvToRgb(g));return i.a.createElement(h,{title:d||a},i.a.createElement(o.HuePicker,{color:b,width:"100%",onChangeComplete:function(e,n){f(Math.round(e.hsl.h)),t.setDeviceState(a,Math.round(e.hsl.h)).catch((function(e){return s.a._("Function (light)",e.message,"error",!0,e.stack)}))}}))}},actions:{power:u.default.actions.PowerAction,level:function(e){var t=e.device,a=e.stateKey,o=e.stateVal,c=function(e){m(e.target.checked),t.setDeviceState(a,e.target.checked?t.getOption("defaultValue")||100:0).catch((function(e){return s.a._("Function (light)",e.message,"error",!0,e.stack)}))},l=Object(r.useState)(o>0),d=Object(n.a)(l,2),p=d[0],m=d[1];return Object(r.useEffect)((function(){return m(o>0)}),[o]),t.parent&&t.parent.states.power?i.a.createElement(u.default.actions.Action,Object.assign({},e,{stateVal:p,onChange:c})):i.a.createElement(u.default.actions.PowerAction,Object.assign({},e,{stateVal:p,onChange:c}))},rgb:p,hsv:p,hex:p},styles:{_any:{state:{0:{color:"#999"}}}}}},240:function(e,t,a){"use strict";a.r(t);var n=a(16),r=a(0),i=a.n(r),o=a(2),s=a(195),c=a.n(s),l=a(140),u=a(637),d=a(350),p=a.n(d),m=a(186),g=a.n(m),f=a(184),h=a.n(f),b=a(13),v=a(5),y=a(48);var k=a(139),E=Object(k.a)((function(e){return{value:function(e){return{float:"left",lineHeight:"32px",marginRight:"10px"}},borderLeftTransparent:{borderLeftColor:"transparent !important"},borderLeftColor:{borderLeftColor:c()(e.palette.primary.main).alpha(.5).rgb().toString()+"!important"},borderRightTransparent:{borderRightColor:"transparent !important"},borderRightColor:{borderRightColor:c()(e.palette.primary.main).alpha(.5).rgb().toString()+"!important"},borderRightColorSecondary:{borderRightColor:c()(e.palette.secondary.main).alpha(.5).rgb().toString()+"!important"}}})),S=a(515)("./blind."+v.a.getLanguage()).default;v.a.setTranslation(v.a.getLanguage(),S);t.default={description:{en:"Shutters and Blinds",de:"Rollos oder Jalousien"},configurations:{level:{value:function(e){return Math.round(e)},icon:{default:"window-shutter-open",">90":"window-shutter-open","<=90":"window-shutter"}},level2:{value:function(e){return Math.round(e)},unit:" %",icon:{default:"window-shutter-open",">90":"window-shutter-open","<=90":"window-shutter"}},activity:{val:function(e,t,a){return function(e,t){if("HomeMatic"===e)switch(t){case 1:case 2:t=!0;break;case 3:t=!1;break;default:t=null}else if("Shelly"===e)switch(t){case"open":case"close":t=!0;break;case"stop":t=!1;break;default:t=null}return t}(a.options.manufacturer,e)},icon:{true:"pan-vertical",false:"dots-vertical"},state:{true:v.a.t("blind#activity#true"),false:v.a.t("blind#activity#false")}}},components:{level2:y.default.components.LevelComponent},actions:{level:function(e){var t=e.device,a=e.state,s=e.stateKey,c=E(),d=Object(r.useState)(a.value),m=Object(n.a)(d,2),f=m[0],v=m[1];Object(r.useEffect)((function(){return v(a.value)}),[a]);var y=function(e,t,a){"activity"===e&&j(t.val)},k=Object(r.useState)(!1),S=Object(n.a)(k,2),O=S[0],j=S[1];return Object(r.useEffect)((function(){return t.states.activity&&t.states.activity.state&&(t.states.activity.state="string"===typeof t.states.activity.state?{node:t.states.activity.state}:t.states.activity.state,t.requestDeviceState("activity",!0).catch((function(e){return b.a._("Function (blind)",e.message,"error",!0,e.stack)})),t.listen(y)),function(){return t.unlisten(y)}}),[t,a]),i.a.createElement(i.a.Fragment,null,i.a.createElement("div",{className:c.value},f+a.unit),i.a.createElement(u.a,{size:"small"},i.a.createElement(l.a,{color:"primary",className:Object(o.a)(null!==O&&(O?c.borderRightTransparent:c.borderRightColor)),onClick:function(){v(100),j(!0),t.setDeviceState(s,100).catch((function(e){return b.a._("Function (blind)",e.message,"error",!0,e.stack)}))}},i.a.createElement(p.a,null)),null!==O&&i.a.createElement(l.a,{color:"secondary",className:Object(o.a)(O?c.borderRightColorSecondary:[c.borderLeftTransparent,c.borderRightTransparent]),onClick:function(){j(!1),t.setDeviceState("activity",!0).catch((function(e){return b.a._("Function (blind)",e.message,"error",!0,e.stack)}))},disabled:!O},i.a.createElement(h.a,null)),i.a.createElement(l.a,{color:"primary",className:Object(o.a)(null!==O&&(O?c.borderLeftTransparent:c.borderLeftColor)),onClick:function(){v(0),j(!0),t.setDeviceState(s,0).catch((function(e){return b.a._("Function (blind)",e.message,"error",!0,e.stack)}))}},i.a.createElement(g.a,null))))}},styles:{}}},241:function(e,t,a){"use strict";a.r(t),a.d(t,"default",(function(){return D})),a.d(t,"ModuleDescription",(function(){return I})),a.d(t,"ModuleScreenshots",(function(){return L})),a.d(t,"ModuleConfig",(function(){return A}));var n=a(0),r=a.n(n),i=a(9),o=a(14),s=a(19),c=a(20),l=a(23),u=a(24),d=a(2),p=a(13),m=a(121),g=a(368),f=a(707),h=a(344),b=a.n(h),v=a(343),y=a.n(v),k=a(184),E=a.n(k),S=a(345),O=a.n(S),j=a(346),C=a.n(j),w=a(6),x=function(e){Object(u.a)(a,e);var t=Object(l.a)(a);function a(e){var n;return Object(s.a)(this,a),(n=t.call(this,e)).stateChange=function(e,t){"duration"===e&&t&&-1===t.val.indexOf(":")&&(t.val=m.a.timeToHoursMinutesSeconds(t.val)),"isRunning"===e&&t&&"string"===typeof t.val&&(t.val=t.val.indexOf("play")>-1),n.setState(Object(o.a)({},e,t),(function(){n.progress()}))},n.state={},n}return Object(c.a)(a,[{key:"componentDidMount",value:function(){for(var e in this.props.device.states)this.props.device.requestDeviceState(e,!0).catch((function(e){return p.a._("Modules (MultimediaItem)",e.message,"error",!0,e.stack)}));this.props.device.listen(this.stateChange)}},{key:"componentWillUnmount",value:function(){this.props.device.unlisten(this.stateChange)}},{key:"progress",value:function(){var e=this;clearTimeout(this.progressTimeout),this.state.isRunning&&!0===this.state.isRunning.val&&this.state.progress&&this.state.progress.val&&this.state.duration&&this.state.duration.val&&(this.progressTimeout=setTimeout((function(){e.setState((function(e){return{progress:Object(i.a)({},e.progress,{val:m.a.timeToSeconds(e.progress.val)+1})}}),(function(){return e.progress()}))}),1e3))}},{key:"openDialog",value:function(){this.props.openDialog(this.props.device)}},{key:"setDeviceState",value:function(e,t){this.props.device.setDeviceState(e,t).catch((function(e){return p.a._("Modules (MultimediaItem)",e.message,"error",!0,e.stack)}))}},{key:"render",value:function(){var e=this.props,t=e.classes,a=e.noHeader,n=e.index,i=e.device,o={},s={};this.state.background&&""!==this.state.background.val&&(o.backgroundImage="url("+((i.options.backgroundUrlPrepend||"")+this.state.background.val)+")"),this.state.duration&&this.state.duration.val&&(s.width=(this.state.progress&&this.state.progress.val||0)+"px");var c=this.state.isRunning&&this.state.isRunning.val?[r.a.createElement(y.a,{onClick:this.setDeviceState.bind(this,"pause",!0)}),r.a.createElement(E.a,null)]:[r.a.createElement(b.a,{onClick:this.setDeviceState.bind(this,"play",!0)})];return r.a.createElement(r.a.Fragment,null,n>0&&r.a.createElement(g.a,{className:t.divider}),r.a.createElement("div",{className:Object(d.a)(t.container,a&&t.noHeader)},r.a.createElement("div",{className:Object(d.a)(this.state.background&&""!==this.state.background.val?t.image:t.noImage),style:o,onClick:this.openDialog.bind(this)},r.a.createElement("div",{className:t.information},r.a.createElement("p",{className:t.informationLeft},this.state.grandParent&&this.state.grandParent.val&&[this.state.grandParent.val,r.a.createElement("br",{key:"br-"+i.id})],this.state.parent&&this.state.parent.val&&this.state.parent.val+" - ",this.state.title&&this.state.title.val),r.a.createElement("p",{className:t.informationRight},this.state.progress&&m.a.timeToHoursMinutesSeconds(this.state.progress.val)," / ",this.state.duration&&this.state.duration.val))),r.a.createElement("div",{className:t.length,style:{}},r.a.createElement("div",{className:t.lengthBar,style:s})),r.a.createElement("div",{className:t.controls},r.a.createElement("div",{className:Object(d.a)(t.controlsBox,t.controlsBoxLeft)}),r.a.createElement("div",{className:Object(d.a)(t.controlsBox,t.controlsBoxCenter)},r.a.createElement(f.a,{className:t.controlButton,size:"small",color:"secondary"},r.a.createElement(O.a,{onClick:this.setDeviceState.bind(this,"previous",!0)})),c.map((function(e,a){return r.a.createElement(f.a,{key:"icon-"+a,className:t.controlButton,size:"large",color:"primary"},e)})),r.a.createElement(f.a,{className:t.controlButton,size:"small",color:"secondary"},r.a.createElement(C.a,{onClick:this.setDeviceState.bind(this,"next",!0)}))),r.a.createElement("div",{className:Object(d.a)(t.controlsBox,t.controlsBoxRight)}))))}}]),a}(r.a.Component),T=Object(w.a)((function(e){return{divider:{margin:"15px -16px"},container:{margin:e.spacing(0,-2)},noHeader:{marginTop:e.spacing(-4)},image:{height:"200px",display:"flex",alignItems:"flex-end",backgroundPosition:"center",cursor:"pointer"},noImage:{backgroundColor:e.palette.primary.main,display:"flex",cursor:"pointer"},information:{backgroundColor:e.palette.primary.main+"66",color:"#fff",padding:"10px",margin:0,width:"100%",minHeight:"45px"},informationLeft:{width:"80%",float:"left",margin:0},informationRight:{width:"19%",float:"right",margin:0,textAlign:"right"},length:{backgroundColor:e.palette.primary.main,width:"100%",height:"7px"},lengthBar:{backgroundColor:e.palette.secondary.main,height:"100%"},controls:{display:"flex",alignItems:"stretch"},controlsBox:{display:"flex",justifyContent:"center",alignItems:"center",paddingTop:"30px"},controlsBoxLeft:{flex:1,flexDirection:"column",alignItems:"baseline"},controlsBoxCenter:{flex:3},controlsBoxRight:{flex:1,justifyContent:"end"},controlButton:{margin:"0 5px"},controlButtonSmall:{margin:"0 10px",fontSize:"1.2rem",height:"32px",width:"32px"}}}))(x);function D(e){var t=e.devices,a=e.settings;return t.map((function(t,n){return r.a.createElement(T,Object.assign({key:"MultimediaItem-"+t.id},e,{index:n,noHeader:0===n&&null===a.icon&&null===a.title,device:t}))}))}var I="Zeigt ein Multimedia-Player an (z. B. Spotify)",L=[],A=[]},25:function(e,t,a){"use strict";a.d(t,"a",(function(){return c}));var n=a(9),r=a(19),i=a(20),o=a(13),s=a(5),c=function(){function e(){Object(r.a)(this,e)}return Object(i.a)(e,null,[{key:"applySettings",value:function(){if(e.settings.language?(s.a.setLanguage(e.settings.language),s.a.loadTranslation(e.settings.language)):s.a.loadTranslation(),e.settings.pageTitle&&(document.title=e.settings.pageTitle),e.settings.pageFavicon&&"data:"===e.settings.pageFavicon.substr(0,5)&&(document.getElementById("favicon").href=e.settings.pageFavicon),e.settings.translations){var t=e.settings.translations;for(var a in t)s.a.setTranslation(a,t[a])}}},{key:"getSetting",value:function(t){return e.settings[t]||""}},{key:"getSettings",value:function(){return e.settings||{}}},{key:"setSetting",value:function(t,a){return!(!t||void 0===a)&&(e.settings[t]=a,!0)}},{key:"setSettings",value:function(t){return!!t&&(e.settings=Object(n.a)({},e.settings,{},t||{}),o.a._("Settings",["Set settings",e.settings]),!0)}}]),e}();c.settings={}},300:function(e,t,a){"use strict";a.r(t);var n=a(240);a.d(t,"default",(function(){return n.default}))},303:function(e,t,a){"use strict";a.r(t),t.default={"blind#activity":"Aktivit\xe4t","blind#level":"Behangh\xf6he","blind#level2":"Lamellenposition","blind#activity#true":"in Bewegung","blind#activity#false":"keine"}},304:function(e,t,a){"use strict";a.r(t),t.default={"blind#activity":"Activity","blind#level":"Level","blind#level2":"Lamella","blind#activity#true":"moving","blind#activity#false":"none"}},305:function(e,t,a){"use strict";a.r(t),t.default={"door#bell":"Klingel","door#lock":"Schlo\xdf","door#open":"T\xfcr","door#open#true":"offen","door#open#false":"geschlossen"}},306:function(e,t,a){"use strict";a.r(t),t.default={"door#bell":"Bell","door#lock":"Lock","door#open":"Door","door#open#true":"open","door#open#false":"closed"}},307:function(e,t,a){"use strict";a.r(t),t.default={"heating#boost":"Boost","heating#humidity":"Luftfeuchtigkeit","heating#setTemperature":"eingestellte Temperatur","heating#temperature":"Temperatur"}},308:function(e,t,a){"use strict";a.r(t),t.default={"heating#boost":"Boost","heating#humidity":"Humidity","heating#setTemperature":"Set Temperature","heating#temperature":"Temperature"}},32:function(e,t,a){"use strict";a.d(t,"a",(function(){return r})),a.d(t,"b",(function(){return i})),a.d(t,"c",(function(){return o}));var n=a(71),r={MODULE:"StateList",NODE_SETTINGS:"jarvis.0.settings",NODE_DEVICES:"jarvis.0.devices",NODE_NOTIFICATIONS:"jarvis.0.notifications"},i={divider:{description:{en:"",de:"F\xfcgt einen Trennstrich vor (before) oder nach (after) dem Ger\xe4t ein (abh\xe4ngig des Moduls)."},type:"SelectInput",options:["before","after"]},group:{description:{en:"",de:"Mit der Gruppe k\xf6nnen mehrere Ger\xe4te zusammengefasst / gruppiert angezeigt werden."}},hiddenStates:{description:{en:"",de:"Liste mit States, die von jarvis zwar geladen, aber nicht angezeigt werden."}},ignoredStates:{description:{en:"",de:"Liste mit States, die von jarvis ignoriert (und damit nicht geladen) werden."}},label:{description:{en:"",de:"alternativer Bezeichner des Ger\xe4ts als Anzeige-Name"}},primaryStateKey:{description:{en:"",de:"Dieses Feld dient dem \xdcberschreiben des prim\xe4ren States mit einem anderen State."}},secondaryStateKey:{description:{en:"",de:"Dieses Feld dient dem \xdcberschreiben des sekund\xe4ren States mit einem anderen State."}},sort:{description:{en:"",de:"Sortierung des Ger\xe4ts bezogen auf die Position innerhalb der Gruppe (group)."},type:"NumberInput"},icon:{description:{en:"",de:""}},state:{description:{en:"",de:""}},style:{description:{en:"",de:""}},unit:{description:{en:"",de:""}},value:{description:{en:"",de:""}}},o={tabsHideLabels:{label:{de:"Tab Labels nicht anzeigen (nur Icons)",en:"Hide tab labels (only show icons)"},info:{de:"Zeigt nur die Icons im Tab und nicht die Labels",en:"Show only icons within a tab, not the label"},type:"SwitchInput",val:!1},tabIcon:{label:{de:"Tab Icon",en:"Tab Icon"},type:"TextInput"},tabLabel:{label:{de:"Tab Label",en:"Tab Label"},type:"TextInput"},tabFullscreen:{label:{de:"Tab als Vollbild",en:"Tab Fullscreen"},info:{de:"Vollbild kann nur bei einem Tab mit nur einer Spalte und nur einer eingestellten Gruppe aktiviert werden.",en:"Fullscreen can only be enabled on a tab setup with only a single column and only a single group"},type:"SwitchInput",val:!1},deviceKey:{label:{de:"Identifikation",en:"Identifier of key"},type:"TextInput",val:""},groupName:{label:{de:"Name der Gruppe",en:"Name of group"},type:"TextInput",val:""},groupModule:{label:{de:"Module zur Anzeige der Gruppe",en:"Module to display group"},type:"TextInputAutoComplete",val:"StateList",autoCompleteValues:Object.keys(n.c)},groupTitle:{label:{de:"Titel der Widget-Box",en:"Title of the widget-box"},type:"TextInput",val:""},groupIcon:{label:{de:"Icon der Widget-Box",en:"Icon of the widget-box"},type:"TextInput",val:"home"},groupIconStyle:{label:{de:"Icon style der Widget-Box",en:"Icon style of the widget-box"},type:"TextInput",val:'backgroundColor: theme.palette.primary.main, color: "#fff", fontSize: "24px"'}};t.d={pageSettings:{label:"Page Settings",settings:{language:{label:{de:"Spracheinstellung von jarvis",en:"Language settings for jarvis"},type:"SelectInput",options:{de:"Deutsch",en:"English"}},pageFavicon:{label:{de:"Favicon im Browser",en:"Browser favicon"},info:{de:"base64 Wert der Grafik",en:"base64 value of the image"},type:"TextInput"},pageTitle:{label:{de:"Titel im Browser",en:"Browser title"},type:"TextInput",placeholder:"jarvis - just another remarkable vis"}}},themeSettings:{label:"Theme Settings",settings:{themeColorPrimary:{label:{de:"Prim\xe4re Farbe des Themes",en:"Primary theme color"},info:{de:"Der Farbwert kann ein Wert aus der Farbpalette in der Form `HUE|SHADE` (z. B. `blue|700`) sein. Alternativ kann ein Hex oder RGB angegeben werden."},link:"https://material-ui.com/customization/color/#color-palette",type:"TextInput",placeholder:"blue|700"},themeColorSecondary:{label:{de:"Sekund\xe4re Farbe des Themes",en:"Secondary theme color"},info:{de:"Der Farbwert kann ein Wert aus der Farbpalette in der Form `HUE|SHADE` (z. B. `pink`) sein. Alternativ kann ein Hex oder RGB angegeben werden."},link:"https://material-ui.com/customization/color/#color-palette",type:"TextInput",placeholder:"pink"},defaultBoxIcon:{label:{de:"Standard Widget-Box Icon",en:"Default widget-box icon"},type:"TextInput",placeholder:"home"}}}}},323:function(e,t,a){"use strict";a.r(t),t.default={"light#colorTemperature":"Farbtemperatur","light#hex":"Farbe (Hex)","light#hsv":"Farbraum Hue-Saturation-Value (HSV)","light#hue":"Farbe (Hue)","light#level":"Helligkeit","light#power":"Licht","light#rgb":"Farbraum Rot-Gr\xfcn-Blau (RGB)","light#level#off":"ausgeschaltet"}},324:function(e,t,a){"use strict";a.r(t),t.default={"light#colorTemperature":"Color Temperature","light#hex":"Color (Hex)","light#hsv":"Colorspace Hue-Saturation-Value (HSV)","light#hue":"Color (Hue)","light#level":"Brightness","light#power":"Power","light#rgb":"Colorspace Red-Green-Blue (RGB)","light#level#off":"off"}},325:function(e,t,a){"use strict";a.r(t),t.default={"location#position":"Position","location#presence":"Anwesenheit","location#users":"Benutzer","location#presence#true":"anwesend","location#presence#false":"abwesend","location#users#empty":"niemand anwesend"}},326:function(e,t,a){"use strict";a.r(t),t.default={"location#position":"Position","location#presence":"Presence","location#users":"Users","location#presence#true":"present","location#presence#false":"absent","location#users#empty":"nobody present"}},327:function(e,t,a){"use strict";a.r(t),t.default={"user#location":"Standort","user#position":"Position"}},328:function(e,t,a){"use strict";a.r(t),t.default={"user#location":"Location","user#position":"Position"}},329:function(e,t,a){"use strict";a.r(t),t.default={"window#open":"Fenster","window#open#true":"offen","window#open#false":"geschlossen"}},330:function(e,t,a){"use strict";a.r(t),t.default={"window#open":"Window","window#open#true":"open","window#open#false":"closed"}},392:function(e,t,a){e.exports=a(623)},397:function(e,t,a){},426:function(e,t){},429:function(e,t,a){var n={"./de.js":430,"./en.js":431};function r(e){var t=i(e);return a(t)}function i(e){if(!a.o(n,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return n[e]}r.keys=function(){return Object.keys(n)},r.resolve=i,e.exports=r,r.id=429},430:function(e,t,a){"use strict";a.r(t),t.default={"Retrieving settings":"Einstellungen werden geladen","last update":"letzte Aktualisierung","Updates available":"Aktualisierung verf\xfcgbar",on:"an",off:"aus",user:"User",users:"Users",door:"T\xfcr",window:"Fenster",open:"offen",closed:"geschlossen","turn on":"anschalten",power:"Ger\xe4te Status",trigger:"Ger\xe4te Status",brightness:"Helligkeit",wind:"Wind",battery:"Batterie","%DateTime":"%DateTime Uhr",running:"Ger\xe4t l\xe4uft",consumption:"Verbrauch"}},431:function(e,t,a){"use strict";a.r(t),t.default={}},48:function(e,t,a){"use strict";a.r(t);var n=a(31),r=a(16),i=a(14),o=a(9),s=a(0),c=a.n(s),l=a(2),u=a(13),d=a(5),p=a(650),m=a(639),g=a(140),f=a(139),h=a(6),b=Object(f.a)((function(e){return{component:{padding:e.spacing(2,0,2,0)},sliderMarkLabel:Object(i.a)({},e.breakpoints.down("md"),{display:"none","&:nth-child(5)":{display:"block"},"&:nth-child(15)":{display:"block"},"&:nth-child(25)":{display:"block"}})}})),v=Object(h.a)((function(e){return{primaryAction:function(e){return Object(o.a)({},e.styles)},secondaryAction:function(e){return Object(o.a)({color:"#999",fontSize:"14px"},e.styles)}}}))((function(e){var t=e.classes,a=e.device,n=e.state,r=e.stateKey;return c.a.createElement("span",{className:Object(l.a)(r===a.primaryStateKey&&t.primaryAction||r===a.secondaryStateKey&&t.secondaryAction)},n&&n.value," ",n&&n.unit)}));function y(e){var t=e.device,a=e.stateKey,n=e.stateVal,i=e.onChange,o=Object(s.useState)(n),l=Object(r.a)(o,2),d=l[0],p=l[1];return Object(s.useEffect)((function(){return p(n)}),[n]),c.a.createElement(m.a,{checked:d,onChange:i||function(e){p(e.target.checked),t.setDeviceState(a,e.target.checked).catch((function(e){return u.a._("Function (defaults)",e.message,"error",!0,e.stack)}))},value:!0!==d,color:"primary"})}function k(e){var t=e.device,a=e.stateKey,n=e.stateVal;if(!0===n||n>0)return c.a.createElement(v,Object.assign({},e,{onChange:null}));return c.a.createElement(g.a,{variant:"outlined",color:"primary",size:"small",startIcon:c.a.createElement("span",{className:"mdi mdi-power"}),onClick:function(){t.setDeviceState(a,!0).catch((function(e){return u.a._("Function (defaults)",e.message,"error",!0,e.stack)}))}},d.a.t("turn on"))}function E(e){var t=e.label,a=e.br||!1;return c.a.createElement(c.a.Fragment,null,t,a&&c.a.createElement("br",null))}function S(e){var t=e.title,a=e.children,n=b();return c.a.createElement(c.a.Fragment,null,c.a.createElement(E,{label:t}),c.a.createElement("div",{className:n.component},a))}function O(e){var t=e.device,a=e.stateKey,i=e.stateVal,o=e.title,l=e.min,d=e.max,m=e.step,g=e.markSteps,f=b(),h=Object(s.useState)(i),v=Object(r.a)(h,2),y=v[0],k=v[1];Object(s.useEffect)((function(){return k(i)}),[i]),m=m||1;var E=((d=d||100)-(l=l||0))/((g=g||11)-1)||10;return c.a.createElement(S,{title:o||a},c.a.createElement(p.a,{classes:{markLabel:f.sliderMarkLabel},onChange:function(e,t){return k(t)},onChangeCommitted:function(e,n){k(n),t.setDeviceState(a,n).catch((function(e){return u.a._("Function (defaults)",e.message,"error",!0,e.stack)}))},value:y,valueLabelDisplay:"auto",marks:Object(n.a)(Array(g).keys()).map((function(e){return{value:l+e*E,label:l+e*E}})),min:l,max:d,step:m}))}t.default={description:{en:"Default settings for all functions",de:"Standard-Einstellungen f\xfcr alle Gewerke"},configurations:{_any:{value:function(e){return e.toString()}},battery:{unit:" %",icon:"battery-medium"},door:{icon:{true:"door-open",false:"door-closed"},state:{true:"open",false:"closed"}},humidity:{unit:" %",icon:"water-percent"},level:{unit:" %"},position:{icon:"map-marker"},power:{state:{true:"on",false:"off"},icon:"power"},temperature:{unit:" \xb0C",icon:"thermometer"},trigger:{state:{true:"on",false:"off"},icon:"power"},wind:{unit:" km/h",icon:"weather-windy"}},components:{Label:E,Component:S,LevelComponent:O,level:O},actions:{Action:v,PowerAction:y,TriggerAction:k,power:y,trigger:k},styles:{_any:{state:{true:{color:"#090",fontWeight:"bold"},false:{color:"#999"}}}}}},5:function(e,t,a){"use strict";a.d(t,"b",(function(){return s})),a.d(t,"a",(function(){return c}));var n=a(9),r=a(19),i=a(20),o=a(13),s={de:a(644).a},c=function(){function e(){Object(r.a)(this,e)}return Object(i.a)(e,null,[{key:"setLanguage",value:function(t){return!!t&&(e.language=t,o.a._("i18n","Set language to "+t+"."),!0)}},{key:"loadTranslations",value:function(t){return!!t&&((t=Array.isArray(t)?t:[t]).forEach((function(t){return e.loadTranslation(t)})),!0)}},{key:"loadTranslation",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:e.getLanguage();if(t){var n;try{n=a(429)("./"+t+".js").default,e.setTranslation(t,n)}catch(r){return o.a._("i18n",r.message,"error",!1,r.stack),!1}return!0}return!1}},{key:"setTranslation",value:function(t,a){return!(!t||!a)&&(e.translations[t]=Object(n.a)({},e.translations[t]||{},{},a),o.a._("i18n","Set translations for language "+t+".","debug"),!0)}},{key:"getLanguage",value:function(){var t=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return e.language.substr(0,t?5:2)}},{key:"t",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:e.getLanguage();if("object"===typeof t&&void 0!==t[r])t=t[r];else if(t=t.toString(),e.translations[r]){if(t.indexOf("#")>-1){for(var i=t.split("#");i.length>0&&!e.translations[r][i.join("#")];)i.shift();t=i.join("#")}e.translations[r][t]?t=e.translations[r][t]:o.a._("i18n",'Word "'+t+'" not found in language '+r+"!","debug",!1)}else o.a._("i18n","Language "+r+" not loaded for word "+t+"!","error");for(var s in n)t=t.replace(RegExp("%"+s+"%","g"),n[s]);return a.ucFirst&&(t=t.charAt(0).toUpperCase()+t.slice(1)),t}}]),e}();c.translations={},c.language=navigator.language||navigator.userLanguage||"en-EN"},515:function(e,t,a){var n={"./blind.de":303,"./blind.de.js":303,"./blind.en":304,"./blind.en.js":304,"./blind.js":240};function r(e){var t=i(e);return a(t)}function i(e){if(!a.o(n,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return n[e]}r.keys=function(){return Object.keys(n)},r.resolve=i,e.exports=r,r.id=515},516:function(e,t,a){"use strict";a.r(t);var n=a(230);a.d(t,"default",(function(){return n.default}))},517:function(e,t,a){var n={"./door.de":305,"./door.de.js":305,"./door.en":306,"./door.en.js":306,"./door.js":230};function r(e){var t=i(e);return a(t)}function i(e){if(!a.o(n,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return n[e]}r.keys=function(){return Object.keys(n)},r.resolve=i,e.exports=r,r.id=517},518:function(e,t,a){"use strict";a.r(t);var n=a(231);a.d(t,"default",(function(){return n.default}))},519:function(e,t,a){var n={"./heating.de":307,"./heating.de.js":307,"./heating.en":308,"./heating.en.js":308,"./heating.js":231};function r(e){var t=i(e);return a(t)}function i(e){if(!a.o(n,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return n[e]}r.keys=function(){return Object.keys(n)},r.resolve=i,e.exports=r,r.id=519},520:function(e,t,a){"use strict";a.r(t);var n=a(239);a.d(t,"default",(function(){return n.default}))},58:function(e,t,a){"use strict";a.d(t,"a",(function(){return m}));var n=a(19),r=a(20),i=a(9),o=a(23),s=a(24),c=a(165),l=a.n(c),u=a(331),d=a.n(u),p=function(e){Object(s.a)(a,e);var t=Object(o.a)(a);function a(){var e,r=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};return Object(n.a)(this,a),(e=t.call(this)).socket=d()(r,Object(i.a)({timeout:1e4},o,{query:"ws=true"})),e.statesSubscribes={},e.socket.on("connect",(function(){return e.emit("connect")})),e.socket.on("reconnect",(function(t){return e.emit("reconnect",t)})),e.socket.on("reconnect_error",(function(t){return e.emit("error",{type:"reconnect",event:"reconnect_error",message:t.message})})),e.socket.on("reconnect_failed",(function(){return e.emit("error",{type:"reconnect",event:"reconnect_failed",message:"Reconnection failed!"})})),e.socket.on("disconnect",(function(t){return e.emit("disconnect",t)})),e.socket.on("connect_error",(function(t){return e.emit("error",{type:"connect",event:"connect_error",message:t.message})})),e.socket.on("connect_timeout",(function(){return e.emit("error",{type:"connect",event:"connect_timeout",message:"Connect ran into timeout!"})})),e.socket.on("error",(function(t){return e.emit("error",{type:"error",event:"error",message:t.message})})),e.socket.on("stateChange",(function(t,a){return setTimeout((function(){return e.stateChange(t,a)}),0)})),e}return Object(r.a)(a,[{key:"_getPatternFromId",value:function(e){var t=e.replace(/\./g,"\\.").replace(/\*/g,".*").replace(/\(/g,"\\(").replace(/\)/g,"\\)").replace(/\+/g,"\\+").replace(/\[/g,"\\[");return-1===t.indexOf("*")&&(t+="$"),t}},{key:"subscribeStates",value:function(e,t){var a=this;(e=Array.isArray(e)?e:[e]).forEach((function(e){return a.subscribeState(e,t)}))}},{key:"subscribeState",value:function(e,t){if(this.statesSubscribes[e])-1===this.statesSubscribes[e].cbs.indexOf(t)&&this.statesSubscribes[e].cbs.push(t);else{var a=this._getPatternFromId(e);this.statesSubscribes[e]={reg:new RegExp(a),cbs:[t]},this.socket.connected&&this.socket.emit("subscribe",e)}}},{key:"stateChange",value:function(e,t){for(var a in e=e?e.replace(/[\s'"]/g,"_"):"",this.statesSubscribes)this.statesSubscribes.hasOwnProperty(a)&&this.statesSubscribes[a].reg.test(e)&&this.statesSubscribes[a].cbs.forEach((function(a){return a(e,t)}))}},{key:"getAdapterInstances",value:function(e,t){return"function"===typeof e&&(t=e,e=null),this.getObjectView("system","instance",{startkey:"system.adapter."+(e?e+".":""),endkey:"system.adapter."+(e?e+".999":"zzz")},t)}},{key:"getObject",value:function(e,t){var a=this;if(!t)return new Promise((function(t,n){return a.getObject(e,(function(e,a){return e?n(e):t(a)}))}));this.socket.emit("getObject",e,t)}},{key:"getObjectView",value:function(e,t,a,n){var r=this;if(!n)return new Promise((function(n,i){return r.getObjectView(e,t,a,(function(e){return e?i(e):n()}))}));this.socket.emit("getObjectView",e,t,a,n)}},{key:"getRemoteResource",value:function(e,t){var a=this;if(!t)return new Promise((function(t,n){return a.getRemoteResource(e,(function(e,a){return e?n(e):t(a)}))}));this.socket.emit("httpGet",e,t)}},{key:"getState",value:function(e,t){var a=this;if(!t)return new Promise((function(t,n){return a.getState(e,(function(e,a){return e?n(e):t(a)}))}));this.socket.emit("getState",e,t)}},{key:"getStates",value:function(e,t){var a=this;if(!t)return new Promise((function(t,n){return a.getStates(e,(function(e,a){return e?n(e):t(a)}))}));this.socket.emit("getStates",e,t)}},{key:"getStateHistory",value:function(e,t,a){var n=this;if("function"===typeof t&&(a=t,t={}),!a)return new Promise((function(a,r){return n.getStateHistory(e,t,(function(e,t){return e?r(e):a(t)}))}));this.socket.emit("getHistory",e,t,a)}},{key:"setState",value:function(e,t,a){var n=this;if(!a)return new Promise((function(a,r){return n.setState(e,t,(function(e){return e?r(e):a()}))}));this.socket.emit("setState",e,t,a)}},{key:"unsubscribeStates",value:function(e){var t=this;(e=Array.isArray(e)?e:[e]).forEach((function(e){return t.unsubscribeState(e)}))}},{key:"unsubscribeState",value:function(e){this.statesSubscribes[e]&&this.socket.connected&&(this.socket.emit("unsubscribe",e),delete this.statesSubscribes[e])}}]),a}(l.a),m=function(){function e(){Object(n.a)(this,e)}return Object(r.a)(e,null,[{key:"connect",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return t&&(e.setUrl=t),e.connection=new p(e.url),a&&(e.setListeners=a),e.connection}},{key:"getConnection",get:function(){return e.connection||null}},{key:"getUrl",get:function(){return e.url}},{key:"reconnect",get:function(){return e.connect}},{key:"setListener",set:function(t){e.connection.on(t.event,t.callback)}},{key:"setListeners",set:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];return!(!t||!Array.isArray(t))&&(t.forEach((function(t){return e.setListener=t})),!0)}},{key:"setUrl",set:function(t){e.url=t}}]),e}();m.url=window.location.hostname,m.connection=null},615:function(e,t,a){var n={"./light.de":323,"./light.de.js":323,"./light.en":324,"./light.en.js":324,"./light.js":239};function r(e){var t=i(e);return a(t)}function i(e){if(!a.o(n,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return n[e]}r.keys=function(){return Object.keys(n)},r.resolve=i,e.exports=r,r.id=615},616:function(e,t,a){"use strict";a.r(t);var n=a(236);a.d(t,"default",(function(){return n.default}))},617:function(e,t,a){var n={"./location.de":325,"./location.de.js":325,"./location.en":326,"./location.en.js":326,"./location.js":236};function r(e){var t=i(e);return a(t)}function i(e){if(!a.o(n,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return n[e]}r.keys=function(){return Object.keys(n)},r.resolve=i,e.exports=r,r.id=617},618:function(e,t,a){"use strict";a.r(t);var n=a(237);a.d(t,"default",(function(){return n.default}))},619:function(e,t,a){var n={"./user.de":327,"./user.de.js":327,"./user.en":328,"./user.en.js":328,"./user.js":237};function r(e){var t=i(e);return a(t)}function i(e){if(!a.o(n,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return n[e]}r.keys=function(){return Object.keys(n)},r.resolve=i,e.exports=r,r.id=619},620:function(e,t,a){"use strict";a.r(t);var n=a(238);a.d(t,"default",(function(){return n.default}))},621:function(e,t,a){var n={"./window.de":329,"./window.de.js":329,"./window.en":330,"./window.en.js":330,"./window.js":238};function r(e){var t=i(e);return a(t)}function i(e){if(!a.o(n,e)){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}return n[e]}r.keys=function(){return Object.keys(n)},r.resolve=i,e.exports=r,r.id=621},622:function(e,t,a){"use strict";a.r(t);var n=a(19),r=a(20),i=a(23),o=a(24),s=a(0),c=a.n(s),l=a(13),u=a(5),d=a(140),p=a(87),m=a(95),g=a(189),f=a(6),h=[{id:"time",disablePadding:!1,type:"Date",label:u.a.t("Time"),noWrap:!0},{id:"module",disablePadding:!1,label:u.a.t("Module"),noWrap:!0},{id:"criticality",disablePadding:!1,label:u.a.t("Criticality"),noWrap:!0},{id:"message",disablePadding:!1,label:u.a.t("Message")},{id:"stack",disablePadding:!1,type:"Object",label:u.a.t("Stack Trace")}],b={criticality:{debug:{color:"rgba(0, 0, 0, 0.4)",backgroundColor:"rgba(0, 0, 0, 0.1)"},info:{color:"rgb(13, 60, 97)",backgroundColor:"rgb(232, 244, 253)"},warn:{color:"rgb(102, 60, 0)",backgroundColor:"rgb(255, 244, 229)"},error:{color:"rgb(97, 26, 21)",backgroundColor:"rgb(253, 236, 234)"},success:{color:"rgb(30, 70, 32)",backgroundColor:"rgb(237, 247, 237)"}}},v=function(e){Object(o.a)(a,e);var t=Object(i.a)(a);function a(){return Object(n.a)(this,a),t.apply(this,arguments)}return Object(r.a)(a,[{key:"render",value:function(){var e=this,t=this.props.classes,a=l.a.getLog();return c.a.createElement(m.a,{classes:{CustomDialog:t.pinToTop},fullWidth:!0,maxWidth:"xl",open:"logs"===this.props.page,onClose:function(){return e.props.navigate("home")},header:"Logs",actions:c.a.createElement(d.a,{autoFocus:!0,onClick:function(){return e.props.navigate("home")},color:"primary"},u.a.t("Close"))},c.a.createElement(p.a,{className:t.paper},c.a.createElement(g.a,{headCells:h,rows:a,rowStyles:b,selectable:!1,sortable:!0,toolbar:!1,stickyHeader:!0})))}}]),a}(c.a.Component);t.default=Object(f.a)((function(e){return{pinToTop:{position:"absolute",top:0}}}))(v)},623:function(e,t,a){"use strict";a.r(t);var n=a(0),r=a.n(n),i=a(26),o=a.n(i),s=(a(397),a(31)),c=a(9),l=a(19),u=a(20),d=a(23),p=a(24),m=a(14),g=a(32),f=a(367),h=a(138),b=a(49),v=a(724),y=a(13),k=a(139),E=Object(k.a)((function(e){return{gridContainer:Object(m.a)({paddingLeft:e.spacing(1)},e.breakpoints.down("md"),{paddingLeft:e.spacing(.4)})}}));function S(e){for(var t=e.contents,a=void 0===t?{}:t,n=E(),i=Object.keys(a).length,o=[],s=1;s<=i;s++)a[s]?o.push(r.a.createElement(f.a,{key:s,item:!0,xs:12,sm:6,md:6,lg:Math.round(12/i),xl:Math.round(12/i)},a[s])):y.a._("GridContainer","No content for column #"+s+"!","warn");return r.a.createElement(f.a,{container:!0,spacing:0,className:n.gridContainer},o)}var O=a(118),j=a(2),C=a(734),w=a(710),x=a(141),T=a(116),D=a.n(T),I=a(347),L=a.n(I),A=a(348),N=a.n(A),_=a(349),M=a.n(_),R=a(136),P=a.n(R),F=a(194),z=a(709),B=Object(k.a)((function(e){return{success:{backgroundColor:F.a[600]},error:{backgroundColor:e.palette.error.dark},info:{backgroundColor:e.palette.primary.main},warning:{backgroundColor:z.a[700]},icon:{fontSize:20},iconVariant:{opacity:.9,marginRight:e.spacing(1)},message:{display:"flex",alignItems:"center"}}})),H={success:L.a,warning:N.a,error:M.a,info:P.a};function U(e){var t=B(),a=e.className,n=e.open,i=e.autoHideDuration,o=e.message,s=e.closeButton,c=e.onClose,l=e.variant,u=Object(O.a)(e,["className","open","autoHideDuration","message","closeButton","onClose","variant"]),d=H[l];return n=n||!0,i=i||null,r.a.createElement(C.a,{anchorOrigin:{vertical:"bottom",horizontal:"center"},open:n,autoHideDuration:i,onClose:c},r.a.createElement(w.a,Object.assign({className:Object(j.a)(t[l],a),message:r.a.createElement("span",{id:"client-snackbar",className:t.message},r.a.createElement(d,{className:Object(j.a)(t.icon,t.iconVariant)}),o),action:s&&[r.a.createElement(x.a,{key:"close","aria-label":"close",color:"inherit",onClick:c},r.a.createElement(D.a,{className:t.icon}))]},u)))}var K="https://192.168.178.29:8082",G=a(5),W=a(58),V=a(25),J=a(46),q=a(76),Z=a(165),Y=a.n(Z),$={defaults:a(48).default,blind:a(300).default,door:a(516).default,heating:a(518).default,jalousie:a(300).default,light:a(520).default,location:a(616).default,user:a(618).default,window:a(620).default},Q=function(e){Object(p.a)(a,e);var t=Object(d.a)(a);function a(e){var n;if(Object(l.a)(this,a),(n=t.call(this)).function=e,!n.function)throw new Error("No function given!");return n.functionId=n.function.toLowerCase(),n.defaults=$.defaults.configurations,n.configurations=$[n.functionId]&&$[n.functionId].configurations||{},n.defaultStyles=$.defaults.styles,n.styles=$[n.functionId]&&$[n.functionId].styles||{},n.components=Object(c.a)({},$.defaults.components,{},$[n.functionId]&&$[n.functionId].components||{}),n.actions=Object(c.a)({},$.defaults.actions,{},$[n.functionId]&&$[n.functionId].actions||{}),n}return Object(u.a)(a,[{key:"_applyFunction",value:function(e,t){return this._isFunction(e)?e(t):t}},{key:"_getValueFromSettings",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";for(var a in e)if(void 0!==e[a])return e[a];return t}},{key:"_isFunction",value:function(e){return e&&"function"===typeof e}},{key:"_isValue",value:function(e){return void 0!==e}},{key:"_setObjectStructure",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:void 0;return e&&"object"==typeof e?"object"!=typeof e||e.default||(e.default=t):e={default:e||t},e}}]),a}(Y.a),X={"hm-rpc":"HomeMatic",shelly:"Shelly",sonoff:"Sonoff"},ee=a(726),te=function(e){Object(p.a)(a,e);var t=Object(d.a)(a);function a(e,n){var r;Object(l.a)(this,a);try{r=t.call(this,e.function)}catch(i){throw new Error("No function given for device "+e.name+"!")}if(r.id=e.id,r.name=e.name,r.room=e.room||null,r.states=e.states,r.options=e.options,r.attributes=e.attributes||{},r.socket=n,!r.options||"object"!==typeof r.options||0===Object.keys(r.options).length||void 0===r.options.group)throw new Error("Device"+(e.id||e.name?" "+(e.name||e.id):"")+" not defined for jarvis!");if(!r.states||"object"!==typeof r.states||0===Object.keys(r.states).length)throw new Error("Insufficent properties provided"+(e.id||e.name?" for device "+(e.name||e.id):"")+" (no states defined)!");if(!(r.id&&r.name&&r.function))throw new Error("Insufficent properties provided"+(e.id||e.name?" for device "+(e.name||e.id):"")+" (no id, name or function defined)!");if(!r.socket)throw new Error("No socket given!");return r.children=e.children||[],r.parent=e.parent||null,r._setProperties(),r.stateSubscriptions=[],r.on("error",(function(e){return y.a._("Device",["Device error occured!",e.message],"error",!1,e.stack)})),r}return Object(u.a)(a,[{key:"_getStateFromKey",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"state";if(e&&"object"===typeof e)return e;var a=this.states[e||this.primaryStateKey];return void 0===a?G.a.t("State does not exist in device %device%").replace(/%device%/g,this.name)+"!":("string"===typeof a?(this.states[e||this.primaryStateKey]=Object(m.a)({},t,{node:a}),a=this.states[e||this.primaryStateKey]):"string"===typeof a[t]&&(this.states[e||this.primaryStateKey][t]={node:a[t]},a=this.states[e||this.primaryStateKey]),a&&a[t]?"object"!=typeof a[t]||a[t].node?a:G.a.t("No %stateType% specified for device %device%").replace(/%device%/g,this.name).replace(/%stateType%/g,t)+"!":G.a.t("Incorrect or non-defined state key for device %device%").replace(/%device%/g,this.name).replace(/%stateType%/g,t)+"!")}},{key:"_getConfigurationSetting",value:function(e,t,n,r){var i=this;if(this[e][t]){if("object"===typeof this[e][t][n]){var o=Object.keys(this[e][t][n]);if(o.toString().indexOf("<")>-1||o.toString().indexOf(">")>-1||o.toString().indexOf("!=")>-1){var s=this[e][t][n].default;return o.forEach((function(a){var c=a.replace("<=","").replace("<","").replace(">=","").replace(">","").replace("!=","");(a.indexOf("<=")>-1&&r<=c||a.indexOf("<")>-1&&r<c||a.indexOf(">=")>-1&&r>=c||a.indexOf(">")>-1&&r>c||o.toString().indexOf("!=")>-1&&r!=c)&&(s=i[e][t][n][a])})),s}return Object(q.a)(Object(J.a)(a.prototype),"_isValue",this).call(this,this[e][t][n][r])?this[e][t][n][r]:this[e][t][n].default}if(Object(q.a)(Object(J.a)(a.prototype),"_isFunction",this).call(this,this[e][t][n]))return this[e][t][n](r,t,this);if("string"===typeof this[e][t][n])return this[e][t][n]}else if(this[e]._any){if("object"===typeof this[e]._any[n])return Object(q.a)(Object(J.a)(a.prototype),"_isValue",this).call(this,this[e]._any[n][r])?this[e]._any[n][r]:this[e]._any[n].default;if(Object(q.a)(Object(J.a)(a.prototype),"_isFunction",this).call(this,this[e]._any[n]))return this[e]._any[n](r,t,this)}}},{key:"_getUserSetting",value:function(e,t,n){var r=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=this.options;if(r){i=this.options.styles;var o=t;t=e,e=o}if(i[t]&&i[t][e])return"object"===typeof i[t][e]?Object(q.a)(Object(J.a)(a.prototype),"_isValue",this).call(this,i[t][e][n])?i[t][e][n]:i[t][e].default:Object(q.a)(Object(J.a)(a.prototype),"_isFunction",this).call(this,i[t][e])?i[t][e](n,e,this):i[t][e]}},{key:"_setProperties",value:function(){var e=this,t=Object.keys(this.states);this.options.ignoredStates&&(this.options.ignoredStates=Array.isArray(this.options.ignoredStates)?this.options.ignoredStates:[this.options.ignoredStates],this.options.ignoredStates.forEach((function(t){e.states[t]&&delete e.states[t]}))),this.options.hiddenStates=this.options.hiddenStates?Array.isArray(this.options.hiddenStates)?this.options.hiddenStates:[this.options.hiddenStates]:[],this.primaryStateKey=this.options.primary||t[0],this.secondaryStateKey=this.options.secondary||null,["value","state","unit","icon","styles"].forEach((function(n){var r=e.options[n]&&Object.keys(e.options[n])[0];e.options[n]=e.options[n]?Object(q.a)(Object(J.a)(a.prototype),"_setObjectStructure",e).call(e,r&&t.indexOf(r)>-1?e.options[n]:Object(m.a)({},e.primaryStateKey,e.options[n])):{}})),this.states[this.primaryStateKey]=this._getStateFromKey(this.primaryStateKey),this.options.manufacturer=this.primaryStateKey&&X[this.states[this.primaryStateKey].state.node.substr(0,this.states[this.primaryStateKey].state.node.indexOf("."))]||"",this.options.group=Array.isArray(this.options.group)?this.options.group:[this.options.group],this.options.sort=this.options.sort||999,this.options.label=this.options.label&&"string"===typeof this.options.label&&this.options.label.replace(/%name%/g,this.name)||this.options.label||this.name,this.options.divider=this.options.divider||""}},{key:"_updateDeviceState",value:function(e,t){var n=this;t.timeChanged=Object(ee.a)(new Date(t.lc-5e3),{locale:G.b[G.a.getLanguage()],includeSeconds:!0,addSuffix:!0}),t.unit="";var r=this._getConfigurationSetting("configurations",e,"val",t.val);return t.val=void 0!==r?r:t.val,t.value=t.val,[{value:"value"},{state:"value"},{unit:"unit"}].forEach((function(r){var i=Object.keys(r).toString(),o=Object.values(r).toString(),s={};s.options=n._getUserSetting(e,i,t.val),["configurations","defaults"].forEach((function(a){s[a]=n._getConfigurationSetting(a,e,i,t.val)})),t[o]=Object(q.a)(Object(J.a)(a.prototype),"_getValueFromSettings",n).call(n,s,t[o])})),t.value=G.a.t(t.value),t}},{key:"get",value:function(e){return this[e]||null}},{key:"getAction",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]&&arguments[1];e=e||this.primaryStateKey;var a=this.states[e].state.value,n=a?a.val:null,i=!t&&this.actions[e]||this.actions.Action;return r.a.createElement(i,{key:"action-"+this.id+"-"+e,device:this,state:a,stateKey:e,stateVal:n,styles:this.getStyle("state",e,n)})}},{key:"getComponent",value:function(e){e=e||this.primaryStateKey;var t=this.states[e].state.value,a=t?t.val:null,n=this.components[e];return n&&r.a.createElement(n,{title:this.states[e].label||G.a.t(this.function+"#"+e),device:this,stateKey:e,stateVal:a})||this.states[e].label||G.a.t(this.function+"#"+e)}},{key:"getDeviceState",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,a=this.states[e||this.primaryStateKey],n=null;return a&&a.state&&null!==t&&void 0!==a.state.value&&void 0!==a.state.value[t]?n=a.state.value[t]:a&&a.state&&null===t&&void 0!==a.state.value&&(n=a.state.value),n}},{key:"getIcon",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0;e=e||this.primaryStateKey;var i={};return i.options=this._getUserSetting(e,"icon",n),["configurations","defaults"].forEach((function(a){i[a]=t._getConfigurationSetting(a,e,"icon",n)})),Object(q.a)(Object(J.a)(a.prototype),"_getValueFromSettings",this).call(this,i,r)}},{key:"getOption",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"default";return this.options[e]&&(this.options[e][t]||this.options[e].default)||this.options[e]||null}},{key:"getStyle",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"default",i={};return n=n||this.primaryStateKey,i.options=this._getUserSetting(n,e,r,!0),["styles","defaultStyles"].forEach((function(a){i[a]=t._getConfigurationSetting(a,n,e,r)})),Object(q.a)(Object(J.a)(a.prototype),"_getValueFromSettings",this).call(this,i,{})}},{key:"listen",value:function(e,t){"function"===typeof e&&(t=e,e="stateChange"),this.listeners(e).findIndex((function(e){return e.toString()==t.toString()}))>-1||this.on(e,t)}},{key:"requestDeviceStates",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0],t=[];for(var a in this.states)t.push(this.requestDeviceState(a,e));return t}},{key:"requestDeviceState",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,a=arguments.length>1&&void 0!==arguments[1]&&arguments[1];t=t||this.primaryStateKey;var n=this._getStateFromKey(t);return"string"==typeof n?Promise.reject({success:!1,stateKey:t,error:n}):new Promise((function(r,i){void 0!==n.state.value&&e.stateSubscriptions.indexOf(t)>-1?(e.emit("stateChange",t,n.state.value,e),r({success:!0,stateKey:t,cached:!0})):e.socket.getState(n.state.node).then((function(o){null===o&&i({success:!1,stateKey:t,error:"State "+n.state.node+" not found!"}),n.state.value=e._updateDeviceState(t,o),e.emit("stateChange",t,n.state.value,e),a&&e.subscribeDeviceState(t).catch((function(e){return i(e)})),r({success:!0,stateKey:t,cached:!1})})).catch((function(e){return i({success:!1,stateKey:t,error:e})}))}))}},{key:"requestDeviceStateHistory",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,a=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};t=t||this.primaryStateKey;var r=this._getStateFromKey(t);return"string"==typeof r?Promise.reject({success:!1,stateKey:t,error:r}):new Promise((function(i,o){r.state.historyCache=r.state.historyCache||{},n.start&&n.end&&n.step&&void 0!==r.state.historyCache[n.start+"#"+n.end+"#"+n.step]?(e.emit("historyChange",t,r.state.historyCache[n.start+"#"+n.end+"#"+n.step],r.state,e),i({success:!0,stateKey:t,cached:!0})):e.socket.getStateHistory(r.state.node,n).then((function(s){null===s&&o({success:!1,stateKey:t,error:"State "+r.state.node+" not found!"}),n.start&&n.end&&n.step&&(r.state.historyCache[n.start+"#"+n.end+"#"+n.step]=s),r.state.history=s,e.emit("historyChange",t,r.state.history,r.state,e),a&&e.subscribeDeviceState(t).catch((function(e){return o(e)})),i({success:!0,stateKey:t,cached:!1})})).catch((function(e){return o({success:!1,stateKey:t,error:e})}))}))}},{key:"setAction",value:function(e){this.options.action=e}},{key:"setComponent",value:function(e){this.options.label=e}},{key:"setDeviceState",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null,a=arguments.length>1?arguments[1]:void 0;t=t||this.primaryStateKey;var n=this._getStateFromKey(t,"action");return"string"==typeof n?Promise.reject({success:!1,stateKey:t,error:n}):new Promise((function(r,i){e.socket.setState(n.action.node,a).then((function(a){-1===e.stateSubscriptions.indexOf(t)&&e.requestDeviceState(t),r({success:!0,stateKey:t})})).catch((function(e){return i({success:!1,stateKey:t,error:e})}))}))}},{key:"subscribeDeviceState",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:null;t=t||this.primaryStateKey;var a=this._getStateFromKey(t);return"string"==typeof a?Promise.reject({success:!1,stateKey:t,error:a}):-1===this.stateSubscriptions.indexOf(t)?(this.stateSubscriptions.push(t),new Promise((function(n){e.socket.subscribeState(a.state.node,(function(n,r,i){r&&r.val!==e.getDeviceState(t,"val")&&(a.state.value=e._updateDeviceState(t,r),e.emit("stateChange",t,a.state.value,e),e.children.forEach((function(n){return n.emit("stateChange",t,a.state.value,e)})))})),n({success:!0,stateKey:t})}))):Promise.reject({success:!1,stateKey:t,error:"State already subscribed!"})}},{key:"unlisten",value:function(e,t){"function"===typeof e&&(t=e,e="stateChange"),this.off(e,t)}}]),a}(Q),ae=a(53),ne=a(729),re=a(351),ie={configuration:a(625).default,logs:a(622).default},oe=a(16),se=a(720),ce=a(704),le=a(100),ue=a(359),de=a.n(ue),pe=Object(k.a)((function(e){return{appBar:{flexGrow:1,boxShadow:"none",transform:"none"},toolbar:{backgroundColor:e.palette.primary.main},menuButton:{marginRight:e.spacing(2)},title:{flexGrow:1},icon:Object(c.a)({},e.components.icon,{color:"#fff",paddingRight:"6px",width:"1em",height:"1em",display:"inline-block",fontSize:"1.5rem",transition:"fill 200ms cubic-bezier(0.4, 0, 0.2, 1) 0ms",flexShrink:0,userSelect:"none"})}}));function me(e){var t=pe(),a=e.children,n=e.title,i=e.connectionStatus,o=(e.toggleDrawer,e.navigate),s=(e.notifications,n.indexOf("|")>-1?n.split("|"):[null,n]),c=Object(oe.a)(s,2),l=c[0],u=c[1],d=i?"lan-connect":"pending"===i?"lan-pending":"lan-disconnect",p=i?G.a.t("Connected to ioBroker"):"pending"===i?G.a.t("Not connected to ioBroker! Reconnecting.."):G.a.t("Not connected to ioBroker! Connection failed!");return r.a.createElement(se.a,{id:"appBar",position:"static",className:t.appBar},r.a.createElement(ce.a,{className:t.toolbar},r.a.createElement(b.a,{variant:"h6",className:t.title},l&&r.a.createElement("span",{className:Object(j.a)(t.icon,"mdi mdi-"+l)}),"null"!==u&&u),r.a.createElement(ne.a,{smDown:!0},r.a.createElement(x.a,{color:"inherit",onClick:function(){return o("logs")}},r.a.createElement(le.a,{title:G.a.t(p)},r.a.createElement("span",{className:"mdi mdi-"+d}))),r.a.createElement(x.a,{color:"inherit",onClick:function(){return o("configuration")}},r.a.createElement(de.a,null)))),a)}function ge(){var e=window;return{width:e.innerWidth,height:e.innerHeight}}var fe=a(727),he=a(703),be=a(643),ve=Object(k.a)((function(e){return{icon:Object(c.a)({},e.components.icon,{color:"#fff",paddingBottom:"6px",width:"1em",height:"1em",display:"inline-block",fontSize:"1.5rem",transition:"fill 200ms cubic-bezier(0.4, 0, 0.2, 1) 0ms",flexShrink:0,userSelect:"none"}),tabs:{backgroundColor:e.palette.primary.main,paddingLeft:e.spacing(),color:"#fff",width:"calc(100% - "+e.spacing()+"px)",zIndex:101,borderBottom:"5px solid #eee"},fixed:{position:"fixed",top:0},indicator:{backgroundColor:"#fff"},fullscreen:{marginLeft:-e.spacing(),marginTop:"-5px"},grid:{paddingBottom:"30px"}}}));function ye(e){var t=e.tabs,a=e.selectedTab,i=e.onSelectTab,o=ve(),s=Object(n.useRef)({}),c=Object(n.useState)(a),l=Object(oe.a)(c,2),u=l[0],d=l[1],p=Object(n.useState)(!1),m=Object(oe.a)(p,2),g=m[0],f=m[1],h=Object(n.useCallback)((function(){var e=s.current.top+s.current.height-53,t=window.scrollY>=e;f((function(a){return a!==t?(document.getElementById("root").style.paddingTop=t?e-5-8+"px":0,t):a}))}),[s]);Object(n.useEffect)((function(){d(a)}),[a]),Object(n.useEffect)((function(){return s.current={top:document.getElementById("tabBar").offsetTop,height:document.getElementById("tabBar").offsetHeight},window.addEventListener("scroll",h),function(){return window.removeEventListener("scroll",h,0)}}),[h]);var b=t.map((function(e,t){var a=e.indexOf("|")>-1?e.split("|"):[null,e],n=Object(oe.a)(a,2),i=n[0],s=n[1];return r.a.createElement(he.a,{key:"tab"+t,icon:r.a.createElement("span",{className:Object(j.a)(o.icon,"mdi mdi-"+i)}),label:g||!0===V.a.getSetting("tabsHideLabels")||"null"===s?null:s})}));return r.a.createElement(fe.a,{id:"tabBar",value:u,onChange:function(e,t){i(t),d(t)},variant:"scrollable",classes:{root:Object(j.a)(o.tabs,g&&o.fixed),indicator:o.indicator}},b)}function ke(e){var t=e.children,a=e.selectedTab,i=e.renderedTab,o=e.fullscreen,s=ve(),c=function(){var e=Object(n.useState)(ge()),t=Object(oe.a)(e,2),a=t[0],r=t[1];return Object(n.useEffect)((function(){function e(){r(ge())}return window.addEventListener("resize",e),function(){return window.removeEventListener("resize",e)}}),[]),a}().height,l=Object(n.useState)(c),u=Object(oe.a)(l,2),d=u[0],p=u[1],m=Object(n.useRef)({});Object(n.useEffect)((function(){m.current=document.getElementById("appBar").offsetHeight,p(c-m.current+5)}),[c]);var g=Object(n.useState)(null),f=Object(oe.a)(g,2),h=f[0],b=f[1];return Object(n.useEffect)((function(){setTimeout((function(){return b(a!==i)}),10)}),[a,i]),r.a.createElement(be.a,{role:"tabpanel",hidden:h,id:"tabpanel-"+i,className:Object(j.a)(o?s.fullscreen:s.grid),style:{height:d+"px"}},t)}var Ee=a(736),Se=a(6),Oe=function(e){Object(p.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).state={},n}return Object(u.a)(a,[{key:"render",value:function(){var e=this,t=this.props,a=t.classes;t.notifications;return r.a.createElement(Ee.a,{anchor:"right",open:this.props.open,onClose:function(){return e.props.toggleDrawer("notificationDrawer",!1)},classes:{paper:a.drawer}})}}]),a}(r.a.Component),je=Object(Se.a)((function(e){return{drawer:{width:400}}}))(Oe),Ce=a(140),we=a(633),xe=a(640),Te=a(635),De=a(636),Ie=a(71),Le=Object(Se.a)((function(e){return{root:{margin:0,padding:e.spacing(2)},closeButton:{position:"absolute",right:e.spacing(1),top:e.spacing(1),color:e.palette.grey[500]}}}))((function(e){var t=e.children,a=e.classes,n=e.onClose,i=Object(O.a)(e,["children","classes","onClose"]);return r.a.createElement(xe.a,Object.assign({disableTypography:!0,className:a.root},i),r.a.createElement(b.a,{variant:"h6"},t),n?r.a.createElement(x.a,{"aria-label":"close",className:a.closeButton,onClick:n},r.a.createElement(D.a,null)):null)})),Ae=Object(Se.a)((function(e){return{root:Object(m.a)({padding:e.spacing(2)},e.breakpoints.down("md"),{paddingLeft:e.spacing(1)})}}))(Te.a),Ne=Object(Se.a)((function(e){return{root:{margin:0,padding:e.spacing(1)}}}))(De.a),_e=function(e){Object(p.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).state={children:[]},n}return Object(u.a)(a,[{key:"componentDidUpdate",value:function(e,t){var a=this,n=this.props.contents&&this.props.contents.device;if(n.id&&this.props.contents.ts!==e.contents.ts)if(n.children.length)y.a._("Popup",["Got "+Object.keys(n.children).length+" states for device "+n.name+" from cache.",n.children]),this.setState({children:n.children},(function(){return a.forceUpdate()}));else{var r=[],i=[];for(var o in n.states)if(!(void 0===n.states[o].state||n.options.hiddenStates.indexOf(o)>-1)){var s=new te({parent:n,id:n.id+"#"+o,name:n.name,function:n.function,states:n.states,options:Object(c.a)({},n.options,{primary:o,secondary:null,divider:0!==i.length,subgroup:null,subtitle:null})},W.a.getConnection,window.language);n.children.push(s),r.push(s.requestDeviceState(null,!0)),i.push(s)}Promise.allSettled(r).then((function(){y.a._("Popup",["Retrieved "+Object.keys(i).length+" states for device "+n.name+".",i]),a.setState({children:i},(function(){return a.forceUpdate()}))}))}else n.id||this.props.contents.ts===e.contents.ts||this.setState({children:[]},(function(){return a.forceUpdate()}))}},{key:"shouldComponentUpdate",value:function(e,t){return!this.props.contents||this.props.contents.ts!==e.contents.ts}},{key:"render",value:function(){var e=this.props,t=e.open,a=e.closeDialog,n=e.contents.device;return r.a.createElement(we.a,{onClose:a,open:t||!1,maxWidth:"md",fullWidth:!0},r.a.createElement(Le,{onClose:a},n.name),r.a.createElement(Ae,{dividers:!0,style:{padding:0}},r.a.createElement(Ie.c.StateList,{openDialog:null,devices:this.state.children,component:!0,action:!0})),r.a.createElement(Ne,null,r.a.createElement(Ce.a,{autoFocus:!0,onClick:a,color:"primary"},"Close")))}}]),a}(r.a.Component),Me=a(721),Re=a(722),Pe=a(723),Fe=a(248),ze=Object(k.a)((function(e){return{card:Object(m.a)({margin:e.spacing(1,1,0,0)},e.breakpoints.down("md"),{margin:e.spacing(.4,.4,0,0)}),cardHeaderNoContents:{padding:e.spacing()},cardAvatar:function(t){return Object(c.a)({backgroundColor:e.palette.primary.main,color:"#fff",fontSize:"24px"},t)},cardContent:Object(m.a)({padding:e.spacing(0,2)},e.breakpoints.down("md"),{padding:e.spacing(0)})}}));function Be(e){var t=e.title,a=e.icon,n=e.iconStyle,i=ze(n);return r.a.createElement(Me.a,{className:i.card},r.a.createElement(Re.a,{avatar:null!==a&&r.a.createElement(Fe.a,{variant:"rounded",classes:{root:i.cardAvatar}},r.a.createElement("span",{className:"mdi mdi-"+(a||V.a.getSetting("defaultBoxIcon")||"home")})),title:t&&r.a.createElement(b.a,{variant:"h5",component:"h2"},t)}),r.a.createElement(Pe.a,{className:i.cardContent},e.children))}var He=function(e,t){var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};if(!t&&!0!==Ie.b[t.settings.component].noDevicesAllowed)return y.a._("Jarvis","Group "+e+" defined in columns but not assigned to any devices!","error"),null;var n=Ie.c[t.settings.component||"StateList"];return void 0===n?(y.a._("Jarvis",'Undefined component "'+t.settings.component+'" used!',"error"),null):r.a.createElement(n,{key:"Tag"+e,devices:t.devices,openDialog:a.action?a.action:null,settings:Object(c.a)({},t.settings,{},a)})},Ue=function(e,t){for(var a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n={},i=Object.keys(e).length,o=1;o<=i;o++){var s=e[o];if(n[o]=n[o]||[],s&&Object.keys(s).length)for(var c in s){var l=t[c]||{};l.devices=l.devices||[],l.settings=s[c]||{};var u=Ie.b[l.settings.component]||{},d=He(c,l,a);(l.devices.length>0||u.noDevicesAllowed)&&d&&n[o].push(r.a.createElement(Be,{key:"Box-"+c,title:null===l.settings.title?null:l.settings.title||l.name||u.title,icon:null===l.settings.icon?null:l.settings.icon||u.icon,iconStyle:l.settings.iconStyle},d))}else n[o].push(null)}return n},Ke=function(e){Object(p.a)(a,e);var t=Object(d.a)(a);function a(e){var n;return Object(l.a)(this,a),(n=t.call(this,e)).state={connectionStatus:n.props.connectionStatus||!1,selectedTab:0,tabTitle:"",page:"home",notificationDrawer:!1,notifications:[],notificationsUnread:0,devices:n.props.devices,dialog:!1,dialogContents:{ts:0,device:{}}},n.closeDialog=n.closeDialog.bind(Object(ae.a)(n)),n.openDialog=n.openDialog.bind(Object(ae.a)(n)),n.onSelectTab=n.onSelectTab.bind(Object(ae.a)(n)),n.toggleDrawer=n.toggleDrawer.bind(Object(ae.a)(n)),n.navigate=n.navigate.bind(Object(ae.a)(n)),n.socket=W.a.getConnection,n.gridContents={},n.layout=V.a.getSetting("layout"),n.tabs=Object.keys(n.layout),n.tabsEnabled=Number.isNaN(parseInt(n.tabs[0])),n.state.tabTitle=n.tabs[n.state.selectedTab],n.tabsEnabled||(n.layout={Home:n.layout},n.tabs.push("1")),n.widgetProps={},n}return Object(u.a)(a,[{key:"componentDidMount",value:function(){var e=this;0!==Object.keys(this.props.devices).length&&""!==V.a.getSetting("layout")||this.navigate("configuration"),this.socket.getState("jarvis.0.notifications").then((function(t){t=t&&t.val&&JSON.parse(t.val)||[],e.setState({notificationsUnread:t.filter((function(e){return!e.unread||!1!==e.unread})).length,notifications:t})})),this.socket.subscribeState(g.a.NODE_NOTIFICATIONS,(function(e){return y.a._("Jarvis",e)}))}},{key:"getTabPanels",value:function(){var e=0,t=[];for(var a in this.layout){var n=this.layout[a],i=Object.keys(n)[0],o=Number.isNaN(parseInt(i));!this.gridContents[a]&&o?this.gridContents[a]=He(n,Object(c.a)({},this.props.groups[i],{settings:n[i]||{}}),Object(c.a)({action:this.openDialog},this.widgetProps)):this.gridContents[a]||(this.gridContents[a]=r.a.createElement(S,{contents:Ue(n,this.props.groups,Object(c.a)({action:this.openDialog},this.widgetProps))}));var s=r.a.createElement(ke,{key:"tabPanel-"+e,renderedTab:e,selectedTab:this.state.selectedTab,fullscreen:o},this.gridContents[a]);t.push(s),e++}return t}},{key:"closeDialog",value:function(){this.setState({dialog:!1,dialogContents:{ts:Date.now(),device:{}}})}},{key:"openDialog",value:function(e){this.setState({dialog:!0,dialogContents:{ts:Date.now(),device:e}})}},{key:"onSelectTab",value:function(e){this.setState({selectedTab:e,tabTitle:this.tabs[e]})}},{key:"toggleDrawer",value:function(e,t){this.setState(Object(m.a)({},e,t))}},{key:"navigate",value:function(e){this.setState({page:e})}},{key:"render",value:function(){var e=ie[this.state.page]||null,t=this.getTabPanels();return r.a.createElement(r.a.Fragment,null,r.a.createElement(me,{title:V.a.topBarTitle||this.tabsEnabled&&this.state.tabTitle||V.a.getSetting("pageTitle")||"jarvis - Smart Home Overview",connectionStatus:this.state.connectionStatus,toggleDrawer:this.toggleDrawer,navigate:this.navigate,notifications:this.state.notificationsUnread},this.tabsEnabled&&r.a.createElement(ye,{tabs:this.tabs,selectedTab:this.state.selectedTab,onSelectTab:this.onSelectTab})),r.a.createElement(je,{open:this.state.notificationDrawer,toggleDrawer:this.toggleDrawer,notifications:this.state.notifications}),e&&r.a.createElement(e,{page:this.state.page,navigate:this.navigate,devices:this.state.devices}),r.a.createElement(_e,{open:this.state.dialog,contents:this.state.dialogContents,closeDialog:this.closeDialog}),r.a.createElement(ne.a,{smUp:!0},r.a.createElement(re.SwipeableViews,{views:t,selectedView:this.state.selectedTab,onSwipe:this.onSelectTab})),r.a.createElement(ne.a,{smDown:!0},t))}}]),a}(r.a.Component),Ge=a(725),We=function(e){Object(p.a)(n,e);var t=Object(d.a)(n);function n(e){var a;return Object(l.a)(this,n),(a=t.call(this,e)).state={loaded:[],connected:!1,error:!1,errorMessage:"",theme:null},a}return Object(u.a)(n,[{key:"componentDidMount",value:function(){var e=this,t=function(t){y.a._("App",G.a.t("Socket disconnected")+"!","error",!0,t.stack),e.setState({connected:!1,error:!0,errorMessage:G.a.t("string"===typeof t?t:t.message)+".."}),setTimeout((function e(){y.a._("App",G.a.t("Attempting reconnect")+".."),W.a.reconnect(),setTimeout((function(){return e}),15e3)}),1e4)},n="3000"===window.location.port?K:window.location.protocol+"//"+window.location.hostname+(window.location.port?":"+window.location.port:""),r=[{event:"connect",callback:function(){return e.setState({connected:!0,error:!1,errorMessage:""})}},{event:"reconnect",callback:function(){return e.setState({connected:"pending",error:!1,errorMessage:""})}},{event:"disconnect",callback:t},{event:"error",callback:t}];y.a._("App",G.a.t("Connect to")+" "+n+"..."),this.socket=W.a.connect(n,r),this.settings={},this.socket.getState(g.a.NODE_SETTINGS).then((function(t){try{t&&(e.settings=Object(c.a)({},e.settings,{},JSON.parse(t.val||{})),V.a.setSettings(e.settings),V.a.applySettings()),void 0===Object.keys(e.settings.layout)[0]?e.setState((function(e){return{loaded:[].concat(Object(s.a)(e.loaded),["settings"]),error:!0,errorMessage:G.a.t("Please create the configuration. See documentation.")}})):e.setState((function(e){return{loaded:[].concat(Object(s.a)(e.loaded),["settings"])}}))}catch(a){y.a._("App","GET_SETTINGS: "+a.message,"error"),e.setState((function(e){return{loaded:[].concat(Object(s.a)(e.loaded),["settings"]),error:!0,errorMessage:G.a.t("Error parsing settings")+"!"}}))}})).catch((function(t){y.a._("App","GET_SETTINGS: "+t.message,"error"),e.setState((function(e){return{loaded:[].concat(Object(s.a)(e.loaded),["settings"]),error:!0,errorMessage:"string"===typeof t?G.a.t(t):G.a.t(t.message)}}))})),this.settings.iobroker={},this.socket.getObject("system.config",(function(t,a){a&&a.common&&(e.settings.iobroker=a.common,V.a.setSettings({iobroker:e.settings.iobroker}))})),a.e(3).then(a.bind(null,758)).then((function(t){return e.setState({theme:t.default})})),this.devices={},this.groups={},this.socket.getState(g.a.NODE_DEVICES).then((function(t){try{e.devices=JSON.parse(t.val||{}),e.processDevices(e.devices).then((function(t){e.groups=t,e.setState((function(e){return{loaded:[].concat(Object(s.a)(e.loaded),["groups"])}}))}))}catch(a){y.a._("App","GET_DEVICES: "+a.message,"error"),e.setState((function(e){return{loaded:[].concat(Object(s.a)(e.loaded),["groups"]),error:!0,errorMessage:G.a.t("Error parsing devices")+"!"}}))}})).catch((function(t){y.a._("App","GET_DEVICES: "+t.message,"error"),e.setState((function(e){return{loaded:[].concat(Object(s.a)(e.loaded),["groups"]),error:!0,errorMessage:G.a.t("Socket failed while getting devices")+"!"}}))}))}},{key:"groupDevice",value:function(e,t){return t.get("options").group.forEach((function(a){var n=a.toLowerCase().replace(/ /g,"");e[n]?e[n].devices.push(t):e[n]={id:n,name:a,devices:[t]}})),e}},{key:"processDevice",value:function(e){var t=[],a=null;try{a=new te(e,this.socket),t.push(a.requestDeviceState(null,!0)),a.secondaryStateKey&&t.push(a.requestDeviceState(a.secondaryStateKey,!0))}catch(n){y.a._("App",n.message,"warn")}return new Promise((function(e){Promise.allSettled(t).then((function(t){t.forEach((function(e){"rejected"===e.status&&y.a._("App",e,"error")})),e(a)}))}))}},{key:"processDevices",value:function(e){var t=this,a=[],n={},r=0,i=0,o=function(o){r++,e[o].options=Object(c.a)({},e[o].options,{},e[o].jarvis),delete e[o].jarvis;var s=Object(c.a)({},e[o],{id:o});a.push(new Promise((function(e,a){t.processDevice(s).then((function(r){null!==r&&(i++,n=t.groupDevice(n,r),e(o)),a(o)}))})));var l=function(e){var r=s.states[e];r&&void 0!==r.jarvis&&a.push(new Promise((function(a,l){t.processDevice(Object(c.a)({},s,{id:o+"#"+e,states:Object(m.a)({},e,r),options:r.jarvis})).then((function(e){null!==e&&(i++,n=t.groupDevice(n,e),a(o)),l(o)}))})))};for(var u in s.states)l(u)};for(var s in e)o(s);return new Promise((function(e){return Promise.allSettled(a).then((function(t){for(var a in n)n[a].devices.sort((function(e,t){return e.options.sort>t.options.sort?1:t.options.sort>e.options.sort?-1:0}));y.a._("App",["Processed "+r+" devices. Added "+i+" devices in "+Object.keys(n).length+" groups.",t,n]),e(n)}))}))}},{key:"renderError",value:function(e){return e=e||this.state.errorMessage,y.a._("App",e,"error"),r.a.createElement(U,{key:"StatusSnackbar",variant:"error",closeButton:!1,message:e.toString()})}},{key:"renderLoadingProgress",value:function(){var e=this.props.classes;return r.a.createElement(f.a,{key:"loadingProcess",container:!0,spacing:0,direction:"column",justify:"center",alignItems:"center",style:{minHeight:"100vh"}},r.a.createElement(h.a,null),r.a.createElement(b.a,{className:e.loading},G.a.t("Retrieving settings"),"..."))}},{key:"renderLoadingSkeleton",value:function(e){for(var t=this.props.classes,a=e.topBar,n=e.tabBar,i=e.gridColumns,o=function(e){return r.a.createElement(v.a,{animation:"wave",variant:"rect",className:t.gridItem,height:e.height})},s={},c=1;c<=i;c++){s[c]=s[c]||[];for(var l=3*Math.random()+2,u=1;u<=l;u++)s[c].push(r.a.createElement(o,{key:c+"#"+u,height:300*Math.random()+100}))}return r.a.createElement(r.a.Fragment,null,a&&r.a.createElement(v.a,{animation:"wave",variant:"rect",height:64}),n&&r.a.createElement(v.a,{animation:"wave",variant:"rect",height:48}),r.a.createElement(S,{key:"loadingSkeleton",contents:s}))}},{key:"render",value:function(){var e=this.state.error?this.renderError():null;if(e||-1!==this.state.loaded.indexOf("settings")){if(e||-1!==this.state.loaded.indexOf("groups"))return y.a._("App",["Connected:",this.state.connected]),r.a.createElement(Ge.a,{theme:this.state.theme},e,2===this.state.loaded.length&&r.a.createElement(Ke,{key:"jarvis",connectionStatus:this.state.connected,devices:this.devices,groups:this.groups}));var t=Object.keys(this.settings.layout)[0];return void 0===t?null:this.renderLoadingSkeleton({topBar:!0,tabBar:1!==t,gridColumns:1!==t?Object.keys(this.settings.layout[t]).length:t.length})}return this.renderLoadingProgress()}}]),n}(r.a.Component),Ve=Object(Se.a)((function(e){return{loading:{margin:"10px 0 0 0",color:"#999"},gridItem:Object(m.a)({margin:e.spacing(1,1,0,0)},e.breakpoints.down("md"),{marginRight:e.spacing(.4,.4,0,0)})}}))(We);Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));o.a.render(r.a.createElement(Ve,null),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()}))},625:function(e,t,a){"use strict";a.r(t);var n=a(31),r=a(9),i=a(19),o=a(20),s=a(53),c=a(23),l=a(24),u=a(0),d=a.n(u),p=a(32),m=a(25),g=a(58),f=a(5),h=a(140),b=a(87),v=a(727),y=a(703),k=a(705),E=a(49),S=a(95),O=a(16),j=a(2),C=a(367),w=a(100),x=a(728),T=a(631),D=a(711),I=a(632),L=a(706),A=a(649),N=a(123),_=a(369),M=a(639),R=a(86),P=a.n(R),F=a(136),z=a.n(F),B=a(139),H=Object(B.a)((function(e){return{fullWidth:{width:"100%"},FormControl:{display:"inline-flex",width:250,marginLeft:e.spacing(1),marginRight:e.spacing(1),padding:"0 !important"},CustomFormControl:{},InputLabel:{width:330},Switch:{marginTop:"10px"},SwitchSmall:{marginTop:"2px"},SwitchInline:{marginLeft:"5px"},TextInput:{},CustomTextInput:{}}}));function U(e){var t=e.children,a=e.id,n=e.info,r=e.link,i=H(e),o=r?d.a.createElement(d.a.Fragment,null,d.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:r},d.a.createElement(z.a,{color:"primary"}))):d.a.createElement(z.a,{color:"primary"});return d.a.createElement(C.a,{key:"grid-"+a,className:Object(j.a)(i.FormControl,i.CustomFormControl),container:!0,item:!0},n&&d.a.createElement(C.a,{item:!0,style:{width:30}},d.a.createElement(w.a,{title:f.a.t(n)},o)),d.a.createElement(C.a,{item:!0,style:{width:n?220:"100%"}},t))}function K(e){var t=e.id,a=e.icon,n=e.label,i=e.type,o=e.val,s=e.required,c=e.error,l=e.autoFocus,p=e.shrink,m=e.autoCompleteParams,g=e.placeholder,h=e.helperText,b=e.onChange,v=e.disableUnderline,y=e.InputProps,E=H(e),S=Object(u.useState)(o||""),C=Object(O.a)(S,2),w=C[0],x=C[1],T="text";return"NumberInput"===i&&(T="number"),d.a.createElement(U,e,d.a.createElement(k.a,Object.assign({key:"TextField-"+t,classes:{root:Object(j.a)(E.fullWidth,E.TextInput,E.CustomTextInput)},label:f.a.t(n),type:T,placeholder:g||"",helperText:h||"",autoFocus:l,onChange:function(e){var a=e&&e.target&&e.target.value||"";x(a),b(t,a)},value:w,required:s,error:c,InputLabelProps:{shrink:p},InputProps:Object(r.a)({disableUnderline:v,startAdornment:a&&d.a.createElement(L.a,{position:"start"},d.a.createElement("span",{className:"mdi mdi-"+a}))},y)},m)))}var G={Button:function(e){var t=e.id,a=e.label,n=e.color,r=e.variant,i=e.disabled,o=e.startIcon,s=e.onClick,c=H(e);return d.a.createElement(U,e,d.a.createElement(h.a,{key:t,classes:{root:c.fullWidth},variant:r||"contained",color:n||"primary",disabled:i,startIcon:o||d.a.createElement(P.a,null),onClick:s},f.a.t(a)))},NumberInput:function(e){return K(Object(r.a)({},e,{type:"NumberInput"}))},SelectInput:function(e){var t=e.id,a=e.label,n=e.options,r=e.val,i=e.helperText,o=e.onChange,s=H(e),c=Object(u.useState)(r||""),l=Object(O.a)(c,2),p=l[0],m=l[1],g=Object.keys(n||{}).map((function(e){return d.a.createElement(N.a,{key:"MenuItem-"+t+"-"+e,value:e},n[e])}));return d.a.createElement(U,e,d.a.createElement(T.a,{key:"FormControl-"+t},d.a.createElement(A.a,null,f.a.t(a)),d.a.createElement(_.a,{key:"Select-"+t,className:s.input,value:p,onChange:function(e){var a=e&&e.target&&e.target.value||"";m(a),o(t,a)}},g),d.a.createElement(I.a,null,i||"")))},SwitchInput:function(e){var t=e.id,a=e.label,n=e.val,r=e.size,i=e.disabled,o=e.onChange,s=H(e),c=Object(u.useState)(n||!1),l=Object(O.a)(c,2),p=l[0],m=l[1];return d.a.createElement(U,e,d.a.createElement(T.a,{key:"FormControl-"+t},d.a.createElement(A.a,{classes:{root:s.InputLabel},shrink:!0},f.a.t(a)),d.a.createElement(M.a,{classes:{root:"small"===r?s.SwitchSmall:s.Switch},checked:p,disabled:i,onChange:function(e){var a=e&&e.target&&e.target.checked||!1;m(a),o(t,a)},size:r})))},SwitchInlineInput:function(e){var t=e.id,a=e.label,n=e.val,r=e.size,i=e.disabled,o=e.onChange,s=H(e),c=Object(u.useState)(n||!1),l=Object(O.a)(c,2),p=l[0],m=l[1];return d.a.createElement(U,e,d.a.createElement(D.a,{classes:{root:s.SwitchInline},label:f.a.t(a),control:d.a.createElement(M.a,{classes:{root:"small"===r?s.SwitchSmall:s.Switch},checked:p,disabled:i,onChange:function(e){var a=e&&e.target&&e.target.checked||!1;m(a),o(t,a)},size:r})}))},TextInput:K,TextAutoCompleteInput:function(e){var t=e.id,a=e.val,n=e.autoCompleteValues,i=e.autoComplete,o=e.autoHighlight,s=e.onChange,c=Object(u.useState)(a||""),l=Object(O.a)(c,2),p=l[0],m=l[1];return d.a.createElement(x.a,{id:"TextFieldAutoComplete-"+t,options:n||[],value:p,onChange:function(e,t){var a=t||e&&e.target&&e.target.value||"";m(a)},onInputChange:function(e,a){return s(t,a)},autoComplete:i,autoHighlight:o,renderInput:function(t){return K(Object(r.a)({},e,{autoCompleteParams:t}))}})}},W=a(14),V=a(732),J=a(628),q=a(137),Z=a(708),Y=a(247),$=a(141),Q=a(715),X=a(713),ee=a(714),te=a(368),ae=a(356),ne=a.n(ae),re=a(355),ie=a.n(re),oe=a(354),se=a.n(oe),ce=a(74),le=a.n(ce),ue=a(189),de=a(6),pe=function(e){Object(l.a)(a,e);var t=Object(c.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e))._addDevice=function(){var e=Object(V.a)();n.setState((function(t){return{selectedDevice:e,devices:Object(r.a)(Object(W.a)({},e,{name:"",function:"",options:{},attributes:{},states:{}}),t.devices)}}))},n._addKey=function(e,t,a){var i=Object(r.a)({},n.state.devices[e]);i[t]=i[t]||{},i[t][a.toLowerCase().replace(/ /g,"")]="states"===t?{}:f.a.t("new "+t.substr(0,t.length-1)),n.setState((function(t){return{devices:Object(r.a)({},t.devices,Object(W.a)({},e,i))}}))},n._cancelDevice=function(e,t,a){n.groupEditor={},n.setState({selectedDevice:null})},n._closePopup=function(e){if("cancel"===e)n.setState({popup:!1});else{var t={};["device-key"].forEach((function(e){return t[e]=!n.groupEditor[e]})),Object.values(t).indexOf(!0)>-1?n.setState((function(e){return{errors:Object(r.a)({},e.errors,{},t)}})):n.setState(Object(r.a)({},n._addKey(n.state.selectedDevice,n.state.selectedKey,n.groupEditor["device-key"]),{popup:!1}))}},n._deleteDevice=function(e,t,a){if(t){var i=Object(r.a)({},n.state.devices[e]);if(delete i[t][a],(";"+Object.keys(n.groupEditor).join(";")).indexOf(";"+t+"-"+a+"-")>-1)for(var o in n.groupEditor)o.indexOf(t+"-"+a+"-")>-1&&delete n.groupEditor[o];n.setState((function(a){return{devices:Object(r.a)({},a.devices,Object(W.a)({},e,Object(r.a)({options:{},attributes:{},states:{}},a.devices[e],Object(W.a)({},t,i[t]))))}}))}else{n.groupEditor={};var s=Object(r.a)({},n.state.devices);delete s[e],n.setState({devices:s})}},n._openPopup=function(e,t){return function(){n.groupEditor["device-key"]="",n._saveDevice(e),n.setState({popup:!0,selectedDevice:e,selectedKey:t})}},n._saveDevice=function(e){var t=Object(r.a)({},n.state.devices[e]);for(var a in n.groupEditor){var i=a.split("-"),o=Object(O.a)(i,3),s=o[0],c=o[1],l=o[2],u=n.groupEditor[a];l?(t[s]=t[s]||{},t[s][c][l]=u):l||"device"!==s||"key"===c||(t[c]=u)}n.setState((function(a){return{selectedDevice:null,selectedKey:null,devices:Object(r.a)({},a.devices,Object(W.a)({},e,t))}}),(function(){return n.onChange(n.state.devices)}))},n.state={popup:!1,selectedDevice:null,selectedKey:null,devices:n.props.devices||{},errors:{}},n.onChange=n.props.onChange,n.groupEditor={},n}return Object(o.a)(a,[{key:"renderDeviceAttribute",value:function(e,t){var a=this,n=this.props.classes;return d.a.createElement(q.a,{key:"AttributesListItem-"+t.key,dense:!0},d.a.createElement(Z.a,null,d.a.createElement($.a,{onClick:function(){return a._deleteDevice(e,"attributes",t.key)}},d.a.createElement(le.a,null))),d.a.createElement(Y.a,{disableTypography:!0},d.a.createElement(G.TextInput,{key:"attributes-"+t.key,id:"attributes-"+t.key,onChange:function(e,t){return a.groupEditor[e]=t},classes:{CustomTextInput:n.hr},shrink:!0,label:t.key,val:t.val||""})))}},{key:"renderDeviceAttributes",value:function(e,t){var a=this;return Object.keys(t||{}).map((function(n){var r=t[n];return r="string"===typeof r?r:Array.isArray(r)?r.join(","):JSON.stringify(r,null,0),a.renderDeviceAttribute(e,{val:r,key:n})}))}},{key:"renderDeviceOption",value:function(e,t){var a=this,n=this.props.classes;return d.a.createElement(q.a,{key:"JarvisListItem-"+t.key,dense:!0},d.a.createElement(Z.a,null,d.a.createElement($.a,{onClick:function(){return a._deleteDevice(e,"options",t.key)}},d.a.createElement(le.a,null))),d.a.createElement(Y.a,{disableTypography:!0},d.a.createElement(G.TextInput,{key:"options-"+t.key,id:"options-"+t.key,onChange:function(e,t){return a.groupEditor[e]=t},classes:{TextInput:n.hr},shrink:!0,label:t.key,val:t.val||""})))}},{key:"renderDeviceOptions",value:function(e,t){var a=this;return Object.keys(t||{}).map((function(n){var r=t[n];return""===(r="string"===typeof r?r:Array.isArray(r)?r.join(","):JSON.stringify(r,null,0))||"{}"===r||Array.isArray(r)&&0===r.length?null:a.renderDeviceOption(e,{val:r,key:n})}))}},{key:"renderDeviceState",value:function(e,t){var a=this,n=this.props.classes;return d.a.createElement(d.a.Fragment,{key:"StatesListItemLabelFragment-"+t.key},d.a.createElement(q.a,{key:"StatesListItemLabel-"+t.key,dense:!0},d.a.createElement(Z.a,null,d.a.createElement($.a,{size:"small",onClick:function(){return a._deleteDevice(e,"states",t.key)}},d.a.createElement(le.a,null))),d.a.createElement(Y.a,{primary:d.a.createElement("strong",null,t.key)})),d.a.createElement(q.a,{key:"StatesListItemInputs-"+t.key,dense:!0,divider:!0},d.a.createElement(Y.a,{disableTypography:!0},d.a.createElement(G.TextInput,{id:"states-"+t.key+"-label",onChange:function(e,t){return a.groupEditor[e]=t},classes:{TextInput:n.hr},shrink:!0,label:"Label",val:t.label||""}),d.a.createElement(G.TextInput,{id:"states-"+t.key+"-state",onChange:function(e,t){return a.groupEditor[e]=t},classes:{TextInput:n.hr},shrink:!0,label:"State",val:t.state&&"string"!==typeof t.state?t.state.node:t.state||""}),d.a.createElement(G.TextInput,{id:"states-"+t.key+"-action",onChange:function(e,t){return a.groupEditor[e]=t},classes:{TextInput:n.hr},shrink:!0,label:"Action",val:t.action&&"string"!==typeof t.action?t.action.node:t.action||""}))))}},{key:"renderDeviceStates",value:function(e,t){var a=this;return Object.keys(t||{}).map((function(n){var i=t[n];return i="string"===typeof i?{state:i}:i,a.renderDeviceState(e,Object(r.a)({},i,{key:n}))}))}},{key:"renderDevice",value:function(e){var t=this,a=this.props.classes;e.id=e.key;var n=this.renderDeviceStates(e.id,e.states||{}),r=this.renderDeviceOptions(e.id,e.options||{}),i=this.renderDeviceAttributes(e.id,e.attributes||{});return d.a.createElement(X.a,{key:e.id+"-"+e.function,role:"checkbox",tabIndex:-1},d.a.createElement(ee.a,{padding:"checkbox",scope:"row",align:"center"},d.a.createElement($.a,{size:"small",onClick:function(){return t._saveDevice(e.id)}},d.a.createElement(se.a,null)),d.a.createElement($.a,{size:"small",onClick:function(){return t._cancelDevice(e.id)}},d.a.createElement(ie.a,null)),d.a.createElement($.a,{size:"small",onClick:function(){return t._deleteDevice(e.id)},classes:{root:a.deleteButton}},d.a.createElement(le.a,null))),d.a.createElement(ee.a,{classes:{root:a.TableCell}},d.a.createElement(G.TextInput,{classes:{CustomFormControl:a.CustomTextInput,CustomTextInput:a.CustomTextInput,TextInput:a.hr},key:"device-name",id:"device-name",onChange:function(e,a){return t.groupEditor[e]=a},label:f.a.t("Device"),val:e.name})),d.a.createElement(ee.a,{classes:{root:a.TableCell}},d.a.createElement(G.TextInput,{classes:{CustomFormControl:a.CustomTextInput,CustomTextInput:a.CustomTextInput,TextInput:a.hr},key:"device-function",id:"device-function",onChange:function(e,a){return t.groupEditor[e]=a},label:f.a.t("Function"),val:e.function})),d.a.createElement(ee.a,{classes:{root:a.TableCell}},d.a.createElement(C.a,{container:!0},d.a.createElement(C.a,{item:!0,xs:12},d.a.createElement(h.a,{onClick:this._openPopup(e.id,"states"),startIcon:d.a.createElement(P.a,null)},f.a.t("add new state"))),d.a.createElement(J.a,{dense:!0},n))),d.a.createElement(ee.a,{classes:{root:a.TableCell}},d.a.createElement(C.a,{container:!0},d.a.createElement(C.a,{item:!0,xs:12},d.a.createElement(h.a,{onClick:this._openPopup(e.id,"options"),startIcon:d.a.createElement(P.a,null)},f.a.t("add new option")),d.a.createElement(te.a,{classes:{root:a.hr}})),d.a.createElement(C.a,{item:!0,xs:12},d.a.createElement(J.a,{dense:!0},r)))),d.a.createElement(ee.a,{classes:{root:a.TableCell}},d.a.createElement(C.a,{container:!0},d.a.createElement(C.a,{item:!0,xs:12},d.a.createElement(h.a,{onClick:this._openPopup(e.id,"attributes"),startIcon:d.a.createElement(P.a,null)},f.a.t("add new attribute")),d.a.createElement(te.a,{classes:{root:a.hr}})),d.a.createElement(C.a,{item:!0,xs:12},d.a.createElement(J.a,{dense:!0},i)))))}},{key:"renderDevices",value:function(e){var t=this,a=e.rows;return d.a.createElement(Q.a,null,a.map((function(e,a){var n=Object.keys(e.options||{}).filter((function(t){return!1===(""===e.options[t]||Array.isArray(e.options[t])&&0===e.options[t].length||"object"===typeof e.options[t]&&0===Object.keys(e.options[t]).length)})).sort().join(", "),r=Object.keys(e.attributes||{}).sort().join(", ");return t.state.selectedDevice===e.key?t.renderDevice(e):d.a.createElement(X.a,{key:"TableRow-"+a,hover:!0,tabIndex:-1,onClick:function(){return t.setState({selectedDevice:e.key})}},d.a.createElement(ee.a,{padding:"checkbox",scope:"row",align:"center"},d.a.createElement($.a,{size:"small",onClick:function(){return t.setState({selectedDevice:e.key})}},d.a.createElement(ne.a,null))),d.a.createElement(ee.a,null,e.name),d.a.createElement(ee.a,null,e.function),d.a.createElement(ee.a,null,Object.keys(e.states||{}).join(", ")),d.a.createElement(ee.a,null,n.length>30?n.substr(0,27)+"...":n),d.a.createElement(ee.a,null,r.length>15?r.substr(0,12)+"...":r))})))}},{key:"render",value:function(){var e=this,t=Object.keys(this.state.devices).map((function(t){return Object(r.a)({},e.state.devices[t],{key:t})}));return d.a.createElement(d.a.Fragment,null,d.a.createElement(ue.a,{title:"Devices",headCells:[{id:"edit",width:"3%",disablePadding:!0,label:""},{id:"name",width:"10%",label:f.a.t("Name")},{id:"function",width:"10%",label:f.a.t("Function")},{id:"states",width:"50%",disablePadding:!1,label:f.a.t("States")},{id:"jarvis",width:"14%",disablePadding:!1,label:f.a.t("Jarvis")},{id:"attributes",width:"13%",disablePadding:!1,label:f.a.t("Attributes")}],rows:t,defaultOrderBy:"name",selectable:!1,sortable:!0,stickyHeader:!0,CustomTableBody:function(t){return e.renderDevices(t)},toolbarRightActionButton:d.a.createElement(G.Button,{onClick:function(){return e._addDevice()},startIcon:d.a.createElement(P.a,null),disabled:null!==this.state.selectedDevice,label:f.a.t("add new device")})}),d.a.createElement(S.a,{header:f.a.t("Add new entry"),actions:[d.a.createElement(h.a,{key:"action-cancel",onClick:function(){return e._closePopup("cancel")},color:"secondary"},f.a.t("Cancel")),d.a.createElement(h.a,{key:"action-save",onClick:function(){return e._closePopup("save")},color:"primary"},f.a.t("Ok"))],maxWidth:"lg",open:this.state.popup,onClose:function(){return e._closePopup("cancel")}},d.a.createElement(J.a,null,d.a.createElement(q.a,{divider:!0},"options"===this.state.selectedKey?d.a.createElement(G.TextAutoCompleteInput,Object.assign({key:"device-key",id:"device-key"},p.c.deviceKey,{autoComplete:!0,autoHighlight:!0,onChange:function(t,a){return e.groupEditor[t]=a},autoCompleteValues:Object.keys(p.b)||[],required:!0,error:this.state.errors["device-key"],autoFocus:!0})):d.a.createElement(G.TextInput,Object.assign({key:"device-key",id:"device-key"},p.c.deviceKey,{onChange:function(t,a){return e.groupEditor[t]=a},required:!0,error:this.state.errors["device-key"],autoFocus:!0}))))))}}]),a}(d.a.Component),me=Object(de.a)((function(e){return{deleteButton:{marginTop:"25px"},hr:{margin:"10px 2px"},CustomTextInput:{width:150},TableCell:{verticalAlign:"top",padding:"5px 0"}}}))(pe),ge=a(71),fe=a(358),he=a.n(fe),be=a(244),ve=a.n(be),ye=a(245),ke=a.n(ye),Ee=a(357),Se=a.n(Ee),Oe=function(e){Object(l.a)(a,e);var t=Object(c.a)(a);function a(e){var o;return Object(i.a)(this,a),(o=t.call(this,e))._addColumn=function(e,t){o.setState((function(a){return{layout:Object(r.a)({},a.layout,Object(W.a)({},e,Object(r.a)({},a.layout[e],Object(W.a)({},t,{}))))}}),(function(){return o.onChange(o.state.layout,o.state.settings)}))},o._addTab=function(){var e=Object.keys(o.state.layout).length+1;o.setState((function(t){return{layout:Object(r.a)({},t.layout,Object(W.a)({},"home|"+f.a.t("new tab")+" "+e,{1:{}}))}}),(function(){return o.onChange(o.state.layout,o.state.settings)})),setTimeout((function(){return window.location="#tab-"+e}),100)},o._changeTab=function(e){return function(t,a){if("tabIcon"===t||"tabLabel"===t){var n=e.split("|"),i=Object(O.a)(n,2),s=i[0],c=i[1];"tabIcon"===t?s=a:"tabLabel"===t&&(c=a);var l={};Object.keys(o.state.layout).forEach((function(t){l[t===e?s+"|"+c:t]=o.state.layout[t]})),o.setState({layout:l},(function(){return o.onChange(o.state.layout,o.state.settings)}))}else if("tabFullscreen"===t){var u=Object(r.a)({},o.state.layout[e]);!0===a?o.setState((function(t){return{layout:Object(r.a)({},t.layout,Object(W.a)({},e,u[1]))}}),(function(){return o.onChange(o.state.layout,o.state.settings)})):o.setState((function(t){return{layout:Object(r.a)({},t.layout,Object(W.a)({},e,{1:u}))}}),(function(){return o.onChange(o.state.layout,o.state.settings)}))}}},o._closePopup=function(e){if("cancel"===e)return o.setState({popup:!1}),!1;if("save"===e){var t=o.state.selectedTab,a=o.state.selectedColumn,i=o.state.selectedGroup.key,s={};if([].concat([{parameter:"key",required:!0},{parameter:"component",required:!0}],Object(n.a)(ge.a[o.state.selectedGroup.key]||[])).forEach((function(e){s["input-group-"+e.parameter]=!0===e.required&&!o.groupEditor["input-group-"+e.parameter]})),Object.values(s).indexOf(!0)>-1)return o.setState((function(e){return{errors:Object(r.a)({},e.errors,{},s)}})),console.error(s,o.groupEditor),!1;var c={};if(Object.keys(o.groupEditor).forEach((function(e){return c[e.replace("input-group-","")]=o.groupEditor[e]})),c.key=c.key.toLowerCase().replace(/ /g,""),i){for(var l={},u=1;u<Object.keys(o.state.layout[t]).length;u++)l[u]=o.state.layout[t][u>=a?u+1:u];var d={};Object.keys(o.state.layout[t][a]).forEach((function(e){e===i?d[c.key]=Object(r.a)({},o.state.layout[t][a][e],{},c):d[e]=o.state.layout[t][a][e]})),delete d[c.key].key,o.setState((function(e){return{popup:!1,layout:Object(r.a)({},e.layout,Object(W.a)({},t,Object(r.a)({},e.layout[t],Object(W.a)({},a,d))))}}),(function(){return o.onChange(o.state.layout,o.state.settings)}))}else o.setState((function(e){return{popup:!1,layout:Object(r.a)({},e.layout,Object(W.a)({},t,Object(r.a)({},e.layout[t],Object(W.a)({},a,Object(r.a)({},e.layout[t][a],Object(W.a)({},c.key,c))))))}}),(function(){return o.onChange(o.state.layout,o.state.settings)}))}},o._deleteColumn=function(e,t){for(var a={},n=1;n<Object.keys(o.state.layout[e]).length;n++)a[n]=o.state.layout[e][n>=t?n+1:n];o.setState((function(t){return{layout:Object(r.a)({},t.layout,Object(W.a)({},e,a))}}))},o._deleteGroup=function(e,t,a){var n=Object(r.a)({},o.state.layout[e][t]);delete n[a],o.setState((function(a){return{popup:!1,layout:Object(r.a)({},a.layout,Object(W.a)({},e,Object(r.a)({},a.layout[e],Object(W.a)({},t,n))))}}),(function(){return o.onChange(o.state.layout,o.state.settings)}))},o._deleteTab=function(e){var t=Object(r.a)({},o.state.layout);delete t[e],o.setState({layout:t},(function(){return o.onChange(o.state.layout,o.state.settings)}))},o._moveGroup=function(e,t,a,n){return function(i){i.stopPropagation();var s=Object(r.a)({},o.state.layout[t][a]),c=!1,l=Object.keys(s).sort((function(t,a){return!c&&("up"===e&&a===n||"down"===e&&t===n)?(c=!0,1):0})),u={};l.map((function(e){return u[e]=s[e]})),o.setState((function(e){return{layout:Object(r.a)({},e.layout,Object(W.a)({},t,Object(r.a)({},e.layout[t],Object(W.a)({},a,u))))}}),(function(){return o.onChange(o.state.layout,o.state.settings)}))}},o._moveTab=function(e,t){return function(a){a.stopPropagation();var n=Object(r.a)({},o.state.layout),i=!1,s=Object.keys(n).sort((function(a,n){return!i&&("up"===e&&n===t||"down"===e&&a===t)?(i=!0,1):0})),c={};s.map((function(e){return c[e]=n[e]})),o.setState((function(e){return{settings:Object(r.a)({},e.settings,{layout:c})}}),(function(){return o.onChange(o.state.layout,o.state.settings)}))}},o._openPopup=function(e,t,a){var n={};Object.keys(a||{}).map((function(e){return n["input-group-"+e]=a[e]||""})),o.groupEditor=n,o.setState(Object(r.a)({},n,{popup:!0,errors:{},selectedTab:e,selectedColumn:t,selectedGroup:a||{}}))},o.state={popup:!1,selectedTab:null,selectedColumn:null,selectedGroup:{},layout:o.props.layout,settings:o.props.settings,errors:{}},o.onChange=o.props.onChange,o.groupEditor={},o}return Object(o.a)(a,[{key:"renderTabColumnGroup",value:function(e,t,a){var n=this,r=this.props.classes;return d.a.createElement(q.a,{key:"Tab-"+e.key+"_Column-"+t.key+"_Component-"+a.key,onClick:function(){return n._openPopup(e.key,t.key,a)},button:!0,divider:!0},e.fullscreen?d.a.createElement(Z.a,{classes:{root:r.iconContainer}},d.a.createElement(Se.a,null)):d.a.createElement(Z.a,{classes:{root:r.iconContainer}},d.a.createElement(d.a.Fragment,null,d.a.createElement($.a,{size:"small",onClick:this._moveGroup("up",e.key,t.key,a.key)},d.a.createElement(ve.a,null)),d.a.createElement($.a,{size:"small",onClick:this._moveGroup("down",e.key,t.key,a.key)},d.a.createElement(ke.a,null)))),d.a.createElement(Y.a,{primary:d.a.createElement(d.a.Fragment,null,d.a.createElement(E.a,{display:"block"},a.key),d.a.createElement(E.a,{variant:"subtitle2"},"(",a.name,")"))}))}},{key:"renderTabColumns",value:function(e,t){var a=this,n=this.props.classes,i=[];for(var o in t.entries){var s=Object(r.a)({},t.entries[o],{key:o,name:t.entries[o]&&t.entries[o].component||p.a.MODULE});i.push(this.renderTabColumnGroup(e,t,s))}return d.a.createElement(C.a,{className:n.column,key:"Tab-"+e.key+"_Column-"+t.key,item:!0},d.a.createElement(J.a,null,d.a.createElement(q.a,{onClick:function(){return a._deleteColumn(e.key,t.key)},button:!0,divider:!0,dense:!0},d.a.createElement(Z.a,{classes:{root:n.iconContainer}},d.a.createElement($.a,{size:"small"},d.a.createElement(le.a,null))),d.a.createElement(Y.a,{primary:f.a.t("delete column")})),(!e.fullscreen||e.fullscreen&&t.entries.length<1)&&d.a.createElement(q.a,{onClick:function(){return a._openPopup(e.key,t.key,null)},button:!0,divider:!0,dense:!0},d.a.createElement(Z.a,{classes:{root:n.iconContainer}},d.a.createElement($.a,{size:"small"},d.a.createElement(P.a,null))),d.a.createElement(Y.a,{primary:f.a.t("add new group")})),i))}},{key:"renderTab",value:function(e){var t=this,a=this.props.classes,n=e.key.split("|"),r=Object(O.a)(n,2),i=r[0],o=r[1];e.fullscreen=Number.isNaN(parseInt(Object.keys(e.entries)[0]));for(var s=Object.keys(e.entries).length,c=e.entries&&e.entries[1]&&Object.keys(e.entries[1]).length||0,l=[],u=1;u<s+1;u++){var m={entries:void 0!==e.entries[u]?e.entries[u]:e.entries,key:u};l.push(this.renderTabColumns(e,m))}return d.a.createElement(q.a,{id:"tab-"+e.index,divider:!0!==e.lastTab,key:"Tab-"+e.key,classes:{root:a.tab}},d.a.createElement(Z.a,{key:"Tab-"+e.key+"-ListItemIcon",classes:{root:a.iconContainer}},d.a.createElement(d.a.Fragment,null,d.a.createElement($.a,{size:"small",onClick:this._moveTab("up",e.key)},d.a.createElement(ve.a,null)),d.a.createElement($.a,{size:"small",onClick:this._moveTab("down",e.key)},d.a.createElement(ke.a,null)),d.a.createElement($.a,{size:"small",onClick:function(){return t._deleteTab(e.key)},classes:{root:a.deleteButton}},d.a.createElement(le.a,null)))),d.a.createElement(Y.a,{disableTypography:!0,primary:[d.a.createElement(G.TextInput,Object.assign({key:"Input-tabIcon",id:"tabIcon"},p.c.tabIcon,{onChange:this._changeTab(e.key),val:i||"",icon:i||""})),d.a.createElement(G.TextInput,Object.assign({key:"Input-tabLabel",id:"tabLabel"},p.c.tabLabel,{onChange:this._changeTab(e.key),val:o||""})),d.a.createElement(G.Button,{key:"Input-addColumnToTab",id:"Input-addColumnToTab",label:"add new column",disabled:e.fullscreen,onClick:function(){return t._addColumn(e.key,s+1)}}),d.a.createElement(G.SwitchInput,Object.assign({key:"Input-tabFullscreen",id:"tabFullscreen"},p.c.tabFullscreen,{disabled:s>1||c>1,onChange:this._changeTab(e.key),val:e.fullscreen})),d.a.createElement(C.a,{key:"Tab-"+e.key+"-ColumnContainer",classes:{root:a.columnContainer},container:!0},l)]}))}},{key:"renderTabs",value:function(e){var t=0,a=[],n=Object.keys(e).length;for(var r in e)t++,a.push(this.renderTab({entries:e[r],key:r,index:t,lastTab:t===n}));return a}},{key:"render",value:function(){var e=this,t=this.props.classes,a=this.renderTabs(this.state.layout),n=ge.a[this.state.selectedGroup.component||p.a.MODULE].map((function(t){var a=G[t.type||"TextInput"];return d.a.createElement(a,Object.assign({key:"input-group-"+t.parameter,id:"input-group-"+t.parameter,label:f.a.t(t.label||t.parameter),info:t.description},t,{onChange:function(t,a){return e.groupEditor[t]=a},val:e.state.selectedGroup[t.parameter]||t.val}))}));return d.a.createElement(d.a.Fragment,null,d.a.createElement(b.a,null,d.a.createElement(J.a,{className:t.tabs},d.a.createElement(q.a,{divider:!0,classes:{root:t.tab}},d.a.createElement(Z.a,{classes:{root:t.iconContainer}},d.a.createElement(he.a,null)),d.a.createElement(Y.a,{disableTypography:!0,primary:[d.a.createElement(G.Button,{key:"Input-addTabs",id:"Input-addTabs",label:"add new tab",onClick:function(){return e._addTab()}}),d.a.createElement(G.SwitchInput,Object.assign({key:"Input-tabsHideLabels",id:"tabsHideLabels"},p.c.tabsHideLabels,{onChange:function(t,a){return e.onChange(e.state.layout,Object(W.a)({},t,a))},val:this.state.settings.tabsHideLabels}))]})),a)),d.a.createElement(S.a,{header:f.a.t("Group configuration"),classes:{CustomDialogActions:t.DialogActions},actions:d.a.createElement(C.a,{container:!0},d.a.createElement(C.a,{item:!0,xs:6},this.state.selectedGroup.key&&d.a.createElement(h.a,{key:"action-delete",onClick:function(){return e._deleteGroup(e.state.selectedTab,e.state.selectedColumn,e.state.selectedGroup.key)},color:"secondary",startIcon:d.a.createElement(le.a,null)},f.a.t("Delete Group"))),d.a.createElement(C.a,{item:!0,xs:6,className:t.alignRight},d.a.createElement(h.a,{key:"action-cancel",onClick:function(){return e._closePopup("cancel")},color:"secondary"},f.a.t("Cancel")),d.a.createElement(h.a,{key:"action-save",onClick:function(){return e._closePopup("save")},color:"primary"},f.a.t("Ok")))),maxWidth:"lg",open:this.state.popup,onClose:function(){return e._closePopup("cancel")}},d.a.createElement(J.a,null,d.a.createElement(q.a,{classes:{gutters:t.ListItemGutters},divider:!0},d.a.createElement(G.TextAutoCompleteInput,Object.assign({key:"input-group-key",id:"input-group-key"},p.c.groupName,{autoComplete:!0,autoHighlight:!0,onChange:function(t,a){return e.groupEditor[t]=a},val:this.state.selectedGroup.key||"",autoCompleteValues:this.props.groups||[],required:!0,error:this.state.errors["input-group-key"]}))),d.a.createElement(q.a,{classes:{gutters:t.ListItemGutters},divider:!0},d.a.createElement(G.TextInput,Object.assign({key:"input-group-title",id:"input-group-title"},p.c.groupTitle,{onChange:function(t,a){return e.groupEditor[t]=a},val:this.state.selectedGroup.title||""})),d.a.createElement(G.TextInput,Object.assign({key:"input-group-icon",id:"input-group-icon"},p.c.groupIcon,{onChange:function(t,a){return e.groupEditor[t]=a},val:this.state.selectedGroup.icon||""})),d.a.createElement(G.TextInput,Object.assign({key:"input-group-iconStyle",id:"input-group-iconStyle"},p.c.groupIconStyle,{onChange:function(t,a){return e.groupEditor[t]=a},val:this.state.selectedGroup.iconStyle||""}))),d.a.createElement(q.a,{classes:{gutters:t.ListItemGutters}},d.a.createElement(G.TextAutoCompleteInput,Object.assign({key:"input-group-component",id:"input-group-component"},p.c.groupModule,{autoComplete:!0,autoHighlight:!0,onChange:function(t,a){return e.groupEditor[t]=a},val:this.state.selectedGroup.component||p.a.MODULE,required:!0,error:this.state.errors["input-group-component"]}))),d.a.createElement(q.a,{classes:{gutters:t.ListItemGutters}},d.a.createElement(C.a,{container:!0,spacing:1},n)))))}}]),a}(d.a.Component),je=Object(de.a)((function(e){return{deleteButton:{marginTop:"20px"},tabs:{marginBottom:"10px"},tab:{padding:e.spacing(3,2)},iconContainer:{flexDirection:"column",alignItems:"center"},columnContainer:{marginTop:e.spacing(2)},column:{width:250,margin:e.spacing(1,1),borderRight:"1px solid rgba(0, 0, 0, 0.12)",borderLeft:"1px solid rgba(0, 0, 0, 0.12)"},DialogActions:{justifyContent:"initial"},alignRight:{display:"flex",justifyContent:"flex-end"},ListItemGutters:{padding:"16px"}}}))(Oe),Ce=a(731),we=a(719),xe=a(718),Te=a(186),De=a.n(Te),Ie=function(e){Object(l.a)(a,e);var t=Object(c.a)(a);function a(e){var n;return Object(i.a)(this,a),(n=t.call(this,e))._handleSettingsChange=function(e,t){m.a.setSetting(e,t),n.onChange&&n.onChange(m.a.getSettings())},n._handlePanelChange=function(e){return function(t,a){return n.setState({panel:!!a&&e})}},delete m.a.settings.iobroker,n.state={panel:!1},n.onChange=n.props.onChange,n.settings=m.a.getSettings(),n}return Object(o.a)(a,[{key:"renderPanel",value:function(e,t){var a=this,n=this.props.classes,r=Object.keys(t.settings).map((function(n){var r=t.settings[n],i=G[r.type||"TextInput"];return d.a.createElement(i,Object.assign({key:"Input-"+e+"-"+n,id:n,onChange:a._handleSettingsChange,val:a.props.settings[n]||a.settings[n]},r))}));return d.a.createElement(Ce.a,{key:"ExpansionPanel-"+e,expanded:this.state.panel===e,onChange:this._handlePanelChange(e)},d.a.createElement(xe.a,{expandIcon:d.a.createElement(De.a,null),id:"panel-header-"+e},d.a.createElement(E.a,{className:n.heading},t.label),t.description&&d.a.createElement(E.a,{className:n.secondaryHeading},t.description)),d.a.createElement(we.a,null,r))}},{key:"render",value:function(){var e=this;return Object.keys(p.d).map((function(t){return e.renderPanel(t,p.d[t])}))}}]),a}(d.a.Component),Le=Object(de.a)((function(e){return{heading:{fontSize:e.typography.pxToRem(15),flexBasis:"33.33%",flexShrink:0},secondaryHeading:{fontSize:e.typography.pxToRem(15),color:e.palette.text.secondary}}}))(Ie),Ae=function(e){Object(l.a)(a,e);var t=Object(c.a)(a);function a(e){var o;Object(i.a)(this,a),(o=t.call(this,e))._onDevicesChange=function(e){return o.setState({devices:e})},o._onSettingsChange=function(e){return o.setState({settings:e})},o._onLayoutsChange=function(e,t){return o.setState((function(a){return{settings:Object(r.a)({},a.settings,{},t||{}),layout:e}}))},o._handleTabChange=function(e,t){return o.setState({tab:t})},o._cancel=function(){o.setState({settings:m.a.getSettings()}),o.props.navigate("home")},o._save=function(){var e=[o.socket.setState(p.a.NODE_SETTINGS,JSON.stringify(Object(r.a)({},o.state.settings,{layout:o.state.layout}))),o.socket.setState(p.a.NODE_DEVICES,JSON.stringify(o.state.devices))];Promise.all(e).then((function(){return window.location.reload()})).catch((function(e){return console.error(e)}))};var c=Object(r.a)({},m.a.getSettings()),l=c.layout;return delete c.layout,delete c.iobroker,o.groups=[],Object.keys(o.props.devices).forEach((function(e){return o.groups=o.groups.concat(o.props.devices[e].options.group||[])})),o.groups=Object(n.a)(new Set(o.groups)).sort(),o.state={expertMode:!1,tab:"devices",settings:c||{},layout:l||{},devices:o.props.devices||{}},o.socket=g.a.getConnection,o._onDevicesChange.bind(Object(s.a)(o)),o._onSettingsChange.bind(Object(s.a)(o)),o._onLayoutsChange.bind(Object(s.a)(o)),o}return Object(o.a)(a,[{key:"render",value:function(){var e=this,t=this.props.classes;return d.a.createElement(S.a,{classes:{CustomDialog:t.pinToTop},fullWidth:!0,maxWidth:"xl",open:"configuration"===this.props.page,onClose:this._cancel,header:[d.a.createElement(E.a,{key:"header",variant:"h6"},"Configuration",d.a.createElement(G.SwitchInlineInput,{key:"Input-expertMode",id:"expertMode",size:"small",label:f.a.t("Expert mode"),onChange:function(t,a){return e.setState({expertMode:a})},val:this.state.expertMode})),d.a.createElement(v.a,{key:"tabs",value:this.state.tab,indicatorColor:"primary",textColor:"primary",onChange:this._handleTabChange},d.a.createElement(y.a,{value:"devices",label:f.a.t("Devices")}),!0===this.state.expertMode&&d.a.createElement(y.a,{value:"devicesRaw",label:[f.a.t("Raw Editor"),d.a.createElement("br",{key:"tab"}),f.a.t("Devices")]}),d.a.createElement(y.a,{value:"layout",label:f.a.t("Layout")}),!0===this.state.expertMode&&d.a.createElement(y.a,{value:"layoutRaw",label:[f.a.t("Raw Editor"),d.a.createElement("br",{key:"tab"}),f.a.t("Layout")]}),d.a.createElement(y.a,{value:"settings",label:f.a.t("Settings")}),!0===this.state.expertMode&&d.a.createElement(y.a,{value:"settingsRaw",label:[f.a.t("Raw Editor"),d.a.createElement("br",{key:"tab"}),f.a.t("Settings")]}))],actions:[d.a.createElement(h.a,{key:"action-cancel",autoFocus:!0,onClick:this._cancel,color:"secondary"},f.a.t("Cancel")),d.a.createElement(h.a,{key:"action-save",onClick:this._save,color:"primary"},f.a.t("Save"))]},d.a.createElement("div",{hidden:"devices"!==this.state.tab},d.a.createElement(b.a,null,"devices"===this.state.tab&&d.a.createElement(me,{devices:this.state.devices,onChange:this._onDevicesChange}))),!0===this.state.expertMode&&d.a.createElement("div",{hidden:"devicesRaw"!==this.state.tab},d.a.createElement(b.a,{className:t.paper},d.a.createElement(E.a,{className:t.title,variant:"h6"},f.a.t("Raw Editor")+" "+f.a.t("Devices")),d.a.createElement(k.a,{key:"TextField-Raw-Devices",InputProps:{className:t.rawEditor},multiline:!0,fullWidth:!0,onChange:function(t){return e._onDevicesChange(JSON.parse(t&&t.target&&t.target.value||"{}"))},value:JSON.stringify(this.state.devices,null,3)}))),d.a.createElement("div",{hidden:"settings"!==this.state.tab,style:{width:"100%"}},d.a.createElement(b.a,{className:t.title},d.a.createElement(E.a,{variant:"h6"},f.a.t("Settings"))),"settings"===this.state.tab&&d.a.createElement(Le,{settings:this.state.settings,onChange:this._onSettingsChange})),!0===this.state.expertMode&&d.a.createElement("div",{hidden:"settingsRaw"!==this.state.tab,style:{width:"100%"}},d.a.createElement(b.a,{className:t.paper},d.a.createElement(E.a,{className:t.title,variant:"h6"},f.a.t("Raw Editor")+" "+f.a.t("Settings")),d.a.createElement(k.a,{key:"TextField-Raw-Settings",InputProps:{disableUnderline:!0,className:t.rawEditor},multiline:!0,fullWidth:!0,onChange:function(t){return e._onSettingsChange(JSON.parse(t&&t.target&&t.target.value||"{}"))},value:JSON.stringify(this.state.settings,null,3)}))),d.a.createElement("div",{hidden:"layout"!==this.state.tab},d.a.createElement(b.a,null,d.a.createElement(E.a,{className:t.title,variant:"h6"},f.a.t("Layout"))),"layout"===this.state.tab&&d.a.createElement(je,{groups:this.groups,settings:this.state.settings,layout:this.state.layout,onChange:this._onLayoutsChange})),!0===this.state.expertMode&&d.a.createElement("div",{hidden:"layoutRaw"!==this.state.tab,style:{width:"100%"}},d.a.createElement(b.a,{className:t.paper},d.a.createElement(E.a,{className:t.title,variant:"h6"},f.a.t("Raw Editor")+" "+f.a.t("Layout")),d.a.createElement(k.a,{key:"TextField-Raw-Layout",InputProps:{disableUnderline:!0,className:t.rawEditor},multiline:!0,fullWidth:!0,onChange:function(t){return e._onLayoutsChange(JSON.parse(t&&t.target&&t.target.value||"{}"))},value:JSON.stringify(this.state.layout||{},null,3)}))))}}]),a}(d.a.Component);t.default=Object(de.a)((function(e){return{pinToTop:{position:"absolute",top:0},title:{paddingLeft:e.spacing(2),paddingRight:e.spacing(1),marginBottom:e.spacing(1),minHeight:"64px",display:"flex",position:"relative",alignItems:"center"},rawEditor:{fontFamily:"Roboto Mono,Consolas,Courier New,monospace !important"}}}))(Ae)},71:function(e,t,a){"use strict";a.d(t,"b",(function(){return n})),a.d(t,"a",(function(){return r}));var n={AdapterStatus:a(205).ModuleSettings||{},Chart:a(211).ModuleSettings||{},DateTime:a(226).ModuleSettings||{},Map:a(227).ModuleSettings||{},Multimedia:a(241).ModuleSettings||{},StateList:a(112).ModuleSettings||{},StateListHorizontal:a(228).ModuleSettings||{},Weather:a(229).ModuleSettings||{}},r={AdapterStatus:a(205).ModuleConfig||[],Chart:a(211).ModuleConfig||[],DateTime:a(226).ModuleConfig||[],Map:a(227).ModuleConfig||[],Multimedia:a(241).ModuleConfig||[],StateList:a(112).ModuleConfig||[],StateListHorizontal:a(228).ModuleConfig||[],Weather:a(229).ModuleConfig||[]};t.c={AdapterStatus:a(205).default,Chart:a(211).default,DateTime:a(226).default,Map:a(227).default,Multimedia:a(241).default,StateList:a(112).default,StateListHorizontal:a(228).default,Weather:a(229).default}},95:function(e,t,a){"use strict";a.d(t,"a",(function(){return h}));var n=a(0),r=a.n(n),i=a(2),o=a(633),s=a(640),c=a(635),l=a(636),u=a(141),d=a(116),p=a.n(d),m=a(49),g=a(139),f=Object(g.a)((function(e){return{closeButton:{position:"absolute",right:e.spacing(1),top:e.spacing(1),color:e.palette.grey[500]},Dialog:{},CustomDialog:{},DialogContent:{backgroundColor:"#fafafa"},CustomDialogContent:{},DialogActions:{margin:0,padding:e.spacing(1)},CustomDialogActions:{}}}));function h(e){var t=e.header,a=e.onClose,n=e.children,d=e.actions,g=f(e);return r.a.createElement(o.a,{classes:{paper:Object(i.a)(g.Dialog,g.CustomDialog)},fullWidth:e.fullWidth,maxWidth:e.maxWidth,open:e.open,onClose:e.onClose},r.a.createElement(s.a,{disableTypography:!0},"string"!==typeof t?t:r.a.createElement(m.a,{variant:"h6"},t),r.a.createElement(u.a,{"aria-label":"close",className:g.closeButton,onClick:a},r.a.createElement(p.a,null))),r.a.createElement(c.a,{className:Object(i.a)(g.DialogContent,g.CustomDialogContent),dividers:!0},n),r.a.createElement(l.a,{classes:{root:Object(i.a)(g.DialogActions,g.CustomDialogActions)}},d))}}},[[392,1,2]]]);
//# sourceMappingURL=main.73c497b1.chunk.js.map