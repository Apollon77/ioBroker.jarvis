var qe=Object.defineProperty,xe=Object.defineProperties;var Be=Object.getOwnPropertyDescriptors;var p=Object.getOwnPropertySymbols;var Ce=Object.prototype.hasOwnProperty,Te=Object.prototype.propertyIsEnumerable;var ee=(a,r,i)=>r in a?qe(a,r,{enumerable:!0,configurable:!0,writable:!0,value:i}):a[r]=i,O=(a,r)=>{for(var i in r||(r={}))Ce.call(r,i)&&ee(a,i,r[i]);if(p)for(var i of p(r))Te.call(r,i)&&ee(a,i,r[i]);return a},N=(a,r)=>xe(a,Be(r));import{W as Se,c6 as $e,Y as Oe,ca as De,Z as Me,cc as We,z as Pe,cw as ze,a0 as k,a as o,cf as Ae,dy as Le,dz as j,C as s,H as ae,dA as D,E as _e,bi as Ie,N as Fe,h as M,dB as te,a1 as He,a2 as Qe,dC as Ve}from"./index.21fe8de3.js";const le=150;var Re=Se({name:"QDrawer",inheritAttrs:!1,props:N(O(O({},$e),Oe),{side:{type:String,default:"left",validator:a=>["left","right"].includes(a)},width:{type:Number,default:300},mini:Boolean,miniToOverlay:Boolean,miniWidth:{type:Number,default:57},breakpoint:{type:Number,default:1023},showIfAbove:Boolean,behavior:{type:String,validator:a=>["default","desktop","mobile"].includes(a),default:"default"},bordered:Boolean,elevated:Boolean,overlay:Boolean,persistent:Boolean,noSwipeOpen:Boolean,noSwipeClose:Boolean,noSwipeBackdrop:Boolean}),emits:[...De,"on-layout","mini-state"],setup(a,{slots:r,emit:i,attrs:E}){const m=Qe(),{proxy:{$q:f}}=m,ue=Me(a,f),{preventBodyScroll:W}=Ve(),{registerTimeout:R}=We(),t=Pe(ze,()=>{console.error("QDrawer needs to be child of QLayout")});let P,z,q;const n=k(a.behavior==="mobile"||a.behavior!=="desktop"&&t.totalWidth.value<=a.breakpoint),x=o(()=>a.mini===!0&&n.value!==!0),v=o(()=>x.value===!0?a.miniWidth:a.width),u=k(a.showIfAbove===!0&&n.value===!1?!0:a.modelValue===!0),U=o(()=>a.persistent!==!0&&(n.value===!0||re.value===!0));function K(e,l){if(oe(),e!==!1&&t.animate(),c(0),n.value===!0){const d=t.instances[S.value];d!==void 0&&d.belowBreakpoint===!0&&d.hide(!1),y(1),t.isContainer.value!==!0&&W(!0)}else y(0),e!==!1&&H(!1);R(()=>{e!==!1&&H(!0),l!==!0&&i("show",e)},le)}function X(e,l){ie(),e!==!1&&t.animate(),y(0),c(w.value*v.value),Q(),l!==!0&&R(()=>{i("hide",e)},le)}const{show:A,hide:B}=Ae({showing:u,hideOnRouteChange:U,handleShow:K,handleHide:X}),{addToHistory:oe,removeFromHistory:ie}=Le(u,B,U),T={belowBreakpoint:n,hide:B},h=o(()=>a.side==="right"),w=o(()=>(f.lang.rtl===!0?-1:1)*(h.value===!0?1:-1)),Y=k(0),g=k(!1),L=k(!1),Z=k(v.value*w.value),S=o(()=>h.value===!0?"left":"right"),_=o(()=>u.value===!0&&n.value===!1&&a.overlay===!1?a.miniToOverlay===!0?a.miniWidth:v.value:0),I=o(()=>a.overlay===!0||a.miniToOverlay===!0||t.view.value.indexOf(h.value?"R":"L")>-1||f.platform.is.ios===!0&&t.isContainer.value===!0),C=o(()=>a.overlay===!1&&u.value===!0&&n.value===!1),re=o(()=>a.overlay===!0&&u.value===!0&&n.value===!1),ne=o(()=>"fullscreen q-drawer__backdrop"+(u.value===!1&&g.value===!1?" hidden":"")),se=o(()=>({backgroundColor:`rgba(0,0,0,${Y.value*.4})`})),G=o(()=>h.value===!0?t.rows.value.top[2]==="r":t.rows.value.top[0]==="l"),de=o(()=>h.value===!0?t.rows.value.bottom[2]==="r":t.rows.value.bottom[0]==="l"),ve=o(()=>{const e={};return t.header.space===!0&&G.value===!1&&(I.value===!0?e.top=`${t.header.offset}px`:t.header.space===!0&&(e.top=`${t.header.size}px`)),t.footer.space===!0&&de.value===!1&&(I.value===!0?e.bottom=`${t.footer.offset}px`:t.footer.space===!0&&(e.bottom=`${t.footer.size}px`)),e}),ce=o(()=>{const e={width:`${v.value}px`,transform:`translateX(${Z.value}px)`};return n.value===!0?e:Object.assign(e,ve.value)}),fe=o(()=>"q-drawer__content fit "+(t.isContainer.value!==!0?"scroll":"overflow-auto")),he=o(()=>`q-drawer q-drawer--${a.side}`+(L.value===!0?" q-drawer--mini-animate":"")+(a.bordered===!0?" q-drawer--bordered":"")+(ue.value===!0?" q-drawer--dark q-dark":"")+(g.value===!0?" no-transition":u.value===!0?"":" q-layout--prevent-focus")+(n.value===!0?" fixed q-drawer--on-top q-drawer--mobile q-drawer--top-padding":` q-drawer--${x.value===!0?"mini":"standard"}`+(I.value===!0||C.value!==!0?" fixed":"")+(a.overlay===!0||a.miniToOverlay===!0?" q-drawer--on-top":"")+(G.value===!0?" q-drawer--top-padding":""))),me=o(()=>{const e=f.lang.rtl===!0?a.side:S.value;return[[j,ge,void 0,{[e]:!0,mouse:!0}]]}),ye=o(()=>{const e=f.lang.rtl===!0?S.value:a.side;return[[j,J,void 0,{[e]:!0,mouse:!0}]]}),be=o(()=>{const e=f.lang.rtl===!0?S.value:a.side;return[[j,J,void 0,{[e]:!0,mouse:!0,mouseAllDir:!0}]]});function F(){ke(n,a.behavior==="mobile"||a.behavior!=="desktop"&&t.totalWidth.value<=a.breakpoint)}s(n,e=>{e===!0?(P=u.value,u.value===!0&&B(!1)):a.overlay===!1&&a.behavior!=="mobile"&&P!==!1&&(u.value===!0?(c(0),y(0),Q()):A(!1))}),s(()=>a.side,(e,l)=>{t.instances[l]===T&&(t.instances[l]=void 0,t[l].space=!1,t[l].offset=0),t.instances[e]=T,t[e].size=v.value,t[e].space=C.value,t[e].offset=_.value}),s(t.totalWidth,()=>{(t.isContainer.value===!0||document.qScrollPrevented!==!0)&&F()}),s(()=>a.behavior+a.breakpoint,F),s(t.isContainer,e=>{u.value===!0&&W(e!==!0),e===!0&&F()}),s(t.scrollbarWidth,()=>{c(u.value===!0?0:void 0)}),s(_,e=>{b("offset",e)}),s(C,e=>{i("on-layout",e),b("space",e)}),s(h,()=>{c()}),s(v,e=>{c(),V(a.miniToOverlay,e)}),s(()=>a.miniToOverlay,e=>{V(e,v.value)}),s(()=>f.lang.rtl,()=>{c()}),s(()=>a.mini,()=>{a.modelValue===!0&&(we(),t.animate())}),s(x,e=>{i("mini-state",e)});function c(e){e===void 0?ae(()=>{e=u.value===!0?0:v.value,c(w.value*e)}):(t.isContainer.value===!0&&h.value===!0&&(n.value===!0||Math.abs(e)===v.value)&&(e+=w.value*t.scrollbarWidth.value),Z.value=e)}function y(e){Y.value=e}function H(e){const l=e===!0?"remove":t.isContainer.value!==!0?"add":"";l!==""&&document.body.classList[l]("q-body--drawer-toggle")}function we(){clearTimeout(z),m.proxy&&m.proxy.$el&&m.proxy.$el.classList.add("q-drawer--mini-animate"),L.value=!0,z=setTimeout(()=>{L.value=!1,m&&m.proxy&&m.proxy.$el&&m.proxy.$el.classList.remove("q-drawer--mini-animate")},150)}function ge(e){if(u.value!==!1)return;const l=v.value,d=D(e.distance.x,0,l);if(e.isFinal===!0){d>=Math.min(75,l)===!0?A():(t.animate(),y(0),c(w.value*l)),g.value=!1;return}c((f.lang.rtl===!0?h.value!==!0:h.value)?Math.max(l-d,0):Math.min(0,d-l)),y(D(d/l,0,1)),e.isFirst===!0&&(g.value=!0)}function J(e){if(u.value!==!0)return;const l=v.value,d=e.direction===a.side,$=(f.lang.rtl===!0?d!==!0:d)?D(e.distance.x,0,l):0;if(e.isFinal===!0){Math.abs($)<Math.min(75,l)===!0?(t.animate(),y(1),c(0)):B(),g.value=!1;return}c(w.value*$),y(D(1-$/l,0,1)),e.isFirst===!0&&(g.value=!0)}function Q(){W(!1),H(!0)}function b(e,l){t.update(a.side,e,l)}function ke(e,l){e.value!==l&&(e.value=l)}function V(e,l){b("size",e===!0?a.miniWidth:l)}return t.instances[a.side]=T,V(a.miniToOverlay,v.value),b("space",C.value),b("offset",_.value),a.showIfAbove===!0&&a.modelValue!==!0&&u.value===!0&&a["onUpdate:modelValue"]!==void 0&&i("update:modelValue",!0),_e(()=>{i("on-layout",C.value),i("mini-state",x.value),P=a.showIfAbove===!0;const e=()=>{(u.value===!0?K:X)(!1,!0)};if(t.totalWidth.value!==0){ae(e);return}q=s(t.totalWidth,()=>{q(),q=void 0,u.value===!1&&a.showIfAbove===!0&&n.value===!1?A(!1):e()})}),Ie(()=>{q!==void 0&&q(),clearTimeout(z),u.value===!0&&Q(),t.instances[a.side]===T&&(t.instances[a.side]=void 0,b("size",0),b("offset",0),b("space",!1))}),()=>{const e=[];n.value===!0&&(a.noSwipeOpen===!1&&e.push(Fe(M("div",{key:"open",class:`q-drawer__opener fixed-${a.side}`,"aria-hidden":"true"}),me.value)),e.push(te("div",{ref:"backdrop",class:ne.value,style:se.value,"aria-hidden":"true",onClick:B},void 0,"backdrop",a.noSwipeBackdrop!==!0&&u.value===!0,()=>be.value)));const l=x.value===!0&&r.mini!==void 0,d=[M("div",N(O({},E),{key:""+l,class:[fe.value,E.class]}),l===!0?r.mini():He(r.default))];return a.elevated===!0&&u.value===!0&&d.push(M("div",{class:"q-layout__shadow absolute-full overflow-hidden no-pointer-events"})),e.push(te("aside",{ref:"content",class:he.value,style:ce.value},d,"contentclose",a.noSwipeClose!==!0&&n.value===!0,()=>ye.value)),M("div",{class:"q-drawer-container"},e)}}});export{Re as Q};
