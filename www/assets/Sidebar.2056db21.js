var Z=Object.defineProperty,_=Object.defineProperties;var x=Object.getOwnPropertyDescriptors;var E=Object.getOwnPropertySymbols;var ee=Object.prototype.hasOwnProperty,ae=Object.prototype.propertyIsEnumerable;var N=(e,s,n)=>s in e?Z(e,s,{enumerable:!0,configurable:!0,writable:!0,value:n}):e[s]=n,R=(e,s)=>{for(var n in s||(s={}))ee.call(s,n)&&N(e,n,s[n]);if(E)for(var n of E(s))ae.call(s,n)&&N(e,n,s[n]);return e},T=(e,s)=>_(e,x(s));import{Q as se}from"./QSpace.df85bd0f.js";import{_ as oe,x as re,L as te,dk as ne,a as d,a0 as M,cS as ie,E as de,G as le,m as ue,o as i,b as l,w as r,q as t,U as ce,k as u,g as D,f as C,s as ve,j as p,al as q,N as b,ah as w,ag as Q,n as m,l as h,t as y,O as $,R as g,F as be,S as U,cX as A,d1 as pe}from"./index.21fe8de3.js";import{Q as ge}from"./QToolbar.29da0f2e.js";import{Q as fe}from"./QHeader.720c5d4a.js";import{Q as we}from"./QDrawer.8d7edd70.js";import{u as me}from"./quasar.esm.prod.f7b06fd8.js";const ye=re({name:"Sidebar",setup(){const e=te(),s=me(),n=ne.isPro(),j=s.platform.is.mobile,H=s.screen.sizes.md,P=d(()=>n?e.layout:e.layout.slice(0,1)),c=d(()=>e.drawerMiniMode),a=M(!0),S=M(P.value),F=o=>{const v=S.value.findIndex(k=>k.id===o.id);S.value[v]=T(R({},o),{revision:pe().substr(0,5)})};for(const o of P.value)o.config={icon:o.icon,title:o.title},ie.getBindings(o,F);const z=o=>e.set("drawerSidebar",o),W=d({get(){return e.drawerSidebar},set(o){z(o)}}),G=d(()=>e.settings),J=d(()=>{var o;return(o=e.getSelectedPage)==null?void 0:o.id}),O=o=>{var k,V;const v=(V=(k=o.tabs)==null?void 0:k[0])==null?void 0:V.id;if(!v)return console.warn("Sidebar","Page "+o.id+" has no tabs!",o),!1;e.set({selectedTabId:v})},X=d(()=>{var o,v;return((v=(o=e.getSelectedPage)==null?void 0:o.tabs)==null?void 0:v.count)||0}),K=d(()=>c.value===!0?!a.value:!0),B=d(()=>c.value===!0?X.value<=1:!0),I=M(),Y=d(()=>I.value&&I.value.$el.clientHeight||0),L=M(window.innerHeight-(B.value?40:0)),f=()=>{L.value=window.innerHeight-(B.value?40:0)};return de(()=>{window.addEventListener("orientationchange",f),window.addEventListener("resize",f)}),le(()=>{window.removeEventListener("orientationchange",f),window.removeEventListener("resize",f)}),{elementSidebarBottom:I,elementSidebarBottomHeight:Y,isPro:n,isSmartphone:j,maxMobileSize:H,windowHeight:L,onResize:f,itemsWithResolvedBindings:S,drawerMiniMode:c,drawerMiniState:a,sidebar:W,toggleSidebar:z,setPage:O,selectedPageId:J,expanded:K,header:B,settings:G}}}),he=h("jarvis"),Se={class:"headerInvisible"};function ke(e,s,n,j,H,P){const c=ue("icon");return i(),l(we,{ref:"drawer",modelValue:e.sidebar,"onUpdate:modelValue":s[1]||(s[1]=a=>e.sidebar=a),mini:e.drawerMiniMode&&e.drawerMiniState,onMouseover:s[2]||(s[2]=a=>e.drawerMiniState=!1),onMouseout:s[3]||(s[3]=a=>e.drawerMiniState=!0),"mini-to-overlay":"",bordered:"",behavior:e.drawerMiniMode?"default":"mobile",overlay:!e.drawerMiniMode,"show-if-above":e.drawerMiniMode,breakpoint:e.maxMobileSize,class:p(["jarvis-sidebar-container",{"jarvis-sidebar-minimode":e.drawerMiniMode===!0,"jarvis-tabs-bottom":e.settings.tabsBottom===!0,"jarvis-header-hidden":e.settings.headerVisible!==!0}]),"content-class":"jarvis-sidebar"},{default:r(()=>[e.drawerMiniMode!==!0?(i(),l(fe,{key:0,style:{position:"relative"}},{default:r(()=>[t(ge,null,{default:r(()=>[t(se),t(ce,{flat:"",dense:"",round:"",icon:"mdi-chevron-left","aria-label":"Menu",onClick:s[0]||(s[0]=a=>e.toggleSidebar(!1))})]),_:1})]),_:1})):u("",!0),D("div",{style:m({height:e.windowHeight-44+"px"}),class:"q-mt-xs"},[t(U,{dense:"",class:"jarvis-sidebar-items",style:m({"overflow-x":"hidden","overflow-y":e.expanded?"auto":"hidden",maxHeight:e.windowHeight-(e.header?40:0)-e.elementSidebarBottomHeight+"px"})},{default:r(()=>[(i(!0),C(be,null,ve(e.itemsWithResolvedBindings,a=>(i(),C("div",{key:a.id,class:p(["jarvis-sidebar-item",["jarvis-sidebar-item-"+a.type,"jarvis-"+a.type,"jarvis-"+a.type+"-"+a.id,a.tabs&&a.tabs[0]&&a.tabs[0].id?"jarvis-route-tab-"+(a.tabs&&a.tabs[0]&&a.tabs[0].id):""]])},[a.type==="divider"?(i(),l(q,{key:0,spaced:""})):u("",!0),a.type==="header"?b((i(),l(Q,{key:1,header:"",style:m({backgroundColor:a.backgroundColor,color:a.color})},{default:r(()=>[h(y(a.title),1)]),_:2},1032,["style"])),[[w,e.expanded]]):u("",!0),a.type==="header"?b((i(),C("div",{key:2,class:"headerInvisible",style:m({backgroundColor:a.backgroundColor,color:a.color})},"\xA0",4)),[[w,!e.expanded]]):u("",!0),!a.type||a.type==="page"?(i(),l($,{key:3,to:{params:{tabId:a.tabs&&a.tabs[0]&&a.tabs[0].id}},clickable:"",onClick:S=>e.setPage(a),class:p(["full-width",{selected:a.id===e.selectedPageId}]),style:m({backgroundColor:a.backgroundColor,color:a.color}),"active-class":"selected"},{default:r(()=>[t(g,{avatar:"",center:"",class:p({selectedText:a.id===e.selectedPageId})},{default:r(()=>[t(c,{name:a.icon,color:a.iconColor?a.iconColor:a.id===e.selectedPageId?"white":"primary"},null,8,["name","color"])]),_:2},1032,["class"]),t(g,null,{default:r(()=>[t(Q,{class:p({selectedText:a.id===e.selectedPageId})},{default:r(()=>[h(y(a.title),1)]),_:2},1032,["class"])]),_:2},1024)]),_:2},1032,["to","onClick","style","class"])):u("",!0),!a.type||a.type==="page"?(i(),C("div",{key:4,class:p(["spacer",{selected:a.id===e.selectedPageId}])},null,2)):u("",!0)],2))),128))]),_:1},8,["style"]),e.isSmartphone?u("",!0):b((i(),l(U,{key:0,ref:"elementSidebarBottom",class:"sidebarBottom"},{default:r(()=>[t(q,{spaced:""}),b(t(Q,{header:""},{default:r(()=>[he]),_:1},512),[[w,e.expanded]]),b(D("div",Se,"\xA0",512),[[w,!e.expanded]]),e.isPro?u("",!0):b((i(),l($,{key:0,clickable:"",to:{name:"AccountPage",params:e.$route.params},exact:""},{default:r(()=>[t(g,{avatar:""},{default:r(()=>[t(c,{name:"mdi-heart",color:"primary"})]),_:1}),t(g,null,{default:r(()=>[h(y(e.$t("Pro Account")),1)]),_:1})]),_:1},8,["to"])),[[A]]),b((i(),l($,{clickable:"",to:{name:"DevicesPage",params:e.$route.params},exact:"",id:"SettingsButton"},{default:r(()=>[t(g,{avatar:""},{default:r(()=>[t(c,{name:"mdi-cog",color:"primary"})]),_:1}),t(g,null,{default:r(()=>[h(y(e.$t("Configuration"))+" & "+y(e.$t("Help")),1)]),_:1})]),_:1},8,["to"])),[[A]])]),_:1},512)),[[w,e.settings.drawerShowSettings!==!1]])],4)]),_:1},8,["modelValue","mini","behavior","overlay","show-if-above","breakpoint","class"])}var je=oe(ye,[["render",ke]]);export{je as default};
